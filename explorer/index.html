<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>XSLT Explorer: docbook.xsl</title><meta name="viewport" content="width=device-width,initial-scale=1" /><link rel="shortcut icon" href="https://xslt.xmlexplorer.com/img/icon64.png" type="image/png" /><link rel="stylesheet" href="css/prism.css" /><link rel="stylesheet" href="css/xsltexplorer.css" /><link rel="schema.dc" href="http://purl.org/dc/elements/1.1/" /><meta name="dc.modified" content="2021-09-15T15:18:53Z" /><meta name="generator" content="XSLT Explorer 0.1.10 / 294d4e5" /><script src="js/prism.js"></script></head><body><main><h1><a href="https://xslt.xmlexplorer.com/"><img class="logo" src="https://xslt.xmlexplorer.com/img/logo256.png" /></a>XSLT Explorer: docbook.xsl</h1><p>48 imports, 657 templates, 205 functions, 88 variables, 146 params, 4 FIXME: comments</p><div class="toc"><span class="closed">List of Imports</span><ul><li><a href="#S-6566">main.xsl</a><ul><li><a href="#S-26643">param.xsl</a></li><li><a href="#S-22692">parameter-maps.xsl</a></li><li><a href="#S-7720">VERSION.xsl</a></li><li><a href="#S-23412">modules/variable.xsl</a></li><li><a href="#S-52537">modules/space.xsl</a></li><li><a href="#S-38369">modules/unhandled.xsl</a></li><li><a href="#S-29386">modules/errors.xsl</a></li><li><a href="#S-58558">modules/head.xsl</a></li><li><a href="#S-25794">modules/titles.xsl</a></li><li><a href="#S-46176">modules/units.xsl</a></li><li><a href="#S-38820">modules/shared.xsl</a></li><li><a href="#S-22317">modules/gentext.xsl</a></li><li><a href="#S-28936">modules/functions.xsl</a></li><li><a href="#S-46450">modules/toc.xsl</a></li><li><a href="#S-20999">modules/divisions.xsl</a></li><li><a href="#S-61301">modules/components.xsl</a></li><li><a href="#S-10909">modules/refentry.xsl</a></li><li><a href="#S-45868">modules/bibliography.xsl</a></li><li><a href="#S-28322">modules/glossary.xsl</a></li><li><a href="#S-58181">modules/index.xsl</a></li><li><a href="#S-7830">modules/sections.xsl</a></li><li><a href="#S-17405">modules/templates.xsl</a></li><li><a href="#S-4845">modules/titlepage.xsl</a></li><li><a href="#S-33240">modules/info.xsl</a></li><li><a href="#S-33116">modules/lists.xsl</a></li><li><a href="#S-34731">modules/blocks.xsl</a></li><li><a href="#S-15572">modules/admonitions.xsl</a></li><li><a href="#S-62162">modules/programming.xsl</a></li><li><a href="#S-18112">modules/msgset.xsl</a></li><li><a href="#S-51480">modules/objects.xsl</a></li><li><a href="#S-50448">modules/footnotes.xsl</a></li><li><a href="#S-56456">modules/verbatim.xsl</a><ul><li><a href="#S-16614">highlight.xsl</a></li></ul></li><li><a href="#S-59097">modules/tablecals.xsl</a></li><li><a href="#S-30699">modules/tablehtml.xsl</a></li><li><a href="#S-9504">modules/inlines.xsl</a></li><li><a href="#S-29523">modules/xlink.xsl</a></li><li><a href="#S-10318">modules/links.xsl</a></li><li><a href="#S-58081">modules/xref.xsl</a></li><li><a href="#S-10102">modules/attributes.xsl</a></li><li><a href="#S-624">modules/publishers.xsl</a></li><li><a href="#S-51165">modules/annotations.xsl</a></li><li><a href="#S-24095">modules/profile.xsl</a></li><li><a href="#S-59718">modules/chunk.xsl</a></li><li><a href="#S-7006">modules/chunk-cleanup.xsl</a></li><li><a href="#S-21031">modules/chunk-output.xsl</a></li></ul></li><li><a href="#S-46594">drivers.xsl</a></li></ul></div><div class="lot"><span class="closed">List of Templates</span><dl class="columns"><dt><a href="#S-10318-docbook.org.ns.docbook.templates.private.link">tp:link</a></dt><dt><a href="#S-10318-docbook.org.ns.docbook.templates.private.xref">tp:xref</a></dt><dt><a href="#S-17405-docbook.org.ns.docbook.templates.biblioentry">t:biblioentry</a></dt><dt><a href="#S-29523-docbook.org.ns.docbook.templates.private.out-of-line-xlink">tp:out-of-line-xlink</a></dt><dt><a href="#S-29523-docbook.org.ns.docbook.templates.private.simple-xlink">tp:simple-xlink</a></dt><dt><a href="#S-29523-docbook.org.ns.docbook.templates.xlink">t:xlink</a></dt><dt><a href="#S-33116-docbook.org.ns.docbook.templates.private.orderedlist-properties">tp:orderedlist-properties</a></dt><dt><a href="#S-33240-docbook.org.ns.docbook.templates.person-name">t:person-name</a></dt><dt><a href="#S-33240-docbook.org.ns.docbook.templates.person-name-family-given">t:person-name-family-given</a></dt><dt><a href="#S-33240-docbook.org.ns.docbook.templates.person-name-first-last">t:person-name-first-last</a></dt><dt><a href="#S-33240-docbook.org.ns.docbook.templates.person-name-last-first">t:person-name-last-first</a></dt><dt><a href="#S-33240-docbook.org.ns.docbook.templates.person-name-list">t:person-name-list</a></dt><dt><a href="#S-46450-docbook.org.ns.docbook.templates.private.toc">tp:toc</a></dt><dt><a href="#S-46594-docbook.org.ns.docbook.templates.chunk-cleanup">t:chunk-cleanup</a></dt><dt><a href="#S-46594-docbook.org.ns.docbook.templates.chunk-output">t:chunk-output</a></dt><dt><a href="#S-46594-docbook.org.ns.docbook.templates.docbook">t:docbook</a></dt><dt><a href="#S-46594-docbook.org.ns.docbook.templates.postprocess">t:postprocess</a></dt><dt><a href="#S-46594-docbook.org.ns.docbook.templates.preprocess">t:preprocess</a></dt><dt><a href="#S-46594-docbook.org.ns.docbook.templates.process">t:process</a></dt><dt><a href="#S-50448-docbook.org.ns.docbook.templates.table-footnotes">t:table-footnotes</a></dt><dt><a href="#S-51480-docbook.org.ns.docbook.templates.imagemap">t:imagemap</a></dt><dt><a href="#S-51480-docbook.org.ns.docbook.templates.private.process-object">tp:process-object</a></dt><dt><a href="#S-51480-docbook.org.ns.docbook.templates.private.viewport">tp:viewport</a></dt><dt><a href="#S-52707-docbook.org.ns.docbook.templates.private.docbook">tp:docbook</a></dt><dt><a href="#S-56456-docbook.org.ns.docbook.templates.private.filter-callouts">tp:filter-callouts</a></dt><dt><a href="#S-56456-docbook.org.ns.docbook.templates.private.verbatim">tp:verbatim</a></dt><dt><a href="#S-56456-docbook.org.ns.docbook.templates.private.verbatim-array">tp:verbatim-array</a></dt><dt><a href="#S-56456-docbook.org.ns.docbook.templates.private.verbatim-lines">tp:verbatim-lines</a></dt><dt><a href="#S-56456-docbook.org.ns.docbook.templates.private.verbatim-plain">tp:verbatim-plain</a></dt><dt><a href="#S-56456-docbook.org.ns.docbook.templates.private.verbatim-raw">tp:verbatim-raw</a></dt><dt><a href="#S-58181-docbook.org.ns.docbook.templates.generate-index">t:generate-index</a></dt><dt><a href="#S-58181-docbook.org.ns.docbook.templates.index-zone-reference">t:index-zone-reference</a></dt><dt><a href="#S-58181-docbook.org.ns.docbook.templates.private.indexed-section">tp:indexed-section</a></dt><dt><a href="#S-59097-docbook.org.ns.docbook.templates.private.cals-colspec">tp:cals-colspec</a></dt><dt><a href="#S-59097-docbook.org.ns.docbook.templates.private.cell">tp:cell</a></dt><dt><a href="#S-62162-docbook.org.ns.docbook.templates.private.group-or-arg">tp:group-or-arg</a></dt><dt><a href="#S-7006-docbook.org.ns.docbook.templates.bottom-nav">t:bottom-nav</a></dt><dt><a href="#S-7006-docbook.org.ns.docbook.templates.chunk-footnotes">t:chunk-footnotes</a></dt><dt><a href="#S-7006-docbook.org.ns.docbook.templates.top-nav">t:top-nav</a></dt><dt><a href="#S-9504-docbook.org.ns.docbook.templates.inline">t:inline</a></dt></dl></div><div class="lof"><span class="closed">List of Functions</span><dl class="columns"><dt><a href="#S-16614-docbook.org.ns.docbook.functions.private.syntax-highlight,0">fp:syntax-highlight()</a></dt><dt><a href="#S-16614-docbook.org.ns.docbook.functions.private.syntax-highlight,3">fp:syntax-highlight()</a></dt><dt><a href="#S-16614-docbook.org.ns.docbook.functions.syntax-highlight,1">f:syntax-highlight()</a></dt><dt><a href="#S-16614-docbook.org.ns.docbook.functions.syntax-highlight,2">f:syntax-highlight()</a></dt><dt><a href="#S-16614-docbook.org.ns.docbook.functions.syntax-highlight,3">f:syntax-highlight()</a></dt><dt><a href="#S-17405-docbook.org.ns.docbook.functions.private.construct-templates,2">fp:construct-templates()</a></dt><dt><a href="#S-17405-docbook.org.ns.docbook.functions.private.pick-template,2">fp:pick-template()</a></dt><dt><a href="#S-17405-docbook.org.ns.docbook.functions.template,2">f:template()</a></dt><dt><a href="#S-21031-docbook.org.ns.docbook.functions.private.patch-toc-href,2">fp:patch-toc-href()</a></dt><dt><a href="#S-22317-docbook.org.ns.docbook.functions.gentext,2">f:gentext()</a></dt><dt><a href="#S-22317-docbook.org.ns.docbook.functions.gentext,3">f:gentext()</a></dt><dt><a href="#S-22317-docbook.org.ns.docbook.functions.language,1">f:language()</a></dt><dt><a href="#S-22317-docbook.org.ns.docbook.functions.private.existing-localization,1">fp:existing-localization()</a></dt><dt><a href="#S-22317-docbook.org.ns.docbook.functions.private.gentext,4">fp:gentext()</a></dt><dt><a href="#S-22317-docbook.org.ns.docbook.functions.private.load-locales,0">fp:load-locales()</a></dt><dt><a href="#S-22317-docbook.org.ns.docbook.functions.private.localization,1">fp:localization()</a></dt><dt><a href="#S-22317-docbook.org.ns.docbook.functions.private.localization,2">fp:localization()</a></dt><dt><a href="#S-24095-docbook.org.ns.docbook.functions.private.check-profile,3">fp:check-profile()</a></dt><dt><a href="#S-24095-docbook.org.ns.docbook.functions.private.dynamic-include,2">fp:dynamic-include()</a></dt><dt><a href="#S-24095-docbook.org.ns.docbook.functions.private.dynamic-profile-tokens,1">fp:dynamic-profile-tokens()</a></dt><dt><a href="#S-24095-docbook.org.ns.docbook.functions.private.profile-suppress,1">fp:profile-suppress()</a></dt><dt><a href="#S-24095-docbook.org.ns.docbook.functions.private.profile-tokens,1">fp:profile-tokens()</a></dt><dt><a href="#S-25794-docbook.org.ns.docbook.functions.private.document-title-properties,1">fp:document-title-properties()</a></dt><dt><a href="#S-25794-docbook.org.ns.docbook.functions.private.title-properties,1">fp:title-properties()</a></dt><dt><a href="#S-28936-docbook.org.ns.docbook.functions.attributes,2">f:attributes()</a></dt><dt><a href="#S-28936-docbook.org.ns.docbook.functions.attributes,4">f:attributes()</a></dt><dt><a href="#S-28936-docbook.org.ns.docbook.functions.check-gentext,3">f:check-gentext()</a></dt><dt><a href="#S-28936-docbook.org.ns.docbook.functions.date-format,1">f:date-format()</a></dt><dt><a href="#S-28936-docbook.org.ns.docbook.functions.generate-id,1">f:generate-id()</a></dt><dt><a href="#S-28936-docbook.org.ns.docbook.functions.gentext-letters,1">f:gentext-letters()</a></dt><dt><a href="#S-28936-docbook.org.ns.docbook.functions.gentext-letters-for-language,1">f:gentext-letters-for-language()</a></dt><dt><a href="#S-28936-docbook.org.ns.docbook.functions.href,2">f:href()</a></dt><dt><a href="#S-28936-docbook.org.ns.docbook.functions.id,1">f:id()</a></dt><dt><a href="#S-28936-docbook.org.ns.docbook.functions.intra-number-separator,1">f:intra-number-separator()</a></dt><dt><a href="#S-28936-docbook.org.ns.docbook.functions.is-true,1">f:is-true()</a></dt><dt><a href="#S-28936-docbook.org.ns.docbook.functions.l10n-language,1">f:l10n-language()</a></dt><dt><a href="#S-28936-docbook.org.ns.docbook.functions.label-separator,1">f:label-separator()</a></dt><dt><a href="#S-28936-docbook.org.ns.docbook.functions.number-separator,1">f:number-separator()</a></dt><dt><a href="#S-28936-docbook.org.ns.docbook.functions.orderedlist-item-number,1">f:orderedlist-item-number()</a></dt><dt><a href="#S-28936-docbook.org.ns.docbook.functions.orderedlist-item-numeration,1">f:orderedlist-item-numeration()</a></dt><dt><a href="#S-28936-docbook.org.ns.docbook.functions.orderedlist-startingnumber,1">f:orderedlist-startingnumber()</a></dt><dt><a href="#S-28936-docbook.org.ns.docbook.functions.pi,2">f:pi()</a></dt><dt><a href="#S-28936-docbook.org.ns.docbook.functions.pi,3">f:pi()</a></dt><dt><a href="#S-28936-docbook.org.ns.docbook.functions.pi-attributes,1">f:pi-attributes()</a></dt><dt><a href="#S-28936-docbook.org.ns.docbook.functions.post-label-punctuation,1">f:post-label-punctuation()</a></dt><dt><a href="#S-28936-docbook.org.ns.docbook.functions.post-label-punctuation,2">f:post-label-punctuation()</a></dt><dt><a href="#S-28936-docbook.org.ns.docbook.functions.private.label-format,1">fp:label-format()</a></dt><dt><a href="#S-28936-docbook.org.ns.docbook.functions.private.lookup-string,3">fp:lookup-string()</a></dt><dt><a href="#S-28936-docbook.org.ns.docbook.functions.private.parse-key-value-pairs,1">fp:parse-key-value-pairs()</a></dt><dt><a href="#S-28936-docbook.org.ns.docbook.functions.private.parse-key-value-pairs,2">fp:parse-key-value-pairs()</a></dt><dt><a href="#S-28936-docbook.org.ns.docbook.functions.private.pi-attributes,2">fp:pi-attributes()</a></dt><dt><a href="#S-28936-docbook.org.ns.docbook.functions.private.pi-from-list,3">fp:pi-from-list()</a></dt><dt><a href="#S-28936-docbook.org.ns.docbook.functions.private.pi-pi-attributes,2">fp:pi-pi-attributes()</a></dt><dt><a href="#S-28936-docbook.org.ns.docbook.functions.private.properties,2">fp:properties()</a></dt><dt><a href="#S-28936-docbook.org.ns.docbook.functions.private.replace-element,3">fp:replace-element()</a></dt><dt><a href="#S-28936-docbook.org.ns.docbook.functions.private.replace-element,5">fp:replace-element()</a></dt><dt><a href="#S-28936-docbook.org.ns.docbook.functions.private.separator,2">fp:separator()</a></dt><dt><a href="#S-28936-docbook.org.ns.docbook.functions.refsection,1">f:refsection()</a></dt><dt><a href="#S-28936-docbook.org.ns.docbook.functions.section,1">f:section()</a></dt><dt><a href="#S-28936-docbook.org.ns.docbook.functions.section-depth,1">f:section-depth()</a></dt><dt><a href="#S-28936-docbook.org.ns.docbook.functions.spaces,1">f:spaces()</a></dt><dt><a href="#S-28936-docbook.org.ns.docbook.functions.step-number,1">f:step-number()</a></dt><dt><a href="#S-28936-docbook.org.ns.docbook.functions.step-numeration,1">f:step-numeration()</a></dt><dt><a href="#S-28936-docbook.org.ns.docbook.functions.target,2">f:target()</a></dt><dt><a href="#S-28936-docbook.org.ns.docbook.functions.tokenize-on-char,2">f:tokenize-on-char()</a></dt><dt><a href="#S-29523-docbook.org.ns.docbook.functions.private.find-xlink-nodes,3">fp:find-xlink-nodes()</a></dt><dt><a href="#S-29523-docbook.org.ns.docbook.functions.private.pmuj,2">fp:pmuj()</a></dt><dt><a href="#S-29523-docbook.org.ns.docbook.functions.private.pmuj-enabled,1">fp:pmuj-enabled()</a></dt><dt><a href="#S-29523-docbook.org.ns.docbook.functions.private.xlink-sources,1">fp:xlink-sources()</a></dt><dt><a href="#S-29523-docbook.org.ns.docbook.functions.private.xlink-targets,1">fp:xlink-targets()</a></dt><dt><a href="#S-29523-docbook.org.ns.docbook.functions.private.xlink-xmlns-scheme,5">fp:xlink-xmlns-scheme()</a></dt><dt><a href="#S-29523-docbook.org.ns.docbook.functions.private.xlink-xpath-scheme,5">fp:xlink-xpath-scheme()</a></dt><dt><a href="#S-29523-docbook.org.ns.docbook.functions.xlink-style,1">f:xlink-style()</a></dt><dt><a href="#S-29523-docbook.org.ns.docbook.functions.xpointer-idref,1">f:xpointer-idref()</a></dt><dt><a href="#S-33116-docbook.org.ns.docbook.functions.private.estimated-term-length,1">fp:estimated-term-length()</a></dt><dt><a href="#S-33116-docbook.org.ns.docbook.functions.private.select-vert-members,2">fp:select-vert-members()</a></dt><dt><a href="#S-33240-docbook.org.ns.docbook.functions.private.collapse-years,1">fp:collapse-years()</a></dt><dt><a href="#S-33240-docbook.org.ns.docbook.functions.private.collapse-years,4">fp:collapse-years()</a></dt><dt><a href="#S-38820-docbook.org.ns.docbook.functions.generate-id,1">f:generate-id()</a></dt><dt><a href="#S-38820-docbook.org.ns.docbook.functions.generate-id,2">f:generate-id()</a></dt><dt><a href="#S-38820-docbook.org.ns.docbook.functions.id,1">f:id()</a></dt><dt><a href="#S-38820-docbook.org.ns.docbook.functions.unique-id,1">f:unique-id()</a></dt><dt><a href="#S-46176-docbook.org.ns.docbook.functions.absolute-length,1">f:absolute-length()</a></dt><dt><a href="#S-46176-docbook.org.ns.docbook.functions.empty-length,0">f:empty-length()</a></dt><dt><a href="#S-46176-docbook.org.ns.docbook.functions.equal-lengths,2">f:equal-lengths()</a></dt><dt><a href="#S-46176-docbook.org.ns.docbook.functions.is-empty-length,1">f:is-empty-length()</a></dt><dt><a href="#S-46176-docbook.org.ns.docbook.functions.length-string,1">f:length-string()</a></dt><dt><a href="#S-46176-docbook.org.ns.docbook.functions.length-units,1">f:length-units()</a></dt><dt><a href="#S-46176-docbook.org.ns.docbook.functions.make-length,1">f:make-length()</a></dt><dt><a href="#S-46176-docbook.org.ns.docbook.functions.make-length,2">f:make-length()</a></dt><dt><a href="#S-46176-docbook.org.ns.docbook.functions.make-length,3">f:make-length()</a></dt><dt><a href="#S-46176-docbook.org.ns.docbook.functions.parse-length,1">f:parse-length()</a></dt><dt><a href="#S-46176-docbook.org.ns.docbook.functions.relative-length,1">f:relative-length()</a></dt><dt><a href="#S-50448-docbook.org.ns.docbook.functions.private.footnote-mark,2">fp:footnote-mark()</a></dt><dt><a href="#S-50448-docbook.org.ns.docbook.functions.private.footnote-number,1">fp:footnote-number()</a></dt><dt><a href="#S-51480-docbook.org.ns.docbook.functions.css-length,2">f:css-length()</a></dt><dt><a href="#S-51480-docbook.org.ns.docbook.functions.css-property,2">f:css-property()</a></dt><dt><a href="#S-51480-docbook.org.ns.docbook.functions.object-align,1">f:object-align()</a></dt><dt><a href="#S-51480-docbook.org.ns.docbook.functions.object-contentheight,2">f:object-contentheight()</a></dt><dt><a href="#S-51480-docbook.org.ns.docbook.functions.object-contentwidth,2">f:object-contentwidth()</a></dt><dt><a href="#S-51480-docbook.org.ns.docbook.functions.object-height,1">f:object-height()</a></dt><dt><a href="#S-51480-docbook.org.ns.docbook.functions.object-properties,1">f:object-properties()</a></dt><dt><a href="#S-51480-docbook.org.ns.docbook.functions.object-scale,1">f:object-scale()</a></dt><dt><a href="#S-51480-docbook.org.ns.docbook.functions.object-scalefit,1">f:object-scalefit()</a></dt><dt><a href="#S-51480-docbook.org.ns.docbook.functions.object-valign,1">f:object-valign()</a></dt><dt><a href="#S-51480-docbook.org.ns.docbook.functions.object-width,1">f:object-width()</a></dt><dt><a href="#S-51480-docbook.org.ns.docbook.functions.resolve-object-uri,1">f:resolve-object-uri()</a></dt><dt><a href="#S-51480-docbook.org.ns.docbook.functions.select-mediaobject,1">f:select-mediaobject()</a></dt><dt><a href="#S-51480-docbook.org.ns.docbook.functions.select-mediaobject-data,1">f:select-mediaobject-data()</a></dt><dt><a href="#S-51480-docbook.org.ns.docbook.functions.select-mediaobject-data,2">f:select-mediaobject-data()</a></dt><dt><a href="#S-56456-docbook.org.ns.docbook.functions.highlight-verbatim,1">f:highlight-verbatim()</a></dt><dt><a href="#S-56456-docbook.org.ns.docbook.functions.private.array-append,2">fp:array-append()</a></dt><dt><a href="#S-56456-docbook.org.ns.docbook.functions.private.array-pad,2">fp:array-pad()</a></dt><dt><a href="#S-56456-docbook.org.ns.docbook.functions.private.balance-line,2">fp:balance-line()</a></dt><dt><a href="#S-56456-docbook.org.ns.docbook.functions.private.balance-markup,1">fp:balance-markup()</a></dt><dt><a href="#S-56456-docbook.org.ns.docbook.functions.private.balance-markup,3">fp:balance-markup()</a></dt><dt><a href="#S-56456-docbook.org.ns.docbook.functions.private.contains,2">fp:contains()</a></dt><dt><a href="#S-56456-docbook.org.ns.docbook.functions.private.following,2">fp:following()</a></dt><dt><a href="#S-56456-docbook.org.ns.docbook.functions.private.inject,4">fp:inject()</a></dt><dt><a href="#S-56456-docbook.org.ns.docbook.functions.private.inject-array,2">fp:inject-array()</a></dt><dt><a href="#S-56456-docbook.org.ns.docbook.functions.private.inject-into-chars,5">fp:inject-into-chars()</a></dt><dt><a href="#S-56456-docbook.org.ns.docbook.functions.private.inject-into-line,3">fp:inject-into-line()</a></dt><dt><a href="#S-56456-docbook.org.ns.docbook.functions.private.injection-array,1">fp:injection-array()</a></dt><dt><a href="#S-56456-docbook.org.ns.docbook.functions.private.line-to-chars,1">fp:line-to-chars()</a></dt><dt><a href="#S-56456-docbook.org.ns.docbook.functions.private.make-lines,2">fp:make-lines()</a></dt><dt><a href="#S-56456-docbook.org.ns.docbook.functions.private.make-lines,3">fp:make-lines()</a></dt><dt><a href="#S-56456-docbook.org.ns.docbook.functions.private.open,2">fp:open()</a></dt><dt><a href="#S-56456-docbook.org.ns.docbook.functions.private.trim-trailing-blank-lines,1">fp:trim-trailing-blank-lines()</a></dt><dt><a href="#S-56456-docbook.org.ns.docbook.functions.private.unflatten,1">fp:unflatten()</a></dt><dt><a href="#S-56456-docbook.org.ns.docbook.functions.private.unflatten,2">fp:unflatten()</a></dt><dt><a href="#S-56456-docbook.org.ns.docbook.functions.private.unflatten-line,1">fp:unflatten-line()</a></dt><dt><a href="#S-56456-docbook.org.ns.docbook.functions.private.unflatten-line,2">fp:unflatten-line()</a></dt><dt><a href="#S-56456-docbook.org.ns.docbook.functions.private.up-to,2">fp:up-to()</a></dt><dt><a href="#S-56456-docbook.org.ns.docbook.functions.private.validate-injection-array,1">fp:validate-injection-array()</a></dt><dt><a href="#S-56456-docbook.org.ns.docbook.functions.private.verbatim-properties,1">fp:verbatim-properties()</a></dt><dt><a href="#S-56456-docbook.org.ns.docbook.functions.verbatim-highlight,1">f:verbatim-highlight()</a></dt><dt><a href="#S-56456-docbook.org.ns.docbook.functions.verbatim-numbered,1">f:verbatim-numbered()</a></dt><dt><a href="#S-56456-docbook.org.ns.docbook.functions.verbatim-style,1">f:verbatim-style()</a></dt><dt><a href="#S-56456-docbook.org.ns.docbook.functions.verbatim-trim-trailing,1">f:verbatim-trim-trailing()</a></dt><dt><a href="#S-58081-docbook.org.ns.docbook.functions.private.crossref-properties,1">fp:crossref-properties()</a></dt><dt><a href="#S-58081-docbook.org.ns.docbook.functions.private.document-crossref-properties,1">fp:document-crossref-properties()</a></dt><dt><a href="#S-58181-docbook.org.ns.docbook.functions.private.group-index,2">fp:group-index()</a></dt><dt><a href="#S-58181-docbook.org.ns.docbook.functions.private.group-label,2">fp:group-label()</a></dt><dt><a href="#S-58181-docbook.org.ns.docbook.functions.private.nearest-section,1">fp:nearest-section()</a></dt><dt><a href="#S-58181-docbook.org.ns.docbook.functions.private.nearest-section-id,1">fp:nearest-section-id()</a></dt><dt><a href="#S-58181-docbook.org.ns.docbook.functions.private.primary,1">fp:primary()</a></dt><dt><a href="#S-58181-docbook.org.ns.docbook.functions.private.scope,4">fp:scope()</a></dt><dt><a href="#S-58181-docbook.org.ns.docbook.functions.private.secondary,1">fp:secondary()</a></dt><dt><a href="#S-58181-docbook.org.ns.docbook.functions.private.tertiary,1">fp:tertiary()</a></dt><dt><a href="#S-59097-docbook.org.ns.docbook.functions.cals-colsep,3">f:cals-colsep()</a></dt><dt><a href="#S-59097-docbook.org.ns.docbook.functions.cals-rowsep,3">f:cals-rowsep()</a></dt><dt><a href="#S-59097-docbook.org.ns.docbook.functions.private.align-char-pad,3">fp:align-char-pad()</a></dt><dt><a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.align,3">fcals:align()</a></dt><dt><a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.align-colspec,2">fcals:align-colspec()</a></dt><dt><a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.align-spanspec,2">fcals:align-spanspec()</a></dt><dt><a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.cell,4">fcals:cell()</a></dt><dt><a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.cell-decoration,3">fcals:cell-decoration()</a></dt><dt><a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.cell-overhang,2">fcals:cell-overhang()</a></dt><dt><a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.char,3">fcals:char()</a></dt><dt><a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.char-colspec,2">fcals:char-colspec()</a></dt><dt><a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.char-spanspec,2">fcals:char-spanspec()</a></dt><dt><a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.colsep,3">fcals:colsep()</a></dt><dt><a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.colsep-colspec,2">fcals:colsep-colspec()</a></dt><dt><a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.colsep-spanspec,2">fcals:colsep-spanspec()</a></dt><dt><a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.colspan,2">fcals:colspan()</a></dt><dt><a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.colspec,2">fcals:colspec()</a></dt><dt><a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.colspec-column-number,1">fcals:colspec-column-number()</a></dt><dt><a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.colspec-for-column,2">fcals:colspec-for-column()</a></dt><dt><a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.column-number,2">fcals:column-number()</a></dt><dt><a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.decrement-overhang,1">fcals:decrement-overhang()</a></dt><dt><a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.empty-cell-colsep,2">fcals:empty-cell-colsep()</a></dt><dt><a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.empty-cell-rowsep,1">fcals:empty-cell-rowsep()</a></dt><dt><a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.next-empty-cell,2">fcals:next-empty-cell()</a></dt><dt><a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.overhang,1">fcals:overhang()</a></dt><dt><a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.overhang-into-row,1">fcals:overhang-into-row()</a></dt><dt><a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.rowsep,3">fcals:rowsep()</a></dt><dt><a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.rowsep-colspec,2">fcals:rowsep-colspec()</a></dt><dt><a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.rowsep-spanspec,2">fcals:rowsep-spanspec()</a></dt><dt><a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.rowspan,2">fcals:rowspan()</a></dt><dt><a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.spanspec,2">fcals:spanspec()</a></dt><dt><a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.table-columns,1">fcals:table-columns()</a></dt><dt><a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.tgroup,1">fcals:tgroup()</a></dt><dt><a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.valign,2">fcals:valign()</a></dt><dt><a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.zeros,1">fcals:zeros()</a></dt><dt><a href="#S-59097-docbook.org.ns.docbook.functions.private.colspec-for-colnum,3">fp:colspec-for-colnum()</a></dt><dt><a href="#S-59097-docbook.org.ns.docbook.functions.private.only-initial-pis,1">fp:only-initial-pis()</a></dt><dt><a href="#S-59718-docbook.org.ns.docbook.functions.chunk,1">f:chunk()</a></dt><dt><a href="#S-59718-docbook.org.ns.docbook.functions.chunk-filename,1">f:chunk-filename()</a></dt><dt><a href="#S-59718-docbook.org.ns.docbook.functions.private.chunk-exclude,1">fp:chunk-exclude()</a></dt><dt><a href="#S-59718-docbook.org.ns.docbook.functions.private.chunk-include,1">fp:chunk-include()</a></dt><dt><a href="#S-59718-docbook.org.ns.docbook.functions.private.chunk-navigation,1">fp:chunk-navigation()</a></dt><dt><a href="#S-59718-docbook.org.ns.docbook.functions.private.matches-expr,2">fp:matches-expr()</a></dt><dt><a href="#S-59718-docbook.org.ns.docbook.functions.private.root-base-uri,1">fp:root-base-uri()</a></dt><dt><a href="#S-59718-docbook.org.ns.docbook.functions.private.trim-common-parts,2">fp:trim-common-parts()</a></dt><dt><a href="#S-59718-docbook.org.ns.docbook.functions.private.trim-common-prefix,2">fp:trim-common-prefix()</a></dt><dt><a href="#S-7006-docbook.org.ns.docbook.functions.chunk-title,1">f:chunk-title()</a></dt><dt><a href="#S-7006-docbook.org.ns.docbook.functions.private.chunk-output-filename,1">fp:chunk-output-filename()</a></dt><dt><a href="#S-7006-docbook.org.ns.docbook.functions.private.footnote-mark,2">fp:footnote-mark()</a></dt><dt><a href="#S-7006-docbook.org.ns.docbook.functions.private.footnote-number,1">fp:footnote-number()</a></dt><dt><a href="#S-7006-docbook.org.ns.docbook.functions.private.navigable,1">fp:navigable()</a></dt><dt><a href="#S-7006-docbook.org.ns.docbook.functions.private.relative-link,2">fp:relative-link()</a></dt><dt><a href="#S-7006-docbook.org.ns.docbook.functions.private.relative-uri,3">fp:relative-uri()</a></dt><dt><a href="#S-7006-docbook.org.ns.docbook.functions.private.root-base-uri,1">fp:root-base-uri()</a></dt><dt><a href="#S-7006-docbook.org.ns.docbook.functions.private.trim-common-parts,2">fp:trim-common-parts()</a></dt><dt><a href="#S-7006-docbook.org.ns.docbook.functions.private.trim-common-prefix,2">fp:trim-common-prefix()</a></dt></dl></div><div class="stylesheet" id="S-52707"><h1>docbook.xsl</h1><p><span class="import all">2 imports</span></p><div class="stylesheet" id="S-6566"><h2>main.xsl</h2><p><span class="import all">45 imports</span></p><div class="stylesheet" id="S-26643"><h3>param.xsl</h3><p><span><span class="variable all">1 variable</span></span>, <span><span class="param all">143 params</span> (<span class="param elsewhere">2 used only in one other module</span>)</span></p><div class="instructions"><div class="title closed">Instructions</div><div class="body"><div id="S-26643-..debug" class="instruction param"><div class="title"><span class="link"></span>Param <code>$debug</code> as <code>xs:string</code> [static]</div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-22692-docbook.org.ns.docbook.variables.private.static-parameters">$vp:static-parameters</a>, <a href="#S-23412-docbook.org.ns.docbook.variables.debug">$v:debug</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-22692">parameter-maps.xsl</a>, <a href="#S-23412">modules/variable.xsl</a></div></div></div><div id="S-26643-..xspec" class="instruction param elsewhere"><div class="title"><span class="link"></span>Param <code>$xspec</code> as <code>xs:string</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a></div><div class="used-in"><span class="marker" title="Only used in one other module">☝</span>Used in: <a href="#S-22692">parameter-maps.xsl</a></div></div></div><div id="S-26643-..gentext-language" class="instruction param"><div class="title"><span class="link"></span>Param <code>$gentext-language</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-28936-docbook.org.ns.docbook.functions.l10n-language,1">f:l10n-language()</a>, <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-22692">parameter-maps.xsl</a>, <a href="#S-28936">modules/functions.xsl</a></div></div></div><div id="S-26643-..verbatim-line-style" class="instruction param"><div class="title"><span class="link"></span>Param <code>$verbatim-line-style</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a>, <a href="#S-23412-docbook.org.ns.docbook.variables.verbatim-line-style">$v:verbatim-line-style</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-22692">parameter-maps.xsl</a>, <a href="#S-23412">modules/variable.xsl</a></div></div></div><div id="S-26643-..verbatim-plain-style" class="instruction param"><div class="title"><span class="link"></span>Param <code>$verbatim-plain-style</code> as <code>xs:string</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a>, <a href="#S-23412-docbook.org.ns.docbook.variables.verbatim-plain-style">$v:verbatim-plain-style</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-22692">parameter-maps.xsl</a>, <a href="#S-23412">modules/variable.xsl</a></div></div></div><div id="S-26643-..verbatim-space" class="instruction param"><div class="title"><span class="link"></span>Param <code>$verbatim-space</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a>, <a href="#S-23412-docbook.org.ns.docbook.variables.verbatim-space">$v:verbatim-space</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-22692">parameter-maps.xsl</a>, <a href="#S-23412">modules/variable.xsl</a></div></div></div><div id="S-26643-..verbatim-trim-trailing-blank-lines" class="instruction param"><div class="title"><span class="link"></span>Param <code>$verbatim-trim-trailing-blank-lines</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-56456-docbook.org.ns.docbook.functions.verbatim-trim-trailing,1">f:verbatim-trim-trailing()</a>, <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-22692">parameter-maps.xsl</a>, <a href="#S-56456">modules/verbatim.xsl</a></div></div></div><div id="S-26643-..verbatim-style-default" class="instruction param"><div class="title"><span class="link"></span>Param <code>$verbatim-style-default</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-56456-docbook.org.ns.docbook.functions.private.verbatim-properties,1">fp:verbatim-properties()</a>, <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-22692">parameter-maps.xsl</a>, <a href="#S-56456">modules/verbatim.xsl</a></div></div></div><div id="S-26643-..verbatim-numbered-elements" class="instruction param"><div class="title"><span class="link"></span>Param <code>$verbatim-numbered-elements</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a>, <a href="#S-23412-docbook.org.ns.docbook.variables.verbatim-numbered-elements">$v:verbatim-numbered-elements</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-22692">parameter-maps.xsl</a>, <a href="#S-23412">modules/variable.xsl</a></div></div></div><div id="S-26643-..verbatim-number-minlines" class="instruction param"><div class="title"><span class="link"></span>Param <code>$verbatim-number-minlines</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a>, <a href="#S-23412-docbook.org.ns.docbook.variables.verbatim-number-minlines">$v:verbatim-number-minlines</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-22692">parameter-maps.xsl</a>, <a href="#S-23412">modules/variable.xsl</a></div></div></div><div id="S-26643-..verbatim-number-every-nth" class="instruction param"><div class="title"><span class="link"></span>Param <code>$verbatim-number-every-nth</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a>, <a href="#S-23412-docbook.org.ns.docbook.variables.verbatim-number-every-nth">$v:verbatim-number-every-nth</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-22692">parameter-maps.xsl</a>, <a href="#S-23412">modules/variable.xsl</a></div></div></div><div id="S-26643-..verbatim-number-first-line" class="instruction param"><div class="title"><span class="link"></span>Param <code>$verbatim-number-first-line</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a>, <a href="#S-23412-docbook.org.ns.docbook.variables.verbatim-number-first-line">$v:verbatim-number-first-line</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-22692">parameter-maps.xsl</a>, <a href="#S-23412">modules/variable.xsl</a></div></div></div><div id="S-26643-..verbatim-callouts" class="instruction param"><div class="title"><span class="link"></span>Param <code>$verbatim-callouts</code> as <code>xs:string</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a>, <a href="#S-23412-docbook.org.ns.docbook.variables.verbatim-callouts">$v:verbatim-callouts</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-22692">parameter-maps.xsl</a>, <a href="#S-23412">modules/variable.xsl</a></div></div></div><div id="S-26643-..verbatim-syntax-highlighter" class="instruction param"><div class="title"><span class="link"></span>Param <code>$verbatim-syntax-highlighter</code> as <code>xs:string</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-58558-t-1">template</a>, <a href="#S-58558-t-8">template</a>, <a href="#S-56456-t-1">template</a>, <a href="#S-56456-docbook.org.ns.docbook.functions.verbatim-highlight,1">f:verbatim-highlight()</a>, <a href="#S-56456-docbook.org.ns.docbook.functions.verbatim-numbered,1">f:verbatim-numbered()</a>, <a href="#S-56456-docbook.org.ns.docbook.functions.verbatim-style,1">f:verbatim-style()</a>, <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-22692">parameter-maps.xsl</a>, <a href="#S-58558">modules/head.xsl</a>, <a href="#S-56456">modules/verbatim.xsl</a></div></div></div><div id="S-26643-..verbatim-syntax-highlight-languages" class="instruction param"><div class="title"><span class="link"></span>Param <code>$verbatim-syntax-highlight-languages</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a>, <a href="#S-23412-docbook.org.ns.docbook.variables.verbatim-syntax-highlight-languages">$v:verbatim-syntax-highlight-languages</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-22692">parameter-maps.xsl</a>, <a href="#S-23412">modules/variable.xsl</a></div></div></div><div id="S-26643-..callout-default-column" class="instruction param"><div class="title"><span class="link"></span>Param <code>$callout-default-column</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-56456-t-11">template</a>, <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-22692">parameter-maps.xsl</a>, <a href="#S-56456">modules/verbatim.xsl</a></div></div></div><div id="S-26643-..pixels-per-inch" class="instruction param"><div class="title"><span class="link"></span>Param <code>$pixels-per-inch</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a>, <a href="#S-46176-docbook.org.ns.docbook.variables.unit-scale">$v:unit-scale</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-22692">parameter-maps.xsl</a>, <a href="#S-46176">modules/units.xsl</a></div></div></div><div id="S-26643-..nominal-page-width" class="instruction param"><div class="title"><span class="link"></span>Param <code>$nominal-page-width</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a>, <a href="#S-23412-docbook.org.ns.docbook.variables.nominal-page-width">$v:nominal-page-width</a>, <a href="#S-26643-..image-nominal-width">$image-nominal-width</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-26643">param.xsl</a>, <a href="#S-22692">parameter-maps.xsl</a>, <a href="#S-23412">modules/variable.xsl</a></div></div></div><div id="S-26643-..default-length-magnitude" class="instruction param"><div class="title"><span class="link"></span>Param <code>$default-length-magnitude</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-46176-docbook.org.ns.docbook.functions.parse-length,1">f:parse-length()</a>, <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-22692">parameter-maps.xsl</a>, <a href="#S-46176">modules/units.xsl</a></div></div></div><div id="S-26643-..default-length-unit" class="instruction param"><div class="title"><span class="link"></span>Param <code>$default-length-unit</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-46176-docbook.org.ns.docbook.functions.parse-length,1">f:parse-length()</a>, <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-22692">parameter-maps.xsl</a>, <a href="#S-46176">modules/units.xsl</a></div></div></div><div id="S-26643-..table-accessibility" class="instruction param"><div class="title"><span class="link"></span>Param <code>$table-accessibility</code> as <code>xs:string*</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-59097-t-1">template</a>, <a href="#S-59097-t-2">template</a>, <a href="#S-59097-t-3">template</a>, <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-22692">parameter-maps.xsl</a>, <a href="#S-59097">modules/tablecals.xsl</a></div></div></div><div id="S-26643-..mediaobject-accessibility" class="instruction param"><div class="title"><span class="link"></span>Param <code>$mediaobject-accessibility</code> as <code>xs:string*</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-51480-t-8">template</a>, <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-22692">parameter-maps.xsl</a>, <a href="#S-51480">modules/objects.xsl</a></div></div></div><div id="S-26643-..align-char-default" class="instruction param"><div class="title"><span class="link"></span>Param <code>$align-char-default</code> as <code>xs:string</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-59097-t-6">template</a>, <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-22692">parameter-maps.xsl</a>, <a href="#S-59097">modules/tablecals.xsl</a></div></div></div><div id="S-26643-..align-char-width" class="instruction param"><div class="title"><span class="link"></span>Param <code>$align-char-width</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-59097-t-6">template</a>, <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-22692">parameter-maps.xsl</a>, <a href="#S-59097">modules/tablecals.xsl</a></div></div></div><div id="S-26643-..align-char-pad" class="instruction param"><div class="title"><span class="link"></span>Param <code>$align-char-pad</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-59097-t-6">template</a>, <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-22692">parameter-maps.xsl</a>, <a href="#S-59097">modules/tablecals.xsl</a></div></div></div><div id="S-26643-..mediaobject-exclude-extensions" class="instruction param"><div class="title"><span class="link"></span>Param <code>$mediaobject-exclude-extensions</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-51480-t-26">template</a>, <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-22692">parameter-maps.xsl</a>, <a href="#S-51480">modules/objects.xsl</a></div></div></div><div id="S-26643-..mediaobject-input-base-uri" class="instruction param"><div class="title"><span class="link"></span>Param <code>$mediaobject-input-base-uri</code> as <code>xs:string</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a>, <a href="#S-23412-docbook.org.ns.docbook.variables.mediaobject-input-base-uri">$v:mediaobject-input-base-uri</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-22692">parameter-maps.xsl</a>, <a href="#S-23412">modules/variable.xsl</a></div></div></div><div id="S-26643-..mediaobject-output-base-uri" class="instruction param"><div class="title"><span class="link"></span>Param <code>$mediaobject-output-base-uri</code> as <code>xs:string</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a>, <a href="#S-23412-docbook.org.ns.docbook.variables.mediaobject-output-base-uri">$v:mediaobject-output-base-uri</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-22692">parameter-maps.xsl</a>, <a href="#S-23412">modules/variable.xsl</a></div></div></div><div id="S-26643-..image-ignore-scaling" class="instruction param"><div class="title"><span class="link"></span>Param <code>$image-ignore-scaling</code> as <code>xs:boolean</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-51480-docbook.org.ns.docbook.functions.object-contentheight,2">f:object-contentheight()</a>, <a href="#S-51480-docbook.org.ns.docbook.functions.object-contentwidth,2">f:object-contentwidth()</a>, <a href="#S-51480-docbook.org.ns.docbook.functions.object-height,1">f:object-height()</a>, <a href="#S-51480-docbook.org.ns.docbook.functions.object-scale,1">f:object-scale()</a>, <a href="#S-51480-docbook.org.ns.docbook.functions.object-scalefit,1">f:object-scalefit()</a>, <a href="#S-51480-docbook.org.ns.docbook.functions.object-width,1">f:object-width()</a>, <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-22692">parameter-maps.xsl</a>, <a href="#S-51480">modules/objects.xsl</a></div></div></div><div id="S-26643-..image-property-warning" class="instruction param"><div class="title"><span class="link"></span>Param <code>$image-property-warning</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-51480-docbook.org.ns.docbook.functions.object-properties,1">f:object-properties()</a>, <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-22692">parameter-maps.xsl</a>, <a href="#S-51480">modules/objects.xsl</a></div></div></div><div id="S-26643-..image-nominal-width" class="instruction param"><div class="title"><span class="link"></span>Param <code>$image-nominal-width</code></div><div class="props"><div class="uses">Uses: <a href="#S-26643-..nominal-page-width">$nominal-page-width</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a>, <a href="#S-23412-docbook.org.ns.docbook.variables.image-nominal-width">$v:image-nominal-width</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-22692">parameter-maps.xsl</a>, <a href="#S-23412">modules/variable.xsl</a></div></div></div><div id="S-26643-..image-nominal-height" class="instruction param"><div class="title"><span class="link"></span>Param <code>$image-nominal-height</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a>, <a href="#S-23412-docbook.org.ns.docbook.variables.image-nominal-height">$v:image-nominal-height</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-22692">parameter-maps.xsl</a>, <a href="#S-23412">modules/variable.xsl</a></div></div></div><div id="S-26643-..default-personal-name-style" class="instruction param"><div class="title"><span class="link"></span>Param <code>$default-personal-name-style</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-33240-t-7">template</a>, <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-22692">parameter-maps.xsl</a>, <a href="#S-33240">modules/info.xsl</a></div></div></div><div id="S-26643-..othername-in-middle" class="instruction param"><div class="title"><span class="link"></span>Param <code>$othername-in-middle</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-33240-docbook.org.ns.docbook.templates.person-name-first-last">t:person-name-first-last</a>, <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-22692">parameter-maps.xsl</a>, <a href="#S-33240">modules/info.xsl</a></div></div></div><div id="S-26643-..productionset-lhs-rhs-separator" class="instruction param"><div class="title"><span class="link"></span>Param <code>$productionset-lhs-rhs-separator</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-62162-t-4">template</a>, <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-22692">parameter-maps.xsl</a>, <a href="#S-62162">modules/programming.xsl</a></div></div></div><div id="S-26643-..date-date-format" class="instruction param"><div class="title"><span class="link"></span>Param <code>$date-date-format</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-33240-t-20">template</a>, <a href="#S-28936-docbook.org.ns.docbook.functions.date-format,1">f:date-format()</a>, <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-22692">parameter-maps.xsl</a>, <a href="#S-28936">modules/functions.xsl</a>, <a href="#S-33240">modules/info.xsl</a></div></div></div><div id="S-26643-..date-dateTime-format" class="instruction param"><div class="title"><span class="link"></span>Param <code>$date-dateTime-format</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-33240-t-20">template</a>, <a href="#S-9504-t-103">template</a>, <a href="#S-28936-docbook.org.ns.docbook.functions.date-format,1">f:date-format()</a>, <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-22692">parameter-maps.xsl</a>, <a href="#S-28936">modules/functions.xsl</a>, <a href="#S-33240">modules/info.xsl</a>, <a href="#S-9504">modules/inlines.xsl</a></div></div></div><div id="S-26643-..qandaset-default-toc" class="instruction param"><div class="title"><span class="link"></span>Param <code>$qandaset-default-toc</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-34731-t-14">template</a>, <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a>, <a href="#S-26643-..qandadiv-default-toc">$qandadiv-default-toc</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-26643">param.xsl</a>, <a href="#S-22692">parameter-maps.xsl</a>, <a href="#S-34731">modules/blocks.xsl</a></div></div></div><div id="S-26643-..qandadiv-default-toc" class="instruction param"><div class="title"><span class="link"></span>Param <code>$qandadiv-default-toc</code></div><div class="props"><div class="uses">Uses: <a href="#S-26643-..qandaset-default-toc">$qandaset-default-toc</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-34731-t-20">template</a>, <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-22692">parameter-maps.xsl</a>, <a href="#S-34731">modules/blocks.xsl</a></div></div></div><div id="S-26643-..qandaset-default-label" class="instruction param"><div class="title"><span class="link"></span>Param <code>$qandaset-default-label</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-25794-t-8">template</a>, <a href="#S-25794-t-9">template</a>, <a href="#S-58081-t-4">template</a>, <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-22692">parameter-maps.xsl</a>, <a href="#S-25794">modules/titles.xsl</a>, <a href="#S-58081">modules/xref.xsl</a></div></div></div><div id="S-26643-..funcsynopsis-default-style" class="instruction param"><div class="title"><span class="link"></span>Param <code>$funcsynopsis-default-style</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-62162-t-13">template</a>, <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-22692">parameter-maps.xsl</a>, <a href="#S-62162">modules/programming.xsl</a></div></div></div><div id="S-26643-..funcsynopsis-table-threshold" class="instruction param"><div class="title"><span class="link"></span>Param <code>$funcsynopsis-table-threshold</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-62162-t-16">template</a>, <a href="#S-62162-t-58">template</a>, <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-22692">parameter-maps.xsl</a>, <a href="#S-62162">modules/programming.xsl</a></div></div></div><div id="S-26643-..funcsynopsis-trailing-punctuation" class="instruction param"><div class="title"><span class="link"></span>Param <code>$funcsynopsis-trailing-punctuation</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-62162-t-16">template</a>, <a href="#S-62162-t-41">template</a>, <a href="#S-62162-t-42">template</a>, <a href="#S-62162-t-46">template</a>, <a href="#S-62162-t-58">template</a>, <a href="#S-62162-t-76">template</a>, <a href="#S-62162-t-77">template</a>, <a href="#S-62162-t-78">template</a>, <a href="#S-62162-t-91">template</a>, <a href="#S-62162-t-92">template</a>, <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-22692">parameter-maps.xsl</a>, <a href="#S-62162">modules/programming.xsl</a></div></div></div><div id="S-26643-..classsynopsis-indent" class="instruction param"><div class="title"><span class="link"></span>Param <code>$classsynopsis-indent</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-62162-t-85">template</a>, <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-22692">parameter-maps.xsl</a>, <a href="#S-62162">modules/programming.xsl</a></div></div></div><div id="S-26643-..copyright-collapse-years" class="instruction param"><div class="title"><span class="link"></span>Param <code>$copyright-collapse-years</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-33240-t-3">template</a>, <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-22692">parameter-maps.xsl</a>, <a href="#S-33240">modules/info.xsl</a></div></div></div><div id="S-26643-..copyright-year-separator" class="instruction param"><div class="title"><span class="link"></span>Param <code>$copyright-year-separator</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-33240-docbook.org.ns.docbook.functions.private.collapse-years,1">fp:collapse-years()</a>, <a href="#S-33240-docbook.org.ns.docbook.functions.private.collapse-years,4">fp:collapse-years()</a>, <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-22692">parameter-maps.xsl</a>, <a href="#S-33240">modules/info.xsl</a></div></div></div><div id="S-26643-..copyright-year-range-separator" class="instruction param"><div class="title"><span class="link"></span>Param <code>$copyright-year-range-separator</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-33240-docbook.org.ns.docbook.functions.private.collapse-years,1">fp:collapse-years()</a>, <a href="#S-33240-docbook.org.ns.docbook.functions.private.collapse-years,4">fp:collapse-years()</a>, <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-22692">parameter-maps.xsl</a>, <a href="#S-33240">modules/info.xsl</a></div></div></div><div id="S-26643-..division-numbers-inherit" class="instruction param"><div class="title"><span class="link"></span>Param <code>$division-numbers-inherit</code> as <code>xs:string</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a>, <a href="#S-25794-docbook.org.ns.docbook.variables.title-properties">$v:title-properties</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-22692">parameter-maps.xsl</a>, <a href="#S-25794">modules/titles.xsl</a></div></div></div><div id="S-26643-..component-numbers-inherit" class="instruction param"><div class="title"><span class="link"></span>Param <code>$component-numbers-inherit</code> as <code>xs:string</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a>, <a href="#S-25794-docbook.org.ns.docbook.variables.title-properties">$v:title-properties</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-22692">parameter-maps.xsl</a>, <a href="#S-25794">modules/titles.xsl</a></div></div></div><div id="S-26643-..section-numbers" class="instruction param"><div class="title"><span class="link"></span>Param <code>$section-numbers</code> as <code>xs:string</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a>, <a href="#S-25794-docbook.org.ns.docbook.variables.title-properties">$v:title-properties</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-22692">parameter-maps.xsl</a>, <a href="#S-25794">modules/titles.xsl</a></div></div></div><div id="S-26643-..section-numbers-inherit" class="instruction param"><div class="title"><span class="link"></span>Param <code>$section-numbers-inherit</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a>, <a href="#S-25794-docbook.org.ns.docbook.variables.title-properties">$v:title-properties</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-22692">parameter-maps.xsl</a>, <a href="#S-25794">modules/titles.xsl</a></div></div></div><div id="S-26643-..number-single-appendix" class="instruction param"><div class="title"><span class="link"></span>Param <code>$number-single-appendix</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-25794-t-13">template</a>, <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-22692">parameter-maps.xsl</a>, <a href="#S-25794">modules/titles.xsl</a></div></div></div><div id="S-26643-..generate-toc" class="instruction param"><div class="title"><span class="link"></span>Param <code>$generate-toc</code> as <code>xs:string</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-46450-t-2">template</a>, <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-22692">parameter-maps.xsl</a>, <a href="#S-46450">modules/toc.xsl</a></div></div></div><div id="S-26643-..generate-nested-toc" class="instruction param"><div class="title"><span class="link"></span>Param <code>$generate-nested-toc</code> as <code>xs:string</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-46450-t-2">template</a>, <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-22692">parameter-maps.xsl</a>, <a href="#S-46450">modules/toc.xsl</a></div></div></div><div id="S-26643-..generate-trivial-toc" class="instruction param"><div class="title"><span class="link"></span>Param <code>$generate-trivial-toc</code> as <code>xs:string</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-46450-docbook.org.ns.docbook.templates.private.toc">tp:toc</a>, <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-22692">parameter-maps.xsl</a>, <a href="#S-46450">modules/toc.xsl</a></div></div></div><div id="S-26643-..section-toc-depth" class="instruction param"><div class="title"><span class="link"></span>Param <code>$section-toc-depth</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a>, <a href="#S-26643-docbook.org.ns.docbook.variables.private.section-toc-depth">$vp:section-toc-depth</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-26643">param.xsl</a>, <a href="#S-22692">parameter-maps.xsl</a></div></div></div><div id="S-26643-docbook.org.ns.docbook.variables.private.section-toc-depth" class="instruction param"><div class="title"><span class="link"></span>Param <code>$vp:section-toc-depth</code> as <code>xs:integer</code></div><div class="props"><div class="uses">Uses: <a href="#S-26643-..section-toc-depth">$section-toc-depth</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-46450-t-2">template</a>, <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-22692">parameter-maps.xsl</a>, <a href="#S-46450">modules/toc.xsl</a></div></div></div><div id="S-26643-..annotation-style" class="instruction param"><div class="title"><span class="link"></span>Param <code>$annotation-style</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-7006-t-4">template</a>, <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-22692">parameter-maps.xsl</a>, <a href="#S-7006">modules/chunk-cleanup.xsl</a></div></div></div><div id="S-26643-..annotation-mark" class="instruction param"><div class="title"><span class="link"></span>Param <code>$annotation-mark</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-51165-t-1">template</a>, <a href="#S-51165-t-3">template</a>, <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-22692">parameter-maps.xsl</a>, <a href="#S-51165">modules/annotations.xsl</a></div></div></div><div id="S-26643-..annotation-placement" class="instruction param"><div class="title"><span class="link"></span>Param <code>$annotation-placement</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-46594-docbook.org.ns.docbook.templates.preprocess">t:preprocess</a>, <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-22692">parameter-maps.xsl</a>, <a href="#S-46594">drivers.xsl</a></div></div></div><div id="S-26643-..xlink-style" class="instruction param"><div class="title"><span class="link"></span>Param <code>$xlink-style</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-29523-docbook.org.ns.docbook.functions.xlink-style,1">f:xlink-style()</a>, <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-22692">parameter-maps.xsl</a>, <a href="#S-29523">modules/xlink.xsl</a></div></div></div><div id="S-26643-..xlink-style-default" class="instruction param"><div class="title"><span class="link"></span>Param <code>$xlink-style-default</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-29523-docbook.org.ns.docbook.functions.xlink-style,1">f:xlink-style()</a>, <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-22692">parameter-maps.xsl</a>, <a href="#S-29523">modules/xlink.xsl</a></div></div></div><div id="S-26643-..xlink-icon-open" class="instruction param"><div class="title"><span class="link"></span>Param <code>$xlink-icon-open</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-6566-t-1">template</a>, <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-6566">main.xsl</a>, <a href="#S-22692">parameter-maps.xsl</a></div></div></div><div id="S-26643-..xlink-icon-closed" class="instruction param"><div class="title"><span class="link"></span>Param <code>$xlink-icon-closed</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-6566-t-1">template</a>, <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-6566">main.xsl</a>, <a href="#S-22692">parameter-maps.xsl</a></div></div></div><div id="S-26643-..revhistory-style" class="instruction param"><div class="title"><span class="link"></span>Param <code>$revhistory-style</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-34731-t-8">template</a>, <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-22692">parameter-maps.xsl</a>, <a href="#S-34731">modules/blocks.xsl</a></div></div></div><div id="S-26643-..segmentedlist-style" class="instruction param"><div class="title"><span class="link"></span>Param <code>$segmentedlist-style</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-33116-t-11">template</a>, <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-22692">parameter-maps.xsl</a>, <a href="#S-33116">modules/lists.xsl</a></div></div></div><div id="S-26643-..formal-object-title-placement" class="instruction param"><div class="title"><span class="link"></span>Param <code>$formal-object-title-placement</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a>, <a href="#S-23412-docbook.org.ns.docbook.variables.formal-object-title-placement">$v:formal-object-title-placement</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-22692">parameter-maps.xsl</a>, <a href="#S-23412">modules/variable.xsl</a></div></div></div><div id="S-26643-..lists-of-figures" class="instruction param"><div class="title"><span class="link"></span>Param <code>$lists-of-figures</code> as <code>xs:string</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-46450-t-15">template</a>, <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-22692">parameter-maps.xsl</a>, <a href="#S-46450">modules/toc.xsl</a></div></div></div><div id="S-26643-..lists-of-tables" class="instruction param"><div class="title"><span class="link"></span>Param <code>$lists-of-tables</code> as <code>xs:string</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-46450-t-17">template</a>, <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-22692">parameter-maps.xsl</a>, <a href="#S-46450">modules/toc.xsl</a></div></div></div><div id="S-26643-..lists-of-examples" class="instruction param"><div class="title"><span class="link"></span>Param <code>$lists-of-examples</code> as <code>xs:string</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-46450-t-19">template</a>, <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-22692">parameter-maps.xsl</a>, <a href="#S-46450">modules/toc.xsl</a></div></div></div><div id="S-26643-..lists-of-equations" class="instruction param"><div class="title"><span class="link"></span>Param <code>$lists-of-equations</code> as <code>xs:string</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-46450-t-21">template</a>, <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-22692">parameter-maps.xsl</a>, <a href="#S-46450">modules/toc.xsl</a></div></div></div><div id="S-26643-..lists-of-procedures" class="instruction param"><div class="title"><span class="link"></span>Param <code>$lists-of-procedures</code> as <code>xs:string</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-46450-t-23">template</a>, <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-22692">parameter-maps.xsl</a>, <a href="#S-46450">modules/toc.xsl</a></div></div></div><div id="S-26643-..variablelist-termlength-threshold" class="instruction param"><div class="title"><span class="link"></span>Param <code>$variablelist-termlength-threshold</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-10102-t-6">template</a>, <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-22692">parameter-maps.xsl</a>, <a href="#S-10102">modules/attributes.xsl</a></div></div></div><div id="S-26643-..procedure-step-numeration" class="instruction param"><div class="title"><span class="link"></span>Param <code>$procedure-step-numeration</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-28936-docbook.org.ns.docbook.functions.step-numeration,1">f:step-numeration()</a>, <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-22692">parameter-maps.xsl</a>, <a href="#S-28936">modules/functions.xsl</a></div></div></div><div id="S-26643-..orderedlist-item-numeration" class="instruction param"><div class="title"><span class="link"></span>Param <code>$orderedlist-item-numeration</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-28936-docbook.org.ns.docbook.functions.orderedlist-item-numeration,1">f:orderedlist-item-numeration()</a>, <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-22692">parameter-maps.xsl</a>, <a href="#S-28936">modules/functions.xsl</a></div></div></div><div id="S-26643-..refentry-generate-name" class="instruction param"><div class="title"><span class="link"></span>Param <code>$refentry-generate-name</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-10909-t-3">template</a>, <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-22692">parameter-maps.xsl</a>, <a href="#S-10909">modules/refentry.xsl</a></div></div></div><div id="S-26643-..refentry-generate-title" class="instruction param"><div class="title"><span class="link"></span>Param <code>$refentry-generate-title</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-10909-t-3">template</a>, <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-22692">parameter-maps.xsl</a>, <a href="#S-10909">modules/refentry.xsl</a></div></div></div><div id="S-26643-..annotate-toc" class="instruction param"><div class="title"><span class="link"></span>Param <code>$annotate-toc</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-46450-t-25">template</a>, <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-22692">parameter-maps.xsl</a>, <a href="#S-46450">modules/toc.xsl</a></div></div></div><div id="S-26643-..callout-unicode-start" class="instruction param"><div class="title"><span class="link"></span>Param <code>$callout-unicode-start</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-62162-t-99">template</a>, <a href="#S-56456-t-16">template</a>, <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-22692">parameter-maps.xsl</a>, <a href="#S-62162">modules/programming.xsl</a>, <a href="#S-56456">modules/verbatim.xsl</a></div></div></div><div id="S-26643-..index-show-entries" class="instruction param"><div class="title"><span class="link"></span>Param <code>$index-show-entries</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-58181-t-1">template</a>, <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-22692">parameter-maps.xsl</a>, <a href="#S-58181">modules/index.xsl</a></div></div></div><div id="S-26643-..generate-index" class="instruction param"><div class="title"><span class="link"></span>Param <code>$generate-index</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-58181-t-3">template</a>, <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-22692">parameter-maps.xsl</a>, <a href="#S-58181">modules/index.xsl</a></div></div></div><div id="S-26643-..index-on-role" class="instruction param"><div class="title"><span class="link"></span>Param <code>$index-on-role</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-58181-docbook.org.ns.docbook.templates.generate-index">t:generate-index</a>, <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-22692">parameter-maps.xsl</a>, <a href="#S-58181">modules/index.xsl</a></div></div></div><div id="S-26643-..index-on-type" class="instruction param"><div class="title"><span class="link"></span>Param <code>$index-on-type</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-58181-docbook.org.ns.docbook.templates.generate-index">t:generate-index</a>, <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-22692">parameter-maps.xsl</a>, <a href="#S-58181">modules/index.xsl</a></div></div></div><div id="S-26643-..indexed-section-groups" class="instruction param"><div class="title"><span class="link"></span>Param <code>$indexed-section-groups</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-58181-t-10">template</a>, <a href="#S-58181-docbook.org.ns.docbook.templates.private.indexed-section">tp:indexed-section</a>, <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-22692">parameter-maps.xsl</a>, <a href="#S-58181">modules/index.xsl</a></div></div></div><div id="S-26643-..glossary-sort-entries" class="instruction param"><div class="title"><span class="link"></span>Param <code>$glossary-sort-entries</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-28322-t-1">template</a>, <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-22692">parameter-maps.xsl</a>, <a href="#S-28322">modules/glossary.xsl</a></div></div></div><div id="S-26643-..sort-collation" class="instruction param"><div class="title"><span class="link"></span>Param <code>$sort-collation</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-28322-t-1">template</a>, <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-22692">parameter-maps.xsl</a>, <a href="#S-28322">modules/glossary.xsl</a></div></div></div><div id="S-26643-..default-float-style" class="instruction param"><div class="title"><span class="link"></span>Param <code>$default-float-style</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-10102-t-19">template</a>, <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-22692">parameter-maps.xsl</a>, <a href="#S-10102">modules/attributes.xsl</a></div></div></div><div id="S-26643-..show-remarks" class="instruction param"><div class="title"><span class="link"></span>Param <code>$show-remarks</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-34731-t-24">template</a>, <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-22692">parameter-maps.xsl</a>, <a href="#S-34731">modules/blocks.xsl</a></div></div></div><div id="S-26643-..sidebar-as-aside" class="instruction param"><div class="title"><span class="link"></span>Param <code>$sidebar-as-aside</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-34731-t-13">template</a>, <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-22692">parameter-maps.xsl</a>, <a href="#S-34731">modules/blocks.xsl</a></div></div></div><div id="S-26643-..resource-base-uri" class="instruction param"><div class="title"><span class="link"></span>Param <code>$resource-base-uri</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-58558-t-1">template</a>, <a href="#S-58558-t-8">template</a>, <a href="#S-6566-t-1">template</a>, <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-6566">main.xsl</a>, <a href="#S-22692">parameter-maps.xsl</a>, <a href="#S-58558">modules/head.xsl</a></div></div></div><div id="S-26643-..css-links" class="instruction param"><div class="title"><span class="link"></span>Param <code>$css-links</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a>, <a href="#S-23412-docbook.org.ns.docbook.variables.css-links">$v:css-links</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-22692">parameter-maps.xsl</a>, <a href="#S-23412">modules/variable.xsl</a></div></div></div><div id="S-26643-..verbatim-syntax-highlight-css" class="instruction param"><div class="title"><span class="link"></span>Param <code>$verbatim-syntax-highlight-css</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-58558-t-1">template</a>, <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-22692">parameter-maps.xsl</a>, <a href="#S-58558">modules/head.xsl</a></div></div></div><div id="S-26643-..persistent-toc-css" class="instruction param"><div class="title"><span class="link"></span>Param <code>$persistent-toc-css</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-58558-t-8">template</a>, <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-22692">parameter-maps.xsl</a>, <a href="#S-58558">modules/head.xsl</a></div></div></div><div id="S-26643-..oxy-markup-css" class="instruction param"><div class="title"><span class="link"></span>Param <code>$oxy-markup-css</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-58558-t-1">template</a>, <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-22692">parameter-maps.xsl</a>, <a href="#S-58558">modules/head.xsl</a></div></div></div><div id="S-26643-..oxy-markup" class="instruction param"><div class="title"><span class="link"></span>Param <code>$oxy-markup</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-46594-docbook.org.ns.docbook.templates.preprocess">t:preprocess</a>, <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-22692">parameter-maps.xsl</a>, <a href="#S-46594">drivers.xsl</a></div></div></div><div id="S-26643-..annotations-js" class="instruction param"><div class="title"><span class="link"></span>Param <code>$annotations-js</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-6566-t-1">template</a>, <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-6566">main.xsl</a>, <a href="#S-22692">parameter-maps.xsl</a></div></div></div><div id="S-26643-..xlink-js" class="instruction param"><div class="title"><span class="link"></span>Param <code>$xlink-js</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-6566-t-1">template</a>, <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-6566">main.xsl</a>, <a href="#S-22692">parameter-maps.xsl</a></div></div></div><div id="S-26643-..persistent-toc-js" class="instruction param"><div class="title"><span class="link"></span>Param <code>$persistent-toc-js</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-6566-t-1">template</a>, <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-6566">main.xsl</a>, <a href="#S-22692">parameter-maps.xsl</a></div></div></div><div id="S-26643-..mathml-js" class="instruction param"><div class="title"><span class="link"></span>Param <code>$mathml-js</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-6566-t-1">template</a>, <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-6566">main.xsl</a>, <a href="#S-22692">parameter-maps.xsl</a></div></div></div><div id="S-26643-..control-js" class="instruction param"><div class="title"><span class="link"></span>Param <code>$control-js</code> as <code>xs:string</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-6566-t-1">template</a>, <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-6566">main.xsl</a>, <a href="#S-22692">parameter-maps.xsl</a></div></div></div><div id="S-26643-..theme-picker" class="instruction param"><div class="title"><span class="link"></span>Param <code>$theme-picker</code> as <code>xs:string</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-6566-t-1">template</a>, <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-6566">main.xsl</a>, <a href="#S-22692">parameter-maps.xsl</a></div></div></div><div id="S-26643-..chunk" class="instruction param"><div class="title"><span class="link"></span>Param <code>$chunk</code> as <code>xs:string?</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-7006-t-4">template</a>, <a href="#S-6566-t-1">template</a>, <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a>, <a href="#S-26643-docbook.org.ns.docbook.variables.chunk">$v:chunk</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-6566">main.xsl</a>, <a href="#S-26643">param.xsl</a>, <a href="#S-22692">parameter-maps.xsl</a>, <a href="#S-7006">modules/chunk-cleanup.xsl</a></div></div></div><div id="S-26643-..chunk-nav" class="instruction param"><div class="title"><span class="link"></span>Param <code>$chunk-nav</code> as <code>xs:string</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-6566-t-1">template</a>, <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-6566">main.xsl</a>, <a href="#S-22692">parameter-maps.xsl</a></div></div></div><div id="S-26643-..chunk-nav-js" class="instruction param"><div class="title"><span class="link"></span>Param <code>$chunk-nav-js</code> as <code>xs:string</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-6566-t-1">template</a>, <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-6566">main.xsl</a>, <a href="#S-22692">parameter-maps.xsl</a></div></div></div><div id="S-26643-docbook.org.ns.docbook.variables.chunk" class="instruction variable"><div class="title"><span class="link"></span>Variable <code>$v:chunk</code> as <code>xs:boolean</code></div><div class="props"><div class="uses">Uses: <a href="#S-26643-..chunk">$chunk</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-21031-t-1">template</a>, <a href="#S-21031-t-2">template</a>, <a href="#S-59718-docbook.org.ns.docbook.functions.chunk,1">f:chunk()</a>, <a href="#S-26643-..chunk-output-base-uri">$chunk-output-base-uri</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-26643">param.xsl</a>, <a href="#S-59718">modules/chunk.xsl</a>, <a href="#S-21031">modules/chunk-output.xsl</a></div></div></div><div id="S-26643-..chunk-output-base-uri" class="instruction param"><div class="title"><span class="link"></span>Param <code>$chunk-output-base-uri</code> as <code>xs:string</code></div><div class="props"><div class="uses">Uses: <a href="#S-26643-docbook.org.ns.docbook.variables.chunk">$v:chunk</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-7006-docbook.org.ns.docbook.functions.private.chunk-output-filename,1">fp:chunk-output-filename()</a>, <a href="#S-59718-docbook.org.ns.docbook.functions.private.root-base-uri,1">fp:root-base-uri()</a>, <a href="#S-7006-docbook.org.ns.docbook.functions.private.root-base-uri,1">fp:root-base-uri()</a>, <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-22692">parameter-maps.xsl</a>, <a href="#S-59718">modules/chunk.xsl</a>, <a href="#S-7006">modules/chunk-cleanup.xsl</a></div></div></div><div id="S-26643-..chunk-section-depth" class="instruction param"><div class="title"><span class="link"></span>Param <code>$chunk-section-depth</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-59718-docbook.org.ns.docbook.functions.private.chunk-include,1">fp:chunk-include()</a>, <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-22692">parameter-maps.xsl</a>, <a href="#S-59718">modules/chunk.xsl</a></div></div></div><div id="S-26643-..chunk-renumber-footnotes" class="instruction param"><div class="title"><span class="link"></span>Param <code>$chunk-renumber-footnotes</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a>, <a href="#S-23412-docbook.org.ns.docbook.variables.chunk-renumber-footnotes">$v:chunk-renumber-footnotes</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-22692">parameter-maps.xsl</a>, <a href="#S-23412">modules/variable.xsl</a></div></div></div><div id="S-26643-..chunk-include" class="instruction param"><div class="title"><span class="link"></span>Param <code>$chunk-include</code> as <code>xs:string*</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-59718-docbook.org.ns.docbook.functions.private.chunk-include,1">fp:chunk-include()</a>, <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-22692">parameter-maps.xsl</a>, <a href="#S-59718">modules/chunk.xsl</a></div></div></div><div id="S-26643-..chunk-exclude" class="instruction param"><div class="title"><span class="link"></span>Param <code>$chunk-exclude</code> as <code>xs:string*</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-59718-docbook.org.ns.docbook.functions.private.chunk-exclude,1">fp:chunk-exclude()</a>, <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-22692">parameter-maps.xsl</a>, <a href="#S-59718">modules/chunk.xsl</a></div></div></div><div id="S-26643-..html-extension" class="instruction param"><div class="title"><span class="link"></span>Param <code>$html-extension</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-59718-docbook.org.ns.docbook.functions.chunk-filename,1">f:chunk-filename()</a>, <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-22692">parameter-maps.xsl</a>, <a href="#S-59718">modules/chunk.xsl</a></div></div></div><div id="S-26643-..footnote-numeration" class="instruction param"><div class="title"><span class="link"></span>Param <code>$footnote-numeration</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-50448-t-4">template</a>, <a href="#S-7006-t-13">template</a>, <a href="#S-7006-t-21">template</a>, <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-22692">parameter-maps.xsl</a>, <a href="#S-50448">modules/footnotes.xsl</a>, <a href="#S-7006">modules/chunk-cleanup.xsl</a></div></div></div><div id="S-26643-..table-footnote-numeration" class="instruction param"><div class="title"><span class="link"></span>Param <code>$table-footnote-numeration</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-50448-t-4">template</a>, <a href="#S-7006-t-21">template</a>, <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-22692">parameter-maps.xsl</a>, <a href="#S-50448">modules/footnotes.xsl</a>, <a href="#S-7006">modules/chunk-cleanup.xsl</a></div></div></div><div id="S-26643-..persistent-toc" class="instruction param"><div class="title"><span class="link"></span>Param <code>$persistent-toc</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-58558-t-8">template</a>, <a href="#S-7006-t-4">template</a>, <a href="#S-21031-t-4">template</a>, <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-22692">parameter-maps.xsl</a>, <a href="#S-58558">modules/head.xsl</a>, <a href="#S-7006">modules/chunk-cleanup.xsl</a>, <a href="#S-21031">modules/chunk-output.xsl</a></div></div></div><div id="S-26643-..persistent-toc-search" class="instruction param"><div class="title"><span class="link"></span>Param <code>$persistent-toc-search</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-21031-t-4">template</a>, <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-22692">parameter-maps.xsl</a>, <a href="#S-21031">modules/chunk-output.xsl</a></div></div></div><div id="S-26643-..profile-separator" class="instruction param"><div class="title"><span class="link"></span>Param <code>$profile-separator</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-24095-docbook.org.ns.docbook.functions.private.dynamic-profile-tokens,1">fp:dynamic-profile-tokens()</a>, <a href="#S-24095-docbook.org.ns.docbook.functions.private.profile-tokens,1">fp:profile-tokens()</a>, <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-22692">parameter-maps.xsl</a>, <a href="#S-24095">modules/profile.xsl</a></div></div></div><div id="S-26643-..profile-lang" class="instruction param"><div class="title"><span class="link"></span>Param <code>$profile-lang</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a>, <a href="#S-24095-docbook.org.ns.docbook.variables.private.profile-value-map">$vp:profile-value-map</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-22692">parameter-maps.xsl</a>, <a href="#S-24095">modules/profile.xsl</a></div></div></div><div id="S-26643-..profile-revisionflag" class="instruction param"><div class="title"><span class="link"></span>Param <code>$profile-revisionflag</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a>, <a href="#S-24095-docbook.org.ns.docbook.variables.private.profile-value-map">$vp:profile-value-map</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-22692">parameter-maps.xsl</a>, <a href="#S-24095">modules/profile.xsl</a></div></div></div><div id="S-26643-..profile-role" class="instruction param"><div class="title"><span class="link"></span>Param <code>$profile-role</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a>, <a href="#S-24095-docbook.org.ns.docbook.variables.private.profile-value-map">$vp:profile-value-map</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-22692">parameter-maps.xsl</a>, <a href="#S-24095">modules/profile.xsl</a></div></div></div><div id="S-26643-..profile-arch" class="instruction param"><div class="title"><span class="link"></span>Param <code>$profile-arch</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a>, <a href="#S-24095-docbook.org.ns.docbook.variables.private.profile-value-map">$vp:profile-value-map</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-22692">parameter-maps.xsl</a>, <a href="#S-24095">modules/profile.xsl</a></div></div></div><div id="S-26643-..profile-audience" class="instruction param"><div class="title"><span class="link"></span>Param <code>$profile-audience</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a>, <a href="#S-24095-docbook.org.ns.docbook.variables.private.profile-value-map">$vp:profile-value-map</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-22692">parameter-maps.xsl</a>, <a href="#S-24095">modules/profile.xsl</a></div></div></div><div id="S-26643-..profile-condition" class="instruction param"><div class="title"><span class="link"></span>Param <code>$profile-condition</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a>, <a href="#S-24095-docbook.org.ns.docbook.variables.private.profile-value-map">$vp:profile-value-map</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-22692">parameter-maps.xsl</a>, <a href="#S-24095">modules/profile.xsl</a></div></div></div><div id="S-26643-..profile-conformance" class="instruction param"><div class="title"><span class="link"></span>Param <code>$profile-conformance</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a>, <a href="#S-24095-docbook.org.ns.docbook.variables.private.profile-value-map">$vp:profile-value-map</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-22692">parameter-maps.xsl</a>, <a href="#S-24095">modules/profile.xsl</a></div></div></div><div id="S-26643-..profile-os" class="instruction param"><div class="title"><span class="link"></span>Param <code>$profile-os</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a>, <a href="#S-24095-docbook.org.ns.docbook.variables.private.profile-value-map">$vp:profile-value-map</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-22692">parameter-maps.xsl</a>, <a href="#S-24095">modules/profile.xsl</a></div></div></div><div id="S-26643-..profile-outputformat" class="instruction param"><div class="title"><span class="link"></span>Param <code>$profile-outputformat</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a>, <a href="#S-24095-docbook.org.ns.docbook.variables.private.profile-value-map">$vp:profile-value-map</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-22692">parameter-maps.xsl</a>, <a href="#S-24095">modules/profile.xsl</a></div></div></div><div id="S-26643-..profile-revision" class="instruction param"><div class="title"><span class="link"></span>Param <code>$profile-revision</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a>, <a href="#S-24095-docbook.org.ns.docbook.variables.private.profile-value-map">$vp:profile-value-map</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-22692">parameter-maps.xsl</a>, <a href="#S-24095">modules/profile.xsl</a></div></div></div><div id="S-26643-..profile-security" class="instruction param"><div class="title"><span class="link"></span>Param <code>$profile-security</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a>, <a href="#S-24095-docbook.org.ns.docbook.variables.private.profile-value-map">$vp:profile-value-map</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-22692">parameter-maps.xsl</a>, <a href="#S-24095">modules/profile.xsl</a></div></div></div><div id="S-26643-..profile-userlevel" class="instruction param"><div class="title"><span class="link"></span>Param <code>$profile-userlevel</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a>, <a href="#S-24095-docbook.org.ns.docbook.variables.private.profile-value-map">$vp:profile-value-map</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-22692">parameter-maps.xsl</a>, <a href="#S-24095">modules/profile.xsl</a></div></div></div><div id="S-26643-..profile-vendor" class="instruction param"><div class="title"><span class="link"></span>Param <code>$profile-vendor</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a>, <a href="#S-24095-docbook.org.ns.docbook.variables.private.profile-value-map">$vp:profile-value-map</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-22692">parameter-maps.xsl</a>, <a href="#S-24095">modules/profile.xsl</a></div></div></div><div id="S-26643-..profile-wordsize" class="instruction param"><div class="title"><span class="link"></span>Param <code>$profile-wordsize</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a>, <a href="#S-24095-docbook.org.ns.docbook.variables.private.profile-value-map">$vp:profile-value-map</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-22692">parameter-maps.xsl</a>, <a href="#S-24095">modules/profile.xsl</a></div></div></div><div id="S-26643-..annotation-collection" class="instruction param"><div class="title"><span class="link"></span>Param <code>$annotation-collection</code> as <code>xs:string</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-46594-docbook.org.ns.docbook.templates.preprocess">t:preprocess</a>, <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-22692">parameter-maps.xsl</a>, <a href="#S-46594">drivers.xsl</a></div></div></div><div id="S-26643-..glossary-collection" class="instruction param"><div class="title"><span class="link"></span>Param <code>$glossary-collection</code> as <code>xs:string</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-46594-docbook.org.ns.docbook.templates.preprocess">t:preprocess</a>, <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-22692">parameter-maps.xsl</a>, <a href="#S-46594">drivers.xsl</a></div></div></div><div id="S-26643-..bibliography-collection" class="instruction param"><div class="title"><span class="link"></span>Param <code>$bibliography-collection</code> as <code>xs:string</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-46594-docbook.org.ns.docbook.templates.preprocess">t:preprocess</a>, <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-22692">parameter-maps.xsl</a>, <a href="#S-46594">drivers.xsl</a></div></div></div><div id="S-26643-..olink-databases" class="instruction param"><div class="title"><span class="link"></span>Param <code>$olink-databases</code> as <code>xs:string</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a>, <a href="#S-23412-docbook.org.ns.docbook.variables.olink-databases">$v:olink-databases</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-22692">parameter-maps.xsl</a>, <a href="#S-23412">modules/variable.xsl</a></div></div></div><div id="S-26643-..docbook-transclusion" class="instruction param"><div class="title"><span class="link"></span>Param <code>$docbook-transclusion</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-46594-docbook.org.ns.docbook.templates.preprocess">t:preprocess</a>, <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-22692">parameter-maps.xsl</a>, <a href="#S-46594">drivers.xsl</a></div></div></div><div id="S-26643-..transclusion-prefix-separator" class="instruction param"><div class="title"><span class="link"></span>Param <code>$transclusion-prefix-separator</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-46594-docbook.org.ns.docbook.templates.preprocess">t:preprocess</a>, <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-22692">parameter-maps.xsl</a>, <a href="#S-46594">drivers.xsl</a></div></div></div><div id="S-26643-..local-conventions" class="instruction param"><div class="title"><span class="link"></span>Param <code>$local-conventions</code> as <code>xs:string?</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-46594-docbook.org.ns.docbook.templates.preprocess">t:preprocess</a>, <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-22692">parameter-maps.xsl</a>, <a href="#S-46594">drivers.xsl</a></div></div></div><div id="S-26643-..relax-ng-grammar" class="instruction param"><div class="title"><span class="link"></span>Param <code>$relax-ng-grammar</code> as <code>xs:string?</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-46594-docbook.org.ns.docbook.templates.preprocess">t:preprocess</a>, <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-22692">parameter-maps.xsl</a>, <a href="#S-46594">drivers.xsl</a></div></div></div><div id="S-26643-..allow-eval" class="instruction param elsewhere"><div class="title"><span class="link"></span>Param <code>$allow-eval</code> as <code>xs:string</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a></div><div class="used-in"><span class="marker" title="Only used in one other module">☝</span>Used in: <a href="#S-22692">parameter-maps.xsl</a></div></div></div><div id="S-26643-..dynamic-profiles" class="instruction param"><div class="title"><span class="link"></span>Param <code>$dynamic-profiles</code> as <code>xs:string</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-24095-t-1">template</a>, <a href="#S-24095-docbook.org.ns.docbook.functions.private.profile-suppress,1">fp:profile-suppress()</a>, <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-22692">parameter-maps.xsl</a>, <a href="#S-24095">modules/profile.xsl</a></div></div></div><div id="S-26643-..dynamic-profile-error" class="instruction param"><div class="title"><span class="link"></span>Param <code>$dynamic-profile-error</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-24095-docbook.org.ns.docbook.functions.private.check-profile,3">fp:check-profile()</a>, <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-22692">parameter-maps.xsl</a>, <a href="#S-24095">modules/profile.xsl</a></div></div></div><div id="S-26643-..experimental-pmuj" class="instruction param"><div class="title"><span class="link"></span>Param <code>$experimental-pmuj</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-29523-docbook.org.ns.docbook.functions.private.pmuj-enabled,1">fp:pmuj-enabled()</a>, <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-22692">parameter-maps.xsl</a>, <a href="#S-29523">modules/xlink.xsl</a></div></div></div><div id="S-26643-..default-theme" class="instruction param"><div class="title"><span class="link"></span>Param <code>$default-theme</code> as <code>xs:string</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-7006-t-4">template</a>, <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-22692">parameter-maps.xsl</a>, <a href="#S-7006">modules/chunk-cleanup.xsl</a></div></div></div><div id="S-26643-..generate-html-page" class="instruction param"><div class="title"><span class="link"></span>Param <code>$generate-html-page</code> as <code>xs:string</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-52707-t-3">template</a>, <a href="#S-52707-docbook.org.ns.docbook.templates.private.docbook">tp:docbook</a>, <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-52707">«root»</a>, <a href="#S-22692">parameter-maps.xsl</a></div></div></div></div></div><div class="source-code"><div class="title closed">Source code</div><div class="body"><div><table><tr><td valign="top" align="right"><pre class="fake-prism"><span id="line-S-26643-1">1</span>
<span id="line-S-26643-2"><span class="lno">2</span></span>
<span id="line-S-26643-3"><span class="lno">3</span></span>
<span id="line-S-26643-4"><span class="lno">4</span></span>
<span id="line-S-26643-5">5</span>
<span id="line-S-26643-6"><span class="lno">6</span></span>
<span id="line-S-26643-7"><span class="lno">7</span></span>
<span id="line-S-26643-8"><span class="lno">8</span></span>
<span id="line-S-26643-9"><span class="lno">9</span></span>
<span id="line-S-26643-10">10</span>
<span id="line-S-26643-11"><span class="lno">11</span></span>
<span id="line-S-26643-12"><span class="lno">12</span></span>
<span id="line-S-26643-13"><span class="lno">13</span></span>
<span id="line-S-26643-14"><span class="lno">14</span></span>
<span id="line-S-26643-15">15</span>
<span id="line-S-26643-16"><span class="lno">16</span></span>
<span id="line-S-26643-17"><span class="lno">17</span></span>
<span id="line-S-26643-18"><span class="lno">18</span></span>
<span id="line-S-26643-19"><span class="lno">19</span></span>
<span id="line-S-26643-20">20</span>
<span id="line-S-26643-21"><span class="lno">21</span></span>
<span id="line-S-26643-22"><span class="lno">22</span></span>
<span id="line-S-26643-23"><span class="lno">23</span></span>
<span id="line-S-26643-24"><span class="lno">24</span></span>
<span id="line-S-26643-25">25</span>
<span id="line-S-26643-26"><span class="lno">26</span></span>
<span id="line-S-26643-27"><span class="lno">27</span></span>
<span id="line-S-26643-28"><span class="lno">28</span></span>
<span id="line-S-26643-29"><span class="lno">29</span></span>
<span id="line-S-26643-30">30</span>
<span id="line-S-26643-31"><span class="lno">31</span></span>
<span id="line-S-26643-32"><span class="lno">32</span></span>
<span id="line-S-26643-33"><span class="lno">33</span></span>
<span id="line-S-26643-34"><span class="lno">34</span></span>
<span id="line-S-26643-35">35</span>
<span id="line-S-26643-36"><span class="lno">36</span></span>
<span id="line-S-26643-37"><span class="lno">37</span></span>
<span id="line-S-26643-38"><span class="lno">38</span></span>
<span id="line-S-26643-39"><span class="lno">39</span></span>
<span id="line-S-26643-40">40</span>
<span id="line-S-26643-41"><span class="lno">41</span></span>
<span id="line-S-26643-42"><span class="lno">42</span></span>
<span id="line-S-26643-43"><span class="lno">43</span></span>
<span id="line-S-26643-44"><span class="lno">44</span></span>
<span id="line-S-26643-45">45</span>
<span id="line-S-26643-46"><span class="lno">46</span></span>
<span id="line-S-26643-47"><span class="lno">47</span></span>
<span id="line-S-26643-48"><span class="lno">48</span></span>
<span id="line-S-26643-49"><span class="lno">49</span></span>
<span id="line-S-26643-50">50</span>
<span id="line-S-26643-51"><span class="lno">51</span></span>
<span id="line-S-26643-52"><span class="lno">52</span></span>
<span id="line-S-26643-53"><span class="lno">53</span></span>
<span id="line-S-26643-54"><span class="lno">54</span></span>
<span id="line-S-26643-55">55</span>
<span id="line-S-26643-56"><span class="lno">56</span></span>
<span id="line-S-26643-57"><span class="lno">57</span></span>
<span id="line-S-26643-58"><span class="lno">58</span></span>
<span id="line-S-26643-59"><span class="lno">59</span></span>
<span id="line-S-26643-60">60</span>
<span id="line-S-26643-61"><span class="lno">61</span></span>
<span id="line-S-26643-62"><span class="lno">62</span></span>
<span id="line-S-26643-63"><span class="lno">63</span></span>
<span id="line-S-26643-64"><span class="lno">64</span></span>
<span id="line-S-26643-65">65</span>
<span id="line-S-26643-66"><span class="lno">66</span></span>
<span id="line-S-26643-67"><span class="lno">67</span></span>
<span id="line-S-26643-68"><span class="lno">68</span></span>
<span id="line-S-26643-69"><span class="lno">69</span></span>
<span id="line-S-26643-70">70</span>
<span id="line-S-26643-71"><span class="lno">71</span></span>
<span id="line-S-26643-72"><span class="lno">72</span></span>
<span id="line-S-26643-73"><span class="lno">73</span></span>
<span id="line-S-26643-74"><span class="lno">74</span></span>
<span id="line-S-26643-75">75</span>
<span id="line-S-26643-76"><span class="lno">76</span></span>
<span id="line-S-26643-77"><span class="lno">77</span></span>
<span id="line-S-26643-78"><span class="lno">78</span></span>
<span id="line-S-26643-79"><span class="lno">79</span></span>
<span id="line-S-26643-80">80</span>
<span id="line-S-26643-81"><span class="lno">81</span></span>
<span id="line-S-26643-82"><span class="lno">82</span></span>
<span id="line-S-26643-83"><span class="lno">83</span></span>
<span id="line-S-26643-84"><span class="lno">84</span></span>
<span id="line-S-26643-85">85</span>
<span id="line-S-26643-86"><span class="lno">86</span></span>
<span id="line-S-26643-87"><span class="lno">87</span></span>
<span id="line-S-26643-88"><span class="lno">88</span></span>
<span id="line-S-26643-89"><span class="lno">89</span></span>
<span id="line-S-26643-90">90</span>
<span id="line-S-26643-91"><span class="lno">91</span></span>
<span id="line-S-26643-92"><span class="lno">92</span></span>
<span id="line-S-26643-93"><span class="lno">93</span></span>
<span id="line-S-26643-94"><span class="lno">94</span></span>
<span id="line-S-26643-95">95</span>
<span id="line-S-26643-96"><span class="lno">96</span></span>
<span id="line-S-26643-97"><span class="lno">97</span></span>
<span id="line-S-26643-98"><span class="lno">98</span></span>
<span id="line-S-26643-99"><span class="lno">99</span></span>
<span id="line-S-26643-100">100</span>
<span id="line-S-26643-101"><span class="lno">101</span></span>
<span id="line-S-26643-102"><span class="lno">102</span></span>
<span id="line-S-26643-103"><span class="lno">103</span></span>
<span id="line-S-26643-104"><span class="lno">104</span></span>
<span id="line-S-26643-105">105</span>
<span id="line-S-26643-106"><span class="lno">106</span></span>
<span id="line-S-26643-107"><span class="lno">107</span></span>
<span id="line-S-26643-108"><span class="lno">108</span></span>
<span id="line-S-26643-109"><span class="lno">109</span></span>
<span id="line-S-26643-110">110</span>
<span id="line-S-26643-111"><span class="lno">111</span></span>
<span id="line-S-26643-112"><span class="lno">112</span></span>
<span id="line-S-26643-113"><span class="lno">113</span></span>
<span id="line-S-26643-114"><span class="lno">114</span></span>
<span id="line-S-26643-115">115</span>
<span id="line-S-26643-116"><span class="lno">116</span></span>
<span id="line-S-26643-117"><span class="lno">117</span></span>
<span id="line-S-26643-118"><span class="lno">118</span></span>
<span id="line-S-26643-119"><span class="lno">119</span></span>
<span id="line-S-26643-120">120</span>
<span id="line-S-26643-121"><span class="lno">121</span></span>
<span id="line-S-26643-122"><span class="lno">122</span></span>
<span id="line-S-26643-123"><span class="lno">123</span></span>
<span id="line-S-26643-124"><span class="lno">124</span></span>
<span id="line-S-26643-125">125</span>
<span id="line-S-26643-126"><span class="lno">126</span></span>
<span id="line-S-26643-127"><span class="lno">127</span></span>
<span id="line-S-26643-128"><span class="lno">128</span></span>
<span id="line-S-26643-129"><span class="lno">129</span></span>
<span id="line-S-26643-130">130</span>
<span id="line-S-26643-131"><span class="lno">131</span></span>
<span id="line-S-26643-132"><span class="lno">132</span></span>
<span id="line-S-26643-133"><span class="lno">133</span></span>
<span id="line-S-26643-134"><span class="lno">134</span></span>
<span id="line-S-26643-135">135</span>
<span id="line-S-26643-136"><span class="lno">136</span></span>
<span id="line-S-26643-137"><span class="lno">137</span></span>
<span id="line-S-26643-138"><span class="lno">138</span></span>
<span id="line-S-26643-139"><span class="lno">139</span></span>
<span id="line-S-26643-140">140</span>
<span id="line-S-26643-141"><span class="lno">141</span></span>
<span id="line-S-26643-142"><span class="lno">142</span></span>
<span id="line-S-26643-143"><span class="lno">143</span></span>
<span id="line-S-26643-144"><span class="lno">144</span></span>
<span id="line-S-26643-145">145</span>
<span id="line-S-26643-146"><span class="lno">146</span></span>
<span id="line-S-26643-147"><span class="lno">147</span></span>
<span id="line-S-26643-148"><span class="lno">148</span></span>
<span id="line-S-26643-149"><span class="lno">149</span></span>
<span id="line-S-26643-150">150</span>
<span id="line-S-26643-151"><span class="lno">151</span></span>
<span id="line-S-26643-152"><span class="lno">152</span></span>
<span id="line-S-26643-153"><span class="lno">153</span></span>
<span id="line-S-26643-154"><span class="lno">154</span></span>
<span id="line-S-26643-155">155</span>
<span id="line-S-26643-156"><span class="lno">156</span></span>
<span id="line-S-26643-157"><span class="lno">157</span></span>
<span id="line-S-26643-158"><span class="lno">158</span></span>
<span id="line-S-26643-159"><span class="lno">159</span></span>
<span id="line-S-26643-160">160</span>
<span id="line-S-26643-161"><span class="lno">161</span></span>
<span id="line-S-26643-162"><span class="lno">162</span></span>
<span id="line-S-26643-163"><span class="lno">163</span></span>
<span id="line-S-26643-164"><span class="lno">164</span></span>
<span id="line-S-26643-165">165</span>
<span id="line-S-26643-166"><span class="lno">166</span></span>
<span id="line-S-26643-167"><span class="lno">167</span></span>
<span id="line-S-26643-168"><span class="lno">168</span></span>
<span id="line-S-26643-169"><span class="lno">169</span></span>
<span id="line-S-26643-170">170</span>
<span id="line-S-26643-171"><span class="lno">171</span></span>
<span id="line-S-26643-172"><span class="lno">172</span></span>
<span id="line-S-26643-173"><span class="lno">173</span></span>
<span id="line-S-26643-174"><span class="lno">174</span></span>
<span id="line-S-26643-175">175</span>
<span id="line-S-26643-176"><span class="lno">176</span></span>
<span id="line-S-26643-177"><span class="lno">177</span></span>
<span id="line-S-26643-178"><span class="lno">178</span></span>
<span id="line-S-26643-179"><span class="lno">179</span></span>
<span id="line-S-26643-180">180</span>
<span id="line-S-26643-181"><span class="lno">181</span></span>
<span id="line-S-26643-182"><span class="lno">182</span></span>
<span id="line-S-26643-183"><span class="lno">183</span></span>
<span id="line-S-26643-184"><span class="lno">184</span></span>
<span id="line-S-26643-185">185</span>
<span id="line-S-26643-186"><span class="lno">186</span></span>
<span id="line-S-26643-187"><span class="lno">187</span></span>
<span id="line-S-26643-188"><span class="lno">188</span></span>
<span id="line-S-26643-189"><span class="lno">189</span></span>
<span id="line-S-26643-190">190</span>
<span id="line-S-26643-191"><span class="lno">191</span></span>
<span id="line-S-26643-192"><span class="lno">192</span></span>
<span id="line-S-26643-193"><span class="lno">193</span></span>
<span id="line-S-26643-194"><span class="lno">194</span></span>
<span id="line-S-26643-195">195</span>
<span id="line-S-26643-196"><span class="lno">196</span></span>
<span id="line-S-26643-197"><span class="lno">197</span></span>
<span id="line-S-26643-198"><span class="lno">198</span></span>
<span id="line-S-26643-199"><span class="lno">199</span></span>
<span id="line-S-26643-200">200</span>
<span id="line-S-26643-201"><span class="lno">201</span></span>
<span id="line-S-26643-202"><span class="lno">202</span></span>
<span id="line-S-26643-203"><span class="lno">203</span></span>
<span id="line-S-26643-204"><span class="lno">204</span></span>
<span id="line-S-26643-205">205</span>
<span id="line-S-26643-206"><span class="lno">206</span></span>
<span id="line-S-26643-207"><span class="lno">207</span></span>
<span id="line-S-26643-208"><span class="lno">208</span></span>
<span id="line-S-26643-209"><span class="lno">209</span></span>
<span id="line-S-26643-210">210</span>
<span id="line-S-26643-211"><span class="lno">211</span></span>
<span id="line-S-26643-212"><span class="lno">212</span></span>
<span id="line-S-26643-213"><span class="lno">213</span></span>
<span id="line-S-26643-214"><span class="lno">214</span></span>
<span id="line-S-26643-215">215</span>
<span id="line-S-26643-216"><span class="lno">216</span></span>
<span id="line-S-26643-217"><span class="lno">217</span></span>
<span id="line-S-26643-218"><span class="lno">218</span></span>
<span id="line-S-26643-219"><span class="lno">219</span></span>
<span id="line-S-26643-220">220</span>
<span id="line-S-26643-221"><span class="lno">221</span></span>
<span id="line-S-26643-222"><span class="lno">222</span></span>
<span id="line-S-26643-223"><span class="lno">223</span></span>
<span id="line-S-26643-224"><span class="lno">224</span></span>
<span id="line-S-26643-225">225</span>
<span id="line-S-26643-226"><span class="lno">226</span></span>
<span id="line-S-26643-227"><span class="lno">227</span></span>
<span id="line-S-26643-228"><span class="lno">228</span></span>
<span id="line-S-26643-229"><span class="lno">229</span></span>
<span id="line-S-26643-230">230</span>
<span id="line-S-26643-231"><span class="lno">231</span></span>
<span id="line-S-26643-232"><span class="lno">232</span></span>
<span id="line-S-26643-233"><span class="lno">233</span></span>
<span id="line-S-26643-234"><span class="lno">234</span></span>
<span id="line-S-26643-235">235</span>
<span id="line-S-26643-236"><span class="lno">236</span></span>
<span id="line-S-26643-237"><span class="lno">237</span></span>
<span id="line-S-26643-238"><span class="lno">238</span></span>
<span id="line-S-26643-239"><span class="lno">239</span></span>
<span id="line-S-26643-240">240</span>
<span id="line-S-26643-241"><span class="lno">241</span></span>
<span id="line-S-26643-242"><span class="lno">242</span></span>
<span id="line-S-26643-243"><span class="lno">243</span></span>
<span id="line-S-26643-244"><span class="lno">244</span></span>
<span id="line-S-26643-245">245</span>
<span id="line-S-26643-246"><span class="lno">246</span></span>
<span id="line-S-26643-247"><span class="lno">247</span></span>
<span id="line-S-26643-248"><span class="lno">248</span></span>
<span id="line-S-26643-249"><span class="lno">249</span></span>
<span id="line-S-26643-250">250</span>
<span id="line-S-26643-251"><span class="lno">251</span></span>
<span id="line-S-26643-252"><span class="lno">252</span></span>
<span id="line-S-26643-253"><span class="lno">253</span></span>
<span id="line-S-26643-254"><span class="lno">254</span></span>
<span id="line-S-26643-255">255</span>
<span id="line-S-26643-256"><span class="lno">256</span></span>
<span id="line-S-26643-257"><span class="lno">257</span></span>
<span id="line-S-26643-258"><span class="lno">258</span></span>
<span id="line-S-26643-259"><span class="lno">259</span></span>
<span id="line-S-26643-260">260</span>
<span id="line-S-26643-261"><span class="lno">261</span></span>
<span id="line-S-26643-262"><span class="lno">262</span></span>
<span id="line-S-26643-263"><span class="lno">263</span></span>
<span id="line-S-26643-264"><span class="lno">264</span></span>
<span id="line-S-26643-265">265</span>
<span id="line-S-26643-266"><span class="lno">266</span></span>
<span id="line-S-26643-267"><span class="lno">267</span></span>
<span id="line-S-26643-268"><span class="lno">268</span></span>
<span id="line-S-26643-269"><span class="lno">269</span></span>
<span id="line-S-26643-270">270</span>
<span id="line-S-26643-271"><span class="lno">271</span></span>
<span id="line-S-26643-272"><span class="lno">272</span></span>
<span id="line-S-26643-273"><span class="lno">273</span></span>
<span id="line-S-26643-274"><span class="lno">274</span></span>
<span id="line-S-26643-275">275</span>
<span id="line-S-26643-276"><span class="lno">276</span></span>
<span id="line-S-26643-277"><span class="lno">277</span></span>
<span id="line-S-26643-278"><span class="lno">278</span></span>
<span id="line-S-26643-279"><span class="lno">279</span></span>
<span id="line-S-26643-280">280</span>
<span id="line-S-26643-281"><span class="lno">281</span></span>
<span id="line-S-26643-282"><span class="lno">282</span></span>
<span id="line-S-26643-283"><span class="lno">283</span></span>
<span id="line-S-26643-284"><span class="lno">284</span></span>
<span id="line-S-26643-285">285</span>
<span id="line-S-26643-286"><span class="lno">286</span></span>
<span id="line-S-26643-287"><span class="lno">287</span></span>
<span id="line-S-26643-288"><span class="lno">288</span></span>
<span id="line-S-26643-289"><span class="lno">289</span></span>
<span id="line-S-26643-290">290</span>
<span id="line-S-26643-291"><span class="lno">291</span></span>
<span id="line-S-26643-292"><span class="lno">292</span></span>
<span id="line-S-26643-293"><span class="lno">293</span></span>
<span id="line-S-26643-294"><span class="lno">294</span></span>
<span id="line-S-26643-295">295</span>
<span id="line-S-26643-296"><span class="lno">296</span></span>
<span id="line-S-26643-297"><span class="lno">297</span></span>
<span id="line-S-26643-298"><span class="lno">298</span></span>
<span id="line-S-26643-299"><span class="lno">299</span></span>
<span id="line-S-26643-300">300</span>
<span id="line-S-26643-301"><span class="lno">301</span></span>
<span id="line-S-26643-302"><span class="lno">302</span></span>
<span id="line-S-26643-303"><span class="lno">303</span></span>
<span id="line-S-26643-304"><span class="lno">304</span></span>
<span id="line-S-26643-305">305</span>
<span id="line-S-26643-306"><span class="lno">306</span></span>
<span id="line-S-26643-307"><span class="lno">307</span></span>
<span id="line-S-26643-308"><span class="lno">308</span></span>
<span id="line-S-26643-309"><span class="lno">309</span></span>
<span id="line-S-26643-310">310</span>
<span id="line-S-26643-311"><span class="lno">311</span></span>
<span id="line-S-26643-312"><span class="lno">312</span></span>
<span id="line-S-26643-313"><span class="lno">313</span></span>
<span id="line-S-26643-314"><span class="lno">314</span></span>
<span id="line-S-26643-315">315</span>
<span id="line-S-26643-316"><span class="lno">316</span></span>
<span id="line-S-26643-317"><span class="lno">317</span></span>
<span id="line-S-26643-318"><span class="lno">318</span></span>
<span id="line-S-26643-319"><span class="lno">319</span></span>
<span id="line-S-26643-320">320</span>
<span id="line-S-26643-321"><span class="lno">321</span></span>
<span id="line-S-26643-322"><span class="lno">322</span></span>
<span id="line-S-26643-323"><span class="lno">323</span></span>
<span id="line-S-26643-324"><span class="lno">324</span></span>
<span id="line-S-26643-325">325</span>
<span id="line-S-26643-326"><span class="lno">326</span></span>
<span id="line-S-26643-327"><span class="lno">327</span></span>
<span id="line-S-26643-328"><span class="lno">328</span></span>
<span id="line-S-26643-329"><span class="lno">329</span></span>
</pre></td><td valign="top"><pre><code class="language-xml">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                xmlns:db="http://docbook.org/ns/docbook"
                xmlns:ext="http://docbook.org/extensions/xslt"
                xmlns:f="http://docbook.org/ns/docbook/functions"
                xmlns:m="http://docbook.org/ns/docbook/modes"
                xmlns:v="http://docbook.org/ns/docbook/variables"
                xmlns:vp="http://docbook.org/ns/docbook/variables/private"
                xmlns:xs="http://www.w3.org/2001/XMLSchema"
                xmlns="http://www.w3.org/1999/xhtml"
                default-mode="m:docbook"
                exclude-result-prefixes="db ext f m v vp xs"
                version="3.0"&gt;

&lt;!-- Note: Some of these parameters are initialized using content
     instead of a select attribute in order to make the reference page
     in the Guide work better. --&gt;

&lt;!-- Many of these parameters are shadowed by variables (see
     variable.xsl) for use in the stylesheets. Often, they're defined
     as strings here and as more useful data types in the variables. --&gt;

&lt;!-- 'pipeline', 'objects', 'templates', 'template-matches', 'tables',
     'callouts', 'verbatim', 'render-verbatim', 'highlight', 'profile', 'properties',
     'xlink' 'chunks', 'chunk-cleanup', 'intra-chunk-refs', 'intra-chunk-links',
     'structure', 'mediaobject-uris', 'cals-align-char', 'image-properties',
     'db4to5' 'profile-suppress', 'dynamic-profile', 'dynamic-profile-suppress' --&gt;
&lt;xsl:param name="debug" static="yes" as="xs:string"
           select="''"/&gt;

&lt;!-- This parameter is only true when the stylesheets are being run by XSpec --&gt;
&lt;xsl:param name="xspec" as="xs:string" select="'false'"/&gt;

&lt;xsl:param name="gentext-language" select="()"/&gt;

&lt;xsl:param name="verbatim-line-style"
           select="'programlisting programlistingco
                    screen screenco synopsis'"/&gt;

&lt;xsl:param name="verbatim-plain-style" as="xs:string"
           select="'address literallayout funcsynopsisinfo classsynopsisinfo'"/&gt;

&lt;xsl:param name="verbatim-space" select="' '"/&gt;

&lt;xsl:param name="verbatim-trim-trailing-blank-lines" select="'true'"/&gt;
&lt;xsl:param name="verbatim-style-default" select="'lines'"/&gt;

&lt;!-- the parameter is a list of names so it's easier to specify
     from the command line or through a parameter API. --&gt;
&lt;xsl:param name="verbatim-numbered-elements"
           select="'programlisting programlistingco'"/&gt;

&lt;xsl:param name="verbatim-number-minlines" select="'5'"/&gt;

&lt;xsl:param name="verbatim-number-every-nth" select="5"/&gt;

&lt;xsl:param name="verbatim-number-first-line" select="'true'"/&gt;

&lt;!-- 'linecolumn', 'lines', 'lineranges-first', 'lineranges-all' --&gt;
&lt;xsl:param name="verbatim-callouts" as="xs:string"
           select="'linecolumn lines lineranges-first'"/&gt;

&lt;xsl:param name="verbatim-syntax-highlighter" as="xs:string" select="'pygments'"/&gt;
&lt;xsl:param name="verbatim-syntax-highlight-languages"
           select="'python perl html xml xslt xquery javascript json'"/&gt;

&lt;xsl:param name="callout-default-column" select="60"/&gt;

&lt;xsl:param name="pixels-per-inch" select="96.0"/&gt;
&lt;xsl:param name="nominal-page-width" select="'6in'"/&gt;
&lt;xsl:param name="default-length-magnitude" select="25.0"/&gt;
&lt;xsl:param name="default-length-unit" select="'%'"/&gt;

&lt;xsl:param name="table-accessibility" as="xs:string*"
           select="('summary', 'details')"/&gt;
&lt;xsl:param name="mediaobject-accessibility" as="xs:string*"
           select="('summary', 'details')"/&gt;

&lt;xsl:param name="align-char-default" as="xs:string" select="'.'"/&gt;
&lt;xsl:param name="align-char-width" select="2"/&gt;
&lt;xsl:param name="align-char-pad" select="'&amp;#x2002;'"/&gt; &lt;!-- en space --&gt;

&lt;xsl:param name="mediaobject-exclude-extensions"
           select="('.eps', '.ps', '.pdf')"/&gt;

&lt;xsl:param name="mediaobject-input-base-uri" as="xs:string"&gt;
  &lt;xsl:sequence use-when="function-available('ext:cwd')"
                select="resolve-uri(ext:cwd(), static-base-uri())"/&gt;
  &lt;xsl:sequence use-when="not(function-available('ext:cwd'))"
                select="''"/&gt;
&lt;/xsl:param&gt;

&lt;xsl:param name="mediaobject-output-base-uri" as="xs:string"
           select="''"/&gt;

&lt;xsl:param name="image-ignore-scaling" as="xs:boolean" select="false()"/&gt;
&lt;xsl:param name="image-property-warning" select="true()"/&gt;
&lt;xsl:param name="image-nominal-width" select="$nominal-page-width"/&gt;
&lt;xsl:param name="image-nominal-height" select="'4in'"/&gt;

&lt;xsl:param name="default-personal-name-style" select="'first-last'"/&gt;
&lt;xsl:param name="othername-in-middle" select="'true'"/&gt;

&lt;xsl:param name="productionset-lhs-rhs-separator" select="':='"/&gt;

&lt;xsl:param name="date-date-format"
           select="'[D01] [MNn,*-3] [Y0001]'"/&gt;
&lt;xsl:param name="date-dateTime-format"
           select="'[H01]:[m01] [D01] [MNn,*-3] [Y0001]'"/&gt;

&lt;xsl:param name="qandaset-default-toc" select="'true'"/&gt;
&lt;xsl:param name="qandadiv-default-toc" select="$qandaset-default-toc"/&gt;
&lt;xsl:param name="qandaset-default-label" select="'number'"/&gt;

&lt;xsl:param name="funcsynopsis-default-style" select="'kr'"/&gt;
&lt;xsl:param name="funcsynopsis-table-threshold" select="40"/&gt;
&lt;xsl:param name="funcsynopsis-trailing-punctuation" select="';'"/&gt;

&lt;xsl:param name="classsynopsis-indent" select="'  '"/&gt;

&lt;xsl:param name="copyright-collapse-years" select="true()"/&gt;
&lt;xsl:param name="copyright-year-separator" select="', '"/&gt;
&lt;xsl:param name="copyright-year-range-separator" select="'–'"/&gt;

&lt;xsl:param name="division-numbers-inherit" as="xs:string" select="'false'"/&gt;
&lt;xsl:param name="component-numbers-inherit" as="xs:string" select="'false'"/&gt;
&lt;xsl:param name="section-numbers" as="xs:string" select="'1'"/&gt;
&lt;xsl:param name="section-numbers-inherit" select="'true'"/&gt;

&lt;xsl:param name="number-single-appendix" select="'true'"/&gt;

&lt;xsl:param name="generate-toc" as="xs:string"&gt;
  (empty(parent::*) and self::db:article)
  or self::db:set or self::db:book
  or self::db:part or self::db:reference
&lt;/xsl:param&gt;

&lt;xsl:param name="generate-nested-toc" as="xs:string"&gt;
  not(f:section(.))
  or (f:section(.) and f:section-depth(.) le $vp:section-toc-depth)
&lt;/xsl:param&gt;

&lt;xsl:param name="generate-trivial-toc" as="xs:string" select="'false'"/&gt;

&lt;xsl:param name="section-toc-depth" select="'unbounded'"/&gt;
&lt;xsl:param name="vp:section-toc-depth" as="xs:integer"&gt;
  &lt;xsl:choose&gt;
    &lt;xsl:when test="$section-toc-depth instance of xs:integer"&gt;
      &lt;xsl:sequence select="max((0, $section-toc-depth))"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="$section-toc-depth castable as xs:integer"&gt;
      &lt;xsl:sequence select="max((0, xs:integer($section-toc-depth)))"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="string($section-toc-depth) = 'unbounded'"&gt;
      &lt;xsl:sequence select="2147483647"/&gt; &lt;!-- 0x7fffffff --&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:sequence select="0"/&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:param&gt;

&lt;xsl:param name="annotation-style" select="'javascript'"/&gt;
&lt;xsl:param name="annotation-mark"&gt;&lt;sup&gt;⌖&lt;/sup&gt;&lt;/xsl:param&gt;
&lt;xsl:param name="annotation-placement" select="'after'"/&gt;

&lt;xsl:param name="xlink-style" select="'document'"/&gt;
&lt;xsl:param name="xlink-style-default" select="'inline'"/&gt;
&lt;xsl:param name="xlink-icon-open" select="()"/&gt;
&lt;xsl:param name="xlink-icon-closed" select="()"/&gt;

&lt;!-- 'list' or 'table' --&gt;
&lt;xsl:param name="revhistory-style" select="'table'"/&gt;

&lt;xsl:param name="segmentedlist-style" select="'table'"/&gt;

&lt;xsl:param name="formal-object-title-placement"
           select="'after formalgroup:before'"/&gt;

&lt;xsl:param name="lists-of-figures" as="xs:string" select="'true'"/&gt;
&lt;xsl:param name="lists-of-tables" as="xs:string" select="'true'"/&gt;
&lt;xsl:param name="lists-of-examples" as="xs:string" select="'true'"/&gt;
&lt;xsl:param name="lists-of-equations" as="xs:string" select="'false'"/&gt;
&lt;xsl:param name="lists-of-procedures" as="xs:string" select="'false'"/&gt;

&lt;xsl:param name="variablelist-termlength-threshold" select="20"/&gt;
&lt;xsl:param name="procedure-step-numeration" select="'1aiAI'"/&gt;
&lt;xsl:param name="orderedlist-item-numeration" select="'1aiAI'"/&gt;

&lt;xsl:param name="refentry-generate-name" select="true()"/&gt;
&lt;xsl:param name="refentry-generate-title" select="true()"/&gt;
&lt;xsl:param name="annotate-toc" select="'true'"/&gt;

&lt;xsl:param name="callout-unicode-start" select="9311"/&gt;

&lt;xsl:param name="index-show-entries" select="()"/&gt; &lt;!-- '🔖' --&gt;
&lt;xsl:param name="generate-index" select="'true'"/&gt;
&lt;xsl:param name="index-on-role" select="'true'"/&gt;
&lt;xsl:param name="index-on-type" select="'true'"/&gt;
&lt;xsl:param name="indexed-section-groups" select="'true'"/&gt;

&lt;xsl:param name="glossary-sort-entries" select="true()"/&gt;

&lt;xsl:param name="sort-collation"
           select="'http://www.w3.org/2005/xpath-functions/collation/html-ascii-case-insensitive'"/&gt;

&lt;xsl:param name="default-float-style" select="'left'"/&gt;

&lt;xsl:param name="show-remarks" select="'false'"/&gt;
&lt;xsl:param name="sidebar-as-aside" select="false()"/&gt;

&lt;xsl:param name="resource-base-uri" select="'./'"/&gt;

&lt;xsl:param name="css-links" select="'css/docbook.css css/docbook-screen.css'"/&gt;
&lt;xsl:param name="verbatim-syntax-highlight-css" select="'css/pygments.css'"/&gt;
&lt;xsl:param name="persistent-toc-css"
           select="'css/docbook-toc.css'"/&gt;
&lt;xsl:param name="oxy-markup-css"
           select="'css/oxy-markup.css'"/&gt;
&lt;xsl:param name="oxy-markup" select="'false'"/&gt;

&lt;xsl:param name="annotations-js" select="'js/annotations.js'"/&gt;
&lt;xsl:param name="xlink-js" select="'js/xlink.js'"/&gt;
&lt;xsl:param name="persistent-toc-js" select="'js/persistent-toc.js'"/&gt;
&lt;xsl:param name="mathml-js"
           select="'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=MML_CHTML'"/&gt;

&lt;xsl:param name="control-js" as="xs:string" select="'js/controls.js'"/&gt;
&lt;xsl:param name="theme-picker" as="xs:string" select="'false'"/&gt;

&lt;xsl:param name="chunk" as="xs:string?" select="()"/&gt;
&lt;xsl:param name="chunk-nav" as="xs:string" select="'true'"/&gt;
&lt;xsl:param name="chunk-nav-js" as="xs:string" select="'js/chunk-nav.js'"/&gt;

&lt;xsl:variable name="v:chunk" as="xs:boolean"
              select="not(normalize-space($chunk) = '')"/&gt;

&lt;xsl:param name="chunk-output-base-uri" as="xs:string"&gt;
  &lt;xsl:choose&gt;
    &lt;xsl:when test="not($v:chunk)"&gt;
      &lt;!-- it doesn't actually matter --&gt;
      &lt;xsl:sequence select="''"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when use-when="function-available('ext:cwd')"
              test="true()"&gt;
      &lt;xsl:message select="'Default output base uri:',
                           resolve-uri(ext:cwd(), static-base-uri())"/&gt;
      &lt;xsl:sequence select="resolve-uri(ext:cwd(), static-base-uri())"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:message terminate="yes"
                   select="'You must specify the $chunk-output-base-uri'"/&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:param&gt;

&lt;xsl:param name="chunk-section-depth" select="1"/&gt;

&lt;!-- N.B. this can lead to confusing numeration if you have
     footnoterefs that cross chunk boundaries! --&gt;
&lt;xsl:param name="chunk-renumber-footnotes" select="'true'"/&gt;

&lt;xsl:param name="chunk-include" as="xs:string*"
           select="('parent::db:set',
                    'parent::db:book',
                    'parent::db:part',
                    'parent::db:reference',
                    'self::db:refentry',
                    'self::db:section',
                    'self::db:sect1')"/&gt;

&lt;xsl:param name="chunk-exclude" as="xs:string*"
           select="('self::db:partintro',
                    'self::*[ancestor::db:partintro]',
                    'self::db:annotation',
                    'self::db:section[not(preceding-sibling::db:section)]',
                    'self::db:sect1[not(preceding-sibling::db:sect1)]',
                    'self::db:toc')"/&gt;

&lt;xsl:param name="html-extension" select="'.html'"/&gt;

&lt;!--
&lt;xsl:param name="footnote-numeration" select="('*', '**', '†','‡', '§', '1')"/&gt;
--&gt;
&lt;xsl:param name="footnote-numeration" select="('1')"/&gt;
&lt;xsl:param name="table-footnote-numeration" select="('a')"/&gt;

&lt;xsl:param name="persistent-toc" select="'false'"/&gt;
&lt;xsl:param name="persistent-toc-search" select="'true'"/&gt;

&lt;xsl:param name="profile-separator" select="';'"/&gt;
&lt;xsl:param name="profile-lang" select="''"/&gt;
&lt;xsl:param name="profile-revisionflag" select="''"/&gt;
&lt;xsl:param name="profile-role" select="''"/&gt;
&lt;xsl:param name="profile-arch" select="''"/&gt;
&lt;xsl:param name="profile-audience" select="''"/&gt;
&lt;xsl:param name="profile-condition" select="''"/&gt;
&lt;xsl:param name="profile-conformance" select="''"/&gt;
&lt;xsl:param name="profile-os" select="''"/&gt;
&lt;xsl:param name="profile-outputformat" select="''"/&gt;
&lt;xsl:param name="profile-revision" select="''"/&gt;
&lt;xsl:param name="profile-security" select="''"/&gt;
&lt;xsl:param name="profile-userlevel" select="''"/&gt;
&lt;xsl:param name="profile-vendor" select="''"/&gt;
&lt;xsl:param name="profile-wordsize" select="''"/&gt;

&lt;xsl:param name="annotation-collection" as="xs:string" select="''"/&gt;
&lt;xsl:param name="glossary-collection" as="xs:string" select="''"/&gt;
&lt;xsl:param name="bibliography-collection" as="xs:string" select="''"/&gt;
&lt;xsl:param name="olink-databases" as="xs:string" select="''"/&gt;

&lt;xsl:param name="docbook-transclusion" select="'false'"/&gt;
&lt;xsl:param name="transclusion-prefix-separator" select="'---'"/&gt;

&lt;xsl:param name="local-conventions" as="xs:string?" select="()"/&gt;
&lt;xsl:param name="relax-ng-grammar" as="xs:string?" select="()"/&gt;

&lt;xsl:param name="allow-eval" as="xs:string" select="'false'"/&gt;
&lt;xsl:param name="dynamic-profiles" as="xs:string" select="'false'"/&gt;
&lt;xsl:param name="dynamic-profile-error" select="'ignore'"/&gt;

&lt;xsl:param name="experimental-pmuj" select="'false'"/&gt;

&lt;xsl:param name="default-theme" as="xs:string" select="''"/&gt;

&lt;xsl:param name="generate-html-page" as="xs:string" select="'true'"/&gt;

&lt;/xsl:stylesheet&gt;
</code></pre></td></tr></table></div></div></div></div><div class="stylesheet" id="S-22692"><h3>parameter-maps.xsl</h3><p><span><span class="variable all">2 variables</span> (<span class="variable unused">1 unused</span>, <span class="variable elsewhere">1 used only in one other module</span>)</span></p><div class="instructions"><div class="title closed">Instructions</div><div class="body"><div id="S-22692-docbook.org.ns.docbook.variables.private.static-parameters" class="instruction variable unused"><div class="title"><span class="link"></span>Variable <code>$vp:static-parameters</code> as <code>map(xs:QName, item()*)</code></div><div class="props"><div class="uses">Uses: <a href="#S-26643-..debug">$debug</a></div><div class="used-by"><span class="marker">☞</span><span class="unused">Unused</span></div></div></div><div id="S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters" class="instruction variable elsewhere"><div class="title"><span class="link"></span>Variable <code>$vp:dynamic-parameters</code> as <code>map(xs:QName, item()*)</code></div><div class="props"><div class="uses">Uses: <a href="#S-26643-docbook.org.ns.docbook.variables.private.section-toc-depth">$vp:section-toc-depth</a>, <a href="#S-26643-..align-char-default">$align-char-default</a>, <a href="#S-26643-..align-char-pad">$align-char-pad</a>, <a href="#S-26643-..align-char-width">$align-char-width</a>, <a href="#S-26643-..allow-eval">$allow-eval</a>, <a href="#S-26643-..annotate-toc">$annotate-toc</a>, <a href="#S-26643-..annotation-collection">$annotation-collection</a>, <a href="#S-26643-..annotation-mark">$annotation-mark</a>, <a href="#S-26643-..annotation-placement">$annotation-placement</a>, <a href="#S-26643-..annotation-style">$annotation-style</a>, <a href="#S-26643-..annotations-js">$annotations-js</a>, <a href="#S-26643-..bibliography-collection">$bibliography-collection</a>, <a href="#S-26643-..callout-default-column">$callout-default-column</a>, <a href="#S-26643-..callout-unicode-start">$callout-unicode-start</a>, <a href="#S-26643-..chunk">$chunk</a>, <a href="#S-26643-..chunk-exclude">$chunk-exclude</a>, <a href="#S-26643-..chunk-include">$chunk-include</a>, <a href="#S-26643-..chunk-nav">$chunk-nav</a>, <a href="#S-26643-..chunk-nav-js">$chunk-nav-js</a>, <a href="#S-26643-..chunk-output-base-uri">$chunk-output-base-uri</a>, <a href="#S-26643-..chunk-renumber-footnotes">$chunk-renumber-footnotes</a>, <a href="#S-26643-..chunk-section-depth">$chunk-section-depth</a>, <a href="#S-26643-..classsynopsis-indent">$classsynopsis-indent</a>, <a href="#S-26643-..component-numbers-inherit">$component-numbers-inherit</a>, <a href="#S-26643-..control-js">$control-js</a>, <a href="#S-26643-..copyright-collapse-years">$copyright-collapse-years</a>, <a href="#S-26643-..copyright-year-range-separator">$copyright-year-range-separator</a>, <a href="#S-26643-..copyright-year-separator">$copyright-year-separator</a>, <a href="#S-26643-..css-links">$css-links</a>, <a href="#S-26643-..date-date-format">$date-date-format</a>, <a href="#S-26643-..date-dateTime-format">$date-dateTime-format</a>, <a href="#S-26643-..default-float-style">$default-float-style</a>, <a href="#S-26643-..default-length-magnitude">$default-length-magnitude</a>, <a href="#S-26643-..default-length-unit">$default-length-unit</a>, <a href="#S-26643-..default-personal-name-style">$default-personal-name-style</a>, <a href="#S-26643-..default-theme">$default-theme</a>, <a href="#S-26643-..division-numbers-inherit">$division-numbers-inherit</a>, <a href="#S-26643-..docbook-transclusion">$docbook-transclusion</a>, <a href="#S-26643-..dynamic-profile-error">$dynamic-profile-error</a>, <a href="#S-26643-..dynamic-profiles">$dynamic-profiles</a>, <a href="#S-26643-..experimental-pmuj">$experimental-pmuj</a>, <a href="#S-26643-..footnote-numeration">$footnote-numeration</a>, <a href="#S-26643-..formal-object-title-placement">$formal-object-title-placement</a>, <a href="#S-26643-..funcsynopsis-default-style">$funcsynopsis-default-style</a>, <a href="#S-26643-..funcsynopsis-table-threshold">$funcsynopsis-table-threshold</a>, <a href="#S-26643-..funcsynopsis-trailing-punctuation">$funcsynopsis-trailing-punctuation</a>, <a href="#S-26643-..generate-html-page">$generate-html-page</a>, <a href="#S-26643-..generate-index">$generate-index</a>, <a href="#S-26643-..generate-nested-toc">$generate-nested-toc</a>, <a href="#S-26643-..generate-toc">$generate-toc</a>, <a href="#S-26643-..generate-trivial-toc">$generate-trivial-toc</a>, <a href="#S-26643-..gentext-language">$gentext-language</a>, <a href="#S-26643-..glossary-collection">$glossary-collection</a>, <a href="#S-26643-..glossary-sort-entries">$glossary-sort-entries</a>, <a href="#S-26643-..html-extension">$html-extension</a>, <a href="#S-26643-..image-ignore-scaling">$image-ignore-scaling</a>, <a href="#S-26643-..image-nominal-height">$image-nominal-height</a>, <a href="#S-26643-..image-nominal-width">$image-nominal-width</a>, <a href="#S-26643-..image-property-warning">$image-property-warning</a>, <a href="#S-26643-..index-on-role">$index-on-role</a>, <a href="#S-26643-..index-on-type">$index-on-type</a>, <a href="#S-26643-..index-show-entries">$index-show-entries</a>, <a href="#S-26643-..indexed-section-groups">$indexed-section-groups</a>, <a href="#S-26643-..lists-of-equations">$lists-of-equations</a>, <a href="#S-26643-..lists-of-examples">$lists-of-examples</a>, <a href="#S-26643-..lists-of-figures">$lists-of-figures</a>, <a href="#S-26643-..lists-of-procedures">$lists-of-procedures</a>, <a href="#S-26643-..lists-of-tables">$lists-of-tables</a>, <a href="#S-26643-..local-conventions">$local-conventions</a>, <a href="#S-26643-..mathml-js">$mathml-js</a>, <a href="#S-26643-..mediaobject-accessibility">$mediaobject-accessibility</a>, <a href="#S-26643-..mediaobject-exclude-extensions">$mediaobject-exclude-extensions</a>, <a href="#S-26643-..mediaobject-input-base-uri">$mediaobject-input-base-uri</a>, <a href="#S-26643-..mediaobject-output-base-uri">$mediaobject-output-base-uri</a>, <a href="#S-26643-..nominal-page-width">$nominal-page-width</a>, <a href="#S-26643-..number-single-appendix">$number-single-appendix</a>, <a href="#S-26643-..olink-databases">$olink-databases</a>, <a href="#S-26643-..orderedlist-item-numeration">$orderedlist-item-numeration</a>, <a href="#S-26643-..othername-in-middle">$othername-in-middle</a>, <a href="#S-26643-..oxy-markup">$oxy-markup</a>, <a href="#S-26643-..oxy-markup-css">$oxy-markup-css</a>, <a href="#S-26643-..persistent-toc">$persistent-toc</a>, <a href="#S-26643-..persistent-toc-css">$persistent-toc-css</a>, <a href="#S-26643-..persistent-toc-js">$persistent-toc-js</a>, <a href="#S-26643-..persistent-toc-search">$persistent-toc-search</a>, <a href="#S-26643-..pixels-per-inch">$pixels-per-inch</a>, <a href="#S-26643-..procedure-step-numeration">$procedure-step-numeration</a>, <a href="#S-26643-..productionset-lhs-rhs-separator">$productionset-lhs-rhs-separator</a>, <a href="#S-26643-..profile-arch">$profile-arch</a>, <a href="#S-26643-..profile-audience">$profile-audience</a>, <a href="#S-26643-..profile-condition">$profile-condition</a>, <a href="#S-26643-..profile-conformance">$profile-conformance</a>, <a href="#S-26643-..profile-lang">$profile-lang</a>, <a href="#S-26643-..profile-os">$profile-os</a>, <a href="#S-26643-..profile-outputformat">$profile-outputformat</a>, <a href="#S-26643-..profile-revision">$profile-revision</a>, <a href="#S-26643-..profile-revisionflag">$profile-revisionflag</a>, <a href="#S-26643-..profile-role">$profile-role</a>, <a href="#S-26643-..profile-security">$profile-security</a>, <a href="#S-26643-..profile-separator">$profile-separator</a>, <a href="#S-26643-..profile-userlevel">$profile-userlevel</a>, <a href="#S-26643-..profile-vendor">$profile-vendor</a>, <a href="#S-26643-..profile-wordsize">$profile-wordsize</a>, <a href="#S-26643-..qandadiv-default-toc">$qandadiv-default-toc</a>, <a href="#S-26643-..qandaset-default-label">$qandaset-default-label</a>, <a href="#S-26643-..qandaset-default-toc">$qandaset-default-toc</a>, <a href="#S-26643-..refentry-generate-name">$refentry-generate-name</a>, <a href="#S-26643-..refentry-generate-title">$refentry-generate-title</a>, <a href="#S-26643-..relax-ng-grammar">$relax-ng-grammar</a>, <a href="#S-26643-..resource-base-uri">$resource-base-uri</a>, <a href="#S-26643-..revhistory-style">$revhistory-style</a>, <a href="#S-26643-..section-numbers">$section-numbers</a>, <a href="#S-26643-..section-numbers-inherit">$section-numbers-inherit</a>, <a href="#S-26643-..section-toc-depth">$section-toc-depth</a>, <a href="#S-26643-..segmentedlist-style">$segmentedlist-style</a>, <a href="#S-26643-..show-remarks">$show-remarks</a>, <a href="#S-26643-..sidebar-as-aside">$sidebar-as-aside</a>, <a href="#S-26643-..sort-collation">$sort-collation</a>, <a href="#S-26643-..table-accessibility">$table-accessibility</a>, <a href="#S-26643-..table-footnote-numeration">$table-footnote-numeration</a>, <a href="#S-26643-..theme-picker">$theme-picker</a>, <a href="#S-26643-..transclusion-prefix-separator">$transclusion-prefix-separator</a>, <a href="#S-26643-..variablelist-termlength-threshold">$variablelist-termlength-threshold</a>, <a href="#S-26643-..verbatim-callouts">$verbatim-callouts</a>, <a href="#S-26643-..verbatim-line-style">$verbatim-line-style</a>, <a href="#S-26643-..verbatim-number-every-nth">$verbatim-number-every-nth</a>, <a href="#S-26643-..verbatim-number-first-line">$verbatim-number-first-line</a>, <a href="#S-26643-..verbatim-number-minlines">$verbatim-number-minlines</a>, <a href="#S-26643-..verbatim-numbered-elements">$verbatim-numbered-elements</a>, <a href="#S-26643-..verbatim-plain-style">$verbatim-plain-style</a>, <a href="#S-26643-..verbatim-space">$verbatim-space</a>, <a href="#S-26643-..verbatim-style-default">$verbatim-style-default</a>, <a href="#S-26643-..verbatim-syntax-highlight-css">$verbatim-syntax-highlight-css</a>, <a href="#S-26643-..verbatim-syntax-highlight-languages">$verbatim-syntax-highlight-languages</a>, <a href="#S-26643-..verbatim-syntax-highlighter">$verbatim-syntax-highlighter</a>, <a href="#S-26643-..verbatim-trim-trailing-blank-lines">$verbatim-trim-trailing-blank-lines</a>, <a href="#S-26643-..xlink-icon-closed">$xlink-icon-closed</a>, <a href="#S-26643-..xlink-icon-open">$xlink-icon-open</a>, <a href="#S-26643-..xlink-js">$xlink-js</a>, <a href="#S-26643-..xlink-style">$xlink-style</a>, <a href="#S-26643-..xlink-style-default">$xlink-style-default</a>, <a href="#S-26643-..xspec">$xspec</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-24095-docbook.org.ns.docbook.variables.dynamic-profile-variables">$v:dynamic-profile-variables</a></div><div class="used-in"><span class="marker" title="Only used in one other module">☝</span>Used in: <a href="#S-24095">modules/profile.xsl</a></div></div></div></div></div><div class="source-code"><div class="title closed">Source code</div><div class="body"><div><table><tr><td valign="top" align="right"><pre class="fake-prism"><span id="line-S-22692-1">1</span>
<span id="line-S-22692-2"><span class="lno">2</span></span>
<span id="line-S-22692-3"><span class="lno">3</span></span>
<span id="line-S-22692-4"><span class="lno">4</span></span>
<span id="line-S-22692-5">5</span>
<span id="line-S-22692-6"><span class="lno">6</span></span>
<span id="line-S-22692-7"><span class="lno">7</span></span>
<span id="line-S-22692-8"><span class="lno">8</span></span>
<span id="line-S-22692-9"><span class="lno">9</span></span>
<span id="line-S-22692-10">10</span>
<span id="line-S-22692-11"><span class="lno">11</span></span>
<span id="line-S-22692-12"><span class="lno">12</span></span>
<span id="line-S-22692-13"><span class="lno">13</span></span>
<span id="line-S-22692-14"><span class="lno">14</span></span>
<span id="line-S-22692-15">15</span>
<span id="line-S-22692-16"><span class="lno">16</span></span>
<span id="line-S-22692-17"><span class="lno">17</span></span>
<span id="line-S-22692-18"><span class="lno">18</span></span>
<span id="line-S-22692-19"><span class="lno">19</span></span>
<span id="line-S-22692-20">20</span>
<span id="line-S-22692-21"><span class="lno">21</span></span>
<span id="line-S-22692-22"><span class="lno">22</span></span>
<span id="line-S-22692-23"><span class="lno">23</span></span>
<span id="line-S-22692-24"><span class="lno">24</span></span>
<span id="line-S-22692-25">25</span>
<span id="line-S-22692-26"><span class="lno">26</span></span>
<span id="line-S-22692-27"><span class="lno">27</span></span>
<span id="line-S-22692-28"><span class="lno">28</span></span>
<span id="line-S-22692-29"><span class="lno">29</span></span>
<span id="line-S-22692-30">30</span>
<span id="line-S-22692-31"><span class="lno">31</span></span>
<span id="line-S-22692-32"><span class="lno">32</span></span>
<span id="line-S-22692-33"><span class="lno">33</span></span>
<span id="line-S-22692-34"><span class="lno">34</span></span>
<span id="line-S-22692-35">35</span>
<span id="line-S-22692-36"><span class="lno">36</span></span>
<span id="line-S-22692-37"><span class="lno">37</span></span>
<span id="line-S-22692-38"><span class="lno">38</span></span>
<span id="line-S-22692-39"><span class="lno">39</span></span>
<span id="line-S-22692-40">40</span>
<span id="line-S-22692-41"><span class="lno">41</span></span>
<span id="line-S-22692-42"><span class="lno">42</span></span>
<span id="line-S-22692-43"><span class="lno">43</span></span>
<span id="line-S-22692-44"><span class="lno">44</span></span>
<span id="line-S-22692-45">45</span>
<span id="line-S-22692-46"><span class="lno">46</span></span>
<span id="line-S-22692-47"><span class="lno">47</span></span>
<span id="line-S-22692-48"><span class="lno">48</span></span>
<span id="line-S-22692-49"><span class="lno">49</span></span>
<span id="line-S-22692-50">50</span>
<span id="line-S-22692-51"><span class="lno">51</span></span>
<span id="line-S-22692-52"><span class="lno">52</span></span>
<span id="line-S-22692-53"><span class="lno">53</span></span>
<span id="line-S-22692-54"><span class="lno">54</span></span>
<span id="line-S-22692-55">55</span>
<span id="line-S-22692-56"><span class="lno">56</span></span>
<span id="line-S-22692-57"><span class="lno">57</span></span>
<span id="line-S-22692-58"><span class="lno">58</span></span>
<span id="line-S-22692-59"><span class="lno">59</span></span>
<span id="line-S-22692-60">60</span>
<span id="line-S-22692-61"><span class="lno">61</span></span>
<span id="line-S-22692-62"><span class="lno">62</span></span>
<span id="line-S-22692-63"><span class="lno">63</span></span>
<span id="line-S-22692-64"><span class="lno">64</span></span>
<span id="line-S-22692-65">65</span>
<span id="line-S-22692-66"><span class="lno">66</span></span>
<span id="line-S-22692-67"><span class="lno">67</span></span>
<span id="line-S-22692-68"><span class="lno">68</span></span>
<span id="line-S-22692-69"><span class="lno">69</span></span>
<span id="line-S-22692-70">70</span>
<span id="line-S-22692-71"><span class="lno">71</span></span>
<span id="line-S-22692-72"><span class="lno">72</span></span>
<span id="line-S-22692-73"><span class="lno">73</span></span>
<span id="line-S-22692-74"><span class="lno">74</span></span>
<span id="line-S-22692-75">75</span>
<span id="line-S-22692-76"><span class="lno">76</span></span>
<span id="line-S-22692-77"><span class="lno">77</span></span>
<span id="line-S-22692-78"><span class="lno">78</span></span>
<span id="line-S-22692-79"><span class="lno">79</span></span>
<span id="line-S-22692-80">80</span>
<span id="line-S-22692-81"><span class="lno">81</span></span>
<span id="line-S-22692-82"><span class="lno">82</span></span>
<span id="line-S-22692-83"><span class="lno">83</span></span>
<span id="line-S-22692-84"><span class="lno">84</span></span>
<span id="line-S-22692-85">85</span>
<span id="line-S-22692-86"><span class="lno">86</span></span>
<span id="line-S-22692-87"><span class="lno">87</span></span>
<span id="line-S-22692-88"><span class="lno">88</span></span>
<span id="line-S-22692-89"><span class="lno">89</span></span>
<span id="line-S-22692-90">90</span>
<span id="line-S-22692-91"><span class="lno">91</span></span>
<span id="line-S-22692-92"><span class="lno">92</span></span>
<span id="line-S-22692-93"><span class="lno">93</span></span>
<span id="line-S-22692-94"><span class="lno">94</span></span>
<span id="line-S-22692-95">95</span>
<span id="line-S-22692-96"><span class="lno">96</span></span>
<span id="line-S-22692-97"><span class="lno">97</span></span>
<span id="line-S-22692-98"><span class="lno">98</span></span>
<span id="line-S-22692-99"><span class="lno">99</span></span>
<span id="line-S-22692-100">100</span>
<span id="line-S-22692-101"><span class="lno">101</span></span>
<span id="line-S-22692-102"><span class="lno">102</span></span>
<span id="line-S-22692-103"><span class="lno">103</span></span>
<span id="line-S-22692-104"><span class="lno">104</span></span>
<span id="line-S-22692-105">105</span>
<span id="line-S-22692-106"><span class="lno">106</span></span>
<span id="line-S-22692-107"><span class="lno">107</span></span>
<span id="line-S-22692-108"><span class="lno">108</span></span>
<span id="line-S-22692-109"><span class="lno">109</span></span>
<span id="line-S-22692-110">110</span>
<span id="line-S-22692-111"><span class="lno">111</span></span>
<span id="line-S-22692-112"><span class="lno">112</span></span>
<span id="line-S-22692-113"><span class="lno">113</span></span>
<span id="line-S-22692-114"><span class="lno">114</span></span>
<span id="line-S-22692-115">115</span>
<span id="line-S-22692-116"><span class="lno">116</span></span>
<span id="line-S-22692-117"><span class="lno">117</span></span>
<span id="line-S-22692-118"><span class="lno">118</span></span>
<span id="line-S-22692-119"><span class="lno">119</span></span>
<span id="line-S-22692-120">120</span>
<span id="line-S-22692-121"><span class="lno">121</span></span>
<span id="line-S-22692-122"><span class="lno">122</span></span>
<span id="line-S-22692-123"><span class="lno">123</span></span>
<span id="line-S-22692-124"><span class="lno">124</span></span>
<span id="line-S-22692-125">125</span>
<span id="line-S-22692-126"><span class="lno">126</span></span>
<span id="line-S-22692-127"><span class="lno">127</span></span>
<span id="line-S-22692-128"><span class="lno">128</span></span>
<span id="line-S-22692-129"><span class="lno">129</span></span>
<span id="line-S-22692-130">130</span>
<span id="line-S-22692-131"><span class="lno">131</span></span>
<span id="line-S-22692-132"><span class="lno">132</span></span>
<span id="line-S-22692-133"><span class="lno">133</span></span>
<span id="line-S-22692-134"><span class="lno">134</span></span>
<span id="line-S-22692-135">135</span>
<span id="line-S-22692-136"><span class="lno">136</span></span>
<span id="line-S-22692-137"><span class="lno">137</span></span>
<span id="line-S-22692-138"><span class="lno">138</span></span>
<span id="line-S-22692-139"><span class="lno">139</span></span>
<span id="line-S-22692-140">140</span>
<span id="line-S-22692-141"><span class="lno">141</span></span>
<span id="line-S-22692-142"><span class="lno">142</span></span>
<span id="line-S-22692-143"><span class="lno">143</span></span>
<span id="line-S-22692-144"><span class="lno">144</span></span>
<span id="line-S-22692-145">145</span>
<span id="line-S-22692-146"><span class="lno">146</span></span>
<span id="line-S-22692-147"><span class="lno">147</span></span>
<span id="line-S-22692-148"><span class="lno">148</span></span>
<span id="line-S-22692-149"><span class="lno">149</span></span>
<span id="line-S-22692-150">150</span>
<span id="line-S-22692-151"><span class="lno">151</span></span>
<span id="line-S-22692-152"><span class="lno">152</span></span>
<span id="line-S-22692-153"><span class="lno">153</span></span>
<span id="line-S-22692-154"><span class="lno">154</span></span>
<span id="line-S-22692-155">155</span>
<span id="line-S-22692-156"><span class="lno">156</span></span>
<span id="line-S-22692-157"><span class="lno">157</span></span>
<span id="line-S-22692-158"><span class="lno">158</span></span>
<span id="line-S-22692-159"><span class="lno">159</span></span>
<span id="line-S-22692-160">160</span>
<span id="line-S-22692-161"><span class="lno">161</span></span>
<span id="line-S-22692-162"><span class="lno">162</span></span>
<span id="line-S-22692-163"><span class="lno">163</span></span>
<span id="line-S-22692-164"><span class="lno">164</span></span>
<span id="line-S-22692-165">165</span>
<span id="line-S-22692-166"><span class="lno">166</span></span>
<span id="line-S-22692-167"><span class="lno">167</span></span>
<span id="line-S-22692-168"><span class="lno">168</span></span>
<span id="line-S-22692-169"><span class="lno">169</span></span>
<span id="line-S-22692-170">170</span>
<span id="line-S-22692-171"><span class="lno">171</span></span>
<span id="line-S-22692-172"><span class="lno">172</span></span>
<span id="line-S-22692-173"><span class="lno">173</span></span>
<span id="line-S-22692-174"><span class="lno">174</span></span>
<span id="line-S-22692-175">175</span>
<span id="line-S-22692-176"><span class="lno">176</span></span>
<span id="line-S-22692-177"><span class="lno">177</span></span>
<span id="line-S-22692-178"><span class="lno">178</span></span>
<span id="line-S-22692-179"><span class="lno">179</span></span>
<span id="line-S-22692-180">180</span>
<span id="line-S-22692-181"><span class="lno">181</span></span>
<span id="line-S-22692-182"><span class="lno">182</span></span>
<span id="line-S-22692-183"><span class="lno">183</span></span>
<span id="line-S-22692-184"><span class="lno">184</span></span>
<span id="line-S-22692-185">185</span>
<span id="line-S-22692-186"><span class="lno">186</span></span>
<span id="line-S-22692-187"><span class="lno">187</span></span>
<span id="line-S-22692-188"><span class="lno">188</span></span>
<span id="line-S-22692-189"><span class="lno">189</span></span>
<span id="line-S-22692-190">190</span>
<span id="line-S-22692-191"><span class="lno">191</span></span>
<span id="line-S-22692-192"><span class="lno">192</span></span>
<span id="line-S-22692-193"><span class="lno">193</span></span>
<span id="line-S-22692-194"><span class="lno">194</span></span>
<span id="line-S-22692-195">195</span>
<span id="line-S-22692-196"><span class="lno">196</span></span>
<span id="line-S-22692-197"><span class="lno">197</span></span>
<span id="line-S-22692-198"><span class="lno">198</span></span>
</pre></td><td valign="top"><pre><code class="language-xml">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;xsl:stylesheet xmlns:vp="http://docbook.org/ns/docbook/variables/private"
                xmlns:xs="http://www.w3.org/2001/XMLSchema"
                xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                version="3.0"&gt;
   &lt;xsl:variable name="vp:static-parameters" as="map(xs:QName, item()*)"&gt;
      &lt;xsl:map&gt;
         &lt;xsl:map-entry key="xs:QName('debug')" select="$debug"/&gt;
      &lt;/xsl:map&gt;
   &lt;/xsl:variable&gt;
   &lt;xsl:variable name="vp:dynamic-parameters" as="map(xs:QName, item()*)"&gt;
      &lt;xsl:map&gt;
         &lt;xsl:map-entry key="xs:QName('xspec')" select="$xspec"/&gt;
         &lt;xsl:map-entry key="xs:QName('gentext-language')" select="$gentext-language"/&gt;
         &lt;xsl:map-entry key="xs:QName('verbatim-line-style')" select="$verbatim-line-style"/&gt;
         &lt;xsl:map-entry key="xs:QName('verbatim-plain-style')" select="$verbatim-plain-style"/&gt;
         &lt;xsl:map-entry key="xs:QName('verbatim-space')" select="$verbatim-space"/&gt;
         &lt;xsl:map-entry key="xs:QName('verbatim-trim-trailing-blank-lines')"
                        select="$verbatim-trim-trailing-blank-lines"/&gt;
         &lt;xsl:map-entry key="xs:QName('verbatim-style-default')"
                        select="$verbatim-style-default"/&gt;
         &lt;xsl:map-entry key="xs:QName('verbatim-numbered-elements')"
                        select="$verbatim-numbered-elements"/&gt;
         &lt;xsl:map-entry key="xs:QName('verbatim-number-minlines')"
                        select="$verbatim-number-minlines"/&gt;
         &lt;xsl:map-entry key="xs:QName('verbatim-number-every-nth')"
                        select="$verbatim-number-every-nth"/&gt;
         &lt;xsl:map-entry key="xs:QName('verbatim-number-first-line')"
                        select="$verbatim-number-first-line"/&gt;
         &lt;xsl:map-entry key="xs:QName('verbatim-callouts')" select="$verbatim-callouts"/&gt;
         &lt;xsl:map-entry key="xs:QName('verbatim-syntax-highlighter')"
                        select="$verbatim-syntax-highlighter"/&gt;
         &lt;xsl:map-entry key="xs:QName('verbatim-syntax-highlight-languages')"
                        select="$verbatim-syntax-highlight-languages"/&gt;
         &lt;xsl:map-entry key="xs:QName('callout-default-column')"
                        select="$callout-default-column"/&gt;
         &lt;xsl:map-entry key="xs:QName('pixels-per-inch')" select="$pixels-per-inch"/&gt;
         &lt;xsl:map-entry key="xs:QName('nominal-page-width')" select="$nominal-page-width"/&gt;
         &lt;xsl:map-entry key="xs:QName('default-length-magnitude')"
                        select="$default-length-magnitude"/&gt;
         &lt;xsl:map-entry key="xs:QName('default-length-unit')" select="$default-length-unit"/&gt;
         &lt;xsl:map-entry key="xs:QName('table-accessibility')" select="$table-accessibility"/&gt;
         &lt;xsl:map-entry key="xs:QName('mediaobject-accessibility')"
                        select="$mediaobject-accessibility"/&gt;
         &lt;xsl:map-entry key="xs:QName('align-char-default')" select="$align-char-default"/&gt;
         &lt;xsl:map-entry key="xs:QName('align-char-width')" select="$align-char-width"/&gt;
         &lt;xsl:map-entry key="xs:QName('align-char-pad')" select="$align-char-pad"/&gt;
         &lt;xsl:map-entry key="xs:QName('mediaobject-exclude-extensions')"
                        select="$mediaobject-exclude-extensions"/&gt;
         &lt;xsl:map-entry key="xs:QName('mediaobject-input-base-uri')"
                        select="$mediaobject-input-base-uri"/&gt;
         &lt;xsl:map-entry key="xs:QName('mediaobject-output-base-uri')"
                        select="$mediaobject-output-base-uri"/&gt;
         &lt;xsl:map-entry key="xs:QName('image-ignore-scaling')" select="$image-ignore-scaling"/&gt;
         &lt;xsl:map-entry key="xs:QName('image-property-warning')"
                        select="$image-property-warning"/&gt;
         &lt;xsl:map-entry key="xs:QName('image-nominal-width')" select="$image-nominal-width"/&gt;
         &lt;xsl:map-entry key="xs:QName('image-nominal-height')" select="$image-nominal-height"/&gt;
         &lt;xsl:map-entry key="xs:QName('default-personal-name-style')"
                        select="$default-personal-name-style"/&gt;
         &lt;xsl:map-entry key="xs:QName('othername-in-middle')" select="$othername-in-middle"/&gt;
         &lt;xsl:map-entry key="xs:QName('productionset-lhs-rhs-separator')"
                        select="$productionset-lhs-rhs-separator"/&gt;
         &lt;xsl:map-entry key="xs:QName('date-date-format')" select="$date-date-format"/&gt;
         &lt;xsl:map-entry key="xs:QName('date-dateTime-format')" select="$date-dateTime-format"/&gt;
         &lt;xsl:map-entry key="xs:QName('qandaset-default-toc')" select="$qandaset-default-toc"/&gt;
         &lt;xsl:map-entry key="xs:QName('qandadiv-default-toc')" select="$qandadiv-default-toc"/&gt;
         &lt;xsl:map-entry key="xs:QName('qandaset-default-label')"
                        select="$qandaset-default-label"/&gt;
         &lt;xsl:map-entry key="xs:QName('funcsynopsis-default-style')"
                        select="$funcsynopsis-default-style"/&gt;
         &lt;xsl:map-entry key="xs:QName('funcsynopsis-table-threshold')"
                        select="$funcsynopsis-table-threshold"/&gt;
         &lt;xsl:map-entry key="xs:QName('funcsynopsis-trailing-punctuation')"
                        select="$funcsynopsis-trailing-punctuation"/&gt;
         &lt;xsl:map-entry key="xs:QName('classsynopsis-indent')" select="$classsynopsis-indent"/&gt;
         &lt;xsl:map-entry key="xs:QName('copyright-collapse-years')"
                        select="$copyright-collapse-years"/&gt;
         &lt;xsl:map-entry key="xs:QName('copyright-year-separator')"
                        select="$copyright-year-separator"/&gt;
         &lt;xsl:map-entry key="xs:QName('copyright-year-range-separator')"
                        select="$copyright-year-range-separator"/&gt;
         &lt;xsl:map-entry key="xs:QName('division-numbers-inherit')"
                        select="$division-numbers-inherit"/&gt;
         &lt;xsl:map-entry key="xs:QName('component-numbers-inherit')"
                        select="$component-numbers-inherit"/&gt;
         &lt;xsl:map-entry key="xs:QName('section-numbers')" select="$section-numbers"/&gt;
         &lt;xsl:map-entry key="xs:QName('section-numbers-inherit')"
                        select="$section-numbers-inherit"/&gt;
         &lt;xsl:map-entry key="xs:QName('number-single-appendix')"
                        select="$number-single-appendix"/&gt;
         &lt;xsl:map-entry key="xs:QName('generate-toc')" select="$generate-toc"/&gt;
         &lt;xsl:map-entry key="xs:QName('generate-nested-toc')" select="$generate-nested-toc"/&gt;
         &lt;xsl:map-entry key="xs:QName('generate-trivial-toc')" select="$generate-trivial-toc"/&gt;
         &lt;xsl:map-entry key="xs:QName('section-toc-depth')" select="$section-toc-depth"/&gt;
         &lt;xsl:map-entry key="xs:QName('vp:section-toc-depth')" select="$vp:section-toc-depth"/&gt;
         &lt;xsl:map-entry key="xs:QName('annotation-style')" select="$annotation-style"/&gt;
         &lt;xsl:map-entry key="xs:QName('annotation-mark')" select="$annotation-mark"/&gt;
         &lt;xsl:map-entry key="xs:QName('annotation-placement')" select="$annotation-placement"/&gt;
         &lt;xsl:map-entry key="xs:QName('xlink-style')" select="$xlink-style"/&gt;
         &lt;xsl:map-entry key="xs:QName('xlink-style-default')" select="$xlink-style-default"/&gt;
         &lt;xsl:map-entry key="xs:QName('xlink-icon-open')" select="$xlink-icon-open"/&gt;
         &lt;xsl:map-entry key="xs:QName('xlink-icon-closed')" select="$xlink-icon-closed"/&gt;
         &lt;xsl:map-entry key="xs:QName('revhistory-style')" select="$revhistory-style"/&gt;
         &lt;xsl:map-entry key="xs:QName('segmentedlist-style')" select="$segmentedlist-style"/&gt;
         &lt;xsl:map-entry key="xs:QName('formal-object-title-placement')"
                        select="$formal-object-title-placement"/&gt;
         &lt;xsl:map-entry key="xs:QName('lists-of-figures')" select="$lists-of-figures"/&gt;
         &lt;xsl:map-entry key="xs:QName('lists-of-tables')" select="$lists-of-tables"/&gt;
         &lt;xsl:map-entry key="xs:QName('lists-of-examples')" select="$lists-of-examples"/&gt;
         &lt;xsl:map-entry key="xs:QName('lists-of-equations')" select="$lists-of-equations"/&gt;
         &lt;xsl:map-entry key="xs:QName('lists-of-procedures')" select="$lists-of-procedures"/&gt;
         &lt;xsl:map-entry key="xs:QName('variablelist-termlength-threshold')"
                        select="$variablelist-termlength-threshold"/&gt;
         &lt;xsl:map-entry key="xs:QName('procedure-step-numeration')"
                        select="$procedure-step-numeration"/&gt;
         &lt;xsl:map-entry key="xs:QName('orderedlist-item-numeration')"
                        select="$orderedlist-item-numeration"/&gt;
         &lt;xsl:map-entry key="xs:QName('refentry-generate-name')"
                        select="$refentry-generate-name"/&gt;
         &lt;xsl:map-entry key="xs:QName('refentry-generate-title')"
                        select="$refentry-generate-title"/&gt;
         &lt;xsl:map-entry key="xs:QName('annotate-toc')" select="$annotate-toc"/&gt;
         &lt;xsl:map-entry key="xs:QName('callout-unicode-start')" select="$callout-unicode-start"/&gt;
         &lt;xsl:map-entry key="xs:QName('index-show-entries')" select="$index-show-entries"/&gt;
         &lt;xsl:map-entry key="xs:QName('generate-index')" select="$generate-index"/&gt;
         &lt;xsl:map-entry key="xs:QName('index-on-role')" select="$index-on-role"/&gt;
         &lt;xsl:map-entry key="xs:QName('index-on-type')" select="$index-on-type"/&gt;
         &lt;xsl:map-entry key="xs:QName('indexed-section-groups')"
                        select="$indexed-section-groups"/&gt;
         &lt;xsl:map-entry key="xs:QName('glossary-sort-entries')" select="$glossary-sort-entries"/&gt;
         &lt;xsl:map-entry key="xs:QName('sort-collation')" select="$sort-collation"/&gt;
         &lt;xsl:map-entry key="xs:QName('default-float-style')" select="$default-float-style"/&gt;
         &lt;xsl:map-entry key="xs:QName('show-remarks')" select="$show-remarks"/&gt;
         &lt;xsl:map-entry key="xs:QName('sidebar-as-aside')" select="$sidebar-as-aside"/&gt;
         &lt;xsl:map-entry key="xs:QName('resource-base-uri')" select="$resource-base-uri"/&gt;
         &lt;xsl:map-entry key="xs:QName('css-links')" select="$css-links"/&gt;
         &lt;xsl:map-entry key="xs:QName('verbatim-syntax-highlight-css')"
                        select="$verbatim-syntax-highlight-css"/&gt;
         &lt;xsl:map-entry key="xs:QName('persistent-toc-css')" select="$persistent-toc-css"/&gt;
         &lt;xsl:map-entry key="xs:QName('oxy-markup-css')" select="$oxy-markup-css"/&gt;
         &lt;xsl:map-entry key="xs:QName('oxy-markup')" select="$oxy-markup"/&gt;
         &lt;xsl:map-entry key="xs:QName('annotations-js')" select="$annotations-js"/&gt;
         &lt;xsl:map-entry key="xs:QName('xlink-js')" select="$xlink-js"/&gt;
         &lt;xsl:map-entry key="xs:QName('persistent-toc-js')" select="$persistent-toc-js"/&gt;
         &lt;xsl:map-entry key="xs:QName('mathml-js')" select="$mathml-js"/&gt;
         &lt;xsl:map-entry key="xs:QName('control-js')" select="$control-js"/&gt;
         &lt;xsl:map-entry key="xs:QName('theme-picker')" select="$theme-picker"/&gt;
         &lt;xsl:map-entry key="xs:QName('chunk')" select="$chunk"/&gt;
         &lt;xsl:map-entry key="xs:QName('chunk-nav')" select="$chunk-nav"/&gt;
         &lt;xsl:map-entry key="xs:QName('chunk-nav-js')" select="$chunk-nav-js"/&gt;
         &lt;xsl:map-entry key="xs:QName('chunk-output-base-uri')" select="$chunk-output-base-uri"/&gt;
         &lt;xsl:map-entry key="xs:QName('chunk-section-depth')" select="$chunk-section-depth"/&gt;
         &lt;xsl:map-entry key="xs:QName('chunk-renumber-footnotes')"
                        select="$chunk-renumber-footnotes"/&gt;
         &lt;xsl:map-entry key="xs:QName('chunk-include')" select="$chunk-include"/&gt;
         &lt;xsl:map-entry key="xs:QName('chunk-exclude')" select="$chunk-exclude"/&gt;
         &lt;xsl:map-entry key="xs:QName('html-extension')" select="$html-extension"/&gt;
         &lt;xsl:map-entry key="xs:QName('footnote-numeration')" select="$footnote-numeration"/&gt;
         &lt;xsl:map-entry key="xs:QName('table-footnote-numeration')"
                        select="$table-footnote-numeration"/&gt;
         &lt;xsl:map-entry key="xs:QName('persistent-toc')" select="$persistent-toc"/&gt;
         &lt;xsl:map-entry key="xs:QName('persistent-toc-search')" select="$persistent-toc-search"/&gt;
         &lt;xsl:map-entry key="xs:QName('profile-separator')" select="$profile-separator"/&gt;
         &lt;xsl:map-entry key="xs:QName('profile-lang')" select="$profile-lang"/&gt;
         &lt;xsl:map-entry key="xs:QName('profile-revisionflag')" select="$profile-revisionflag"/&gt;
         &lt;xsl:map-entry key="xs:QName('profile-role')" select="$profile-role"/&gt;
         &lt;xsl:map-entry key="xs:QName('profile-arch')" select="$profile-arch"/&gt;
         &lt;xsl:map-entry key="xs:QName('profile-audience')" select="$profile-audience"/&gt;
         &lt;xsl:map-entry key="xs:QName('profile-condition')" select="$profile-condition"/&gt;
         &lt;xsl:map-entry key="xs:QName('profile-conformance')" select="$profile-conformance"/&gt;
         &lt;xsl:map-entry key="xs:QName('profile-os')" select="$profile-os"/&gt;
         &lt;xsl:map-entry key="xs:QName('profile-outputformat')" select="$profile-outputformat"/&gt;
         &lt;xsl:map-entry key="xs:QName('profile-revision')" select="$profile-revision"/&gt;
         &lt;xsl:map-entry key="xs:QName('profile-security')" select="$profile-security"/&gt;
         &lt;xsl:map-entry key="xs:QName('profile-userlevel')" select="$profile-userlevel"/&gt;
         &lt;xsl:map-entry key="xs:QName('profile-vendor')" select="$profile-vendor"/&gt;
         &lt;xsl:map-entry key="xs:QName('profile-wordsize')" select="$profile-wordsize"/&gt;
         &lt;xsl:map-entry key="xs:QName('annotation-collection')" select="$annotation-collection"/&gt;
         &lt;xsl:map-entry key="xs:QName('glossary-collection')" select="$glossary-collection"/&gt;
         &lt;xsl:map-entry key="xs:QName('bibliography-collection')"
                        select="$bibliography-collection"/&gt;
         &lt;xsl:map-entry key="xs:QName('olink-databases')" select="$olink-databases"/&gt;
         &lt;xsl:map-entry key="xs:QName('docbook-transclusion')" select="$docbook-transclusion"/&gt;
         &lt;xsl:map-entry key="xs:QName('transclusion-prefix-separator')"
                        select="$transclusion-prefix-separator"/&gt;
         &lt;xsl:map-entry key="xs:QName('local-conventions')" select="$local-conventions"/&gt;
         &lt;xsl:map-entry key="xs:QName('relax-ng-grammar')" select="$relax-ng-grammar"/&gt;
         &lt;xsl:map-entry key="xs:QName('allow-eval')" select="$allow-eval"/&gt;
         &lt;xsl:map-entry key="xs:QName('dynamic-profiles')" select="$dynamic-profiles"/&gt;
         &lt;xsl:map-entry key="xs:QName('dynamic-profile-error')" select="$dynamic-profile-error"/&gt;
         &lt;xsl:map-entry key="xs:QName('experimental-pmuj')" select="$experimental-pmuj"/&gt;
         &lt;xsl:map-entry key="xs:QName('default-theme')" select="$default-theme"/&gt;
         &lt;xsl:map-entry key="xs:QName('generate-html-page')" select="$generate-html-page"/&gt;
      &lt;/xsl:map&gt;
   &lt;/xsl:variable&gt;
&lt;/xsl:stylesheet&gt;
</code></pre></td></tr></table></div></div></div></div><div class="stylesheet" id="S-7720"><h3>VERSION.xsl</h3><p><span><span class="variable all">2 variables</span> (<span class="variable elsewhere">1 used only in one other module</span>)</span></p><div class="instructions"><div class="title closed">Instructions</div><div class="body"><div id="S-7720-docbook.org.ns.docbook.variables.VERSION" class="instruction variable"><div class="title"><span class="link"></span>Variable <code>$v:VERSION</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-58558-t-7">template</a>, <a href="#S-9504-t-101">template</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-58558">modules/head.xsl</a>, <a href="#S-9504">modules/inlines.xsl</a></div></div></div><div id="S-7720-docbook.org.ns.docbook.variables.VERSION-ID" class="instruction variable elsewhere"><div class="title"><span class="link"></span>Variable <code>$v:VERSION-ID</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-58558-t-7">template</a></div><div class="used-in"><span class="marker" title="Only used in one other module">☝</span>Used in: <a href="#S-58558">modules/head.xsl</a></div></div></div></div></div><div class="source-code"><div class="title closed">Source code</div><div class="body"><div><table><tr><td valign="top" align="right"><pre class="fake-prism"><span id="line-S-7720-1">1</span>
<span id="line-S-7720-2"><span class="lno">2</span></span>
<span id="line-S-7720-3"><span class="lno">3</span></span>
<span id="line-S-7720-4"><span class="lno">4</span></span>
<span id="line-S-7720-5">5</span>
<span id="line-S-7720-6"><span class="lno">6</span></span>
<span id="line-S-7720-7"><span class="lno">7</span></span>
</pre></td><td valign="top"><pre><code class="language-xml">&lt;xsl:stylesheet xmlns:v="http://docbook.org/ns/docbook/variables"
                xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                version="3.0"&gt;
   &lt;xsl:variable name="v:VERSION" select="'1.5.4'"/&gt;
   &lt;xsl:variable name="v:VERSION-ID" select="'63747cd7'"/&gt;
&lt;/xsl:stylesheet&gt;
</code></pre></td></tr></table></div></div></div></div><div class="stylesheet" id="S-23412"><h3>variable.xsl</h3><p><span><span class="variable all">43 variables</span> (<span class="variable elsewhere">40 used only in one other module</span>)</span></p><div class="instructions"><div class="title closed">Instructions</div><div class="body"><div id="S-23412-docbook.org.ns.docbook.variables.debug" class="instruction variable"><div class="title"><span class="link"></span>Variable <code>$v:debug</code> as <code>xs:string*</code> [static]</div><div class="props"><div class="uses">Uses: <a href="#S-26643-..debug">$debug</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-7006-t-4">template</a>, <a href="#S-7006-t-8">template</a>, <a href="#S-21031-t-2">template</a>, <a href="#S-21031-docbook.org.ns.docbook.functions.private.patch-toc-href,2">fp:patch-toc-href()</a>, <a href="#S-7006-docbook.org.ns.docbook.functions.private.relative-link,2">fp:relative-link()</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-7006">modules/chunk-cleanup.xsl</a>, <a href="#S-21031">modules/chunk-output.xsl</a></div></div></div><div id="S-23412-docbook.org.ns.docbook.variables.verbatim-line-style" class="instruction variable elsewhere"><div class="title"><span class="link"></span>Variable <code>$v:verbatim-line-style</code></div><div class="props"><div class="uses">Uses: <a href="#S-26643-..verbatim-line-style">$verbatim-line-style</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-56456-docbook.org.ns.docbook.variables.verbatim-properties">$v:verbatim-properties</a></div><div class="used-in"><span class="marker" title="Only used in one other module">☝</span>Used in: <a href="#S-56456">modules/verbatim.xsl</a></div></div></div><div id="S-23412-docbook.org.ns.docbook.variables.verbatim-plain-style" class="instruction variable elsewhere"><div class="title"><span class="link"></span>Variable <code>$v:verbatim-plain-style</code> as <code>xs:string*</code></div><div class="props"><div class="uses">Uses: <a href="#S-26643-..verbatim-plain-style">$verbatim-plain-style</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-56456-docbook.org.ns.docbook.variables.verbatim-properties">$v:verbatim-properties</a></div><div class="used-in"><span class="marker" title="Only used in one other module">☝</span>Used in: <a href="#S-56456">modules/verbatim.xsl</a></div></div></div><div id="S-23412-docbook.org.ns.docbook.variables.verbatim-space" class="instruction variable elsewhere"><div class="title"><span class="link"></span>Variable <code>$v:verbatim-space</code> as <code>node()</code></div><div class="props"><div class="uses">Uses: <a href="#S-26643-..verbatim-space">$verbatim-space</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-56456-docbook.org.ns.docbook.functions.private.inject-into-chars,5">fp:inject-into-chars()</a></div><div class="used-in"><span class="marker" title="Only used in one other module">☝</span>Used in: <a href="#S-56456">modules/verbatim.xsl</a></div></div></div><div id="S-23412-docbook.org.ns.docbook.variables.verbatim-numbered-elements" class="instruction variable elsewhere"><div class="title"><span class="link"></span>Variable <code>$v:verbatim-numbered-elements</code> as <code>xs:string*</code></div><div class="props"><div class="uses">Uses: <a href="#S-26643-..verbatim-numbered-elements">$verbatim-numbered-elements</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-56456-docbook.org.ns.docbook.functions.private.verbatim-properties,1">fp:verbatim-properties()</a>, <a href="#S-56456-docbook.org.ns.docbook.variables.verbatim-properties">$v:verbatim-properties</a></div><div class="used-in"><span class="marker" title="Only used in one other module">☝</span>Used in: <a href="#S-56456">modules/verbatim.xsl</a></div></div></div><div id="S-23412-docbook.org.ns.docbook.variables.verbatim-number-minlines" class="instruction variable elsewhere"><div class="title"><span class="link"></span>Variable <code>$v:verbatim-number-minlines</code></div><div class="props"><div class="uses">Uses: <a href="#S-26643-..verbatim-number-minlines">$verbatim-number-minlines</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-56456-docbook.org.ns.docbook.templates.private.verbatim-lines">tp:verbatim-lines</a></div><div class="used-in"><span class="marker" title="Only used in one other module">☝</span>Used in: <a href="#S-56456">modules/verbatim.xsl</a></div></div></div><div id="S-23412-docbook.org.ns.docbook.variables.verbatim-number-every-nth" class="instruction variable elsewhere"><div class="title"><span class="link"></span>Variable <code>$v:verbatim-number-every-nth</code></div><div class="props"><div class="uses">Uses: <a href="#S-26643-..verbatim-number-every-nth">$verbatim-number-every-nth</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-56456-docbook.org.ns.docbook.templates.private.verbatim-lines">tp:verbatim-lines</a></div><div class="used-in"><span class="marker" title="Only used in one other module">☝</span>Used in: <a href="#S-56456">modules/verbatim.xsl</a></div></div></div><div id="S-23412-docbook.org.ns.docbook.variables.verbatim-number-first-line" class="instruction variable elsewhere"><div class="title"><span class="link"></span>Variable <code>$v:verbatim-number-first-line</code></div><div class="props"><div class="uses">Uses: <a href="#S-26643-..verbatim-number-first-line">$verbatim-number-first-line</a></div><div class="calls">Calls: <a href="#S-28936-docbook.org.ns.docbook.functions.is-true,1">f:is-true()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-56456-docbook.org.ns.docbook.templates.private.verbatim-lines">tp:verbatim-lines</a></div><div class="used-in"><span class="marker" title="Only used in one other module">☝</span>Used in: <a href="#S-56456">modules/verbatim.xsl</a></div></div></div><div id="S-23412-docbook.org.ns.docbook.variables.verbatim-callouts" class="instruction variable elsewhere"><div class="title"><span class="link"></span>Variable <code>$v:verbatim-callouts</code> as <code>xs:string*</code></div><div class="props"><div class="uses">Uses: <a href="#S-26643-..verbatim-callouts">$verbatim-callouts</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-56456-docbook.org.ns.docbook.functions.private.verbatim-properties,1">fp:verbatim-properties()</a>, <a href="#S-56456-docbook.org.ns.docbook.variables.verbatim-properties">$v:verbatim-properties</a></div><div class="used-in"><span class="marker" title="Only used in one other module">☝</span>Used in: <a href="#S-56456">modules/verbatim.xsl</a></div></div></div><div id="S-23412-docbook.org.ns.docbook.variables.verbatim-syntax-highlight-languages" class="instruction variable"><div class="title"><span class="link"></span>Variable <code>$v:verbatim-syntax-highlight-languages</code></div><div class="props"><div class="uses">Uses: <a href="#S-26643-..verbatim-syntax-highlight-languages">$verbatim-syntax-highlight-languages</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-58558-t-1">template</a>, <a href="#S-56456-docbook.org.ns.docbook.functions.highlight-verbatim,1">f:highlight-verbatim()</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-58558">modules/head.xsl</a>, <a href="#S-56456">modules/verbatim.xsl</a></div></div></div><div id="S-23412-docbook.org.ns.docbook.variables.verbatim-syntax-highlight-options" class="instruction variable elsewhere"><div class="title"><span class="link"></span>Variable <code>$v:verbatim-syntax-highlight-options</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-56456-docbook.org.ns.docbook.templates.private.verbatim-array">tp:verbatim-array</a></div><div class="used-in"><span class="marker" title="Only used in one other module">☝</span>Used in: <a href="#S-56456">modules/verbatim.xsl</a></div></div></div><div id="S-23412-docbook.org.ns.docbook.variables.verbatim-syntax-highlight-pygments-options" class="instruction variable elsewhere"><div class="title"><span class="link"></span>Variable <code>$v:verbatim-syntax-highlight-pygments-options</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-56456-docbook.org.ns.docbook.templates.private.verbatim-array">tp:verbatim-array</a></div><div class="used-in"><span class="marker" title="Only used in one other module">☝</span>Used in: <a href="#S-56456">modules/verbatim.xsl</a></div></div></div><div id="S-23412-docbook.org.ns.docbook.variables.mediaobject-input-base-uri" class="instruction variable elsewhere"><div class="title"><span class="link"></span>Variable <code>$v:mediaobject-input-base-uri</code> as <code>xs:string?</code></div><div class="props"><div class="uses">Uses: <a href="#S-26643-..mediaobject-input-base-uri">$mediaobject-input-base-uri</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-51480-docbook.org.ns.docbook.functions.resolve-object-uri,1">f:resolve-object-uri()</a>, <a href="#S-51480-docbook.org.ns.docbook.templates.private.process-object">tp:process-object</a></div><div class="used-in"><span class="marker" title="Only used in one other module">☝</span>Used in: <a href="#S-51480">modules/objects.xsl</a></div></div></div><div id="S-23412-docbook.org.ns.docbook.variables.mediaobject-output-base-uri" class="instruction variable elsewhere"><div class="title"><span class="link"></span>Variable <code>$v:mediaobject-output-base-uri</code> as <code>xs:string?</code></div><div class="props"><div class="uses">Uses: <a href="#S-26643-..mediaobject-output-base-uri">$mediaobject-output-base-uri</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-51480-docbook.org.ns.docbook.functions.resolve-object-uri,1">f:resolve-object-uri()</a></div><div class="used-in"><span class="marker" title="Only used in one other module">☝</span>Used in: <a href="#S-51480">modules/objects.xsl</a></div></div></div><div id="S-23412-docbook.org.ns.docbook.variables.personal-name-styles" class="instruction variable elsewhere"><div class="title"><span class="link"></span>Variable <code>$v:personal-name-styles</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-33240-t-7">template</a></div><div class="used-in"><span class="marker" title="Only used in one other module">☝</span>Used in: <a href="#S-33240">modules/info.xsl</a></div></div></div><div id="S-23412-docbook.org.ns.docbook.variables.formal-object-title-placement" class="instruction variable elsewhere"><div class="title"><span class="link"></span>Variable <code>$v:formal-object-title-placement</code> as <code>map(xs:string,xs:string)</code></div><div class="props"><div class="uses">Uses: <a href="#S-26643-..formal-object-title-placement">$formal-object-title-placement</a></div><div class="calls">Calls: <a href="#S-28936-docbook.org.ns.docbook.functions.private.parse-key-value-pairs,1">fp:parse-key-value-pairs()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-34731-t-2">template</a></div><div class="used-in"><span class="marker" title="Only used in one other module">☝</span>Used in: <a href="#S-34731">modules/blocks.xsl</a></div></div></div><div id="S-23412-docbook.org.ns.docbook.variables.arg-choice-opt-open-str" class="instruction variable elsewhere"><div class="title"><span class="link"></span>Variable <code>$v:arg-choice-opt-open-str</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-62162-docbook.org.ns.docbook.templates.private.group-or-arg">tp:group-or-arg</a></div><div class="used-in"><span class="marker" title="Only used in one other module">☝</span>Used in: <a href="#S-62162">modules/programming.xsl</a></div></div></div><div id="S-23412-docbook.org.ns.docbook.variables.arg-choice-opt-close-str" class="instruction variable elsewhere"><div class="title"><span class="link"></span>Variable <code>$v:arg-choice-opt-close-str</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-62162-docbook.org.ns.docbook.templates.private.group-or-arg">tp:group-or-arg</a></div><div class="used-in"><span class="marker" title="Only used in one other module">☝</span>Used in: <a href="#S-62162">modules/programming.xsl</a></div></div></div><div id="S-23412-docbook.org.ns.docbook.variables.arg-choice-req-open-str" class="instruction variable elsewhere"><div class="title"><span class="link"></span>Variable <code>$v:arg-choice-req-open-str</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-62162-docbook.org.ns.docbook.templates.private.group-or-arg">tp:group-or-arg</a></div><div class="used-in"><span class="marker" title="Only used in one other module">☝</span>Used in: <a href="#S-62162">modules/programming.xsl</a></div></div></div><div id="S-23412-docbook.org.ns.docbook.variables.arg-choice-req-close-str" class="instruction variable elsewhere"><div class="title"><span class="link"></span>Variable <code>$v:arg-choice-req-close-str</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-62162-docbook.org.ns.docbook.templates.private.group-or-arg">tp:group-or-arg</a></div><div class="used-in"><span class="marker" title="Only used in one other module">☝</span>Used in: <a href="#S-62162">modules/programming.xsl</a></div></div></div><div id="S-23412-docbook.org.ns.docbook.variables.arg-choice-plain-open-str" class="instruction variable elsewhere"><div class="title"><span class="link"></span>Variable <code>$v:arg-choice-plain-open-str</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-62162-docbook.org.ns.docbook.templates.private.group-or-arg">tp:group-or-arg</a></div><div class="used-in"><span class="marker" title="Only used in one other module">☝</span>Used in: <a href="#S-62162">modules/programming.xsl</a></div></div></div><div id="S-23412-docbook.org.ns.docbook.variables.arg-choice-plain-close-str" class="instruction variable elsewhere"><div class="title"><span class="link"></span>Variable <code>$v:arg-choice-plain-close-str</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-62162-docbook.org.ns.docbook.templates.private.group-or-arg">tp:group-or-arg</a></div><div class="used-in"><span class="marker" title="Only used in one other module">☝</span>Used in: <a href="#S-62162">modules/programming.xsl</a></div></div></div><div id="S-23412-docbook.org.ns.docbook.variables.arg-choice-def-open-str" class="instruction variable elsewhere"><div class="title"><span class="link"></span>Variable <code>$v:arg-choice-def-open-str</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-62162-docbook.org.ns.docbook.templates.private.group-or-arg">tp:group-or-arg</a></div><div class="used-in"><span class="marker" title="Only used in one other module">☝</span>Used in: <a href="#S-62162">modules/programming.xsl</a></div></div></div><div id="S-23412-docbook.org.ns.docbook.variables.arg-choice-def-close-str" class="instruction variable elsewhere"><div class="title"><span class="link"></span>Variable <code>$v:arg-choice-def-close-str</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-62162-docbook.org.ns.docbook.templates.private.group-or-arg">tp:group-or-arg</a></div><div class="used-in"><span class="marker" title="Only used in one other module">☝</span>Used in: <a href="#S-62162">modules/programming.xsl</a></div></div></div><div id="S-23412-docbook.org.ns.docbook.variables.arg-rep-repeat-str" class="instruction variable elsewhere"><div class="title"><span class="link"></span>Variable <code>$v:arg-rep-repeat-str</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-62162-docbook.org.ns.docbook.templates.private.group-or-arg">tp:group-or-arg</a></div><div class="used-in"><span class="marker" title="Only used in one other module">☝</span>Used in: <a href="#S-62162">modules/programming.xsl</a></div></div></div><div id="S-23412-docbook.org.ns.docbook.variables.arg-rep-norepeat-str" class="instruction variable elsewhere"><div class="title"><span class="link"></span>Variable <code>$v:arg-rep-norepeat-str</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-62162-docbook.org.ns.docbook.templates.private.group-or-arg">tp:group-or-arg</a></div><div class="used-in"><span class="marker" title="Only used in one other module">☝</span>Used in: <a href="#S-62162">modules/programming.xsl</a></div></div></div><div id="S-23412-docbook.org.ns.docbook.variables.arg-rep-def-str" class="instruction variable elsewhere"><div class="title"><span class="link"></span>Variable <code>$v:arg-rep-def-str</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-62162-docbook.org.ns.docbook.templates.private.group-or-arg">tp:group-or-arg</a></div><div class="used-in"><span class="marker" title="Only used in one other module">☝</span>Used in: <a href="#S-62162">modules/programming.xsl</a></div></div></div><div id="S-23412-docbook.org.ns.docbook.variables.arg-or-sep" class="instruction variable elsewhere"><div class="title"><span class="link"></span>Variable <code>$v:arg-or-sep</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-62162-t-102">template</a></div><div class="used-in"><span class="marker" title="Only used in one other module">☝</span>Used in: <a href="#S-62162">modules/programming.xsl</a></div></div></div><div id="S-23412-docbook.org.ns.docbook.variables.css-links" class="instruction variable elsewhere"><div class="title"><span class="link"></span>Variable <code>$v:css-links</code></div><div class="props"><div class="uses">Uses: <a href="#S-26643-..css-links">$css-links</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-58558-t-1">template</a></div><div class="used-in"><span class="marker" title="Only used in one other module">☝</span>Used in: <a href="#S-58558">modules/head.xsl</a></div></div></div><div id="S-23412-docbook.org.ns.docbook.variables.chunk-renumber-footnotes" class="instruction variable elsewhere"><div class="title"><span class="link"></span>Variable <code>$v:chunk-renumber-footnotes</code> as <code>xs:boolean</code></div><div class="props"><div class="uses">Uses: <a href="#S-26643-..chunk-renumber-footnotes">$chunk-renumber-footnotes</a></div><div class="calls">Calls: <a href="#S-28936-docbook.org.ns.docbook.functions.is-true,1">f:is-true()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-7006-t-9">template</a></div><div class="used-in"><span class="marker" title="Only used in one other module">☝</span>Used in: <a href="#S-7006">modules/chunk-cleanup.xsl</a></div></div></div><div id="S-23412-docbook.org.ns.docbook.variables.chunk-filter-namespaces" class="instruction variable elsewhere"><div class="title"><span class="link"></span>Variable <code>$v:chunk-filter-namespaces</code> as <code>namespace-node()*</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-59718-docbook.org.ns.docbook.functions.private.matches-expr,2">fp:matches-expr()</a></div><div class="used-in"><span class="marker" title="Only used in one other module">☝</span>Used in: <a href="#S-59718">modules/chunk.xsl</a></div></div></div><div id="S-23412-docbook.org.ns.docbook.variables.admonition-icons" class="instruction variable elsewhere"><div class="title"><span class="link"></span>Variable <code>$v:admonition-icons</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-15572-t-1">template</a></div><div class="used-in"><span class="marker" title="Only used in one other module">☝</span>Used in: <a href="#S-15572">modules/admonitions.xsl</a></div></div></div><div id="S-23412-docbook.org.ns.docbook.variables.annotation-close" class="instruction variable elsewhere"><div class="title"><span class="link"></span>Variable <code>$v:annotation-close</code> as <code>element()</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-6566-t-1">template</a></div><div class="used-in"><span class="marker" title="Only used in one other module">☝</span>Used in: <a href="#S-6566">main.xsl</a></div></div></div><div id="S-23412-docbook.org.ns.docbook.variables.nominal-page-width" class="instruction variable elsewhere"><div class="title"><span class="link"></span>Variable <code>$v:nominal-page-width</code></div><div class="props"><div class="uses">Uses: <a href="#S-26643-..nominal-page-width">$nominal-page-width</a></div><div class="calls">Calls: <a href="#S-46176-docbook.org.ns.docbook.functions.parse-length,1">f:parse-length()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-59097-docbook.org.ns.docbook.templates.private.cals-colspec">tp:cals-colspec</a></div><div class="used-in"><span class="marker" title="Only used in one other module">☝</span>Used in: <a href="#S-59097">modules/tablecals.xsl</a></div></div></div><div id="S-23412-docbook.org.ns.docbook.variables.image-nominal-width" class="instruction variable elsewhere"><div class="title"><span class="link"></span>Variable <code>$v:image-nominal-width</code></div><div class="props"><div class="uses">Uses: <a href="#S-26643-..image-nominal-width">$image-nominal-width</a></div><div class="calls">Calls: <a href="#S-46176-docbook.org.ns.docbook.functions.parse-length,1">f:parse-length()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-51480-docbook.org.ns.docbook.templates.private.process-object">tp:process-object</a></div><div class="used-in"><span class="marker" title="Only used in one other module">☝</span>Used in: <a href="#S-51480">modules/objects.xsl</a></div></div></div><div id="S-23412-docbook.org.ns.docbook.variables.image-nominal-height" class="instruction variable elsewhere"><div class="title"><span class="link"></span>Variable <code>$v:image-nominal-height</code></div><div class="props"><div class="uses">Uses: <a href="#S-26643-..image-nominal-height">$image-nominal-height</a></div><div class="calls">Calls: <a href="#S-46176-docbook.org.ns.docbook.functions.parse-length,1">f:parse-length()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-51480-docbook.org.ns.docbook.templates.private.process-object">tp:process-object</a></div><div class="used-in"><span class="marker" title="Only used in one other module">☝</span>Used in: <a href="#S-51480">modules/objects.xsl</a></div></div></div><div id="S-23412-docbook.org.ns.docbook.variables.toc-open" class="instruction variable elsewhere"><div class="title"><span class="link"></span>Variable <code>$v:toc-open</code> as <code>element()</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-21031-t-4">template</a></div><div class="used-in"><span class="marker" title="Only used in one other module">☝</span>Used in: <a href="#S-21031">modules/chunk-output.xsl</a></div></div></div><div id="S-23412-docbook.org.ns.docbook.variables.toc-close" class="instruction variable elsewhere"><div class="title"><span class="link"></span>Variable <code>$v:toc-close</code> as <code>element()</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-21031-t-4">template</a></div><div class="used-in"><span class="marker" title="Only used in one other module">☝</span>Used in: <a href="#S-21031">modules/chunk-output.xsl</a></div></div></div><div id="S-23412-docbook.org.ns.docbook.variables.olink-databases" class="instruction variable elsewhere"><div class="title"><span class="link"></span>Variable <code>$v:olink-databases</code> as <code>element(h:targetdb)*</code></div><div class="props"><div class="uses">Uses: <a href="#S-26643-..olink-databases">$olink-databases</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-10318-t-8">template</a></div><div class="used-in"><span class="marker" title="Only used in one other module">☝</span>Used in: <a href="#S-10318">modules/links.xsl</a></div></div></div><div id="S-23412-docbook.org.ns.docbook.variables.theme-list" class="instruction variable"><div class="title"><span class="link"></span>Variable <code>$v:theme-list</code> as <code>element()*</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-23412-docbook.org.ns.docbook.variables.private.js-controls">$vp:js-controls</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-23412">modules/variable.xsl</a></div></div></div><div id="S-23412-docbook.org.ns.docbook.variables.private.js-controls" class="instruction variable elsewhere"><div class="title"><span class="link"></span>Variable <code>$vp:js-controls</code> as <code>element()*</code></div><div class="props"><div class="uses">Uses: <a href="#S-23412-docbook.org.ns.docbook.variables.theme-list">$v:theme-list</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-6566-t-1">template</a></div><div class="used-in"><span class="marker" title="Only used in one other module">☝</span>Used in: <a href="#S-6566">main.xsl</a></div></div></div><div id="S-23412-docbook.org.ns.docbook.variables.highlight-js-head-elements" class="instruction variable elsewhere"><div class="title"><span class="link"></span>Variable <code>$v:highlight-js-head-elements</code> as <code>element()*</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-58558-t-1">template</a>, <a href="#S-58558-t-8">template</a></div><div class="used-in"><span class="marker" title="Only used in one other module">☝</span>Used in: <a href="#S-58558">modules/head.xsl</a></div></div></div><div id="S-23412-docbook.org.ns.docbook.variables.prism-js-head-elements" class="instruction variable elsewhere"><div class="title"><span class="link"></span>Variable <code>$v:prism-js-head-elements</code> as <code>element()*</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-58558-t-1">template</a>, <a href="#S-58558-t-8">template</a></div><div class="used-in"><span class="marker" title="Only used in one other module">☝</span>Used in: <a href="#S-58558">modules/head.xsl</a></div></div></div></div></div><div class="source-code"><div class="title closed">Source code</div><div class="body"><div><table><tr><td valign="top" align="right"><pre class="fake-prism"><span id="line-S-23412-1">1</span>
<span id="line-S-23412-2"><span class="lno">2</span></span>
<span id="line-S-23412-3"><span class="lno">3</span></span>
<span id="line-S-23412-4"><span class="lno">4</span></span>
<span id="line-S-23412-5">5</span>
<span id="line-S-23412-6"><span class="lno">6</span></span>
<span id="line-S-23412-7"><span class="lno">7</span></span>
<span id="line-S-23412-8"><span class="lno">8</span></span>
<span id="line-S-23412-9"><span class="lno">9</span></span>
<span id="line-S-23412-10">10</span>
<span id="line-S-23412-11"><span class="lno">11</span></span>
<span id="line-S-23412-12"><span class="lno">12</span></span>
<span id="line-S-23412-13"><span class="lno">13</span></span>
<span id="line-S-23412-14"><span class="lno">14</span></span>
<span id="line-S-23412-15">15</span>
<span id="line-S-23412-16"><span class="lno">16</span></span>
<span id="line-S-23412-17"><span class="lno">17</span></span>
<span id="line-S-23412-18"><span class="lno">18</span></span>
<span id="line-S-23412-19"><span class="lno">19</span></span>
<span id="line-S-23412-20">20</span>
<span id="line-S-23412-21"><span class="lno">21</span></span>
<span id="line-S-23412-22"><span class="lno">22</span></span>
<span id="line-S-23412-23"><span class="lno">23</span></span>
<span id="line-S-23412-24"><span class="lno">24</span></span>
<span id="line-S-23412-25">25</span>
<span id="line-S-23412-26"><span class="lno">26</span></span>
<span id="line-S-23412-27"><span class="lno">27</span></span>
<span id="line-S-23412-28"><span class="lno">28</span></span>
<span id="line-S-23412-29"><span class="lno">29</span></span>
<span id="line-S-23412-30">30</span>
<span id="line-S-23412-31"><span class="lno">31</span></span>
<span id="line-S-23412-32"><span class="lno">32</span></span>
<span id="line-S-23412-33"><span class="lno">33</span></span>
<span id="line-S-23412-34"><span class="lno">34</span></span>
<span id="line-S-23412-35">35</span>
<span id="line-S-23412-36"><span class="lno">36</span></span>
<span id="line-S-23412-37"><span class="lno">37</span></span>
<span id="line-S-23412-38"><span class="lno">38</span></span>
<span id="line-S-23412-39"><span class="lno">39</span></span>
<span id="line-S-23412-40">40</span>
<span id="line-S-23412-41"><span class="lno">41</span></span>
<span id="line-S-23412-42"><span class="lno">42</span></span>
<span id="line-S-23412-43"><span class="lno">43</span></span>
<span id="line-S-23412-44"><span class="lno">44</span></span>
<span id="line-S-23412-45">45</span>
<span id="line-S-23412-46"><span class="lno">46</span></span>
<span id="line-S-23412-47"><span class="lno">47</span></span>
<span id="line-S-23412-48"><span class="lno">48</span></span>
<span id="line-S-23412-49"><span class="lno">49</span></span>
<span id="line-S-23412-50">50</span>
<span id="line-S-23412-51"><span class="lno">51</span></span>
<span id="line-S-23412-52"><span class="lno">52</span></span>
<span id="line-S-23412-53"><span class="lno">53</span></span>
<span id="line-S-23412-54"><span class="lno">54</span></span>
<span id="line-S-23412-55">55</span>
<span id="line-S-23412-56"><span class="lno">56</span></span>
<span id="line-S-23412-57"><span class="lno">57</span></span>
<span id="line-S-23412-58"><span class="lno">58</span></span>
<span id="line-S-23412-59"><span class="lno">59</span></span>
<span id="line-S-23412-60">60</span>
<span id="line-S-23412-61"><span class="lno">61</span></span>
<span id="line-S-23412-62"><span class="lno">62</span></span>
<span id="line-S-23412-63"><span class="lno">63</span></span>
<span id="line-S-23412-64"><span class="lno">64</span></span>
<span id="line-S-23412-65">65</span>
<span id="line-S-23412-66"><span class="lno">66</span></span>
<span id="line-S-23412-67"><span class="lno">67</span></span>
<span id="line-S-23412-68"><span class="lno">68</span></span>
<span id="line-S-23412-69"><span class="lno">69</span></span>
<span id="line-S-23412-70">70</span>
<span id="line-S-23412-71"><span class="lno">71</span></span>
<span id="line-S-23412-72"><span class="lno">72</span></span>
<span id="line-S-23412-73"><span class="lno">73</span></span>
<span id="line-S-23412-74"><span class="lno">74</span></span>
<span id="line-S-23412-75">75</span>
<span id="line-S-23412-76"><span class="lno">76</span></span>
<span id="line-S-23412-77"><span class="lno">77</span></span>
<span id="line-S-23412-78"><span class="lno">78</span></span>
<span id="line-S-23412-79"><span class="lno">79</span></span>
<span id="line-S-23412-80">80</span>
<span id="line-S-23412-81"><span class="lno">81</span></span>
<span id="line-S-23412-82"><span class="lno">82</span></span>
<span id="line-S-23412-83"><span class="lno">83</span></span>
<span id="line-S-23412-84"><span class="lno">84</span></span>
<span id="line-S-23412-85">85</span>
<span id="line-S-23412-86"><span class="lno">86</span></span>
<span id="line-S-23412-87"><span class="lno">87</span></span>
<span id="line-S-23412-88"><span class="lno">88</span></span>
<span id="line-S-23412-89"><span class="lno">89</span></span>
<span id="line-S-23412-90">90</span>
<span id="line-S-23412-91"><span class="lno">91</span></span>
<span id="line-S-23412-92"><span class="lno">92</span></span>
<span id="line-S-23412-93"><span class="lno">93</span></span>
<span id="line-S-23412-94"><span class="lno">94</span></span>
<span id="line-S-23412-95">95</span>
<span id="line-S-23412-96"><span class="lno">96</span></span>
<span id="line-S-23412-97"><span class="lno">97</span></span>
<span id="line-S-23412-98"><span class="lno">98</span></span>
<span id="line-S-23412-99"><span class="lno">99</span></span>
<span id="line-S-23412-100">100</span>
<span id="line-S-23412-101"><span class="lno">101</span></span>
<span id="line-S-23412-102"><span class="lno">102</span></span>
<span id="line-S-23412-103"><span class="lno">103</span></span>
<span id="line-S-23412-104"><span class="lno">104</span></span>
<span id="line-S-23412-105">105</span>
<span id="line-S-23412-106"><span class="lno">106</span></span>
<span id="line-S-23412-107"><span class="lno">107</span></span>
<span id="line-S-23412-108"><span class="lno">108</span></span>
<span id="line-S-23412-109"><span class="lno">109</span></span>
<span id="line-S-23412-110">110</span>
<span id="line-S-23412-111"><span class="lno">111</span></span>
<span id="line-S-23412-112"><span class="lno">112</span></span>
<span id="line-S-23412-113"><span class="lno">113</span></span>
<span id="line-S-23412-114"><span class="lno">114</span></span>
<span id="line-S-23412-115">115</span>
<span id="line-S-23412-116"><span class="lno">116</span></span>
<span id="line-S-23412-117"><span class="lno">117</span></span>
<span id="line-S-23412-118"><span class="lno">118</span></span>
<span id="line-S-23412-119"><span class="lno">119</span></span>
<span id="line-S-23412-120">120</span>
<span id="line-S-23412-121"><span class="lno">121</span></span>
<span id="line-S-23412-122"><span class="lno">122</span></span>
<span id="line-S-23412-123"><span class="lno">123</span></span>
<span id="line-S-23412-124"><span class="lno">124</span></span>
<span id="line-S-23412-125">125</span>
<span id="line-S-23412-126"><span class="lno">126</span></span>
<span id="line-S-23412-127"><span class="lno">127</span></span>
<span id="line-S-23412-128"><span class="lno">128</span></span>
<span id="line-S-23412-129"><span class="lno">129</span></span>
<span id="line-S-23412-130">130</span>
<span id="line-S-23412-131"><span class="lno">131</span></span>
<span id="line-S-23412-132"><span class="lno">132</span></span>
<span id="line-S-23412-133"><span class="lno">133</span></span>
<span id="line-S-23412-134"><span class="lno">134</span></span>
<span id="line-S-23412-135">135</span>
<span id="line-S-23412-136"><span class="lno">136</span></span>
<span id="line-S-23412-137"><span class="lno">137</span></span>
<span id="line-S-23412-138"><span class="lno">138</span></span>
<span id="line-S-23412-139"><span class="lno">139</span></span>
<span id="line-S-23412-140">140</span>
<span id="line-S-23412-141"><span class="lno">141</span></span>
<span id="line-S-23412-142"><span class="lno">142</span></span>
<span id="line-S-23412-143"><span class="lno">143</span></span>
<span id="line-S-23412-144"><span class="lno">144</span></span>
<span id="line-S-23412-145">145</span>
<span id="line-S-23412-146"><span class="lno">146</span></span>
<span id="line-S-23412-147"><span class="lno">147</span></span>
<span id="line-S-23412-148"><span class="lno">148</span></span>
<span id="line-S-23412-149"><span class="lno">149</span></span>
<span id="line-S-23412-150">150</span>
<span id="line-S-23412-151"><span class="lno">151</span></span>
<span id="line-S-23412-152"><span class="lno">152</span></span>
<span id="line-S-23412-153"><span class="lno">153</span></span>
<span id="line-S-23412-154"><span class="lno">154</span></span>
<span id="line-S-23412-155">155</span>
<span id="line-S-23412-156"><span class="lno">156</span></span>
<span id="line-S-23412-157"><span class="lno">157</span></span>
<span id="line-S-23412-158"><span class="lno">158</span></span>
<span id="line-S-23412-159"><span class="lno">159</span></span>
<span id="line-S-23412-160">160</span>
<span id="line-S-23412-161"><span class="lno">161</span></span>
<span id="line-S-23412-162"><span class="lno">162</span></span>
<span id="line-S-23412-163"><span class="lno">163</span></span>
<span id="line-S-23412-164"><span class="lno">164</span></span>
<span id="line-S-23412-165">165</span>
<span id="line-S-23412-166"><span class="lno">166</span></span>
<span id="line-S-23412-167"><span class="lno">167</span></span>
<span id="line-S-23412-168"><span class="lno">168</span></span>
<span id="line-S-23412-169"><span class="lno">169</span></span>
<span id="line-S-23412-170">170</span>
<span id="line-S-23412-171"><span class="lno">171</span></span>
<span id="line-S-23412-172"><span class="lno">172</span></span>
<span id="line-S-23412-173"><span class="lno">173</span></span>
<span id="line-S-23412-174"><span class="lno">174</span></span>
<span id="line-S-23412-175">175</span>
<span id="line-S-23412-176"><span class="lno">176</span></span>
<span id="line-S-23412-177"><span class="lno">177</span></span>
<span id="line-S-23412-178"><span class="lno">178</span></span>
<span id="line-S-23412-179"><span class="lno">179</span></span>
<span id="line-S-23412-180">180</span>
<span id="line-S-23412-181"><span class="lno">181</span></span>
<span id="line-S-23412-182"><span class="lno">182</span></span>
<span id="line-S-23412-183"><span class="lno">183</span></span>
<span id="line-S-23412-184"><span class="lno">184</span></span>
<span id="line-S-23412-185">185</span>
<span id="line-S-23412-186"><span class="lno">186</span></span>
<span id="line-S-23412-187"><span class="lno">187</span></span>
<span id="line-S-23412-188"><span class="lno">188</span></span>
<span id="line-S-23412-189"><span class="lno">189</span></span>
<span id="line-S-23412-190">190</span>
<span id="line-S-23412-191"><span class="lno">191</span></span>
<span id="line-S-23412-192"><span class="lno">192</span></span>
<span id="line-S-23412-193"><span class="lno">193</span></span>
<span id="line-S-23412-194"><span class="lno">194</span></span>
<span id="line-S-23412-195">195</span>
<span id="line-S-23412-196"><span class="lno">196</span></span>
<span id="line-S-23412-197"><span class="lno">197</span></span>
<span id="line-S-23412-198"><span class="lno">198</span></span>
<span id="line-S-23412-199"><span class="lno">199</span></span>
<span id="line-S-23412-200">200</span>
<span id="line-S-23412-201"><span class="lno">201</span></span>
<span id="line-S-23412-202"><span class="lno">202</span></span>
<span id="line-S-23412-203"><span class="lno">203</span></span>
<span id="line-S-23412-204"><span class="lno">204</span></span>
<span id="line-S-23412-205">205</span>
<span id="line-S-23412-206"><span class="lno">206</span></span>
<span id="line-S-23412-207"><span class="lno">207</span></span>
<span id="line-S-23412-208"><span class="lno">208</span></span>
<span id="line-S-23412-209"><span class="lno">209</span></span>
<span id="line-S-23412-210">210</span>
<span id="line-S-23412-211"><span class="lno">211</span></span>
<span id="line-S-23412-212"><span class="lno">212</span></span>
<span id="line-S-23412-213"><span class="lno">213</span></span>
<span id="line-S-23412-214"><span class="lno">214</span></span>
<span id="line-S-23412-215">215</span>
<span id="line-S-23412-216"><span class="lno">216</span></span>
<span id="line-S-23412-217"><span class="lno">217</span></span>
<span id="line-S-23412-218"><span class="lno">218</span></span>
<span id="line-S-23412-219"><span class="lno">219</span></span>
<span id="line-S-23412-220">220</span>
<span id="line-S-23412-221"><span class="lno">221</span></span>
<span id="line-S-23412-222"><span class="lno">222</span></span>
<span id="line-S-23412-223"><span class="lno">223</span></span>
<span id="line-S-23412-224"><span class="lno">224</span></span>
<span id="line-S-23412-225">225</span>
<span id="line-S-23412-226"><span class="lno">226</span></span>
<span id="line-S-23412-227"><span class="lno">227</span></span>
<span id="line-S-23412-228"><span class="lno">228</span></span>
<span id="line-S-23412-229"><span class="lno">229</span></span>
<span id="line-S-23412-230">230</span>
<span id="line-S-23412-231"><span class="lno">231</span></span>
<span id="line-S-23412-232"><span class="lno">232</span></span>
<span id="line-S-23412-233"><span class="lno">233</span></span>
<span id="line-S-23412-234"><span class="lno">234</span></span>
<span id="line-S-23412-235">235</span>
<span id="line-S-23412-236"><span class="lno">236</span></span>
</pre></td><td valign="top"><pre><code class="language-xml">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                xmlns:db="http://docbook.org/ns/docbook"
                xmlns:ext="http://docbook.org/extensions/xslt"
                xmlns:f="http://docbook.org/ns/docbook/functions"
                xmlns:fp="http://docbook.org/ns/docbook/functions/private"
                xmlns:h="http://www.w3.org/1999/xhtml"
                xmlns:m="http://docbook.org/ns/docbook/modes"
                xmlns:v="http://docbook.org/ns/docbook/variables"
                xmlns:vp="http://docbook.org/ns/docbook/variables/private"
                xmlns:xs="http://www.w3.org/2001/XMLSchema"
                xmlns="http://www.w3.org/1999/xhtml"
                default-mode="m:docbook"
                exclude-result-prefixes="db ext f fp h m v vp xs"
                version="3.0"&gt;

&lt;!-- Note: These are variables used by the stylesheet. Many are
     initialized by parsing parameters defined in param.xsl. They're
     in a separate stylesheet to make the pipelines cleaner. --&gt;

&lt;!-- Some them are initialized using content instead of a select
     attribute in order to make the reference page in the Guide work
     better. --&gt;

&lt;xsl:variable name="v:debug" static="yes" as="xs:string*"
              select="tokenize($debug, '[,\s]+') ! normalize-space(.)"/&gt;

&lt;xsl:variable name="v:verbatim-line-style"
              select="tokenize($verbatim-line-style, '\s+')"/&gt;

&lt;xsl:variable name="v:verbatim-plain-style" as="xs:string*"
              select="tokenize($verbatim-plain-style, '\s+')"/&gt;

&lt;xsl:variable name="v:verbatim-space" as="node()"&gt;
  &lt;xsl:value-of select="substring($verbatim-space || ' ', 1, 1)"/&gt;
&lt;/xsl:variable&gt;

&lt;xsl:variable name="v:verbatim-numbered-elements" as="xs:string*"
              select="tokenize($verbatim-numbered-elements, '\s+')"/&gt;

&lt;xsl:variable name="v:verbatim-number-minlines"
              select="xs:integer($verbatim-number-minlines)"/&gt;

&lt;xsl:variable name="v:verbatim-number-every-nth"
              select="xs:integer($verbatim-number-every-nth)"/&gt;

&lt;xsl:variable name="v:verbatim-number-first-line"
              select="f:is-true($verbatim-number-first-line)"/&gt;

&lt;xsl:variable name="v:verbatim-callouts" as="xs:string*"
              select="tokenize($verbatim-callouts, '\s+')"/&gt;

&lt;xsl:variable name="v:verbatim-syntax-highlight-languages"
              select="tokenize($verbatim-syntax-highlight-languages, '\s+')"/&gt;
&lt;xsl:variable name="v:verbatim-syntax-highlight-options"
           select="map { }"/&gt;
&lt;xsl:variable name="v:verbatim-syntax-highlight-pygments-options"
           select="map { }"/&gt;

&lt;xsl:variable name="v:mediaobject-input-base-uri" as="xs:string?"&gt;
  &lt;xsl:message use-when="'mediaobject-uris' = $v:debug"
               select="'Mediaobject input base URI:',
                       if ($mediaobject-input-base-uri = '')
                       then ()
                       else resolve-uri($mediaobject-input-base-uri, static-base-uri())"/&gt;
  &lt;xsl:sequence select="if ($mediaobject-input-base-uri = '')
                        then ()
                        else resolve-uri($mediaobject-input-base-uri, static-base-uri())"/&gt;
&lt;/xsl:variable&gt;

&lt;xsl:variable name="v:mediaobject-output-base-uri" as="xs:string?"&gt;
  &lt;xsl:message use-when="'mediaobject-uris' = $v:debug"
               select="'Mediaobject output base URI:',
                       if ($mediaobject-output-base-uri = '')
                       then ()
                       else if (ends-with($mediaobject-output-base-uri, '/'))
                            then $mediaobject-output-base-uri
                            else $mediaobject-output-base-uri || '/'"/&gt;
  &lt;xsl:sequence select="if ($mediaobject-output-base-uri = '')
                        then ()
                        else if (ends-with($mediaobject-output-base-uri, '/'))
                             then $mediaobject-output-base-uri
                             else $mediaobject-output-base-uri || '/'"/&gt;
&lt;/xsl:variable&gt;

&lt;xsl:variable name="v:personal-name-styles"
              select="('first-last', 'last-first', 'FAMILY-given')"/&gt;

&lt;xsl:variable name="v:formal-object-title-placement" as="map(xs:string,xs:string)"
              select="fp:parse-key-value-pairs(
                        tokenize($formal-object-title-placement, '\s+'))"/&gt;

&lt;xsl:variable name="v:arg-choice-opt-open-str"&gt;&lt;span class="cmdpunct"&gt;[&lt;/span&gt;&lt;/xsl:variable&gt;
&lt;xsl:variable name="v:arg-choice-opt-close-str"&gt;&lt;span class="cmdpunct"&gt;]&lt;/span&gt;&lt;/xsl:variable&gt;
&lt;xsl:variable name="v:arg-choice-req-open-str"&gt;&lt;span class="cmdpunct"&gt;{&lt;/span&gt;&lt;/xsl:variable&gt;
&lt;xsl:variable name="v:arg-choice-req-close-str"&gt;&lt;span class="cmdpunct"&gt;}&lt;/span&gt;&lt;/xsl:variable&gt;
&lt;xsl:variable name="v:arg-choice-plain-open-str"&gt;&lt;xsl:text&gt;&lt;/xsl:text&gt;&lt;/xsl:variable&gt;
&lt;xsl:variable name="v:arg-choice-plain-close-str"&gt;&lt;xsl:text&gt;&lt;/xsl:text&gt;&lt;/xsl:variable&gt;
&lt;xsl:variable name="v:arg-choice-def-open-str"&gt;&lt;span class="cmdpunct"&gt;[&lt;/span&gt;&lt;/xsl:variable&gt;
&lt;xsl:variable name="v:arg-choice-def-close-str"&gt;&lt;span class="cmdpunct"&gt;]&lt;/span&gt;&lt;/xsl:variable&gt;
&lt;xsl:variable name="v:arg-rep-repeat-str"&gt;&lt;span class="cmdpunct"&gt;…&lt;/span&gt;&lt;/xsl:variable&gt;
&lt;xsl:variable name="v:arg-rep-norepeat-str"&gt;&lt;xsl:text&gt;&lt;/xsl:text&gt;&lt;/xsl:variable&gt;
&lt;xsl:variable name="v:arg-rep-def-str"&gt;&lt;xsl:text&gt;&lt;/xsl:text&gt;&lt;/xsl:variable&gt;
&lt;xsl:variable name="v:arg-or-sep"&gt;&lt;span class="cmdpunct"&gt; | &lt;/span&gt;&lt;/xsl:variable&gt;

&lt;xsl:variable name="v:css-links"
              select="tokenize($css-links, '\s+') ! normalize-space(.)"/&gt;

&lt;xsl:variable name="v:chunk-renumber-footnotes" as="xs:boolean"
              select="f:is-true($chunk-renumber-footnotes)"/&gt;

&lt;xsl:variable name="v:chunk-filter-namespaces" as="namespace-node()*"&gt;
  &lt;xsl:namespace name="db" select="'http://docbook.org/ns/docbook'"/&gt;
&lt;/xsl:variable&gt;

&lt;xsl:variable name="v:admonition-icons"&gt;
  &lt;db:tip&gt;☞&amp;#xFE0E;&lt;/db:tip&gt;
  &lt;db:note&gt;🛈&amp;#xFE0E;&lt;/db:note&gt;
  &lt;db:important&gt;☝&amp;#xFE0E;&lt;/db:important&gt;
  &lt;db:caution&gt;⚠&amp;#xFE0E;&lt;/db:caution&gt;
  &lt;db:warning&gt;⯃&amp;#xFE0E;&lt;/db:warning&gt;
  &lt;db:danger&gt;⚡&amp;#xFE0E;&lt;/db:danger&gt;
&lt;/xsl:variable&gt;

&lt;xsl:variable name="v:annotation-close" as="element()"&gt;
  &lt;span&gt;╳&lt;/span&gt;
&lt;/xsl:variable&gt;

&lt;xsl:variable name="v:nominal-page-width"
              select="f:parse-length($nominal-page-width)"/&gt;
&lt;xsl:variable name="v:image-nominal-width"
              select="f:parse-length($image-nominal-width)"/&gt;
&lt;xsl:variable name="v:image-nominal-height"
              select="f:parse-length($image-nominal-height)"/&gt;

&lt;xsl:variable name="v:toc-open" as="element()"&gt;
  &lt;span&gt;[toc]&lt;/span&gt;
&lt;/xsl:variable&gt;

&lt;xsl:variable name="v:toc-close" as="element()"&gt;
  &lt;span&gt;╳&lt;/span&gt;
&lt;/xsl:variable&gt;

&lt;xsl:variable name="v:olink-databases" as="element(h:targetdb)*"&gt;
  &lt;xsl:if test="normalize-space($olink-databases) != ''"&gt;
    &lt;xsl:for-each select="tokenize($olink-databases, ',\s*') ! normalize-space(.)"&gt;
      &lt;xsl:variable name="db" select="."/&gt;
      &lt;xsl:try&gt;
        &lt;xsl:variable name="olinkdb" select="doc($db)/h:targetdb"/&gt;
        &lt;xsl:if test="empty($olinkdb)"&gt;
          &lt;xsl:message select="'No targets in olinkdb:', $db"/&gt;
        &lt;/xsl:if&gt;
        &lt;xsl:sequence select="$olinkdb"/&gt;
        &lt;xsl:catch&gt;
          &lt;xsl:message select="'Failed to load olinkdb:', $db"/&gt;
        &lt;/xsl:catch&gt;
      &lt;/xsl:try&gt;
    &lt;/xsl:for-each&gt;
  &lt;/xsl:if&gt;
&lt;/xsl:variable&gt;

&lt;xsl:variable name="v:theme-list" as="element()*"&gt;
  &lt;theme name="Materials dark" id="materials-dark" dark="true"/&gt;
  &lt;theme name="Materials light" id="materials-light" dark="false"/&gt;
&lt;/xsl:variable&gt;

&lt;xsl:variable name="vp:js-controls" as="element()*"&gt;
  &lt;xsl:variable name="chars"
                select="('a','b','c','d','e','f','_','_','_','1','2','3','4','5','6')"/&gt;
  &lt;xsl:variable name="random"
                select="string-join(random-number-generator()?permute($chars), '')"/&gt;
  &lt;span class="controls-open"&gt;☰&lt;/span&gt;
  &lt;div class="js-controls-wrapper"&gt;
    &lt;xsl:if test="$v:theme-list[@dark='true']"&gt;
      &lt;xsl:attribute name="db-dark-theme"
                     select="($v:theme-list[@dark='true'])[1]/@id"/&gt;
    &lt;/xsl:if&gt;
    &lt;div class="js-controls-body"&gt;
      &lt;div class="js-controls-header"&gt;
        &lt;div class="js-controls-close"&gt;╳&lt;/div&gt;
        &lt;div class="js-controls-title"&gt;
          &lt;xsl:text&gt;Settings&lt;/xsl:text&gt;
        &lt;/div&gt;
      &lt;/div&gt;
      &lt;div class="js-controls-content"&gt;
        &lt;fieldset db-random="{$random}" class="js-controls-toggles"&gt;
          &lt;legend&gt;Select options:&lt;/legend&gt;
          &lt;input id="db-js-annotations_{$random}" type="checkbox" value="js" /&gt;
          &lt;label for="db-js-annotations_{$random}"&gt;JavaScript annotations&lt;/label&gt;&lt;br/&gt;
          &lt;input id="db-js-xlinks_{$random}" type="checkbox" value="js" /&gt;
          &lt;label for="db-js-xlinks_{$random}"&gt;JavaScript extended links&lt;/label&gt;&lt;br/&gt;
        &lt;/fieldset&gt;
        &lt;div id="db-js-controls-reload_{$random}" class="js-controls-reload"&gt;&lt;/div&gt;
        &lt;fieldset&gt;
          &lt;legend&gt;Choose a theme:&lt;/legend&gt;
          &lt;input id="db-default-theme_{$random}" type="radio" name="db-theme" value="default" /&gt;
          &lt;label for="db-default-theme_{$random}"&gt;Default&lt;/label&gt;&lt;br/&gt;
          &lt;xsl:for-each select="$v:theme-list"&gt;
            &lt;input id="db-theme-{@id}-{$random}"
                   type="radio" name="db-theme" value="{@id}" /&gt;
            &lt;label for="db-theme-{@id}-{$random}"&gt;
              &lt;xsl:sequence select="@name/string()"/&gt;
            &lt;/label&gt;
            &lt;br/&gt;
          &lt;/xsl:for-each&gt;
        &lt;/fieldset&gt;
      &lt;/div&gt;
      &lt;div class="js-controls-buttons"&gt;
        &lt;button id="js-controls-cancel"&gt;✗&lt;/button&gt;
        &lt;xsl:text&gt; &lt;/xsl:text&gt;
        &lt;button id="js-controls-ok"&gt;✓&lt;/button&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/xsl:variable&gt;

&lt;!-- N.B. There's a bit of a hack in the variables below. We put the
     link and script elements in the same variable, but we use them in
     two different places so that the h:link element(s) precede the
     DocBook CSS files (in order to support overrides with cascade).
     --&gt;

&lt;xsl:variable name="v:highlight-js-head-elements" as="element()*"&gt;
  &lt;link rel="stylesheet"
        href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.2/styles/default.min.css" /&gt;
  &lt;script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.2/highlight.min.js"&gt;&lt;/script&gt;
  &lt;script&gt;hljs.initHighlightingOnLoad();&lt;/script&gt;
&lt;/xsl:variable&gt;

&lt;xsl:variable name="v:prism-js-head-elements" as="element()*"&gt;
  &lt;link rel="stylesheet" href="css/prism.css"/&gt;
  &lt;script src="js/prism.js"&gt;&lt;/script&gt;
&lt;/xsl:variable&gt;

&lt;/xsl:stylesheet&gt;
</code></pre></td></tr></table></div></div></div></div><div class="stylesheet" id="S-52537"><h3>space.xsl</h3><div class="instructions"><div class="title closed">Instructions</div><div class="body"></div></div><div class="source-code"><div class="title closed">Source code</div><div class="body"><div><table><tr><td valign="top" align="right"><pre class="fake-prism"><span id="line-S-52537-1">1</span>
<span id="line-S-52537-2"><span class="lno">2</span></span>
<span id="line-S-52537-3"><span class="lno">3</span></span>
<span id="line-S-52537-4"><span class="lno">4</span></span>
<span id="line-S-52537-5">5</span>
<span id="line-S-52537-6"><span class="lno">6</span></span>
<span id="line-S-52537-7"><span class="lno">7</span></span>
<span id="line-S-52537-8"><span class="lno">8</span></span>
<span id="line-S-52537-9"><span class="lno">9</span></span>
<span id="line-S-52537-10">10</span>
<span id="line-S-52537-11"><span class="lno">11</span></span>
<span id="line-S-52537-12"><span class="lno">12</span></span>
<span id="line-S-52537-13"><span class="lno">13</span></span>
<span id="line-S-52537-14"><span class="lno">14</span></span>
<span id="line-S-52537-15">15</span>
<span id="line-S-52537-16"><span class="lno">16</span></span>
<span id="line-S-52537-17"><span class="lno">17</span></span>
<span id="line-S-52537-18"><span class="lno">18</span></span>
<span id="line-S-52537-19"><span class="lno">19</span></span>
<span id="line-S-52537-20">20</span>
<span id="line-S-52537-21"><span class="lno">21</span></span>
<span id="line-S-52537-22"><span class="lno">22</span></span>
<span id="line-S-52537-23"><span class="lno">23</span></span>
<span id="line-S-52537-24"><span class="lno">24</span></span>
<span id="line-S-52537-25">25</span>
<span id="line-S-52537-26"><span class="lno">26</span></span>
<span id="line-S-52537-27"><span class="lno">27</span></span>
<span id="line-S-52537-28"><span class="lno">28</span></span>
<span id="line-S-52537-29"><span class="lno">29</span></span>
<span id="line-S-52537-30">30</span>
<span id="line-S-52537-31"><span class="lno">31</span></span>
<span id="line-S-52537-32"><span class="lno">32</span></span>
<span id="line-S-52537-33"><span class="lno">33</span></span>
<span id="line-S-52537-34"><span class="lno">34</span></span>
<span id="line-S-52537-35">35</span>
<span id="line-S-52537-36"><span class="lno">36</span></span>
<span id="line-S-52537-37"><span class="lno">37</span></span>
<span id="line-S-52537-38"><span class="lno">38</span></span>
<span id="line-S-52537-39"><span class="lno">39</span></span>
<span id="line-S-52537-40">40</span>
<span id="line-S-52537-41"><span class="lno">41</span></span>
<span id="line-S-52537-42"><span class="lno">42</span></span>
<span id="line-S-52537-43"><span class="lno">43</span></span>
<span id="line-S-52537-44"><span class="lno">44</span></span>
<span id="line-S-52537-45">45</span>
<span id="line-S-52537-46"><span class="lno">46</span></span>
<span id="line-S-52537-47"><span class="lno">47</span></span>
<span id="line-S-52537-48"><span class="lno">48</span></span>
<span id="line-S-52537-49"><span class="lno">49</span></span>
<span id="line-S-52537-50">50</span>
<span id="line-S-52537-51"><span class="lno">51</span></span>
<span id="line-S-52537-52"><span class="lno">52</span></span>
<span id="line-S-52537-53"><span class="lno">53</span></span>
<span id="line-S-52537-54"><span class="lno">54</span></span>
<span id="line-S-52537-55">55</span>
<span id="line-S-52537-56"><span class="lno">56</span></span>
<span id="line-S-52537-57"><span class="lno">57</span></span>
<span id="line-S-52537-58"><span class="lno">58</span></span>
<span id="line-S-52537-59"><span class="lno">59</span></span>
<span id="line-S-52537-60">60</span>
<span id="line-S-52537-61"><span class="lno">61</span></span>
<span id="line-S-52537-62"><span class="lno">62</span></span>
<span id="line-S-52537-63"><span class="lno">63</span></span>
<span id="line-S-52537-64"><span class="lno">64</span></span>
<span id="line-S-52537-65">65</span>
<span id="line-S-52537-66"><span class="lno">66</span></span>
<span id="line-S-52537-67"><span class="lno">67</span></span>
<span id="line-S-52537-68"><span class="lno">68</span></span>
<span id="line-S-52537-69"><span class="lno">69</span></span>
<span id="line-S-52537-70">70</span>
<span id="line-S-52537-71"><span class="lno">71</span></span>
<span id="line-S-52537-72"><span class="lno">72</span></span>
<span id="line-S-52537-73"><span class="lno">73</span></span>
<span id="line-S-52537-74"><span class="lno">74</span></span>
<span id="line-S-52537-75">75</span>
<span id="line-S-52537-76"><span class="lno">76</span></span>
<span id="line-S-52537-77"><span class="lno">77</span></span>
<span id="line-S-52537-78"><span class="lno">78</span></span>
<span id="line-S-52537-79"><span class="lno">79</span></span>
<span id="line-S-52537-80">80</span>
<span id="line-S-52537-81"><span class="lno">81</span></span>
<span id="line-S-52537-82"><span class="lno">82</span></span>
<span id="line-S-52537-83"><span class="lno">83</span></span>
<span id="line-S-52537-84"><span class="lno">84</span></span>
<span id="line-S-52537-85">85</span>
<span id="line-S-52537-86"><span class="lno">86</span></span>
<span id="line-S-52537-87"><span class="lno">87</span></span>
<span id="line-S-52537-88"><span class="lno">88</span></span>
<span id="line-S-52537-89"><span class="lno">89</span></span>
<span id="line-S-52537-90">90</span>
<span id="line-S-52537-91"><span class="lno">91</span></span>
<span id="line-S-52537-92"><span class="lno">92</span></span>
<span id="line-S-52537-93"><span class="lno">93</span></span>
<span id="line-S-52537-94"><span class="lno">94</span></span>
<span id="line-S-52537-95">95</span>
<span id="line-S-52537-96"><span class="lno">96</span></span>
<span id="line-S-52537-97"><span class="lno">97</span></span>
<span id="line-S-52537-98"><span class="lno">98</span></span>
<span id="line-S-52537-99"><span class="lno">99</span></span>
<span id="line-S-52537-100">100</span>
<span id="line-S-52537-101"><span class="lno">101</span></span>
<span id="line-S-52537-102"><span class="lno">102</span></span>
<span id="line-S-52537-103"><span class="lno">103</span></span>
<span id="line-S-52537-104"><span class="lno">104</span></span>
<span id="line-S-52537-105">105</span>
<span id="line-S-52537-106"><span class="lno">106</span></span>
<span id="line-S-52537-107"><span class="lno">107</span></span>
<span id="line-S-52537-108"><span class="lno">108</span></span>
<span id="line-S-52537-109"><span class="lno">109</span></span>
<span id="line-S-52537-110">110</span>
<span id="line-S-52537-111"><span class="lno">111</span></span>
<span id="line-S-52537-112"><span class="lno">112</span></span>
<span id="line-S-52537-113"><span class="lno">113</span></span>
<span id="line-S-52537-114"><span class="lno">114</span></span>
<span id="line-S-52537-115">115</span>
<span id="line-S-52537-116"><span class="lno">116</span></span>
<span id="line-S-52537-117"><span class="lno">117</span></span>
<span id="line-S-52537-118"><span class="lno">118</span></span>
<span id="line-S-52537-119"><span class="lno">119</span></span>
<span id="line-S-52537-120">120</span>
<span id="line-S-52537-121"><span class="lno">121</span></span>
<span id="line-S-52537-122"><span class="lno">122</span></span>
<span id="line-S-52537-123"><span class="lno">123</span></span>
<span id="line-S-52537-124"><span class="lno">124</span></span>
<span id="line-S-52537-125">125</span>
<span id="line-S-52537-126"><span class="lno">126</span></span>
<span id="line-S-52537-127"><span class="lno">127</span></span>
<span id="line-S-52537-128"><span class="lno">128</span></span>
<span id="line-S-52537-129"><span class="lno">129</span></span>
<span id="line-S-52537-130">130</span>
<span id="line-S-52537-131"><span class="lno">131</span></span>
<span id="line-S-52537-132"><span class="lno">132</span></span>
<span id="line-S-52537-133"><span class="lno">133</span></span>
<span id="line-S-52537-134"><span class="lno">134</span></span>
<span id="line-S-52537-135">135</span>
<span id="line-S-52537-136"><span class="lno">136</span></span>
<span id="line-S-52537-137"><span class="lno">137</span></span>
<span id="line-S-52537-138"><span class="lno">138</span></span>
<span id="line-S-52537-139"><span class="lno">139</span></span>
<span id="line-S-52537-140">140</span>
<span id="line-S-52537-141"><span class="lno">141</span></span>
<span id="line-S-52537-142"><span class="lno">142</span></span>
<span id="line-S-52537-143"><span class="lno">143</span></span>
<span id="line-S-52537-144"><span class="lno">144</span></span>
<span id="line-S-52537-145">145</span>
<span id="line-S-52537-146"><span class="lno">146</span></span>
<span id="line-S-52537-147"><span class="lno">147</span></span>
<span id="line-S-52537-148"><span class="lno">148</span></span>
<span id="line-S-52537-149"><span class="lno">149</span></span>
<span id="line-S-52537-150">150</span>
<span id="line-S-52537-151"><span class="lno">151</span></span>
<span id="line-S-52537-152"><span class="lno">152</span></span>
<span id="line-S-52537-153"><span class="lno">153</span></span>
<span id="line-S-52537-154"><span class="lno">154</span></span>
<span id="line-S-52537-155">155</span>
<span id="line-S-52537-156"><span class="lno">156</span></span>
<span id="line-S-52537-157"><span class="lno">157</span></span>
<span id="line-S-52537-158"><span class="lno">158</span></span>
<span id="line-S-52537-159"><span class="lno">159</span></span>
<span id="line-S-52537-160">160</span>
<span id="line-S-52537-161"><span class="lno">161</span></span>
<span id="line-S-52537-162"><span class="lno">162</span></span>
<span id="line-S-52537-163"><span class="lno">163</span></span>
<span id="line-S-52537-164"><span class="lno">164</span></span>
<span id="line-S-52537-165">165</span>
<span id="line-S-52537-166"><span class="lno">166</span></span>
<span id="line-S-52537-167"><span class="lno">167</span></span>
<span id="line-S-52537-168"><span class="lno">168</span></span>
<span id="line-S-52537-169"><span class="lno">169</span></span>
<span id="line-S-52537-170">170</span>
<span id="line-S-52537-171"><span class="lno">171</span></span>
<span id="line-S-52537-172"><span class="lno">172</span></span>
<span id="line-S-52537-173"><span class="lno">173</span></span>
<span id="line-S-52537-174"><span class="lno">174</span></span>
<span id="line-S-52537-175">175</span>
<span id="line-S-52537-176"><span class="lno">176</span></span>
<span id="line-S-52537-177"><span class="lno">177</span></span>
<span id="line-S-52537-178"><span class="lno">178</span></span>
<span id="line-S-52537-179"><span class="lno">179</span></span>
<span id="line-S-52537-180">180</span>
<span id="line-S-52537-181"><span class="lno">181</span></span>
<span id="line-S-52537-182"><span class="lno">182</span></span>
<span id="line-S-52537-183"><span class="lno">183</span></span>
<span id="line-S-52537-184"><span class="lno">184</span></span>
<span id="line-S-52537-185">185</span>
<span id="line-S-52537-186"><span class="lno">186</span></span>
<span id="line-S-52537-187"><span class="lno">187</span></span>
<span id="line-S-52537-188"><span class="lno">188</span></span>
<span id="line-S-52537-189"><span class="lno">189</span></span>
<span id="line-S-52537-190">190</span>
<span id="line-S-52537-191"><span class="lno">191</span></span>
<span id="line-S-52537-192"><span class="lno">192</span></span>
<span id="line-S-52537-193"><span class="lno">193</span></span>
<span id="line-S-52537-194"><span class="lno">194</span></span>
<span id="line-S-52537-195">195</span>
<span id="line-S-52537-196"><span class="lno">196</span></span>
<span id="line-S-52537-197"><span class="lno">197</span></span>
<span id="line-S-52537-198"><span class="lno">198</span></span>
<span id="line-S-52537-199"><span class="lno">199</span></span>
<span id="line-S-52537-200">200</span>
<span id="line-S-52537-201"><span class="lno">201</span></span>
<span id="line-S-52537-202"><span class="lno">202</span></span>
<span id="line-S-52537-203"><span class="lno">203</span></span>
<span id="line-S-52537-204"><span class="lno">204</span></span>
<span id="line-S-52537-205">205</span>
<span id="line-S-52537-206"><span class="lno">206</span></span>
<span id="line-S-52537-207"><span class="lno">207</span></span>
<span id="line-S-52537-208"><span class="lno">208</span></span>
<span id="line-S-52537-209"><span class="lno">209</span></span>
<span id="line-S-52537-210">210</span>
<span id="line-S-52537-211"><span class="lno">211</span></span>
<span id="line-S-52537-212"><span class="lno">212</span></span>
</pre></td><td valign="top"><pre><code class="language-xml">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                xmlns:db="http://docbook.org/ns/docbook"
                xmlns:m="http://docbook.org/ns/docbook/modes"
                xmlns:xs="http://www.w3.org/2001/XMLSchema"
                xmlns="http://www.w3.org/1999/xhtml"
                default-mode="m:docbook"
                exclude-result-prefixes="db m xs"
                version="3.0"&gt;

&lt;xsl:preserve-space elements="*"/&gt;

&lt;xsl:strip-space elements="
db:abstract
db:affiliation
db:anchor
db:answer
db:appendix
db:area
db:areaset
db:areaspec
db:artheader
db:article
db:audiodata
db:audioobject
db:author
db:authorblurb
db:authorgroup
db:beginpage
db:bibliodiv
db:biblioentry
db:bibliography
db:biblioset
db:blockquote
db:book
db:bookbiblio
db:bookinfo
db:callout
db:calloutlist
db:caption
db:caution
db:chapter
db:citerefentry
db:classsynopsis
db:cmdsynopsis
db:co
db:colgroup
db:collab
db:colophon
db:colspec
db:confgroup
db:constructorsynopsis
db:copyright
db:danger
db:dedication
db:destructorsynopsis
db:docinfo
db:editor
db:entrytbl
db:epigraph
db:equation
db:example
db:fieldsynopsis
db:figure
db:footnote
db:formalpara
db:funcprototype
db:funcsynopsis
db:glossary
db:glossdef
db:glossdiv
db:glossentry
db:glosslist
db:graphicco
db:group
db:highlights
db:imagedata
db:imageobject
db:imageobjectco
db:important
db:index
db:indexdiv
db:indexentry
db:indexterm
db:info
db:informalequation
db:informalexample
db:informalfigure
db:informaltable
db:inlineequation
db:inlinemediaobject
db:itemizedlist
db:itermset
db:keycombo
db:keywordset
db:legalnotice
db:listitem
db:lot
db:mediaobject
db:mediaobjectco
db:menuchoice
db:methodparam
db:methodsynopsis
db:msg
db:msgentry
db:msgexplan
db:msginfo
db:msgmain
db:msgrel
db:msgset
db:msgsub
db:msgtext
db:note
db:objectinfo
db:ooclass
db:ooexception
db:oointerface
db:orderedlist
db:othercredit
db:part
db:partintro
db:preface
db:printhistory
db:procedure
db:productionset
db:programlistingco
db:publisher
db:qandadiv
db:qandaentry
db:qandaset
db:question
db:refentry
db:reference
db:refmeta
db:refnamediv
db:refsect1
db:refsect1info
db:refsect2
db:refsect2info
db:refsect3
db:refsect3info
db:refsynopsisdiv
db:refsynopsisdivinfo
db:revhistory
db:revision
db:row
db:sbr
db:screenco
db:screenshot
db:sect1
db:sect1info
db:sect2
db:sect2info
db:sect3
db:sect3info
db:sect4
db:sect4info
db:sect5
db:sect5info
db:section
db:sectioninfo
db:seglistitem
db:segmentedlist
db:seriesinfo
db:set
db:setindex
db:setinfo
db:shortcut
db:sidebar
db:simplelist
db:simplemsgentry
db:simplesect
db:spanspec
db:step
db:subject
db:subjectset
db:subjectset
db:substeps
db:synopfragment
db:table
db:tr
db:tbody
db:textobject
db:tfoot
db:tgroup
db:thead
db:tip
db:toc
db:tocchap
db:toclevel1
db:toclevel2
db:toclevel3
db:toclevel4
db:toclevel5
db:tocpart
db:varargs
db:variablelist
db:varlistentry
db:videodata
db:videoobject
db:void
db:warning

db:dialogue
db:poetry
db:linegroup
db:speaker
db:person
"/&gt;

&lt;/xsl:stylesheet&gt;
</code></pre></td></tr></table></div></div></div></div><div class="stylesheet" id="S-38369"><h3>unhandled.xsl</h3><p><span><span class="template all">2 templates</span></span></p><div class="instructions"><div class="title closed">Instructions</div><div class="body"><div id="S-38369-t-1" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ *</div><div class="props"><div class="calls">Calls: <a href="#S-28936-docbook.org.ns.docbook.functions.generate-id,1">f:generate-id()</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>*</code></div></div></div><div id="S-38369-t-2" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ h:*</div><div class="props"><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>h:*</code></div></div></div></div></div><div class="source-code"><div class="title closed">Source code</div><div class="body"><div><table><tr><td valign="top" align="right"><pre class="fake-prism"><span id="line-S-38369-1">1</span>
<span id="line-S-38369-2"><span class="lno">2</span></span>
<span id="line-S-38369-3"><span class="lno">3</span></span>
<span id="line-S-38369-4"><span class="lno">4</span></span>
<span id="line-S-38369-5">5</span>
<span id="line-S-38369-6"><span class="lno">6</span></span>
<span id="line-S-38369-7"><span class="lno">7</span></span>
<span id="line-S-38369-8"><span class="lno">8</span></span>
<span id="line-S-38369-9"><span class="lno">9</span></span>
<span id="line-S-38369-10">10</span>
<span id="line-S-38369-11"><span class="lno">11</span></span>
<span id="line-S-38369-12"><span class="lno">12</span></span>
<span id="line-S-38369-13"><span class="lno">13</span></span>
<span id="line-S-38369-14"><span class="lno">14</span></span>
<span id="line-S-38369-15">15</span>
<span id="line-S-38369-16"><span class="lno">16</span></span>
<span id="line-S-38369-17"><span class="lno">17</span></span>
<span id="line-S-38369-18"><span class="lno">18</span></span>
<span id="line-S-38369-19"><span class="lno">19</span></span>
<span id="line-S-38369-20">20</span>
<span id="line-S-38369-21"><span class="lno">21</span></span>
<span id="line-S-38369-22"><span class="lno">22</span></span>
<span id="line-S-38369-23"><span class="lno">23</span></span>
<span id="line-S-38369-24"><span class="lno">24</span></span>
<span id="line-S-38369-25">25</span>
<span id="line-S-38369-26"><span class="lno">26</span></span>
<span id="line-S-38369-27"><span class="lno">27</span></span>
<span id="line-S-38369-28"><span class="lno">28</span></span>
<span id="line-S-38369-29"><span class="lno">29</span></span>
<span id="line-S-38369-30">30</span>
<span id="line-S-38369-31"><span class="lno">31</span></span>
<span id="line-S-38369-32"><span class="lno">32</span></span>
<span id="line-S-38369-33"><span class="lno">33</span></span>
<span id="line-S-38369-34"><span class="lno">34</span></span>
<span id="line-S-38369-35">35</span>
<span id="line-S-38369-36"><span class="lno">36</span></span>
<span id="line-S-38369-37"><span class="lno">37</span></span>
<span id="line-S-38369-38"><span class="lno">38</span></span>
<span id="line-S-38369-39"><span class="lno">39</span></span>
<span id="line-S-38369-40">40</span>
<span id="line-S-38369-41"><span class="lno">41</span></span>
<span id="line-S-38369-42"><span class="lno">42</span></span>
<span id="line-S-38369-43"><span class="lno">43</span></span>
<span id="line-S-38369-44"><span class="lno">44</span></span>
<span id="line-S-38369-45">45</span>
<span id="line-S-38369-46"><span class="lno">46</span></span>
<span id="line-S-38369-47"><span class="lno">47</span></span>
<span id="line-S-38369-48"><span class="lno">48</span></span>
<span id="line-S-38369-49"><span class="lno">49</span></span>
<span id="line-S-38369-50">50</span>
<span id="line-S-38369-51"><span class="lno">51</span></span>
<span id="line-S-38369-52"><span class="lno">52</span></span>
<span id="line-S-38369-53"><span class="lno">53</span></span>
<span id="line-S-38369-54"><span class="lno">54</span></span>
<span id="line-S-38369-55">55</span>
<span id="line-S-38369-56"><span class="lno">56</span></span>
<span id="line-S-38369-57"><span class="lno">57</span></span>
<span id="line-S-38369-58"><span class="lno">58</span></span>
<span id="line-S-38369-59"><span class="lno">59</span></span>
<span id="line-S-38369-60">60</span>
<span id="line-S-38369-61"><span class="lno">61</span></span>
<span id="line-S-38369-62"><span class="lno">62</span></span>
<span id="line-S-38369-63"><span class="lno">63</span></span>
<span id="line-S-38369-64"><span class="lno">64</span></span>
<span id="line-S-38369-65">65</span>
<span id="line-S-38369-66"><span class="lno">66</span></span>
<span id="line-S-38369-67"><span class="lno">67</span></span>
<span id="line-S-38369-68"><span class="lno">68</span></span>
<span id="line-S-38369-69"><span class="lno">69</span></span>
<span id="line-S-38369-70">70</span>
</pre></td><td valign="top"><pre><code class="language-xml">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                xmlns:f="http://docbook.org/ns/docbook/functions"
                xmlns:m="http://docbook.org/ns/docbook/modes"
                xmlns:xs="http://www.w3.org/2001/XMLSchema"
                xmlns="http://www.w3.org/1999/xhtml"
                default-mode="m:docbook"
                exclude-result-prefixes="f m xs"
                version="3.0"&gt;

&lt;xsl:template match="*"&gt;
  &lt;xsl:message
      select="'No template for ' || node-name(.) || ': ' || f:generate-id(.)"/&gt;
  &lt;xsl:variable name="inline-style"
                select="'font: monospace;
                         color: yellow;
                         background-color: red;
                         font-weight: bold;'"/&gt;
  &lt;xsl:variable name="block-style"
                select="'font: monospace;
                         color: yellow;
                         width: 100%;
                         background-color: red;
                         font-weight: bold;'"/&gt;

  &lt;xsl:variable name="inline"
                select="normalize-space(string-join(text(),'')) != ''"/&gt;

  &lt;xsl:element namespace="http://www.w3.org/1999/xhtml"
               name="{if ($inline) then 'span' else 'div'}"&gt;

    &lt;xsl:element namespace="http://www.w3.org/1999/xhtml"
                 name="{if ($inline) then 'span' else 'div'}"&gt;
      &lt;xsl:attribute name="style"
                     select="if ($inline) then $inline-style else $block-style"/&gt;
      &lt;xsl:text&gt;&amp;lt;&lt;/xsl:text&gt;
      &lt;xsl:value-of select="node-name(.)"/&gt;
      &lt;xsl:text&gt;&amp;gt;&lt;/xsl:text&gt;
    &lt;/xsl:element&gt;

    &lt;xsl:apply-templates/&gt;

    &lt;xsl:element namespace="http://www.w3.org/1999/xhtml"
                 name="{if ($inline) then 'span' else 'div'}"&gt;
      &lt;xsl:attribute name="style"
                     select="if ($inline) then $inline-style else $block-style"/&gt;
      &lt;xsl:text&gt;&amp;lt;/&lt;/xsl:text&gt;
      &lt;xsl:value-of select="node-name(.)"/&gt;
      &lt;xsl:text&gt;&amp;gt;&lt;/xsl:text&gt;
    &lt;/xsl:element&gt;
  &lt;/xsl:element&gt;

  &lt;!--
    &lt;xsl:message&gt;
      &lt;xsl:text&gt;Unhandled element: &lt;/xsl:text&gt;
      &lt;xsl:value-of select="node-name(.)"/&gt;
    &lt;/xsl:message&gt;
  --&gt;
&lt;/xsl:template&gt;

&lt;xsl:template xmlns:h="http://www.w3.org/1999/xhtml"
              match="h:*"&gt;
  &lt;xsl:element name="{local-name(.)}" namespace="http://www.w3.org/1999/xhtml"&gt;
    &lt;xsl:copy-of select="@*"/&gt;
    &lt;xsl:apply-templates select="node()"/&gt;
  &lt;/xsl:element&gt;
&lt;/xsl:template&gt;

&lt;/xsl:stylesheet&gt;
</code></pre></td></tr></table></div></div></div></div><div class="stylesheet" id="S-29386"><h3>errors.xsl</h3><p><span><span class="variable all">12 variables</span> (<span class="variable elsewhere">12 used only in one other module</span>)</span></p><div class="instructions"><div class="title closed">Instructions</div><div class="body"><div id="S-29386-docbook.org.ns.docbook.errors.INVALID-INJECT" class="instruction variable elsewhere"><div class="title"><span class="link"></span>Variable <code>$dbe:INVALID-INJECT</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-56456-t-11">template</a>, <a href="#S-56456-t-13">template</a>, <a href="#S-56456-docbook.org.ns.docbook.functions.private.injection-array,1">fp:injection-array()</a>, <a href="#S-56456-docbook.org.ns.docbook.functions.private.validate-injection-array,1">fp:validate-injection-array()</a></div><div class="used-in"><span class="marker" title="Only used in one other module">☝</span>Used in: <a href="#S-56456">modules/verbatim.xsl</a></div></div></div><div id="S-29386-docbook.org.ns.docbook.errors.INVALID-CALS" class="instruction variable elsewhere"><div class="title"><span class="link"></span>Variable <code>$dbe:INVALID-CALS</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.colspec,2">fcals:colspec()</a>, <a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.next-empty-cell,2">fcals:next-empty-cell()</a>, <a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.spanspec,2">fcals:spanspec()</a></div><div class="used-in"><span class="marker" title="Only used in one other module">☝</span>Used in: <a href="#S-59097">modules/tablecals.xsl</a></div></div></div><div id="S-29386-docbook.org.ns.docbook.errors.INVALID-AREAREFS" class="instruction variable elsewhere"><div class="title"><span class="link"></span>Variable <code>$dbe:INVALID-AREAREFS</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-33116-t-21">template</a></div><div class="used-in"><span class="marker" title="Only used in one other module">☝</span>Used in: <a href="#S-33116">modules/lists.xsl</a></div></div></div><div id="S-29386-docbook.org.ns.docbook.errors.INVALID-PRODUCTIONRECAP" class="instruction variable elsewhere"><div class="title"><span class="link"></span>Variable <code>$dbe:INVALID-PRODUCTIONRECAP</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-62162-t-3">template</a></div><div class="used-in"><span class="marker" title="Only used in one other module">☝</span>Used in: <a href="#S-62162">modules/programming.xsl</a></div></div></div><div id="S-29386-docbook.org.ns.docbook.errors.INVALID-CONSTRAINT" class="instruction variable elsewhere"><div class="title"><span class="link"></span>Variable <code>$dbe:INVALID-CONSTRAINT</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-62162-t-8">template</a></div><div class="used-in"><span class="marker" title="Only used in one other module">☝</span>Used in: <a href="#S-62162">modules/programming.xsl</a></div></div></div><div id="S-29386-docbook.org.ns.docbook.errors.INVALID-TEMPLATE" class="instruction variable elsewhere"><div class="title"><span class="link"></span>Variable <code>$dbe:INVALID-TEMPLATE</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-17405-t-2">template</a></div><div class="used-in"><span class="marker" title="Only used in one other module">☝</span>Used in: <a href="#S-17405">modules/templates.xsl</a></div></div></div><div id="S-29386-docbook.org.ns.docbook.errors.INTERNAL-RENUMBER-ERROR" class="instruction variable elsewhere"><div class="title"><span class="link"></span>Variable <code>$dbe:INTERNAL-RENUMBER-ERROR</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-7006-t-12">template</a></div><div class="used-in"><span class="marker" title="Only used in one other module">☝</span>Used in: <a href="#S-7006">modules/chunk-cleanup.xsl</a></div></div></div><div id="S-29386-docbook.org.ns.docbook.errors.INTERNAL-HIGHLIGHT-ERROR" class="instruction variable elsewhere"><div class="title"><span class="link"></span>Variable <code>$dbe:INTERNAL-HIGHLIGHT-ERROR</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-16614-docbook.org.ns.docbook.functions.private.syntax-highlight,0">fp:syntax-highlight()</a></div><div class="used-in"><span class="marker" title="Only used in one other module">☝</span>Used in: <a href="#S-16614">highlight.xsl</a></div></div></div><div id="S-29386-docbook.org.ns.docbook.errors.INVALID-NAME-STYLE" class="instruction variable elsewhere"><div class="title"><span class="link"></span>Variable <code>$dbe:INVALID-NAME-STYLE</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-33240-docbook.org.ns.docbook.templates.person-name">t:person-name</a></div><div class="used-in"><span class="marker" title="Only used in one other module">☝</span>Used in: <a href="#S-33240">modules/info.xsl</a></div></div></div><div id="S-29386-docbook.org.ns.docbook.errors.DYNAMIC-PROFILE-SYNTAX-ERROR" class="instruction variable elsewhere"><div class="title"><span class="link"></span>Variable <code>$dbe:DYNAMIC-PROFILE-SYNTAX-ERROR</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-24095-docbook.org.ns.docbook.functions.private.dynamic-include,2">fp:dynamic-include()</a></div><div class="used-in"><span class="marker" title="Only used in one other module">☝</span>Used in: <a href="#S-24095">modules/profile.xsl</a></div></div></div><div id="S-29386-docbook.org.ns.docbook.errors.DYNAMIC-PROFILE-EVAL-ERROR" class="instruction variable elsewhere"><div class="title"><span class="link"></span>Variable <code>$dbe:DYNAMIC-PROFILE-EVAL-ERROR</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-24095-docbook.org.ns.docbook.functions.private.check-profile,3">fp:check-profile()</a></div><div class="used-in"><span class="marker" title="Only used in one other module">☝</span>Used in: <a href="#S-24095">modules/profile.xsl</a></div></div></div><div id="S-29386-docbook.org.ns.docbook.errors.INVALID-DYNAMIC-PROFILE-ERROR" class="instruction variable elsewhere"><div class="title"><span class="link"></span>Variable <code>$dbe:INVALID-DYNAMIC-PROFILE-ERROR</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-24095-docbook.org.ns.docbook.functions.private.check-profile,3">fp:check-profile()</a></div><div class="used-in"><span class="marker" title="Only used in one other module">☝</span>Used in: <a href="#S-24095">modules/profile.xsl</a></div></div></div></div></div><div class="source-code"><div class="title closed">Source code</div><div class="body"><div><table><tr><td valign="top" align="right"><pre class="fake-prism"><span id="line-S-29386-1">1</span>
<span id="line-S-29386-2"><span class="lno">2</span></span>
<span id="line-S-29386-3"><span class="lno">3</span></span>
<span id="line-S-29386-4"><span class="lno">4</span></span>
<span id="line-S-29386-5">5</span>
<span id="line-S-29386-6"><span class="lno">6</span></span>
<span id="line-S-29386-7"><span class="lno">7</span></span>
<span id="line-S-29386-8"><span class="lno">8</span></span>
<span id="line-S-29386-9"><span class="lno">9</span></span>
<span id="line-S-29386-10">10</span>
<span id="line-S-29386-11"><span class="lno">11</span></span>
<span id="line-S-29386-12"><span class="lno">12</span></span>
<span id="line-S-29386-13"><span class="lno">13</span></span>
<span id="line-S-29386-14"><span class="lno">14</span></span>
<span id="line-S-29386-15">15</span>
<span id="line-S-29386-16"><span class="lno">16</span></span>
<span id="line-S-29386-17"><span class="lno">17</span></span>
<span id="line-S-29386-18"><span class="lno">18</span></span>
<span id="line-S-29386-19"><span class="lno">19</span></span>
<span id="line-S-29386-20">20</span>
<span id="line-S-29386-21"><span class="lno">21</span></span>
<span id="line-S-29386-22"><span class="lno">22</span></span>
<span id="line-S-29386-23"><span class="lno">23</span></span>
<span id="line-S-29386-24"><span class="lno">24</span></span>
<span id="line-S-29386-25">25</span>
<span id="line-S-29386-26"><span class="lno">26</span></span>
<span id="line-S-29386-27"><span class="lno">27</span></span>
<span id="line-S-29386-28"><span class="lno">28</span></span>
<span id="line-S-29386-29"><span class="lno">29</span></span>
<span id="line-S-29386-30">30</span>
<span id="line-S-29386-31"><span class="lno">31</span></span>
<span id="line-S-29386-32"><span class="lno">32</span></span>
<span id="line-S-29386-33"><span class="lno">33</span></span>
<span id="line-S-29386-34"><span class="lno">34</span></span>
<span id="line-S-29386-35">35</span>
<span id="line-S-29386-36"><span class="lno">36</span></span>
</pre></td><td valign="top"><pre><code class="language-xml">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                xmlns:db="http://docbook.org/ns/docbook"
                xmlns:dbe="http://docbook.org/ns/docbook/errors"
                xmlns:f="http://docbook.org/ns/docbook/functions"
                xmlns:m="http://docbook.org/ns/docbook/modes"
                xmlns:xs="http://www.w3.org/2001/XMLSchema"
                xmlns="http://www.w3.org/1999/xhtml"
                default-mode="m:docbook"
                exclude-result-prefixes="db dbe f m xs"
                version="3.0"&gt;

&lt;xsl:variable name="dbe:INVALID-INJECT" select="xs:QName('dbe:INVALID-INJECT')"/&gt;
&lt;xsl:variable name="dbe:INVALID-CALS" select="xs:QName('dbe:INVALID-CALS')"/&gt;
&lt;xsl:variable name="dbe:INVALID-AREAREFS" select="xs:QName('dbe:INVALID-AREAREFS')"/&gt;
&lt;xsl:variable name="dbe:INVALID-PRODUCTIONRECAP"
              select="xs:QName('dbe:INVALID-PRODUCTIONRECAP')"/&gt;
&lt;xsl:variable name="dbe:INVALID-CONSTRAINT"
              select="xs:QName('dbe:INVALID-CONSTRAINT')"/&gt;
&lt;xsl:variable name="dbe:INVALID-TEMPLATE"
              select="xs:QName('dbe:INVALID-TEMPLATE')"/&gt;
&lt;xsl:variable name="dbe:INTERNAL-RENUMBER-ERROR"
              select="xs:QName('dbe:INTERNAL-RENUMBER-ERROR')"/&gt;
&lt;xsl:variable name="dbe:INTERNAL-HIGHLIGHT-ERROR"
              select="xs:QName('dbe:INTERNAL-HIGHLIGHT-ERROR')"/&gt;
&lt;xsl:variable name="dbe:INVALID-NAME-STYLE"
              select="xs:QName('dbe:INVALID-NAME-STYLE')"/&gt;
&lt;xsl:variable name="dbe:DYNAMIC-PROFILE-SYNTAX-ERROR"
              select="xs:QName('dbe:DYNAMIC-PROFILE-SYNTAX-ERROR')"/&gt;
&lt;xsl:variable name="dbe:DYNAMIC-PROFILE-EVAL-ERROR"
              select="xs:QName('dbe:DYNAMIC-PROFILE-EVAL-ERROR')"/&gt;
&lt;xsl:variable name="dbe:INVALID-DYNAMIC-PROFILE-ERROR"
              select="xs:QName('dbe:INVALID-DYNAMIC-PROFILE-ERROR')"/&gt;

&lt;/xsl:stylesheet&gt;
</code></pre></td></tr></table></div></div></div></div><div class="stylesheet" id="S-58558"><h3>head.xsl</h3><p><span><span class="template all">12 templates</span></span></p><div class="instructions"><div class="title closed">Instructions</div><div class="body"><div id="S-58558-t-1" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ *  as element(h:head)</div><div class="props"><div class="uses">Uses: <a href="#S-23412-docbook.org.ns.docbook.variables.css-links">$v:css-links</a>, <a href="#S-23412-docbook.org.ns.docbook.variables.highlight-js-head-elements">$v:highlight-js-head-elements</a>, <a href="#S-23412-docbook.org.ns.docbook.variables.prism-js-head-elements">$v:prism-js-head-elements</a>, <a href="#S-23412-docbook.org.ns.docbook.variables.verbatim-syntax-highlight-languages">$v:verbatim-syntax-highlight-languages</a>, <a href="#S-26643-..oxy-markup-css">$oxy-markup-css</a>, <a href="#S-26643-..resource-base-uri">$resource-base-uri</a>, <a href="#S-26643-..verbatim-syntax-highlight-css">$verbatim-syntax-highlight-css</a>, <a href="#S-26643-..verbatim-syntax-highlighter">$verbatim-syntax-highlighter</a></div><div class="mode">Mode: <code>m:html-head</code></div><div class="matches">Matches: <code>*</code></div></div></div><div id="S-58558-t-2" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:keywordset</div><div class="props"><div class="mode">Mode: <code>m:html-head</code></div><div class="matches">Matches: <code>db:keywordset</code></div></div></div><div id="S-58558-t-3" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:subjectset</div><div class="props"><div class="mode">Mode: <code>m:html-head</code></div><div class="matches">Matches: <code>db:subjectset</code></div></div></div><div id="S-58558-t-4" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:meta</div><div class="props"><div class="mode">Mode: <code>m:html-head</code></div><div class="matches">Matches: <code>db:meta</code></div></div></div><div id="S-58558-t-5" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ h:*</div><div class="props"><div class="mode">Mode: <code>m:html-head</code></div><div class="matches">Matches: <code>h:*</code></div></div></div><div id="S-58558-t-6" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ attribute()|comment()|processi…</div><div class="props"><div class="mode">Mode: <code>m:html-head</code></div><div class="matches">Matches: <code>attribute()</code>, <code>comment()</code>, <code>processing-instruction()</code>, <code>text()</code></div></div></div><div id="S-58558-t-7" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ *</div><div class="props"><div class="uses">Uses: <a href="#S-7720-docbook.org.ns.docbook.variables.VERSION">$v:VERSION</a>, <a href="#S-7720-docbook.org.ns.docbook.variables.VERSION-ID">$v:VERSION-ID</a></div><div class="mode">Mode: <code>mp:html-head</code></div><div class="matches">Matches: <code>*</code></div></div></div><div id="S-58558-t-8" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ *</div><div class="props"><div class="uses">Uses: <a href="#S-23412-docbook.org.ns.docbook.variables.highlight-js-head-elements">$v:highlight-js-head-elements</a>, <a href="#S-23412-docbook.org.ns.docbook.variables.prism-js-head-elements">$v:prism-js-head-elements</a>, <a href="#S-26643-..persistent-toc">$persistent-toc</a>, <a href="#S-26643-..persistent-toc-css">$persistent-toc-css</a>, <a href="#S-26643-..resource-base-uri">$resource-base-uri</a>, <a href="#S-26643-..verbatim-syntax-highlighter">$verbatim-syntax-highlighter</a></div><div class="calls">Calls: <a href="#S-28936-docbook.org.ns.docbook.functions.is-true,1">f:is-true()</a></div><div class="mode">Mode: <code>mp:html-head-script</code></div><div class="matches">Matches: <code>*</code></div></div></div><div id="S-58558-t-9" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ *</div><div class="props"><div class="mode">Mode: <code>m:html-head-script</code></div><div class="matches">Matches: <code>*</code></div></div></div><div id="S-58558-t-10" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ *</div><div class="props"><div class="mode">Mode: <code>m:html-head-links</code></div><div class="matches">Matches: <code>*</code></div></div></div><div id="S-58558-t-11" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ *</div><div class="props"><div class="mode">Mode: <code>m:html-head-last</code></div><div class="matches">Matches: <code>*</code></div></div></div><div id="S-58558-t-12" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ *</div><div class="props"><div class="mode">Mode: <code>m:html-body-script</code></div><div class="matches">Matches: <code>*</code></div></div></div></div></div><div class="source-code"><div class="title closed">Source code</div><div class="body"><div><table><tr><td valign="top" align="right"><pre class="fake-prism"><span id="line-S-58558-1">1</span>
<span id="line-S-58558-2"><span class="lno">2</span></span>
<span id="line-S-58558-3"><span class="lno">3</span></span>
<span id="line-S-58558-4"><span class="lno">4</span></span>
<span id="line-S-58558-5">5</span>
<span id="line-S-58558-6"><span class="lno">6</span></span>
<span id="line-S-58558-7"><span class="lno">7</span></span>
<span id="line-S-58558-8"><span class="lno">8</span></span>
<span id="line-S-58558-9"><span class="lno">9</span></span>
<span id="line-S-58558-10">10</span>
<span id="line-S-58558-11"><span class="lno">11</span></span>
<span id="line-S-58558-12"><span class="lno">12</span></span>
<span id="line-S-58558-13"><span class="lno">13</span></span>
<span id="line-S-58558-14"><span class="lno">14</span></span>
<span id="line-S-58558-15">15</span>
<span id="line-S-58558-16"><span class="lno">16</span></span>
<span id="line-S-58558-17"><span class="lno">17</span></span>
<span id="line-S-58558-18"><span class="lno">18</span></span>
<span id="line-S-58558-19"><span class="lno">19</span></span>
<span id="line-S-58558-20">20</span>
<span id="line-S-58558-21"><span class="lno">21</span></span>
<span id="line-S-58558-22"><span class="lno">22</span></span>
<span id="line-S-58558-23"><span class="lno">23</span></span>
<span id="line-S-58558-24"><span class="lno">24</span></span>
<span id="line-S-58558-25">25</span>
<span id="line-S-58558-26"><span class="lno">26</span></span>
<span id="line-S-58558-27"><span class="lno">27</span></span>
<span id="line-S-58558-28"><span class="lno">28</span></span>
<span id="line-S-58558-29"><span class="lno">29</span></span>
<span id="line-S-58558-30">30</span>
<span id="line-S-58558-31"><span class="lno">31</span></span>
<span id="line-S-58558-32"><span class="lno">32</span></span>
<span id="line-S-58558-33"><span class="lno">33</span></span>
<span id="line-S-58558-34"><span class="lno">34</span></span>
<span id="line-S-58558-35">35</span>
<span id="line-S-58558-36"><span class="lno">36</span></span>
<span id="line-S-58558-37"><span class="lno">37</span></span>
<span id="line-S-58558-38"><span class="lno">38</span></span>
<span id="line-S-58558-39"><span class="lno">39</span></span>
<span id="line-S-58558-40">40</span>
<span id="line-S-58558-41"><span class="lno">41</span></span>
<span id="line-S-58558-42"><span class="lno">42</span></span>
<span id="line-S-58558-43"><span class="lno">43</span></span>
<span id="line-S-58558-44"><span class="lno">44</span></span>
<span id="line-S-58558-45">45</span>
<span id="line-S-58558-46"><span class="lno">46</span></span>
<span id="line-S-58558-47"><span class="lno">47</span></span>
<span id="line-S-58558-48"><span class="lno">48</span></span>
<span id="line-S-58558-49"><span class="lno">49</span></span>
<span id="line-S-58558-50">50</span>
<span id="line-S-58558-51"><span class="lno">51</span></span>
<span id="line-S-58558-52"><span class="lno">52</span></span>
<span id="line-S-58558-53"><span class="lno">53</span></span>
<span id="line-S-58558-54"><span class="lno">54</span></span>
<span id="line-S-58558-55">55</span>
<span id="line-S-58558-56"><span class="lno">56</span></span>
<span id="line-S-58558-57"><span class="lno">57</span></span>
<span id="line-S-58558-58"><span class="lno">58</span></span>
<span id="line-S-58558-59"><span class="lno">59</span></span>
<span id="line-S-58558-60">60</span>
<span id="line-S-58558-61"><span class="lno">61</span></span>
<span id="line-S-58558-62"><span class="lno">62</span></span>
<span id="line-S-58558-63"><span class="lno">63</span></span>
<span id="line-S-58558-64"><span class="lno">64</span></span>
<span id="line-S-58558-65">65</span>
<span id="line-S-58558-66"><span class="lno">66</span></span>
<span id="line-S-58558-67"><span class="lno">67</span></span>
<span id="line-S-58558-68"><span class="lno">68</span></span>
<span id="line-S-58558-69"><span class="lno">69</span></span>
<span id="line-S-58558-70">70</span>
<span id="line-S-58558-71"><span class="lno">71</span></span>
<span id="line-S-58558-72"><span class="lno">72</span></span>
<span id="line-S-58558-73"><span class="lno">73</span></span>
<span id="line-S-58558-74"><span class="lno">74</span></span>
<span id="line-S-58558-75">75</span>
<span id="line-S-58558-76"><span class="lno">76</span></span>
<span id="line-S-58558-77"><span class="lno">77</span></span>
<span id="line-S-58558-78"><span class="lno">78</span></span>
<span id="line-S-58558-79"><span class="lno">79</span></span>
<span id="line-S-58558-80">80</span>
<span id="line-S-58558-81"><span class="lno">81</span></span>
<span id="line-S-58558-82"><span class="lno">82</span></span>
<span id="line-S-58558-83"><span class="lno">83</span></span>
<span id="line-S-58558-84"><span class="lno">84</span></span>
<span id="line-S-58558-85">85</span>
<span id="line-S-58558-86"><span class="lno">86</span></span>
<span id="line-S-58558-87"><span class="lno">87</span></span>
<span id="line-S-58558-88"><span class="lno">88</span></span>
<span id="line-S-58558-89"><span class="lno">89</span></span>
<span id="line-S-58558-90">90</span>
<span id="line-S-58558-91"><span class="lno">91</span></span>
<span id="line-S-58558-92"><span class="lno">92</span></span>
<span id="line-S-58558-93"><span class="lno">93</span></span>
<span id="line-S-58558-94"><span class="lno">94</span></span>
<span id="line-S-58558-95">95</span>
<span id="line-S-58558-96"><span class="lno">96</span></span>
<span id="line-S-58558-97"><span class="lno">97</span></span>
<span id="line-S-58558-98"><span class="lno">98</span></span>
<span id="line-S-58558-99"><span class="lno">99</span></span>
<span id="line-S-58558-100">100</span>
<span id="line-S-58558-101"><span class="lno">101</span></span>
<span id="line-S-58558-102"><span class="lno">102</span></span>
<span id="line-S-58558-103"><span class="lno">103</span></span>
<span id="line-S-58558-104"><span class="lno">104</span></span>
<span id="line-S-58558-105">105</span>
<span id="line-S-58558-106"><span class="lno">106</span></span>
<span id="line-S-58558-107"><span class="lno">107</span></span>
<span id="line-S-58558-108"><span class="lno">108</span></span>
<span id="line-S-58558-109"><span class="lno">109</span></span>
<span id="line-S-58558-110">110</span>
<span id="line-S-58558-111"><span class="lno">111</span></span>
<span id="line-S-58558-112"><span class="lno">112</span></span>
<span id="line-S-58558-113"><span class="lno">113</span></span>
<span id="line-S-58558-114"><span class="lno">114</span></span>
<span id="line-S-58558-115">115</span>
<span id="line-S-58558-116"><span class="lno">116</span></span>
<span id="line-S-58558-117"><span class="lno">117</span></span>
<span id="line-S-58558-118"><span class="lno">118</span></span>
<span id="line-S-58558-119"><span class="lno">119</span></span>
<span id="line-S-58558-120">120</span>
<span id="line-S-58558-121"><span class="lno">121</span></span>
<span id="line-S-58558-122"><span class="lno">122</span></span>
<span id="line-S-58558-123"><span class="lno">123</span></span>
<span id="line-S-58558-124"><span class="lno">124</span></span>
<span id="line-S-58558-125">125</span>
<span id="line-S-58558-126"><span class="lno">126</span></span>
<span id="line-S-58558-127"><span class="lno">127</span></span>
<span id="line-S-58558-128"><span class="lno">128</span></span>
<span id="line-S-58558-129"><span class="lno">129</span></span>
<span id="line-S-58558-130">130</span>
<span id="line-S-58558-131"><span class="lno">131</span></span>
<span id="line-S-58558-132"><span class="lno">132</span></span>
<span id="line-S-58558-133"><span class="lno">133</span></span>
<span id="line-S-58558-134"><span class="lno">134</span></span>
<span id="line-S-58558-135">135</span>
<span id="line-S-58558-136"><span class="lno">136</span></span>
<span id="line-S-58558-137"><span class="lno">137</span></span>
<span id="line-S-58558-138"><span class="lno">138</span></span>
<span id="line-S-58558-139"><span class="lno">139</span></span>
<span id="line-S-58558-140">140</span>
<span id="line-S-58558-141"><span class="lno">141</span></span>
<span id="line-S-58558-142"><span class="lno">142</span></span>
<span id="line-S-58558-143"><span class="lno">143</span></span>
<span id="line-S-58558-144"><span class="lno">144</span></span>
<span id="line-S-58558-145">145</span>
<span id="line-S-58558-146"><span class="lno">146</span></span>
<span id="line-S-58558-147"><span class="lno">147</span></span>
<span id="line-S-58558-148"><span class="lno">148</span></span>
<span id="line-S-58558-149"><span class="lno">149</span></span>
<span id="line-S-58558-150">150</span>
<span id="line-S-58558-151"><span class="lno">151</span></span>
<span id="line-S-58558-152"><span class="lno">152</span></span>
<span id="line-S-58558-153"><span class="lno">153</span></span>
<span id="line-S-58558-154"><span class="lno">154</span></span>
<span id="line-S-58558-155">155</span>
<span id="line-S-58558-156"><span class="lno">156</span></span>
<span id="line-S-58558-157"><span class="lno">157</span></span>
<span id="line-S-58558-158"><span class="lno">158</span></span>
<span id="line-S-58558-159"><span class="lno">159</span></span>
<span id="line-S-58558-160">160</span>
<span id="line-S-58558-161"><span class="lno">161</span></span>
<span id="line-S-58558-162"><span class="lno">162</span></span>
<span id="line-S-58558-163"><span class="lno">163</span></span>
<span id="line-S-58558-164"><span class="lno">164</span></span>
<span id="line-S-58558-165">165</span>
<span id="line-S-58558-166"><span class="lno">166</span></span>
<span id="line-S-58558-167"><span class="lno">167</span></span>
<span id="line-S-58558-168"><span class="lno">168</span></span>
<span id="line-S-58558-169"><span class="lno">169</span></span>
<span id="line-S-58558-170">170</span>
<span id="line-S-58558-171"><span class="lno">171</span></span>
<span id="line-S-58558-172"><span class="lno">172</span></span>
<span id="line-S-58558-173"><span class="lno">173</span></span>
<span id="line-S-58558-174"><span class="lno">174</span></span>
<span id="line-S-58558-175">175</span>
<span id="line-S-58558-176"><span class="lno">176</span></span>
</pre></td><td valign="top"><pre><code class="language-xml">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                xmlns:db="http://docbook.org/ns/docbook"
                xmlns:f="http://docbook.org/ns/docbook/functions"
                xmlns:h="http://www.w3.org/1999/xhtml"
                xmlns:m="http://docbook.org/ns/docbook/modes"
                xmlns:mp="http://docbook.org/ns/docbook/modes/private"
                xmlns:t="http://docbook.org/ns/docbook/templates"
                xmlns:tp="http://docbook.org/ns/docbook/templates/private"
                xmlns:v="http://docbook.org/ns/docbook/variables"
                xmlns:xs="http://www.w3.org/2001/XMLSchema"
                xmlns="http://www.w3.org/1999/xhtml"
                default-mode="m:docbook"
                exclude-result-prefixes="db f h m mp t tp v xs"
                version="3.0"&gt;

&lt;xsl:template match="*" mode="m:html-head" as="element(h:head)"&gt;
  &lt;head&gt;
    &lt;meta http-equiv="Content-Type" content="text/html; charset=utf-8" /&gt;
    &lt;title&gt;
      &lt;xsl:variable name="title"&gt;
        &lt;xsl:apply-templates select="/*" mode="m:headline-title"/&gt;
      &lt;/xsl:variable&gt;
      &lt;xsl:value-of select="$title"/&gt;
    &lt;/title&gt;

    &lt;xsl:apply-templates select="db:keywordset|db:subjectset|db:meta"
                         mode="m:html-head"/&gt;

    &lt;xsl:choose&gt;
      &lt;xsl:when test="$verbatim-syntax-highlighter = 'highlight.js'"&gt;
        &lt;xsl:sequence select="$v:highlight-js-head-elements/self::h:link"/&gt;
      &lt;/xsl:when&gt;
      &lt;xsl:when test="$verbatim-syntax-highlighter = ('prism', 'prism.js')"&gt;
        &lt;xsl:sequence select="$v:prism-js-head-elements/self::h:link"/&gt;
      &lt;/xsl:when&gt;
      &lt;xsl:otherwise&gt;
        &lt;!-- nop --&gt;
      &lt;/xsl:otherwise&gt;
    &lt;/xsl:choose&gt;

    &lt;xsl:if test="exists($v:verbatim-syntax-highlight-languages)
                  and normalize-space($verbatim-syntax-highlight-css) != ''"&gt;
      &lt;link rel="stylesheet" href="{$resource-base-uri}{$verbatim-syntax-highlight-css}"/&gt;
    &lt;/xsl:if&gt;

    &lt;xsl:apply-templates select="." mode="mp:html-head"/&gt;

    &lt;xsl:for-each select="$v:css-links"&gt;
      &lt;link rel="stylesheet" href="{$resource-base-uri}{.}"/&gt;
    &lt;/xsl:for-each&gt;

    &lt;xsl:if test="exists($oxy-markup-css)
                  and //processing-instruction()[starts-with(name(), 'oxy_')]"&gt;
      &lt;link rel="stylesheet" href="{$resource-base-uri}{$oxy-markup-css}"/&gt;
    &lt;/xsl:if&gt;

    &lt;xsl:apply-templates select="." mode="mp:html-head-script"/&gt;
    &lt;xsl:apply-templates select="." mode="m:html-head-script"/&gt;
    &lt;xsl:apply-templates select="." mode="m:html-head-links"/&gt;
    &lt;xsl:apply-templates select="h:*" mode="m:html-head"/&gt;
    &lt;xsl:apply-templates select="." mode="m:html-head-last"/&gt;
  &lt;/head&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:keywordset" mode="m:html-head"&gt;
  &lt;xsl:variable name="keywords" as="xs:string*"&gt;
    &lt;xsl:for-each select="db:keyword"&gt;
      &lt;xsl:sort select="normalize-space(.)"/&gt;
      &lt;xsl:sequence select="normalize-space(.)"/&gt;
    &lt;/xsl:for-each&gt;
  &lt;/xsl:variable&gt;

  &lt;meta name="keywords" content="{string-join($keywords,',')}"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:subjectset" mode="m:html-head"&gt;
  &lt;xsl:variable name="keywords" as="xs:string*"&gt;
    &lt;xsl:for-each select="db:subject/db:subjectterm"&gt;
      &lt;xsl:sort select="normalize-space(.)"/&gt;
      &lt;xsl:sequence select="normalize-space(.)"/&gt;
    &lt;/xsl:for-each&gt;
  &lt;/xsl:variable&gt;

  &lt;meta name="keywords" content="{string-join($keywords,',')}"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:meta" mode="m:html-head"&gt;
  &lt;xsl:if test="@name and @content"&gt;
    &lt;meta name="{@name}" content="{@content}"/&gt;
  &lt;/xsl:if&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="h:*" mode="m:html-head"&gt;
  &lt;xsl:element name="{local-name(.)}" namespace="http://www.w3.org/1999/xhtml"&gt;
    &lt;xsl:apply-templates select="@*,node()" mode="m:html-head"/&gt;
  &lt;/xsl:element&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="attribute()|text()|comment()|processing-instruction()"
              mode="m:html-head"&gt;
  &lt;xsl:copy/&gt;
&lt;/xsl:template&gt;

&lt;!-- ============================================================ --&gt;

&lt;xsl:template match="*" mode="mp:html-head"&gt;
  &lt;xsl:variable name="Z" select="xs:dayTimeDuration('PT0H')"/&gt;

 &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"/&gt;
 &lt;link rel="schema.dc" href="https://purl.org/dc/elements/1.1/"/&gt;
 &lt;meta name="dc.modified"
       content="{format-dateTime(adjust-dateTime-to-timezone(current-dateTime(), $Z),
                                 '[Y0001]-[M01]-[D01]T[H01]:[m01]:[s01]Z')}"/&gt;
 &lt;xsl:choose&gt;
   &lt;xsl:when test="empty(/*/db:info/db:pubdate)"/&gt;
   &lt;xsl:when test="/*/db:info/db:pubdate/string() castable as xs:dateTime"&gt;
     &lt;xsl:variable name="date" select="xs:dateTime(/*/db:info/db:pubdate/string())"/&gt;
     &lt;meta name="dc.created"
           content="{format-dateTime(adjust-dateTime-to-timezone($date, $Z),
                                     '[Y0001]-[M01]-[D01]T[H01]:[m01]:[s01]Z')}"/&gt;
   &lt;/xsl:when&gt;
   &lt;xsl:when test="/*/db:info/db:pubdate/string() castable as xs:date"&gt;
     &lt;xsl:variable name="date" select="xs:date(/*/db:info/db:pubdate/string())"/&gt;
     &lt;meta name="dc.created"
           content="{format-date($date, '[Y0001]-[M01]-[D01]')}"/&gt;
   &lt;/xsl:when&gt;
   &lt;xsl:otherwise&gt;
     &lt;meta name="dc.created" content="{string(/*/db:info/db:pubdate)}"/&gt;
   &lt;/xsl:otherwise&gt;
 &lt;/xsl:choose&gt;
 &lt;meta name="generator"
       content="{'DocBook xslTNG version ' || $v:VERSION
                 || ' / ' || $v:VERSION-ID
                 || ' / ' || system-property('xsl:product-name')
                 || ' ' || system-property('xsl:product-version')}"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="*" mode="mp:html-head-script"&gt;
  &lt;xsl:if test="f:is-true($persistent-toc)"&gt;
    &lt;link rel="stylesheet"
          href="{$resource-base-uri}{$persistent-toc-css}"/&gt;
  &lt;/xsl:if&gt;
  &lt;xsl:choose&gt;
    &lt;xsl:when test="$verbatim-syntax-highlighter = ('', 'none')"/&gt;
    &lt;xsl:when test="$verbatim-syntax-highlighter = 'pygments'"/&gt;
    &lt;xsl:when test="$verbatim-syntax-highlighter = 'highlight.js'"&gt;
      &lt;xsl:sequence select="$v:highlight-js-head-elements/self::*
                            except $v:highlight-js-head-elements/self::h:link"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="$verbatim-syntax-highlighter = ('prism', 'prism.js')"&gt;
      &lt;xsl:sequence select="$v:prism-js-head-elements/self::*
                            except $v:prism-js-head-elements/self::h:link"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:message select="'Unrecognized syntax highlighter:', $verbatim-syntax-highlighter"/&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="*" mode="m:html-head-script"&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="*" mode="m:html-head-links"&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="*" mode="m:html-head-last"&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="*" mode="m:html-body-script"&gt;
  &lt;xsl:param name="rootbaseuri" as="xs:anyURI" required="yes"/&gt;
  &lt;xsl:param name="chunkbaseuri" as="xs:anyURI" required="yes"/&gt;
&lt;/xsl:template&gt;

&lt;/xsl:stylesheet&gt;
</code></pre></td></tr></table></div></div></div></div><div class="stylesheet" id="S-25794"><h3>titles.xsl</h3><p><span><span class="template all">28 templates</span></span>, <span><span class="function all">2 functions</span></span>, <span><span class="variable all">2 variables</span></span></p><div class="instructions"><div class="title closed">Instructions</div><div class="body"><div id="S-25794-docbook.org.ns.docbook.variables.user-title-properties" class="instruction variable"><div class="title"><span class="link"></span>Variable <code>$v:user-title-properties</code> as <code>element()*</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-25794-docbook.org.ns.docbook.variables.title-properties">$v:title-properties</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-25794">modules/titles.xsl</a></div></div></div><div id="S-25794-docbook.org.ns.docbook.variables.title-properties" class="instruction variable"><div class="title"><span class="link"></span>Variable <code>$v:title-properties</code> as <code>element()+</code></div><div class="props"><div class="uses">Uses: <a href="#S-25794-docbook.org.ns.docbook.variables.user-title-properties">$v:user-title-properties</a>, <a href="#S-26643-..component-numbers-inherit">$component-numbers-inherit</a>, <a href="#S-26643-..division-numbers-inherit">$division-numbers-inherit</a>, <a href="#S-26643-..section-numbers">$section-numbers</a>, <a href="#S-26643-..section-numbers-inherit">$section-numbers-inherit</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-25794-docbook.org.ns.docbook.functions.private.title-properties,1">fp:title-properties()</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-25794">modules/titles.xsl</a></div></div></div><div id="S-25794-t-1" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ *</div><div class="props"><div class="calls">Calls: <a href="#S-25794-docbook.org.ns.docbook.functions.private.title-properties,1">fp:title-properties()</a></div><div class="mode">Mode: <code>m:headline</code></div><div class="matches">Matches: <code>*</code></div></div></div><div id="S-25794-t-2" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ *</div><div class="props"><div class="mode">Mode: <code>m:headline-prefix</code></div><div class="matches">Matches: <code>*</code></div></div></div><div id="S-25794-t-3" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ *</div><div class="props"><div class="calls">Calls: <a href="#S-22317-docbook.org.ns.docbook.functions.gentext,2">f:gentext()</a></div><div class="mode">Mode: <code>m:headline-label</code></div><div class="matches">Matches: <code>*</code></div></div></div><div id="S-25794-t-4" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:equation|db:example|db:figu…</div><div class="props"><div class="mode">Mode: <code>m:headline-label</code></div><div class="priority">Priority: <code>20</code></div><div class="matches">Matches: <code>db:equation</code>, <code>db:example</code>, <code>db:figure</code>, <code>db:formalgroup</code>, <code>db:procedure</code>, <code>db:table</code></div></div></div><div id="S-25794-t-5" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:formalgroup</div><div class="props"><div class="calls">Calls: <a href="#S-22317-docbook.org.ns.docbook.functions.gentext,3">f:gentext()</a></div><div class="mode">Mode: <code>m:headline-label</code></div><div class="priority">Priority: <code>10</code></div><div class="matches">Matches: <code>db:formalgroup</code></div></div></div><div id="S-25794-t-6" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:equation|db:example|db:figu…</div><div class="props"><div class="calls">Calls: <a href="#S-22317-docbook.org.ns.docbook.functions.gentext,3">f:gentext()</a></div><div class="mode">Mode: <code>m:headline-label</code></div><div class="priority">Priority: <code>10</code></div><div class="matches">Matches: <code>db:equation</code>, <code>db:example</code>, <code>db:figure</code>, <code>db:procedure</code>, <code>db:table</code></div></div></div><div id="S-25794-t-7" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:qandaentry</div><div class="props"><div class="mode">Mode: <code>m:headline-label</code></div><div class="matches">Matches: <code>db:qandaentry</code></div></div></div><div id="S-25794-t-8" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:question</div><div class="props"><div class="uses">Uses: <a href="#S-26643-..qandaset-default-label">$qandaset-default-label</a></div><div class="calls">Calls: <a href="#S-28936-docbook.org.ns.docbook.functions.post-label-punctuation,1">f:post-label-punctuation()</a></div><div class="mode">Mode: <code>m:headline-label</code></div><div class="matches">Matches: <code>db:question</code></div></div></div><div id="S-25794-t-9" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:answer</div><div class="props"><div class="uses">Uses: <a href="#S-26643-..qandaset-default-label">$qandaset-default-label</a></div><div class="mode">Mode: <code>m:headline-label</code></div><div class="matches">Matches: <code>db:answer</code></div></div></div><div id="S-25794-t-10" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ *</div><div class="props"><div class="calls">Calls: <a href="#S-28936-docbook.org.ns.docbook.functions.label-separator,1">f:label-separator()</a></div><div class="mode">Mode: <code>m:headline-label-separator</code></div><div class="matches">Matches: <code>*</code></div></div></div><div id="S-25794-t-11" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ *</div><div class="props"><div class="calls">Calls: <a href="#S-25794-docbook.org.ns.docbook.functions.private.title-properties,1">fp:title-properties()</a>, <a href="#S-28936-docbook.org.ns.docbook.functions.intra-number-separator,1">f:intra-number-separator()</a></div><div class="mode">Mode: <code>m:headline-number</code></div><div class="matches">Matches: <code>*</code></div></div></div><div id="S-25794-t-12" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:section</div><div class="props"><div class="calls">Calls: <a href="#S-25794-docbook.org.ns.docbook.functions.private.title-properties,1">fp:title-properties()</a>, <a href="#S-28936-docbook.org.ns.docbook.functions.intra-number-separator,1">f:intra-number-separator()</a></div><div class="mode">Mode: <code>m:headline-number</code></div><div class="matches">Matches: <code>db:section</code></div></div></div><div id="S-25794-t-13" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:appendix</div><div class="props"><div class="uses">Uses: <a href="#S-26643-..number-single-appendix">$number-single-appendix</a></div><div class="calls">Calls: <a href="#S-25794-docbook.org.ns.docbook.functions.private.title-properties,1">fp:title-properties()</a>, <a href="#S-28936-docbook.org.ns.docbook.functions.is-true,1">f:is-true()</a></div><div class="mode">Mode: <code>m:headline-number</code></div><div class="matches">Matches: <code>db:appendix</code></div></div></div><div id="S-25794-t-14" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:step</div><div class="props"><div class="calls">Calls: <a href="#S-25794-docbook.org.ns.docbook.functions.private.title-properties,1">fp:title-properties()</a>, <a href="#S-28936-docbook.org.ns.docbook.functions.intra-number-separator,1">f:intra-number-separator()</a>, <a href="#S-28936-docbook.org.ns.docbook.functions.step-numeration,1">f:step-numeration()</a></div><div class="mode">Mode: <code>m:headline-number</code></div><div class="matches">Matches: <code>db:step</code></div></div></div><div id="S-25794-t-15" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:listitem</div><div class="props"><div class="calls">Calls: <a href="#S-25794-docbook.org.ns.docbook.functions.private.title-properties,1">fp:title-properties()</a>, <a href="#S-28936-docbook.org.ns.docbook.functions.intra-number-separator,1">f:intra-number-separator()</a>, <a href="#S-28936-docbook.org.ns.docbook.functions.orderedlist-item-numeration,1">f:orderedlist-item-numeration()</a></div><div class="mode">Mode: <code>m:headline-number</code></div><div class="matches">Matches: <code>db:listitem</code></div></div></div><div id="S-25794-t-16" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ *</div><div class="props"><div class="mode">Mode: <code>m:headline-number-separator</code></div><div class="matches">Matches: <code>*</code></div></div></div><div id="S-25794-t-17" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ *</div><div class="props"><div class="mode">Mode: <code>m:headline-title</code></div><div class="matches">Matches: <code>*</code></div></div></div><div id="S-25794-t-18" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:refentry</div><div class="props"><div class="mode">Mode: <code>m:headline-title</code></div><div class="matches">Matches: <code>db:refentry</code></div></div></div><div id="S-25794-t-19" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:refmeta</div><div class="props"><div class="mode">Mode: <code>m:headline-title</code></div><div class="matches">Matches: <code>db:refmeta</code></div></div></div><div id="S-25794-t-20" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:refnamediv</div><div class="props"><div class="mode">Mode: <code>m:headline-title</code></div><div class="matches">Matches: <code>db:refnamediv</code></div></div></div><div id="S-25794-t-21" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:refname</div><div class="props"><div class="mode">Mode: <code>m:headline-title</code></div><div class="matches">Matches: <code>db:refname</code></div></div></div><div id="S-25794-t-22" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:question</div><div class="props"><div class="mode">Mode: <code>m:headline-title</code></div><div class="matches">Matches: <code>db:question</code></div></div></div><div id="S-25794-t-23" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ *</div><div class="props"><div class="mode">Mode: <code>m:headline-suffix</code></div><div class="matches">Matches: <code>*</code></div></div></div><div id="S-25794-docbook.org.ns.docbook.functions.private.document-title-properties,1" class="instruction function"><div class="title"><span class="link"></span>Function fp:document-title-properties($node as element()) as element()*</div><div class="props"><div class="calls">Calls: <a href="#S-25794-docbook.org.ns.docbook.functions.private.title-properties,1">fp:title-properties()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-25794-docbook.org.ns.docbook.functions.private.title-properties,1">fp:title-properties()</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-25794">modules/titles.xsl</a></div></div></div><div id="S-25794-docbook.org.ns.docbook.functions.private.title-properties,1" class="instruction function"><div class="title"><span class="link"></span>Function fp:title-properties($node as element()) as map(*)</div><div class="props"><div class="uses">Uses: <a href="#S-25794-docbook.org.ns.docbook.variables.title-properties">$v:title-properties</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-25794-t-1">template</a>, <a href="#S-25794-t-11">template</a>, <a href="#S-25794-t-12">template</a>, <a href="#S-25794-t-13">template</a>, <a href="#S-25794-t-14">template</a>, <a href="#S-25794-t-15">template</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-25794">modules/titles.xsl</a></div></div></div><div id="S-25794-t-24" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:title|db:titleabbrev</div><div class="props"><div class="mode">Mode: <code>m:title</code></div><div class="matches">Matches: <code>db:title</code>, <code>db:titleabbrev</code></div></div></div><div id="S-25794-t-25" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ h:db-annotation|h:db-footnote</div><div class="props"><div class="mode">Mode: <code>mp:strip-links</code></div><div class="matches">Matches: <code>h:db-annotation</code>, <code>h:db-footnote</code></div></div></div><div id="S-25794-t-26" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ h:a</div><div class="props"><div class="mode">Mode: <code>mp:strip-links</code></div><div class="matches">Matches: <code>h:a</code></div></div></div><div id="S-25794-t-27" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ element()</div><div class="props"><div class="mode">Mode: <code>mp:strip-links</code></div><div class="matches">Matches: <code>element()</code></div></div></div><div id="S-25794-t-28" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ attribute()|comment()|processi…</div><div class="props"><div class="mode">Mode: <code>mp:strip-links</code></div><div class="matches">Matches: <code>attribute()</code>, <code>comment()</code>, <code>processing-instruction()</code>, <code>text()</code></div></div></div></div></div><div class="source-code"><div class="title closed">Source code</div><div class="body"><div><table><tr><td valign="top" align="right"><pre class="fake-prism"><span id="line-S-25794-1">1</span>
<span id="line-S-25794-2"><span class="lno">2</span></span>
<span id="line-S-25794-3"><span class="lno">3</span></span>
<span id="line-S-25794-4"><span class="lno">4</span></span>
<span id="line-S-25794-5">5</span>
<span id="line-S-25794-6"><span class="lno">6</span></span>
<span id="line-S-25794-7"><span class="lno">7</span></span>
<span id="line-S-25794-8"><span class="lno">8</span></span>
<span id="line-S-25794-9"><span class="lno">9</span></span>
<span id="line-S-25794-10">10</span>
<span id="line-S-25794-11"><span class="lno">11</span></span>
<span id="line-S-25794-12"><span class="lno">12</span></span>
<span id="line-S-25794-13"><span class="lno">13</span></span>
<span id="line-S-25794-14"><span class="lno">14</span></span>
<span id="line-S-25794-15">15</span>
<span id="line-S-25794-16"><span class="lno">16</span></span>
<span id="line-S-25794-17"><span class="lno">17</span></span>
<span id="line-S-25794-18"><span class="lno">18</span></span>
<span id="line-S-25794-19"><span class="lno">19</span></span>
<span id="line-S-25794-20">20</span>
<span id="line-S-25794-21"><span class="lno">21</span></span>
<span id="line-S-25794-22"><span class="lno">22</span></span>
<span id="line-S-25794-23"><span class="lno">23</span></span>
<span id="line-S-25794-24"><span class="lno">24</span></span>
<span id="line-S-25794-25">25</span>
<span id="line-S-25794-26"><span class="lno">26</span></span>
<span id="line-S-25794-27"><span class="lno">27</span></span>
<span id="line-S-25794-28"><span class="lno">28</span></span>
<span id="line-S-25794-29"><span class="lno">29</span></span>
<span id="line-S-25794-30">30</span>
<span id="line-S-25794-31"><span class="lno">31</span></span>
<span id="line-S-25794-32"><span class="lno">32</span></span>
<span id="line-S-25794-33"><span class="lno">33</span></span>
<span id="line-S-25794-34"><span class="lno">34</span></span>
<span id="line-S-25794-35">35</span>
<span id="line-S-25794-36"><span class="lno">36</span></span>
<span id="line-S-25794-37"><span class="lno">37</span></span>
<span id="line-S-25794-38"><span class="lno">38</span></span>
<span id="line-S-25794-39"><span class="lno">39</span></span>
<span id="line-S-25794-40">40</span>
<span id="line-S-25794-41"><span class="lno">41</span></span>
<span id="line-S-25794-42"><span class="lno">42</span></span>
<span id="line-S-25794-43"><span class="lno">43</span></span>
<span id="line-S-25794-44"><span class="lno">44</span></span>
<span id="line-S-25794-45">45</span>
<span id="line-S-25794-46"><span class="lno">46</span></span>
<span id="line-S-25794-47"><span class="lno">47</span></span>
<span id="line-S-25794-48"><span class="lno">48</span></span>
<span id="line-S-25794-49"><span class="lno">49</span></span>
<span id="line-S-25794-50">50</span>
<span id="line-S-25794-51"><span class="lno">51</span></span>
<span id="line-S-25794-52"><span class="lno">52</span></span>
<span id="line-S-25794-53"><span class="lno">53</span></span>
<span id="line-S-25794-54"><span class="lno">54</span></span>
<span id="line-S-25794-55">55</span>
<span id="line-S-25794-56"><span class="lno">56</span></span>
<span id="line-S-25794-57"><span class="lno">57</span></span>
<span id="line-S-25794-58"><span class="lno">58</span></span>
<span id="line-S-25794-59"><span class="lno">59</span></span>
<span id="line-S-25794-60">60</span>
<span id="line-S-25794-61"><span class="lno">61</span></span>
<span id="line-S-25794-62"><span class="lno">62</span></span>
<span id="line-S-25794-63"><span class="lno">63</span></span>
<span id="line-S-25794-64"><span class="lno">64</span></span>
<span id="line-S-25794-65">65</span>
<span id="line-S-25794-66"><span class="lno">66</span></span>
<span id="line-S-25794-67"><span class="lno">67</span></span>
<span id="line-S-25794-68"><span class="lno">68</span></span>
<span id="line-S-25794-69"><span class="lno">69</span></span>
<span id="line-S-25794-70">70</span>
<span id="line-S-25794-71"><span class="lno">71</span></span>
<span id="line-S-25794-72"><span class="lno">72</span></span>
<span id="line-S-25794-73"><span class="lno">73</span></span>
<span id="line-S-25794-74"><span class="lno">74</span></span>
<span id="line-S-25794-75">75</span>
<span id="line-S-25794-76"><span class="lno">76</span></span>
<span id="line-S-25794-77"><span class="lno">77</span></span>
<span id="line-S-25794-78"><span class="lno">78</span></span>
<span id="line-S-25794-79"><span class="lno">79</span></span>
<span id="line-S-25794-80">80</span>
<span id="line-S-25794-81"><span class="lno">81</span></span>
<span id="line-S-25794-82"><span class="lno">82</span></span>
<span id="line-S-25794-83"><span class="lno">83</span></span>
<span id="line-S-25794-84"><span class="lno">84</span></span>
<span id="line-S-25794-85">85</span>
<span id="line-S-25794-86"><span class="lno">86</span></span>
<span id="line-S-25794-87"><span class="lno">87</span></span>
<span id="line-S-25794-88"><span class="lno">88</span></span>
<span id="line-S-25794-89"><span class="lno">89</span></span>
<span id="line-S-25794-90">90</span>
<span id="line-S-25794-91"><span class="lno">91</span></span>
<span id="line-S-25794-92"><span class="lno">92</span></span>
<span id="line-S-25794-93"><span class="lno">93</span></span>
<span id="line-S-25794-94"><span class="lno">94</span></span>
<span id="line-S-25794-95">95</span>
<span id="line-S-25794-96"><span class="lno">96</span></span>
<span id="line-S-25794-97"><span class="lno">97</span></span>
<span id="line-S-25794-98"><span class="lno">98</span></span>
<span id="line-S-25794-99"><span class="lno">99</span></span>
<span id="line-S-25794-100">100</span>
<span id="line-S-25794-101"><span class="lno">101</span></span>
<span id="line-S-25794-102"><span class="lno">102</span></span>
<span id="line-S-25794-103"><span class="lno">103</span></span>
<span id="line-S-25794-104"><span class="lno">104</span></span>
<span id="line-S-25794-105">105</span>
<span id="line-S-25794-106"><span class="lno">106</span></span>
<span id="line-S-25794-107"><span class="lno">107</span></span>
<span id="line-S-25794-108"><span class="lno">108</span></span>
<span id="line-S-25794-109"><span class="lno">109</span></span>
<span id="line-S-25794-110">110</span>
<span id="line-S-25794-111"><span class="lno">111</span></span>
<span id="line-S-25794-112"><span class="lno">112</span></span>
<span id="line-S-25794-113"><span class="lno">113</span></span>
<span id="line-S-25794-114"><span class="lno">114</span></span>
<span id="line-S-25794-115">115</span>
<span id="line-S-25794-116"><span class="lno">116</span></span>
<span id="line-S-25794-117"><span class="lno">117</span></span>
<span id="line-S-25794-118"><span class="lno">118</span></span>
<span id="line-S-25794-119"><span class="lno">119</span></span>
<span id="line-S-25794-120">120</span>
<span id="line-S-25794-121"><span class="lno">121</span></span>
<span id="line-S-25794-122"><span class="lno">122</span></span>
<span id="line-S-25794-123"><span class="lno">123</span></span>
<span id="line-S-25794-124"><span class="lno">124</span></span>
<span id="line-S-25794-125">125</span>
<span id="line-S-25794-126"><span class="lno">126</span></span>
<span id="line-S-25794-127"><span class="lno">127</span></span>
<span id="line-S-25794-128"><span class="lno">128</span></span>
<span id="line-S-25794-129"><span class="lno">129</span></span>
<span id="line-S-25794-130">130</span>
<span id="line-S-25794-131"><span class="lno">131</span></span>
<span id="line-S-25794-132"><span class="lno">132</span></span>
<span id="line-S-25794-133"><span class="lno">133</span></span>
<span id="line-S-25794-134"><span class="lno">134</span></span>
<span id="line-S-25794-135">135</span>
<span id="line-S-25794-136"><span class="lno">136</span></span>
<span id="line-S-25794-137"><span class="lno">137</span></span>
<span id="line-S-25794-138"><span class="lno">138</span></span>
<span id="line-S-25794-139"><span class="lno">139</span></span>
<span id="line-S-25794-140">140</span>
<span id="line-S-25794-141"><span class="lno">141</span></span>
<span id="line-S-25794-142"><span class="lno">142</span></span>
<span id="line-S-25794-143"><span class="lno">143</span></span>
<span id="line-S-25794-144"><span class="lno">144</span></span>
<span id="line-S-25794-145">145</span>
<span id="line-S-25794-146"><span class="lno">146</span></span>
<span id="line-S-25794-147"><span class="lno">147</span></span>
<span id="line-S-25794-148"><span class="lno">148</span></span>
<span id="line-S-25794-149"><span class="lno">149</span></span>
<span id="line-S-25794-150">150</span>
<span id="line-S-25794-151"><span class="lno">151</span></span>
<span id="line-S-25794-152"><span class="lno">152</span></span>
<span id="line-S-25794-153"><span class="lno">153</span></span>
<span id="line-S-25794-154"><span class="lno">154</span></span>
<span id="line-S-25794-155">155</span>
<span id="line-S-25794-156"><span class="lno">156</span></span>
<span id="line-S-25794-157"><span class="lno">157</span></span>
<span id="line-S-25794-158"><span class="lno">158</span></span>
<span id="line-S-25794-159"><span class="lno">159</span></span>
<span id="line-S-25794-160">160</span>
<span id="line-S-25794-161"><span class="lno">161</span></span>
<span id="line-S-25794-162"><span class="lno">162</span></span>
<span id="line-S-25794-163"><span class="lno">163</span></span>
<span id="line-S-25794-164"><span class="lno">164</span></span>
<span id="line-S-25794-165">165</span>
<span id="line-S-25794-166"><span class="lno">166</span></span>
<span id="line-S-25794-167"><span class="lno">167</span></span>
<span id="line-S-25794-168"><span class="lno">168</span></span>
<span id="line-S-25794-169"><span class="lno">169</span></span>
<span id="line-S-25794-170">170</span>
<span id="line-S-25794-171"><span class="lno">171</span></span>
<span id="line-S-25794-172"><span class="lno">172</span></span>
<span id="line-S-25794-173"><span class="lno">173</span></span>
<span id="line-S-25794-174"><span class="lno">174</span></span>
<span id="line-S-25794-175">175</span>
<span id="line-S-25794-176"><span class="lno">176</span></span>
<span id="line-S-25794-177"><span class="lno">177</span></span>
<span id="line-S-25794-178"><span class="lno">178</span></span>
<span id="line-S-25794-179"><span class="lno">179</span></span>
<span id="line-S-25794-180">180</span>
<span id="line-S-25794-181"><span class="lno">181</span></span>
<span id="line-S-25794-182"><span class="lno">182</span></span>
<span id="line-S-25794-183"><span class="lno">183</span></span>
<span id="line-S-25794-184"><span class="lno">184</span></span>
<span id="line-S-25794-185">185</span>
<span id="line-S-25794-186"><span class="lno">186</span></span>
<span id="line-S-25794-187"><span class="lno">187</span></span>
<span id="line-S-25794-188"><span class="lno">188</span></span>
<span id="line-S-25794-189"><span class="lno">189</span></span>
<span id="line-S-25794-190">190</span>
<span id="line-S-25794-191"><span class="lno">191</span></span>
<span id="line-S-25794-192"><span class="lno">192</span></span>
<span id="line-S-25794-193"><span class="lno">193</span></span>
<span id="line-S-25794-194"><span class="lno">194</span></span>
<span id="line-S-25794-195">195</span>
<span id="line-S-25794-196"><span class="lno">196</span></span>
<span id="line-S-25794-197"><span class="lno">197</span></span>
<span id="line-S-25794-198"><span class="lno">198</span></span>
<span id="line-S-25794-199"><span class="lno">199</span></span>
<span id="line-S-25794-200">200</span>
<span id="line-S-25794-201"><span class="lno">201</span></span>
<span id="line-S-25794-202"><span class="lno">202</span></span>
<span id="line-S-25794-203"><span class="lno">203</span></span>
<span id="line-S-25794-204"><span class="lno">204</span></span>
<span id="line-S-25794-205">205</span>
<span id="line-S-25794-206"><span class="lno">206</span></span>
<span id="line-S-25794-207"><span class="lno">207</span></span>
<span id="line-S-25794-208"><span class="lno">208</span></span>
<span id="line-S-25794-209"><span class="lno">209</span></span>
<span id="line-S-25794-210">210</span>
<span id="line-S-25794-211"><span class="lno">211</span></span>
<span id="line-S-25794-212"><span class="lno">212</span></span>
<span id="line-S-25794-213"><span class="lno">213</span></span>
<span id="line-S-25794-214"><span class="lno">214</span></span>
<span id="line-S-25794-215">215</span>
<span id="line-S-25794-216"><span class="lno">216</span></span>
<span id="line-S-25794-217"><span class="lno">217</span></span>
<span id="line-S-25794-218"><span class="lno">218</span></span>
<span id="line-S-25794-219"><span class="lno">219</span></span>
<span id="line-S-25794-220">220</span>
<span id="line-S-25794-221"><span class="lno">221</span></span>
<span id="line-S-25794-222"><span class="lno">222</span></span>
<span id="line-S-25794-223"><span class="lno">223</span></span>
<span id="line-S-25794-224"><span class="lno">224</span></span>
<span id="line-S-25794-225">225</span>
<span id="line-S-25794-226"><span class="lno">226</span></span>
<span id="line-S-25794-227"><span class="lno">227</span></span>
<span id="line-S-25794-228"><span class="lno">228</span></span>
<span id="line-S-25794-229"><span class="lno">229</span></span>
<span id="line-S-25794-230">230</span>
<span id="line-S-25794-231"><span class="lno">231</span></span>
<span id="line-S-25794-232"><span class="lno">232</span></span>
<span id="line-S-25794-233"><span class="lno">233</span></span>
<span id="line-S-25794-234"><span class="lno">234</span></span>
<span id="line-S-25794-235">235</span>
<span id="line-S-25794-236"><span class="lno">236</span></span>
<span id="line-S-25794-237"><span class="lno">237</span></span>
<span id="line-S-25794-238"><span class="lno">238</span></span>
<span id="line-S-25794-239"><span class="lno">239</span></span>
<span id="line-S-25794-240">240</span>
<span id="line-S-25794-241"><span class="lno">241</span></span>
<span id="line-S-25794-242"><span class="lno">242</span></span>
<span id="line-S-25794-243"><span class="lno">243</span></span>
<span id="line-S-25794-244"><span class="lno">244</span></span>
<span id="line-S-25794-245">245</span>
<span id="line-S-25794-246"><span class="lno">246</span></span>
<span id="line-S-25794-247"><span class="lno">247</span></span>
<span id="line-S-25794-248"><span class="lno">248</span></span>
<span id="line-S-25794-249"><span class="lno">249</span></span>
<span id="line-S-25794-250">250</span>
<span id="line-S-25794-251"><span class="lno">251</span></span>
<span id="line-S-25794-252"><span class="lno">252</span></span>
<span id="line-S-25794-253"><span class="lno">253</span></span>
<span id="line-S-25794-254"><span class="lno">254</span></span>
<span id="line-S-25794-255">255</span>
<span id="line-S-25794-256"><span class="lno">256</span></span>
<span id="line-S-25794-257"><span class="lno">257</span></span>
<span id="line-S-25794-258"><span class="lno">258</span></span>
<span id="line-S-25794-259"><span class="lno">259</span></span>
<span id="line-S-25794-260">260</span>
<span id="line-S-25794-261"><span class="lno">261</span></span>
<span id="line-S-25794-262"><span class="lno">262</span></span>
<span id="line-S-25794-263"><span class="lno">263</span></span>
<span id="line-S-25794-264"><span class="lno">264</span></span>
<span id="line-S-25794-265">265</span>
<span id="line-S-25794-266"><span class="lno">266</span></span>
<span id="line-S-25794-267"><span class="lno">267</span></span>
<span id="line-S-25794-268"><span class="lno">268</span></span>
<span id="line-S-25794-269"><span class="lno">269</span></span>
<span id="line-S-25794-270">270</span>
<span id="line-S-25794-271"><span class="lno">271</span></span>
<span id="line-S-25794-272"><span class="lno">272</span></span>
<span id="line-S-25794-273"><span class="lno">273</span></span>
<span id="line-S-25794-274"><span class="lno">274</span></span>
<span id="line-S-25794-275">275</span>
<span id="line-S-25794-276"><span class="lno">276</span></span>
<span id="line-S-25794-277"><span class="lno">277</span></span>
<span id="line-S-25794-278"><span class="lno">278</span></span>
<span id="line-S-25794-279"><span class="lno">279</span></span>
<span id="line-S-25794-280">280</span>
<span id="line-S-25794-281"><span class="lno">281</span></span>
<span id="line-S-25794-282"><span class="lno">282</span></span>
<span id="line-S-25794-283"><span class="lno">283</span></span>
<span id="line-S-25794-284"><span class="lno">284</span></span>
<span id="line-S-25794-285">285</span>
<span id="line-S-25794-286"><span class="lno">286</span></span>
<span id="line-S-25794-287"><span class="lno">287</span></span>
<span id="line-S-25794-288"><span class="lno">288</span></span>
<span id="line-S-25794-289"><span class="lno">289</span></span>
<span id="line-S-25794-290">290</span>
<span id="line-S-25794-291"><span class="lno">291</span></span>
<span id="line-S-25794-292"><span class="lno">292</span></span>
<span id="line-S-25794-293"><span class="lno">293</span></span>
<span id="line-S-25794-294"><span class="lno">294</span></span>
<span id="line-S-25794-295">295</span>
<span id="line-S-25794-296"><span class="lno">296</span></span>
<span id="line-S-25794-297"><span class="lno">297</span></span>
<span id="line-S-25794-298"><span class="lno">298</span></span>
<span id="line-S-25794-299"><span class="lno">299</span></span>
<span id="line-S-25794-300">300</span>
<span id="line-S-25794-301"><span class="lno">301</span></span>
<span id="line-S-25794-302"><span class="lno">302</span></span>
<span id="line-S-25794-303"><span class="lno">303</span></span>
<span id="line-S-25794-304"><span class="lno">304</span></span>
<span id="line-S-25794-305">305</span>
<span id="line-S-25794-306"><span class="lno">306</span></span>
<span id="line-S-25794-307"><span class="lno">307</span></span>
<span id="line-S-25794-308"><span class="lno">308</span></span>
<span id="line-S-25794-309"><span class="lno">309</span></span>
<span id="line-S-25794-310">310</span>
<span id="line-S-25794-311"><span class="lno">311</span></span>
<span id="line-S-25794-312"><span class="lno">312</span></span>
<span id="line-S-25794-313"><span class="lno">313</span></span>
<span id="line-S-25794-314"><span class="lno">314</span></span>
<span id="line-S-25794-315">315</span>
<span id="line-S-25794-316"><span class="lno">316</span></span>
<span id="line-S-25794-317"><span class="lno">317</span></span>
<span id="line-S-25794-318"><span class="lno">318</span></span>
<span id="line-S-25794-319"><span class="lno">319</span></span>
<span id="line-S-25794-320">320</span>
<span id="line-S-25794-321"><span class="lno">321</span></span>
<span id="line-S-25794-322"><span class="lno">322</span></span>
<span id="line-S-25794-323"><span class="lno">323</span></span>
<span id="line-S-25794-324"><span class="lno">324</span></span>
<span id="line-S-25794-325">325</span>
<span id="line-S-25794-326"><span class="lno">326</span></span>
<span id="line-S-25794-327"><span class="lno">327</span></span>
<span id="line-S-25794-328"><span class="lno">328</span></span>
<span id="line-S-25794-329"><span class="lno">329</span></span>
<span id="line-S-25794-330">330</span>
<span id="line-S-25794-331"><span class="lno">331</span></span>
<span id="line-S-25794-332"><span class="lno">332</span></span>
<span id="line-S-25794-333"><span class="lno">333</span></span>
<span id="line-S-25794-334"><span class="lno">334</span></span>
<span id="line-S-25794-335">335</span>
<span id="line-S-25794-336"><span class="lno">336</span></span>
<span id="line-S-25794-337"><span class="lno">337</span></span>
<span id="line-S-25794-338"><span class="lno">338</span></span>
<span id="line-S-25794-339"><span class="lno">339</span></span>
<span id="line-S-25794-340">340</span>
<span id="line-S-25794-341"><span class="lno">341</span></span>
<span id="line-S-25794-342"><span class="lno">342</span></span>
<span id="line-S-25794-343"><span class="lno">343</span></span>
<span id="line-S-25794-344"><span class="lno">344</span></span>
<span id="line-S-25794-345">345</span>
<span id="line-S-25794-346"><span class="lno">346</span></span>
<span id="line-S-25794-347"><span class="lno">347</span></span>
<span id="line-S-25794-348"><span class="lno">348</span></span>
<span id="line-S-25794-349"><span class="lno">349</span></span>
<span id="line-S-25794-350">350</span>
<span id="line-S-25794-351"><span class="lno">351</span></span>
<span id="line-S-25794-352"><span class="lno">352</span></span>
<span id="line-S-25794-353"><span class="lno">353</span></span>
<span id="line-S-25794-354"><span class="lno">354</span></span>
<span id="line-S-25794-355">355</span>
<span id="line-S-25794-356"><span class="lno">356</span></span>
<span id="line-S-25794-357"><span class="lno">357</span></span>
<span id="line-S-25794-358"><span class="lno">358</span></span>
<span id="line-S-25794-359"><span class="lno">359</span></span>
<span id="line-S-25794-360">360</span>
<span id="line-S-25794-361"><span class="lno">361</span></span>
<span id="line-S-25794-362"><span class="lno">362</span></span>
<span id="line-S-25794-363"><span class="lno">363</span></span>
<span id="line-S-25794-364"><span class="lno">364</span></span>
<span id="line-S-25794-365">365</span>
<span id="line-S-25794-366"><span class="lno">366</span></span>
<span id="line-S-25794-367"><span class="lno">367</span></span>
<span id="line-S-25794-368"><span class="lno">368</span></span>
<span id="line-S-25794-369"><span class="lno">369</span></span>
<span id="line-S-25794-370">370</span>
<span id="line-S-25794-371"><span class="lno">371</span></span>
<span id="line-S-25794-372"><span class="lno">372</span></span>
<span id="line-S-25794-373"><span class="lno">373</span></span>
<span id="line-S-25794-374"><span class="lno">374</span></span>
<span id="line-S-25794-375">375</span>
<span id="line-S-25794-376"><span class="lno">376</span></span>
<span id="line-S-25794-377"><span class="lno">377</span></span>
<span id="line-S-25794-378"><span class="lno">378</span></span>
<span id="line-S-25794-379"><span class="lno">379</span></span>
<span id="line-S-25794-380">380</span>
<span id="line-S-25794-381"><span class="lno">381</span></span>
<span id="line-S-25794-382"><span class="lno">382</span></span>
<span id="line-S-25794-383"><span class="lno">383</span></span>
<span id="line-S-25794-384"><span class="lno">384</span></span>
<span id="line-S-25794-385">385</span>
<span id="line-S-25794-386"><span class="lno">386</span></span>
<span id="line-S-25794-387"><span class="lno">387</span></span>
<span id="line-S-25794-388"><span class="lno">388</span></span>
<span id="line-S-25794-389"><span class="lno">389</span></span>
<span id="line-S-25794-390">390</span>
<span id="line-S-25794-391"><span class="lno">391</span></span>
<span id="line-S-25794-392"><span class="lno">392</span></span>
<span id="line-S-25794-393"><span class="lno">393</span></span>
<span id="line-S-25794-394"><span class="lno">394</span></span>
<span id="line-S-25794-395">395</span>
<span id="line-S-25794-396"><span class="lno">396</span></span>
<span id="line-S-25794-397"><span class="lno">397</span></span>
<span id="line-S-25794-398"><span class="lno">398</span></span>
<span id="line-S-25794-399"><span class="lno">399</span></span>
<span id="line-S-25794-400">400</span>
<span id="line-S-25794-401"><span class="lno">401</span></span>
<span id="line-S-25794-402"><span class="lno">402</span></span>
<span id="line-S-25794-403"><span class="lno">403</span></span>
<span id="line-S-25794-404"><span class="lno">404</span></span>
<span id="line-S-25794-405">405</span>
<span id="line-S-25794-406"><span class="lno">406</span></span>
<span id="line-S-25794-407"><span class="lno">407</span></span>
<span id="line-S-25794-408"><span class="lno">408</span></span>
<span id="line-S-25794-409"><span class="lno">409</span></span>
<span id="line-S-25794-410">410</span>
<span id="line-S-25794-411"><span class="lno">411</span></span>
<span id="line-S-25794-412"><span class="lno">412</span></span>
<span id="line-S-25794-413"><span class="lno">413</span></span>
<span id="line-S-25794-414"><span class="lno">414</span></span>
<span id="line-S-25794-415">415</span>
<span id="line-S-25794-416"><span class="lno">416</span></span>
<span id="line-S-25794-417"><span class="lno">417</span></span>
<span id="line-S-25794-418"><span class="lno">418</span></span>
<span id="line-S-25794-419"><span class="lno">419</span></span>
<span id="line-S-25794-420">420</span>
<span id="line-S-25794-421"><span class="lno">421</span></span>
<span id="line-S-25794-422"><span class="lno">422</span></span>
<span id="line-S-25794-423"><span class="lno">423</span></span>
<span id="line-S-25794-424"><span class="lno">424</span></span>
<span id="line-S-25794-425">425</span>
<span id="line-S-25794-426"><span class="lno">426</span></span>
<span id="line-S-25794-427"><span class="lno">427</span></span>
<span id="line-S-25794-428"><span class="lno">428</span></span>
<span id="line-S-25794-429"><span class="lno">429</span></span>
<span id="line-S-25794-430">430</span>
<span id="line-S-25794-431"><span class="lno">431</span></span>
<span id="line-S-25794-432"><span class="lno">432</span></span>
<span id="line-S-25794-433"><span class="lno">433</span></span>
<span id="line-S-25794-434"><span class="lno">434</span></span>
<span id="line-S-25794-435">435</span>
<span id="line-S-25794-436"><span class="lno">436</span></span>
<span id="line-S-25794-437"><span class="lno">437</span></span>
<span id="line-S-25794-438"><span class="lno">438</span></span>
<span id="line-S-25794-439"><span class="lno">439</span></span>
<span id="line-S-25794-440">440</span>
<span id="line-S-25794-441"><span class="lno">441</span></span>
<span id="line-S-25794-442"><span class="lno">442</span></span>
<span id="line-S-25794-443"><span class="lno">443</span></span>
<span id="line-S-25794-444"><span class="lno">444</span></span>
<span id="line-S-25794-445">445</span>
<span id="line-S-25794-446"><span class="lno">446</span></span>
<span id="line-S-25794-447"><span class="lno">447</span></span>
<span id="line-S-25794-448"><span class="lno">448</span></span>
<span id="line-S-25794-449"><span class="lno">449</span></span>
<span id="line-S-25794-450">450</span>
<span id="line-S-25794-451"><span class="lno">451</span></span>
<span id="line-S-25794-452"><span class="lno">452</span></span>
<span id="line-S-25794-453"><span class="lno">453</span></span>
<span id="line-S-25794-454"><span class="lno">454</span></span>
<span id="line-S-25794-455">455</span>
<span id="line-S-25794-456"><span class="lno">456</span></span>
<span id="line-S-25794-457"><span class="lno">457</span></span>
<span id="line-S-25794-458"><span class="lno">458</span></span>
<span id="line-S-25794-459"><span class="lno">459</span></span>
<span id="line-S-25794-460">460</span>
<span id="line-S-25794-461"><span class="lno">461</span></span>
<span id="line-S-25794-462"><span class="lno">462</span></span>
<span id="line-S-25794-463"><span class="lno">463</span></span>
<span id="line-S-25794-464"><span class="lno">464</span></span>
<span id="line-S-25794-465">465</span>
<span id="line-S-25794-466"><span class="lno">466</span></span>
<span id="line-S-25794-467"><span class="lno">467</span></span>
<span id="line-S-25794-468"><span class="lno">468</span></span>
<span id="line-S-25794-469"><span class="lno">469</span></span>
<span id="line-S-25794-470">470</span>
<span id="line-S-25794-471"><span class="lno">471</span></span>
<span id="line-S-25794-472"><span class="lno">472</span></span>
<span id="line-S-25794-473"><span class="lno">473</span></span>
<span id="line-S-25794-474"><span class="lno">474</span></span>
<span id="line-S-25794-475">475</span>
<span id="line-S-25794-476"><span class="lno">476</span></span>
<span id="line-S-25794-477"><span class="lno">477</span></span>
<span id="line-S-25794-478"><span class="lno">478</span></span>
<span id="line-S-25794-479"><span class="lno">479</span></span>
<span id="line-S-25794-480">480</span>
<span id="line-S-25794-481"><span class="lno">481</span></span>
<span id="line-S-25794-482"><span class="lno">482</span></span>
<span id="line-S-25794-483"><span class="lno">483</span></span>
<span id="line-S-25794-484"><span class="lno">484</span></span>
<span id="line-S-25794-485">485</span>
<span id="line-S-25794-486"><span class="lno">486</span></span>
<span id="line-S-25794-487"><span class="lno">487</span></span>
<span id="line-S-25794-488"><span class="lno">488</span></span>
<span id="line-S-25794-489"><span class="lno">489</span></span>
<span id="line-S-25794-490">490</span>
<span id="line-S-25794-491"><span class="lno">491</span></span>
<span id="line-S-25794-492"><span class="lno">492</span></span>
<span id="line-S-25794-493"><span class="lno">493</span></span>
<span id="line-S-25794-494"><span class="lno">494</span></span>
<span id="line-S-25794-495">495</span>
<span id="line-S-25794-496"><span class="lno">496</span></span>
<span id="line-S-25794-497"><span class="lno">497</span></span>
<span id="line-S-25794-498"><span class="lno">498</span></span>
<span id="line-S-25794-499"><span class="lno">499</span></span>
<span id="line-S-25794-500">500</span>
<span id="line-S-25794-501"><span class="lno">501</span></span>
<span id="line-S-25794-502"><span class="lno">502</span></span>
<span id="line-S-25794-503"><span class="lno">503</span></span>
<span id="line-S-25794-504"><span class="lno">504</span></span>
<span id="line-S-25794-505">505</span>
<span id="line-S-25794-506"><span class="lno">506</span></span>
<span id="line-S-25794-507"><span class="lno">507</span></span>
<span id="line-S-25794-508"><span class="lno">508</span></span>
<span id="line-S-25794-509"><span class="lno">509</span></span>
<span id="line-S-25794-510">510</span>
<span id="line-S-25794-511"><span class="lno">511</span></span>
<span id="line-S-25794-512"><span class="lno">512</span></span>
<span id="line-S-25794-513"><span class="lno">513</span></span>
<span id="line-S-25794-514"><span class="lno">514</span></span>
<span id="line-S-25794-515">515</span>
<span id="line-S-25794-516"><span class="lno">516</span></span>
<span id="line-S-25794-517"><span class="lno">517</span></span>
<span id="line-S-25794-518"><span class="lno">518</span></span>
<span id="line-S-25794-519"><span class="lno">519</span></span>
<span id="line-S-25794-520">520</span>
<span id="line-S-25794-521"><span class="lno">521</span></span>
<span id="line-S-25794-522"><span class="lno">522</span></span>
<span id="line-S-25794-523"><span class="lno">523</span></span>
<span id="line-S-25794-524"><span class="lno">524</span></span>
<span id="line-S-25794-525">525</span>
<span id="line-S-25794-526"><span class="lno">526</span></span>
<span id="line-S-25794-527"><span class="lno">527</span></span>
<span id="line-S-25794-528"><span class="lno">528</span></span>
<span id="line-S-25794-529"><span class="lno">529</span></span>
<span id="line-S-25794-530">530</span>
<span id="line-S-25794-531"><span class="lno">531</span></span>
<span id="line-S-25794-532"><span class="lno">532</span></span>
<span id="line-S-25794-533"><span class="lno">533</span></span>
<span id="line-S-25794-534"><span class="lno">534</span></span>
<span id="line-S-25794-535">535</span>
<span id="line-S-25794-536"><span class="lno">536</span></span>
<span id="line-S-25794-537"><span class="lno">537</span></span>
<span id="line-S-25794-538"><span class="lno">538</span></span>
<span id="line-S-25794-539"><span class="lno">539</span></span>
<span id="line-S-25794-540">540</span>
<span id="line-S-25794-541"><span class="lno">541</span></span>
<span id="line-S-25794-542"><span class="lno">542</span></span>
<span id="line-S-25794-543"><span class="lno">543</span></span>
<span id="line-S-25794-544"><span class="lno">544</span></span>
<span id="line-S-25794-545">545</span>
<span id="line-S-25794-546"><span class="lno">546</span></span>
<span id="line-S-25794-547"><span class="lno">547</span></span>
<span id="line-S-25794-548"><span class="lno">548</span></span>
<span id="line-S-25794-549"><span class="lno">549</span></span>
<span id="line-S-25794-550">550</span>
<span id="line-S-25794-551"><span class="lno">551</span></span>
<span id="line-S-25794-552"><span class="lno">552</span></span>
<span id="line-S-25794-553"><span class="lno">553</span></span>
<span id="line-S-25794-554"><span class="lno">554</span></span>
<span id="line-S-25794-555">555</span>
<span id="line-S-25794-556"><span class="lno">556</span></span>
<span id="line-S-25794-557"><span class="lno">557</span></span>
<span id="line-S-25794-558"><span class="lno">558</span></span>
<span id="line-S-25794-559"><span class="lno">559</span></span>
<span id="line-S-25794-560">560</span>
<span id="line-S-25794-561"><span class="lno">561</span></span>
<span id="line-S-25794-562"><span class="lno">562</span></span>
<span id="line-S-25794-563"><span class="lno">563</span></span>
<span id="line-S-25794-564"><span class="lno">564</span></span>
<span id="line-S-25794-565">565</span>
<span id="line-S-25794-566"><span class="lno">566</span></span>
<span id="line-S-25794-567"><span class="lno">567</span></span>
<span id="line-S-25794-568"><span class="lno">568</span></span>
<span id="line-S-25794-569"><span class="lno">569</span></span>
<span id="line-S-25794-570">570</span>
<span id="line-S-25794-571"><span class="lno">571</span></span>
<span id="line-S-25794-572"><span class="lno">572</span></span>
<span id="line-S-25794-573"><span class="lno">573</span></span>
<span id="line-S-25794-574"><span class="lno">574</span></span>
<span id="line-S-25794-575">575</span>
<span id="line-S-25794-576"><span class="lno">576</span></span>
<span id="line-S-25794-577"><span class="lno">577</span></span>
<span id="line-S-25794-578"><span class="lno">578</span></span>
<span id="line-S-25794-579"><span class="lno">579</span></span>
<span id="line-S-25794-580">580</span>
<span id="line-S-25794-581"><span class="lno">581</span></span>
<span id="line-S-25794-582"><span class="lno">582</span></span>
<span id="line-S-25794-583"><span class="lno">583</span></span>
<span id="line-S-25794-584"><span class="lno">584</span></span>
<span id="line-S-25794-585">585</span>
<span id="line-S-25794-586"><span class="lno">586</span></span>
<span id="line-S-25794-587"><span class="lno">587</span></span>
<span id="line-S-25794-588"><span class="lno">588</span></span>
<span id="line-S-25794-589"><span class="lno">589</span></span>
<span id="line-S-25794-590">590</span>
<span id="line-S-25794-591"><span class="lno">591</span></span>
<span id="line-S-25794-592"><span class="lno">592</span></span>
<span id="line-S-25794-593"><span class="lno">593</span></span>
<span id="line-S-25794-594"><span class="lno">594</span></span>
<span id="line-S-25794-595">595</span>
<span id="line-S-25794-596"><span class="lno">596</span></span>
<span id="line-S-25794-597"><span class="lno">597</span></span>
<span id="line-S-25794-598"><span class="lno">598</span></span>
<span id="line-S-25794-599"><span class="lno">599</span></span>
<span id="line-S-25794-600">600</span>
<span id="line-S-25794-601"><span class="lno">601</span></span>
<span id="line-S-25794-602"><span class="lno">602</span></span>
<span id="line-S-25794-603"><span class="lno">603</span></span>
<span id="line-S-25794-604"><span class="lno">604</span></span>
<span id="line-S-25794-605">605</span>
<span id="line-S-25794-606"><span class="lno">606</span></span>
<span id="line-S-25794-607"><span class="lno">607</span></span>
<span id="line-S-25794-608"><span class="lno">608</span></span>
<span id="line-S-25794-609"><span class="lno">609</span></span>
<span id="line-S-25794-610">610</span>
<span id="line-S-25794-611"><span class="lno">611</span></span>
<span id="line-S-25794-612"><span class="lno">612</span></span>
<span id="line-S-25794-613"><span class="lno">613</span></span>
<span id="line-S-25794-614"><span class="lno">614</span></span>
<span id="line-S-25794-615">615</span>
<span id="line-S-25794-616"><span class="lno">616</span></span>
<span id="line-S-25794-617"><span class="lno">617</span></span>
<span id="line-S-25794-618"><span class="lno">618</span></span>
<span id="line-S-25794-619"><span class="lno">619</span></span>
<span id="line-S-25794-620">620</span>
<span id="line-S-25794-621"><span class="lno">621</span></span>
<span id="line-S-25794-622"><span class="lno">622</span></span>
<span id="line-S-25794-623"><span class="lno">623</span></span>
<span id="line-S-25794-624"><span class="lno">624</span></span>
<span id="line-S-25794-625">625</span>
<span id="line-S-25794-626"><span class="lno">626</span></span>
<span id="line-S-25794-627"><span class="lno">627</span></span>
<span id="line-S-25794-628"><span class="lno">628</span></span>
<span id="line-S-25794-629"><span class="lno">629</span></span>
<span id="line-S-25794-630">630</span>
<span id="line-S-25794-631"><span class="lno">631</span></span>
<span id="line-S-25794-632"><span class="lno">632</span></span>
<span id="line-S-25794-633"><span class="lno">633</span></span>
<span id="line-S-25794-634"><span class="lno">634</span></span>
<span id="line-S-25794-635">635</span>
<span id="line-S-25794-636"><span class="lno">636</span></span>
<span id="line-S-25794-637"><span class="lno">637</span></span>
<span id="line-S-25794-638"><span class="lno">638</span></span>
<span id="line-S-25794-639"><span class="lno">639</span></span>
<span id="line-S-25794-640">640</span>
<span id="line-S-25794-641"><span class="lno">641</span></span>
<span id="line-S-25794-642"><span class="lno">642</span></span>
<span id="line-S-25794-643"><span class="lno">643</span></span>
<span id="line-S-25794-644"><span class="lno">644</span></span>
<span id="line-S-25794-645">645</span>
<span id="line-S-25794-646"><span class="lno">646</span></span>
<span id="line-S-25794-647"><span class="lno">647</span></span>
<span id="line-S-25794-648"><span class="lno">648</span></span>
<span id="line-S-25794-649"><span class="lno">649</span></span>
<span id="line-S-25794-650">650</span>
<span id="line-S-25794-651"><span class="lno">651</span></span>
<span id="line-S-25794-652"><span class="lno">652</span></span>
<span id="line-S-25794-653"><span class="lno">653</span></span>
<span id="line-S-25794-654"><span class="lno">654</span></span>
<span id="line-S-25794-655">655</span>
<span id="line-S-25794-656"><span class="lno">656</span></span>
<span id="line-S-25794-657"><span class="lno">657</span></span>
<span id="line-S-25794-658"><span class="lno">658</span></span>
<span id="line-S-25794-659"><span class="lno">659</span></span>
<span id="line-S-25794-660">660</span>
<span id="line-S-25794-661"><span class="lno">661</span></span>
<span id="line-S-25794-662"><span class="lno">662</span></span>
<span id="line-S-25794-663"><span class="lno">663</span></span>
<span id="line-S-25794-664"><span class="lno">664</span></span>
<span id="line-S-25794-665">665</span>
<span id="line-S-25794-666"><span class="lno">666</span></span>
<span id="line-S-25794-667"><span class="lno">667</span></span>
<span id="line-S-25794-668"><span class="lno">668</span></span>
<span id="line-S-25794-669"><span class="lno">669</span></span>
<span id="line-S-25794-670">670</span>
<span id="line-S-25794-671"><span class="lno">671</span></span>
</pre></td><td valign="top"><pre><code class="language-xml">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                xmlns:db="http://docbook.org/ns/docbook"
                xmlns:dbe="http://docbook.org/ns/docbook/errors"
                xmlns:f="http://docbook.org/ns/docbook/functions"
                xmlns:fp="http://docbook.org/ns/docbook/functions/private"
                xmlns:l="http://docbook.org/ns/docbook/l10n"
                xmlns:m="http://docbook.org/ns/docbook/modes"
                xmlns:map="http://www.w3.org/2005/xpath-functions/map"
                xmlns:mp="http://docbook.org/ns/docbook/modes/private"
                xmlns:t="http://docbook.org/ns/docbook/templates"
                xmlns:v="http://docbook.org/ns/docbook/variables"
                xmlns:vp="http://docbook.org/ns/docbook/variables/private"
                xmlns:xs="http://www.w3.org/2001/XMLSchema"
                xmlns="http://www.w3.org/1999/xhtml"
                default-mode="m:docbook"
                exclude-result-prefixes="db dbe f fp l m map mp t v vp xs"
                version="3.0"&gt;
&lt;!--
    prefix, label, separator, title, suffix : context (title, lot)

                  Section 3.4 The Title
                ^    ^   ^^^ ^    ^     ^
                |    |   ||| |    |     +- the suffix
                |    |   ||| |    +- the title
                |    |   ||| +- the number separator
                |    |   ||+- the intra-number separator
                |    |   |+- the number (3.4)
                |    |   +- the label separator
                |    +- the label
                +- the prefix
--&gt;

&lt;!-- label defaults to false;
     number defaults to false;
     inherit is ignored if number is false --&gt;

&lt;xsl:variable name="v:user-title-properties" as="element()*"/&gt;

&lt;xsl:variable name="v:title-properties" as="element()+"
              xmlns:db="http://docbook.org/ns/docbook"&gt;
  &lt;xsl:sequence select="$v:user-title-properties"/&gt;

  &lt;title xpath="self::db:section[ancestor::db:preface]"
         label="false"/&gt;

  &lt;title xpath="self::db:section[parent::db:section]"
         number-format="{$section-numbers}"
         inherit="{$section-numbers-inherit}"/&gt;

  &lt;title xpath="self::db:section"
         number-format="{$section-numbers}"
         inherit="{$component-numbers-inherit}"/&gt;

  &lt;title xpath="self::db:sect1"
         number-format="{$section-numbers}"
         inherit="{$component-numbers-inherit}"/&gt;

  &lt;title xpath="self::db:sect2|self::db:sect3|self::db:sect4|self::db:sect5"
         number-format="{$section-numbers}"
         inherit="{$section-numbers-inherit}"/&gt;

  &lt;title xpath="self::db:refsection|self::db:refsect1|self::db:refsect2|self::db:refsect3"/&gt;

  &lt;title xpath="self::db:article"/&gt;

  &lt;title xpath="self::db:preface"/&gt;

  &lt;title xpath="self::db:chapter"
         number-format="1"
         label="true"
         inherit="{$division-numbers-inherit}"/&gt;

  &lt;title xpath="self::db:appendix"
         number-format="A"
         label="true"
         inherit="{$division-numbers-inherit}"/&gt;

  &lt;title xpath="self::db:part"
         label="true"
         number="true"
         number-format="I"/&gt;

  &lt;title xpath="self::db:reference"
         number-format="I"/&gt;

  &lt;title xpath="self::db:figure|self::db:table|self::db:equation|self::db:example"
         label="true"
         number-format="1"
         inherit="true"/&gt;

  &lt;title xpath="self::db:formalgroup"
         label="true"
         number-format="1"
         inherit="true"/&gt;

  &lt;title xpath="self::db:step|self::db:listitem[parent::db:orderedlist]"
         label="false"
         number="false"
         inherit="true"/&gt;

  &lt;title xpath="self::db:glosssee|self::db:glossseealso"
         label="true"/&gt;

  &lt;title xpath="self::db:see|self::db:seealso"
         label="true"/&gt;

  &lt;title xpath="self::db:question|self::db:answer"
         label="true"
         title="true"/&gt;

  &lt;title xpath="self::*"/&gt;
&lt;/xsl:variable&gt;

&lt;!-- ============================================================ --&gt;

&lt;xsl:template match="*" mode="m:headline"&gt;
  &lt;xsl:param name="purpose" as="xs:string" required="yes"/&gt;

  &lt;xsl:variable name="properties" select="fp:title-properties(.)"/&gt;

  &lt;!--
  &lt;xsl:message select="path(.), ':'"/&gt;
  &lt;xsl:for-each select="map:keys($properties)"&gt;
    &lt;xsl:message select="'  prop:', ., '=', map:get($properties, .)"/&gt;
  &lt;/xsl:for-each&gt;
  --&gt;

  &lt;xsl:variable name="title" as="node()*"&gt;
    &lt;xsl:apply-templates select="." mode="m:headline-title"&gt;
      &lt;xsl:with-param name="purpose" select="$purpose"/&gt;
    &lt;/xsl:apply-templates&gt;
  &lt;/xsl:variable&gt;

  &lt;xsl:variable name="number" as="node()*"&gt;
    &lt;xsl:if test="$properties?number"&gt;
      &lt;xsl:choose&gt;
        &lt;xsl:when test="@label"&gt;
          &lt;xsl:value-of select="@label/string()"/&gt;
        &lt;/xsl:when&gt;
        &lt;xsl:otherwise&gt;
          &lt;xsl:apply-templates select="." mode="m:headline-number"&gt;
            &lt;xsl:with-param name="purpose" select="$purpose"/&gt;
          &lt;/xsl:apply-templates&gt;
        &lt;/xsl:otherwise&gt;
      &lt;/xsl:choose&gt;
    &lt;/xsl:if&gt;
  &lt;/xsl:variable&gt;

  &lt;xsl:variable name="label" as="item()*"&gt;
    &lt;xsl:if test="($properties?label and $purpose ne 'lot')
                  or ($properties?label-toc and $purpose eq 'lot')"&gt;
      &lt;xsl:apply-templates select="." mode="m:headline-label"&gt;
        &lt;xsl:with-param name="purpose" select="$purpose"/&gt;
        &lt;xsl:with-param name="number" select="$number"/&gt;
        &lt;xsl:with-param name="title" select="$title"/&gt;
      &lt;/xsl:apply-templates&gt;
    &lt;/xsl:if&gt;
  &lt;/xsl:variable&gt;

  &lt;xsl:apply-templates select="." mode="m:headline-prefix"&gt;
    &lt;xsl:with-param name="purpose" select="$purpose"/&gt;
    &lt;xsl:with-param name="label" select="$label"/&gt;
    &lt;xsl:with-param name="number" select="$number"/&gt;
    &lt;xsl:with-param name="title" select="$title"/&gt;
  &lt;/xsl:apply-templates&gt;

  &lt;xsl:if test="not(empty($label))"&gt;
    &lt;span class="label"&gt;
      &lt;xsl:sequence select="$label"/&gt;
      &lt;xsl:variable name="sep" as="node()*"&gt;
        &lt;xsl:apply-templates select="." mode="m:headline-label-separator"&gt;
          &lt;xsl:with-param name="purpose" select="$purpose"/&gt;
          &lt;xsl:with-param name="label" select="$label"/&gt;
          &lt;xsl:with-param name="number" select="$number"/&gt;
          &lt;xsl:with-param name="title" select="$title"/&gt;
        &lt;/xsl:apply-templates&gt;
      &lt;/xsl:variable&gt;
      &lt;xsl:if test="not(empty($sep))"&gt;
        &lt;span class="sep"&gt;
          &lt;xsl:sequence select="$sep"/&gt;
        &lt;/span&gt;
      &lt;/xsl:if&gt;
    &lt;/span&gt;
  &lt;/xsl:if&gt;

  &lt;xsl:if test="not(empty($number))"&gt;
    &lt;span class="number"&gt;
      &lt;xsl:sequence select="$number"/&gt;
      &lt;xsl:apply-templates select="." mode="m:headline-number-separator"&gt;
        &lt;xsl:with-param name="purpose" select="$purpose"/&gt;
        &lt;xsl:with-param name="number" select="$number"/&gt;
        &lt;xsl:with-param name="title" select="$title"/&gt;
      &lt;/xsl:apply-templates&gt;
    &lt;/span&gt;
  &lt;/xsl:if&gt;

  &lt;xsl:sequence select="$title"/&gt;

  &lt;xsl:apply-templates select="." mode="m:headline-suffix"&gt;
    &lt;xsl:with-param name="purpose" select="$purpose"/&gt;
    &lt;xsl:with-param name="title" select="$title"/&gt;
  &lt;/xsl:apply-templates&gt;
&lt;/xsl:template&gt;

&lt;!-- ============================================================ --&gt;

&lt;xsl:template match="*" mode="m:headline-prefix"&gt;
  &lt;xsl:param name="purpose" as="xs:string" required="yes"/&gt;
  &lt;xsl:param name="label" as="item()*" required="yes"/&gt;
  &lt;xsl:param name="number" as="item()*" required="yes"/&gt;
  &lt;xsl:param name="title" as="node()*" required="yes"/&gt;
  &lt;xsl:sequence select="()"/&gt;
&lt;/xsl:template&gt;

&lt;!-- ============================================================ --&gt;

&lt;xsl:template match="*" mode="m:headline-label"&gt;
  &lt;xsl:param name="purpose" as="xs:string" select="'title'"/&gt;
  &lt;xsl:param name="number" as="node()*" required="yes"/&gt;
  &lt;xsl:param name="title" as="node()*" required="yes"/&gt;
  &lt;xsl:sequence select="f:gentext(., 'label')"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:formalgroup
                     |db:figure|db:example|db:table
                     |db:equation|db:procedure"
              priority="20"
              mode="m:headline-label"&gt;
  &lt;xsl:param name="purpose" as="xs:string" select="'title'"/&gt;
  &lt;xsl:param name="number" as="node()*" required="yes"/&gt;
  &lt;xsl:param name="title" as="node()*" required="yes"/&gt;
  &lt;xsl:choose&gt;
    &lt;xsl:when test="$purpose = 'lot'"&gt;
      &lt;xsl:sequence select="()"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:next-match&gt;
        &lt;xsl:with-param name="purpose" select="$purpose"/&gt;
        &lt;xsl:with-param name="number" select="$number"/&gt;
        &lt;xsl:with-param name="title" select="$title"/&gt;
      &lt;/xsl:next-match&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:formalgroup" priority="10"
              mode="m:headline-label"&gt;
  &lt;xsl:param name="purpose" as="xs:string" select="'title'"/&gt;
  &lt;xsl:param name="number" as="node()*" required="yes"/&gt;
  &lt;xsl:param name="title" as="node()*" required="yes"/&gt;

  &lt;xsl:variable name="ctx"
                select="(db:figure|db:table
                         |db:example|db:equation)[1]"/&gt;

  &lt;xsl:sequence select="f:gentext(., 'label', local-name($ctx))"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:figure|db:example|db:table|db:equation|db:procedure"
              priority="10"
              mode="m:headline-label"&gt;
  &lt;xsl:param name="purpose" as="xs:string" select="'title'"/&gt;
  &lt;xsl:param name="number" as="node()*" required="yes"/&gt;
  &lt;xsl:param name="title" as="node()*" required="yes"/&gt;

  &lt;xsl:choose&gt;
    &lt;xsl:when test="empty(parent::db:formalgroup)"&gt;
      &lt;xsl:next-match&gt;
        &lt;xsl:with-param name="purpose" select="$purpose"/&gt;
        &lt;xsl:with-param name="number" select="$number"/&gt;
        &lt;xsl:with-param name="title" select="$title"/&gt;
      &lt;/xsl:next-match&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:sequence select="f:gentext(., 'label',
                                      'sub' || local-name(.))"/&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:qandaentry" mode="m:headline-label"&gt;
  &lt;xsl:param name="purpose" as="xs:string" select="'title'"/&gt;
  &lt;xsl:param name="number" as="node()*"/&gt;
  &lt;xsl:param name="title" as="node()*"/&gt;
  &lt;xsl:apply-templates select="db:question" mode="m:headline-label"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:question" mode="m:headline-label"&gt;
  &lt;xsl:param name="purpose" as="xs:string" select="'title'"/&gt;
  &lt;xsl:param name="number" as="node()*"/&gt;
  &lt;xsl:param name="title" as="node()*"/&gt;

  &lt;xsl:variable name="label"
                select="ancestor::db:qandaset[@defaultlabel][1]/@defaultlabel/string()"/&gt;
  &lt;xsl:variable name="label"
                select="if ($label)
                        then $label
                        else $qandaset-default-label"/&gt;

  &lt;xsl:choose&gt;
    &lt;xsl:when test="db:label"&gt;
      &lt;xsl:apply-templates select="db:label"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="$label = 'none'"/&gt;
    &lt;xsl:when test="$label = 'number'"&gt;
      &lt;xsl:number from="db:qandaset" level="multiple" select=".."
                  count="db:qandaentry|db:qandadiv"/&gt;
      &lt;xsl:sequence select="f:post-label-punctuation(.)"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="$label = 'qanda'"&gt;
      &lt;xsl:text&gt;Q:&lt;/xsl:text&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:message
          select="'Unexpected qandaset label: ' || $label || ', using qanda'"/&gt;
      &lt;xsl:text&gt;Q:&lt;/xsl:text&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:answer" mode="m:headline-label"&gt;
  &lt;xsl:param name="purpose" as="xs:string" select="'title'"/&gt;
  &lt;xsl:param name="number" as="node()*"/&gt;
  &lt;xsl:param name="title" as="node()*"/&gt;

  &lt;xsl:variable name="label"
                select="ancestor::db:qandaset[@defaultlabel][1]/@defaultlabel/string()"/&gt;
  &lt;xsl:variable name="label"
                select="if ($label)
                        then $label
                        else $qandaset-default-label"/&gt;

  &lt;xsl:choose&gt;
    &lt;xsl:when test="db:label"&gt;
      &lt;xsl:apply-templates select="db:label"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="$label = 'none' or $label='number'"/&gt;
    &lt;xsl:when test="$label = 'qanda'"&gt;
      &lt;xsl:text&gt;A:&lt;/xsl:text&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:message
          select="'Unexpected qandaset label: ' || $label || ', using qanda'"/&gt;
      &lt;xsl:text&gt;A:&lt;/xsl:text&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:template&gt;

&lt;!-- ============================================================ --&gt;

&lt;xsl:template match="*" mode="m:headline-label-separator"&gt;
  &lt;xsl:param name="purpose" as="xs:string" required="yes"/&gt;
  &lt;xsl:param name="label" as="item()*" required="yes"/&gt;
  &lt;xsl:param name="number" as="item()*" required="yes"/&gt;
  &lt;xsl:param name="title" as="node()*" required="yes"/&gt;
  &lt;xsl:sequence select="f:label-separator(.)"/&gt;
&lt;/xsl:template&gt;

&lt;!-- ============================================================ --&gt;

&lt;xsl:template match="*" mode="m:headline-number"&gt;
  &lt;xsl:param name="purpose" as="xs:string" required="yes"/&gt;

  &lt;xsl:variable name="properties" select="fp:title-properties(.)"/&gt;

  &lt;xsl:if test="exists(parent::*) and $properties?inherit"&gt;
    &lt;xsl:variable name="pnum" as="node()*"&gt;
      &lt;xsl:apply-templates select=".." mode="m:headline-number"&gt;
        &lt;xsl:with-param name="purpose" select="$purpose"/&gt;
      &lt;/xsl:apply-templates&gt;
    &lt;/xsl:variable&gt;
    &lt;xsl:if test="exists($pnum)"&gt;
      &lt;xsl:sequence select="$pnum"/&gt;
      &lt;span class="sep"&gt;
        &lt;xsl:sequence select="f:intra-number-separator(.)"/&gt;
      &lt;/span&gt;
    &lt;/xsl:if&gt;
  &lt;/xsl:if&gt;

  &lt;xsl:variable name="number"
                select="count(preceding-sibling::*
                              [node-name(.)=node-name(current())]) + 1"/&gt;

  &lt;xsl:number value="$number" format="{$properties?number-format}"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:section" mode="m:headline-number"&gt;
  &lt;xsl:param name="purpose" as="xs:string" required="yes"/&gt;

  &lt;xsl:variable name="properties" select="fp:title-properties(.)"/&gt;

  &lt;xsl:if test="exists(parent::*) and $properties?inherit"&gt;
    &lt;xsl:variable name="pnum" as="node()*"&gt;
      &lt;xsl:apply-templates select=".." mode="m:headline-number"&gt;
        &lt;xsl:with-param name="purpose" select="$purpose"/&gt;
      &lt;/xsl:apply-templates&gt;
    &lt;/xsl:variable&gt;
    &lt;xsl:if test="exists($pnum)"&gt;
      &lt;xsl:sequence select="$pnum"/&gt;
      &lt;span class="sep"&gt;
        &lt;xsl:sequence select="f:intra-number-separator(.)"/&gt;
      &lt;/span&gt;
    &lt;/xsl:if&gt;
  &lt;/xsl:if&gt;

  &lt;xsl:variable name="number"
                select="count(preceding-sibling::db:section) + 1"/&gt;

  &lt;xsl:number value="$number" format="{$properties?number-format}"/&gt;
&lt;/xsl:template&gt;

&lt;!-- if there's a single appendix, don't number it --&gt;
&lt;xsl:template match="db:appendix" mode="m:headline-number"&gt;
  &lt;xsl:param name="purpose" as="xs:string" required="yes"/&gt;

  &lt;xsl:variable name="properties" select="fp:title-properties(.)"/&gt;

  &lt;xsl:choose&gt;
    &lt;xsl:when test="not(f:is-true($number-single-appendix))
                    and not($properties?label)
                    and empty(preceding-sibling::db:appendix)
                    and empty(following-sibling::db:appendix)"&gt;
      &lt;xsl:sequence select="()"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:next-match&gt;
        &lt;xsl:with-param name="purpose" select="$purpose"/&gt;
      &lt;/xsl:next-match&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:step" mode="m:headline-number"&gt;
  &lt;xsl:param name="purpose" as="xs:string" required="yes"/&gt;

  &lt;xsl:variable name="properties" select="fp:title-properties(.)"/&gt;

  &lt;xsl:if test="exists(ancestor::db:step) and $properties?inherit"&gt;
    &lt;xsl:variable name="pnum" as="node()*"&gt;
      &lt;xsl:apply-templates select="ancestor::db:step[1]"
                           mode="m:headline-number"&gt;
        &lt;xsl:with-param name="purpose" select="$purpose"/&gt;
      &lt;/xsl:apply-templates&gt;
    &lt;/xsl:variable&gt;
    &lt;xsl:if test="exists($pnum)"&gt;
      &lt;xsl:sequence select="$pnum"/&gt;
      &lt;span class="sep"&gt;
        &lt;xsl:sequence select="f:intra-number-separator(.)"/&gt;
      &lt;/span&gt;
    &lt;/xsl:if&gt;
  &lt;/xsl:if&gt;

  &lt;xsl:variable name="number"
                select="count(preceding-sibling::db:step) + 1"/&gt;

  &lt;xsl:number value="$number" format="{f:step-numeration(.)}"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:listitem[parent::db:orderedlist]" mode="m:headline-number"&gt;
  &lt;xsl:param name="purpose" as="xs:string" required="yes"/&gt;

  &lt;xsl:variable name="properties" select="fp:title-properties(.)"/&gt;

  &lt;xsl:if test="exists(ancestor::db:listitem[parent::db:orderedlist])
                and $properties?inherit"&gt;
    &lt;xsl:variable name="pnum" as="node()*"&gt;
      &lt;xsl:apply-templates
          select="ancestor::db:listitem[parent::db:orderedlist][1]"
          mode="m:headline-number"&gt;
        &lt;xsl:with-param name="purpose" select="$purpose"/&gt;
      &lt;/xsl:apply-templates&gt;
    &lt;/xsl:variable&gt;
    &lt;xsl:if test="exists($pnum)"&gt;
      &lt;xsl:sequence select="$pnum"/&gt;
      &lt;span class="sep"&gt;
        &lt;xsl:sequence select="f:intra-number-separator(.)"/&gt;
      &lt;/span&gt;
    &lt;/xsl:if&gt;
  &lt;/xsl:if&gt;

  &lt;xsl:variable name="number"
                select="count(preceding-sibling::db:listitem) + 1"/&gt;

  &lt;xsl:number value="$number" format="{f:orderedlist-item-numeration(.)}"/&gt;
&lt;/xsl:template&gt;

&lt;!-- ============================================================ --&gt;

&lt;xsl:template match="*" mode="m:headline-number-separator"&gt;
  &lt;xsl:param name="purpose" as="xs:string" required="yes"/&gt;
  &lt;xsl:param name="number" as="node()*" required="yes"/&gt;
  &lt;xsl:param name="title" as="node()*" required="yes"/&gt;
  &lt;xsl:choose&gt;
    &lt;xsl:when test="self::db:set|self::db:book|self::db:part
                    |self::db:reference|self::db:chapter|self::db:appendix"&gt;
      &lt;span class="sep"&gt;. &lt;/span&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;span class="sep"&gt; &lt;/span&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:template&gt;

&lt;!-- ============================================================ --&gt;

&lt;xsl:template match="*" mode="m:headline-title"&gt;
  &lt;xsl:param name="purpose" as="xs:string" select="'title'"/&gt;

  &lt;xsl:choose&gt;
    &lt;xsl:when test="$purpose = 'title' or not(db:info/db:titleabbrev)"&gt;
      &lt;xsl:apply-templates select="db:info/db:title" mode="m:title"&gt;
        &lt;xsl:with-param name="purpose" select="$purpose"/&gt;
      &lt;/xsl:apply-templates&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:apply-templates select="db:info/db:titleabbrev" mode="m:title"&gt;
        &lt;xsl:with-param name="purpose" select="$purpose"/&gt;
      &lt;/xsl:apply-templates&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:refentry" mode="m:headline-title"&gt;
  &lt;xsl:param name="purpose" as="xs:string" select="'title'"/&gt;
  &lt;xsl:choose&gt;
    &lt;xsl:when test="db:refmeta"&gt;
      &lt;xsl:apply-templates select="db:refmeta" mode="m:headline-title"&gt;
        &lt;xsl:with-param name="purpose" select="$purpose"/&gt;
      &lt;/xsl:apply-templates&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:apply-templates select="db:refnamediv/db:refname[1]" mode="m:headline-title"&gt;
        &lt;xsl:with-param name="purpose" select="$purpose"/&gt;
      &lt;/xsl:apply-templates&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:refmeta" mode="m:headline-title"&gt;
  &lt;xsl:param name="purpose" as="xs:string" select="'title'"/&gt;
  &lt;xsl:apply-templates select="db:refentrytitle/node()"/&gt;
  &lt;xsl:apply-templates select="db:manvolnum"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:refnamediv" mode="m:headline-title"&gt;
  &lt;xsl:param name="purpose" as="xs:string" select="'title'"/&gt;
  &lt;xsl:apply-templates select="db:refname[1]" mode="m:headline-title"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:refname" mode="m:headline-title"&gt;
  &lt;xsl:param name="purpose" as="xs:string" select="'title'"/&gt;
  &lt;xsl:apply-templates mode="m:title"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:question" mode="m:headline-title"&gt;
  &lt;xsl:param name="purpose" as="xs:string" select="'title'"/&gt;
  &lt;xsl:apply-templates select="*[1]" mode="m:title"/&gt;
&lt;/xsl:template&gt;

&lt;!-- ============================================================ --&gt;

&lt;xsl:template match="*" mode="m:headline-suffix"&gt;
  &lt;xsl:param name="purpose" as="xs:string" required="yes"/&gt;
  &lt;xsl:param name="title" as="node()*" required="yes"/&gt;

  &lt;xsl:sequence select="()"/&gt;
&lt;/xsl:template&gt;

&lt;!-- ============================================================ --&gt;

&lt;xsl:function name="fp:document-title-properties" as="element()*" cache="yes"&gt;
  &lt;xsl:param name="node" as="element()"/&gt;
  &lt;xsl:sequence select="root($node)/*/db:info/v:title"/&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="fp:title-properties" as="map(*)" cache="yes"&gt;
  &lt;xsl:param name="node" as="element()"/&gt;

  &lt;!-- You might think it would be convenient to accumulate the properties,
       but that requires making every property explicit on every element
       in order to prevent broader matches from overriding narrower ones.
       So there wouldn't be any point. --&gt;

  &lt;xsl:variable name="prop" as="element()?"&gt;
    &lt;xsl:iterate select="(fp:document-title-properties($node), $v:title-properties)"&gt;
      &lt;xsl:variable name="test" as="element()*"&gt;
        &lt;xsl:evaluate context-item="$node" xpath="@xpath"/&gt;
      &lt;/xsl:variable&gt;

      &lt;xsl:choose&gt;
        &lt;xsl:when test="$test"&gt;
          &lt;xsl:sequence select="."/&gt;
          &lt;xsl:break/&gt;
        &lt;/xsl:when&gt;
        &lt;xsl:otherwise&gt;
          &lt;xsl:next-iteration/&gt;
        &lt;/xsl:otherwise&gt;
      &lt;/xsl:choose&gt;
    &lt;/xsl:iterate&gt;
  &lt;/xsl:variable&gt;

  &lt;xsl:variable name="number" as="xs:boolean"
                select="exists($prop/@number-format)
                        and (not(exists($prop/@number)) or f:is-true($prop/@number))"/&gt;

  &lt;xsl:variable name="format" as="xs:string?"
                select="if ($number)
                        then ($prop/@number-format, '1')[1]
                        else ()"/&gt;

  &lt;xsl:variable name="label-toc" as="xs:boolean"
                select="if ($prop/@label-toc)
                        then f:is-true($prop/@label-toc)
                        else f:is-true($prop/@label)"/&gt;

  &lt;xsl:message use-when="false()"
               select="node-name($node), ' ', f:is-true($prop/@label), ' ', $number"/&gt;
  &lt;xsl:message use-when="false()"
               select="$prop"/&gt;

  &lt;xsl:sequence select="map {
    'label':         f:is-true($prop/@label),
    'label-toc':     $label-toc,
    'number':        $number,
    'number-format': $prop/@number-format/string(),
    'inherit':       f:is-true($prop/@inherit)
    }"/&gt;
&lt;/xsl:function&gt;

&lt;!-- ============================================================ --&gt;

&lt;xsl:template match="db:title|db:titleabbrev" mode="m:title"&gt;
  &lt;xsl:param name="purpose" as="xs:string" required="yes"/&gt;

  &lt;xsl:choose&gt;
    &lt;xsl:when test="$purpose = 'title'"&gt;
      &lt;xsl:apply-templates/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:variable name="title" as="item()*"&gt;
        &lt;xsl:apply-templates/&gt;
      &lt;/xsl:variable&gt;
      &lt;xsl:apply-templates select="$title" mode="mp:strip-links"/&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:template&gt;

&lt;!-- ============================================================ --&gt;

&lt;xsl:template xmlns:h="http://www.w3.org/1999/xhtml"
              match="h:db-footnote|h:db-annotation" mode="mp:strip-links"/&gt;

&lt;xsl:template xmlns:h="http://www.w3.org/1999/xhtml"
              match="h:a" mode="mp:strip-links"&gt;
  &lt;xsl:apply-templates/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="element()" mode="mp:strip-links"&gt;
  &lt;xsl:copy&gt;
    &lt;xsl:apply-templates select="@*,node()" mode="mp:strip-links"/&gt;
  &lt;/xsl:copy&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="attribute()|text()|comment()|processing-instruction()"
              mode="mp:strip-links"&gt;
  &lt;xsl:copy/&gt;
&lt;/xsl:template&gt;

&lt;/xsl:stylesheet&gt;
</code></pre></td></tr></table></div></div></div></div><div class="stylesheet" id="S-46176"><h3>units.xsl</h3><p><span><span class="function all">11 functions</span> (<span class="function unused">2 unused</span>, <span class="function elsewhere">5 used only in one other module</span>)</span>, <span><span class="variable all">4 variables</span> (<span class="variable unused">1 unused</span>)</span></p><div class="instructions"><div class="title closed">Instructions</div><div class="body"><div id="S-46176-docbook.org.ns.docbook.variables.unit-scale" class="instruction variable"><div class="title"><span class="link"></span>Variable <code>$v:unit-scale</code> as <code>map(*)</code></div><div class="props"><div class="uses">Uses: <a href="#S-26643-..pixels-per-inch">$pixels-per-inch</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-46176-docbook.org.ns.docbook.functions.absolute-length,1">f:absolute-length()</a>, <a href="#S-46176-docbook.org.ns.docbook.functions.parse-length,1">f:parse-length()</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-46176">modules/units.xsl</a></div></div></div><div id="S-46176-docbook.org.ns.docbook.variables.private.length-regex" class="instruction variable"><div class="title"><span class="link"></span>Variable <code>$vp:length-regex</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-46176-docbook.org.ns.docbook.functions.parse-length,1">f:parse-length()</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-46176">modules/units.xsl</a></div></div></div><div id="S-46176-docbook.org.ns.docbook.variables.private.percent-regex" class="instruction variable unused"><div class="title"><span class="link"></span>Variable <code>$vp:percent-regex</code></div><div class="props"><div class="used-by"><span class="marker">☞</span><span class="unused">Unused</span></div></div></div><div id="S-46176-docbook.org.ns.docbook.variables.private.relative-regex" class="instruction variable"><div class="title"><span class="link"></span>Variable <code>$vp:relative-regex</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-46176-docbook.org.ns.docbook.functions.parse-length,1">f:parse-length()</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-46176">modules/units.xsl</a></div></div></div><div id="S-46176-docbook.org.ns.docbook.functions.parse-length,1" class="instruction function"><div class="title"><span class="link"></span>Function f:parse-length($length as xs:string) as map(*)</div><div class="props"><div class="uses">Uses: <a href="#S-46176-docbook.org.ns.docbook.variables.private.length-regex">$vp:length-regex</a>, <a href="#S-46176-docbook.org.ns.docbook.variables.private.relative-regex">$vp:relative-regex</a>, <a href="#S-46176-docbook.org.ns.docbook.variables.unit-scale">$v:unit-scale</a>, <a href="#S-26643-..default-length-magnitude">$default-length-magnitude</a>, <a href="#S-26643-..default-length-unit">$default-length-unit</a></div><div class="calls">Calls: <a href="#S-46176-docbook.org.ns.docbook.functions.length-units,1">f:length-units()</a>, <a href="#S-51480-docbook.org.ns.docbook.functions.object-contentheight,2">f:object-contentheight()</a>, <a href="#S-51480-docbook.org.ns.docbook.functions.object-contentwidth,2">f:object-contentwidth()</a>, <a href="#S-51480-docbook.org.ns.docbook.functions.object-height,1">f:object-height()</a>, <a href="#S-51480-docbook.org.ns.docbook.functions.object-width,1">f:object-width()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-46176-docbook.org.ns.docbook.functions.length-units,1">f:length-units()</a>, <a href="#S-51480-docbook.org.ns.docbook.functions.object-contentheight,2">f:object-contentheight()</a>, <a href="#S-51480-docbook.org.ns.docbook.functions.object-contentwidth,2">f:object-contentwidth()</a>, <a href="#S-51480-docbook.org.ns.docbook.functions.object-height,1">f:object-height()</a>, <a href="#S-51480-docbook.org.ns.docbook.functions.object-width,1">f:object-width()</a>, <a href="#S-59097-docbook.org.ns.docbook.templates.private.cals-colspec">tp:cals-colspec</a>, <a href="#S-23412-docbook.org.ns.docbook.variables.image-nominal-height">$v:image-nominal-height</a>, <a href="#S-23412-docbook.org.ns.docbook.variables.image-nominal-width">$v:image-nominal-width</a>, <a href="#S-23412-docbook.org.ns.docbook.variables.nominal-page-width">$v:nominal-page-width</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-23412">modules/variable.xsl</a>, <a href="#S-46176">modules/units.xsl</a>, <a href="#S-51480">modules/objects.xsl</a>, <a href="#S-59097">modules/tablecals.xsl</a></div></div></div><div id="S-46176-docbook.org.ns.docbook.functions.length-units,1" class="instruction function unused"><div class="title"><span class="link"></span>Function f:length-units($length as xs:string?) as xs:string?</div><div class="props"><div class="used-by"><span class="marker">☞</span><span class="unused">Unused</span></div></div></div><div id="S-46176-docbook.org.ns.docbook.functions.absolute-length,1" class="instruction function"><div class="title"><span class="link"></span>Function f:absolute-length($length as map(*)) as xs:double</div><div class="props"><div class="uses">Uses: <a href="#S-46176-docbook.org.ns.docbook.variables.unit-scale">$v:unit-scale</a></div><div class="calls">Calls: <a href="#S-51480-docbook.org.ns.docbook.functions.css-length,2">f:css-length()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-51480-docbook.org.ns.docbook.functions.css-length,2">f:css-length()</a>, <a href="#S-59097-docbook.org.ns.docbook.templates.private.cals-colspec">tp:cals-colspec</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-51480">modules/objects.xsl</a>, <a href="#S-59097">modules/tablecals.xsl</a></div></div></div><div id="S-46176-docbook.org.ns.docbook.functions.relative-length,1" class="instruction function elsewhere"><div class="title"><span class="link"></span>Function f:relative-length($length as map(*)) as xs:double</div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-59097-docbook.org.ns.docbook.templates.private.cals-colspec">tp:cals-colspec</a></div><div class="used-in"><span class="marker" title="Only used in one other module">☝</span>Used in: <a href="#S-59097">modules/tablecals.xsl</a></div></div></div><div id="S-46176-docbook.org.ns.docbook.functions.empty-length,0" class="instruction function elsewhere"><div class="title"><span class="link"></span>Function f:empty-length() as map(*)</div><div class="props"><div class="calls">Calls: <a href="#S-51480-docbook.org.ns.docbook.functions.object-contentheight,2">f:object-contentheight()</a>, <a href="#S-51480-docbook.org.ns.docbook.functions.object-contentwidth,2">f:object-contentwidth()</a>, <a href="#S-51480-docbook.org.ns.docbook.functions.object-height,1">f:object-height()</a>, <a href="#S-51480-docbook.org.ns.docbook.functions.object-width,1">f:object-width()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-51480-docbook.org.ns.docbook.functions.object-contentheight,2">f:object-contentheight()</a>, <a href="#S-51480-docbook.org.ns.docbook.functions.object-contentwidth,2">f:object-contentwidth()</a>, <a href="#S-51480-docbook.org.ns.docbook.functions.object-height,1">f:object-height()</a>, <a href="#S-51480-docbook.org.ns.docbook.functions.object-width,1">f:object-width()</a></div><div class="used-in"><span class="marker" title="Only used in one other module">☝</span>Used in: <a href="#S-51480">modules/objects.xsl</a></div></div></div><div id="S-46176-docbook.org.ns.docbook.functions.is-empty-length,1" class="instruction function"><div class="title"><span class="link"></span>Function f:is-empty-length($length as map(*)?) as xs:boolean</div><div class="props"><div class="calls">Calls: <a href="#S-46176-docbook.org.ns.docbook.functions.equal-lengths,2">f:equal-lengths()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-46176-docbook.org.ns.docbook.functions.equal-lengths,2">f:equal-lengths()</a>, <a href="#S-51480-docbook.org.ns.docbook.templates.private.process-object">tp:process-object</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-46176">modules/units.xsl</a>, <a href="#S-51480">modules/objects.xsl</a></div></div></div><div id="S-46176-docbook.org.ns.docbook.functions.equal-lengths,2" class="instruction function elsewhere"><div class="title"><span class="link"></span>Function f:equal-lengths($a as map(*)?, $b as map(*)?) as xs:boolean</div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-51480-docbook.org.ns.docbook.templates.private.process-object">tp:process-object</a></div><div class="used-in"><span class="marker" title="Only used in one other module">☝</span>Used in: <a href="#S-51480">modules/objects.xsl</a></div></div></div><div id="S-46176-docbook.org.ns.docbook.functions.make-length,1" class="instruction function unused"><div class="title"><span class="link"></span>Function f:make-length#1($relative as xs:double) as map(*)</div><div class="props"><div class="used-by"><span class="marker">☞</span><span class="unused">Unused</span></div></div></div><div id="S-46176-docbook.org.ns.docbook.functions.make-length,2" class="instruction function elsewhere"><div class="title"><span class="link"></span>Function f:make-length#2($magnitude as xs:double, $unit as xs:string) as map(*)</div><div class="props"><div class="calls">Calls: <a href="#S-51480-docbook.org.ns.docbook.functions.object-contentheight,2">f:object-contentheight()</a>, <a href="#S-51480-docbook.org.ns.docbook.functions.object-contentwidth,2">f:object-contentwidth()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-51480-docbook.org.ns.docbook.functions.object-contentheight,2">f:object-contentheight()</a>, <a href="#S-51480-docbook.org.ns.docbook.functions.object-contentwidth,2">f:object-contentwidth()</a>, <a href="#S-51480-docbook.org.ns.docbook.templates.private.process-object">tp:process-object</a></div><div class="used-in"><span class="marker" title="Only used in one other module">☝</span>Used in: <a href="#S-51480">modules/objects.xsl</a></div></div></div><div id="S-46176-docbook.org.ns.docbook.functions.make-length,3" class="instruction function"><div class="title"><span class="link"></span>Function f:make-length#3($relative as xs:double, $magnitude as xs:double, $unit as xs:string) as map(*)</div><div class="props"><div class="calls">Calls: <a href="#S-46176-docbook.org.ns.docbook.functions.make-length,2">f:make-length()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-46176-docbook.org.ns.docbook.functions.make-length,2">f:make-length()</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-46176">modules/units.xsl</a></div></div></div><div id="S-46176-docbook.org.ns.docbook.functions.length-string,1" class="instruction function elsewhere"><div class="title"><span class="link"></span>Function f:length-string($length as map(*)?) as xs:string?</div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-51480-docbook.org.ns.docbook.templates.private.process-object">tp:process-object</a></div><div class="used-in"><span class="marker" title="Only used in one other module">☝</span>Used in: <a href="#S-51480">modules/objects.xsl</a></div></div></div></div></div><div class="source-code"><div class="title closed">Source code</div><div class="body"><div><table><tr><td valign="top" align="right"><pre class="fake-prism"><span id="line-S-46176-1">1</span>
<span id="line-S-46176-2"><span class="lno">2</span></span>
<span id="line-S-46176-3"><span class="lno">3</span></span>
<span id="line-S-46176-4"><span class="lno">4</span></span>
<span id="line-S-46176-5">5</span>
<span id="line-S-46176-6"><span class="lno">6</span></span>
<span id="line-S-46176-7"><span class="lno">7</span></span>
<span id="line-S-46176-8"><span class="lno">8</span></span>
<span id="line-S-46176-9"><span class="lno">9</span></span>
<span id="line-S-46176-10">10</span>
<span id="line-S-46176-11"><span class="lno">11</span></span>
<span id="line-S-46176-12"><span class="lno">12</span></span>
<span id="line-S-46176-13"><span class="lno">13</span></span>
<span id="line-S-46176-14"><span class="lno">14</span></span>
<span id="line-S-46176-15">15</span>
<span id="line-S-46176-16"><span class="lno">16</span></span>
<span id="line-S-46176-17"><span class="lno">17</span></span>
<span id="line-S-46176-18"><span class="lno">18</span></span>
<span id="line-S-46176-19"><span class="lno">19</span></span>
<span id="line-S-46176-20">20</span>
<span id="line-S-46176-21"><span class="lno">21</span></span>
<span id="line-S-46176-22"><span class="lno">22</span></span>
<span id="line-S-46176-23"><span class="lno">23</span></span>
<span id="line-S-46176-24"><span class="lno">24</span></span>
<span id="line-S-46176-25">25</span>
<span id="line-S-46176-26"><span class="lno">26</span></span>
<span id="line-S-46176-27"><span class="lno">27</span></span>
<span id="line-S-46176-28"><span class="lno">28</span></span>
<span id="line-S-46176-29"><span class="lno">29</span></span>
<span id="line-S-46176-30">30</span>
<span id="line-S-46176-31"><span class="lno">31</span></span>
<span id="line-S-46176-32"><span class="lno">32</span></span>
<span id="line-S-46176-33"><span class="lno">33</span></span>
<span id="line-S-46176-34"><span class="lno">34</span></span>
<span id="line-S-46176-35">35</span>
<span id="line-S-46176-36"><span class="lno">36</span></span>
<span id="line-S-46176-37"><span class="lno">37</span></span>
<span id="line-S-46176-38"><span class="lno">38</span></span>
<span id="line-S-46176-39"><span class="lno">39</span></span>
<span id="line-S-46176-40">40</span>
<span id="line-S-46176-41"><span class="lno">41</span></span>
<span id="line-S-46176-42"><span class="lno">42</span></span>
<span id="line-S-46176-43"><span class="lno">43</span></span>
<span id="line-S-46176-44"><span class="lno">44</span></span>
<span id="line-S-46176-45">45</span>
<span id="line-S-46176-46"><span class="lno">46</span></span>
<span id="line-S-46176-47"><span class="lno">47</span></span>
<span id="line-S-46176-48"><span class="lno">48</span></span>
<span id="line-S-46176-49"><span class="lno">49</span></span>
<span id="line-S-46176-50">50</span>
<span id="line-S-46176-51"><span class="lno">51</span></span>
<span id="line-S-46176-52"><span class="lno">52</span></span>
<span id="line-S-46176-53"><span class="lno">53</span></span>
<span id="line-S-46176-54"><span class="lno">54</span></span>
<span id="line-S-46176-55">55</span>
<span id="line-S-46176-56"><span class="lno">56</span></span>
<span id="line-S-46176-57"><span class="lno">57</span></span>
<span id="line-S-46176-58"><span class="lno">58</span></span>
<span id="line-S-46176-59"><span class="lno">59</span></span>
<span id="line-S-46176-60">60</span>
<span id="line-S-46176-61"><span class="lno">61</span></span>
<span id="line-S-46176-62"><span class="lno">62</span></span>
<span id="line-S-46176-63"><span class="lno">63</span></span>
<span id="line-S-46176-64"><span class="lno">64</span></span>
<span id="line-S-46176-65">65</span>
<span id="line-S-46176-66"><span class="lno">66</span></span>
<span id="line-S-46176-67"><span class="lno">67</span></span>
<span id="line-S-46176-68"><span class="lno">68</span></span>
<span id="line-S-46176-69"><span class="lno">69</span></span>
<span id="line-S-46176-70">70</span>
<span id="line-S-46176-71"><span class="lno">71</span></span>
<span id="line-S-46176-72"><span class="lno">72</span></span>
<span id="line-S-46176-73"><span class="lno">73</span></span>
<span id="line-S-46176-74"><span class="lno">74</span></span>
<span id="line-S-46176-75">75</span>
<span id="line-S-46176-76"><span class="lno">76</span></span>
<span id="line-S-46176-77"><span class="lno">77</span></span>
<span id="line-S-46176-78"><span class="lno">78</span></span>
<span id="line-S-46176-79"><span class="lno">79</span></span>
<span id="line-S-46176-80">80</span>
<span id="line-S-46176-81"><span class="lno">81</span></span>
<span id="line-S-46176-82"><span class="lno">82</span></span>
<span id="line-S-46176-83"><span class="lno">83</span></span>
<span id="line-S-46176-84"><span class="lno">84</span></span>
<span id="line-S-46176-85">85</span>
<span id="line-S-46176-86"><span class="lno">86</span></span>
<span id="line-S-46176-87"><span class="lno">87</span></span>
<span id="line-S-46176-88"><span class="lno">88</span></span>
<span id="line-S-46176-89"><span class="lno">89</span></span>
<span id="line-S-46176-90">90</span>
<span id="line-S-46176-91"><span class="lno">91</span></span>
<span id="line-S-46176-92"><span class="lno">92</span></span>
<span id="line-S-46176-93"><span class="lno">93</span></span>
<span id="line-S-46176-94"><span class="lno">94</span></span>
<span id="line-S-46176-95">95</span>
<span id="line-S-46176-96"><span class="lno">96</span></span>
<span id="line-S-46176-97"><span class="lno">97</span></span>
<span id="line-S-46176-98"><span class="lno">98</span></span>
<span id="line-S-46176-99"><span class="lno">99</span></span>
<span id="line-S-46176-100">100</span>
<span id="line-S-46176-101"><span class="lno">101</span></span>
<span id="line-S-46176-102"><span class="lno">102</span></span>
<span id="line-S-46176-103"><span class="lno">103</span></span>
<span id="line-S-46176-104"><span class="lno">104</span></span>
<span id="line-S-46176-105">105</span>
<span id="line-S-46176-106"><span class="lno">106</span></span>
<span id="line-S-46176-107"><span class="lno">107</span></span>
<span id="line-S-46176-108"><span class="lno">108</span></span>
<span id="line-S-46176-109"><span class="lno">109</span></span>
<span id="line-S-46176-110">110</span>
<span id="line-S-46176-111"><span class="lno">111</span></span>
<span id="line-S-46176-112"><span class="lno">112</span></span>
<span id="line-S-46176-113"><span class="lno">113</span></span>
<span id="line-S-46176-114"><span class="lno">114</span></span>
<span id="line-S-46176-115">115</span>
<span id="line-S-46176-116"><span class="lno">116</span></span>
<span id="line-S-46176-117"><span class="lno">117</span></span>
<span id="line-S-46176-118"><span class="lno">118</span></span>
<span id="line-S-46176-119"><span class="lno">119</span></span>
<span id="line-S-46176-120">120</span>
<span id="line-S-46176-121"><span class="lno">121</span></span>
<span id="line-S-46176-122"><span class="lno">122</span></span>
<span id="line-S-46176-123"><span class="lno">123</span></span>
<span id="line-S-46176-124"><span class="lno">124</span></span>
<span id="line-S-46176-125">125</span>
<span id="line-S-46176-126"><span class="lno">126</span></span>
<span id="line-S-46176-127"><span class="lno">127</span></span>
<span id="line-S-46176-128"><span class="lno">128</span></span>
<span id="line-S-46176-129"><span class="lno">129</span></span>
<span id="line-S-46176-130">130</span>
<span id="line-S-46176-131"><span class="lno">131</span></span>
<span id="line-S-46176-132"><span class="lno">132</span></span>
<span id="line-S-46176-133"><span class="lno">133</span></span>
<span id="line-S-46176-134"><span class="lno">134</span></span>
<span id="line-S-46176-135">135</span>
<span id="line-S-46176-136"><span class="lno">136</span></span>
<span id="line-S-46176-137"><span class="lno">137</span></span>
<span id="line-S-46176-138"><span class="lno">138</span></span>
<span id="line-S-46176-139"><span class="lno">139</span></span>
<span id="line-S-46176-140">140</span>
<span id="line-S-46176-141"><span class="lno">141</span></span>
<span id="line-S-46176-142"><span class="lno">142</span></span>
<span id="line-S-46176-143"><span class="lno">143</span></span>
<span id="line-S-46176-144"><span class="lno">144</span></span>
<span id="line-S-46176-145">145</span>
<span id="line-S-46176-146"><span class="lno">146</span></span>
<span id="line-S-46176-147"><span class="lno">147</span></span>
<span id="line-S-46176-148"><span class="lno">148</span></span>
<span id="line-S-46176-149"><span class="lno">149</span></span>
<span id="line-S-46176-150">150</span>
<span id="line-S-46176-151"><span class="lno">151</span></span>
<span id="line-S-46176-152"><span class="lno">152</span></span>
<span id="line-S-46176-153"><span class="lno">153</span></span>
<span id="line-S-46176-154"><span class="lno">154</span></span>
<span id="line-S-46176-155">155</span>
<span id="line-S-46176-156"><span class="lno">156</span></span>
<span id="line-S-46176-157"><span class="lno">157</span></span>
<span id="line-S-46176-158"><span class="lno">158</span></span>
<span id="line-S-46176-159"><span class="lno">159</span></span>
<span id="line-S-46176-160">160</span>
<span id="line-S-46176-161"><span class="lno">161</span></span>
<span id="line-S-46176-162"><span class="lno">162</span></span>
<span id="line-S-46176-163"><span class="lno">163</span></span>
<span id="line-S-46176-164"><span class="lno">164</span></span>
<span id="line-S-46176-165">165</span>
<span id="line-S-46176-166"><span class="lno">166</span></span>
<span id="line-S-46176-167"><span class="lno">167</span></span>
<span id="line-S-46176-168"><span class="lno">168</span></span>
<span id="line-S-46176-169"><span class="lno">169</span></span>
<span id="line-S-46176-170">170</span>
<span id="line-S-46176-171"><span class="lno">171</span></span>
<span id="line-S-46176-172"><span class="lno">172</span></span>
<span id="line-S-46176-173"><span class="lno">173</span></span>
<span id="line-S-46176-174"><span class="lno">174</span></span>
<span id="line-S-46176-175">175</span>
<span id="line-S-46176-176"><span class="lno">176</span></span>
<span id="line-S-46176-177"><span class="lno">177</span></span>
<span id="line-S-46176-178"><span class="lno">178</span></span>
<span id="line-S-46176-179"><span class="lno">179</span></span>
<span id="line-S-46176-180">180</span>
<span id="line-S-46176-181"><span class="lno">181</span></span>
<span id="line-S-46176-182"><span class="lno">182</span></span>
<span id="line-S-46176-183"><span class="lno">183</span></span>
<span id="line-S-46176-184"><span class="lno">184</span></span>
<span id="line-S-46176-185">185</span>
<span id="line-S-46176-186"><span class="lno">186</span></span>
<span id="line-S-46176-187"><span class="lno">187</span></span>
<span id="line-S-46176-188"><span class="lno">188</span></span>
<span id="line-S-46176-189"><span class="lno">189</span></span>
<span id="line-S-46176-190">190</span>
<span id="line-S-46176-191"><span class="lno">191</span></span>
<span id="line-S-46176-192"><span class="lno">192</span></span>
<span id="line-S-46176-193"><span class="lno">193</span></span>
<span id="line-S-46176-194"><span class="lno">194</span></span>
</pre></td><td valign="top"><pre><code class="language-xml">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                xmlns:db="http://docbook.org/ns/docbook"
                xmlns:f="http://docbook.org/ns/docbook/functions"
                xmlns:v="http://docbook.org/ns/docbook/variables"
                xmlns:vp="http://docbook.org/ns/docbook/variables/private"
                xmlns:m="http://docbook.org/ns/docbook/modes"
                xmlns:map="http://www.w3.org/2005/xpath-functions/map"
                xmlns:xs="http://www.w3.org/2001/XMLSchema"
                xmlns="http://www.w3.org/1999/xhtml"
                default-mode="m:docbook"
                exclude-result-prefixes="db f m map v vp xs"
                version="3.0"&gt;

&lt;xsl:variable name="v:unit-scale" as="map(*)"&gt;
  &lt;xsl:map&gt;
    &lt;xsl:map-entry key="'px'" select="1.0"/&gt;
    &lt;xsl:map-entry key="'in'" select="$pixels-per-inch"/&gt;
    &lt;xsl:map-entry key="'m'" select="$pixels-per-inch div 2.54 * 100.0"/&gt;
    &lt;xsl:map-entry key="'cm'" select="$pixels-per-inch div 2.54"/&gt;
    &lt;xsl:map-entry key="'mm'" select="$pixels-per-inch div 25.4"/&gt;
    &lt;xsl:map-entry key="'pt'" select="$pixels-per-inch div 72.0"/&gt;
    &lt;xsl:map-entry key="'pc'" select="$pixels-per-inch div 6.0"/&gt;
    &lt;xsl:map-entry key="'em'" select="$pixels-per-inch div 6.0"/&gt;
    &lt;xsl:map-entry key="'barleycorn'" select="$pixels-per-inch div 3.0"/&gt;
  &lt;/xsl:map&gt;
&lt;/xsl:variable&gt;

&lt;xsl:variable name="vp:length-regex" select="'^(\d+(\.\d+)?)\s*(\S+)?$'"/&gt;
&lt;xsl:variable name="vp:percent-regex" select="'^(\d+(\.\d+)?)\s*%$'"/&gt;
&lt;xsl:variable name="vp:relative-regex" select="'^(\d+(\.\d+)?)\s*\*(\s*\+\s*(.*))?$'"/&gt;

&lt;xsl:function name="f:parse-length" as="map(*)"&gt;
  &lt;xsl:param name="length" as="xs:string"/&gt;

  &lt;!--
  &lt;xsl:variable name="x" select="'3*+0.25pt'"/&gt;
  &lt;xsl:message select="'matches: ' || $x, matches($x, $vp:relative-regex)"/&gt;
  &lt;xsl:message select="'matches: ', $vp:relative-regex"/&gt;
  &lt;xsl:message select="'matches: ' || $x,
                       matches($x, '^(\d+(\.\d+)?)\s*\*\s*(\+\s*(.*)$)')"/&gt;
  --&gt;

  &lt;xsl:variable name="length" select="normalize-space($length)"/&gt;

  &lt;xsl:variable name="parsed"
                select="if (matches($length, $vp:relative-regex))
                        then map { 'relative':
                                    xs:decimal(replace($length, $vp:relative-regex, '$1'))
                                 }
                        else map { 'relative': 0.0 }"/&gt;

  &lt;xsl:variable name="length"
                select="if (matches($length, $vp:relative-regex))
                        then replace($length, $vp:relative-regex, '$4')
                        else $length"/&gt;

  &lt;xsl:choose&gt;
    &lt;xsl:when test="$parsed?relative and $length = ''"&gt;
      &lt;xsl:sequence select="map:put($parsed, 'magnitude', 0)
                            =&gt; map:put('unit', 'px')"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="matches($length, $vp:length-regex)"&gt;
      &lt;xsl:variable name="mag"
                    select="xs:double(replace($length, $vp:length-regex, '$1'))"/&gt;
      &lt;xsl:variable name="unit"
                    select="replace($length, $vp:length-regex, '$3')"/&gt;
      &lt;xsl:variable name="unit"
                    select="if ($unit = '')
                            then 'px'
                            else $unit"/&gt;

      &lt;xsl:choose&gt;
        &lt;xsl:when test="map:contains($v:unit-scale, $unit) or $unit = '%'"&gt;
          &lt;xsl:sequence select="map:put($parsed, 'magnitude', $mag)
                                =&gt; map:put('unit', $unit)"/&gt;
        &lt;/xsl:when&gt;
        &lt;xsl:otherwise&gt;
          &lt;xsl:message expand-text="yes"
                       &gt;Unrecognized unit {$unit}, using default length&lt;/xsl:message&gt;
          &lt;xsl:sequence select="map:put($parsed, 'magnitude', $default-length-magnitude)
                                =&gt; map:put('unit', $default-length-unit)"/&gt;
        &lt;/xsl:otherwise&gt;
      &lt;/xsl:choose&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:message expand-text="yes"
                   &gt;Unparsable length {$length}, using default length&lt;/xsl:message&gt;
      &lt;xsl:sequence select="map:put($parsed, 'magnitude', $default-length-magnitude)
                            =&gt; map:put('unit', $default-length-unit)"/&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="f:length-units" as="xs:string?"&gt;
  &lt;xsl:param name="length" as="xs:string?"/&gt;
  &lt;xsl:sequence select="if (exists($length))
                        then f:parse-length($length)?unit
                        else ()"/&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="f:absolute-length" as="xs:double"&gt;
  &lt;xsl:param name="length" as="map(*)"/&gt;
  &lt;xsl:choose&gt;
    &lt;xsl:when test="exists($length?magnitude) and exists($length?unit)
                    and map:contains($v:unit-scale, $length?unit)"&gt;
      &lt;xsl:sequence select="round($length?magnitude * map:get($v:unit-scale, $length?unit))"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;!-- this should never happen, but ... --&gt;
      &lt;xsl:message&gt;
        &lt;xsl:text&gt;Invalid length (&lt;/xsl:text&gt;
        &lt;xsl:value-of select="concat($length?magnitude, $length?unit)"/&gt;
        &lt;xsl:text&gt;), returning 0 for absolute-length&lt;/xsl:text&gt;
      &lt;/xsl:message&gt;
      &lt;xsl:sequence select="0"/&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="f:relative-length" as="xs:double"&gt;
  &lt;xsl:param name="length" as="map(*)"/&gt;
  &lt;xsl:sequence select="if ($length?relative)
                        then $length?relative
                        else 0.0"/&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="f:empty-length" as="map(*)"&gt;
  &lt;xsl:sequence select="map { }"/&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="f:is-empty-length" as="xs:boolean"&gt;
  &lt;xsl:param name="length" as="map(*)?"/&gt;
  &lt;xsl:sequence select="empty($length)
                        or (not($length?relative) and not($length?magnitude))"/&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="f:equal-lengths" as="xs:boolean"&gt;
  &lt;xsl:param name="a" as="map(*)?"/&gt;
  &lt;xsl:param name="b" as="map(*)?"/&gt;
  &lt;xsl:choose&gt;
    &lt;xsl:when test="f:is-empty-length($a) and f:is-empty-length($b)"&gt;
      &lt;xsl:sequence select="true()"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="f:is-empty-length($a) and not(f:is-empty-length($b))
                    or f:is-empty-length($b) and not(f:is-empty-length($a))"&gt;
      &lt;xsl:sequence select="false()"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:sequence select="$a?relative eq $b?relative
                            and $a?magnitude eq $b?magnitude
                            and $a?unit eq $b?unit"/&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="f:make-length" as="map(*)"&gt;
  &lt;xsl:param name="relative" as="xs:double"/&gt;
  &lt;xsl:sequence select="map {
    'relative': $relative
    }"/&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="f:make-length" as="map(*)"&gt;
  &lt;xsl:param name="magnitude" as="xs:double"/&gt;
  &lt;xsl:param name="unit" as="xs:string"/&gt;
  &lt;xsl:sequence select="f:make-length(0.0, $magnitude, $unit)"/&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="f:make-length" as="map(*)"&gt;
  &lt;xsl:param name="relative" as="xs:double"/&gt;
  &lt;xsl:param name="magnitude" as="xs:double"/&gt;
  &lt;xsl:param name="unit" as="xs:string"/&gt;
  &lt;xsl:sequence select="map {
    'relative': 0.0,
    'magnitude': $magnitude,
    'unit': $unit
    }"/&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="f:length-string" as="xs:string?"&gt;
  &lt;xsl:param name="length" as="map(*)?"/&gt;
  &lt;xsl:if test="exists($length)"&gt;
    &lt;xsl:variable name="rel"
                  select="if ($length?relative and $length?relative != 0.0)
                          then concat($length?relative, '*')
                          else ''"/&gt;
    &lt;xsl:sequence select="$rel || $length?magnitude || $length?unit"/&gt;
  &lt;/xsl:if&gt;
&lt;/xsl:function&gt;

&lt;/xsl:stylesheet&gt;

</code></pre></td></tr></table></div></div></div></div><div class="stylesheet" id="S-38820"><h3>shared.xsl</h3><p><span><span class="function all">4 functions</span> (<span class="function unused">3 unused</span>)</span>, <span><span class="variable all">1 variable</span> (<span class="variable unused">1 unused</span>)</span>, <span><span class="param all">2 params</span></span></p><div class="instructions"><div class="title closed">Instructions</div><div class="body"><div id="S-38820-..generated-id-root" class="instruction param"><div class="title"><span class="link"></span>Param <code>$generated-id-root</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-28936-docbook.org.ns.docbook.functions.generate-id,1">f:generate-id()</a>, <a href="#S-38820-docbook.org.ns.docbook.functions.generate-id,2">f:generate-id()</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-38820">modules/shared.xsl</a>, <a href="#S-28936">modules/functions.xsl</a></div></div></div><div id="S-38820-..generated-id-sep" class="instruction param"><div class="title"><span class="link"></span>Param <code>$generated-id-sep</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-28936-docbook.org.ns.docbook.functions.generate-id,1">f:generate-id()</a>, <a href="#S-38820-docbook.org.ns.docbook.functions.generate-id,2">f:generate-id()</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-38820">modules/shared.xsl</a>, <a href="#S-28936">modules/functions.xsl</a></div></div></div><div id="S-38820-docbook.org.ns.docbook.variables.private.gidmap" class="instruction variable unused"><div class="title"><span class="link"></span>Variable <code>$vp:gidmap</code></div><div class="props"><div class="used-by"><span class="marker">☞</span><span class="unused">Unused</span></div></div></div><div id="S-38820-docbook.org.ns.docbook.functions.generate-id,1" class="instruction function unused"><div class="title"><span class="link"></span>Function f:generate-id#1($node as element()) as xs:string</div><div class="props"><div class="used-by"><span class="marker">☞</span><span class="unused">Unused</span></div></div></div><div id="S-38820-docbook.org.ns.docbook.functions.generate-id,2" class="instruction function"><div class="title"><span class="link"></span>Function f:generate-id#2($node as element(), $use-xml-id as xs:boolean) as xs:string <span class="recursive" title="Recursive function">♻</span></div><div class="props"><div class="uses">Uses: <a href="#S-28936-docbook.org.ns.docbook.variables.private.gidmap">$vp:gidmap</a>, <a href="#S-38820-..generated-id-root">$generated-id-root</a>, <a href="#S-38820-..generated-id-sep">$generated-id-sep</a></div><div class="calls">Calls: <a href="#S-38820-docbook.org.ns.docbook.functions.generate-id,1">f:generate-id()</a>, <a href="#S-38820-docbook.org.ns.docbook.functions.unique-id,1">f:unique-id()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-38820-docbook.org.ns.docbook.functions.generate-id,1">f:generate-id()</a>, <a href="#S-38820-docbook.org.ns.docbook.functions.generate-id,2">f:generate-id()</a>, <a href="#S-38820-docbook.org.ns.docbook.functions.unique-id,1">f:unique-id()</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-38820">modules/shared.xsl</a></div></div></div><div id="S-38820-docbook.org.ns.docbook.functions.id,1" class="instruction function unused"><div class="title"><span class="link"></span>Function f:id#1($node as element()) as xs:string</div><div class="props"><div class="used-by"><span class="marker">☞</span><span class="unused">Unused</span></div></div></div><div id="S-38820-docbook.org.ns.docbook.functions.unique-id,1" class="instruction function unused"><div class="title"><span class="link"></span>Function f:unique-id($node as element()) as xs:string</div><div class="props"><div class="used-by"><span class="marker">☞</span><span class="unused">Unused</span></div></div></div></div></div><div class="source-code"><div class="title closed">Source code</div><div class="body"><div><table><tr><td valign="top" align="right"><pre class="fake-prism"><span id="line-S-38820-1">1</span>
<span id="line-S-38820-2"><span class="lno">2</span></span>
<span id="line-S-38820-3"><span class="lno">3</span></span>
<span id="line-S-38820-4"><span class="lno">4</span></span>
<span id="line-S-38820-5">5</span>
<span id="line-S-38820-6"><span class="lno">6</span></span>
<span id="line-S-38820-7"><span class="lno">7</span></span>
<span id="line-S-38820-8"><span class="lno">8</span></span>
<span id="line-S-38820-9"><span class="lno">9</span></span>
<span id="line-S-38820-10">10</span>
<span id="line-S-38820-11"><span class="lno">11</span></span>
<span id="line-S-38820-12"><span class="lno">12</span></span>
<span id="line-S-38820-13"><span class="lno">13</span></span>
<span id="line-S-38820-14"><span class="lno">14</span></span>
<span id="line-S-38820-15">15</span>
<span id="line-S-38820-16"><span class="lno">16</span></span>
<span id="line-S-38820-17"><span class="lno">17</span></span>
<span id="line-S-38820-18"><span class="lno">18</span></span>
<span id="line-S-38820-19"><span class="lno">19</span></span>
<span id="line-S-38820-20">20</span>
<span id="line-S-38820-21"><span class="lno">21</span></span>
<span id="line-S-38820-22"><span class="lno">22</span></span>
<span id="line-S-38820-23"><span class="lno">23</span></span>
<span id="line-S-38820-24"><span class="lno">24</span></span>
<span id="line-S-38820-25">25</span>
<span id="line-S-38820-26"><span class="lno">26</span></span>
<span id="line-S-38820-27"><span class="lno">27</span></span>
<span id="line-S-38820-28"><span class="lno">28</span></span>
<span id="line-S-38820-29"><span class="lno">29</span></span>
<span id="line-S-38820-30">30</span>
<span id="line-S-38820-31"><span class="lno">31</span></span>
<span id="line-S-38820-32"><span class="lno">32</span></span>
<span id="line-S-38820-33"><span class="lno">33</span></span>
<span id="line-S-38820-34"><span class="lno">34</span></span>
<span id="line-S-38820-35">35</span>
<span id="line-S-38820-36"><span class="lno">36</span></span>
<span id="line-S-38820-37"><span class="lno">37</span></span>
<span id="line-S-38820-38"><span class="lno">38</span></span>
<span id="line-S-38820-39"><span class="lno">39</span></span>
<span id="line-S-38820-40">40</span>
<span id="line-S-38820-41"><span class="lno">41</span></span>
<span id="line-S-38820-42"><span class="lno">42</span></span>
<span id="line-S-38820-43"><span class="lno">43</span></span>
<span id="line-S-38820-44"><span class="lno">44</span></span>
<span id="line-S-38820-45">45</span>
<span id="line-S-38820-46"><span class="lno">46</span></span>
<span id="line-S-38820-47"><span class="lno">47</span></span>
<span id="line-S-38820-48"><span class="lno">48</span></span>
<span id="line-S-38820-49"><span class="lno">49</span></span>
<span id="line-S-38820-50">50</span>
<span id="line-S-38820-51"><span class="lno">51</span></span>
<span id="line-S-38820-52"><span class="lno">52</span></span>
<span id="line-S-38820-53"><span class="lno">53</span></span>
<span id="line-S-38820-54"><span class="lno">54</span></span>
<span id="line-S-38820-55">55</span>
<span id="line-S-38820-56"><span class="lno">56</span></span>
<span id="line-S-38820-57"><span class="lno">57</span></span>
<span id="line-S-38820-58"><span class="lno">58</span></span>
<span id="line-S-38820-59"><span class="lno">59</span></span>
<span id="line-S-38820-60">60</span>
<span id="line-S-38820-61"><span class="lno">61</span></span>
<span id="line-S-38820-62"><span class="lno">62</span></span>
<span id="line-S-38820-63"><span class="lno">63</span></span>
<span id="line-S-38820-64"><span class="lno">64</span></span>
<span id="line-S-38820-65">65</span>
<span id="line-S-38820-66"><span class="lno">66</span></span>
<span id="line-S-38820-67"><span class="lno">67</span></span>
<span id="line-S-38820-68"><span class="lno">68</span></span>
<span id="line-S-38820-69"><span class="lno">69</span></span>
<span id="line-S-38820-70">70</span>
<span id="line-S-38820-71"><span class="lno">71</span></span>
<span id="line-S-38820-72"><span class="lno">72</span></span>
<span id="line-S-38820-73"><span class="lno">73</span></span>
<span id="line-S-38820-74"><span class="lno">74</span></span>
<span id="line-S-38820-75">75</span>
<span id="line-S-38820-76"><span class="lno">76</span></span>
<span id="line-S-38820-77"><span class="lno">77</span></span>
<span id="line-S-38820-78"><span class="lno">78</span></span>
<span id="line-S-38820-79"><span class="lno">79</span></span>
<span id="line-S-38820-80">80</span>
<span id="line-S-38820-81"><span class="lno">81</span></span>
<span id="line-S-38820-82"><span class="lno">82</span></span>
<span id="line-S-38820-83"><span class="lno">83</span></span>
<span id="line-S-38820-84"><span class="lno">84</span></span>
<span id="line-S-38820-85">85</span>
<span id="line-S-38820-86"><span class="lno">86</span></span>
<span id="line-S-38820-87"><span class="lno">87</span></span>
<span id="line-S-38820-88"><span class="lno">88</span></span>
<span id="line-S-38820-89"><span class="lno">89</span></span>
<span id="line-S-38820-90">90</span>
<span id="line-S-38820-91"><span class="lno">91</span></span>
<span id="line-S-38820-92"><span class="lno">92</span></span>
<span id="line-S-38820-93"><span class="lno">93</span></span>
</pre></td><td valign="top"><pre><code class="language-xml">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                xmlns:db="http://docbook.org/ns/docbook"
                xmlns:f="http://docbook.org/ns/docbook/functions"
                xmlns:m="http://docbook.org/ns/docbook/modes"
                xmlns:map="http://www.w3.org/2005/xpath-functions/map"
                xmlns:vp="http://docbook.org/ns/docbook/variables/private"
                xmlns:xs="http://www.w3.org/2001/XMLSchema"
                xmlns="http://www.w3.org/1999/xhtml"
                default-mode="m:docbook"
                exclude-result-prefixes="db f m map vp xs"
                version="3.0"&gt;

&lt;xsl:param name="generated-id-root" select="'R'"/&gt;
&lt;!-- Historically, this was ".", but if you do that, you can't find
     elements by ID using JavaScript querySelector because "." is
     a separator in CSS. --&gt;
&lt;xsl:param name="generated-id-sep" select="'_'"/&gt;

&lt;xsl:variable name="vp:gidmap" select="map {
  'acknowledgements': 'ack',
  'appendix': 'ap',
  'book': 'bo',
  'chapter': 'ch',
  'colophon': 'co',
  'dedication': 'ded',
  'equation': 'eq',
  'example': 'ex',
  'figure': 'fig',
  'part': 'part',
  'preface': 'p',
  'procedure': 'proc',
  'refentry': 're',
  'reference': 'ref',
  'refsect1': 'rs1',
  'refsect2': 'rs2',
  'refsect3': 'rs3',
  'sect1': 's1_',
  'sect2': 's2_',
  'sect3': 's3_',
  'sect4': 's4_',
  'sect5': 's5_',
  'section': 's',
  'table': 'tab',
  'glossary': 'g',
  'glossdiv': 'gd',
  'glossentry': 'ge',
  'glossterm': 'gt',
  'bibliography': 'bi',
  'bibliodiv': 'bd'
  }"/&gt;

&lt;xsl:function name="f:generate-id" as="xs:string" cache="yes"&gt;
  &lt;xsl:param name="node" as="element()"/&gt;
  &lt;xsl:sequence select="f:generate-id($node, true())"/&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="f:generate-id" as="xs:string" cache="yes"&gt;
  &lt;xsl:param name="node" as="element()"/&gt;
  &lt;xsl:param name="use-xml-id" as="xs:boolean"/&gt;
  &lt;xsl:choose&gt;
    &lt;xsl:when test="$use-xml-id and $node/@xml:id"&gt;
      &lt;xsl:sequence select="$node/@xml:id/string()"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="empty($node/parent::*)"&gt;
      &lt;xsl:sequence select="$generated-id-root"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:variable name="aid" select="f:generate-id($node/parent::*, $use-xml-id)"/&gt;
      &lt;xsl:variable name="type" select="(map:get($vp:gidmap, local-name($node)),
                                         local-name($node))[1]"/&gt;
      &lt;xsl:variable name="prec"
                    select="$node/preceding-sibling::*[node-name(.)=node-name($node)]"/&gt;
      &lt;xsl:sequence
          select="$aid || $generated-id-sep || $type || string(count($prec)+1)"/&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="f:id" as="xs:string" cache="yes"&gt;
  &lt;xsl:param name="node" as="element()"/&gt;
  &lt;xsl:sequence select="if ($node/@xml:id)
                        then $node/@xml:id
                        else f:generate-id($node)"/&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="f:unique-id" as="xs:string" cache="yes"&gt;
  &lt;xsl:param name="node" as="element()"/&gt;
  &lt;xsl:sequence select="f:generate-id($node, false())"/&gt;
&lt;/xsl:function&gt;

&lt;/xsl:stylesheet&gt;
</code></pre></td></tr></table></div></div></div></div><div class="stylesheet" id="S-22317"><h3>gentext.xsl</h3><p><span><span class="function all">8 functions</span></span>, <span><span class="variable all">2 variables</span></span>, <span><span class="param all">1 param</span></span></p><div class="instructions"><div class="title closed">Instructions</div><div class="body"><div id="S-22317-..default-language" class="instruction param"><div class="title"><span class="link"></span>Param <code>$default-language</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-22317-docbook.org.ns.docbook.functions.private.existing-localization,1">fp:existing-localization()</a>, <a href="#S-28936-docbook.org.ns.docbook.functions.l10n-language,1">f:l10n-language()</a>, <a href="#S-22317-docbook.org.ns.docbook.functions.language,1">f:language()</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-22317">modules/gentext.xsl</a>, <a href="#S-28936">modules/functions.xsl</a></div></div></div><div id="S-22317-docbook.org.ns.docbook.variables.locales" class="instruction variable"><div class="title"><span class="link"></span>Variable <code>$v:locales</code> as <code>xs:string+</code> [static]</div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-22317-docbook.org.ns.docbook.functions.private.load-locales,0">fp:load-locales()</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-22317">modules/gentext.xsl</a></div></div></div><div id="S-22317-docbook.org.ns.docbook.variables.private.l10n" class="instruction variable"><div class="title"><span class="link"></span>Variable <code>$vp:l10n</code> as <code>map(*)</code></div><div class="props"><div class="calls">Calls: <a href="#S-22317-docbook.org.ns.docbook.functions.private.load-locales,0">fp:load-locales()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-22317-docbook.org.ns.docbook.functions.private.localization,2">fp:localization()</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-22317">modules/gentext.xsl</a></div></div></div><div id="S-22317-docbook.org.ns.docbook.functions.private.load-locales,0" class="instruction function"><div class="title"><span class="link"></span>Function fp:load-locales() as map(*)+</div><div class="props"><div class="uses">Uses: <a href="#S-22317-docbook.org.ns.docbook.variables.locales">$v:locales</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-22317-docbook.org.ns.docbook.variables.private.l10n">$vp:l10n</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-22317">modules/gentext.xsl</a></div></div></div><div id="S-22317-docbook.org.ns.docbook.functions.language,1" class="instruction function"><div class="title"><span class="link"></span>Function f:language($node as node()) as xs:string</div><div class="props"><div class="uses">Uses: <a href="#S-22317-..default-language">$default-language</a></div><div class="calls">Calls: <a href="#S-22317-docbook.org.ns.docbook.functions.private.gentext,4">fp:gentext()</a>, <a href="#S-28936-docbook.org.ns.docbook.functions.gentext-letters,1">f:gentext-letters()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-9504-t-18">template</a>, <a href="#S-22317-docbook.org.ns.docbook.functions.private.gentext,4">fp:gentext()</a>, <a href="#S-28936-docbook.org.ns.docbook.functions.gentext-letters,1">f:gentext-letters()</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-22317">modules/gentext.xsl</a>, <a href="#S-28936">modules/functions.xsl</a>, <a href="#S-9504">modules/inlines.xsl</a></div></div></div><div id="S-22317-docbook.org.ns.docbook.functions.private.localization,1" class="instruction function"><div class="title"><span class="link"></span>Function fp:localization#1($lang as xs:string) as element(l:l10n)?</div><div class="props"><div class="calls">Calls: <a href="#S-22317-docbook.org.ns.docbook.functions.private.existing-localization,1">fp:existing-localization()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-22317-docbook.org.ns.docbook.functions.private.existing-localization,1">fp:existing-localization()</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-22317">modules/gentext.xsl</a></div></div></div><div id="S-22317-docbook.org.ns.docbook.functions.private.localization,2" class="instruction function"><div class="title"><span class="link"></span>Function fp:localization#2($lang as xs:string, $warn as xs:boolean) as element(l:l10n)?</div><div class="props"><div class="uses">Uses: <a href="#S-22317-docbook.org.ns.docbook.variables.private.l10n">$vp:l10n</a></div><div class="calls">Calls: <a href="#S-22317-docbook.org.ns.docbook.functions.private.localization,1">fp:localization()</a>, <a href="#S-28936-docbook.org.ns.docbook.functions.l10n-language,1">f:l10n-language()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-22317-docbook.org.ns.docbook.functions.private.localization,1">fp:localization()</a>, <a href="#S-28936-docbook.org.ns.docbook.functions.l10n-language,1">f:l10n-language()</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-22317">modules/gentext.xsl</a>, <a href="#S-28936">modules/functions.xsl</a></div></div></div><div id="S-22317-docbook.org.ns.docbook.functions.private.existing-localization,1" class="instruction function"><div class="title"><span class="link"></span>Function fp:existing-localization($lang as xs:string) as element(l:l10n)</div><div class="props"><div class="uses">Uses: <a href="#S-22317-..default-language">$default-language</a></div><div class="calls">Calls: <a href="#S-22317-docbook.org.ns.docbook.functions.private.gentext,4">fp:gentext()</a>, <a href="#S-28936-docbook.org.ns.docbook.functions.gentext-letters-for-language,1">f:gentext-letters-for-language()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-22317-docbook.org.ns.docbook.functions.private.gentext,4">fp:gentext()</a>, <a href="#S-28936-docbook.org.ns.docbook.functions.gentext-letters-for-language,1">f:gentext-letters-for-language()</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-22317">modules/gentext.xsl</a>, <a href="#S-28936">modules/functions.xsl</a></div></div></div><div id="S-22317-docbook.org.ns.docbook.functions.gentext,2" class="instruction function"><div class="title"><span class="link"></span>Function f:gentext#2($node as element(), $context as xs:string) as item()*</div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-25794-t-3">template</a>, <a href="#S-18112-t-7">template</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-25794">modules/titles.xsl</a>, <a href="#S-18112">modules/msgset.xsl</a></div></div></div><div id="S-22317-docbook.org.ns.docbook.functions.gentext,3" class="instruction function"><div class="title"><span class="link"></span>Function f:gentext#3($node as element(), $context as xs:string, $key as xs:string) as item()*</div><div class="props"><div class="calls">Calls: <a href="#S-28936-docbook.org.ns.docbook.functions.private.separator,2">fp:separator()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-25794-t-5">template</a>, <a href="#S-25794-t-6">template</a>, <a href="#S-46450-t-15">template</a>, <a href="#S-46450-t-17">template</a>, <a href="#S-46450-t-19">template</a>, <a href="#S-46450-t-21">template</a>, <a href="#S-46450-t-23">template</a>, <a href="#S-10909-t-3">template</a>, <a href="#S-10909-t-8">template</a>, <a href="#S-10909-t-9">template</a>, <a href="#S-28322-t-4">template</a>, <a href="#S-28322-t-5">template</a>, <a href="#S-28322-t-6">template</a>, <a href="#S-58181-t-18">template</a>, <a href="#S-58181-t-19">template</a>, <a href="#S-4845-t-7">template</a>, <a href="#S-33240-t-7">template</a>, <a href="#S-33116-t-9">template</a>, <a href="#S-9504-t-46">template</a>, <a href="#S-58081-t-2">template</a>, <a href="#S-21031-t-4">template</a>, <a href="#S-28936-docbook.org.ns.docbook.functions.private.separator,2">fp:separator()</a>, <a href="#S-29523-docbook.org.ns.docbook.templates.private.out-of-line-xlink">tp:out-of-line-xlink</a>, <a href="#S-46450-docbook.org.ns.docbook.templates.private.toc">tp:toc</a>, <a href="#S-33240-docbook.org.ns.docbook.templates.person-name-list">t:person-name-list</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-25794">modules/titles.xsl</a>, <a href="#S-28936">modules/functions.xsl</a>, <a href="#S-46450">modules/toc.xsl</a>, <a href="#S-10909">modules/refentry.xsl</a>, <a href="#S-28322">modules/glossary.xsl</a>, <a href="#S-58181">modules/index.xsl</a>, <a href="#S-4845">modules/titlepage.xsl</a>, <a href="#S-33240">modules/info.xsl</a>, <a href="#S-33116">modules/lists.xsl</a>, <a href="#S-9504">modules/inlines.xsl</a>, <a href="#S-29523">modules/xlink.xsl</a>, <a href="#S-58081">modules/xref.xsl</a>, <a href="#S-21031">modules/chunk-output.xsl</a></div></div></div><div id="S-22317-docbook.org.ns.docbook.functions.private.gentext,4" class="instruction function"><div class="title"><span class="link"></span>Function fp:gentext($node as element(), $context as xs:string, $key as xs:string, $report-errors as xs:boolean) as item()*</div><div class="props"><div class="calls">Calls: <a href="#S-28936-docbook.org.ns.docbook.functions.check-gentext,3">f:check-gentext()</a>, <a href="#S-22317-docbook.org.ns.docbook.functions.gentext,2">f:gentext()</a>, <a href="#S-22317-docbook.org.ns.docbook.functions.gentext,3">f:gentext()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-28936-docbook.org.ns.docbook.functions.check-gentext,3">f:check-gentext()</a>, <a href="#S-22317-docbook.org.ns.docbook.functions.gentext,2">f:gentext()</a>, <a href="#S-22317-docbook.org.ns.docbook.functions.gentext,3">f:gentext()</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-22317">modules/gentext.xsl</a>, <a href="#S-28936">modules/functions.xsl</a></div></div></div></div></div><div class="source-code"><div class="title closed">Source code</div><div class="body"><div><table><tr><td valign="top" align="right"><pre class="fake-prism"><span id="line-S-22317-1">1</span>
<span id="line-S-22317-2"><span class="lno">2</span></span>
<span id="line-S-22317-3"><span class="lno">3</span></span>
<span id="line-S-22317-4"><span class="lno">4</span></span>
<span id="line-S-22317-5">5</span>
<span id="line-S-22317-6"><span class="lno">6</span></span>
<span id="line-S-22317-7"><span class="lno">7</span></span>
<span id="line-S-22317-8"><span class="lno">8</span></span>
<span id="line-S-22317-9"><span class="lno">9</span></span>
<span id="line-S-22317-10">10</span>
<span id="line-S-22317-11"><span class="lno">11</span></span>
<span id="line-S-22317-12"><span class="lno">12</span></span>
<span id="line-S-22317-13"><span class="lno">13</span></span>
<span id="line-S-22317-14"><span class="lno">14</span></span>
<span id="line-S-22317-15">15</span>
<span id="line-S-22317-16"><span class="lno">16</span></span>
<span id="line-S-22317-17"><span class="lno">17</span></span>
<span id="line-S-22317-18"><span class="lno">18</span></span>
<span id="line-S-22317-19"><span class="lno">19</span></span>
<span id="line-S-22317-20">20</span>
<span id="line-S-22317-21"><span class="lno">21</span></span>
<span id="line-S-22317-22"><span class="lno">22</span></span>
<span id="line-S-22317-23"><span class="lno">23</span></span>
<span id="line-S-22317-24"><span class="lno">24</span></span>
<span id="line-S-22317-25">25</span>
<span id="line-S-22317-26"><span class="lno">26</span></span>
<span id="line-S-22317-27"><span class="lno">27</span></span>
<span id="line-S-22317-28"><span class="lno">28</span></span>
<span id="line-S-22317-29"><span class="lno">29</span></span>
<span id="line-S-22317-30">30</span>
<span id="line-S-22317-31"><span class="lno">31</span></span>
<span id="line-S-22317-32"><span class="lno">32</span></span>
<span id="line-S-22317-33"><span class="lno">33</span></span>
<span id="line-S-22317-34"><span class="lno">34</span></span>
<span id="line-S-22317-35">35</span>
<span id="line-S-22317-36"><span class="lno">36</span></span>
<span id="line-S-22317-37"><span class="lno">37</span></span>
<span id="line-S-22317-38"><span class="lno">38</span></span>
<span id="line-S-22317-39"><span class="lno">39</span></span>
<span id="line-S-22317-40">40</span>
<span id="line-S-22317-41"><span class="lno">41</span></span>
<span id="line-S-22317-42"><span class="lno">42</span></span>
<span id="line-S-22317-43"><span class="lno">43</span></span>
<span id="line-S-22317-44"><span class="lno">44</span></span>
<span id="line-S-22317-45">45</span>
<span id="line-S-22317-46"><span class="lno">46</span></span>
<span id="line-S-22317-47"><span class="lno">47</span></span>
<span id="line-S-22317-48"><span class="lno">48</span></span>
<span id="line-S-22317-49"><span class="lno">49</span></span>
<span id="line-S-22317-50">50</span>
<span id="line-S-22317-51"><span class="lno">51</span></span>
<span id="line-S-22317-52"><span class="lno">52</span></span>
<span id="line-S-22317-53"><span class="lno">53</span></span>
<span id="line-S-22317-54"><span class="lno">54</span></span>
<span id="line-S-22317-55">55</span>
<span id="line-S-22317-56"><span class="lno">56</span></span>
<span id="line-S-22317-57"><span class="lno">57</span></span>
<span id="line-S-22317-58"><span class="lno">58</span></span>
<span id="line-S-22317-59"><span class="lno">59</span></span>
<span id="line-S-22317-60">60</span>
<span id="line-S-22317-61"><span class="lno">61</span></span>
<span id="line-S-22317-62"><span class="lno">62</span></span>
<span id="line-S-22317-63"><span class="lno">63</span></span>
<span id="line-S-22317-64"><span class="lno">64</span></span>
<span id="line-S-22317-65">65</span>
<span id="line-S-22317-66"><span class="lno">66</span></span>
<span id="line-S-22317-67"><span class="lno">67</span></span>
<span id="line-S-22317-68"><span class="lno">68</span></span>
<span id="line-S-22317-69"><span class="lno">69</span></span>
<span id="line-S-22317-70">70</span>
<span id="line-S-22317-71"><span class="lno">71</span></span>
<span id="line-S-22317-72"><span class="lno">72</span></span>
<span id="line-S-22317-73"><span class="lno">73</span></span>
<span id="line-S-22317-74"><span class="lno">74</span></span>
<span id="line-S-22317-75">75</span>
<span id="line-S-22317-76"><span class="lno">76</span></span>
<span id="line-S-22317-77"><span class="lno">77</span></span>
<span id="line-S-22317-78"><span class="lno">78</span></span>
<span id="line-S-22317-79"><span class="lno">79</span></span>
<span id="line-S-22317-80">80</span>
<span id="line-S-22317-81"><span class="lno">81</span></span>
<span id="line-S-22317-82"><span class="lno">82</span></span>
<span id="line-S-22317-83"><span class="lno">83</span></span>
<span id="line-S-22317-84"><span class="lno">84</span></span>
<span id="line-S-22317-85">85</span>
<span id="line-S-22317-86"><span class="lno">86</span></span>
<span id="line-S-22317-87"><span class="lno">87</span></span>
<span id="line-S-22317-88"><span class="lno">88</span></span>
<span id="line-S-22317-89"><span class="lno">89</span></span>
<span id="line-S-22317-90">90</span>
<span id="line-S-22317-91"><span class="lno">91</span></span>
<span id="line-S-22317-92"><span class="lno">92</span></span>
<span id="line-S-22317-93"><span class="lno">93</span></span>
<span id="line-S-22317-94"><span class="lno">94</span></span>
<span id="line-S-22317-95">95</span>
<span id="line-S-22317-96"><span class="lno">96</span></span>
<span id="line-S-22317-97"><span class="lno">97</span></span>
<span id="line-S-22317-98"><span class="lno">98</span></span>
<span id="line-S-22317-99"><span class="lno">99</span></span>
<span id="line-S-22317-100">100</span>
<span id="line-S-22317-101"><span class="lno">101</span></span>
<span id="line-S-22317-102"><span class="lno">102</span></span>
<span id="line-S-22317-103"><span class="lno">103</span></span>
<span id="line-S-22317-104"><span class="lno">104</span></span>
<span id="line-S-22317-105">105</span>
<span id="line-S-22317-106"><span class="lno">106</span></span>
<span id="line-S-22317-107"><span class="lno">107</span></span>
<span id="line-S-22317-108"><span class="lno">108</span></span>
<span id="line-S-22317-109"><span class="lno">109</span></span>
<span id="line-S-22317-110">110</span>
<span id="line-S-22317-111"><span class="lno">111</span></span>
<span id="line-S-22317-112"><span class="lno">112</span></span>
<span id="line-S-22317-113"><span class="lno">113</span></span>
<span id="line-S-22317-114"><span class="lno">114</span></span>
<span id="line-S-22317-115">115</span>
<span id="line-S-22317-116"><span class="lno">116</span></span>
<span id="line-S-22317-117"><span class="lno">117</span></span>
<span id="line-S-22317-118"><span class="lno">118</span></span>
<span id="line-S-22317-119"><span class="lno">119</span></span>
<span id="line-S-22317-120">120</span>
<span id="line-S-22317-121"><span class="lno">121</span></span>
<span id="line-S-22317-122"><span class="lno">122</span></span>
<span id="line-S-22317-123"><span class="lno">123</span></span>
<span id="line-S-22317-124"><span class="lno">124</span></span>
<span id="line-S-22317-125">125</span>
<span id="line-S-22317-126"><span class="lno">126</span></span>
<span id="line-S-22317-127"><span class="lno">127</span></span>
<span id="line-S-22317-128"><span class="lno">128</span></span>
<span id="line-S-22317-129"><span class="lno">129</span></span>
<span id="line-S-22317-130">130</span>
<span id="line-S-22317-131"><span class="lno">131</span></span>
<span id="line-S-22317-132"><span class="lno">132</span></span>
<span id="line-S-22317-133"><span class="lno">133</span></span>
<span id="line-S-22317-134"><span class="lno">134</span></span>
<span id="line-S-22317-135">135</span>
<span id="line-S-22317-136"><span class="lno">136</span></span>
<span id="line-S-22317-137"><span class="lno">137</span></span>
<span id="line-S-22317-138"><span class="lno">138</span></span>
<span id="line-S-22317-139"><span class="lno">139</span></span>
</pre></td><td valign="top"><pre><code class="language-xml">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                xmlns:db="http://docbook.org/ns/docbook"
                xmlns:f="http://docbook.org/ns/docbook/functions"
                xmlns:fp="http://docbook.org/ns/docbook/functions/private"
                xmlns:l="http://docbook.org/ns/docbook/l10n"
                xmlns:m="http://docbook.org/ns/docbook/modes"
                xmlns:map="http://www.w3.org/2005/xpath-functions/map"
                xmlns:n="http://docbook.org/ns/docbook/l10n/number"
                xmlns:t="http://docbook.org/ns/docbook/l10n/title"
                xmlns:v="http://docbook.org/ns/docbook/variables"
                xmlns:vp="http://docbook.org/ns/docbook/variables/private"
                xmlns:xs="http://www.w3.org/2001/XMLSchema"
                xmlns="http://www.w3.org/1999/xhtml"
                default-mode="m:docbook"
                exclude-result-prefixes="db f fp l m map n t v vp xs"
                version="3.0"&gt;

&lt;xsl:param name="default-language" select="'en'"/&gt;

&lt;xsl:key name="l:string" match="l:string" use="@key"/&gt;
&lt;xsl:key name="l:style" match="l:style" use="@key"/&gt;
&lt;xsl:key name="l:gentext" match="l:gentext" use="@name"/&gt;
&lt;xsl:key name="l:tokens" match="l:tokens" use="../@name || '/' || @key"/&gt;

&lt;xsl:variable name="v:locales" as="xs:string+" static="yes"
              select="('en', 'fr', 'cs')"/&gt;

&lt;xsl:variable name="vp:l10n" as="map(*)"
              select="map:merge(fp:load-locales())"/&gt;

&lt;xsl:function name="fp:load-locales" as="map(*)+"&gt;
  &lt;xsl:for-each select="$v:locales"&gt;
    &lt;xsl:variable name="locale" select="."/&gt;
    &lt;xsl:variable name="doc" select="doc('../locale/' || $locale || '.xml')"/&gt;
    &lt;xsl:sequence select="map:entry($doc/l:l10n/@language, $doc)"/&gt;
  &lt;/xsl:for-each&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="f:language" as="xs:string" cache="yes"&gt;
  &lt;xsl:param name="node" as="node()"/&gt;

  &lt;xsl:variable name="nearest-lang"
                select="$node/ancestor-or-self::*[@xml:lang][1]"/&gt;

  &lt;xsl:choose&gt;
    &lt;xsl:when test="$nearest-lang"&gt;
      &lt;xsl:sequence select="$nearest-lang/@xml:lang/string()"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:sequence select="$default-language"/&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="fp:localization" as="element(l:l10n)?"&gt;
  &lt;xsl:param name="lang" as="xs:string"/&gt;
  &lt;xsl:sequence select="fp:localization($lang, true())"/&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="fp:localization" as="element(l:l10n)?"&gt;
  &lt;xsl:param name="lang" as="xs:string"/&gt;
  &lt;xsl:param name="warn" as="xs:boolean"/&gt;

  &lt;xsl:variable name="l10n" select="map:get($vp:l10n, $lang)/l:l10n"/&gt;

  &lt;xsl:if test="$warn and empty($l10n)"&gt;
    &lt;xsl:message expand-text="yes"&gt;No localization data for {$lang}&lt;/xsl:message&gt;
  &lt;/xsl:if&gt;

  &lt;xsl:sequence select="$l10n"/&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="fp:existing-localization" as="element(l:l10n)"&gt;
  &lt;xsl:param name="lang" as="xs:string"/&gt;

  &lt;xsl:variable name="l10n" select="fp:localization($lang)"/&gt;
  &lt;xsl:variable name="l10n"
                select="if (empty($l10n) and $default-language ne $lang)
                        then fp:localization($default-language)
                        else $l10n"/&gt;
  &lt;xsl:sequence select="if (empty($l10n))
                        then fp:localization('en')
                        else $l10n"/&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="f:gentext" as="item()*"&gt;
  &lt;xsl:param name="node" as="element()"/&gt;
  &lt;xsl:param name="context" as="xs:string"/&gt;
  &lt;xsl:sequence select="fp:gentext($node, $context, local-name($node), true())"/&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="f:gentext" as="item()*"&gt;
  &lt;xsl:param name="node" as="element()"/&gt;
  &lt;xsl:param name="context" as="xs:string"/&gt;
  &lt;xsl:param name="key" as="xs:string"/&gt;
  &lt;xsl:sequence select="fp:gentext($node, $context, $key, true())"/&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="fp:gentext" as="item()*"&gt;
  &lt;xsl:param name="node" as="element()"/&gt;
  &lt;xsl:param name="context" as="xs:string"/&gt;
  &lt;xsl:param name="key" as="xs:string"/&gt;
  &lt;xsl:param name="report-errors" as="xs:boolean"/&gt;

  &lt;xsl:variable name="l10n"
                select="fp:existing-localization(f:language($node))"/&gt;

  &lt;xsl:variable name="tokens"
                select="key('l:tokens', $context || '/' || $key, root($l10n))"/&gt;

  &lt;xsl:if test="$report-errors and count($tokens) gt 1"&gt;
    &lt;xsl:message
        select="'Multiple tokens match '
                || $context || '/' || $key
                || ' for ' || f:language($node)"/&gt;
  &lt;/xsl:if&gt;

  &lt;xsl:choose&gt;
    &lt;xsl:when test="empty($tokens) and not($report-errors)"&gt;
      &lt;xsl:sequence select="()"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="empty($tokens)"&gt;
      &lt;xsl:if test="$report-errors"&gt;
      &lt;xsl:message select="'No tokens match '
                           || $context || '/' || $key
                           || ' for ' || f:language($node)
                           || ' using MISSING'"/&gt;
      &lt;/xsl:if&gt;
      &lt;xsl:sequence select="'MISSING'"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:sequence select="$tokens[1]/node()"/&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:function&gt;

&lt;/xsl:stylesheet&gt;
</code></pre></td></tr></table></div></div></div></div><div class="stylesheet" id="S-28936"><h3>functions.xsl</h3><p><span><span class="function all">41 functions</span> (<span class="function unused">6 unused</span>, <span class="function shadows">2 shadow</span>, <span class="function elsewhere">9 used only in one other module</span>)</span>, <span><span class="variable all">3 variables</span> (<span class="variable shadows">1 shadow</span>)</span></p><div class="instructions"><div class="title closed">Instructions</div><div class="body"><div id="S-28936-docbook.org.ns.docbook.functions.private.class" class="instruction variable"><div class="title"><span class="link"></span>Variable <code>$fp:class</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-28936-docbook.org.ns.docbook.functions.attributes,4">f:attributes()</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-28936">modules/functions.xsl</a></div></div></div><div id="S-28936-docbook.org.ns.docbook.functions.attributes,2" class="instruction function elsewhere"><div class="title"><span class="link"></span>Function f:attributes#2($node as element(), $attributes as attribute()*) as attribute()*</div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-10102-t-16">template</a>, <a href="#S-10102-t-18">template</a>, <a href="#S-10102-t-20">template</a>, <a href="#S-10102-t-22">template</a></div><div class="used-in"><span class="marker" title="Only used in one other module">☝</span>Used in: <a href="#S-10102">modules/attributes.xsl</a></div></div></div><div id="S-28936-docbook.org.ns.docbook.functions.attributes,4" class="instruction function"><div class="title"><span class="link"></span>Function f:attributes#4($node as element(), $attributes as attribute()*, $extra-classes as xs:string*, $exclude-classes as xs:string*) as attribute()*</div><div class="props"><div class="uses">Uses: <a href="#S-28936-docbook.org.ns.docbook.functions.private.class">$fp:class</a></div><div class="calls">Calls: <a href="#S-28936-docbook.org.ns.docbook.functions.attributes,2">f:attributes()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-10102-t-1">template</a>, <a href="#S-10102-t-2">template</a>, <a href="#S-10102-t-3">template</a>, <a href="#S-10102-t-4">template</a>, <a href="#S-10102-t-5">template</a>, <a href="#S-10102-t-6">template</a>, <a href="#S-10102-t-7">template</a>, <a href="#S-10102-t-8">template</a>, <a href="#S-10102-t-9">template</a>, <a href="#S-10102-t-10">template</a>, <a href="#S-10102-t-11">template</a>, <a href="#S-10102-t-12">template</a>, <a href="#S-10102-t-13">template</a>, <a href="#S-10102-t-14">template</a>, <a href="#S-10102-t-15">template</a>, <a href="#S-10102-t-16">template</a>, <a href="#S-10102-t-17">template</a>, <a href="#S-10102-t-19">template</a>, <a href="#S-10102-t-21">template</a>, <a href="#S-28936-docbook.org.ns.docbook.functions.attributes,2">f:attributes()</a>, <a href="#S-9504-docbook.org.ns.docbook.templates.inline">t:inline</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-28936">modules/functions.xsl</a>, <a href="#S-9504">modules/inlines.xsl</a>, <a href="#S-10102">modules/attributes.xsl</a></div></div></div><div id="S-28936-docbook.org.ns.docbook.functions.is-true,1" class="instruction function"><div class="title"><span class="link"></span>Function f:is-true($value) as xs:boolean</div><div class="props"><div class="calls">Calls: <a href="#S-58081-docbook.org.ns.docbook.functions.private.crossref-properties,1">fp:crossref-properties()</a>, <a href="#S-29523-docbook.org.ns.docbook.functions.private.pmuj-enabled,1">fp:pmuj-enabled()</a>, <a href="#S-24095-docbook.org.ns.docbook.functions.private.profile-suppress,1">fp:profile-suppress()</a>, <a href="#S-25794-docbook.org.ns.docbook.functions.private.title-properties,1">fp:title-properties()</a>, <a href="#S-56456-docbook.org.ns.docbook.functions.verbatim-numbered,1">f:verbatim-numbered()</a>, <a href="#S-56456-docbook.org.ns.docbook.functions.verbatim-trim-trailing,1">f:verbatim-trim-trailing()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-58558-t-8">template</a>, <a href="#S-25794-t-13">template</a>, <a href="#S-46450-t-2">template</a>, <a href="#S-46450-t-15">template</a>, <a href="#S-46450-t-17">template</a>, <a href="#S-46450-t-19">template</a>, <a href="#S-46450-t-21">template</a>, <a href="#S-46450-t-23">template</a>, <a href="#S-46450-t-25">template</a>, <a href="#S-58181-t-3">template</a>, <a href="#S-58181-t-10">template</a>, <a href="#S-34731-t-14">template</a>, <a href="#S-34731-t-20">template</a>, <a href="#S-34731-t-24">template</a>, <a href="#S-24095-t-1">template</a>, <a href="#S-7006-t-4">template</a>, <a href="#S-21031-t-4">template</a>, <a href="#S-6566-t-1">template</a>, <a href="#S-52707-t-3">template</a>, <a href="#S-58081-docbook.org.ns.docbook.functions.private.crossref-properties,1">fp:crossref-properties()</a>, <a href="#S-29523-docbook.org.ns.docbook.functions.private.pmuj-enabled,1">fp:pmuj-enabled()</a>, <a href="#S-24095-docbook.org.ns.docbook.functions.private.profile-suppress,1">fp:profile-suppress()</a>, <a href="#S-25794-docbook.org.ns.docbook.functions.private.title-properties,1">fp:title-properties()</a>, <a href="#S-56456-docbook.org.ns.docbook.functions.verbatim-numbered,1">f:verbatim-numbered()</a>, <a href="#S-56456-docbook.org.ns.docbook.functions.verbatim-trim-trailing,1">f:verbatim-trim-trailing()</a>, <a href="#S-52707-docbook.org.ns.docbook.templates.private.docbook">tp:docbook</a>, <a href="#S-58181-docbook.org.ns.docbook.templates.private.indexed-section">tp:indexed-section</a>, <a href="#S-46450-docbook.org.ns.docbook.templates.private.toc">tp:toc</a>, <a href="#S-56456-docbook.org.ns.docbook.templates.private.verbatim-lines">tp:verbatim-lines</a>, <a href="#S-58181-docbook.org.ns.docbook.templates.generate-index">t:generate-index</a>, <a href="#S-33240-docbook.org.ns.docbook.templates.person-name-first-last">t:person-name-first-last</a>, <a href="#S-46594-docbook.org.ns.docbook.templates.preprocess">t:preprocess</a>, <a href="#S-23412-docbook.org.ns.docbook.variables.chunk-renumber-footnotes">$v:chunk-renumber-footnotes</a>, <a href="#S-23412-docbook.org.ns.docbook.variables.verbatim-number-first-line">$v:verbatim-number-first-line</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-52707">«root»</a>, <a href="#S-6566">main.xsl</a>, <a href="#S-23412">modules/variable.xsl</a>, <a href="#S-58558">modules/head.xsl</a>, <a href="#S-25794">modules/titles.xsl</a>, <a href="#S-46450">modules/toc.xsl</a>, <a href="#S-58181">modules/index.xsl</a>, <a href="#S-33240">modules/info.xsl</a>, <a href="#S-34731">modules/blocks.xsl</a>, <a href="#S-56456">modules/verbatim.xsl</a>, <a href="#S-29523">modules/xlink.xsl</a>, <a href="#S-58081">modules/xref.xsl</a>, <a href="#S-24095">modules/profile.xsl</a>, <a href="#S-7006">modules/chunk-cleanup.xsl</a>, <a href="#S-21031">modules/chunk-output.xsl</a>, <a href="#S-46594">drivers.xsl</a></div></div></div><div id="S-28936-docbook.org.ns.docbook.functions.orderedlist-startingnumber,1" class="instruction function"><div class="title"><span class="link"></span>Function f:orderedlist-startingnumber($list as element(db:orderedlist)) as xs:integer <span class="recursive" title="Recursive function">♻</span></div><div class="props"><div class="calls">Calls: <a href="#S-28936-docbook.org.ns.docbook.functions.orderedlist-item-number,1">f:orderedlist-item-number()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-28936-docbook.org.ns.docbook.functions.orderedlist-item-number,1">f:orderedlist-item-number()</a>, <a href="#S-28936-docbook.org.ns.docbook.functions.orderedlist-startingnumber,1">f:orderedlist-startingnumber()</a>, <a href="#S-33116-docbook.org.ns.docbook.templates.private.orderedlist-properties">tp:orderedlist-properties</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-28936">modules/functions.xsl</a>, <a href="#S-33116">modules/lists.xsl</a></div></div></div><div id="S-28936-docbook.org.ns.docbook.functions.l10n-language,1" class="instruction function elsewhere"><div class="title"><span class="link"></span>Function f:l10n-language($target as element()) as xs:string</div><div class="props"><div class="uses">Uses: <a href="#S-22317-..default-language">$default-language</a>, <a href="#S-26643-..gentext-language">$gentext-language</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-58181-docbook.org.ns.docbook.templates.generate-index">t:generate-index</a></div><div class="used-in"><span class="marker" title="Only used in one other module">☝</span>Used in: <a href="#S-58181">modules/index.xsl</a></div></div></div><div id="S-28936-docbook.org.ns.docbook.functions.check-gentext,3" class="instruction function"><div class="title"><span class="link"></span>Function f:check-gentext($node as element(), $context as xs:string, $key as xs:string) as item()*</div><div class="props"><div class="calls">Calls: <a href="#S-28936-docbook.org.ns.docbook.functions.private.separator,2">fp:separator()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-33240-t-7">template</a>, <a href="#S-9504-t-46">template</a>, <a href="#S-28936-docbook.org.ns.docbook.functions.private.separator,2">fp:separator()</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-28936">modules/functions.xsl</a>, <a href="#S-33240">modules/info.xsl</a>, <a href="#S-9504">modules/inlines.xsl</a></div></div></div><div id="S-28936-docbook.org.ns.docbook.functions.gentext-letters,1" class="instruction function unused"><div class="title"><span class="link"></span>Function f:gentext-letters($node as element()) as element(l:letters)</div><div class="props"><div class="used-by"><span class="marker">☞</span><span class="unused">Unused</span></div></div></div><div id="S-28936-docbook.org.ns.docbook.functions.gentext-letters-for-language,1" class="instruction function"><div class="title"><span class="link"></span>Function f:gentext-letters-for-language($lang as xs:string) as element(l:letters) <span class="recursive" title="Recursive function">♻</span></div><div class="props"><div class="calls">Calls: <a href="#S-58181-docbook.org.ns.docbook.functions.private.group-index,2">fp:group-index()</a>, <a href="#S-58181-docbook.org.ns.docbook.functions.private.group-label,2">fp:group-label()</a>, <a href="#S-28936-docbook.org.ns.docbook.functions.gentext-letters,1">f:gentext-letters()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-58181-docbook.org.ns.docbook.functions.private.group-index,2">fp:group-index()</a>, <a href="#S-58181-docbook.org.ns.docbook.functions.private.group-label,2">fp:group-label()</a>, <a href="#S-28936-docbook.org.ns.docbook.functions.gentext-letters,1">f:gentext-letters()</a>, <a href="#S-28936-docbook.org.ns.docbook.functions.gentext-letters-for-language,1">f:gentext-letters-for-language()</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-28936">modules/functions.xsl</a>, <a href="#S-58181">modules/index.xsl</a></div></div></div><div id="S-28936-docbook.org.ns.docbook.functions.private.properties,2" class="instruction function elsewhere"><div class="title"><span class="link"></span>Function fp:properties($context as element(), $properties as array(map(*))) as map(*)</div><div class="props"><div class="calls">Calls: <a href="#S-56456-docbook.org.ns.docbook.functions.private.verbatim-properties,1">fp:verbatim-properties()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-56456-docbook.org.ns.docbook.functions.private.verbatim-properties,1">fp:verbatim-properties()</a></div><div class="used-in"><span class="marker" title="Only used in one other module">☝</span>Used in: <a href="#S-56456">modules/verbatim.xsl</a></div></div></div><div id="S-28936-docbook.org.ns.docbook.functions.date-format,1" class="instruction function elsewhere"><div class="title"><span class="link"></span>Function f:date-format($context as element()) as xs:string</div><div class="props"><div class="uses">Uses: <a href="#S-26643-..date-date-format">$date-date-format</a>, <a href="#S-26643-..date-dateTime-format">$date-dateTime-format</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-9504-t-18">template</a></div><div class="used-in"><span class="marker" title="Only used in one other module">☝</span>Used in: <a href="#S-9504">modules/inlines.xsl</a></div></div></div><div id="S-28936-docbook.org.ns.docbook.functions.post-label-punctuation,1" class="instruction function elsewhere"><div class="title"><span class="link"></span>Function f:post-label-punctuation#1($node as element()) as xs:string?</div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-25794-t-8">template</a></div><div class="used-in"><span class="marker" title="Only used in one other module">☝</span>Used in: <a href="#S-25794">modules/titles.xsl</a></div></div></div><div id="S-28936-docbook.org.ns.docbook.functions.post-label-punctuation,2" class="instruction function"><div class="title"><span class="link"></span>Function f:post-label-punctuation#2($node as element(), $context as xs:string?) as xs:string?</div><div class="props"><div class="calls">Calls: <a href="#S-28936-docbook.org.ns.docbook.functions.post-label-punctuation,1">f:post-label-punctuation()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-28936-docbook.org.ns.docbook.functions.post-label-punctuation,1">f:post-label-punctuation()</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-28936">modules/functions.xsl</a></div></div></div><div id="S-28936-docbook.org.ns.docbook.functions.private.replace-element,3" class="instruction function elsewhere"><div class="title"><span class="link"></span>Function fp:replace-element#3($lines as array(*), $elemno as xs:integer, $new-elem as item()*) as array(*)</div><div class="props"><div class="calls">Calls: <a href="#S-56456-docbook.org.ns.docbook.functions.private.inject,4">fp:inject()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-56456-docbook.org.ns.docbook.functions.private.inject,4">fp:inject()</a></div><div class="used-in"><span class="marker" title="Only used in one other module">☝</span>Used in: <a href="#S-56456">modules/verbatim.xsl</a></div></div></div><div id="S-28936-docbook.org.ns.docbook.functions.private.replace-element,5" class="instruction function"><div class="title"><span class="link"></span>Function fp:replace-element#5($array as array(*), $elemno as xs:integer, $count as xs:integer, $new-elem as item()*, $newarray as array(*)) as array(*) <span class="recursive" title="Recursive function">♻</span></div><div class="props"><div class="calls">Calls: <a href="#S-28936-docbook.org.ns.docbook.functions.private.replace-element,3">fp:replace-element()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-28936-docbook.org.ns.docbook.functions.private.replace-element,3">fp:replace-element()</a>, <a href="#S-28936-docbook.org.ns.docbook.functions.private.replace-element,5">fp:replace-element()</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-28936">modules/functions.xsl</a></div></div></div><div id="S-28936-docbook.org.ns.docbook.functions.target,2" class="instruction function"><div class="title"><span class="link"></span>Function f:target($id as xs:string, $context as node()) as element()*</div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-62162-t-98">template</a>, <a href="#S-10318-docbook.org.ns.docbook.templates.private.link">tp:link</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-62162">modules/programming.xsl</a>, <a href="#S-10318">modules/links.xsl</a></div></div></div><div id="S-28936-docbook.org.ns.docbook.functions.href,2" class="instruction function"><div class="title"><span class="link"></span>Function f:href($context as node(), $node as element()) as xs:string</div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-28322-t-7">template</a>, <a href="#S-28322-t-10">template</a>, <a href="#S-58181-t-10">template</a>, <a href="#S-62162-t-98">template</a>, <a href="#S-29523-t-5">template</a>, <a href="#S-10318-t-3">template</a>, <a href="#S-10318-t-5">template</a>, <a href="#S-10318-docbook.org.ns.docbook.templates.private.link">tp:link</a>, <a href="#S-29523-docbook.org.ns.docbook.templates.private.out-of-line-xlink">tp:out-of-line-xlink</a>, <a href="#S-29523-docbook.org.ns.docbook.templates.private.simple-xlink">tp:simple-xlink</a>, <a href="#S-51480-docbook.org.ns.docbook.templates.imagemap">t:imagemap</a>, <a href="#S-58181-docbook.org.ns.docbook.templates.index-zone-reference">t:index-zone-reference</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-28322">modules/glossary.xsl</a>, <a href="#S-58181">modules/index.xsl</a>, <a href="#S-62162">modules/programming.xsl</a>, <a href="#S-51480">modules/objects.xsl</a>, <a href="#S-29523">modules/xlink.xsl</a>, <a href="#S-10318">modules/links.xsl</a></div></div></div><div id="S-28936-docbook.org.ns.docbook.variables.private.gidmap" class="instruction variable shadows"><div class="title"><span class="link"></span>Variable <code>$vp:gidmap</code></div><div class="props"><div class="shadows"><span class="marker">⚠</span>Shadows: <a href="#S-38820-docbook.org.ns.docbook.variables.private.gidmap">$vp:gidmap</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-28936-docbook.org.ns.docbook.functions.generate-id,1">f:generate-id()</a>, <a href="#S-38820-docbook.org.ns.docbook.functions.generate-id,2">f:generate-id()</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-38820">modules/shared.xsl</a>, <a href="#S-28936">modules/functions.xsl</a></div></div></div><div id="S-28936-docbook.org.ns.docbook.functions.generate-id,1" class="instruction function shadows"><div class="title"><span class="link"></span>Function f:generate-id#1($node as element()) as xs:string <span class="recursive" title="Recursive function">♻</span></div><div class="props"><div class="shadows"><span class="marker">⚠</span>Shadows: <a href="#S-38820-docbook.org.ns.docbook.functions.generate-id,1">f:generate-id()</a></div><div class="uses">Uses: <a href="#S-28936-docbook.org.ns.docbook.variables.private.gidmap">$vp:gidmap</a>, <a href="#S-38820-..generated-id-root">$generated-id-root</a>, <a href="#S-38820-..generated-id-sep">$generated-id-sep</a></div><div class="calls">Calls: <a href="#S-58181-docbook.org.ns.docbook.functions.private.nearest-section-id,1">fp:nearest-section-id()</a>, <a href="#S-29523-docbook.org.ns.docbook.functions.private.pmuj,2">fp:pmuj()</a>, <a href="#S-59718-docbook.org.ns.docbook.functions.chunk-filename,1">f:chunk-filename()</a>, <a href="#S-28936-docbook.org.ns.docbook.functions.href,2">f:href()</a>, <a href="#S-38820-docbook.org.ns.docbook.functions.id,1">f:id()</a>, <a href="#S-28936-docbook.org.ns.docbook.functions.id,1">f:id()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-38369-t-1">template</a>, <a href="#S-58181-t-1">template</a>, <a href="#S-62162-t-5">template</a>, <a href="#S-56456-t-20">template</a>, <a href="#S-30699-t-1">template</a>, <a href="#S-30699-t-2">template</a>, <a href="#S-10102-t-1">template</a>, <a href="#S-10102-t-2">template</a>, <a href="#S-10102-t-7">template</a>, <a href="#S-10102-t-9">template</a>, <a href="#S-10102-t-19">template</a>, <a href="#S-10102-t-20">template</a>, <a href="#S-10102-t-21">template</a>, <a href="#S-51165-t-2">template</a>, <a href="#S-59718-t-1">template</a>, <a href="#S-58181-docbook.org.ns.docbook.functions.private.nearest-section-id,1">fp:nearest-section-id()</a>, <a href="#S-29523-docbook.org.ns.docbook.functions.private.pmuj,2">fp:pmuj()</a>, <a href="#S-59718-docbook.org.ns.docbook.functions.chunk-filename,1">f:chunk-filename()</a>, <a href="#S-28936-docbook.org.ns.docbook.functions.generate-id,1">f:generate-id()</a>, <a href="#S-28936-docbook.org.ns.docbook.functions.href,2">f:href()</a>, <a href="#S-38820-docbook.org.ns.docbook.functions.id,1">f:id()</a>, <a href="#S-28936-docbook.org.ns.docbook.functions.id,1">f:id()</a>, <a href="#S-10318-docbook.org.ns.docbook.templates.private.link">tp:link</a>, <a href="#S-29523-docbook.org.ns.docbook.templates.private.out-of-line-xlink">tp:out-of-line-xlink</a>, <a href="#S-29523-docbook.org.ns.docbook.templates.private.simple-xlink">tp:simple-xlink</a>, <a href="#S-10318-docbook.org.ns.docbook.templates.private.xref">tp:xref</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-38369">modules/unhandled.xsl</a>, <a href="#S-38820">modules/shared.xsl</a>, <a href="#S-28936">modules/functions.xsl</a>, <a href="#S-58181">modules/index.xsl</a>, <a href="#S-62162">modules/programming.xsl</a>, <a href="#S-56456">modules/verbatim.xsl</a>, <a href="#S-30699">modules/tablehtml.xsl</a>, <a href="#S-29523">modules/xlink.xsl</a>, <a href="#S-10318">modules/links.xsl</a>, <a href="#S-10102">modules/attributes.xsl</a>, <a href="#S-51165">modules/annotations.xsl</a>, <a href="#S-59718">modules/chunk.xsl</a></div></div></div><div id="S-28936-docbook.org.ns.docbook.functions.id,1" class="instruction function shadows"><div class="title"><span class="link"></span>Function f:id($node as element()) as xs:string</div><div class="props"><div class="shadows"><span class="marker">⚠</span>Shadows: <a href="#S-38820-docbook.org.ns.docbook.functions.id,1">f:id()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-46450-t-25">template</a>, <a href="#S-46450-t-26">template</a>, <a href="#S-34731-t-20">template</a>, <a href="#S-34731-t-21">template</a>, <a href="#S-51480-t-21">template</a>, <a href="#S-50448-t-1">template</a>, <a href="#S-50448-t-2">template</a>, <a href="#S-50448-t-5">template</a>, <a href="#S-10318-docbook.org.ns.docbook.templates.private.xref">tp:xref</a>, <a href="#S-51480-docbook.org.ns.docbook.templates.imagemap">t:imagemap</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-46450">modules/toc.xsl</a>, <a href="#S-34731">modules/blocks.xsl</a>, <a href="#S-51480">modules/objects.xsl</a>, <a href="#S-50448">modules/footnotes.xsl</a>, <a href="#S-10318">modules/links.xsl</a></div></div></div><div id="S-28936-docbook.org.ns.docbook.functions.pi,2" class="instruction function"><div class="title"><span class="link"></span>Function f:pi#2($context as node()?, $property as xs:string) as xs:string?</div><div class="props"><div class="calls">Calls: <a href="#S-59718-docbook.org.ns.docbook.functions.private.chunk-navigation,1">fp:chunk-navigation()</a>, <a href="#S-59718-docbook.org.ns.docbook.functions.chunk-filename,1">f:chunk-filename()</a>, <a href="#S-28936-docbook.org.ns.docbook.functions.date-format,1">f:date-format()</a>, <a href="#S-56456-docbook.org.ns.docbook.functions.verbatim-highlight,1">f:verbatim-highlight()</a>, <a href="#S-56456-docbook.org.ns.docbook.functions.verbatim-numbered,1">f:verbatim-numbered()</a>, <a href="#S-56456-docbook.org.ns.docbook.functions.verbatim-trim-trailing,1">f:verbatim-trim-trailing()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-33240-t-19">template</a>, <a href="#S-33240-t-20">template</a>, <a href="#S-33116-t-16">template</a>, <a href="#S-34731-t-20">template</a>, <a href="#S-56456-t-18">template</a>, <a href="#S-59718-docbook.org.ns.docbook.functions.private.chunk-navigation,1">fp:chunk-navigation()</a>, <a href="#S-59718-docbook.org.ns.docbook.functions.chunk-filename,1">f:chunk-filename()</a>, <a href="#S-28936-docbook.org.ns.docbook.functions.date-format,1">f:date-format()</a>, <a href="#S-56456-docbook.org.ns.docbook.functions.verbatim-highlight,1">f:verbatim-highlight()</a>, <a href="#S-56456-docbook.org.ns.docbook.functions.verbatim-numbered,1">f:verbatim-numbered()</a>, <a href="#S-56456-docbook.org.ns.docbook.functions.verbatim-trim-trailing,1">f:verbatim-trim-trailing()</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-28936">modules/functions.xsl</a>, <a href="#S-33240">modules/info.xsl</a>, <a href="#S-33116">modules/lists.xsl</a>, <a href="#S-34731">modules/blocks.xsl</a>, <a href="#S-56456">modules/verbatim.xsl</a>, <a href="#S-59718">modules/chunk.xsl</a></div></div></div><div id="S-28936-docbook.org.ns.docbook.functions.pi,3" class="instruction function"><div class="title"><span class="link"></span>Function f:pi#3($context as node()?, $property as xs:string, $default as xs:string*) as xs:string*</div><div class="props"><div class="calls">Calls: <a href="#S-29523-docbook.org.ns.docbook.functions.private.pmuj-enabled,1">fp:pmuj-enabled()</a>, <a href="#S-28936-docbook.org.ns.docbook.functions.pi,2">f:pi()</a>, <a href="#S-56456-docbook.org.ns.docbook.functions.verbatim-highlight,1">f:verbatim-highlight()</a>, <a href="#S-56456-docbook.org.ns.docbook.functions.verbatim-style,1">f:verbatim-style()</a>, <a href="#S-29523-docbook.org.ns.docbook.functions.xlink-style,1">f:xlink-style()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-46450-t-2">template</a>, <a href="#S-58181-t-3">template</a>, <a href="#S-33116-t-11">template</a>, <a href="#S-34731-t-8">template</a>, <a href="#S-62162-t-13">template</a>, <a href="#S-29523-docbook.org.ns.docbook.functions.private.pmuj-enabled,1">fp:pmuj-enabled()</a>, <a href="#S-28936-docbook.org.ns.docbook.functions.pi,2">f:pi()</a>, <a href="#S-56456-docbook.org.ns.docbook.functions.verbatim-highlight,1">f:verbatim-highlight()</a>, <a href="#S-56456-docbook.org.ns.docbook.functions.verbatim-style,1">f:verbatim-style()</a>, <a href="#S-29523-docbook.org.ns.docbook.functions.xlink-style,1">f:xlink-style()</a>, <a href="#S-56456-docbook.org.ns.docbook.templates.private.verbatim-lines">tp:verbatim-lines</a>, <a href="#S-46594-docbook.org.ns.docbook.templates.preprocess">t:preprocess</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-28936">modules/functions.xsl</a>, <a href="#S-46450">modules/toc.xsl</a>, <a href="#S-58181">modules/index.xsl</a>, <a href="#S-33116">modules/lists.xsl</a>, <a href="#S-34731">modules/blocks.xsl</a>, <a href="#S-62162">modules/programming.xsl</a>, <a href="#S-56456">modules/verbatim.xsl</a>, <a href="#S-29523">modules/xlink.xsl</a>, <a href="#S-46594">drivers.xsl</a></div></div></div><div id="S-28936-docbook.org.ns.docbook.functions.private.pi-from-list,3" class="instruction function"><div class="title"><span class="link"></span>Function fp:pi-from-list($pis as processing-instruction()*, $property as xs:string, $default as xs:string*) as xs:string*</div><div class="props"><div class="calls">Calls: <a href="#S-28936-docbook.org.ns.docbook.functions.pi,3">f:pi()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-59097-t-6">template</a>, <a href="#S-28936-docbook.org.ns.docbook.functions.pi,3">f:pi()</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-28936">modules/functions.xsl</a>, <a href="#S-59097">modules/tablecals.xsl</a></div></div></div><div id="S-28936-docbook.org.ns.docbook.functions.pi-attributes,1" class="instruction function"><div class="title"><span class="link"></span>Function f:pi-attributes($pis as processing-instruction()*) as element()?</div><div class="props"><div class="calls">Calls: <a href="#S-28936-docbook.org.ns.docbook.functions.private.pi-from-list,3">fp:pi-from-list()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-34731-t-14">template</a>, <a href="#S-51480-t-8">template</a>, <a href="#S-56456-t-10">template</a>, <a href="#S-59097-t-6">template</a>, <a href="#S-9504-t-103">template</a>, <a href="#S-28936-docbook.org.ns.docbook.functions.private.pi-from-list,3">fp:pi-from-list()</a>, <a href="#S-51480-docbook.org.ns.docbook.templates.private.process-object">tp:process-object</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-28936">modules/functions.xsl</a>, <a href="#S-34731">modules/blocks.xsl</a>, <a href="#S-51480">modules/objects.xsl</a>, <a href="#S-56456">modules/verbatim.xsl</a>, <a href="#S-59097">modules/tablecals.xsl</a>, <a href="#S-9504">modules/inlines.xsl</a></div></div></div><div id="S-28936-docbook.org.ns.docbook.functions.private.pi-attributes,2" class="instruction function"><div class="title"><span class="link"></span>Function fp:pi-attributes($pis as processing-instruction()*, $pimap as map(*)) as map(*)? <span class="recursive" title="Recursive function">♻</span></div><div class="props"><div class="calls">Calls: <a href="#S-28936-docbook.org.ns.docbook.functions.pi-attributes,1">f:pi-attributes()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-28936-docbook.org.ns.docbook.functions.private.pi-attributes,2">fp:pi-attributes()</a>, <a href="#S-28936-docbook.org.ns.docbook.functions.pi-attributes,1">f:pi-attributes()</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-28936">modules/functions.xsl</a></div></div></div><div id="S-28936-docbook.org.ns.docbook.variables.private.pi-match" class="instruction variable"><div class="title"><span class="link"></span>Variable <code>$vp:pi-match</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-28936-docbook.org.ns.docbook.functions.private.pi-pi-attributes,2">fp:pi-pi-attributes()</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-28936">modules/functions.xsl</a></div></div></div><div id="S-28936-docbook.org.ns.docbook.functions.private.pi-pi-attributes,2" class="instruction function"><div class="title"><span class="link"></span>Function fp:pi-pi-attributes($pimap as map(*), $text as xs:string) as map(*) <span class="recursive" title="Recursive function">♻</span></div><div class="props"><div class="uses">Uses: <a href="#S-28936-docbook.org.ns.docbook.variables.private.pi-match">$vp:pi-match</a></div><div class="calls">Calls: <a href="#S-28936-docbook.org.ns.docbook.functions.private.pi-attributes,2">fp:pi-attributes()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-28936-docbook.org.ns.docbook.functions.private.pi-attributes,2">fp:pi-attributes()</a>, <a href="#S-28936-docbook.org.ns.docbook.functions.private.pi-pi-attributes,2">fp:pi-pi-attributes()</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-28936">modules/functions.xsl</a></div></div></div><div id="S-28936-docbook.org.ns.docbook.functions.spaces,1" class="instruction function"><div class="title"><span class="link"></span>Function f:spaces($length as item()*) as xs:string? <span class="recursive" title="Recursive function">♻</span></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-62162-t-91">template</a>, <a href="#S-28936-docbook.org.ns.docbook.functions.spaces,1">f:spaces()</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-28936">modules/functions.xsl</a>, <a href="#S-62162">modules/programming.xsl</a></div></div></div><div id="S-28936-docbook.org.ns.docbook.functions.private.lookup-string,3" class="instruction function unused"><div class="title"><span class="link"></span>Function fp:lookup-string($context as element(), $lookup as element(), $table-name as xs:string) as node()*</div><div class="props"><div class="used-by"><span class="marker">☞</span><span class="unused">Unused</span></div></div></div><div id="S-28936-docbook.org.ns.docbook.functions.private.separator,2" class="instruction function"><div class="title"><span class="link"></span>Function fp:separator($node as element(), $context as xs:string) as node()*</div><div class="props"><div class="calls">Calls: <a href="#S-28936-docbook.org.ns.docbook.functions.private.label-format,1">fp:label-format()</a>, <a href="#S-28936-docbook.org.ns.docbook.functions.intra-number-separator,1">f:intra-number-separator()</a>, <a href="#S-28936-docbook.org.ns.docbook.functions.label-separator,1">f:label-separator()</a>, <a href="#S-28936-docbook.org.ns.docbook.functions.number-separator,1">f:number-separator()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-28936-docbook.org.ns.docbook.functions.private.label-format,1">fp:label-format()</a>, <a href="#S-28936-docbook.org.ns.docbook.functions.intra-number-separator,1">f:intra-number-separator()</a>, <a href="#S-28936-docbook.org.ns.docbook.functions.label-separator,1">f:label-separator()</a>, <a href="#S-28936-docbook.org.ns.docbook.functions.number-separator,1">f:number-separator()</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-28936">modules/functions.xsl</a></div></div></div><div id="S-28936-docbook.org.ns.docbook.functions.label-separator,1" class="instruction function"><div class="title"><span class="link"></span>Function f:label-separator($node as element()) as node()*</div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-25794-t-10">template</a>, <a href="#S-4845-t-7">template</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-25794">modules/titles.xsl</a>, <a href="#S-4845">modules/titlepage.xsl</a></div></div></div><div id="S-28936-docbook.org.ns.docbook.functions.number-separator,1" class="instruction function unused"><div class="title"><span class="link"></span>Function f:number-separator($node as element()) as node()*</div><div class="props"><div class="used-by"><span class="marker">☞</span><span class="unused">Unused</span></div></div></div><div id="S-28936-docbook.org.ns.docbook.functions.intra-number-separator,1" class="instruction function elsewhere"><div class="title"><span class="link"></span>Function f:intra-number-separator($node as element()) as node()*</div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-25794-t-11">template</a>, <a href="#S-25794-t-12">template</a>, <a href="#S-25794-t-14">template</a>, <a href="#S-25794-t-15">template</a></div><div class="used-in"><span class="marker" title="Only used in one other module">☝</span>Used in: <a href="#S-25794">modules/titles.xsl</a></div></div></div><div id="S-28936-docbook.org.ns.docbook.functions.private.label-format,1" class="instruction function unused"><div class="title"><span class="link"></span>Function fp:label-format($node as element()) as node()*</div><div class="props"><div class="used-by"><span class="marker">☞</span><span class="unused">Unused</span></div></div></div><div id="S-28936-docbook.org.ns.docbook.functions.private.parse-key-value-pairs,1" class="instruction function elsewhere"><div class="title"><span class="link"></span>Function fp:parse-key-value-pairs#1($strings as xs:string*) as map(xs:string,xs:string)</div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-23412-docbook.org.ns.docbook.variables.formal-object-title-placement">$v:formal-object-title-placement</a></div><div class="used-in"><span class="marker" title="Only used in one other module">☝</span>Used in: <a href="#S-23412">modules/variable.xsl</a></div></div></div><div id="S-28936-docbook.org.ns.docbook.functions.private.parse-key-value-pairs,2" class="instruction function"><div class="title"><span class="link"></span>Function fp:parse-key-value-pairs#2($strings as xs:string*, $map as map(xs:string,xs:string)) as map(xs:string,xs:string) <span class="recursive" title="Recursive function">♻</span></div><div class="props"><div class="calls">Calls: <a href="#S-28936-docbook.org.ns.docbook.functions.private.parse-key-value-pairs,1">fp:parse-key-value-pairs()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-28936-docbook.org.ns.docbook.functions.private.parse-key-value-pairs,1">fp:parse-key-value-pairs()</a>, <a href="#S-28936-docbook.org.ns.docbook.functions.private.parse-key-value-pairs,2">fp:parse-key-value-pairs()</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-28936">modules/functions.xsl</a></div></div></div><div id="S-28936-docbook.org.ns.docbook.functions.refsection,1" class="instruction function"><div class="title"><span class="link"></span>Function f:refsection($node as element()) as xs:boolean</div><div class="props"><div class="calls">Calls: <a href="#S-28936-docbook.org.ns.docbook.functions.section,1">f:section()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-28936-docbook.org.ns.docbook.functions.section,1">f:section()</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-28936">modules/functions.xsl</a></div></div></div><div id="S-28936-docbook.org.ns.docbook.functions.section,1" class="instruction function unused"><div class="title"><span class="link"></span>Function f:section($node as element()) as xs:boolean</div><div class="props"><div class="used-by"><span class="marker">☞</span><span class="unused">Unused</span></div></div></div><div id="S-28936-docbook.org.ns.docbook.functions.section-depth,1" class="instruction function"><div class="title"><span class="link"></span>Function f:section-depth($node as element()?) as xs:integer <span class="recursive" title="Recursive function">♻</span></div><div class="props"><div class="used-by"><span class="marker"><span class="marker">☞</span></span>Used by: <a href="#S-28936-docbook.org.ns.docbook.functions.section-depth,1">f:section-depth()</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-28936">modules/functions.xsl</a></div></div></div><div id="S-28936-docbook.org.ns.docbook.functions.step-number,1" class="instruction function"><div class="title"><span class="link"></span>Function f:step-number($node as element(db:step)) as xs:integer+</div><div class="props"><div class="calls">Calls: <a href="#S-28936-docbook.org.ns.docbook.functions.step-numeration,1">f:step-numeration()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-28936-docbook.org.ns.docbook.functions.step-numeration,1">f:step-numeration()</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-28936">modules/functions.xsl</a></div></div></div><div id="S-28936-docbook.org.ns.docbook.functions.step-numeration,1" class="instruction function"><div class="title"><span class="link"></span>Function f:step-numeration($node as element(db:step)) as xs:string</div><div class="props"><div class="uses">Uses: <a href="#S-26643-..procedure-step-numeration">$procedure-step-numeration</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-25794-t-14">template</a>, <a href="#S-33116-t-26">template</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-25794">modules/titles.xsl</a>, <a href="#S-33116">modules/lists.xsl</a></div></div></div><div id="S-28936-docbook.org.ns.docbook.functions.orderedlist-item-number,1" class="instruction function"><div class="title"><span class="link"></span>Function f:orderedlist-item-number($node as element(db:listitem)) as xs:integer+</div><div class="props"><div class="calls">Calls: <a href="#S-28936-docbook.org.ns.docbook.functions.orderedlist-item-numeration,1">f:orderedlist-item-numeration()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-28936-docbook.org.ns.docbook.functions.orderedlist-item-numeration,1">f:orderedlist-item-numeration()</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-28936">modules/functions.xsl</a></div></div></div><div id="S-28936-docbook.org.ns.docbook.functions.orderedlist-item-numeration,1" class="instruction function"><div class="title"><span class="link"></span>Function f:orderedlist-item-numeration($node as element(db:listitem)) as xs:string</div><div class="props"><div class="uses">Uses: <a href="#S-26643-..orderedlist-item-numeration">$orderedlist-item-numeration</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-25794-t-15">template</a>, <a href="#S-33116-docbook.org.ns.docbook.templates.private.orderedlist-properties">tp:orderedlist-properties</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-25794">modules/titles.xsl</a>, <a href="#S-33116">modules/lists.xsl</a></div></div></div><div id="S-28936-docbook.org.ns.docbook.functions.tokenize-on-char,2" class="instruction function elsewhere"><div class="title"><span class="link"></span>Function f:tokenize-on-char($string as xs:string, $char as xs:string) as xs:string*</div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-59097-t-6">template</a></div><div class="used-in"><span class="marker" title="Only used in one other module">☝</span>Used in: <a href="#S-59097">modules/tablecals.xsl</a></div></div></div></div></div><div class="source-code"><div class="title closed">Source code</div><div class="body"><div><table><tr><td valign="top" align="right"><pre class="fake-prism"><span id="line-S-28936-1">1</span>
<span id="line-S-28936-2"><span class="lno">2</span></span>
<span id="line-S-28936-3"><span class="lno">3</span></span>
<span id="line-S-28936-4"><span class="lno">4</span></span>
<span id="line-S-28936-5">5</span>
<span id="line-S-28936-6"><span class="lno">6</span></span>
<span id="line-S-28936-7"><span class="lno">7</span></span>
<span id="line-S-28936-8"><span class="lno">8</span></span>
<span id="line-S-28936-9"><span class="lno">9</span></span>
<span id="line-S-28936-10">10</span>
<span id="line-S-28936-11"><span class="lno">11</span></span>
<span id="line-S-28936-12"><span class="lno">12</span></span>
<span id="line-S-28936-13"><span class="lno">13</span></span>
<span id="line-S-28936-14"><span class="lno">14</span></span>
<span id="line-S-28936-15">15</span>
<span id="line-S-28936-16"><span class="lno">16</span></span>
<span id="line-S-28936-17"><span class="lno">17</span></span>
<span id="line-S-28936-18"><span class="lno">18</span></span>
<span id="line-S-28936-19"><span class="lno">19</span></span>
<span id="line-S-28936-20">20</span>
<span id="line-S-28936-21"><span class="lno">21</span></span>
<span id="line-S-28936-22"><span class="lno">22</span></span>
<span id="line-S-28936-23"><span class="lno">23</span></span>
<span id="line-S-28936-24"><span class="lno">24</span></span>
<span id="line-S-28936-25">25</span>
<span id="line-S-28936-26"><span class="lno">26</span></span>
<span id="line-S-28936-27"><span class="lno">27</span></span>
<span id="line-S-28936-28"><span class="lno">28</span></span>
<span id="line-S-28936-29"><span class="lno">29</span></span>
<span id="line-S-28936-30">30</span>
<span id="line-S-28936-31"><span class="lno">31</span></span>
<span id="line-S-28936-32"><span class="lno">32</span></span>
<span id="line-S-28936-33"><span class="lno">33</span></span>
<span id="line-S-28936-34"><span class="lno">34</span></span>
<span id="line-S-28936-35">35</span>
<span id="line-S-28936-36"><span class="lno">36</span></span>
<span id="line-S-28936-37"><span class="lno">37</span></span>
<span id="line-S-28936-38"><span class="lno">38</span></span>
<span id="line-S-28936-39"><span class="lno">39</span></span>
<span id="line-S-28936-40">40</span>
<span id="line-S-28936-41"><span class="lno">41</span></span>
<span id="line-S-28936-42"><span class="lno">42</span></span>
<span id="line-S-28936-43"><span class="lno">43</span></span>
<span id="line-S-28936-44"><span class="lno">44</span></span>
<span id="line-S-28936-45">45</span>
<span id="line-S-28936-46"><span class="lno">46</span></span>
<span id="line-S-28936-47"><span class="lno">47</span></span>
<span id="line-S-28936-48"><span class="lno">48</span></span>
<span id="line-S-28936-49"><span class="lno">49</span></span>
<span id="line-S-28936-50">50</span>
<span id="line-S-28936-51"><span class="lno">51</span></span>
<span id="line-S-28936-52"><span class="lno">52</span></span>
<span id="line-S-28936-53"><span class="lno">53</span></span>
<span id="line-S-28936-54"><span class="lno">54</span></span>
<span id="line-S-28936-55">55</span>
<span id="line-S-28936-56"><span class="lno">56</span></span>
<span id="line-S-28936-57"><span class="lno">57</span></span>
<span id="line-S-28936-58"><span class="lno">58</span></span>
<span id="line-S-28936-59"><span class="lno">59</span></span>
<span id="line-S-28936-60">60</span>
<span id="line-S-28936-61"><span class="lno">61</span></span>
<span id="line-S-28936-62"><span class="lno">62</span></span>
<span id="line-S-28936-63"><span class="lno">63</span></span>
<span id="line-S-28936-64"><span class="lno">64</span></span>
<span id="line-S-28936-65">65</span>
<span id="line-S-28936-66"><span class="lno">66</span></span>
<span id="line-S-28936-67"><span class="lno">67</span></span>
<span id="line-S-28936-68"><span class="lno">68</span></span>
<span id="line-S-28936-69"><span class="lno">69</span></span>
<span id="line-S-28936-70">70</span>
<span id="line-S-28936-71"><span class="lno">71</span></span>
<span id="line-S-28936-72"><span class="lno">72</span></span>
<span id="line-S-28936-73"><span class="lno">73</span></span>
<span id="line-S-28936-74"><span class="lno">74</span></span>
<span id="line-S-28936-75">75</span>
<span id="line-S-28936-76"><span class="lno">76</span></span>
<span id="line-S-28936-77"><span class="lno">77</span></span>
<span id="line-S-28936-78"><span class="lno">78</span></span>
<span id="line-S-28936-79"><span class="lno">79</span></span>
<span id="line-S-28936-80">80</span>
<span id="line-S-28936-81"><span class="lno">81</span></span>
<span id="line-S-28936-82"><span class="lno">82</span></span>
<span id="line-S-28936-83"><span class="lno">83</span></span>
<span id="line-S-28936-84"><span class="lno">84</span></span>
<span id="line-S-28936-85">85</span>
<span id="line-S-28936-86"><span class="lno">86</span></span>
<span id="line-S-28936-87"><span class="lno">87</span></span>
<span id="line-S-28936-88"><span class="lno">88</span></span>
<span id="line-S-28936-89"><span class="lno">89</span></span>
<span id="line-S-28936-90">90</span>
<span id="line-S-28936-91"><span class="lno">91</span></span>
<span id="line-S-28936-92"><span class="lno">92</span></span>
<span id="line-S-28936-93"><span class="lno">93</span></span>
<span id="line-S-28936-94"><span class="lno">94</span></span>
<span id="line-S-28936-95">95</span>
<span id="line-S-28936-96"><span class="lno">96</span></span>
<span id="line-S-28936-97"><span class="lno">97</span></span>
<span id="line-S-28936-98"><span class="lno">98</span></span>
<span id="line-S-28936-99"><span class="lno">99</span></span>
<span id="line-S-28936-100">100</span>
<span id="line-S-28936-101"><span class="lno">101</span></span>
<span id="line-S-28936-102"><span class="lno">102</span></span>
<span id="line-S-28936-103"><span class="lno">103</span></span>
<span id="line-S-28936-104"><span class="lno">104</span></span>
<span id="line-S-28936-105">105</span>
<span id="line-S-28936-106"><span class="lno">106</span></span>
<span id="line-S-28936-107"><span class="lno">107</span></span>
<span id="line-S-28936-108"><span class="lno">108</span></span>
<span id="line-S-28936-109"><span class="lno">109</span></span>
<span id="line-S-28936-110">110</span>
<span id="line-S-28936-111"><span class="lno">111</span></span>
<span id="line-S-28936-112"><span class="lno">112</span></span>
<span id="line-S-28936-113"><span class="lno">113</span></span>
<span id="line-S-28936-114"><span class="lno">114</span></span>
<span id="line-S-28936-115">115</span>
<span id="line-S-28936-116"><span class="lno">116</span></span>
<span id="line-S-28936-117"><span class="lno">117</span></span>
<span id="line-S-28936-118"><span class="lno">118</span></span>
<span id="line-S-28936-119"><span class="lno">119</span></span>
<span id="line-S-28936-120">120</span>
<span id="line-S-28936-121"><span class="lno">121</span></span>
<span id="line-S-28936-122"><span class="lno">122</span></span>
<span id="line-S-28936-123"><span class="lno">123</span></span>
<span id="line-S-28936-124"><span class="lno">124</span></span>
<span id="line-S-28936-125">125</span>
<span id="line-S-28936-126"><span class="lno">126</span></span>
<span id="line-S-28936-127"><span class="lno">127</span></span>
<span id="line-S-28936-128"><span class="lno">128</span></span>
<span id="line-S-28936-129"><span class="lno">129</span></span>
<span id="line-S-28936-130">130</span>
<span id="line-S-28936-131"><span class="lno">131</span></span>
<span id="line-S-28936-132"><span class="lno">132</span></span>
<span id="line-S-28936-133"><span class="lno">133</span></span>
<span id="line-S-28936-134"><span class="lno">134</span></span>
<span id="line-S-28936-135">135</span>
<span id="line-S-28936-136"><span class="lno">136</span></span>
<span id="line-S-28936-137"><span class="lno">137</span></span>
<span id="line-S-28936-138"><span class="lno">138</span></span>
<span id="line-S-28936-139"><span class="lno">139</span></span>
<span id="line-S-28936-140">140</span>
<span id="line-S-28936-141"><span class="lno">141</span></span>
<span id="line-S-28936-142"><span class="lno">142</span></span>
<span id="line-S-28936-143"><span class="lno">143</span></span>
<span id="line-S-28936-144"><span class="lno">144</span></span>
<span id="line-S-28936-145">145</span>
<span id="line-S-28936-146"><span class="lno">146</span></span>
<span id="line-S-28936-147"><span class="lno">147</span></span>
<span id="line-S-28936-148"><span class="lno">148</span></span>
<span id="line-S-28936-149"><span class="lno">149</span></span>
<span id="line-S-28936-150">150</span>
<span id="line-S-28936-151"><span class="lno">151</span></span>
<span id="line-S-28936-152"><span class="lno">152</span></span>
<span id="line-S-28936-153"><span class="lno">153</span></span>
<span id="line-S-28936-154"><span class="lno">154</span></span>
<span id="line-S-28936-155">155</span>
<span id="line-S-28936-156"><span class="lno">156</span></span>
<span id="line-S-28936-157"><span class="lno">157</span></span>
<span id="line-S-28936-158"><span class="lno">158</span></span>
<span id="line-S-28936-159"><span class="lno">159</span></span>
<span id="line-S-28936-160">160</span>
<span id="line-S-28936-161"><span class="lno">161</span></span>
<span id="line-S-28936-162"><span class="lno">162</span></span>
<span id="line-S-28936-163"><span class="lno">163</span></span>
<span id="line-S-28936-164"><span class="lno">164</span></span>
<span id="line-S-28936-165">165</span>
<span id="line-S-28936-166"><span class="lno">166</span></span>
<span id="line-S-28936-167"><span class="lno">167</span></span>
<span id="line-S-28936-168"><span class="lno">168</span></span>
<span id="line-S-28936-169"><span class="lno">169</span></span>
<span id="line-S-28936-170">170</span>
<span id="line-S-28936-171"><span class="lno">171</span></span>
<span id="line-S-28936-172"><span class="lno">172</span></span>
<span id="line-S-28936-173"><span class="lno">173</span></span>
<span id="line-S-28936-174"><span class="lno">174</span></span>
<span id="line-S-28936-175">175</span>
<span id="line-S-28936-176"><span class="lno">176</span></span>
<span id="line-S-28936-177"><span class="lno">177</span></span>
<span id="line-S-28936-178"><span class="lno">178</span></span>
<span id="line-S-28936-179"><span class="lno">179</span></span>
<span id="line-S-28936-180">180</span>
<span id="line-S-28936-181"><span class="lno">181</span></span>
<span id="line-S-28936-182"><span class="lno">182</span></span>
<span id="line-S-28936-183"><span class="lno">183</span></span>
<span id="line-S-28936-184"><span class="lno">184</span></span>
<span id="line-S-28936-185">185</span>
<span id="line-S-28936-186"><span class="lno">186</span></span>
<span id="line-S-28936-187"><span class="lno">187</span></span>
<span id="line-S-28936-188"><span class="lno">188</span></span>
<span id="line-S-28936-189"><span class="lno">189</span></span>
<span id="line-S-28936-190">190</span>
<span id="line-S-28936-191"><span class="lno">191</span></span>
<span id="line-S-28936-192"><span class="lno">192</span></span>
<span id="line-S-28936-193"><span class="lno">193</span></span>
<span id="line-S-28936-194"><span class="lno">194</span></span>
<span id="line-S-28936-195">195</span>
<span id="line-S-28936-196"><span class="lno">196</span></span>
<span id="line-S-28936-197"><span class="lno">197</span></span>
<span id="line-S-28936-198"><span class="lno">198</span></span>
<span id="line-S-28936-199"><span class="lno">199</span></span>
<span id="line-S-28936-200">200</span>
<span id="line-S-28936-201"><span class="lno">201</span></span>
<span id="line-S-28936-202"><span class="lno">202</span></span>
<span id="line-S-28936-203"><span class="lno">203</span></span>
<span id="line-S-28936-204"><span class="lno">204</span></span>
<span id="line-S-28936-205">205</span>
<span id="line-S-28936-206"><span class="lno">206</span></span>
<span id="line-S-28936-207"><span class="lno">207</span></span>
<span id="line-S-28936-208"><span class="lno">208</span></span>
<span id="line-S-28936-209"><span class="lno">209</span></span>
<span id="line-S-28936-210">210</span>
<span id="line-S-28936-211"><span class="lno">211</span></span>
<span id="line-S-28936-212"><span class="lno">212</span></span>
<span id="line-S-28936-213"><span class="lno">213</span></span>
<span id="line-S-28936-214"><span class="lno">214</span></span>
<span id="line-S-28936-215">215</span>
<span id="line-S-28936-216"><span class="lno">216</span></span>
<span id="line-S-28936-217"><span class="lno">217</span></span>
<span id="line-S-28936-218"><span class="lno">218</span></span>
<span id="line-S-28936-219"><span class="lno">219</span></span>
<span id="line-S-28936-220">220</span>
<span id="line-S-28936-221"><span class="lno">221</span></span>
<span id="line-S-28936-222"><span class="lno">222</span></span>
<span id="line-S-28936-223"><span class="lno">223</span></span>
<span id="line-S-28936-224"><span class="lno">224</span></span>
<span id="line-S-28936-225">225</span>
<span id="line-S-28936-226"><span class="lno">226</span></span>
<span id="line-S-28936-227"><span class="lno">227</span></span>
<span id="line-S-28936-228"><span class="lno">228</span></span>
<span id="line-S-28936-229"><span class="lno">229</span></span>
<span id="line-S-28936-230">230</span>
<span id="line-S-28936-231"><span class="lno">231</span></span>
<span id="line-S-28936-232"><span class="lno">232</span></span>
<span id="line-S-28936-233"><span class="lno">233</span></span>
<span id="line-S-28936-234"><span class="lno">234</span></span>
<span id="line-S-28936-235">235</span>
<span id="line-S-28936-236"><span class="lno">236</span></span>
<span id="line-S-28936-237"><span class="lno">237</span></span>
<span id="line-S-28936-238"><span class="lno">238</span></span>
<span id="line-S-28936-239"><span class="lno">239</span></span>
<span id="line-S-28936-240">240</span>
<span id="line-S-28936-241"><span class="lno">241</span></span>
<span id="line-S-28936-242"><span class="lno">242</span></span>
<span id="line-S-28936-243"><span class="lno">243</span></span>
<span id="line-S-28936-244"><span class="lno">244</span></span>
<span id="line-S-28936-245">245</span>
<span id="line-S-28936-246"><span class="lno">246</span></span>
<span id="line-S-28936-247"><span class="lno">247</span></span>
<span id="line-S-28936-248"><span class="lno">248</span></span>
<span id="line-S-28936-249"><span class="lno">249</span></span>
<span id="line-S-28936-250">250</span>
<span id="line-S-28936-251"><span class="lno">251</span></span>
<span id="line-S-28936-252"><span class="lno">252</span></span>
<span id="line-S-28936-253"><span class="lno">253</span></span>
<span id="line-S-28936-254"><span class="lno">254</span></span>
<span id="line-S-28936-255">255</span>
<span id="line-S-28936-256"><span class="lno">256</span></span>
<span id="line-S-28936-257"><span class="lno">257</span></span>
<span id="line-S-28936-258"><span class="lno">258</span></span>
<span id="line-S-28936-259"><span class="lno">259</span></span>
<span id="line-S-28936-260">260</span>
<span id="line-S-28936-261"><span class="lno">261</span></span>
<span id="line-S-28936-262"><span class="lno">262</span></span>
<span id="line-S-28936-263"><span class="lno">263</span></span>
<span id="line-S-28936-264"><span class="lno">264</span></span>
<span id="line-S-28936-265">265</span>
<span id="line-S-28936-266"><span class="lno">266</span></span>
<span id="line-S-28936-267"><span class="lno">267</span></span>
<span id="line-S-28936-268"><span class="lno">268</span></span>
<span id="line-S-28936-269"><span class="lno">269</span></span>
<span id="line-S-28936-270">270</span>
<span id="line-S-28936-271"><span class="lno">271</span></span>
<span id="line-S-28936-272"><span class="lno">272</span></span>
<span id="line-S-28936-273"><span class="lno">273</span></span>
<span id="line-S-28936-274"><span class="lno">274</span></span>
<span id="line-S-28936-275">275</span>
<span id="line-S-28936-276"><span class="lno">276</span></span>
<span id="line-S-28936-277"><span class="lno">277</span></span>
<span id="line-S-28936-278"><span class="lno">278</span></span>
<span id="line-S-28936-279"><span class="lno">279</span></span>
<span id="line-S-28936-280">280</span>
<span id="line-S-28936-281"><span class="lno">281</span></span>
<span id="line-S-28936-282"><span class="lno">282</span></span>
<span id="line-S-28936-283"><span class="lno">283</span></span>
<span id="line-S-28936-284"><span class="lno">284</span></span>
<span id="line-S-28936-285">285</span>
<span id="line-S-28936-286"><span class="lno">286</span></span>
<span id="line-S-28936-287"><span class="lno">287</span></span>
<span id="line-S-28936-288"><span class="lno">288</span></span>
<span id="line-S-28936-289"><span class="lno">289</span></span>
<span id="line-S-28936-290">290</span>
<span id="line-S-28936-291"><span class="lno">291</span></span>
<span id="line-S-28936-292"><span class="lno">292</span></span>
<span id="line-S-28936-293"><span class="lno">293</span></span>
<span id="line-S-28936-294"><span class="lno">294</span></span>
<span id="line-S-28936-295">295</span>
<span id="line-S-28936-296"><span class="lno">296</span></span>
<span id="line-S-28936-297"><span class="lno">297</span></span>
<span id="line-S-28936-298"><span class="lno">298</span></span>
<span id="line-S-28936-299"><span class="lno">299</span></span>
<span id="line-S-28936-300">300</span>
<span id="line-S-28936-301"><span class="lno">301</span></span>
<span id="line-S-28936-302"><span class="lno">302</span></span>
<span id="line-S-28936-303"><span class="lno">303</span></span>
<span id="line-S-28936-304"><span class="lno">304</span></span>
<span id="line-S-28936-305">305</span>
<span id="line-S-28936-306"><span class="lno">306</span></span>
<span id="line-S-28936-307"><span class="lno">307</span></span>
<span id="line-S-28936-308"><span class="lno">308</span></span>
<span id="line-S-28936-309"><span class="lno">309</span></span>
<span id="line-S-28936-310">310</span>
<span id="line-S-28936-311"><span class="lno">311</span></span>
<span id="line-S-28936-312"><span class="lno">312</span></span>
<span id="line-S-28936-313"><span class="lno">313</span></span>
<span id="line-S-28936-314"><span class="lno">314</span></span>
<span id="line-S-28936-315">315</span>
<span id="line-S-28936-316"><span class="lno">316</span></span>
<span id="line-S-28936-317"><span class="lno">317</span></span>
<span id="line-S-28936-318"><span class="lno">318</span></span>
<span id="line-S-28936-319"><span class="lno">319</span></span>
<span id="line-S-28936-320">320</span>
<span id="line-S-28936-321"><span class="lno">321</span></span>
<span id="line-S-28936-322"><span class="lno">322</span></span>
<span id="line-S-28936-323"><span class="lno">323</span></span>
<span id="line-S-28936-324"><span class="lno">324</span></span>
<span id="line-S-28936-325">325</span>
<span id="line-S-28936-326"><span class="lno">326</span></span>
<span id="line-S-28936-327"><span class="lno">327</span></span>
<span id="line-S-28936-328"><span class="lno">328</span></span>
<span id="line-S-28936-329"><span class="lno">329</span></span>
<span id="line-S-28936-330">330</span>
<span id="line-S-28936-331"><span class="lno">331</span></span>
<span id="line-S-28936-332"><span class="lno">332</span></span>
<span id="line-S-28936-333"><span class="lno">333</span></span>
<span id="line-S-28936-334"><span class="lno">334</span></span>
<span id="line-S-28936-335">335</span>
<span id="line-S-28936-336"><span class="lno">336</span></span>
<span id="line-S-28936-337"><span class="lno">337</span></span>
<span id="line-S-28936-338"><span class="lno">338</span></span>
<span id="line-S-28936-339"><span class="lno">339</span></span>
<span id="line-S-28936-340">340</span>
<span id="line-S-28936-341"><span class="lno">341</span></span>
<span id="line-S-28936-342"><span class="lno">342</span></span>
<span id="line-S-28936-343"><span class="lno">343</span></span>
<span id="line-S-28936-344"><span class="lno">344</span></span>
<span id="line-S-28936-345">345</span>
<span id="line-S-28936-346"><span class="lno">346</span></span>
<span id="line-S-28936-347"><span class="lno">347</span></span>
<span id="line-S-28936-348"><span class="lno">348</span></span>
<span id="line-S-28936-349"><span class="lno">349</span></span>
<span id="line-S-28936-350">350</span>
<span id="line-S-28936-351"><span class="lno">351</span></span>
<span id="line-S-28936-352"><span class="lno">352</span></span>
<span id="line-S-28936-353"><span class="lno">353</span></span>
<span id="line-S-28936-354"><span class="lno">354</span></span>
<span id="line-S-28936-355">355</span>
<span id="line-S-28936-356"><span class="lno">356</span></span>
<span id="line-S-28936-357"><span class="lno">357</span></span>
<span id="line-S-28936-358"><span class="lno">358</span></span>
<span id="line-S-28936-359"><span class="lno">359</span></span>
<span id="line-S-28936-360">360</span>
<span id="line-S-28936-361"><span class="lno">361</span></span>
<span id="line-S-28936-362"><span class="lno">362</span></span>
<span id="line-S-28936-363"><span class="lno">363</span></span>
<span id="line-S-28936-364"><span class="lno">364</span></span>
<span id="line-S-28936-365">365</span>
<span id="line-S-28936-366"><span class="lno">366</span></span>
<span id="line-S-28936-367"><span class="lno">367</span></span>
<span id="line-S-28936-368"><span class="lno">368</span></span>
<span id="line-S-28936-369"><span class="lno">369</span></span>
<span id="line-S-28936-370">370</span>
<span id="line-S-28936-371"><span class="lno">371</span></span>
<span id="line-S-28936-372"><span class="lno">372</span></span>
<span id="line-S-28936-373"><span class="lno">373</span></span>
<span id="line-S-28936-374"><span class="lno">374</span></span>
<span id="line-S-28936-375">375</span>
<span id="line-S-28936-376"><span class="lno">376</span></span>
<span id="line-S-28936-377"><span class="lno">377</span></span>
<span id="line-S-28936-378"><span class="lno">378</span></span>
<span id="line-S-28936-379"><span class="lno">379</span></span>
<span id="line-S-28936-380">380</span>
<span id="line-S-28936-381"><span class="lno">381</span></span>
<span id="line-S-28936-382"><span class="lno">382</span></span>
<span id="line-S-28936-383"><span class="lno">383</span></span>
<span id="line-S-28936-384"><span class="lno">384</span></span>
<span id="line-S-28936-385">385</span>
<span id="line-S-28936-386"><span class="lno">386</span></span>
<span id="line-S-28936-387"><span class="lno">387</span></span>
<span id="line-S-28936-388"><span class="lno">388</span></span>
<span id="line-S-28936-389"><span class="lno">389</span></span>
<span id="line-S-28936-390">390</span>
<span id="line-S-28936-391"><span class="lno">391</span></span>
<span id="line-S-28936-392"><span class="lno">392</span></span>
<span id="line-S-28936-393"><span class="lno">393</span></span>
<span id="line-S-28936-394"><span class="lno">394</span></span>
<span id="line-S-28936-395">395</span>
<span id="line-S-28936-396"><span class="lno">396</span></span>
<span id="line-S-28936-397"><span class="lno">397</span></span>
<span id="line-S-28936-398"><span class="lno">398</span></span>
<span id="line-S-28936-399"><span class="lno">399</span></span>
<span id="line-S-28936-400">400</span>
<span id="line-S-28936-401"><span class="lno">401</span></span>
<span id="line-S-28936-402"><span class="lno">402</span></span>
<span id="line-S-28936-403"><span class="lno">403</span></span>
<span id="line-S-28936-404"><span class="lno">404</span></span>
<span id="line-S-28936-405">405</span>
<span id="line-S-28936-406"><span class="lno">406</span></span>
<span id="line-S-28936-407"><span class="lno">407</span></span>
<span id="line-S-28936-408"><span class="lno">408</span></span>
<span id="line-S-28936-409"><span class="lno">409</span></span>
<span id="line-S-28936-410">410</span>
<span id="line-S-28936-411"><span class="lno">411</span></span>
<span id="line-S-28936-412"><span class="lno">412</span></span>
<span id="line-S-28936-413"><span class="lno">413</span></span>
<span id="line-S-28936-414"><span class="lno">414</span></span>
<span id="line-S-28936-415">415</span>
<span id="line-S-28936-416"><span class="lno">416</span></span>
<span id="line-S-28936-417"><span class="lno">417</span></span>
<span id="line-S-28936-418"><span class="lno">418</span></span>
<span id="line-S-28936-419"><span class="lno">419</span></span>
<span id="line-S-28936-420">420</span>
<span id="line-S-28936-421"><span class="lno">421</span></span>
<span id="line-S-28936-422"><span class="lno">422</span></span>
<span id="line-S-28936-423"><span class="lno">423</span></span>
<span id="line-S-28936-424"><span class="lno">424</span></span>
<span id="line-S-28936-425">425</span>
<span id="line-S-28936-426"><span class="lno">426</span></span>
<span id="line-S-28936-427"><span class="lno">427</span></span>
<span id="line-S-28936-428"><span class="lno">428</span></span>
<span id="line-S-28936-429"><span class="lno">429</span></span>
<span id="line-S-28936-430">430</span>
<span id="line-S-28936-431"><span class="lno">431</span></span>
<span id="line-S-28936-432"><span class="lno">432</span></span>
<span id="line-S-28936-433"><span class="lno">433</span></span>
<span id="line-S-28936-434"><span class="lno">434</span></span>
<span id="line-S-28936-435">435</span>
<span id="line-S-28936-436"><span class="lno">436</span></span>
<span id="line-S-28936-437"><span class="lno">437</span></span>
<span id="line-S-28936-438"><span class="lno">438</span></span>
<span id="line-S-28936-439"><span class="lno">439</span></span>
<span id="line-S-28936-440">440</span>
<span id="line-S-28936-441"><span class="lno">441</span></span>
<span id="line-S-28936-442"><span class="lno">442</span></span>
<span id="line-S-28936-443"><span class="lno">443</span></span>
<span id="line-S-28936-444"><span class="lno">444</span></span>
<span id="line-S-28936-445">445</span>
<span id="line-S-28936-446"><span class="lno">446</span></span>
<span id="line-S-28936-447"><span class="lno">447</span></span>
<span id="line-S-28936-448"><span class="lno">448</span></span>
<span id="line-S-28936-449"><span class="lno">449</span></span>
<span id="line-S-28936-450">450</span>
<span id="line-S-28936-451"><span class="lno">451</span></span>
<span id="line-S-28936-452"><span class="lno">452</span></span>
<span id="line-S-28936-453"><span class="lno">453</span></span>
<span id="line-S-28936-454"><span class="lno">454</span></span>
<span id="line-S-28936-455">455</span>
<span id="line-S-28936-456"><span class="lno">456</span></span>
<span id="line-S-28936-457"><span class="lno">457</span></span>
<span id="line-S-28936-458"><span class="lno">458</span></span>
<span id="line-S-28936-459"><span class="lno">459</span></span>
<span id="line-S-28936-460">460</span>
<span id="line-S-28936-461"><span class="lno">461</span></span>
<span id="line-S-28936-462"><span class="lno">462</span></span>
<span id="line-S-28936-463"><span class="lno">463</span></span>
<span id="line-S-28936-464"><span class="lno">464</span></span>
<span id="line-S-28936-465">465</span>
<span id="line-S-28936-466"><span class="lno">466</span></span>
<span id="line-S-28936-467"><span class="lno">467</span></span>
<span id="line-S-28936-468"><span class="lno">468</span></span>
<span id="line-S-28936-469"><span class="lno">469</span></span>
<span id="line-S-28936-470">470</span>
<span id="line-S-28936-471"><span class="lno">471</span></span>
<span id="line-S-28936-472"><span class="lno">472</span></span>
<span id="line-S-28936-473"><span class="lno">473</span></span>
<span id="line-S-28936-474"><span class="lno">474</span></span>
<span id="line-S-28936-475">475</span>
<span id="line-S-28936-476"><span class="lno">476</span></span>
<span id="line-S-28936-477"><span class="lno">477</span></span>
<span id="line-S-28936-478"><span class="lno">478</span></span>
<span id="line-S-28936-479"><span class="lno">479</span></span>
<span id="line-S-28936-480">480</span>
<span id="line-S-28936-481"><span class="lno">481</span></span>
<span id="line-S-28936-482"><span class="lno">482</span></span>
<span id="line-S-28936-483"><span class="lno">483</span></span>
<span id="line-S-28936-484"><span class="lno">484</span></span>
<span id="line-S-28936-485">485</span>
<span id="line-S-28936-486"><span class="lno">486</span></span>
<span id="line-S-28936-487"><span class="lno">487</span></span>
<span id="line-S-28936-488"><span class="lno">488</span></span>
<span id="line-S-28936-489"><span class="lno">489</span></span>
<span id="line-S-28936-490">490</span>
<span id="line-S-28936-491"><span class="lno">491</span></span>
<span id="line-S-28936-492"><span class="lno">492</span></span>
<span id="line-S-28936-493"><span class="lno">493</span></span>
<span id="line-S-28936-494"><span class="lno">494</span></span>
<span id="line-S-28936-495">495</span>
<span id="line-S-28936-496"><span class="lno">496</span></span>
<span id="line-S-28936-497"><span class="lno">497</span></span>
<span id="line-S-28936-498"><span class="lno">498</span></span>
<span id="line-S-28936-499"><span class="lno">499</span></span>
<span id="line-S-28936-500">500</span>
<span id="line-S-28936-501"><span class="lno">501</span></span>
<span id="line-S-28936-502"><span class="lno">502</span></span>
<span id="line-S-28936-503"><span class="lno">503</span></span>
<span id="line-S-28936-504"><span class="lno">504</span></span>
<span id="line-S-28936-505">505</span>
<span id="line-S-28936-506"><span class="lno">506</span></span>
<span id="line-S-28936-507"><span class="lno">507</span></span>
<span id="line-S-28936-508"><span class="lno">508</span></span>
<span id="line-S-28936-509"><span class="lno">509</span></span>
<span id="line-S-28936-510">510</span>
<span id="line-S-28936-511"><span class="lno">511</span></span>
<span id="line-S-28936-512"><span class="lno">512</span></span>
<span id="line-S-28936-513"><span class="lno">513</span></span>
<span id="line-S-28936-514"><span class="lno">514</span></span>
<span id="line-S-28936-515">515</span>
<span id="line-S-28936-516"><span class="lno">516</span></span>
<span id="line-S-28936-517"><span class="lno">517</span></span>
<span id="line-S-28936-518"><span class="lno">518</span></span>
<span id="line-S-28936-519"><span class="lno">519</span></span>
<span id="line-S-28936-520">520</span>
<span id="line-S-28936-521"><span class="lno">521</span></span>
<span id="line-S-28936-522"><span class="lno">522</span></span>
<span id="line-S-28936-523"><span class="lno">523</span></span>
<span id="line-S-28936-524"><span class="lno">524</span></span>
<span id="line-S-28936-525">525</span>
<span id="line-S-28936-526"><span class="lno">526</span></span>
<span id="line-S-28936-527"><span class="lno">527</span></span>
<span id="line-S-28936-528"><span class="lno">528</span></span>
<span id="line-S-28936-529"><span class="lno">529</span></span>
<span id="line-S-28936-530">530</span>
<span id="line-S-28936-531"><span class="lno">531</span></span>
<span id="line-S-28936-532"><span class="lno">532</span></span>
<span id="line-S-28936-533"><span class="lno">533</span></span>
<span id="line-S-28936-534"><span class="lno">534</span></span>
<span id="line-S-28936-535">535</span>
<span id="line-S-28936-536"><span class="lno">536</span></span>
<span id="line-S-28936-537"><span class="lno">537</span></span>
<span id="line-S-28936-538"><span class="lno">538</span></span>
<span id="line-S-28936-539"><span class="lno">539</span></span>
<span id="line-S-28936-540">540</span>
<span id="line-S-28936-541"><span class="lno">541</span></span>
<span id="line-S-28936-542"><span class="lno">542</span></span>
<span id="line-S-28936-543"><span class="lno">543</span></span>
<span id="line-S-28936-544"><span class="lno">544</span></span>
<span id="line-S-28936-545">545</span>
<span id="line-S-28936-546"><span class="lno">546</span></span>
<span id="line-S-28936-547"><span class="lno">547</span></span>
<span id="line-S-28936-548"><span class="lno">548</span></span>
<span id="line-S-28936-549"><span class="lno">549</span></span>
<span id="line-S-28936-550">550</span>
<span id="line-S-28936-551"><span class="lno">551</span></span>
<span id="line-S-28936-552"><span class="lno">552</span></span>
<span id="line-S-28936-553"><span class="lno">553</span></span>
<span id="line-S-28936-554"><span class="lno">554</span></span>
<span id="line-S-28936-555">555</span>
<span id="line-S-28936-556"><span class="lno">556</span></span>
<span id="line-S-28936-557"><span class="lno">557</span></span>
<span id="line-S-28936-558"><span class="lno">558</span></span>
<span id="line-S-28936-559"><span class="lno">559</span></span>
<span id="line-S-28936-560">560</span>
<span id="line-S-28936-561"><span class="lno">561</span></span>
<span id="line-S-28936-562"><span class="lno">562</span></span>
<span id="line-S-28936-563"><span class="lno">563</span></span>
<span id="line-S-28936-564"><span class="lno">564</span></span>
<span id="line-S-28936-565">565</span>
<span id="line-S-28936-566"><span class="lno">566</span></span>
<span id="line-S-28936-567"><span class="lno">567</span></span>
<span id="line-S-28936-568"><span class="lno">568</span></span>
<span id="line-S-28936-569"><span class="lno">569</span></span>
<span id="line-S-28936-570">570</span>
<span id="line-S-28936-571"><span class="lno">571</span></span>
<span id="line-S-28936-572"><span class="lno">572</span></span>
<span id="line-S-28936-573"><span class="lno">573</span></span>
<span id="line-S-28936-574"><span class="lno">574</span></span>
<span id="line-S-28936-575">575</span>
<span id="line-S-28936-576"><span class="lno">576</span></span>
<span id="line-S-28936-577"><span class="lno">577</span></span>
<span id="line-S-28936-578"><span class="lno">578</span></span>
<span id="line-S-28936-579"><span class="lno">579</span></span>
<span id="line-S-28936-580">580</span>
<span id="line-S-28936-581"><span class="lno">581</span></span>
<span id="line-S-28936-582"><span class="lno">582</span></span>
<span id="line-S-28936-583"><span class="lno">583</span></span>
<span id="line-S-28936-584"><span class="lno">584</span></span>
<span id="line-S-28936-585">585</span>
<span id="line-S-28936-586"><span class="lno">586</span></span>
<span id="line-S-28936-587"><span class="lno">587</span></span>
<span id="line-S-28936-588"><span class="lno">588</span></span>
<span id="line-S-28936-589"><span class="lno">589</span></span>
<span id="line-S-28936-590">590</span>
<span id="line-S-28936-591"><span class="lno">591</span></span>
<span id="line-S-28936-592"><span class="lno">592</span></span>
<span id="line-S-28936-593"><span class="lno">593</span></span>
<span id="line-S-28936-594"><span class="lno">594</span></span>
<span id="line-S-28936-595">595</span>
<span id="line-S-28936-596"><span class="lno">596</span></span>
<span id="line-S-28936-597"><span class="lno">597</span></span>
<span id="line-S-28936-598"><span class="lno">598</span></span>
<span id="line-S-28936-599"><span class="lno">599</span></span>
<span id="line-S-28936-600">600</span>
<span id="line-S-28936-601"><span class="lno">601</span></span>
<span id="line-S-28936-602"><span class="lno">602</span></span>
<span id="line-S-28936-603"><span class="lno">603</span></span>
<span id="line-S-28936-604"><span class="lno">604</span></span>
<span id="line-S-28936-605">605</span>
<span id="line-S-28936-606"><span class="lno">606</span></span>
<span id="line-S-28936-607"><span class="lno">607</span></span>
<span id="line-S-28936-608"><span class="lno">608</span></span>
<span id="line-S-28936-609"><span class="lno">609</span></span>
<span id="line-S-28936-610">610</span>
<span id="line-S-28936-611"><span class="lno">611</span></span>
<span id="line-S-28936-612"><span class="lno">612</span></span>
<span id="line-S-28936-613"><span class="lno">613</span></span>
<span id="line-S-28936-614"><span class="lno">614</span></span>
<span id="line-S-28936-615">615</span>
<span id="line-S-28936-616"><span class="lno">616</span></span>
<span id="line-S-28936-617"><span class="lno">617</span></span>
<span id="line-S-28936-618"><span class="lno">618</span></span>
<span id="line-S-28936-619"><span class="lno">619</span></span>
<span id="line-S-28936-620">620</span>
<span id="line-S-28936-621"><span class="lno">621</span></span>
<span id="line-S-28936-622"><span class="lno">622</span></span>
<span id="line-S-28936-623"><span class="lno">623</span></span>
<span id="line-S-28936-624"><span class="lno">624</span></span>
<span id="line-S-28936-625">625</span>
<span id="line-S-28936-626"><span class="lno">626</span></span>
<span id="line-S-28936-627"><span class="lno">627</span></span>
<span id="line-S-28936-628"><span class="lno">628</span></span>
<span id="line-S-28936-629"><span class="lno">629</span></span>
<span id="line-S-28936-630">630</span>
<span id="line-S-28936-631"><span class="lno">631</span></span>
<span id="line-S-28936-632"><span class="lno">632</span></span>
<span id="line-S-28936-633"><span class="lno">633</span></span>
<span id="line-S-28936-634"><span class="lno">634</span></span>
<span id="line-S-28936-635">635</span>
<span id="line-S-28936-636"><span class="lno">636</span></span>
<span id="line-S-28936-637"><span class="lno">637</span></span>
<span id="line-S-28936-638"><span class="lno">638</span></span>
<span id="line-S-28936-639"><span class="lno">639</span></span>
<span id="line-S-28936-640">640</span>
<span id="line-S-28936-641"><span class="lno">641</span></span>
<span id="line-S-28936-642"><span class="lno">642</span></span>
<span id="line-S-28936-643"><span class="lno">643</span></span>
<span id="line-S-28936-644"><span class="lno">644</span></span>
<span id="line-S-28936-645">645</span>
<span id="line-S-28936-646"><span class="lno">646</span></span>
<span id="line-S-28936-647"><span class="lno">647</span></span>
<span id="line-S-28936-648"><span class="lno">648</span></span>
<span id="line-S-28936-649"><span class="lno">649</span></span>
<span id="line-S-28936-650">650</span>
<span id="line-S-28936-651"><span class="lno">651</span></span>
<span id="line-S-28936-652"><span class="lno">652</span></span>
<span id="line-S-28936-653"><span class="lno">653</span></span>
<span id="line-S-28936-654"><span class="lno">654</span></span>
<span id="line-S-28936-655">655</span>
<span id="line-S-28936-656"><span class="lno">656</span></span>
<span id="line-S-28936-657"><span class="lno">657</span></span>
<span id="line-S-28936-658"><span class="lno">658</span></span>
<span id="line-S-28936-659"><span class="lno">659</span></span>
<span id="line-S-28936-660">660</span>
<span id="line-S-28936-661"><span class="lno">661</span></span>
<span id="line-S-28936-662"><span class="lno">662</span></span>
<span id="line-S-28936-663"><span class="lno">663</span></span>
<span id="line-S-28936-664"><span class="lno">664</span></span>
<span id="line-S-28936-665">665</span>
<span id="line-S-28936-666"><span class="lno">666</span></span>
<span id="line-S-28936-667"><span class="lno">667</span></span>
<span id="line-S-28936-668"><span class="lno">668</span></span>
<span id="line-S-28936-669"><span class="lno">669</span></span>
<span id="line-S-28936-670">670</span>
<span id="line-S-28936-671"><span class="lno">671</span></span>
<span id="line-S-28936-672"><span class="lno">672</span></span>
<span id="line-S-28936-673"><span class="lno">673</span></span>
<span id="line-S-28936-674"><span class="lno">674</span></span>
<span id="line-S-28936-675">675</span>
<span id="line-S-28936-676"><span class="lno">676</span></span>
<span id="line-S-28936-677"><span class="lno">677</span></span>
<span id="line-S-28936-678"><span class="lno">678</span></span>
<span id="line-S-28936-679"><span class="lno">679</span></span>
<span id="line-S-28936-680">680</span>
<span id="line-S-28936-681"><span class="lno">681</span></span>
<span id="line-S-28936-682"><span class="lno">682</span></span>
<span id="line-S-28936-683"><span class="lno">683</span></span>
<span id="line-S-28936-684"><span class="lno">684</span></span>
<span id="line-S-28936-685">685</span>
<span id="line-S-28936-686"><span class="lno">686</span></span>
<span id="line-S-28936-687"><span class="lno">687</span></span>
<span id="line-S-28936-688"><span class="lno">688</span></span>
<span id="line-S-28936-689"><span class="lno">689</span></span>
<span id="line-S-28936-690">690</span>
<span id="line-S-28936-691"><span class="lno">691</span></span>
<span id="line-S-28936-692"><span class="lno">692</span></span>
<span id="line-S-28936-693"><span class="lno">693</span></span>
<span id="line-S-28936-694"><span class="lno">694</span></span>
<span id="line-S-28936-695">695</span>
<span id="line-S-28936-696"><span class="lno">696</span></span>
<span id="line-S-28936-697"><span class="lno">697</span></span>
<span id="line-S-28936-698"><span class="lno">698</span></span>
<span id="line-S-28936-699"><span class="lno">699</span></span>
<span id="line-S-28936-700">700</span>
<span id="line-S-28936-701"><span class="lno">701</span></span>
<span id="line-S-28936-702"><span class="lno">702</span></span>
<span id="line-S-28936-703"><span class="lno">703</span></span>
<span id="line-S-28936-704"><span class="lno">704</span></span>
<span id="line-S-28936-705">705</span>
<span id="line-S-28936-706"><span class="lno">706</span></span>
<span id="line-S-28936-707"><span class="lno">707</span></span>
<span id="line-S-28936-708"><span class="lno">708</span></span>
<span id="line-S-28936-709"><span class="lno">709</span></span>
<span id="line-S-28936-710">710</span>
<span id="line-S-28936-711"><span class="lno">711</span></span>
<span id="line-S-28936-712"><span class="lno">712</span></span>
<span id="line-S-28936-713"><span class="lno">713</span></span>
<span id="line-S-28936-714"><span class="lno">714</span></span>
<span id="line-S-28936-715">715</span>
<span id="line-S-28936-716"><span class="lno">716</span></span>
<span id="line-S-28936-717"><span class="lno">717</span></span>
<span id="line-S-28936-718"><span class="lno">718</span></span>
<span id="line-S-28936-719"><span class="lno">719</span></span>
<span id="line-S-28936-720">720</span>
<span id="line-S-28936-721"><span class="lno">721</span></span>
<span id="line-S-28936-722"><span class="lno">722</span></span>
<span id="line-S-28936-723"><span class="lno">723</span></span>
<span id="line-S-28936-724"><span class="lno">724</span></span>
<span id="line-S-28936-725">725</span>
<span id="line-S-28936-726"><span class="lno">726</span></span>
<span id="line-S-28936-727"><span class="lno">727</span></span>
<span id="line-S-28936-728"><span class="lno">728</span></span>
<span id="line-S-28936-729"><span class="lno">729</span></span>
<span id="line-S-28936-730">730</span>
<span id="line-S-28936-731"><span class="lno">731</span></span>
<span id="line-S-28936-732"><span class="lno">732</span></span>
<span id="line-S-28936-733"><span class="lno">733</span></span>
<span id="line-S-28936-734"><span class="lno">734</span></span>
<span id="line-S-28936-735">735</span>
<span id="line-S-28936-736"><span class="lno">736</span></span>
<span id="line-S-28936-737"><span class="lno">737</span></span>
<span id="line-S-28936-738"><span class="lno">738</span></span>
<span id="line-S-28936-739"><span class="lno">739</span></span>
<span id="line-S-28936-740">740</span>
</pre></td><td valign="top"><pre><code class="language-xml">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                xmlns:array="http://www.w3.org/2005/xpath-functions/array"
                xmlns:db="http://docbook.org/ns/docbook"
                xmlns:f="http://docbook.org/ns/docbook/functions"
                xmlns:fp="http://docbook.org/ns/docbook/functions/private"
                xmlns:l="http://docbook.org/ns/docbook/l10n"
                xmlns:m="http://docbook.org/ns/docbook/modes"
                xmlns:map="http://www.w3.org/2005/xpath-functions/map"
                xmlns:mp="http://docbook.org/ns/docbook/modes/private"
                xmlns:v="http://docbook.org/ns/docbook/variables"
                xmlns:vp="http://docbook.org/ns/docbook/variables/private"
                xmlns:xs="http://www.w3.org/2001/XMLSchema"
                xmlns="http://www.w3.org/1999/xhtml"
                default-mode="m:docbook"
                exclude-result-prefixes="array db f fp l m map mp v vp xs"
                version="3.0"&gt;

&lt;xsl:variable name="fp:class" select="QName('', 'class')"/&gt;

&lt;xsl:function name="f:attributes" as="attribute()*"&gt;
  &lt;xsl:param name="node" as="element()"/&gt;
  &lt;xsl:param name="attributes" as="attribute()*"/&gt;
  &lt;xsl:sequence select="f:attributes($node, $attributes, local-name($node), ())"/&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="f:attributes" as="attribute()*"&gt;
  &lt;xsl:param name="node" as="element()"/&gt;
  &lt;xsl:param name="attributes" as="attribute()*"/&gt;
  &lt;xsl:param name="extra-classes" as="xs:string*"/&gt;
  &lt;xsl:param name="exclude-classes" as="xs:string*"/&gt;

  &lt;!--
  &lt;xsl:message&gt;
    &lt;xsl:text&gt;f:attributes(&lt;/xsl:text&gt;
    &lt;xsl:value-of select="node-name($node)"/&gt;
    &lt;xsl:text&gt;,&lt;/xsl:text&gt;
    &lt;xsl:sequence select="$attributes"/&gt;
    &lt;xsl:text&gt;,&lt;/xsl:text&gt;
    &lt;xsl:sequence select="$extra-classes"/&gt;
    &lt;xsl:text&gt;,&lt;/xsl:text&gt;
    &lt;xsl:sequence select="$exclude-classes"/&gt;
    &lt;xsl:text&gt;)&lt;/xsl:text&gt;
  &lt;/xsl:message&gt;
  --&gt;

  &lt;!-- combine duplicates --&gt;
  &lt;xsl:variable name="names"
                select="distinct-values($attributes/node-name())"/&gt;
  &lt;xsl:for-each select="$names"&gt;
    &lt;xsl:variable name="name" select="."/&gt;
    &lt;xsl:variable name="values" as="xs:string*"
                  select="$attributes[node-name()=$name]/string()"/&gt;
    &lt;xsl:if test="exists($values)"&gt;
      &lt;xsl:attribute name="{$name}"
                     select="string-join($values, ' ')"/&gt;
    &lt;/xsl:if&gt;
  &lt;/xsl:for-each&gt;

  &lt;!-- if there isn't a class attribute, manufacture one --&gt;
  &lt;xsl:if test="not($fp:class = $attributes/node-name())"&gt;
    &lt;xsl:variable name="roles"
                  select="(tokenize(normalize-space(string-join($extra-classes, ' '))),
                           tokenize(normalize-space($node/@role)),
                           if ($node/@revisionflag)
                           then 'rev'||$node/@revisionflag
                           else ())"/&gt;
    &lt;xsl:variable name="exclude" 
                  select="tokenize(normalize-space(string-join($exclude-classes, ' ')))"/&gt;
    &lt;!-- sort them and make them unique --&gt;
    &lt;xsl:variable name="classes" as="xs:string*"&gt;
      &lt;xsl:for-each select="distinct-values($roles)"&gt;
        &lt;xsl:sort select="."/&gt;
        &lt;xsl:if test="not(. = $exclude)"&gt;
          &lt;xsl:sequence select="."/&gt;
        &lt;/xsl:if&gt;
      &lt;/xsl:for-each&gt;
    &lt;/xsl:variable&gt;

    &lt;xsl:if test="exists($classes)"&gt;
      &lt;xsl:attribute name="class" select="string-join($classes, ' ')"/&gt;
    &lt;/xsl:if&gt;
  &lt;/xsl:if&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="f:is-true" as="xs:boolean"&gt;
  &lt;xsl:param name="value"/&gt;

  &lt;xsl:choose&gt;
    &lt;xsl:when test="empty($value)"&gt;
      &lt;xsl:value-of select="false()"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="$value castable as xs:boolean"&gt;
      &lt;xsl:value-of select="xs:boolean($value)"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="$value castable as xs:integer"&gt;
      &lt;xsl:value-of select="xs:integer($value) != 0"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="string($value) = ('true', 'yes')"&gt;
      &lt;xsl:value-of select="true()"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="string($value) = ('false', 'no')"&gt;
      &lt;xsl:value-of select="false()"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:message expand-text="yes"
                   &gt;Warning: interpreting ‘{$value}’ as true.&lt;/xsl:message&gt;
      &lt;xsl:value-of select="true()"/&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="f:orderedlist-startingnumber" as="xs:integer"&gt;
  &lt;xsl:param name="list" as="element(db:orderedlist)"/&gt;

  &lt;xsl:choose&gt;
    &lt;xsl:when test="not($list/@continuation = 'continues')"&gt;
      &lt;xsl:sequence select="1"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="empty($list/preceding::db:orderedlist)"&gt;
      &lt;xsl:message&gt;
        &lt;xsl:text&gt;Warning: orderedlist continuation=continues, &lt;/xsl:text&gt;
        &lt;xsl:text&gt;but no preceding list&lt;/xsl:text&gt;
      &lt;/xsl:message&gt;
      &lt;xsl:sequence select="1"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:variable name="plist" select="$list/preceding::db:orderedlist[1]"/&gt;
      &lt;xsl:sequence select="f:orderedlist-startingnumber($plist)
                            + count($plist/db:listitem)"/&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="f:l10n-language" as="xs:string"&gt;
  &lt;xsl:param name="target" as="element()"/&gt;

  &lt;xsl:variable name="mc-language" as="xs:string"
                select="($gentext-language,
                        $target/ancestor-or-self::*[@xml:lang][1]/@xml:lang,
                        $default-language)[1]"/&gt;

  &lt;xsl:variable name="language" select="translate($mc-language,
                                        'ABCDEFGHIJKLMNOPQRSTUVWXYZ',
                                        'abcdefghijklmnopqrstuvwxyz')"/&gt;

  &lt;xsl:variable name="adjusted-language"
                select="if (contains($language, '-'))
                        then substring-before($language, '-')
                             || '_' || substring-after($language, '-')
                        else $language"/&gt;

  &lt;xsl:choose&gt;
    &lt;xsl:when test="fp:localization($adjusted-language, false())"&gt;
      &lt;xsl:sequence select="$adjusted-language"/&gt;
    &lt;/xsl:when&gt;
    &lt;!-- try just the lang code without country --&gt;
    &lt;xsl:when test="fp:localization(substring-before($adjusted-language,'_'), false())"&gt;
      &lt;xsl:sequence select="substring-before($adjusted-language,'_')"/&gt;
    &lt;/xsl:when&gt;
    &lt;!-- or use the default --&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:message&gt;
        &lt;xsl:text&gt;No localization exists for "&lt;/xsl:text&gt;
        &lt;xsl:sequence select="$adjusted-language"/&gt;
        &lt;xsl:text&gt;" or "&lt;/xsl:text&gt;
        &lt;xsl:sequence select="substring-before($adjusted-language,'_')"/&gt;
        &lt;xsl:text&gt;". Using default "&lt;/xsl:text&gt;
        &lt;xsl:sequence select="$default-language"/&gt;
        &lt;xsl:text&gt;".&lt;/xsl:text&gt;
      &lt;/xsl:message&gt;
      &lt;xsl:sequence select="$default-language"/&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="f:check-gentext" as="item()*"&gt;
  &lt;xsl:param name="node" as="element()"/&gt;
  &lt;xsl:param name="context" as="xs:string"/&gt;
  &lt;xsl:param name="key" as="xs:string"/&gt;
  &lt;xsl:sequence select="fp:gentext($node, $context, $key, false())"/&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="f:gentext-letters" as="element(l:letters)"&gt;
  &lt;xsl:param name="node" as="element()"/&gt;
  &lt;xsl:sequence select="f:gentext-letters-for-language(f:language($node))"/&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="f:gentext-letters-for-language" as="element(l:letters)"&gt;
  &lt;xsl:param name="lang" as="xs:string"/&gt;

  &lt;xsl:variable name="l10n"
                select="fp:existing-localization($lang)"/&gt;

  &lt;xsl:variable name="letters"
                select="$l10n/l:letters"/&gt;

  &lt;xsl:if test="empty($letters)"&gt;
    &lt;xsl:message select="'No letters for', $lang"/&gt;
  &lt;/xsl:if&gt;

  &lt;xsl:variable name="letters"
                select="if (empty($letters))
                        then f:gentext-letters-for-language('en')
                        else $letters"/&gt;

  &lt;xsl:if test="count($letters) gt 1"&gt;
    &lt;xsl:message
        select="'Multiple letters for localization:', $lang"/&gt;
  &lt;/xsl:if&gt;

  &lt;xsl:sequence select="$letters[1]"/&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="fp:properties" as="map(*)"&gt;
  &lt;xsl:param name="context" as="element()"/&gt;
  &lt;xsl:param name="properties" as="array(map(*))"/&gt;

  &lt;xsl:variable name="props" as="map(*)*"&gt;
    &lt;xsl:for-each select="1 to array:size($properties)"&gt;
      &lt;xsl:variable name="map" select="array:get($properties, .)"/&gt;
      &lt;xsl:variable name="nodes" as="node()*"&gt;
        &lt;xsl:evaluate context-item="$context" xpath="$map?xpath"/&gt;
      &lt;/xsl:variable&gt;
      &lt;xsl:if test="exists($nodes)"&gt;
        &lt;xsl:sequence select="$map"/&gt;
      &lt;/xsl:if&gt;
    &lt;/xsl:for-each&gt;
  &lt;/xsl:variable&gt;

  &lt;xsl:choose&gt;
    &lt;xsl:when test="empty($props)"&gt;
      &lt;xsl:message use-when="'properties' = $v:debug"
          select="'No properties for ' || local-name($context)"/&gt;
      &lt;xsl:sequence select="map { }"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:sequence select="$props[1]"/&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="f:date-format" as="xs:string"&gt;
  &lt;xsl:param name="context" as="element()"/&gt;

  &lt;xsl:variable name="format"
                select="f:pi($context, 'date-format')"/&gt;

  &lt;xsl:choose&gt;
    &lt;xsl:when test="$context/*"&gt;
      &lt;xsl:sequence select="'apply-templates'"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="string($context) castable as xs:dateTime"&gt;
      &lt;xsl:choose&gt;
        &lt;xsl:when test="$format"&gt;
          &lt;xsl:sequence select="$format"/&gt;
        &lt;/xsl:when&gt;
        &lt;xsl:otherwise&gt;
          &lt;xsl:sequence select="$date-dateTime-format"/&gt;
        &lt;/xsl:otherwise&gt;
      &lt;/xsl:choose&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="string($context) castable as xs:date"&gt;
      &lt;xsl:choose&gt;
        &lt;xsl:when test="$format"&gt;
          &lt;xsl:sequence select="$format"/&gt;
        &lt;/xsl:when&gt;
        &lt;xsl:otherwise&gt;
          &lt;xsl:sequence select="$date-date-format"/&gt;
        &lt;/xsl:otherwise&gt;
      &lt;/xsl:choose&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:sequence select="'apply-templates'"/&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:function&gt;

&lt;!-- ============================================================ --&gt;

&lt;xsl:function name="f:post-label-punctuation" as="xs:string?"&gt;
  &lt;xsl:param name="node" as="element()"/&gt;
  &lt;xsl:sequence select="f:post-label-punctuation($node, ())"/&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="f:post-label-punctuation" as="xs:string?"&gt;
  &lt;xsl:param name="node" as="element()"/&gt;
  &lt;xsl:param name="context" as="xs:string?"/&gt;
  &lt;xsl:sequence select="if ($context = 'xref')
                        then ()
                        else '.'"/&gt;
&lt;/xsl:function&gt;

&lt;!-- ============================================================ --&gt;

&lt;xsl:function name="fp:replace-element" as="array(*)"&gt;
  &lt;xsl:param name="lines" as="array(*)"/&gt;
  &lt;xsl:param name="elemno" as="xs:integer"/&gt;
  &lt;xsl:param name="new-elem" as="item()*"/&gt;
  &lt;xsl:sequence
      select="fp:replace-element($lines, $elemno, 1, $new-elem, [])"/&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="fp:replace-element" as="array(*)"&gt;
  &lt;!-- See https://saxonica.plan.io/issues/4500 --&gt;
  &lt;!-- reimplement this with array:join when that but is fixed --&gt;
  &lt;xsl:param name="array" as="array(*)"/&gt;
  &lt;xsl:param name="elemno" as="xs:integer"/&gt;
  &lt;xsl:param name="count" as="xs:integer"/&gt;
  &lt;xsl:param name="new-elem" as="item()*"/&gt;
  &lt;xsl:param name="newarray" as="array(*)"/&gt;

  &lt;xsl:choose&gt;
    &lt;xsl:when test="$count gt array:size($array)"&gt;
      &lt;xsl:sequence select="$newarray"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="$count = $elemno"&gt;
      &lt;xsl:sequence
          select="fp:replace-element($array, $elemno, $count+1, $new-elem,
                                     array:append($newarray, $new-elem))"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:sequence
          select="fp:replace-element($array, $elemno, $count+1, $new-elem,
                                     array:append($newarray, $array($count)))"/&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="f:target" as="element()*" cache="yes"&gt;
  &lt;xsl:param name="id" as="xs:string"/&gt;
  &lt;xsl:param name="context" as="node()"/&gt;
  &lt;xsl:sequence select="key('id', $id, root($context))"/&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="f:href" as="xs:string" cache="yes"&gt;
  &lt;xsl:param name="context" as="node()"/&gt;
  &lt;xsl:param name="node" as="element()"/&gt;
  &lt;xsl:sequence select="'#' || f:generate-id($node)"/&gt;
&lt;/xsl:function&gt;

&lt;xsl:variable name="vp:gidmap" select="map {
  'acknowledgements': 'ack',
  'appendix': 'ap',
  'book': 'bo',
  'chapter': 'ch',
  'colophon': 'co',
  'dedication': 'ded',
  'equation': 'eq',
  'example': 'ex',
  'figure': 'fig',
  'part': 'part',
  'preface': 'p',
  'procedure': 'proc',
  'refentry': 're',
  'reference': 'ref',
  'refsect1': 'rs1',
  'refsect2': 'rs2',
  'refsect3': 'rs3',
  'sect1': 's1_',
  'sect2': 's2_',
  'sect3': 's3_',
  'sect4': 's4_',
  'sect5': 's5_',
  'section': 's',
  'table': 'tab',
  'glossary': 'g',
  'glossdiv': 'gd',
  'glossentry': 'ge',
  'glossterm': 'gt',
  'bibliography': 'bi',
  'bibliodiv': 'bd'
  }"/&gt;

&lt;xsl:function name="f:generate-id" as="xs:string" cache="yes"&gt;
  &lt;xsl:param name="node" as="element()"/&gt;
  &lt;xsl:choose&gt;
    &lt;xsl:when test="$node/@xml:id"&gt;
      &lt;xsl:sequence select="string($node/@xml:id)"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="empty($node/parent::*)"&gt;
      &lt;xsl:sequence select="$generated-id-root"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:variable name="aid" select="f:generate-id($node/parent::*)"/&gt;
      &lt;xsl:variable name="type" select="(map:get($vp:gidmap, local-name($node)),
                                         local-name($node))[1]"/&gt;
      &lt;xsl:variable name="prec"
                    select="$node/preceding-sibling::*[node-name(.)=node-name($node)]"/&gt;
      &lt;xsl:sequence
          select="$aid || $generated-id-sep || $type || string(count($prec)+1)"/&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="f:id" as="xs:string" cache="yes"&gt;
  &lt;xsl:param name="node" as="element()"/&gt;
  &lt;xsl:sequence select="if ($node/@xml:id)
                        then $node/@xml:id
                        else f:generate-id($node)"/&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="f:pi" as="xs:string?"&gt;
  &lt;xsl:param name="context" as="node()?"/&gt;
  &lt;xsl:param name="property" as="xs:string"/&gt;
  &lt;xsl:sequence select="f:pi($context, $property, ())"/&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="f:pi" as="xs:string*"&gt;
  &lt;xsl:param name="context" as="node()?"/&gt;
  &lt;xsl:param name="property" as="xs:string"/&gt;
  &lt;xsl:param name="default" as="xs:string*"/&gt;

  &lt;xsl:choose&gt;
    &lt;xsl:when test="empty($context)"&gt;
      &lt;xsl:sequence select="$default"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:sequence select="fp:pi-from-list(($context/processing-instruction('db'),
                                             root($context)/processing-instruction('db')),
                                            $property, $default)"/&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="fp:pi-from-list" as="xs:string*"&gt;
  &lt;xsl:param name="pis" as="processing-instruction()*"/&gt;
  &lt;xsl:param name="property" as="xs:string"/&gt;
  &lt;xsl:param name="default" as="xs:string*"/&gt;

  &lt;xsl:variable name="value"
                select="f:pi-attributes($pis)/@*[local-name(.) = $property]/string()"/&gt;

  &lt;xsl:sequence select="if (empty($value))
                        then $default
                        else $value"/&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="f:pi-attributes" as="element()?"&gt;
  &lt;xsl:param name="pis" as="processing-instruction()*"/&gt;

  &lt;xsl:variable name="attributes"
                select="fp:pi-attributes($pis, map { })"/&gt;

  &lt;xsl:element name="pis" namespace=""&gt;
    &lt;xsl:for-each select="map:keys($attributes)"&gt;
      &lt;xsl:attribute name="{.}" select="map:get($attributes, .)"/&gt;
    &lt;/xsl:for-each&gt;
  &lt;/xsl:element&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="fp:pi-attributes" as="map(*)?"&gt;
  &lt;xsl:param name="pis" as="processing-instruction()*"/&gt;
  &lt;xsl:param name="pimap" as="map(*)"/&gt;

  &lt;xsl:choose&gt;
    &lt;xsl:when test="empty($pis)"&gt;
      &lt;xsl:sequence select="$pimap"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:variable name="map" select="fp:pi-pi-attributes($pimap,
                                          normalize-space($pis[1]))"/&gt;
      &lt;xsl:sequence select="fp:pi-attributes(subsequence($pis, 2), $map)"/&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:function&gt;

&lt;xsl:variable name="vp:pi-match"
              select="'^.*?(\c+)=[''&amp;quot;](.*?)[''&amp;quot;](.*)$'"/&gt;
&lt;xsl:function name="fp:pi-pi-attributes" as="map(*)"&gt;
  &lt;xsl:param name="pimap" as="map(*)"/&gt;
  &lt;xsl:param name="text" as="xs:string"/&gt;

  &lt;xsl:choose&gt;
    &lt;xsl:when test="matches($text, $vp:pi-match)"&gt;
      &lt;xsl:variable name="aname" select="replace($text, $vp:pi-match, '$1')"/&gt;
      &lt;xsl:variable name="avalue" select="replace($text, $vp:pi-match, '$2')"/&gt;
      &lt;xsl:variable name="rest" select="replace($text, $vp:pi-match, '$3')"/&gt;
      &lt;xsl:sequence select="fp:pi-pi-attributes(map:put($pimap, $aname, $avalue),
                                                $rest)"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:sequence select="$pimap"/&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="f:spaces" as="xs:string?"&gt;
  &lt;xsl:param name="length" as="item()*"/&gt;

  &lt;xsl:choose&gt;
    &lt;xsl:when test="empty($length)"/&gt;
    &lt;xsl:when test="count($length) gt 1"&gt;
      &lt;xsl:sequence
          select="f:spaces(string-join($length ! string(.), ''))"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="$length castable as xs:integer"&gt;
      &lt;xsl:variable name="length" select="xs:integer($length)"/&gt;
      &lt;xsl:choose&gt;
        &lt;xsl:when test="$length lt 0"/&gt;
        &lt;xsl:when test="$length lt 10"&gt;
          &lt;xsl:sequence select="substring('          ', 1, $length)"/&gt;
        &lt;/xsl:when&gt;
        &lt;xsl:otherwise&gt;
          &lt;xsl:sequence select="'          ' || f:spaces($length - 10)"/&gt;
        &lt;/xsl:otherwise&gt;
      &lt;/xsl:choose&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:sequence select="f:spaces(string-length(string($length)))"/&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:function&gt;

&lt;!-- ============================================================ --&gt;

&lt;xsl:function name="fp:lookup-string" as="node()*"&gt;
  &lt;xsl:param name="context" as="element()"/&gt;
  &lt;xsl:param name="lookup" as="element()"/&gt;
  &lt;xsl:param name="table-name" as="xs:string"/&gt;

  &lt;xsl:variable name="value"
                select="$lookup/*[node-name(.)=node-name($context)]"/&gt;

  &lt;xsl:if test="count($value) gt 1"&gt;
    &lt;xsl:message expand-text="yes"
                 &gt;Duplicate {$table-name} for {node-name($context)}&lt;/xsl:message&gt;
  &lt;/xsl:if&gt;

  &lt;xsl:sequence select="if (empty($value))
                        then $lookup/db:_default/node()
                        else $value[1]/node()"/&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="fp:separator" as="node()*"&gt;
  &lt;xsl:param name="node" as="element()"/&gt;
  &lt;xsl:param name="context" as="xs:string"/&gt;
  &lt;xsl:choose&gt;
    &lt;xsl:when test="f:check-gentext($node, $context, local-name($node))"&gt;
      &lt;xsl:sequence
          select="f:gentext($node, $context, local-name($node))"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:sequence
          select="f:gentext($node, $context, '_default')"/&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="f:label-separator" as="node()*"&gt;
  &lt;xsl:param name="node" as="element()"/&gt;
  &lt;xsl:sequence select="fp:separator($node, 'label-separator')"/&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="f:number-separator" as="node()*"&gt;
  &lt;xsl:param name="node" as="element()"/&gt;
  &lt;xsl:sequence select="fp:separator($node, 'number-separator')"/&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="f:intra-number-separator" as="node()*"&gt;
  &lt;xsl:param name="node" as="element()"/&gt;
  &lt;xsl:sequence select="fp:separator($node, 'intra-number-separator')"/&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="fp:label-format" as="node()*"&gt;
  &lt;xsl:param name="node" as="element()"/&gt;
  &lt;xsl:sequence select="fp:separator($node, 'label-format')"/&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="fp:parse-key-value-pairs" as="map(xs:string,xs:string)"&gt;
  &lt;xsl:param name="strings" as="xs:string*"/&gt;
  &lt;xsl:sequence select="fp:parse-key-value-pairs($strings, map { })"/&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="fp:parse-key-value-pairs" as="map(xs:string,xs:string)"&gt;
  &lt;xsl:param name="strings" as="xs:string*"/&gt;
  &lt;xsl:param name="map" as="map(xs:string,xs:string)"/&gt;

  &lt;xsl:variable name="car" select="$strings[1]"/&gt;
  &lt;xsl:variable name="cdr" select="subsequence($strings, 2)"/&gt;

  &lt;xsl:variable name="key" select="if (contains($car, ':'))
                                   then substring-before($car, ':')
                                   else '_default'"/&gt;
  &lt;xsl:variable name="value" select="if (contains($car, ':'))
                                     then substring-after($car, ':')
                                     else $car"/&gt;

  &lt;xsl:choose&gt;
    &lt;xsl:when test="empty($car)"&gt;
      &lt;xsl:sequence select="$map"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="map:contains($map, $key)"&gt;
      &lt;xsl:message select="'Warning: ignoring duplicate key:', $key"/&gt;
      &lt;xsl:sequence select="fp:parse-key-value-pairs($cdr, $map)"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:sequence select="fp:parse-key-value-pairs($cdr,
                               map:put($map, $key, $value))"/&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="f:refsection" as="xs:boolean"&gt;
  &lt;xsl:param name="node" as="element()"/&gt;
  &lt;xsl:sequence select="$node/self::db:refsection
                        or $node/self::db:refsect1
                        or $node/self::db:refsect2
                        or $node/self::db:refsect3"/&gt;
&lt;/xsl:function&gt; 

&lt;xsl:function name="f:section" as="xs:boolean" visibility="public"&gt;
  &lt;xsl:param name="node" as="element()"/&gt;
  &lt;xsl:sequence select="$node/self::db:section
                        or $node/self::db:sect1
                        or $node/self::db:sect2
                        or $node/self::db:sect3
                        or $node/self::db:sect4
                        or $node/self::db:sect5
                        or f:refsection($node)"/&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="f:section-depth" as="xs:integer" visibility="public"&gt;
  &lt;xsl:param name="node" as="element()?"/&gt;
  &lt;xsl:choose&gt;
    &lt;xsl:when test="empty($node)"&gt;
      &lt;xsl:value-of select="0"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="$node/self::db:section"&gt;
      &lt;xsl:value-of select="count($node/ancestor::db:section) + 1"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="$node/self::db:sect1 or $node/self::db:sect2
                    or $node/self::db:sect3 or $node/self::db:sect4
                    or $node/self::db:sect5"&gt;
      &lt;xsl:value-of select="xs:integer(substring(local-name($node), 5))"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="$node/self::db:refsection"&gt;
      &lt;xsl:value-of select="count($node/ancestor::db:refsection)+1"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="$node/self::db:refsect1 or $node/self::db:refsect2
                    or $node/self::db:refsect3"&gt;
      &lt;xsl:value-of select="xs:integer(substring(local-name($node), 8))"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:sequence select="f:section-depth($node/parent::*)"/&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="f:step-number" as="xs:integer+"&gt;
  &lt;xsl:param name="node" as="element(db:step)"/&gt;
  &lt;xsl:iterate select="reverse($node/ancestor-or-self::*)"&gt;
    &lt;xsl:param name="number" select="()"/&gt;
    &lt;xsl:choose&gt;
      &lt;xsl:when test="self::db:procedure"&gt;
        &lt;xsl:sequence select="$number"/&gt;
        &lt;xsl:break/&gt;
      &lt;/xsl:when&gt;
      &lt;xsl:when test="self::db:step"&gt;
        &lt;xsl:next-iteration&gt;
          &lt;xsl:with-param name="number"
                          select="(count(preceding-sibling::db:step)+1, $number)"/&gt;
        &lt;/xsl:next-iteration&gt;
      &lt;/xsl:when&gt;
      &lt;xsl:otherwise&gt;
        &lt;xsl:next-iteration&gt;
          &lt;xsl:with-param name="number" select="$number"/&gt;
        &lt;/xsl:next-iteration&gt;
      &lt;/xsl:otherwise&gt;
    &lt;/xsl:choose&gt;
  &lt;/xsl:iterate&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="f:step-numeration" as="xs:string"&gt;
  &lt;xsl:param name="node" as="element(db:step)"/&gt;
  &lt;xsl:variable name="depth"
                select="count(f:step-number($node))"/&gt;
  &lt;xsl:variable name="depth"
                select="$depth
                        mod string-length($procedure-step-numeration)"/&gt;
  &lt;xsl:variable name="depth"
                select="if ($depth eq 0)
                        then string-length($procedure-step-numeration)
                        else $depth"/&gt;
  &lt;xsl:sequence select="substring($procedure-step-numeration, $depth, 1)"/&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="f:orderedlist-item-number" as="xs:integer+"&gt;
  &lt;xsl:param name="node" as="element(db:listitem)"/&gt;
  &lt;xsl:iterate select="reverse($node/ancestor-or-self::*)"&gt;
    &lt;xsl:param name="number" select="()"/&gt;
    &lt;xsl:on-completion select="$number"/&gt;
    &lt;xsl:choose&gt;
      &lt;xsl:when test="self::db:listitem[parent::db:orderedlist]"&gt;
        &lt;xsl:next-iteration&gt;
          &lt;xsl:with-param name="number"
                          select="(count(preceding-sibling::db:listitem)
                                   + f:orderedlist-startingnumber(parent::db:orderedlist),
                                   $number)"/&gt;
        &lt;/xsl:next-iteration&gt;
      &lt;/xsl:when&gt;
      &lt;xsl:otherwise&gt;
        &lt;xsl:next-iteration&gt;
          &lt;xsl:with-param name="number" select="$number"/&gt;
        &lt;/xsl:next-iteration&gt;
      &lt;/xsl:otherwise&gt;
    &lt;/xsl:choose&gt;
  &lt;/xsl:iterate&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="f:orderedlist-item-numeration" as="xs:string"&gt;
  &lt;xsl:param name="node" as="element(db:listitem)"/&gt;
  &lt;xsl:variable name="depth"
                select="count(f:orderedlist-item-number($node))"/&gt;
  &lt;xsl:variable name="depth"
                select="$depth
                        mod string-length($orderedlist-item-numeration)"/&gt;
  &lt;xsl:variable name="depth"
                select="if ($depth eq 0)
                        then string-length($orderedlist-item-numeration)
                        else $depth"/&gt;
  &lt;xsl:sequence select="substring($orderedlist-item-numeration, $depth, 1)"/&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="f:tokenize-on-char" as="xs:string*"&gt;
  &lt;xsl:param name="string" as="xs:string"/&gt;
  &lt;xsl:param name="char" as="xs:string"/&gt;

  &lt;xsl:variable name="ch" select="substring($char||' ', 1, 1)"/&gt;

  &lt;xsl:variable name="tchar"
                select="if ($ch = ('.', '?', '*', '{', '}', '\', '\[', '\]'))
                        then '\' || $ch
                        else $ch"/&gt;

  &lt;xsl:sequence select="tokenize($string, $tchar)"/&gt;
&lt;/xsl:function&gt;

&lt;/xsl:stylesheet&gt;
</code></pre></td></tr></table></div></div></div></div><div class="stylesheet" id="S-46450"><h3>toc.xsl</h3><p><span><span class="template all">30 templates</span></span>, <span><span class="FIXME: comment all">1 FIXME: comment</span></span></p><div class="instructions"><div class="title closed">Instructions</div><div class="body"><div id="S-46450-t-1" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ *</div><div class="props"><div class="mode">Mode: <code>m:toc</code></div><div class="matches">Matches: <code>*</code></div></div></div><div id="S-46450-t-2" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ *</div><div class="props"><div class="uses">Uses: <a href="#S-26643-docbook.org.ns.docbook.variables.private.section-toc-depth">$vp:section-toc-depth</a>, <a href="#S-26643-..generate-nested-toc">$generate-nested-toc</a>, <a href="#S-26643-..generate-toc">$generate-toc</a></div><div class="calls">Calls: <a href="#S-28936-docbook.org.ns.docbook.functions.is-true,1">f:is-true()</a>, <a href="#S-28936-docbook.org.ns.docbook.functions.pi,3">f:pi()</a></div><div class="calls">Calls: <a href="#S-46450-docbook.org.ns.docbook.templates.private.toc">tp:toc</a></div><div class="mode">Mode: <code>mp:toc</code></div><div class="matches">Matches: <code>*</code></div></div></div><div id="S-46450-t-3" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:book|db:part|db:reference|d…</div><div class="props"><div class="mode">Mode: <code>m:toc</code></div><div class="matches">Matches: <code>db:book</code>, <code>db:part</code>, <code>db:reference</code>, <code>db:set</code></div></div></div><div id="S-46450-t-4" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:acknowledgements|db:bibliod…</div><div class="props"><div class="mode">Mode: <code>m:toc</code></div><div class="matches">Matches: <code>db:acknowledgements</code>, <code>db:bibliodiv</code>, <code>db:colophon</code>, <code>db:dedication</code>, <code>db:glossdiv</code>, <code>db:indexdiv</code>, <code>db:partintro</code></div></div></div><div id="S-46450-t-5" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:equation|db:example|db:figu…</div><div class="props"><div class="mode">Mode: <code>m:toc</code></div><div class="matches">Matches: <code>db:equation</code>, <code>db:example</code>, <code>db:figure</code>, <code>db:formalgroup</code>, <code>db:procedure</code>, <code>db:table</code></div></div></div><div id="S-46450-t-6" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:article</div><div class="props"><div class="mode">Mode: <code>m:toc</code></div><div class="matches">Matches: <code>db:article</code></div></div></div><div id="S-46450-t-7" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:topic</div><div class="props"><div class="mode">Mode: <code>m:toc</code></div><div class="matches">Matches: <code>db:topic</code></div></div></div><div id="S-46450-t-8" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:appendix|db:chapter|db:pref…</div><div class="props"><div class="mode">Mode: <code>m:toc</code></div><div class="matches">Matches: <code>db:appendix</code>, <code>db:chapter</code>, <code>db:preface</code></div></div></div><div id="S-46450-t-9" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:bibliography|db:glossary|db…</div><div class="props"><div class="mode">Mode: <code>m:toc</code></div><div class="matches">Matches: <code>db:bibliography</code>, <code>db:glossary</code>, <code>db:index</code></div></div></div><div id="S-46450-t-10" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:refentry</div><div class="props"><div class="mode">Mode: <code>m:toc</code></div><div class="matches">Matches: <code>db:refentry</code></div></div></div><div id="S-46450-t-11" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:refsect1|db:refsect2|db:ref…</div><div class="props"><div class="mode">Mode: <code>m:toc</code></div><div class="matches">Matches: <code>db:refsect1</code>, <code>db:refsect2</code>, <code>db:refsect3</code>, <code>db:refsection</code></div></div></div><div id="S-46450-t-12" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:sect1|db:sect2|db:sect3|db:…</div><div class="props"><div class="mode">Mode: <code>m:toc</code></div><div class="matches">Matches: <code>db:sect1</code>, <code>db:sect2</code>, <code>db:sect3</code>, <code>db:sect4</code>, <code>db:sect5</code>, <code>db:section</code></div></div></div><div id="S-46450-t-13" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:refsect1|db:refsect2|db:ref…</div><div class="props"><div class="mode">Mode: <code>m:toc</code></div><div class="matches">Matches: <code>db:refsect1</code>, <code>db:refsect2</code>, <code>db:refsect3</code>, <code>db:refsection</code></div></div></div><div id="S-46450-t-14" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ *</div><div class="props"><div class="mode">Mode: <code>m:list-of-figures</code></div><div class="matches">Matches: <code>*</code></div></div></div><div id="S-46450-t-15" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:book|db:set</div><div class="props"><div class="uses">Uses: <a href="#S-26643-..lists-of-figures">$lists-of-figures</a></div><div class="calls">Calls: <a href="#S-22317-docbook.org.ns.docbook.functions.gentext,3">f:gentext()</a>, <a href="#S-28936-docbook.org.ns.docbook.functions.is-true,1">f:is-true()</a></div><div class="mode">Mode: <code>m:list-of-figures</code></div><div class="matches">Matches: <code>db:book</code>, <code>db:set</code></div></div></div><div id="S-46450-t-16" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ *</div><div class="props"><div class="mode">Mode: <code>m:list-of-tables</code></div><div class="matches">Matches: <code>*</code></div></div></div><div id="S-46450-t-17" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:book|db:set</div><div class="props"><div class="uses">Uses: <a href="#S-26643-..lists-of-tables">$lists-of-tables</a></div><div class="calls">Calls: <a href="#S-22317-docbook.org.ns.docbook.functions.gentext,3">f:gentext()</a>, <a href="#S-28936-docbook.org.ns.docbook.functions.is-true,1">f:is-true()</a></div><div class="mode">Mode: <code>m:list-of-tables</code></div><div class="matches">Matches: <code>db:book</code>, <code>db:set</code></div></div></div><div id="S-46450-t-18" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ *</div><div class="props"><div class="mode">Mode: <code>m:list-of-examples</code></div><div class="matches">Matches: <code>*</code></div></div></div><div id="S-46450-t-19" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:book|db:set</div><div class="props"><div class="uses">Uses: <a href="#S-26643-..lists-of-examples">$lists-of-examples</a></div><div class="calls">Calls: <a href="#S-22317-docbook.org.ns.docbook.functions.gentext,3">f:gentext()</a>, <a href="#S-28936-docbook.org.ns.docbook.functions.is-true,1">f:is-true()</a></div><div class="mode">Mode: <code>m:list-of-examples</code></div><div class="matches">Matches: <code>db:book</code>, <code>db:set</code></div></div></div><div id="S-46450-t-20" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ *</div><div class="props"><div class="mode">Mode: <code>m:list-of-equations</code></div><div class="matches">Matches: <code>*</code></div></div></div><div id="S-46450-t-21" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:book|db:set</div><div class="props"><div class="uses">Uses: <a href="#S-26643-..lists-of-equations">$lists-of-equations</a></div><div class="calls">Calls: <a href="#S-22317-docbook.org.ns.docbook.functions.gentext,3">f:gentext()</a>, <a href="#S-28936-docbook.org.ns.docbook.functions.is-true,1">f:is-true()</a></div><div class="mode">Mode: <code>m:list-of-equations</code></div><div class="matches">Matches: <code>db:book</code>, <code>db:set</code></div></div></div><div id="S-46450-t-22" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ *</div><div class="props"><div class="mode">Mode: <code>m:list-of-procedures</code></div><div class="matches">Matches: <code>*</code></div></div></div><div id="S-46450-t-23" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:book|db:set</div><div class="props"><div class="uses">Uses: <a href="#S-26643-..lists-of-procedures">$lists-of-procedures</a></div><div class="calls">Calls: <a href="#S-22317-docbook.org.ns.docbook.functions.gentext,3">f:gentext()</a>, <a href="#S-28936-docbook.org.ns.docbook.functions.is-true,1">f:is-true()</a></div><div class="mode">Mode: <code>m:list-of-procedures</code></div><div class="matches">Matches: <code>db:book</code>, <code>db:set</code></div></div></div><div id="S-46450-docbook.org.ns.docbook.templates.private.toc" class="instruction template"><div class="title"><span class="link"></span>Template tp:toc  match ≅ </div><div class="props"><div class="uses">Uses: <a href="#S-26643-..generate-trivial-toc">$generate-trivial-toc</a></div><div class="calls">Calls: <a href="#S-22317-docbook.org.ns.docbook.functions.gentext,3">f:gentext()</a>, <a href="#S-28936-docbook.org.ns.docbook.functions.is-true,1">f:is-true()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-46450-t-2">template</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-46450">modules/toc.xsl</a></div><div class="mode">Mode: <code>m:docbook</code></div></div></div><div id="S-46450-t-25" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:refentry</div><div class="props"><div class="uses">Uses: <a href="#S-26643-..annotate-toc">$annotate-toc</a></div><div class="calls">Calls: <a href="#S-28936-docbook.org.ns.docbook.functions.id,1">f:id()</a>, <a href="#S-28936-docbook.org.ns.docbook.functions.is-true,1">f:is-true()</a></div><div class="mode">Mode: <code>m:toc-entry</code></div><div class="priority">Priority: <code>100</code></div><div class="matches">Matches: <code>db:refentry</code></div></div></div><div id="S-46450-t-26" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ *</div><div class="props"><div class="calls">Calls: <a href="#S-28936-docbook.org.ns.docbook.functions.id,1">f:id()</a></div><div class="mode">Mode: <code>m:toc-entry</code></div><div class="matches">Matches: <code>*</code></div></div></div><div id="S-46450-t-27" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ *</div><div class="props"><div class="mode">Mode: <code>m:toc-entry</code></div><div class="priority">Priority: <code>10</code></div><div class="matches">Matches: <code>*</code></div></div></div><div id="S-46450-t-28" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:bibliodiv|db:colophon|db:gl…</div><div class="props"><div class="mode">Mode: <code>m:toc-entry</code></div><div class="matches">Matches: <code>db:bibliodiv</code>, <code>db:colophon</code>, <code>db:glossdiv</code>, <code>db:indexdiv</code></div></div></div><div id="S-46450-t-29" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:toc|db:tocdiv</div><div class="props"><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:toc</code>, <code>db:tocdiv</code></div></div></div><div id="S-46450-t-30" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:tocentry</div><div class="props"><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:tocentry</code></div></div></div></div></div><div class="instructions"><div class="title closed">FIXME: comments</div><div class="body"><div id="S-46450-c-1" class="instruction comment"><div class="title"><span class="link"></span>Comment</div><div class="props">FIXME: what's the right way to go about this?</div></div></div></div><div class="source-code"><div class="title closed">Source code</div><div class="body"><div><table><tr><td valign="top" align="right"><pre class="fake-prism"><span id="line-S-46450-1">1</span>
<span id="line-S-46450-2"><span class="lno">2</span></span>
<span id="line-S-46450-3"><span class="lno">3</span></span>
<span id="line-S-46450-4"><span class="lno">4</span></span>
<span id="line-S-46450-5">5</span>
<span id="line-S-46450-6"><span class="lno">6</span></span>
<span id="line-S-46450-7"><span class="lno">7</span></span>
<span id="line-S-46450-8"><span class="lno">8</span></span>
<span id="line-S-46450-9"><span class="lno">9</span></span>
<span id="line-S-46450-10">10</span>
<span id="line-S-46450-11"><span class="lno">11</span></span>
<span id="line-S-46450-12"><span class="lno">12</span></span>
<span id="line-S-46450-13"><span class="lno">13</span></span>
<span id="line-S-46450-14"><span class="lno">14</span></span>
<span id="line-S-46450-15">15</span>
<span id="line-S-46450-16"><span class="lno">16</span></span>
<span id="line-S-46450-17"><span class="lno">17</span></span>
<span id="line-S-46450-18"><span class="lno">18</span></span>
<span id="line-S-46450-19"><span class="lno">19</span></span>
<span id="line-S-46450-20">20</span>
<span id="line-S-46450-21"><span class="lno">21</span></span>
<span id="line-S-46450-22"><span class="lno">22</span></span>
<span id="line-S-46450-23"><span class="lno">23</span></span>
<span id="line-S-46450-24"><span class="lno">24</span></span>
<span id="line-S-46450-25">25</span>
<span id="line-S-46450-26"><span class="lno">26</span></span>
<span id="line-S-46450-27"><span class="lno">27</span></span>
<span id="line-S-46450-28"><span class="lno">28</span></span>
<span id="line-S-46450-29"><span class="lno">29</span></span>
<span id="line-S-46450-30">30</span>
<span id="line-S-46450-31"><span class="lno">31</span></span>
<span id="line-S-46450-32"><span class="lno">32</span></span>
<span id="line-S-46450-33"><span class="lno">33</span></span>
<span id="line-S-46450-34"><span class="lno">34</span></span>
<span id="line-S-46450-35">35</span>
<span id="line-S-46450-36"><span class="lno">36</span></span>
<span id="line-S-46450-37"><span class="lno">37</span></span>
<span id="line-S-46450-38"><span class="lno">38</span></span>
<span id="line-S-46450-39"><span class="lno">39</span></span>
<span id="line-S-46450-40">40</span>
<span id="line-S-46450-41"><span class="lno">41</span></span>
<span id="line-S-46450-42"><span class="lno">42</span></span>
<span id="line-S-46450-43"><span class="lno">43</span></span>
<span id="line-S-46450-44"><span class="lno">44</span></span>
<span id="line-S-46450-45">45</span>
<span id="line-S-46450-46"><span class="lno">46</span></span>
<span id="line-S-46450-47"><span class="lno">47</span></span>
<span id="line-S-46450-48"><span class="lno">48</span></span>
<span id="line-S-46450-49"><span class="lno">49</span></span>
<span id="line-S-46450-50">50</span>
<span id="line-S-46450-51"><span class="lno">51</span></span>
<span id="line-S-46450-52"><span class="lno">52</span></span>
<span id="line-S-46450-53"><span class="lno">53</span></span>
<span id="line-S-46450-54"><span class="lno">54</span></span>
<span id="line-S-46450-55">55</span>
<span id="line-S-46450-56"><span class="lno">56</span></span>
<span id="line-S-46450-57"><span class="lno">57</span></span>
<span id="line-S-46450-58"><span class="lno">58</span></span>
<span id="line-S-46450-59"><span class="lno">59</span></span>
<span id="line-S-46450-60">60</span>
<span id="line-S-46450-61"><span class="lno">61</span></span>
<span id="line-S-46450-62"><span class="lno">62</span></span>
<span id="line-S-46450-63"><span class="lno">63</span></span>
<span id="line-S-46450-64"><span class="lno">64</span></span>
<span id="line-S-46450-65">65</span>
<span id="line-S-46450-66"><span class="lno">66</span></span>
<span id="line-S-46450-67"><span class="lno">67</span></span>
<span id="line-S-46450-68"><span class="lno">68</span></span>
<span id="line-S-46450-69"><span class="lno">69</span></span>
<span id="line-S-46450-70">70</span>
<span id="line-S-46450-71"><span class="lno">71</span></span>
<span id="line-S-46450-72"><span class="lno">72</span></span>
<span id="line-S-46450-73"><span class="lno">73</span></span>
<span id="line-S-46450-74"><span class="lno">74</span></span>
<span id="line-S-46450-75">75</span>
<span id="line-S-46450-76"><span class="lno">76</span></span>
<span id="line-S-46450-77"><span class="lno">77</span></span>
<span id="line-S-46450-78"><span class="lno">78</span></span>
<span id="line-S-46450-79"><span class="lno">79</span></span>
<span id="line-S-46450-80">80</span>
<span id="line-S-46450-81"><span class="lno">81</span></span>
<span id="line-S-46450-82"><span class="lno">82</span></span>
<span id="line-S-46450-83"><span class="lno">83</span></span>
<span id="line-S-46450-84"><span class="lno">84</span></span>
<span id="line-S-46450-85">85</span>
<span id="line-S-46450-86"><span class="lno">86</span></span>
<span id="line-S-46450-87"><span class="lno">87</span></span>
<span id="line-S-46450-88"><span class="lno">88</span></span>
<span id="line-S-46450-89"><span class="lno">89</span></span>
<span id="line-S-46450-90">90</span>
<span id="line-S-46450-91"><span class="lno">91</span></span>
<span id="line-S-46450-92"><span class="lno">92</span></span>
<span id="line-S-46450-93"><span class="lno">93</span></span>
<span id="line-S-46450-94"><span class="lno">94</span></span>
<span id="line-S-46450-95">95</span>
<span id="line-S-46450-96"><span class="lno">96</span></span>
<span id="line-S-46450-97"><span class="lno">97</span></span>
<span id="line-S-46450-98"><span class="lno">98</span></span>
<span id="line-S-46450-99"><span class="lno">99</span></span>
<span id="line-S-46450-100">100</span>
<span id="line-S-46450-101"><span class="lno">101</span></span>
<span id="line-S-46450-102"><span class="lno">102</span></span>
<span id="line-S-46450-103"><span class="lno">103</span></span>
<span id="line-S-46450-104"><span class="lno">104</span></span>
<span id="line-S-46450-105">105</span>
<span id="line-S-46450-106"><span class="lno">106</span></span>
<span id="line-S-46450-107"><span class="lno">107</span></span>
<span id="line-S-46450-108"><span class="lno">108</span></span>
<span id="line-S-46450-109"><span class="lno">109</span></span>
<span id="line-S-46450-110">110</span>
<span id="line-S-46450-111"><span class="lno">111</span></span>
<span id="line-S-46450-112"><span class="lno">112</span></span>
<span id="line-S-46450-113"><span class="lno">113</span></span>
<span id="line-S-46450-114"><span class="lno">114</span></span>
<span id="line-S-46450-115">115</span>
<span id="line-S-46450-116"><span class="lno">116</span></span>
<span id="line-S-46450-117"><span class="lno">117</span></span>
<span id="line-S-46450-118"><span class="lno">118</span></span>
<span id="line-S-46450-119"><span class="lno">119</span></span>
<span id="line-S-46450-120">120</span>
<span id="line-S-46450-121"><span class="lno">121</span></span>
<span id="line-S-46450-122"><span class="lno">122</span></span>
<span id="line-S-46450-123"><span class="lno">123</span></span>
<span id="line-S-46450-124"><span class="lno">124</span></span>
<span id="line-S-46450-125">125</span>
<span id="line-S-46450-126"><span class="lno">126</span></span>
<span id="line-S-46450-127"><span class="lno">127</span></span>
<span id="line-S-46450-128"><span class="lno">128</span></span>
<span id="line-S-46450-129"><span class="lno">129</span></span>
<span id="line-S-46450-130">130</span>
<span id="line-S-46450-131"><span class="lno">131</span></span>
<span id="line-S-46450-132"><span class="lno">132</span></span>
<span id="line-S-46450-133"><span class="lno">133</span></span>
<span id="line-S-46450-134"><span class="lno">134</span></span>
<span id="line-S-46450-135">135</span>
<span id="line-S-46450-136"><span class="lno">136</span></span>
<span id="line-S-46450-137"><span class="lno">137</span></span>
<span id="line-S-46450-138"><span class="lno">138</span></span>
<span id="line-S-46450-139"><span class="lno">139</span></span>
<span id="line-S-46450-140">140</span>
<span id="line-S-46450-141"><span class="lno">141</span></span>
<span id="line-S-46450-142"><span class="lno">142</span></span>
<span id="line-S-46450-143"><span class="lno">143</span></span>
<span id="line-S-46450-144"><span class="lno">144</span></span>
<span id="line-S-46450-145">145</span>
<span id="line-S-46450-146"><span class="lno">146</span></span>
<span id="line-S-46450-147"><span class="lno">147</span></span>
<span id="line-S-46450-148"><span class="lno">148</span></span>
<span id="line-S-46450-149"><span class="lno">149</span></span>
<span id="line-S-46450-150">150</span>
<span id="line-S-46450-151"><span class="lno">151</span></span>
<span id="line-S-46450-152"><span class="lno">152</span></span>
<span id="line-S-46450-153"><span class="lno">153</span></span>
<span id="line-S-46450-154"><span class="lno">154</span></span>
<span id="line-S-46450-155">155</span>
<span id="line-S-46450-156"><span class="lno">156</span></span>
<span id="line-S-46450-157"><span class="lno">157</span></span>
<span id="line-S-46450-158"><span class="lno">158</span></span>
<span id="line-S-46450-159"><span class="lno">159</span></span>
<span id="line-S-46450-160">160</span>
<span id="line-S-46450-161"><span class="lno">161</span></span>
<span id="line-S-46450-162"><span class="lno">162</span></span>
<span id="line-S-46450-163"><span class="lno">163</span></span>
<span id="line-S-46450-164"><span class="lno">164</span></span>
<span id="line-S-46450-165">165</span>
<span id="line-S-46450-166"><span class="lno">166</span></span>
<span id="line-S-46450-167"><span class="lno">167</span></span>
<span id="line-S-46450-168"><span class="lno">168</span></span>
<span id="line-S-46450-169"><span class="lno">169</span></span>
<span id="line-S-46450-170">170</span>
<span id="line-S-46450-171"><span class="lno">171</span></span>
<span id="line-S-46450-172"><span class="lno">172</span></span>
<span id="line-S-46450-173"><span class="lno">173</span></span>
<span id="line-S-46450-174"><span class="lno">174</span></span>
<span id="line-S-46450-175">175</span>
<span id="line-S-46450-176"><span class="lno">176</span></span>
<span id="line-S-46450-177"><span class="lno">177</span></span>
<span id="line-S-46450-178"><span class="lno">178</span></span>
<span id="line-S-46450-179"><span class="lno">179</span></span>
<span id="line-S-46450-180">180</span>
<span id="line-S-46450-181"><span class="lno">181</span></span>
<span id="line-S-46450-182"><span class="lno">182</span></span>
<span id="line-S-46450-183"><span class="lno">183</span></span>
<span id="line-S-46450-184"><span class="lno">184</span></span>
<span id="line-S-46450-185">185</span>
<span id="line-S-46450-186"><span class="lno">186</span></span>
<span id="line-S-46450-187"><span class="lno">187</span></span>
<span id="line-S-46450-188"><span class="lno">188</span></span>
<span id="line-S-46450-189"><span class="lno">189</span></span>
<span id="line-S-46450-190">190</span>
<span id="line-S-46450-191"><span class="lno">191</span></span>
<span id="line-S-46450-192"><span class="lno">192</span></span>
<span id="line-S-46450-193"><span class="lno">193</span></span>
<span id="line-S-46450-194"><span class="lno">194</span></span>
<span id="line-S-46450-195">195</span>
<span id="line-S-46450-196"><span class="lno">196</span></span>
<span id="line-S-46450-197"><span class="lno">197</span></span>
<span id="line-S-46450-198"><span class="lno">198</span></span>
<span id="line-S-46450-199"><span class="lno">199</span></span>
<span id="line-S-46450-200">200</span>
<span id="line-S-46450-201"><span class="lno">201</span></span>
<span id="line-S-46450-202"><span class="lno">202</span></span>
<span id="line-S-46450-203"><span class="lno">203</span></span>
<span id="line-S-46450-204"><span class="lno">204</span></span>
<span id="line-S-46450-205">205</span>
<span id="line-S-46450-206"><span class="lno">206</span></span>
<span id="line-S-46450-207"><span class="lno">207</span></span>
<span id="line-S-46450-208"><span class="lno">208</span></span>
<span id="line-S-46450-209"><span class="lno">209</span></span>
<span id="line-S-46450-210">210</span>
<span id="line-S-46450-211"><span class="lno">211</span></span>
<span id="line-S-46450-212"><span class="lno">212</span></span>
<span id="line-S-46450-213"><span class="lno">213</span></span>
<span id="line-S-46450-214"><span class="lno">214</span></span>
<span id="line-S-46450-215">215</span>
<span id="line-S-46450-216"><span class="lno">216</span></span>
<span id="line-S-46450-217"><span class="lno">217</span></span>
<span id="line-S-46450-218"><span class="lno">218</span></span>
<span id="line-S-46450-219"><span class="lno">219</span></span>
<span id="line-S-46450-220">220</span>
<span id="line-S-46450-221"><span class="lno">221</span></span>
<span id="line-S-46450-222"><span class="lno">222</span></span>
<span id="line-S-46450-223"><span class="lno">223</span></span>
<span id="line-S-46450-224"><span class="lno">224</span></span>
<span id="line-S-46450-225">225</span>
<span id="line-S-46450-226"><span class="lno">226</span></span>
<span id="line-S-46450-227"><span class="lno">227</span></span>
<span id="line-S-46450-228"><span class="lno">228</span></span>
<span id="line-S-46450-229"><span class="lno">229</span></span>
<span id="line-S-46450-230">230</span>
<span id="line-S-46450-231"><span class="lno">231</span></span>
<span id="line-S-46450-232"><span class="lno">232</span></span>
<span id="line-S-46450-233"><span class="lno">233</span></span>
<span id="line-S-46450-234"><span class="lno">234</span></span>
<span id="line-S-46450-235">235</span>
<span id="line-S-46450-236"><span class="lno">236</span></span>
<span id="line-S-46450-237"><span class="lno">237</span></span>
<span id="line-S-46450-238"><span class="lno">238</span></span>
<span id="line-S-46450-239"><span class="lno">239</span></span>
<span id="line-S-46450-240">240</span>
<span id="line-S-46450-241"><span class="lno">241</span></span>
<span id="line-S-46450-242"><span class="lno">242</span></span>
<span id="line-S-46450-243"><span class="lno">243</span></span>
<span id="line-S-46450-244"><span class="lno">244</span></span>
<span id="line-S-46450-245">245</span>
<span id="line-S-46450-246"><span class="lno">246</span></span>
<span id="line-S-46450-247"><span class="lno">247</span></span>
<span id="line-S-46450-248"><span class="lno">248</span></span>
<span id="line-S-46450-249"><span class="lno">249</span></span>
<span id="line-S-46450-250">250</span>
<span id="line-S-46450-251"><span class="lno">251</span></span>
<span id="line-S-46450-252"><span class="lno">252</span></span>
<span id="line-S-46450-253"><span class="lno">253</span></span>
<span id="line-S-46450-254"><span class="lno">254</span></span>
<span id="line-S-46450-255">255</span>
<span id="line-S-46450-256"><span class="lno">256</span></span>
<span id="line-S-46450-257"><span class="lno">257</span></span>
<span id="line-S-46450-258"><span class="lno">258</span></span>
<span id="line-S-46450-259"><span class="lno">259</span></span>
<span id="line-S-46450-260">260</span>
<span id="line-S-46450-261"><span class="lno">261</span></span>
<span id="line-S-46450-262"><span class="lno">262</span></span>
<span id="line-S-46450-263"><span class="lno">263</span></span>
<span id="line-S-46450-264"><span class="lno">264</span></span>
<span id="line-S-46450-265">265</span>
<span id="line-S-46450-266"><span class="lno">266</span></span>
<span id="line-S-46450-267"><span class="lno">267</span></span>
<span id="line-S-46450-268"><span class="lno">268</span></span>
<span id="line-S-46450-269"><span class="lno">269</span></span>
<span id="line-S-46450-270">270</span>
<span id="line-S-46450-271"><span class="lno">271</span></span>
<span id="line-S-46450-272"><span class="lno">272</span></span>
<span id="line-S-46450-273"><span class="lno">273</span></span>
<span id="line-S-46450-274"><span class="lno">274</span></span>
<span id="line-S-46450-275">275</span>
<span id="line-S-46450-276"><span class="lno">276</span></span>
<span id="line-S-46450-277"><span class="lno">277</span></span>
<span id="line-S-46450-278"><span class="lno">278</span></span>
<span id="line-S-46450-279"><span class="lno">279</span></span>
<span id="line-S-46450-280">280</span>
<span id="line-S-46450-281"><span class="lno">281</span></span>
<span id="line-S-46450-282"><span class="lno">282</span></span>
<span id="line-S-46450-283"><span class="lno">283</span></span>
<span id="line-S-46450-284"><span class="lno">284</span></span>
<span id="line-S-46450-285">285</span>
<span id="line-S-46450-286"><span class="lno">286</span></span>
<span id="line-S-46450-287"><span class="lno">287</span></span>
<span id="line-S-46450-288"><span class="lno">288</span></span>
<span id="line-S-46450-289"><span class="lno">289</span></span>
<span id="line-S-46450-290">290</span>
<span id="line-S-46450-291"><span class="lno">291</span></span>
<span id="line-S-46450-292"><span class="lno">292</span></span>
<span id="line-S-46450-293"><span class="lno">293</span></span>
<span id="line-S-46450-294"><span class="lno">294</span></span>
<span id="line-S-46450-295">295</span>
<span id="line-S-46450-296"><span class="lno">296</span></span>
<span id="line-S-46450-297"><span class="lno">297</span></span>
<span id="line-S-46450-298"><span class="lno">298</span></span>
<span id="line-S-46450-299"><span class="lno">299</span></span>
<span id="line-S-46450-300">300</span>
<span id="line-S-46450-301"><span class="lno">301</span></span>
<span id="line-S-46450-302"><span class="lno">302</span></span>
<span id="line-S-46450-303"><span class="lno">303</span></span>
<span id="line-S-46450-304"><span class="lno">304</span></span>
<span id="line-S-46450-305">305</span>
<span id="line-S-46450-306"><span class="lno">306</span></span>
<span id="line-S-46450-307"><span class="lno">307</span></span>
<span id="line-S-46450-308"><span class="lno">308</span></span>
<span id="line-S-46450-309"><span class="lno">309</span></span>
<span id="line-S-46450-310">310</span>
<span id="line-S-46450-311"><span class="lno">311</span></span>
<span id="line-S-46450-312"><span class="lno">312</span></span>
<span id="line-S-46450-313"><span class="lno">313</span></span>
<span id="line-S-46450-314"><span class="lno">314</span></span>
<span id="line-S-46450-315">315</span>
<span id="line-S-46450-316"><span class="lno">316</span></span>
<span id="line-S-46450-317"><span class="lno">317</span></span>
<span id="line-S-46450-318"><span class="lno">318</span></span>
<span id="line-S-46450-319"><span class="lno">319</span></span>
<span id="line-S-46450-320">320</span>
<span id="line-S-46450-321"><span class="lno">321</span></span>
<span id="line-S-46450-322"><span class="lno">322</span></span>
<span id="line-S-46450-323"><span class="lno">323</span></span>
<span id="line-S-46450-324"><span class="lno">324</span></span>
<span id="line-S-46450-325">325</span>
<span id="line-S-46450-326"><span class="lno">326</span></span>
<span id="line-S-46450-327"><span class="lno">327</span></span>
<span id="line-S-46450-328"><span class="lno">328</span></span>
<span id="line-S-46450-329"><span class="lno">329</span></span>
<span id="line-S-46450-330">330</span>
<span id="line-S-46450-331"><span class="lno">331</span></span>
<span id="line-S-46450-332"><span class="lno">332</span></span>
<span id="line-S-46450-333"><span class="lno">333</span></span>
<span id="line-S-46450-334"><span class="lno">334</span></span>
<span id="line-S-46450-335">335</span>
<span id="line-S-46450-336"><span class="lno">336</span></span>
<span id="line-S-46450-337"><span class="lno">337</span></span>
<span id="line-S-46450-338"><span class="lno">338</span></span>
<span id="line-S-46450-339"><span class="lno">339</span></span>
<span id="line-S-46450-340">340</span>
<span id="line-S-46450-341"><span class="lno">341</span></span>
<span id="line-S-46450-342"><span class="lno">342</span></span>
<span id="line-S-46450-343"><span class="lno">343</span></span>
<span id="line-S-46450-344"><span class="lno">344</span></span>
<span id="line-S-46450-345">345</span>
<span id="line-S-46450-346"><span class="lno">346</span></span>
<span id="line-S-46450-347"><span class="lno">347</span></span>
<span id="line-S-46450-348"><span class="lno">348</span></span>
<span id="line-S-46450-349"><span class="lno">349</span></span>
<span id="line-S-46450-350">350</span>
<span id="line-S-46450-351"><span class="lno">351</span></span>
<span id="line-S-46450-352"><span class="lno">352</span></span>
<span id="line-S-46450-353"><span class="lno">353</span></span>
<span id="line-S-46450-354"><span class="lno">354</span></span>
<span id="line-S-46450-355">355</span>
<span id="line-S-46450-356"><span class="lno">356</span></span>
<span id="line-S-46450-357"><span class="lno">357</span></span>
<span id="line-S-46450-358"><span class="lno">358</span></span>
<span id="line-S-46450-359"><span class="lno">359</span></span>
<span id="line-S-46450-360">360</span>
<span id="line-S-46450-361"><span class="lno">361</span></span>
<span id="line-S-46450-362"><span class="lno">362</span></span>
<span id="line-S-46450-363"><span class="lno">363</span></span>
<span id="line-S-46450-364"><span class="lno">364</span></span>
<span id="line-S-46450-365">365</span>
<span id="line-S-46450-366"><span class="lno">366</span></span>
<span id="line-S-46450-367"><span class="lno">367</span></span>
<span id="line-S-46450-368"><span class="lno">368</span></span>
<span id="line-S-46450-369"><span class="lno">369</span></span>
<span id="line-S-46450-370">370</span>
<span id="line-S-46450-371"><span class="lno">371</span></span>
<span id="line-S-46450-372"><span class="lno">372</span></span>
<span id="line-S-46450-373"><span class="lno">373</span></span>
<span id="line-S-46450-374"><span class="lno">374</span></span>
<span id="line-S-46450-375">375</span>
<span id="line-S-46450-376"><span class="lno">376</span></span>
<span id="line-S-46450-377"><span class="lno">377</span></span>
<span id="line-S-46450-378"><span class="lno">378</span></span>
<span id="line-S-46450-379"><span class="lno">379</span></span>
<span id="line-S-46450-380">380</span>
<span id="line-S-46450-381"><span class="lno">381</span></span>
<span id="line-S-46450-382"><span class="lno">382</span></span>
<span id="line-S-46450-383"><span class="lno">383</span></span>
<span id="line-S-46450-384"><span class="lno">384</span></span>
<span id="line-S-46450-385">385</span>
<span id="line-S-46450-386"><span class="lno">386</span></span>
<span id="line-S-46450-387"><span class="lno">387</span></span>
<span id="line-S-46450-388"><span class="lno">388</span></span>
<span id="line-S-46450-389"><span class="lno">389</span></span>
<span id="line-S-46450-390">390</span>
<span id="line-S-46450-391"><span class="lno">391</span></span>
<span id="line-S-46450-392"><span class="lno">392</span></span>
<span id="line-S-46450-393"><span class="lno">393</span></span>
<span id="line-S-46450-394"><span class="lno">394</span></span>
<span id="line-S-46450-395">395</span>
<span id="line-S-46450-396"><span class="lno">396</span></span>
<span id="line-S-46450-397"><span class="lno">397</span></span>
<span id="line-S-46450-398"><span class="lno">398</span></span>
<span id="line-S-46450-399"><span class="lno">399</span></span>
<span id="line-S-46450-400">400</span>
<span id="line-S-46450-401"><span class="lno">401</span></span>
<span id="line-S-46450-402"><span class="lno">402</span></span>
<span id="line-S-46450-403"><span class="lno">403</span></span>
<span id="line-S-46450-404"><span class="lno">404</span></span>
<span id="line-S-46450-405">405</span>
<span id="line-S-46450-406"><span class="lno">406</span></span>
<span id="line-S-46450-407"><span class="lno">407</span></span>
<span id="line-S-46450-408"><span class="lno">408</span></span>
<span id="line-S-46450-409"><span class="lno">409</span></span>
<span id="line-S-46450-410">410</span>
<span id="line-S-46450-411"><span class="lno">411</span></span>
<span id="line-S-46450-412"><span class="lno">412</span></span>
<span id="line-S-46450-413"><span class="lno">413</span></span>
<span id="line-S-46450-414"><span class="lno">414</span></span>
<span id="line-S-46450-415">415</span>
<span id="line-S-46450-416"><span class="lno">416</span></span>
<span id="line-S-46450-417"><span class="lno">417</span></span>
<span id="line-S-46450-418"><span class="lno">418</span></span>
<span id="line-S-46450-419"><span class="lno">419</span></span>
<span id="line-S-46450-420">420</span>
<span id="line-S-46450-421"><span class="lno">421</span></span>
</pre></td><td valign="top"><pre><code class="language-xml">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                xmlns:db="http://docbook.org/ns/docbook"
                xmlns:f="http://docbook.org/ns/docbook/functions"
                xmlns:m="http://docbook.org/ns/docbook/modes"
                xmlns:mp="http://docbook.org/ns/docbook/modes/private"
                xmlns:t="http://docbook.org/ns/docbook/templates"
                xmlns:tp="http://docbook.org/ns/docbook/templates/private"
                xmlns:xs="http://www.w3.org/2001/XMLSchema"
                xmlns:h="http://www.w3.org/1999/xhtml"
                xmlns="http://www.w3.org/1999/xhtml"
                default-mode="m:docbook"
                exclude-result-prefixes="db f h m mp t tp xs"
                version="3.0"&gt;

&lt;xsl:template match="*" mode="m:toc"&gt;
  &lt;xsl:message select="'Unexpected in m:toc:', node-name(.)"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="*" mode="mp:toc"&gt;
  &lt;xsl:param name="nested" as="xs:boolean" required="yes"/&gt;
  &lt;xsl:param name="entries" as="element()*" required="yes"/&gt;

  &lt;!-- FIXME: what's the right way to go about this? --&gt;
  &lt;xsl:variable name="nscontext" as="element()"&gt;
    &lt;xsl:element name="nscontext"&gt;
      &lt;xsl:namespace name="f" select="'http://docbook.org/ns/docbook/functions'"/&gt;
      &lt;xsl:namespace name="v" select="'http://docbook.org/ns/docbook/variables'"/&gt;
      &lt;xsl:namespace name="vp" select="'http://docbook.org/ns/docbook/variables/private'"/&gt;
      &lt;xsl:namespace name="f" select="'http://docbook.org/ns/docbook/functions'"/&gt;
      &lt;xsl:namespace name="db" select="'http://docbook.org/ns/docbook'"/&gt;
    &lt;/xsl:element&gt;
  &lt;/xsl:variable&gt;

  &lt;xsl:variable name="toc" as="item()?"&gt;
    &lt;xsl:choose xmlns:vp="http://docbook.org/ns/docbook/variables/private"&gt;
      &lt;xsl:when test="$nested"&gt;
        &lt;xsl:evaluate context-item="." xpath="$generate-nested-toc"
                      namespace-context="$nscontext"&gt;
          &lt;xsl:with-param name="vp:section-toc-depth"
                          select="$vp:section-toc-depth"/&gt;
        &lt;/xsl:evaluate&gt;
      &lt;/xsl:when&gt;
      &lt;xsl:otherwise&gt;
        &lt;xsl:evaluate context-item="." xpath="$generate-toc"
                      namespace-context="$nscontext"&gt;
          &lt;xsl:with-param name="vp:section-toc-depth"
                          select="$vp:section-toc-depth"/&gt;
        &lt;/xsl:evaluate&gt;
      &lt;/xsl:otherwise&gt;
    &lt;/xsl:choose&gt;
  &lt;/xsl:variable&gt;

  &lt;xsl:if test="$toc and exists($entries)
                and f:is-true(f:pi(db:info, 'toc', 'true'))"&gt;
    &lt;xsl:call-template name="tp:toc"&gt;
      &lt;xsl:with-param name="entries" select="$entries"/&gt;
      &lt;xsl:with-param name="nested" select="$nested"/&gt;
    &lt;/xsl:call-template&gt;
  &lt;/xsl:if&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:set|db:book|db:part|db:reference" mode="m:toc"&gt;
  &lt;xsl:param name="nested" select="false()"/&gt;
  &lt;xsl:apply-templates select="." mode="mp:toc"&gt;
    &lt;xsl:with-param name="nested" select="$nested"/&gt;
    &lt;xsl:with-param name="entries"
                    select="db:book|db:preface|db:chapter|db:appendix|db:article
                            |db:topic|db:part|db:reference|db:refentry|db:dedication
                            |db:bibliography|db:index|db:glossary
                            |db:acknowledgements|db:colophon"/&gt;
  &lt;/xsl:apply-templates&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:partintro|db:acknowledgements
                     |db:bibliodiv|db:glossdiv|db:indexdiv
                     |db:dedication|db:colophon"
              mode="m:toc"&gt;
  &lt;xsl:param name="nested" select="false()"/&gt;
  &lt;!-- these don't get a ToC --&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:formalgroup
                     |db:figure|db:table|db:example|db:equation|db:procedure"
              mode="m:toc"&gt;
  &lt;!-- these don't nest --&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:article" mode="m:toc"&gt;
  &lt;xsl:param name="nested" select="false()"/&gt;
  &lt;xsl:apply-templates select="." mode="mp:toc"&gt;
    &lt;xsl:with-param name="nested" select="$nested"/&gt;
    &lt;xsl:with-param name="entries"
                    select="db:section|db:sect1|db:appendix
                            |db:bibliography|db:index|db:glossary
                            |db:acknowledgements|db:colophon|db:dedication
                            |db:refentry"/&gt;
  &lt;/xsl:apply-templates&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:topic" mode="m:toc"&gt;
  &lt;xsl:param name="nested" select="false()"/&gt;
  &lt;xsl:apply-templates select="." mode="mp:toc"&gt;
    &lt;xsl:with-param name="nested" select="$nested"/&gt;
    &lt;xsl:with-param name="entries"
                    select="db:bibliography|db:glossary|db:index
                            |db:section|db:sect1|db:simplesect
                            |db:refentry"/&gt;
  &lt;/xsl:apply-templates&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:preface|db:chapter|db:appendix"
              mode="m:toc"&gt;
  &lt;xsl:param name="nested" select="false()"/&gt;
  &lt;xsl:apply-templates select="." mode="mp:toc"&gt;
    &lt;xsl:with-param name="nested" select="$nested"/&gt;
    &lt;xsl:with-param name="entries"
                    select="db:section|db:sect1|db:article
                            |db:topic|db:appendix"/&gt;
  &lt;/xsl:apply-templates&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:bibliography|db:glossary|db:index"
              mode="m:toc"&gt;
  &lt;xsl:param name="nested" select="false()"/&gt;
  &lt;xsl:apply-templates select="." mode="mp:toc"&gt;
    &lt;xsl:with-param name="nested" select="$nested"/&gt;
    &lt;xsl:with-param name="entries"
                    select="db:bibliodiv|db:glossdiv|db:indexdiv"/&gt;
  &lt;/xsl:apply-templates&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:refentry" mode="m:toc"&gt;
  &lt;xsl:param name="nested" select="false()"/&gt;
  &lt;xsl:apply-templates select="." mode="mp:toc"&gt;
    &lt;xsl:with-param name="nested" select="$nested"/&gt;
    &lt;xsl:with-param name="entries" select="db:refsection|db:refsect1"/&gt;
  &lt;/xsl:apply-templates&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:refsection|db:refsect1|db:refsect2|db:refsect3"
              mode="m:toc"&gt;
  &lt;xsl:param name="nested" select="false()"/&gt;
  &lt;xsl:apply-templates select="." mode="mp:toc"&gt;
    &lt;xsl:with-param name="nested" select="$nested"/&gt;
    &lt;xsl:with-param name="entries"
                    select="db:refsection|db:refsect1|db:refsect2|db:refsect3"/&gt;
  &lt;/xsl:apply-templates&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:section|db:sect1|db:sect2|db:sect3
                     |db:sect4|db:sect5"
              mode="m:toc"&gt;
  &lt;xsl:param name="nested" select="false()"/&gt;
  &lt;xsl:apply-templates select="." mode="mp:toc"&gt;
    &lt;xsl:with-param name="nested" select="$nested"/&gt;
    &lt;xsl:with-param name="entries"
                select="db:section|db:sect1
                        |db:sect2|db:sect3|db:sect4|db:sect5"/&gt;
  &lt;/xsl:apply-templates&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:refsection|db:refsect1|db:refsect2|db:refsect3"
              mode="m:toc"&gt;
  &lt;xsl:param name="nested" select="false()"/&gt;
  &lt;!-- these don't get a ToC --&gt;
&lt;/xsl:template&gt;

&lt;!-- ============================================================ --&gt;

&lt;xsl:template match="*" mode="m:list-of-figures"/&gt;
&lt;xsl:template match="db:set|db:book" mode="m:list-of-figures"&gt;
  &lt;xsl:if test="f:is-true($lists-of-figures)"&gt;
    &lt;xsl:variable name="entries" as="element(h:li)*"&gt;
      &lt;xsl:apply-templates select=".//db:figure[not(ancestor::db:formalgroup)]
                                   |.//db:formalgroup[db:figure]"
                           mode="m:toc-entry"/&gt;
    &lt;/xsl:variable&gt;
    &lt;xsl:if test="$entries"&gt;
      &lt;div class="list-of-figures lot"&gt;
        &lt;div class="title"&gt;
          &lt;xsl:sequence select="f:gentext(., 'title', 'listoffigures')"/&gt;
        &lt;/div&gt;
        &lt;ul class="toc"&gt;
          &lt;xsl:sequence select="$entries"/&gt;
        &lt;/ul&gt;
      &lt;/div&gt;
    &lt;/xsl:if&gt;
  &lt;/xsl:if&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="*" mode="m:list-of-tables"/&gt;
&lt;xsl:template match="db:set|db:book" mode="m:list-of-tables"&gt;
  &lt;xsl:if test="f:is-true($lists-of-tables)"&gt;
    &lt;xsl:variable name="entries" as="element(h:li)*"&gt;
      &lt;xsl:apply-templates select=".//db:table[not(ancestor::db:formalgroup)]
                                   |.//db:formalgroup[db:table]" mode="m:toc-entry"/&gt;
    &lt;/xsl:variable&gt;
    &lt;xsl:if test="$entries"&gt;
      &lt;div class="list-of-tables lot"&gt;
        &lt;div class="title"&gt;
          &lt;xsl:sequence select="f:gentext(., 'title', 'listoftables')"/&gt;
        &lt;/div&gt;
        &lt;ul class="toc"&gt;
          &lt;xsl:sequence select="$entries"/&gt;
        &lt;/ul&gt;
      &lt;/div&gt;
    &lt;/xsl:if&gt;
  &lt;/xsl:if&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="*" mode="m:list-of-examples"/&gt;
&lt;xsl:template match="db:set|db:book" mode="m:list-of-examples"&gt;
  &lt;xsl:if test="f:is-true($lists-of-examples)"&gt;
    &lt;xsl:variable name="entries" as="element(h:li)*"&gt;
      &lt;xsl:apply-templates select=".//db:example[not(ancestor::db:formalgroup)]
                                   |.//db:formalgroup[db:example]" mode="m:toc-entry"/&gt;
    &lt;/xsl:variable&gt;
    &lt;xsl:if test="$entries"&gt;
      &lt;div class="list-of-examples lot"&gt;
        &lt;div class="title"&gt;
          &lt;xsl:sequence select="f:gentext(., 'title', 'listofexamples')"/&gt;
        &lt;/div&gt;
        &lt;ul class="toc"&gt;
          &lt;xsl:sequence select="$entries"/&gt;
        &lt;/ul&gt;
      &lt;/div&gt;
    &lt;/xsl:if&gt;
  &lt;/xsl:if&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="*" mode="m:list-of-equations"/&gt;
&lt;xsl:template match="db:set|db:book" mode="m:list-of-equations"&gt;
  &lt;xsl:if test="f:is-true($lists-of-equations)"&gt;
    &lt;xsl:variable name="entries" as="element(h:li)*"&gt;
      &lt;xsl:apply-templates select=".//db:equation[not(ancestor::db:formalgroup)]
                                   |.//db:formalgroup[db:figure]" mode="m:toc-entry"/&gt;
    &lt;/xsl:variable&gt;
    &lt;xsl:if test="$entries"&gt;
      &lt;div class="list-of-equations lot"&gt;
        &lt;div class="title"&gt;
          &lt;xsl:sequence select="f:gentext(., 'title', 'listofequations')"/&gt;
        &lt;/div&gt;
        &lt;ul class="toc"&gt;
          &lt;xsl:sequence select="$entries"/&gt;
        &lt;/ul&gt;
      &lt;/div&gt;
    &lt;/xsl:if&gt;
  &lt;/xsl:if&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="*" mode="m:list-of-procedures"/&gt;
&lt;xsl:template match="db:set|db:book" mode="m:list-of-procedures"&gt;
  &lt;xsl:if test="f:is-true($lists-of-procedures)"&gt;
    &lt;xsl:variable name="entries" as="element(h:li)*"&gt;
      &lt;xsl:apply-templates select=".//db:procedure" mode="m:toc-entry"/&gt;
    &lt;/xsl:variable&gt;
    &lt;xsl:if test="$entries"&gt;
      &lt;div class="list-of-procedures lot"&gt;
        &lt;div class="title"&gt;
          &lt;xsl:sequence select="f:gentext(., 'title', 'listofprocedures')"/&gt;
        &lt;/div&gt;
        &lt;ul class="toc"&gt;
          &lt;xsl:sequence select="$entries"/&gt;
        &lt;/ul&gt;
      &lt;/div&gt;
    &lt;/xsl:if&gt;
  &lt;/xsl:if&gt;
&lt;/xsl:template&gt;

&lt;xsl:template name="tp:toc"&gt;
  &lt;xsl:param name="entries" as="element()+" required="yes"/&gt;
  &lt;xsl:param name="nested" as="xs:boolean" required="yes"/&gt;
  &lt;xsl:choose&gt;
    &lt;xsl:when test="$nested"&gt;
      &lt;xsl:variable name="entries" as="element(h:li)*"&gt;
        &lt;xsl:apply-templates select="$entries" mode="m:toc-entry"/&gt;
      &lt;/xsl:variable&gt;
      &lt;xsl:if test="$entries"&gt;
        &lt;ul class="toc"&gt;
          &lt;xsl:sequence select="$entries"/&gt;
        &lt;/ul&gt;
      &lt;/xsl:if&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:variable name="entries" as="element(h:li)*"&gt;
        &lt;xsl:apply-templates select="$entries" mode="m:toc-entry"/&gt;
      &lt;/xsl:variable&gt;
      &lt;xsl:variable name="l-o-f" as="element(h:div)?"&gt;
        &lt;xsl:apply-templates select="." mode="m:list-of-figures"/&gt;
      &lt;/xsl:variable&gt;
      &lt;xsl:variable name="l-o-t" as="element(h:div)?"&gt;
        &lt;xsl:apply-templates select="." mode="m:list-of-tables"/&gt;
      &lt;/xsl:variable&gt;
      &lt;xsl:variable name="l-o-ex" as="element(h:div)?"&gt;
        &lt;xsl:apply-templates select="." mode="m:list-of-examples"/&gt;
      &lt;/xsl:variable&gt;
      &lt;xsl:variable name="l-o-eq" as="element(h:div)?"&gt;
        &lt;xsl:apply-templates select="." mode="m:list-of-equations"/&gt;
      &lt;/xsl:variable&gt;
      &lt;xsl:variable name="l-o-p" as="element(h:div)?"&gt;
        &lt;xsl:apply-templates select="." mode="m:list-of-procedures"/&gt;
      &lt;/xsl:variable&gt;
      &lt;xsl:if test="f:is-true($generate-trivial-toc)
                    or count($entries/descendant-or-self::h:li) gt 1
                    or $l-o-f or $l-o-t or $l-o-ex or $l-o-eq or $l-o-p"&gt;
        &lt;div class="list-of-titles"&gt;
          &lt;xsl:if test="$entries"&gt;
            &lt;div class="lot toc"&gt;
              &lt;div class="title"&gt;
                &lt;xsl:sequence select="f:gentext(., 'title', 'tableofcontents')"/&gt;
              &lt;/div&gt;
              &lt;ul class="toc"&gt;
                &lt;xsl:sequence select="$entries"/&gt;
              &lt;/ul&gt;
            &lt;/div&gt;
          &lt;/xsl:if&gt;
          &lt;xsl:sequence select="$l-o-f"/&gt;
          &lt;xsl:sequence select="$l-o-t"/&gt;
          &lt;xsl:sequence select="$l-o-ex"/&gt;
          &lt;xsl:sequence select="$l-o-eq"/&gt;
          &lt;xsl:sequence select="$l-o-p"/&gt;
        &lt;/div&gt;
      &lt;/xsl:if&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:refentry" mode="m:toc-entry" priority="100"&gt;
  &lt;xsl:variable name="refmeta" select=".//db:refmeta"/&gt;
  &lt;xsl:variable name="refentrytitle" select="$refmeta//db:refentrytitle"/&gt;
  &lt;xsl:variable name="refnamediv" select=".//db:refnamediv"/&gt;
  &lt;xsl:variable name="refname" select="$refnamediv//db:refname"/&gt;

  &lt;xsl:variable name="title"&gt;
    &lt;xsl:choose&gt;
      &lt;xsl:when test="$refentrytitle"&gt;
        &lt;xsl:apply-templates select="$refentrytitle[1]"&gt;
          &lt;xsl:with-param name="purpose" select="'lot'"/&gt;
        &lt;/xsl:apply-templates&gt;
      &lt;/xsl:when&gt;
      &lt;xsl:when test="$refnamediv/db:refdescriptor"&gt;
        &lt;xsl:apply-templates select="($refnamediv/db:refdescriptor)[1]"&gt;
          &lt;xsl:with-param name="purpose" select="'lot'"/&gt;
        &lt;/xsl:apply-templates&gt;
      &lt;/xsl:when&gt;
      &lt;xsl:when test="$refname"&gt;
        &lt;xsl:apply-templates select="$refname[1]"&gt;
          &lt;xsl:with-param name="purpose" select="'lot'"/&gt;
        &lt;/xsl:apply-templates&gt;
      &lt;/xsl:when&gt;
      &lt;xsl:otherwise&gt;&lt;/xsl:otherwise&gt;
    &lt;/xsl:choose&gt;
  &lt;/xsl:variable&gt;

  &lt;li&gt;
    &lt;span class='refentrytitle'&gt;
      &lt;a href="#{f:id(.)}"&gt;
        &lt;xsl:sequence select="$title"/&gt;
      &lt;/a&gt;
    &lt;/span&gt;
    &lt;xsl:if test="f:is-true($annotate-toc)"&gt;
      &lt;xsl:apply-templates select="(db:refnamediv/db:refpurpose)[1]"&gt;
        &lt;xsl:with-param name="purpose" select="'lot'"/&gt;
      &lt;/xsl:apply-templates&gt;
    &lt;/xsl:if&gt;
  &lt;/li&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="*" mode="m:toc-entry"&gt;
  &lt;li&gt;
    &lt;a href="#{f:id(.)}"&gt;
      &lt;xsl:apply-templates select="." mode="m:headline"&gt;
        &lt;xsl:with-param name="purpose" select="'lot'"/&gt;
      &lt;/xsl:apply-templates&gt;
    &lt;/a&gt;
    &lt;xsl:apply-templates select="." mode="m:toc"&gt;
      &lt;xsl:with-param name="nested" select="true()"/&gt;
    &lt;/xsl:apply-templates&gt;
  &lt;/li&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="*[not(db:info/db:title)]" mode="m:toc-entry"
              priority="10"&gt;
  &lt;!-- things without titles don't appear in the, uh, lists of titles --&gt;
  &lt;!-- preface, dedication, acknowledgements, colophon, equation,
       and procedure spring to mind... --&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:colophon|db:bibliodiv|db:glossdiv|db:indexdiv"
              mode="m:toc-entry"&gt;
  &lt;!-- by default, these don't appear in the ToC --&gt;
&lt;/xsl:template&gt;

&lt;!-- ============================================================ --&gt;

&lt;xsl:template match="db:toc|db:tocdiv"&gt;
  &lt;div&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
    &lt;xsl:apply-templates select="." mode="m:generate-titlepage"/&gt;
    &lt;xsl:choose&gt;
      &lt;xsl:when test="db:tocentry"&gt;
        &lt;ul&gt;
          &lt;xsl:apply-templates select="db:tocentry"/&gt;
        &lt;/ul&gt;
      &lt;/xsl:when&gt;
      &lt;xsl:otherwise&gt;
        &lt;xsl:apply-templates/&gt;
      &lt;/xsl:otherwise&gt;
    &lt;/xsl:choose&gt;
  &lt;/div&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:tocentry"&gt;
  &lt;ul&gt;
    &lt;xsl:apply-templates/&gt;
  &lt;/ul&gt;
&lt;/xsl:template&gt;

&lt;/xsl:stylesheet&gt;
</code></pre></td></tr></table></div></div></div></div><div class="stylesheet" id="S-20999"><h3>divisions.xsl</h3><p><span><span class="template all">1 template</span></span></p><div class="instructions"><div class="title closed">Instructions</div><div class="body"><div id="S-20999-t-1" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:book|db:part|db:partintro|d…</div><div class="props"><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:book</code>, <code>db:part</code>, <code>db:partintro</code>, <code>db:reference</code>, <code>db:set</code></div></div></div></div></div><div class="source-code"><div class="title closed">Source code</div><div class="body"><div><table><tr><td valign="top" align="right"><pre class="fake-prism"><span id="line-S-20999-1">1</span>
<span id="line-S-20999-2"><span class="lno">2</span></span>
<span id="line-S-20999-3"><span class="lno">3</span></span>
<span id="line-S-20999-4"><span class="lno">4</span></span>
<span id="line-S-20999-5">5</span>
<span id="line-S-20999-6"><span class="lno">6</span></span>
<span id="line-S-20999-7"><span class="lno">7</span></span>
<span id="line-S-20999-8"><span class="lno">8</span></span>
<span id="line-S-20999-9"><span class="lno">9</span></span>
<span id="line-S-20999-10">10</span>
<span id="line-S-20999-11"><span class="lno">11</span></span>
<span id="line-S-20999-12"><span class="lno">12</span></span>
<span id="line-S-20999-13"><span class="lno">13</span></span>
<span id="line-S-20999-14"><span class="lno">14</span></span>
<span id="line-S-20999-15">15</span>
<span id="line-S-20999-16"><span class="lno">16</span></span>
<span id="line-S-20999-17"><span class="lno">17</span></span>
<span id="line-S-20999-18"><span class="lno">18</span></span>
<span id="line-S-20999-19"><span class="lno">19</span></span>
<span id="line-S-20999-20">20</span>
<span id="line-S-20999-21"><span class="lno">21</span></span>
<span id="line-S-20999-22"><span class="lno">22</span></span>
<span id="line-S-20999-23"><span class="lno">23</span></span>
</pre></td><td valign="top"><pre><code class="language-xml">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                xmlns:db="http://docbook.org/ns/docbook"
                xmlns:f="http://docbook.org/ns/docbook/functions"
                xmlns:m="http://docbook.org/ns/docbook/modes"
                xmlns:t="http://docbook.org/ns/docbook/templates"
                xmlns:xs="http://www.w3.org/2001/XMLSchema"
                xmlns="http://www.w3.org/1999/xhtml"
                default-mode="m:docbook"
                exclude-result-prefixes="db f m t xs"
                version="3.0"&gt;

&lt;xsl:template match="db:set|db:book|db:part|db:reference|db:partintro"&gt;
  &lt;article&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
    &lt;xsl:apply-templates select="." mode="m:generate-titlepage"/&gt;
    &lt;xsl:apply-templates select="." mode="m:toc"/&gt;
    &lt;xsl:apply-templates/&gt;
  &lt;/article&gt;
&lt;/xsl:template&gt;

&lt;/xsl:stylesheet&gt;
</code></pre></td></tr></table></div></div></div></div><div class="stylesheet" id="S-61301"><h3>components.xsl</h3><p><span><span class="template all">2 templates</span></span></p><div class="instructions"><div class="title closed">Instructions</div><div class="body"><div id="S-61301-t-1" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:appendix|db:article|db:chap…</div><div class="props"><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:appendix</code>, <code>db:article</code>, <code>db:chapter</code>, <code>db:preface</code>, <code>db:topic</code></div></div></div><div id="S-61301-t-2" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:acknowledgements|db:colopho…</div><div class="props"><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:acknowledgements</code>, <code>db:colophon</code>, <code>db:dedication</code></div></div></div></div></div><div class="source-code"><div class="title closed">Source code</div><div class="body"><div><table><tr><td valign="top" align="right"><pre class="fake-prism"><span id="line-S-61301-1">1</span>
<span id="line-S-61301-2"><span class="lno">2</span></span>
<span id="line-S-61301-3"><span class="lno">3</span></span>
<span id="line-S-61301-4"><span class="lno">4</span></span>
<span id="line-S-61301-5">5</span>
<span id="line-S-61301-6"><span class="lno">6</span></span>
<span id="line-S-61301-7"><span class="lno">7</span></span>
<span id="line-S-61301-8"><span class="lno">8</span></span>
<span id="line-S-61301-9"><span class="lno">9</span></span>
<span id="line-S-61301-10">10</span>
<span id="line-S-61301-11"><span class="lno">11</span></span>
<span id="line-S-61301-12"><span class="lno">12</span></span>
<span id="line-S-61301-13"><span class="lno">13</span></span>
<span id="line-S-61301-14"><span class="lno">14</span></span>
<span id="line-S-61301-15">15</span>
<span id="line-S-61301-16"><span class="lno">16</span></span>
<span id="line-S-61301-17"><span class="lno">17</span></span>
<span id="line-S-61301-18"><span class="lno">18</span></span>
<span id="line-S-61301-19"><span class="lno">19</span></span>
<span id="line-S-61301-20">20</span>
<span id="line-S-61301-21"><span class="lno">21</span></span>
<span id="line-S-61301-22"><span class="lno">22</span></span>
<span id="line-S-61301-23"><span class="lno">23</span></span>
<span id="line-S-61301-24"><span class="lno">24</span></span>
<span id="line-S-61301-25">25</span>
<span id="line-S-61301-26"><span class="lno">26</span></span>
<span id="line-S-61301-27"><span class="lno">27</span></span>
<span id="line-S-61301-28"><span class="lno">28</span></span>
<span id="line-S-61301-29"><span class="lno">29</span></span>
<span id="line-S-61301-30">30</span>
<span id="line-S-61301-31"><span class="lno">31</span></span>
<span id="line-S-61301-32"><span class="lno">32</span></span>
<span id="line-S-61301-33"><span class="lno">33</span></span>
<span id="line-S-61301-34"><span class="lno">34</span></span>
<span id="line-S-61301-35">35</span>
<span id="line-S-61301-36"><span class="lno">36</span></span>
</pre></td><td valign="top"><pre><code class="language-xml">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                xmlns:db="http://docbook.org/ns/docbook"
                xmlns:f="http://docbook.org/ns/docbook/functions"
                xmlns:m="http://docbook.org/ns/docbook/modes"
                xmlns:t="http://docbook.org/ns/docbook/templates"
                xmlns:xs="http://www.w3.org/2001/XMLSchema"
                xmlns="http://www.w3.org/1999/xhtml"
                default-mode="m:docbook"
                exclude-result-prefixes="db f m t xs"
                version="3.0"&gt;

&lt;xsl:template match="db:preface|db:chapter|db:appendix|db:article
                     |db:topic"&gt;
  &lt;xsl:variable name="gi" select="if (parent::*)
                                  then 'div'
                                  else 'article'"/&gt;
  &lt;xsl:element name="{$gi}" namespace="http://www.w3.org/1999/xhtml"&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
    &lt;xsl:apply-templates select="." mode="m:generate-titlepage"/&gt;
    &lt;xsl:apply-templates select="." mode="m:toc"/&gt;
    &lt;xsl:apply-templates/&gt;
  &lt;/xsl:element&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:acknowledgements|db:dedication|db:colophon"&gt;
  &lt;div&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
    &lt;xsl:apply-templates select="." mode="m:generate-titlepage"/&gt;
    &lt;xsl:apply-templates/&gt;
  &lt;/div&gt;
&lt;/xsl:template&gt;

&lt;/xsl:stylesheet&gt;

</code></pre></td></tr></table></div></div></div></div><div class="stylesheet" id="S-10909"><h3>refentry.xsl</h3><p><span><span class="template all">11 templates</span></span></p><div class="instructions"><div class="title closed">Instructions</div><div class="body"><div id="S-10909-t-1" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:refentry</div><div class="props"><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:refentry</code></div></div></div><div id="S-10909-t-2" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:refnamediv</div><div class="props"><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:refnamediv</code></div></div></div><div id="S-10909-t-3" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:refnamediv</div><div class="props"><div class="uses">Uses: <a href="#S-26643-..refentry-generate-name">$refentry-generate-name</a>, <a href="#S-26643-..refentry-generate-title">$refentry-generate-title</a></div><div class="calls">Calls: <a href="#S-22317-docbook.org.ns.docbook.functions.gentext,3">f:gentext()</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:refnamediv</code></div></div></div><div id="S-10909-t-4" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:refclass|db:refmeta</div><div class="props"><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:refclass</code>, <code>db:refmeta</code></div></div></div><div id="S-10909-t-5" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:refdescriptor</div><div class="props"><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:refdescriptor</code></div></div></div><div id="S-10909-t-6" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:manvolnum</div><div class="props"><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:manvolnum</code></div></div></div><div id="S-10909-t-7" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:refentrytitle</div><div class="props"><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:refentrytitle</code></div></div></div><div id="S-10909-t-8" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:refname</div><div class="props"><div class="calls">Calls: <a href="#S-22317-docbook.org.ns.docbook.functions.gentext,3">f:gentext()</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:refname</code></div></div></div><div id="S-10909-t-9" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:refpurpose</div><div class="props"><div class="calls">Calls: <a href="#S-22317-docbook.org.ns.docbook.functions.gentext,3">f:gentext()</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:refpurpose</code></div></div></div><div id="S-10909-t-10" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:refsynopsisdiv</div><div class="props"><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:refsynopsisdiv</code></div></div></div><div id="S-10909-t-11" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:refsect1|db:refsect2|db:ref…</div><div class="props"><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:refsect1</code>, <code>db:refsect2</code>, <code>db:refsect3</code>, <code>db:refsection</code></div></div></div></div></div><div class="source-code"><div class="title closed">Source code</div><div class="body"><div><table><tr><td valign="top" align="right"><pre class="fake-prism"><span id="line-S-10909-1">1</span>
<span id="line-S-10909-2"><span class="lno">2</span></span>
<span id="line-S-10909-3"><span class="lno">3</span></span>
<span id="line-S-10909-4"><span class="lno">4</span></span>
<span id="line-S-10909-5">5</span>
<span id="line-S-10909-6"><span class="lno">6</span></span>
<span id="line-S-10909-7"><span class="lno">7</span></span>
<span id="line-S-10909-8"><span class="lno">8</span></span>
<span id="line-S-10909-9"><span class="lno">9</span></span>
<span id="line-S-10909-10">10</span>
<span id="line-S-10909-11"><span class="lno">11</span></span>
<span id="line-S-10909-12"><span class="lno">12</span></span>
<span id="line-S-10909-13"><span class="lno">13</span></span>
<span id="line-S-10909-14"><span class="lno">14</span></span>
<span id="line-S-10909-15">15</span>
<span id="line-S-10909-16"><span class="lno">16</span></span>
<span id="line-S-10909-17"><span class="lno">17</span></span>
<span id="line-S-10909-18"><span class="lno">18</span></span>
<span id="line-S-10909-19"><span class="lno">19</span></span>
<span id="line-S-10909-20">20</span>
<span id="line-S-10909-21"><span class="lno">21</span></span>
<span id="line-S-10909-22"><span class="lno">22</span></span>
<span id="line-S-10909-23"><span class="lno">23</span></span>
<span id="line-S-10909-24"><span class="lno">24</span></span>
<span id="line-S-10909-25">25</span>
<span id="line-S-10909-26"><span class="lno">26</span></span>
<span id="line-S-10909-27"><span class="lno">27</span></span>
<span id="line-S-10909-28"><span class="lno">28</span></span>
<span id="line-S-10909-29"><span class="lno">29</span></span>
<span id="line-S-10909-30">30</span>
<span id="line-S-10909-31"><span class="lno">31</span></span>
<span id="line-S-10909-32"><span class="lno">32</span></span>
<span id="line-S-10909-33"><span class="lno">33</span></span>
<span id="line-S-10909-34"><span class="lno">34</span></span>
<span id="line-S-10909-35">35</span>
<span id="line-S-10909-36"><span class="lno">36</span></span>
<span id="line-S-10909-37"><span class="lno">37</span></span>
<span id="line-S-10909-38"><span class="lno">38</span></span>
<span id="line-S-10909-39"><span class="lno">39</span></span>
<span id="line-S-10909-40">40</span>
<span id="line-S-10909-41"><span class="lno">41</span></span>
<span id="line-S-10909-42"><span class="lno">42</span></span>
<span id="line-S-10909-43"><span class="lno">43</span></span>
<span id="line-S-10909-44"><span class="lno">44</span></span>
<span id="line-S-10909-45">45</span>
<span id="line-S-10909-46"><span class="lno">46</span></span>
<span id="line-S-10909-47"><span class="lno">47</span></span>
<span id="line-S-10909-48"><span class="lno">48</span></span>
<span id="line-S-10909-49"><span class="lno">49</span></span>
<span id="line-S-10909-50">50</span>
<span id="line-S-10909-51"><span class="lno">51</span></span>
<span id="line-S-10909-52"><span class="lno">52</span></span>
<span id="line-S-10909-53"><span class="lno">53</span></span>
<span id="line-S-10909-54"><span class="lno">54</span></span>
<span id="line-S-10909-55">55</span>
<span id="line-S-10909-56"><span class="lno">56</span></span>
<span id="line-S-10909-57"><span class="lno">57</span></span>
<span id="line-S-10909-58"><span class="lno">58</span></span>
<span id="line-S-10909-59"><span class="lno">59</span></span>
<span id="line-S-10909-60">60</span>
<span id="line-S-10909-61"><span class="lno">61</span></span>
<span id="line-S-10909-62"><span class="lno">62</span></span>
<span id="line-S-10909-63"><span class="lno">63</span></span>
<span id="line-S-10909-64"><span class="lno">64</span></span>
<span id="line-S-10909-65">65</span>
<span id="line-S-10909-66"><span class="lno">66</span></span>
<span id="line-S-10909-67"><span class="lno">67</span></span>
<span id="line-S-10909-68"><span class="lno">68</span></span>
<span id="line-S-10909-69"><span class="lno">69</span></span>
<span id="line-S-10909-70">70</span>
<span id="line-S-10909-71"><span class="lno">71</span></span>
<span id="line-S-10909-72"><span class="lno">72</span></span>
<span id="line-S-10909-73"><span class="lno">73</span></span>
<span id="line-S-10909-74"><span class="lno">74</span></span>
<span id="line-S-10909-75">75</span>
<span id="line-S-10909-76"><span class="lno">76</span></span>
<span id="line-S-10909-77"><span class="lno">77</span></span>
<span id="line-S-10909-78"><span class="lno">78</span></span>
<span id="line-S-10909-79"><span class="lno">79</span></span>
<span id="line-S-10909-80">80</span>
<span id="line-S-10909-81"><span class="lno">81</span></span>
<span id="line-S-10909-82"><span class="lno">82</span></span>
<span id="line-S-10909-83"><span class="lno">83</span></span>
<span id="line-S-10909-84"><span class="lno">84</span></span>
<span id="line-S-10909-85">85</span>
<span id="line-S-10909-86"><span class="lno">86</span></span>
<span id="line-S-10909-87"><span class="lno">87</span></span>
<span id="line-S-10909-88"><span class="lno">88</span></span>
<span id="line-S-10909-89"><span class="lno">89</span></span>
<span id="line-S-10909-90">90</span>
<span id="line-S-10909-91"><span class="lno">91</span></span>
<span id="line-S-10909-92"><span class="lno">92</span></span>
<span id="line-S-10909-93"><span class="lno">93</span></span>
<span id="line-S-10909-94"><span class="lno">94</span></span>
<span id="line-S-10909-95">95</span>
<span id="line-S-10909-96"><span class="lno">96</span></span>
<span id="line-S-10909-97"><span class="lno">97</span></span>
<span id="line-S-10909-98"><span class="lno">98</span></span>
<span id="line-S-10909-99"><span class="lno">99</span></span>
<span id="line-S-10909-100">100</span>
<span id="line-S-10909-101"><span class="lno">101</span></span>
<span id="line-S-10909-102"><span class="lno">102</span></span>
<span id="line-S-10909-103"><span class="lno">103</span></span>
<span id="line-S-10909-104"><span class="lno">104</span></span>
<span id="line-S-10909-105">105</span>
<span id="line-S-10909-106"><span class="lno">106</span></span>
<span id="line-S-10909-107"><span class="lno">107</span></span>
<span id="line-S-10909-108"><span class="lno">108</span></span>
<span id="line-S-10909-109"><span class="lno">109</span></span>
<span id="line-S-10909-110">110</span>
<span id="line-S-10909-111"><span class="lno">111</span></span>
<span id="line-S-10909-112"><span class="lno">112</span></span>
<span id="line-S-10909-113"><span class="lno">113</span></span>
<span id="line-S-10909-114"><span class="lno">114</span></span>
<span id="line-S-10909-115">115</span>
<span id="line-S-10909-116"><span class="lno">116</span></span>
<span id="line-S-10909-117"><span class="lno">117</span></span>
<span id="line-S-10909-118"><span class="lno">118</span></span>
<span id="line-S-10909-119"><span class="lno">119</span></span>
<span id="line-S-10909-120">120</span>
<span id="line-S-10909-121"><span class="lno">121</span></span>
<span id="line-S-10909-122"><span class="lno">122</span></span>
<span id="line-S-10909-123"><span class="lno">123</span></span>
<span id="line-S-10909-124"><span class="lno">124</span></span>
<span id="line-S-10909-125">125</span>
<span id="line-S-10909-126"><span class="lno">126</span></span>
<span id="line-S-10909-127"><span class="lno">127</span></span>
<span id="line-S-10909-128"><span class="lno">128</span></span>
<span id="line-S-10909-129"><span class="lno">129</span></span>
<span id="line-S-10909-130">130</span>
<span id="line-S-10909-131"><span class="lno">131</span></span>
<span id="line-S-10909-132"><span class="lno">132</span></span>
<span id="line-S-10909-133"><span class="lno">133</span></span>
<span id="line-S-10909-134"><span class="lno">134</span></span>
<span id="line-S-10909-135">135</span>
<span id="line-S-10909-136"><span class="lno">136</span></span>
<span id="line-S-10909-137"><span class="lno">137</span></span>
<span id="line-S-10909-138"><span class="lno">138</span></span>
<span id="line-S-10909-139"><span class="lno">139</span></span>
<span id="line-S-10909-140">140</span>
<span id="line-S-10909-141"><span class="lno">141</span></span>
<span id="line-S-10909-142"><span class="lno">142</span></span>
<span id="line-S-10909-143"><span class="lno">143</span></span>
<span id="line-S-10909-144"><span class="lno">144</span></span>
<span id="line-S-10909-145">145</span>
<span id="line-S-10909-146"><span class="lno">146</span></span>
<span id="line-S-10909-147"><span class="lno">147</span></span>
<span id="line-S-10909-148"><span class="lno">148</span></span>
<span id="line-S-10909-149"><span class="lno">149</span></span>
<span id="line-S-10909-150">150</span>
<span id="line-S-10909-151"><span class="lno">151</span></span>
<span id="line-S-10909-152"><span class="lno">152</span></span>
<span id="line-S-10909-153"><span class="lno">153</span></span>
<span id="line-S-10909-154"><span class="lno">154</span></span>
<span id="line-S-10909-155">155</span>
<span id="line-S-10909-156"><span class="lno">156</span></span>
<span id="line-S-10909-157"><span class="lno">157</span></span>
<span id="line-S-10909-158"><span class="lno">158</span></span>
<span id="line-S-10909-159"><span class="lno">159</span></span>
<span id="line-S-10909-160">160</span>
<span id="line-S-10909-161"><span class="lno">161</span></span>
<span id="line-S-10909-162"><span class="lno">162</span></span>
<span id="line-S-10909-163"><span class="lno">163</span></span>
<span id="line-S-10909-164"><span class="lno">164</span></span>
<span id="line-S-10909-165">165</span>
<span id="line-S-10909-166"><span class="lno">166</span></span>
<span id="line-S-10909-167"><span class="lno">167</span></span>
<span id="line-S-10909-168"><span class="lno">168</span></span>
<span id="line-S-10909-169"><span class="lno">169</span></span>
<span id="line-S-10909-170">170</span>
<span id="line-S-10909-171"><span class="lno">171</span></span>
<span id="line-S-10909-172"><span class="lno">172</span></span>
<span id="line-S-10909-173"><span class="lno">173</span></span>
<span id="line-S-10909-174"><span class="lno">174</span></span>
<span id="line-S-10909-175">175</span>
<span id="line-S-10909-176"><span class="lno">176</span></span>
<span id="line-S-10909-177"><span class="lno">177</span></span>
<span id="line-S-10909-178"><span class="lno">178</span></span>
</pre></td><td valign="top"><pre><code class="language-xml">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                xmlns:db="http://docbook.org/ns/docbook"
                xmlns:f="http://docbook.org/ns/docbook/functions"
                xmlns:fp="http://docbook.org/ns/docbook/functions/private"
                xmlns:m="http://docbook.org/ns/docbook/modes"
                xmlns:t="http://docbook.org/ns/docbook/templates"
                xmlns:vp="http://docbook.org/ns/docbook/variables/private"
                xmlns:xs="http://www.w3.org/2001/XMLSchema"
                xmlns="http://www.w3.org/1999/xhtml"
                default-mode="m:docbook"
                exclude-result-prefixes="db f fp m t vp xs"
                version="3.0"&gt;

&lt;xsl:template match="db:refentry"&gt;
  &lt;xsl:variable name="gi" select="if (parent::*)
                                  then 'div'
                                  else 'article'"/&gt;
  &lt;xsl:element name="{$gi}" namespace="http://www.w3.org/1999/xhtml"&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
    &lt;xsl:apply-templates select="." mode="m:generate-titlepage"/&gt;
    &lt;xsl:apply-templates select="." mode="m:toc"/&gt;
    &lt;xsl:apply-templates/&gt;
  &lt;/xsl:element&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:refnamediv[preceding-sibling::db:refnamediv]"/&gt;
&lt;xsl:template match="db:refnamediv[not(preceding-sibling::db:refnamediv)]"&gt;
  &lt;div&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;

    &lt;xsl:choose&gt;
      &lt;xsl:when test="$refentry-generate-name"&gt;
        &lt;h2&gt;
          &lt;xsl:sequence
              select="f:gentext(., 'label', 'refname')"/&gt;
        &lt;/h2&gt;
      &lt;/xsl:when&gt;

      &lt;xsl:when test="$refentry-generate-title"&gt;
        &lt;h2&gt;
          &lt;xsl:choose&gt;
            &lt;xsl:when test="../db:refmeta/db:refentrytitle"&gt;
              &lt;xsl:apply-templates select="../db:refmeta/db:refentrytitle"/&gt;
            &lt;/xsl:when&gt;
            &lt;xsl:when test="db:refdescriptor"&gt;
              &lt;xsl:apply-templates select="db:refdescriptor"/&gt;
            &lt;/xsl:when&gt;
            &lt;xsl:otherwise&gt;
              &lt;xsl:apply-templates select="db:refname[1]"/&gt;
            &lt;/xsl:otherwise&gt;
          &lt;/xsl:choose&gt;
        &lt;/h2&gt;
      &lt;/xsl:when&gt;
    &lt;/xsl:choose&gt;
    &lt;p&gt;
      &lt;xsl:choose&gt;
        &lt;xsl:when test="db:refdescriptor"&gt;
          &lt;xsl:apply-templates select="db:refdescriptor"/&gt;
        &lt;/xsl:when&gt;
        &lt;xsl:otherwise&gt;
          &lt;xsl:apply-templates select="db:refname"/&gt;
        &lt;/xsl:otherwise&gt;
      &lt;/xsl:choose&gt;
      &lt;xsl:apply-templates select="* except (db:refdescriptor|db:refname)"/&gt;
    &lt;/p&gt;
    &lt;xsl:for-each select="following-sibling::db:refnamediv"&gt;
      &lt;p&gt;
        &lt;xsl:choose&gt;
          &lt;xsl:when test="db:refdescriptor"&gt;
            &lt;xsl:apply-templates select="db:refdescriptor"/&gt;
          &lt;/xsl:when&gt;
          &lt;xsl:otherwise&gt;
            &lt;xsl:apply-templates select="db:refname"/&gt;
          &lt;/xsl:otherwise&gt;
        &lt;/xsl:choose&gt;
        &lt;xsl:apply-templates select="* except (db:refdescriptor|db:refname)"/&gt;
      &lt;/p&gt;
    &lt;/xsl:for-each&gt;
  &lt;/div&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:refmeta|db:refclass"/&gt;

&lt;xsl:template match="db:refdescriptor"&gt;
  &lt;xsl:param name="purpose" select="''"/&gt;
  &lt;span&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
    &lt;xsl:apply-templates/&gt;
  &lt;/span&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:manvolnum"&gt;
  &lt;span class="manvolnum"&gt;
    &lt;span class="sep"&gt;(&lt;/span&gt;
    &lt;xsl:apply-templates/&gt;
    &lt;span class="sep"&gt;)&lt;/span&gt;
  &lt;/span&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:refentrytitle"&gt;
  &lt;xsl:param name="purpose" select="''"/&gt;
  &lt;span&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
    &lt;xsl:apply-templates/&gt;
  &lt;/span&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:refname"&gt;
  &lt;xsl:param name="purpose" select="''"/&gt;
  &lt;span&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
    &lt;xsl:apply-templates/&gt;
  &lt;/span&gt;
  &lt;xsl:if test="not($purpose = 'lot') and following-sibling::db:refname"&gt;
    &lt;span class="refname-sep"&gt;
      &lt;xsl:sequence
          select="f:gentext(., 'separator', 'refname-sep')"/&gt;
    &lt;/span&gt;
  &lt;/xsl:if&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:refpurpose"&gt;
  &lt;xsl:param name="purpose" select="''"/&gt;
  &lt;span&gt;
    &lt;xsl:choose&gt;
      &lt;xsl:when test="$purpose = 'lot'"&gt;
        &lt;xsl:attribute name="class" select="local-name(.)"/&gt;
      &lt;/xsl:when&gt;
      &lt;xsl:otherwise&gt;
        &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
      &lt;/xsl:otherwise&gt;
    &lt;/xsl:choose&gt;
    &lt;span class="refpurpose-sep"&gt;
      &lt;xsl:sequence
          select="f:gentext(., 'separator', 'refpurpose-sep')"/&gt;
    &lt;/span&gt;
    &lt;span class="refpurpose-text"&gt;
      &lt;xsl:apply-templates/&gt;
    &lt;/span&gt;
    &lt;xsl:if test="not($purpose = 'lot')
                  and not(matches(normalize-space(.), '\p{P}$'))"&gt;
      &lt;span class="refpurpose-punc"&gt;
        &lt;xsl:text&gt;.&lt;/xsl:text&gt;
      &lt;/span&gt;
    &lt;/xsl:if&gt;
  &lt;/span&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:refsynopsisdiv"&gt;
  &lt;div&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;

    &lt;h2&gt;
      &lt;xsl:choose&gt;
        &lt;xsl:when test="db:info/db:title"&gt;
          &lt;xsl:apply-templates select="db:info/db:title"
                               mode="m:titlepage-mode"/&gt;
        &lt;/xsl:when&gt;
        &lt;xsl:otherwise&gt;
          &lt;xsl:text&gt;Synopsis&lt;/xsl:text&gt;
        &lt;/xsl:otherwise&gt;
      &lt;/xsl:choose&gt;
    &lt;/h2&gt;
    &lt;xsl:apply-templates/&gt;
  &lt;/div&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:refsection|db:refsect1|db:refsect2|db:refsect3"&gt;
  &lt;div&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
    &lt;xsl:apply-templates select="." mode="m:generate-titlepage"/&gt;
    &lt;xsl:apply-templates/&gt;
  &lt;/div&gt;
&lt;/xsl:template&gt;

&lt;/xsl:stylesheet&gt;
</code></pre></td></tr></table></div></div></div></div><div class="stylesheet" id="S-45868"><h3>bibliography.xsl</h3><p><span><span class="template all">23 templates</span></span></p><div class="instructions"><div class="title closed">Instructions</div><div class="body"><div id="S-45868-t-1" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:bibliodiv|db:bibliography|d…</div><div class="props"><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:bibliodiv</code>, <code>db:bibliography</code>, <code>db:bibliolist</code></div></div></div><div id="S-45868-t-2" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:biblioentry</div><div class="props"><div class="calls">Calls: <a href="#S-17405-docbook.org.ns.docbook.templates.biblioentry">t:biblioentry</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:biblioentry</code></div></div></div><div id="S-45868-t-3" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:bibliomixed</div><div class="props"><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:bibliomixed</code></div></div></div><div id="S-45868-t-4" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:bibliomset</div><div class="props"><div class="mode">Mode: <code>m:bibliomixed</code></div><div class="matches">Matches: <code>db:bibliomset</code></div></div></div><div id="S-45868-t-5" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:abbrev</div><div class="props"><div class="mode">Mode: <code>m:bibliomixed</code></div><div class="matches">Matches: <code>db:abbrev</code></div></div></div><div id="S-45868-t-6" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:title</div><div class="props"><div class="mode">Mode: <code>m:bibliomixed</code></div><div class="matches">Matches: <code>db:title</code></div></div></div><div id="S-45868-t-7" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:address|db:publisher</div><div class="props"><div class="mode">Mode: <code>m:bibliomixed</code></div><div class="matches">Matches: <code>db:address</code>, <code>db:publisher</code></div></div></div><div id="S-45868-t-8" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ *</div><div class="props"><div class="mode">Mode: <code>m:bibliomixed</code></div><div class="matches">Matches: <code>*</code></div></div></div><div id="S-45868-t-9" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ text()</div><div class="props"><div class="mode">Mode: <code>m:bibliomixed</code></div><div class="matches">Matches: <code>text()</code></div></div></div><div id="S-45868-t-10" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:releaseinfo</div><div class="props"><div class="mode">Mode: <code>m:bibliomixed</code></div><div class="matches">Matches: <code>db:releaseinfo</code></div></div></div><div id="S-45868-t-11" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:biblioset</div><div class="props"><div class="mode">Mode: <code>m:biblioentry</code></div><div class="matches">Matches: <code>db:biblioset</code></div></div></div><div id="S-45868-t-12" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:title</div><div class="props"><div class="mode">Mode: <code>m:biblioentry</code></div><div class="matches">Matches: <code>db:title</code></div></div></div><div id="S-45868-t-13" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:subtitle</div><div class="props"><div class="calls">Calls: <a href="#S-9504-docbook.org.ns.docbook.templates.inline">t:inline</a></div><div class="mode">Mode: <code>m:biblioentry</code></div><div class="matches">Matches: <code>db:subtitle</code></div></div></div><div id="S-45868-t-14" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:address|db:publisher</div><div class="props"><div class="mode">Mode: <code>m:biblioentry</code></div><div class="matches">Matches: <code>db:address</code>, <code>db:publisher</code></div></div></div><div id="S-45868-t-15" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:collab|db:othercredit</div><div class="props"><div class="mode">Mode: <code>m:biblioentry</code></div><div class="matches">Matches: <code>db:collab</code>, <code>db:othercredit</code></div></div></div><div id="S-45868-t-16" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:confgroup</div><div class="props"><div class="mode">Mode: <code>m:biblioentry</code></div><div class="matches">Matches: <code>db:confgroup</code></div></div></div><div id="S-45868-t-17" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:confdates|db:confnum|db:con…</div><div class="props"><div class="mode">Mode: <code>m:biblioentry</code></div><div class="matches">Matches: <code>db:confdates</code>, <code>db:confnum</code>, <code>db:confsponsor</code>, <code>db:conftitle</code></div></div></div><div id="S-45868-t-18" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:contractnum|db:contractspon…</div><div class="props"><div class="mode">Mode: <code>m:biblioentry</code></div><div class="matches">Matches: <code>db:contractnum</code>, <code>db:contractsponsor</code>, <code>db:edition</code>, <code>db:volumenum</code></div></div></div><div id="S-45868-t-19" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:releaseinfo</div><div class="props"><div class="mode">Mode: <code>m:biblioentry</code></div><div class="matches">Matches: <code>db:releaseinfo</code></div></div></div><div id="S-45868-t-20" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ *</div><div class="props"><div class="mode">Mode: <code>m:biblioentry</code></div><div class="matches">Matches: <code>*</code></div></div></div><div id="S-45868-t-21" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ text()</div><div class="props"><div class="mode">Mode: <code>m:biblioentry</code></div><div class="matches">Matches: <code>text()</code></div></div></div><div id="S-45868-t-22" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:authorgroup</div><div class="props"><div class="calls">Calls: <a href="#S-33240-docbook.org.ns.docbook.templates.person-name-list">t:person-name-list</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:authorgroup</code></div></div></div><div id="S-45868-t-23" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:biblioid|db:bibliomisc|db:b…</div><div class="props"><div class="calls">Calls: <a href="#S-9504-docbook.org.ns.docbook.templates.inline">t:inline</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:biblioid</code>, <code>db:bibliomisc</code>, <code>db:bibliosource</code>, <code>db:orgdiv</code>, <code>db:orgname</code>, <code>db:subtitle</code></div></div></div></div></div><div class="source-code"><div class="title closed">Source code</div><div class="body"><div><table><tr><td valign="top" align="right"><pre class="fake-prism"><span id="line-S-45868-1">1</span>
<span id="line-S-45868-2"><span class="lno">2</span></span>
<span id="line-S-45868-3"><span class="lno">3</span></span>
<span id="line-S-45868-4"><span class="lno">4</span></span>
<span id="line-S-45868-5">5</span>
<span id="line-S-45868-6"><span class="lno">6</span></span>
<span id="line-S-45868-7"><span class="lno">7</span></span>
<span id="line-S-45868-8"><span class="lno">8</span></span>
<span id="line-S-45868-9"><span class="lno">9</span></span>
<span id="line-S-45868-10">10</span>
<span id="line-S-45868-11"><span class="lno">11</span></span>
<span id="line-S-45868-12"><span class="lno">12</span></span>
<span id="line-S-45868-13"><span class="lno">13</span></span>
<span id="line-S-45868-14"><span class="lno">14</span></span>
<span id="line-S-45868-15">15</span>
<span id="line-S-45868-16"><span class="lno">16</span></span>
<span id="line-S-45868-17"><span class="lno">17</span></span>
<span id="line-S-45868-18"><span class="lno">18</span></span>
<span id="line-S-45868-19"><span class="lno">19</span></span>
<span id="line-S-45868-20">20</span>
<span id="line-S-45868-21"><span class="lno">21</span></span>
<span id="line-S-45868-22"><span class="lno">22</span></span>
<span id="line-S-45868-23"><span class="lno">23</span></span>
<span id="line-S-45868-24"><span class="lno">24</span></span>
<span id="line-S-45868-25">25</span>
<span id="line-S-45868-26"><span class="lno">26</span></span>
<span id="line-S-45868-27"><span class="lno">27</span></span>
<span id="line-S-45868-28"><span class="lno">28</span></span>
<span id="line-S-45868-29"><span class="lno">29</span></span>
<span id="line-S-45868-30">30</span>
<span id="line-S-45868-31"><span class="lno">31</span></span>
<span id="line-S-45868-32"><span class="lno">32</span></span>
<span id="line-S-45868-33"><span class="lno">33</span></span>
<span id="line-S-45868-34"><span class="lno">34</span></span>
<span id="line-S-45868-35">35</span>
<span id="line-S-45868-36"><span class="lno">36</span></span>
<span id="line-S-45868-37"><span class="lno">37</span></span>
<span id="line-S-45868-38"><span class="lno">38</span></span>
<span id="line-S-45868-39"><span class="lno">39</span></span>
<span id="line-S-45868-40">40</span>
<span id="line-S-45868-41"><span class="lno">41</span></span>
<span id="line-S-45868-42"><span class="lno">42</span></span>
<span id="line-S-45868-43"><span class="lno">43</span></span>
<span id="line-S-45868-44"><span class="lno">44</span></span>
<span id="line-S-45868-45">45</span>
<span id="line-S-45868-46"><span class="lno">46</span></span>
<span id="line-S-45868-47"><span class="lno">47</span></span>
<span id="line-S-45868-48"><span class="lno">48</span></span>
<span id="line-S-45868-49"><span class="lno">49</span></span>
<span id="line-S-45868-50">50</span>
<span id="line-S-45868-51"><span class="lno">51</span></span>
<span id="line-S-45868-52"><span class="lno">52</span></span>
<span id="line-S-45868-53"><span class="lno">53</span></span>
<span id="line-S-45868-54"><span class="lno">54</span></span>
<span id="line-S-45868-55">55</span>
<span id="line-S-45868-56"><span class="lno">56</span></span>
<span id="line-S-45868-57"><span class="lno">57</span></span>
<span id="line-S-45868-58"><span class="lno">58</span></span>
<span id="line-S-45868-59"><span class="lno">59</span></span>
<span id="line-S-45868-60">60</span>
<span id="line-S-45868-61"><span class="lno">61</span></span>
<span id="line-S-45868-62"><span class="lno">62</span></span>
<span id="line-S-45868-63"><span class="lno">63</span></span>
<span id="line-S-45868-64"><span class="lno">64</span></span>
<span id="line-S-45868-65">65</span>
<span id="line-S-45868-66"><span class="lno">66</span></span>
<span id="line-S-45868-67"><span class="lno">67</span></span>
<span id="line-S-45868-68"><span class="lno">68</span></span>
<span id="line-S-45868-69"><span class="lno">69</span></span>
<span id="line-S-45868-70">70</span>
<span id="line-S-45868-71"><span class="lno">71</span></span>
<span id="line-S-45868-72"><span class="lno">72</span></span>
<span id="line-S-45868-73"><span class="lno">73</span></span>
<span id="line-S-45868-74"><span class="lno">74</span></span>
<span id="line-S-45868-75">75</span>
<span id="line-S-45868-76"><span class="lno">76</span></span>
<span id="line-S-45868-77"><span class="lno">77</span></span>
<span id="line-S-45868-78"><span class="lno">78</span></span>
<span id="line-S-45868-79"><span class="lno">79</span></span>
<span id="line-S-45868-80">80</span>
<span id="line-S-45868-81"><span class="lno">81</span></span>
<span id="line-S-45868-82"><span class="lno">82</span></span>
<span id="line-S-45868-83"><span class="lno">83</span></span>
<span id="line-S-45868-84"><span class="lno">84</span></span>
<span id="line-S-45868-85">85</span>
<span id="line-S-45868-86"><span class="lno">86</span></span>
<span id="line-S-45868-87"><span class="lno">87</span></span>
<span id="line-S-45868-88"><span class="lno">88</span></span>
<span id="line-S-45868-89"><span class="lno">89</span></span>
<span id="line-S-45868-90">90</span>
<span id="line-S-45868-91"><span class="lno">91</span></span>
<span id="line-S-45868-92"><span class="lno">92</span></span>
<span id="line-S-45868-93"><span class="lno">93</span></span>
<span id="line-S-45868-94"><span class="lno">94</span></span>
<span id="line-S-45868-95">95</span>
<span id="line-S-45868-96"><span class="lno">96</span></span>
<span id="line-S-45868-97"><span class="lno">97</span></span>
<span id="line-S-45868-98"><span class="lno">98</span></span>
<span id="line-S-45868-99"><span class="lno">99</span></span>
<span id="line-S-45868-100">100</span>
<span id="line-S-45868-101"><span class="lno">101</span></span>
<span id="line-S-45868-102"><span class="lno">102</span></span>
<span id="line-S-45868-103"><span class="lno">103</span></span>
<span id="line-S-45868-104"><span class="lno">104</span></span>
<span id="line-S-45868-105">105</span>
<span id="line-S-45868-106"><span class="lno">106</span></span>
<span id="line-S-45868-107"><span class="lno">107</span></span>
<span id="line-S-45868-108"><span class="lno">108</span></span>
<span id="line-S-45868-109"><span class="lno">109</span></span>
<span id="line-S-45868-110">110</span>
<span id="line-S-45868-111"><span class="lno">111</span></span>
<span id="line-S-45868-112"><span class="lno">112</span></span>
<span id="line-S-45868-113"><span class="lno">113</span></span>
<span id="line-S-45868-114"><span class="lno">114</span></span>
<span id="line-S-45868-115">115</span>
<span id="line-S-45868-116"><span class="lno">116</span></span>
<span id="line-S-45868-117"><span class="lno">117</span></span>
<span id="line-S-45868-118"><span class="lno">118</span></span>
<span id="line-S-45868-119"><span class="lno">119</span></span>
<span id="line-S-45868-120">120</span>
<span id="line-S-45868-121"><span class="lno">121</span></span>
<span id="line-S-45868-122"><span class="lno">122</span></span>
<span id="line-S-45868-123"><span class="lno">123</span></span>
<span id="line-S-45868-124"><span class="lno">124</span></span>
<span id="line-S-45868-125">125</span>
<span id="line-S-45868-126"><span class="lno">126</span></span>
<span id="line-S-45868-127"><span class="lno">127</span></span>
<span id="line-S-45868-128"><span class="lno">128</span></span>
<span id="line-S-45868-129"><span class="lno">129</span></span>
<span id="line-S-45868-130">130</span>
<span id="line-S-45868-131"><span class="lno">131</span></span>
<span id="line-S-45868-132"><span class="lno">132</span></span>
<span id="line-S-45868-133"><span class="lno">133</span></span>
<span id="line-S-45868-134"><span class="lno">134</span></span>
<span id="line-S-45868-135">135</span>
<span id="line-S-45868-136"><span class="lno">136</span></span>
<span id="line-S-45868-137"><span class="lno">137</span></span>
<span id="line-S-45868-138"><span class="lno">138</span></span>
<span id="line-S-45868-139"><span class="lno">139</span></span>
<span id="line-S-45868-140">140</span>
<span id="line-S-45868-141"><span class="lno">141</span></span>
<span id="line-S-45868-142"><span class="lno">142</span></span>
<span id="line-S-45868-143"><span class="lno">143</span></span>
<span id="line-S-45868-144"><span class="lno">144</span></span>
<span id="line-S-45868-145">145</span>
<span id="line-S-45868-146"><span class="lno">146</span></span>
<span id="line-S-45868-147"><span class="lno">147</span></span>
<span id="line-S-45868-148"><span class="lno">148</span></span>
<span id="line-S-45868-149"><span class="lno">149</span></span>
<span id="line-S-45868-150">150</span>
<span id="line-S-45868-151"><span class="lno">151</span></span>
<span id="line-S-45868-152"><span class="lno">152</span></span>
<span id="line-S-45868-153"><span class="lno">153</span></span>
<span id="line-S-45868-154"><span class="lno">154</span></span>
<span id="line-S-45868-155">155</span>
<span id="line-S-45868-156"><span class="lno">156</span></span>
<span id="line-S-45868-157"><span class="lno">157</span></span>
<span id="line-S-45868-158"><span class="lno">158</span></span>
<span id="line-S-45868-159"><span class="lno">159</span></span>
<span id="line-S-45868-160">160</span>
<span id="line-S-45868-161"><span class="lno">161</span></span>
<span id="line-S-45868-162"><span class="lno">162</span></span>
<span id="line-S-45868-163"><span class="lno">163</span></span>
<span id="line-S-45868-164"><span class="lno">164</span></span>
<span id="line-S-45868-165">165</span>
<span id="line-S-45868-166"><span class="lno">166</span></span>
<span id="line-S-45868-167"><span class="lno">167</span></span>
<span id="line-S-45868-168"><span class="lno">168</span></span>
<span id="line-S-45868-169"><span class="lno">169</span></span>
<span id="line-S-45868-170">170</span>
<span id="line-S-45868-171"><span class="lno">171</span></span>
<span id="line-S-45868-172"><span class="lno">172</span></span>
<span id="line-S-45868-173"><span class="lno">173</span></span>
<span id="line-S-45868-174"><span class="lno">174</span></span>
<span id="line-S-45868-175">175</span>
<span id="line-S-45868-176"><span class="lno">176</span></span>
<span id="line-S-45868-177"><span class="lno">177</span></span>
<span id="line-S-45868-178"><span class="lno">178</span></span>
<span id="line-S-45868-179"><span class="lno">179</span></span>
<span id="line-S-45868-180">180</span>
<span id="line-S-45868-181"><span class="lno">181</span></span>
<span id="line-S-45868-182"><span class="lno">182</span></span>
<span id="line-S-45868-183"><span class="lno">183</span></span>
<span id="line-S-45868-184"><span class="lno">184</span></span>
<span id="line-S-45868-185">185</span>
<span id="line-S-45868-186"><span class="lno">186</span></span>
<span id="line-S-45868-187"><span class="lno">187</span></span>
<span id="line-S-45868-188"><span class="lno">188</span></span>
<span id="line-S-45868-189"><span class="lno">189</span></span>
<span id="line-S-45868-190">190</span>
<span id="line-S-45868-191"><span class="lno">191</span></span>
<span id="line-S-45868-192"><span class="lno">192</span></span>
<span id="line-S-45868-193"><span class="lno">193</span></span>
<span id="line-S-45868-194"><span class="lno">194</span></span>
<span id="line-S-45868-195">195</span>
<span id="line-S-45868-196"><span class="lno">196</span></span>
<span id="line-S-45868-197"><span class="lno">197</span></span>
<span id="line-S-45868-198"><span class="lno">198</span></span>
<span id="line-S-45868-199"><span class="lno">199</span></span>
<span id="line-S-45868-200">200</span>
<span id="line-S-45868-201"><span class="lno">201</span></span>
<span id="line-S-45868-202"><span class="lno">202</span></span>
<span id="line-S-45868-203"><span class="lno">203</span></span>
<span id="line-S-45868-204"><span class="lno">204</span></span>
<span id="line-S-45868-205">205</span>
<span id="line-S-45868-206"><span class="lno">206</span></span>
<span id="line-S-45868-207"><span class="lno">207</span></span>
<span id="line-S-45868-208"><span class="lno">208</span></span>
<span id="line-S-45868-209"><span class="lno">209</span></span>
<span id="line-S-45868-210">210</span>
<span id="line-S-45868-211"><span class="lno">211</span></span>
<span id="line-S-45868-212"><span class="lno">212</span></span>
<span id="line-S-45868-213"><span class="lno">213</span></span>
<span id="line-S-45868-214"><span class="lno">214</span></span>
<span id="line-S-45868-215">215</span>
<span id="line-S-45868-216"><span class="lno">216</span></span>
<span id="line-S-45868-217"><span class="lno">217</span></span>
<span id="line-S-45868-218"><span class="lno">218</span></span>
<span id="line-S-45868-219"><span class="lno">219</span></span>
<span id="line-S-45868-220">220</span>
<span id="line-S-45868-221"><span class="lno">221</span></span>
<span id="line-S-45868-222"><span class="lno">222</span></span>
<span id="line-S-45868-223"><span class="lno">223</span></span>
<span id="line-S-45868-224"><span class="lno">224</span></span>
<span id="line-S-45868-225">225</span>
<span id="line-S-45868-226"><span class="lno">226</span></span>
<span id="line-S-45868-227"><span class="lno">227</span></span>
<span id="line-S-45868-228"><span class="lno">228</span></span>
<span id="line-S-45868-229"><span class="lno">229</span></span>
<span id="line-S-45868-230">230</span>
<span id="line-S-45868-231"><span class="lno">231</span></span>
<span id="line-S-45868-232"><span class="lno">232</span></span>
<span id="line-S-45868-233"><span class="lno">233</span></span>
<span id="line-S-45868-234"><span class="lno">234</span></span>
</pre></td><td valign="top"><pre><code class="language-xml">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                xmlns:db="http://docbook.org/ns/docbook"
                xmlns:f="http://docbook.org/ns/docbook/functions"
                xmlns:fp="http://docbook.org/ns/docbook/functions/private"
                xmlns:m="http://docbook.org/ns/docbook/modes"
                xmlns:t="http://docbook.org/ns/docbook/templates"
                xmlns:vp="http://docbook.org/ns/docbook/variables/private"
                xmlns:xs="http://www.w3.org/2001/XMLSchema"
                xmlns="http://www.w3.org/1999/xhtml"
                default-mode="m:docbook"
                exclude-result-prefixes="db f fp m t vp xs"
                version="3.0"&gt;

&lt;xsl:template match="db:bibliography|db:bibliodiv|db:bibliolist"&gt;
  &lt;xsl:variable name="gi" select="if (parent::*)
                                  then 'div'
                                  else 'article'"/&gt;
  &lt;xsl:element name="{$gi}" namespace="http://www.w3.org/1999/xhtml"&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
    &lt;xsl:apply-templates select="." mode="m:generate-titlepage"/&gt;
    &lt;xsl:apply-templates/&gt;
  &lt;/xsl:element&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:biblioentry"&gt;
  &lt;p&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
    &lt;xsl:call-template name="t:biblioentry"/&gt;
  &lt;/p&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:bibliomixed"&gt;
  &lt;p&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
    &lt;xsl:choose&gt;
      &lt;xsl:when test="@xml:id and not(child::*[1]/self::db:abbrev)"&gt;
        &lt;xsl:sequence select="'[' || @xml:id || '] '"/&gt;
        &lt;xsl:apply-templates mode="m:bibliomixed"/&gt;
      &lt;/xsl:when&gt;
      &lt;xsl:otherwise&gt;
        &lt;xsl:apply-templates mode="m:bibliomixed"/&gt;
      &lt;/xsl:otherwise&gt;
    &lt;/xsl:choose&gt;
  &lt;/p&gt;
&lt;/xsl:template&gt;

&lt;!-- ============================================================ --&gt;

&lt;xsl:template match="db:bibliomset" mode="m:bibliomixed"&gt;
  &lt;span&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
    &lt;xsl:apply-templates mode="m:bibliomixed"/&gt;
  &lt;/span&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:abbrev" mode="m:bibliomixed"&gt;
  &lt;xsl:choose&gt;
    &lt;xsl:when test="empty(preceding-sibling::*)
                    and (normalize-space(preceding-sibling::text()) = '')"&gt;
      &lt;!-- this is the citation --&gt;
      &lt;xsl:text&gt;[&lt;/xsl:text&gt;
      &lt;span&gt;
        &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
        &lt;xsl:apply-templates mode="m:bibliomixed"/&gt;
      &lt;/span&gt;
      &lt;xsl:text&gt;] &lt;/xsl:text&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;span&gt;
        &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
        &lt;xsl:apply-templates mode="m:bibliomixed"/&gt;
      &lt;/span&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:title" mode="m:bibliomixed"&gt;
  &lt;xsl:choose&gt;
    &lt;xsl:when test="parent::db:bibliomset[@relation='article']"&gt;
      &lt;q&gt;
        &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
        &lt;xsl:apply-templates/&gt;
      &lt;/q&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;cite&gt;
        &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
        &lt;xsl:apply-templates/&gt;
      &lt;/cite&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:address|db:publisher" mode="m:bibliomixed"&gt;
  &lt;span&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
    &lt;xsl:apply-templates mode="m:bibliomixed"/&gt;
  &lt;/span&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="*" mode="m:bibliomixed"&gt;
  &lt;xsl:apply-templates select="."/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="text()" mode="m:bibliomixed"&gt;
  &lt;xsl:choose&gt;
    &lt;xsl:when test="parent::db:address"&gt;
      &lt;!-- explicitly xsl:value-of because we need a text node --&gt;
      &lt;xsl:value-of select="replace(string(.), '&amp;#10;', ' / ')"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:copy/&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:releaseinfo" mode="m:bibliomixed"&gt;
  &lt;span&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
    &lt;xsl:apply-templates mode="m:biblioentry"/&gt;
  &lt;/span&gt;
&lt;/xsl:template&gt;

&lt;!-- ============================================================ --&gt;

&lt;xsl:template match="db:biblioset" mode="m:biblioentry"&gt;
  &lt;span&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
    &lt;xsl:apply-templates/&gt;
  &lt;/span&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:title" mode="m:biblioentry"&gt;
  &lt;xsl:choose&gt;
    &lt;xsl:when test="parent::db:biblioset[@relation='article']"&gt;
      &lt;q&gt;
        &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
        &lt;xsl:apply-templates/&gt;
      &lt;/q&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;cite&gt;
        &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
        &lt;xsl:apply-templates/&gt;
      &lt;/cite&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:subtitle" mode="m:biblioentry"&gt;
  &lt;xsl:call-template name="t:inline"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:address|db:publisher" mode="m:biblioentry"&gt;
  &lt;span&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
    &lt;xsl:apply-templates mode="m:biblioentry"/&gt;
  &lt;/span&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:collab|db:othercredit" mode="m:biblioentry"&gt;
  &lt;span&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
    &lt;xsl:apply-templates select="db:personname|db:orgname"
                         mode="m:biblioentry"/&gt;
  &lt;/span&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:confgroup" mode="m:biblioentry"&gt;
  &lt;span&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
    &lt;xsl:apply-templates mode="m:biblioentry"/&gt;
  &lt;/span&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:confdates|db:conftitle|db:confsponsor|db:confnum"
              mode="m:biblioentry"&gt;
  &lt;span&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
    &lt;xsl:apply-templates mode="m:biblioentry"/&gt;
  &lt;/span&gt;
  &lt;xsl:text&gt;. &lt;/xsl:text&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:contractnum|db:contractsponsor
                     |db:edition|db:volumenum" mode="m:biblioentry"&gt;
  &lt;span&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
    &lt;xsl:apply-templates mode="m:biblioentry"/&gt;
  &lt;/span&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:releaseinfo" mode="m:biblioentry"&gt;
  &lt;span&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
    &lt;xsl:apply-templates mode="m:biblioentry"/&gt;
  &lt;/span&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="*" mode="m:biblioentry"&gt;
  &lt;xsl:apply-templates select="."/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="text()" mode="m:biblioentry"&gt;
  &lt;xsl:choose&gt;
    &lt;xsl:when test="parent::db:address"&gt;
      &lt;!-- explicitly xsl:value-of because we need a text node --&gt;
      &lt;xsl:value-of select="replace(string(.), '&amp;#10;', ' / ')"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:copy/&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:template&gt;

&lt;!-- ============================================================ --&gt;

&lt;xsl:template match="db:authorgroup[not(parent::db:info)]"&gt;
  &lt;span&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
    &lt;xsl:call-template name="t:person-name-list"/&gt;
  &lt;/span&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:biblioid|db:orgname|db:orgdiv|db:bibliosource
                     |db:bibliomisc|db:subtitle"&gt;
  &lt;xsl:call-template name="t:inline"/&gt;
&lt;/xsl:template&gt;

&lt;!-- ============================================================ --&gt;

&lt;/xsl:stylesheet&gt;
</code></pre></td></tr></table></div></div></div></div><div class="stylesheet" id="S-28322"><h3>glossary.xsl</h3><p><span><span class="template all">10 templates</span></span></p><div class="instructions"><div class="title closed">Instructions</div><div class="body"><div id="S-28322-t-1" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:glossary|db:glossdiv|db:glo…</div><div class="props"><div class="uses">Uses: <a href="#S-26643-..glossary-sort-entries">$glossary-sort-entries</a>, <a href="#S-26643-..sort-collation">$sort-collation</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:glossary</code>, <code>db:glossdiv</code>, <code>db:glosslist</code></div></div></div><div id="S-28322-t-2" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:glossentry</div><div class="props"><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:glossentry</code></div></div></div><div id="S-28322-t-3" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:glossterm</div><div class="props"><div class="calls">Calls: <a href="#S-9504-docbook.org.ns.docbook.templates.inline">t:inline</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:glossterm</code></div></div></div><div id="S-28322-t-4" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:glossentry/db:glossterm</div><div class="props"><div class="calls">Calls: <a href="#S-22317-docbook.org.ns.docbook.functions.gentext,3">f:gentext()</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:glossentry/db:glossterm</code></div></div></div><div id="S-28322-t-5" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:glossentry/db:acronym</div><div class="props"><div class="calls">Calls: <a href="#S-22317-docbook.org.ns.docbook.functions.gentext,3">f:gentext()</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:glossentry/db:acronym</code></div></div></div><div id="S-28322-t-6" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:glossentry/db:abbrev</div><div class="props"><div class="calls">Calls: <a href="#S-22317-docbook.org.ns.docbook.functions.gentext,3">f:gentext()</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:glossentry/db:abbrev</code></div></div></div><div id="S-28322-t-7" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:glosssee</div><div class="props"><div class="calls">Calls: <a href="#S-28936-docbook.org.ns.docbook.functions.href,2">f:href()</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:glosssee</code></div></div></div><div id="S-28322-t-8" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:glossentry/db:glossdef</div><div class="props"><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:glossentry/db:glossdef</code></div></div></div><div id="S-28322-t-9" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:glossseealso</div><div class="props"><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:glossseealso</code></div></div></div><div id="S-28322-t-10" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:glossseealso</div><div class="props"><div class="calls">Calls: <a href="#S-28936-docbook.org.ns.docbook.functions.href,2">f:href()</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:glossseealso</code></div></div></div></div></div><div class="source-code"><div class="title closed">Source code</div><div class="body"><div><table><tr><td valign="top" align="right"><pre class="fake-prism"><span id="line-S-28322-1">1</span>
<span id="line-S-28322-2"><span class="lno">2</span></span>
<span id="line-S-28322-3"><span class="lno">3</span></span>
<span id="line-S-28322-4"><span class="lno">4</span></span>
<span id="line-S-28322-5">5</span>
<span id="line-S-28322-6"><span class="lno">6</span></span>
<span id="line-S-28322-7"><span class="lno">7</span></span>
<span id="line-S-28322-8"><span class="lno">8</span></span>
<span id="line-S-28322-9"><span class="lno">9</span></span>
<span id="line-S-28322-10">10</span>
<span id="line-S-28322-11"><span class="lno">11</span></span>
<span id="line-S-28322-12"><span class="lno">12</span></span>
<span id="line-S-28322-13"><span class="lno">13</span></span>
<span id="line-S-28322-14"><span class="lno">14</span></span>
<span id="line-S-28322-15">15</span>
<span id="line-S-28322-16"><span class="lno">16</span></span>
<span id="line-S-28322-17"><span class="lno">17</span></span>
<span id="line-S-28322-18"><span class="lno">18</span></span>
<span id="line-S-28322-19"><span class="lno">19</span></span>
<span id="line-S-28322-20">20</span>
<span id="line-S-28322-21"><span class="lno">21</span></span>
<span id="line-S-28322-22"><span class="lno">22</span></span>
<span id="line-S-28322-23"><span class="lno">23</span></span>
<span id="line-S-28322-24"><span class="lno">24</span></span>
<span id="line-S-28322-25">25</span>
<span id="line-S-28322-26"><span class="lno">26</span></span>
<span id="line-S-28322-27"><span class="lno">27</span></span>
<span id="line-S-28322-28"><span class="lno">28</span></span>
<span id="line-S-28322-29"><span class="lno">29</span></span>
<span id="line-S-28322-30">30</span>
<span id="line-S-28322-31"><span class="lno">31</span></span>
<span id="line-S-28322-32"><span class="lno">32</span></span>
<span id="line-S-28322-33"><span class="lno">33</span></span>
<span id="line-S-28322-34"><span class="lno">34</span></span>
<span id="line-S-28322-35">35</span>
<span id="line-S-28322-36"><span class="lno">36</span></span>
<span id="line-S-28322-37"><span class="lno">37</span></span>
<span id="line-S-28322-38"><span class="lno">38</span></span>
<span id="line-S-28322-39"><span class="lno">39</span></span>
<span id="line-S-28322-40">40</span>
<span id="line-S-28322-41"><span class="lno">41</span></span>
<span id="line-S-28322-42"><span class="lno">42</span></span>
<span id="line-S-28322-43"><span class="lno">43</span></span>
<span id="line-S-28322-44"><span class="lno">44</span></span>
<span id="line-S-28322-45">45</span>
<span id="line-S-28322-46"><span class="lno">46</span></span>
<span id="line-S-28322-47"><span class="lno">47</span></span>
<span id="line-S-28322-48"><span class="lno">48</span></span>
<span id="line-S-28322-49"><span class="lno">49</span></span>
<span id="line-S-28322-50">50</span>
<span id="line-S-28322-51"><span class="lno">51</span></span>
<span id="line-S-28322-52"><span class="lno">52</span></span>
<span id="line-S-28322-53"><span class="lno">53</span></span>
<span id="line-S-28322-54"><span class="lno">54</span></span>
<span id="line-S-28322-55">55</span>
<span id="line-S-28322-56"><span class="lno">56</span></span>
<span id="line-S-28322-57"><span class="lno">57</span></span>
<span id="line-S-28322-58"><span class="lno">58</span></span>
<span id="line-S-28322-59"><span class="lno">59</span></span>
<span id="line-S-28322-60">60</span>
<span id="line-S-28322-61"><span class="lno">61</span></span>
<span id="line-S-28322-62"><span class="lno">62</span></span>
<span id="line-S-28322-63"><span class="lno">63</span></span>
<span id="line-S-28322-64"><span class="lno">64</span></span>
<span id="line-S-28322-65">65</span>
<span id="line-S-28322-66"><span class="lno">66</span></span>
<span id="line-S-28322-67"><span class="lno">67</span></span>
<span id="line-S-28322-68"><span class="lno">68</span></span>
<span id="line-S-28322-69"><span class="lno">69</span></span>
<span id="line-S-28322-70">70</span>
<span id="line-S-28322-71"><span class="lno">71</span></span>
<span id="line-S-28322-72"><span class="lno">72</span></span>
<span id="line-S-28322-73"><span class="lno">73</span></span>
<span id="line-S-28322-74"><span class="lno">74</span></span>
<span id="line-S-28322-75">75</span>
<span id="line-S-28322-76"><span class="lno">76</span></span>
<span id="line-S-28322-77"><span class="lno">77</span></span>
<span id="line-S-28322-78"><span class="lno">78</span></span>
<span id="line-S-28322-79"><span class="lno">79</span></span>
<span id="line-S-28322-80">80</span>
<span id="line-S-28322-81"><span class="lno">81</span></span>
<span id="line-S-28322-82"><span class="lno">82</span></span>
<span id="line-S-28322-83"><span class="lno">83</span></span>
<span id="line-S-28322-84"><span class="lno">84</span></span>
<span id="line-S-28322-85">85</span>
<span id="line-S-28322-86"><span class="lno">86</span></span>
<span id="line-S-28322-87"><span class="lno">87</span></span>
<span id="line-S-28322-88"><span class="lno">88</span></span>
<span id="line-S-28322-89"><span class="lno">89</span></span>
<span id="line-S-28322-90">90</span>
<span id="line-S-28322-91"><span class="lno">91</span></span>
<span id="line-S-28322-92"><span class="lno">92</span></span>
<span id="line-S-28322-93"><span class="lno">93</span></span>
<span id="line-S-28322-94"><span class="lno">94</span></span>
<span id="line-S-28322-95">95</span>
<span id="line-S-28322-96"><span class="lno">96</span></span>
<span id="line-S-28322-97"><span class="lno">97</span></span>
<span id="line-S-28322-98"><span class="lno">98</span></span>
<span id="line-S-28322-99"><span class="lno">99</span></span>
<span id="line-S-28322-100">100</span>
<span id="line-S-28322-101"><span class="lno">101</span></span>
<span id="line-S-28322-102"><span class="lno">102</span></span>
<span id="line-S-28322-103"><span class="lno">103</span></span>
<span id="line-S-28322-104"><span class="lno">104</span></span>
<span id="line-S-28322-105">105</span>
<span id="line-S-28322-106"><span class="lno">106</span></span>
<span id="line-S-28322-107"><span class="lno">107</span></span>
<span id="line-S-28322-108"><span class="lno">108</span></span>
<span id="line-S-28322-109"><span class="lno">109</span></span>
<span id="line-S-28322-110">110</span>
<span id="line-S-28322-111"><span class="lno">111</span></span>
<span id="line-S-28322-112"><span class="lno">112</span></span>
<span id="line-S-28322-113"><span class="lno">113</span></span>
<span id="line-S-28322-114"><span class="lno">114</span></span>
<span id="line-S-28322-115">115</span>
<span id="line-S-28322-116"><span class="lno">116</span></span>
<span id="line-S-28322-117"><span class="lno">117</span></span>
<span id="line-S-28322-118"><span class="lno">118</span></span>
<span id="line-S-28322-119"><span class="lno">119</span></span>
<span id="line-S-28322-120">120</span>
<span id="line-S-28322-121"><span class="lno">121</span></span>
<span id="line-S-28322-122"><span class="lno">122</span></span>
<span id="line-S-28322-123"><span class="lno">123</span></span>
<span id="line-S-28322-124"><span class="lno">124</span></span>
<span id="line-S-28322-125">125</span>
<span id="line-S-28322-126"><span class="lno">126</span></span>
<span id="line-S-28322-127"><span class="lno">127</span></span>
<span id="line-S-28322-128"><span class="lno">128</span></span>
<span id="line-S-28322-129"><span class="lno">129</span></span>
<span id="line-S-28322-130">130</span>
<span id="line-S-28322-131"><span class="lno">131</span></span>
<span id="line-S-28322-132"><span class="lno">132</span></span>
<span id="line-S-28322-133"><span class="lno">133</span></span>
<span id="line-S-28322-134"><span class="lno">134</span></span>
<span id="line-S-28322-135">135</span>
<span id="line-S-28322-136"><span class="lno">136</span></span>
<span id="line-S-28322-137"><span class="lno">137</span></span>
<span id="line-S-28322-138"><span class="lno">138</span></span>
<span id="line-S-28322-139"><span class="lno">139</span></span>
<span id="line-S-28322-140">140</span>
<span id="line-S-28322-141"><span class="lno">141</span></span>
<span id="line-S-28322-142"><span class="lno">142</span></span>
<span id="line-S-28322-143"><span class="lno">143</span></span>
<span id="line-S-28322-144"><span class="lno">144</span></span>
<span id="line-S-28322-145">145</span>
<span id="line-S-28322-146"><span class="lno">146</span></span>
<span id="line-S-28322-147"><span class="lno">147</span></span>
<span id="line-S-28322-148"><span class="lno">148</span></span>
<span id="line-S-28322-149"><span class="lno">149</span></span>
<span id="line-S-28322-150">150</span>
<span id="line-S-28322-151"><span class="lno">151</span></span>
<span id="line-S-28322-152"><span class="lno">152</span></span>
<span id="line-S-28322-153"><span class="lno">153</span></span>
<span id="line-S-28322-154"><span class="lno">154</span></span>
<span id="line-S-28322-155">155</span>
<span id="line-S-28322-156"><span class="lno">156</span></span>
<span id="line-S-28322-157"><span class="lno">157</span></span>
<span id="line-S-28322-158"><span class="lno">158</span></span>
<span id="line-S-28322-159"><span class="lno">159</span></span>
<span id="line-S-28322-160">160</span>
<span id="line-S-28322-161"><span class="lno">161</span></span>
<span id="line-S-28322-162"><span class="lno">162</span></span>
<span id="line-S-28322-163"><span class="lno">163</span></span>
<span id="line-S-28322-164"><span class="lno">164</span></span>
<span id="line-S-28322-165">165</span>
<span id="line-S-28322-166"><span class="lno">166</span></span>
<span id="line-S-28322-167"><span class="lno">167</span></span>
<span id="line-S-28322-168"><span class="lno">168</span></span>
<span id="line-S-28322-169"><span class="lno">169</span></span>
<span id="line-S-28322-170">170</span>
<span id="line-S-28322-171"><span class="lno">171</span></span>
<span id="line-S-28322-172"><span class="lno">172</span></span>
<span id="line-S-28322-173"><span class="lno">173</span></span>
<span id="line-S-28322-174"><span class="lno">174</span></span>
<span id="line-S-28322-175">175</span>
<span id="line-S-28322-176"><span class="lno">176</span></span>
<span id="line-S-28322-177"><span class="lno">177</span></span>
<span id="line-S-28322-178"><span class="lno">178</span></span>
<span id="line-S-28322-179"><span class="lno">179</span></span>
<span id="line-S-28322-180">180</span>
</pre></td><td valign="top"><pre><code class="language-xml">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                xmlns:db="http://docbook.org/ns/docbook"
                xmlns:f="http://docbook.org/ns/docbook/functions"
                xmlns:fp="http://docbook.org/ns/docbook/functions/private"
                xmlns:m="http://docbook.org/ns/docbook/modes"
                xmlns:t="http://docbook.org/ns/docbook/templates"
                xmlns:vp="http://docbook.org/ns/docbook/variables/private"
                xmlns:xs="http://www.w3.org/2001/XMLSchema"
                xmlns="http://www.w3.org/1999/xhtml"
                default-mode="m:docbook"
                exclude-result-prefixes="db f fp m t vp xs"
                version="3.0"&gt;

&lt;xsl:key name="glossterm" match="db:glossentry"
         use="(db:glossterm/@baseform, db:glossterm/normalize-space(.))[1]"/&gt;

&lt;xsl:template match="db:glossary|db:glossdiv|db:glosslist"&gt;
  &lt;xsl:variable name="gi" select="if (parent::*)
                                  then 'div'
                                  else 'article'"/&gt;
  &lt;xsl:element name="{$gi}" namespace="http://www.w3.org/1999/xhtml"&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
    &lt;xsl:apply-templates select="." mode="m:generate-titlepage"/&gt;
    &lt;xsl:apply-templates select="* except (db:glossentry|db:bibliography)"/&gt;
    &lt;dl class="{local-name(.)}"&gt;
      &lt;xsl:choose&gt;
        &lt;xsl:when test="$glossary-sort-entries"&gt;
          &lt;xsl:apply-templates select="db:glossentry"&gt;
            &lt;xsl:sort select="(@sortas, normalize-space(db:glossterm[1]))"
                      collation="{$sort-collation}"/&gt;
          &lt;/xsl:apply-templates&gt;
        &lt;/xsl:when&gt;
        &lt;xsl:otherwise&gt;
          &lt;xsl:apply-templates select="db:glossentry"/&gt;
        &lt;/xsl:otherwise&gt;
      &lt;/xsl:choose&gt;
    &lt;/dl&gt;
    &lt;xsl:apply-templates select="db:bibliography"/&gt;
  &lt;/xsl:element&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:glossentry"&gt;
  &lt;dt&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
    &lt;xsl:apply-templates select="db:glossterm|db:indexterm"/&gt;
  &lt;/dt&gt;
  &lt;xsl:apply-templates select="db:glosssee|db:glossdef"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:glossterm"&gt;
  &lt;xsl:call-template name="t:inline"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:glossentry/db:glossterm"&gt;
  &lt;span&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
    &lt;xsl:apply-templates/&gt;
  &lt;/span&gt;
  &lt;xsl:if test="following-sibling::db:glossterm"&gt;
    &lt;xsl:sequence select="f:gentext(., 'separator', 'glossterm-sep')"/&gt;
  &lt;/xsl:if&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:glossentry/db:acronym"&gt;
  &lt;span&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
    &lt;xsl:apply-templates/&gt;
  &lt;/span&gt;
  &lt;xsl:if test="following-sibling::db:acronym
                |following-sibling::db:abbrev"&gt;
    &lt;xsl:sequence select="f:gentext(., 'separator', 'glossterm-sep')"/&gt;
  &lt;/xsl:if&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:glossentry/db:abbrev"&gt;
  &lt;span&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
    &lt;xsl:apply-templates/&gt;
  &lt;/span&gt;
  &lt;xsl:if test="following-sibling::db:acronym
                |following-sibling::db:abbrev"&gt;
    &lt;xsl:sequence select="f:gentext(., 'separator', 'glossterm-sep')"/&gt;
  &lt;/xsl:if&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:glosssee"&gt;
  &lt;xsl:variable name="target"
                select="(key('id', @otherterm),
                         key('glossterm', normalize-space(.)))[1]"/&gt;

  &lt;dd&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
    &lt;p&gt;
      &lt;xsl:apply-templates select="." mode="m:crossref-prefix"&gt;
        &lt;xsl:with-param name="label" select="''"/&gt;
        &lt;xsl:with-param name="number" select="''"/&gt;
        &lt;xsl:with-param name="title" select="string(.)"/&gt;
      &lt;/xsl:apply-templates&gt;
      &lt;xsl:choose&gt;
        &lt;xsl:when test="$target"&gt;
          &lt;a href="{f:href(., $target)}"&gt;
            &lt;xsl:apply-templates/&gt;
          &lt;/a&gt;
        &lt;/xsl:when&gt;
        &lt;xsl:when test="@otherterm and not($target)"&gt;
          &lt;xsl:message&gt;
            &lt;xsl:text&gt;Warning: &lt;/xsl:text&gt;
            &lt;xsl:text&gt;glosssee @otherterm reference not found: &lt;/xsl:text&gt;
            &lt;xsl:value-of select="@otherterm"/&gt;
          &lt;/xsl:message&gt;
          &lt;xsl:apply-templates/&gt;
        &lt;/xsl:when&gt;
        &lt;xsl:otherwise&gt;
          &lt;xsl:apply-templates/&gt;
        &lt;/xsl:otherwise&gt;
      &lt;/xsl:choose&gt;
      &lt;xsl:text&gt;.&lt;/xsl:text&gt;
    &lt;/p&gt;
  &lt;/dd&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:glossentry/db:glossdef"&gt;
  &lt;dd&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
    &lt;xsl:apply-templates select="*[not(self::db:glossseealso)]"/&gt;
  &lt;/dd&gt;
  &lt;xsl:apply-templates select="db:glossseealso"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:glossseealso[preceding-sibling::db:glossseealso]"/&gt;
&lt;xsl:template match="db:glossseealso"&gt;
  &lt;dd&gt;
    &lt;p&gt;
      &lt;xsl:apply-templates select="." mode="m:crossref-prefix"&gt;
        &lt;xsl:with-param name="label" select="''"/&gt;
        &lt;xsl:with-param name="number" select="''"/&gt;
        &lt;xsl:with-param name="title" select="string(.)"/&gt;
      &lt;/xsl:apply-templates&gt;
      &lt;xsl:for-each select="(., following-sibling::db:glossseealso)"&gt;
        &lt;xsl:variable name="target"
                      select="if (key('id', @otherterm))
                              then key('id', @otherterm)[1]
                              else key('glossterm', string(.))"/&gt;
        &lt;xsl:choose&gt;
          &lt;xsl:when test="$target"&gt;
            &lt;a href="{f:href(/,$target)}"&gt;
              &lt;xsl:apply-templates select="$target" mode="m:crossref"/&gt;
            &lt;/a&gt;
          &lt;/xsl:when&gt;
          &lt;xsl:when test="@otherterm and not($target)"&gt;
            &lt;xsl:message&gt;
              &lt;xsl:text&gt;Warning: &lt;/xsl:text&gt;
              &lt;xsl:text&gt;glossseealso @otherterm reference not found: &lt;/xsl:text&gt;
              &lt;xsl:value-of select="@otherterm"/&gt;
            &lt;/xsl:message&gt;
            &lt;xsl:apply-templates/&gt;
          &lt;/xsl:when&gt;
          &lt;xsl:otherwise&gt;
            &lt;xsl:apply-templates/&gt;
          &lt;/xsl:otherwise&gt;
        &lt;/xsl:choose&gt;

        &lt;xsl:choose&gt;
          &lt;xsl:when test="position() = last()"&gt;
            &lt;xsl:text&gt;.&lt;/xsl:text&gt;
          &lt;/xsl:when&gt;
          &lt;xsl:otherwise&gt;
            &lt;xsl:text&gt;, &lt;/xsl:text&gt;
          &lt;/xsl:otherwise&gt;
        &lt;/xsl:choose&gt;
      &lt;/xsl:for-each&gt;
    &lt;/p&gt;
  &lt;/dd&gt;
&lt;/xsl:template&gt;

&lt;!-- ============================================================ --&gt;

&lt;/xsl:stylesheet&gt;
</code></pre></td></tr></table></div></div></div></div><div class="stylesheet" id="S-58181"><h3>index.xsl</h3><p><span><span class="template all">19 templates</span></span>, <span><span class="function all">8 functions</span> (<span class="function unused">1 unused</span>)</span></p><div class="instructions"><div class="title closed">Instructions</div><div class="body"><div id="S-58181-t-1" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:indexterm</div><div class="props"><div class="uses">Uses: <a href="#S-26643-..index-show-entries">$index-show-entries</a></div><div class="calls">Calls: <a href="#S-28936-docbook.org.ns.docbook.functions.generate-id,1">f:generate-id()</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:indexterm</code></div></div></div><div id="S-58181-t-2" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:primary|db:secondary|db:see…</div><div class="props"><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:primary</code>, <code>db:secondary</code>, <code>db:see</code>, <code>db:seealso</code>, <code>db:tertiary</code></div></div></div><div id="S-58181-t-3" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:index|db:indexdiv|db:setind…</div><div class="props"><div class="uses">Uses: <a href="#S-26643-..generate-index">$generate-index</a></div><div class="calls">Calls: <a href="#S-28936-docbook.org.ns.docbook.functions.is-true,1">f:is-true()</a>, <a href="#S-28936-docbook.org.ns.docbook.functions.pi,3">f:pi()</a></div><div class="calls">Calls: <a href="#S-58181-docbook.org.ns.docbook.templates.generate-index">t:generate-index</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:index</code>, <code>db:indexdiv</code>, <code>db:setindex</code></div></div></div><div id="S-58181-docbook.org.ns.docbook.functions.private.primary,1" class="instruction function"><div class="title"><span class="link"></span>Function fp:primary($indexterm as element(db:indexterm)) as xs:string</div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-58181-t-5">template</a>, <a href="#S-58181-t-6">template</a>, <a href="#S-58181-t-7">template</a>, <a href="#S-58181-t-8">template</a>, <a href="#S-58181-docbook.org.ns.docbook.templates.generate-index">t:generate-index</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-58181">modules/index.xsl</a></div></div></div><div id="S-58181-docbook.org.ns.docbook.functions.private.secondary,1" class="instruction function"><div class="title"><span class="link"></span>Function fp:secondary($indexterm as element(db:indexterm)) as xs:string</div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-58181-t-6">template</a>, <a href="#S-58181-t-7">template</a>, <a href="#S-58181-t-8">template</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-58181">modules/index.xsl</a></div></div></div><div id="S-58181-docbook.org.ns.docbook.functions.private.tertiary,1" class="instruction function"><div class="title"><span class="link"></span>Function fp:tertiary($indexterm as element(db:indexterm)) as xs:string</div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-58181-t-7">template</a>, <a href="#S-58181-t-8">template</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-58181">modules/index.xsl</a></div></div></div><div id="S-58181-docbook.org.ns.docbook.functions.private.scope,4" class="instruction function"><div class="title"><span class="link"></span>Function fp:scope($node as element(), $scope as element(), $role as xs:string?, $type as xs:string?) as xs:boolean</div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-58181-t-6">template</a>, <a href="#S-58181-t-10">template</a>, <a href="#S-58181-docbook.org.ns.docbook.templates.generate-index">t:generate-index</a>, <a href="#S-58181-docbook.org.ns.docbook.templates.index-zone-reference">t:index-zone-reference</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-58181">modules/index.xsl</a></div></div></div><div id="S-58181-docbook.org.ns.docbook.functions.private.nearest-section,1" class="instruction function"><div class="title"><span class="link"></span>Function fp:nearest-section($node as element()) as element()</div><div class="props"><div class="calls">Calls: <a href="#S-58181-docbook.org.ns.docbook.functions.private.nearest-section-id,1">fp:nearest-section-id()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-58181-docbook.org.ns.docbook.functions.private.nearest-section-id,1">fp:nearest-section-id()</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-58181">modules/index.xsl</a></div></div></div><div id="S-58181-docbook.org.ns.docbook.functions.private.nearest-section-id,1" class="instruction function unused"><div class="title"><span class="link"></span>Function fp:nearest-section-id($indexterm as element(db:indexterm)) as xs:string</div><div class="props"><div class="used-by"><span class="marker">☞</span><span class="unused">Unused</span></div></div></div><div id="S-58181-docbook.org.ns.docbook.functions.private.group-index,2" class="instruction function"><div class="title"><span class="link"></span>Function fp:group-index($term as xs:string, $lang as xs:string)</div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-58181-docbook.org.ns.docbook.templates.generate-index">t:generate-index</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-58181">modules/index.xsl</a></div></div></div><div id="S-58181-docbook.org.ns.docbook.functions.private.group-label,2" class="instruction function"><div class="title"><span class="link"></span>Function fp:group-label($index as xs:integer, $lang as xs:string)</div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-58181-t-5">template</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-58181">modules/index.xsl</a></div></div></div><div id="S-58181-docbook.org.ns.docbook.templates.generate-index" class="instruction template"><div class="title"><span class="link"></span>Template t:generate-index  match ≅ </div><div class="props"><div class="uses">Uses: <a href="#S-26643-..index-on-role">$index-on-role</a>, <a href="#S-26643-..index-on-type">$index-on-type</a></div><div class="calls">Calls: <a href="#S-58181-docbook.org.ns.docbook.functions.private.group-index,2">fp:group-index()</a>, <a href="#S-58181-docbook.org.ns.docbook.functions.private.primary,1">fp:primary()</a>, <a href="#S-58181-docbook.org.ns.docbook.functions.private.scope,4">fp:scope()</a>, <a href="#S-28936-docbook.org.ns.docbook.functions.is-true,1">f:is-true()</a>, <a href="#S-28936-docbook.org.ns.docbook.functions.l10n-language,1">f:l10n-language()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-58181-t-3">template</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-58181">modules/index.xsl</a></div><div class="mode">Mode: <code>m:docbook</code></div></div></div><div id="S-58181-t-5" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:indexterm</div><div class="props"><div class="calls">Calls: <a href="#S-58181-docbook.org.ns.docbook.functions.private.group-label,2">fp:group-label()</a>, <a href="#S-58181-docbook.org.ns.docbook.functions.private.primary,1">fp:primary()</a></div><div class="mode">Mode: <code>m:index-div</code></div><div class="matches">Matches: <code>db:indexterm</code></div></div></div><div id="S-58181-t-6" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:indexterm</div><div class="props"><div class="calls">Calls: <a href="#S-58181-docbook.org.ns.docbook.functions.private.primary,1">fp:primary()</a>, <a href="#S-58181-docbook.org.ns.docbook.functions.private.scope,4">fp:scope()</a>, <a href="#S-58181-docbook.org.ns.docbook.functions.private.secondary,1">fp:secondary()</a></div><div class="calls">Calls: <a href="#S-58181-docbook.org.ns.docbook.templates.private.indexed-section">tp:indexed-section</a></div><div class="mode">Mode: <code>m:index-primary</code></div><div class="matches">Matches: <code>db:indexterm</code></div></div></div><div id="S-58181-t-7" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:indexterm</div><div class="props"><div class="calls">Calls: <a href="#S-58181-docbook.org.ns.docbook.functions.private.primary,1">fp:primary()</a>, <a href="#S-58181-docbook.org.ns.docbook.functions.private.secondary,1">fp:secondary()</a>, <a href="#S-58181-docbook.org.ns.docbook.functions.private.tertiary,1">fp:tertiary()</a></div><div class="calls">Calls: <a href="#S-58181-docbook.org.ns.docbook.templates.private.indexed-section">tp:indexed-section</a></div><div class="mode">Mode: <code>m:index-secondary</code></div><div class="matches">Matches: <code>db:indexterm</code></div></div></div><div id="S-58181-t-8" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:indexterm</div><div class="props"><div class="calls">Calls: <a href="#S-58181-docbook.org.ns.docbook.functions.private.primary,1">fp:primary()</a>, <a href="#S-58181-docbook.org.ns.docbook.functions.private.secondary,1">fp:secondary()</a>, <a href="#S-58181-docbook.org.ns.docbook.functions.private.tertiary,1">fp:tertiary()</a></div><div class="calls">Calls: <a href="#S-58181-docbook.org.ns.docbook.templates.private.indexed-section">tp:indexed-section</a></div><div class="mode">Mode: <code>m:index-tertiary</code></div><div class="matches">Matches: <code>db:indexterm</code></div></div></div><div id="S-58181-docbook.org.ns.docbook.templates.private.indexed-section" class="instruction template"><div class="title"><span class="link"></span>Template tp:indexed-section  match ≅ </div><div class="props"><div class="uses">Uses: <a href="#S-26643-..indexed-section-groups">$indexed-section-groups</a></div><div class="calls">Calls: <a href="#S-28936-docbook.org.ns.docbook.functions.is-true,1">f:is-true()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-58181-t-6">template</a>, <a href="#S-58181-t-7">template</a>, <a href="#S-58181-t-8">template</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-58181">modules/index.xsl</a></div><div class="mode">Mode: <code>m:docbook</code></div></div></div><div id="S-58181-t-10" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:indexterm</div><div class="props"><div class="uses">Uses: <a href="#S-26643-..indexed-section-groups">$indexed-section-groups</a></div><div class="calls">Calls: <a href="#S-58181-docbook.org.ns.docbook.functions.private.scope,4">fp:scope()</a>, <a href="#S-28936-docbook.org.ns.docbook.functions.href,2">f:href()</a>, <a href="#S-28936-docbook.org.ns.docbook.functions.is-true,1">f:is-true()</a></div><div class="calls">Calls: <a href="#S-58181-docbook.org.ns.docbook.templates.index-zone-reference">t:index-zone-reference</a></div><div class="mode">Mode: <code>mp:reference</code></div><div class="matches">Matches: <code>db:indexterm</code></div></div></div><div id="S-58181-docbook.org.ns.docbook.templates.index-zone-reference" class="instruction template"><div class="title"><span class="link"></span>Template t:index-zone-reference  match ≅  <span class="recursive" title="Recursive template">♻</span></div><div class="props"><div class="calls">Calls: <a href="#S-58181-docbook.org.ns.docbook.functions.private.scope,4">fp:scope()</a>, <a href="#S-28936-docbook.org.ns.docbook.functions.href,2">f:href()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-58181-t-10">template</a>, <a href="#S-58181-docbook.org.ns.docbook.templates.index-zone-reference">t:index-zone-reference</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-58181">modules/index.xsl</a></div><div class="mode">Mode: <code>m:docbook</code></div></div></div><div id="S-58181-t-12" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:indexterm</div><div class="props"><div class="mode">Mode: <code>m:index-see</code></div><div class="matches">Matches: <code>db:indexterm</code></div></div></div><div id="S-58181-t-13" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:indexterm</div><div class="props"><div class="mode">Mode: <code>m:index-seealso</code></div><div class="matches">Matches: <code>db:indexterm</code></div></div></div><div id="S-58181-t-14" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:indexentry</div><div class="props"><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:indexentry</code></div></div></div><div id="S-58181-t-15" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:primaryie</div><div class="props"><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:primaryie</code></div></div></div><div id="S-58181-t-16" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:secondaryie</div><div class="props"><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:secondaryie</code></div></div></div><div id="S-58181-t-17" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:tertiaryie</div><div class="props"><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:tertiaryie</code></div></div></div><div id="S-58181-t-18" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:seeie</div><div class="props"><div class="calls">Calls: <a href="#S-22317-docbook.org.ns.docbook.functions.gentext,3">f:gentext()</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:seeie</code></div></div></div><div id="S-58181-t-19" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:seealsoie</div><div class="props"><div class="calls">Calls: <a href="#S-22317-docbook.org.ns.docbook.functions.gentext,3">f:gentext()</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:seealsoie</code></div></div></div></div></div><div class="source-code"><div class="title closed">Source code</div><div class="body"><div><table><tr><td valign="top" align="right"><pre class="fake-prism"><span id="line-S-58181-1">1</span>
<span id="line-S-58181-2"><span class="lno">2</span></span>
<span id="line-S-58181-3"><span class="lno">3</span></span>
<span id="line-S-58181-4"><span class="lno">4</span></span>
<span id="line-S-58181-5">5</span>
<span id="line-S-58181-6"><span class="lno">6</span></span>
<span id="line-S-58181-7"><span class="lno">7</span></span>
<span id="line-S-58181-8"><span class="lno">8</span></span>
<span id="line-S-58181-9"><span class="lno">9</span></span>
<span id="line-S-58181-10">10</span>
<span id="line-S-58181-11"><span class="lno">11</span></span>
<span id="line-S-58181-12"><span class="lno">12</span></span>
<span id="line-S-58181-13"><span class="lno">13</span></span>
<span id="line-S-58181-14"><span class="lno">14</span></span>
<span id="line-S-58181-15">15</span>
<span id="line-S-58181-16"><span class="lno">16</span></span>
<span id="line-S-58181-17"><span class="lno">17</span></span>
<span id="line-S-58181-18"><span class="lno">18</span></span>
<span id="line-S-58181-19"><span class="lno">19</span></span>
<span id="line-S-58181-20">20</span>
<span id="line-S-58181-21"><span class="lno">21</span></span>
<span id="line-S-58181-22"><span class="lno">22</span></span>
<span id="line-S-58181-23"><span class="lno">23</span></span>
<span id="line-S-58181-24"><span class="lno">24</span></span>
<span id="line-S-58181-25">25</span>
<span id="line-S-58181-26"><span class="lno">26</span></span>
<span id="line-S-58181-27"><span class="lno">27</span></span>
<span id="line-S-58181-28"><span class="lno">28</span></span>
<span id="line-S-58181-29"><span class="lno">29</span></span>
<span id="line-S-58181-30">30</span>
<span id="line-S-58181-31"><span class="lno">31</span></span>
<span id="line-S-58181-32"><span class="lno">32</span></span>
<span id="line-S-58181-33"><span class="lno">33</span></span>
<span id="line-S-58181-34"><span class="lno">34</span></span>
<span id="line-S-58181-35">35</span>
<span id="line-S-58181-36"><span class="lno">36</span></span>
<span id="line-S-58181-37"><span class="lno">37</span></span>
<span id="line-S-58181-38"><span class="lno">38</span></span>
<span id="line-S-58181-39"><span class="lno">39</span></span>
<span id="line-S-58181-40">40</span>
<span id="line-S-58181-41"><span class="lno">41</span></span>
<span id="line-S-58181-42"><span class="lno">42</span></span>
<span id="line-S-58181-43"><span class="lno">43</span></span>
<span id="line-S-58181-44"><span class="lno">44</span></span>
<span id="line-S-58181-45">45</span>
<span id="line-S-58181-46"><span class="lno">46</span></span>
<span id="line-S-58181-47"><span class="lno">47</span></span>
<span id="line-S-58181-48"><span class="lno">48</span></span>
<span id="line-S-58181-49"><span class="lno">49</span></span>
<span id="line-S-58181-50">50</span>
<span id="line-S-58181-51"><span class="lno">51</span></span>
<span id="line-S-58181-52"><span class="lno">52</span></span>
<span id="line-S-58181-53"><span class="lno">53</span></span>
<span id="line-S-58181-54"><span class="lno">54</span></span>
<span id="line-S-58181-55">55</span>
<span id="line-S-58181-56"><span class="lno">56</span></span>
<span id="line-S-58181-57"><span class="lno">57</span></span>
<span id="line-S-58181-58"><span class="lno">58</span></span>
<span id="line-S-58181-59"><span class="lno">59</span></span>
<span id="line-S-58181-60">60</span>
<span id="line-S-58181-61"><span class="lno">61</span></span>
<span id="line-S-58181-62"><span class="lno">62</span></span>
<span id="line-S-58181-63"><span class="lno">63</span></span>
<span id="line-S-58181-64"><span class="lno">64</span></span>
<span id="line-S-58181-65">65</span>
<span id="line-S-58181-66"><span class="lno">66</span></span>
<span id="line-S-58181-67"><span class="lno">67</span></span>
<span id="line-S-58181-68"><span class="lno">68</span></span>
<span id="line-S-58181-69"><span class="lno">69</span></span>
<span id="line-S-58181-70">70</span>
<span id="line-S-58181-71"><span class="lno">71</span></span>
<span id="line-S-58181-72"><span class="lno">72</span></span>
<span id="line-S-58181-73"><span class="lno">73</span></span>
<span id="line-S-58181-74"><span class="lno">74</span></span>
<span id="line-S-58181-75">75</span>
<span id="line-S-58181-76"><span class="lno">76</span></span>
<span id="line-S-58181-77"><span class="lno">77</span></span>
<span id="line-S-58181-78"><span class="lno">78</span></span>
<span id="line-S-58181-79"><span class="lno">79</span></span>
<span id="line-S-58181-80">80</span>
<span id="line-S-58181-81"><span class="lno">81</span></span>
<span id="line-S-58181-82"><span class="lno">82</span></span>
<span id="line-S-58181-83"><span class="lno">83</span></span>
<span id="line-S-58181-84"><span class="lno">84</span></span>
<span id="line-S-58181-85">85</span>
<span id="line-S-58181-86"><span class="lno">86</span></span>
<span id="line-S-58181-87"><span class="lno">87</span></span>
<span id="line-S-58181-88"><span class="lno">88</span></span>
<span id="line-S-58181-89"><span class="lno">89</span></span>
<span id="line-S-58181-90">90</span>
<span id="line-S-58181-91"><span class="lno">91</span></span>
<span id="line-S-58181-92"><span class="lno">92</span></span>
<span id="line-S-58181-93"><span class="lno">93</span></span>
<span id="line-S-58181-94"><span class="lno">94</span></span>
<span id="line-S-58181-95">95</span>
<span id="line-S-58181-96"><span class="lno">96</span></span>
<span id="line-S-58181-97"><span class="lno">97</span></span>
<span id="line-S-58181-98"><span class="lno">98</span></span>
<span id="line-S-58181-99"><span class="lno">99</span></span>
<span id="line-S-58181-100">100</span>
<span id="line-S-58181-101"><span class="lno">101</span></span>
<span id="line-S-58181-102"><span class="lno">102</span></span>
<span id="line-S-58181-103"><span class="lno">103</span></span>
<span id="line-S-58181-104"><span class="lno">104</span></span>
<span id="line-S-58181-105">105</span>
<span id="line-S-58181-106"><span class="lno">106</span></span>
<span id="line-S-58181-107"><span class="lno">107</span></span>
<span id="line-S-58181-108"><span class="lno">108</span></span>
<span id="line-S-58181-109"><span class="lno">109</span></span>
<span id="line-S-58181-110">110</span>
<span id="line-S-58181-111"><span class="lno">111</span></span>
<span id="line-S-58181-112"><span class="lno">112</span></span>
<span id="line-S-58181-113"><span class="lno">113</span></span>
<span id="line-S-58181-114"><span class="lno">114</span></span>
<span id="line-S-58181-115">115</span>
<span id="line-S-58181-116"><span class="lno">116</span></span>
<span id="line-S-58181-117"><span class="lno">117</span></span>
<span id="line-S-58181-118"><span class="lno">118</span></span>
<span id="line-S-58181-119"><span class="lno">119</span></span>
<span id="line-S-58181-120">120</span>
<span id="line-S-58181-121"><span class="lno">121</span></span>
<span id="line-S-58181-122"><span class="lno">122</span></span>
<span id="line-S-58181-123"><span class="lno">123</span></span>
<span id="line-S-58181-124"><span class="lno">124</span></span>
<span id="line-S-58181-125">125</span>
<span id="line-S-58181-126"><span class="lno">126</span></span>
<span id="line-S-58181-127"><span class="lno">127</span></span>
<span id="line-S-58181-128"><span class="lno">128</span></span>
<span id="line-S-58181-129"><span class="lno">129</span></span>
<span id="line-S-58181-130">130</span>
<span id="line-S-58181-131"><span class="lno">131</span></span>
<span id="line-S-58181-132"><span class="lno">132</span></span>
<span id="line-S-58181-133"><span class="lno">133</span></span>
<span id="line-S-58181-134"><span class="lno">134</span></span>
<span id="line-S-58181-135">135</span>
<span id="line-S-58181-136"><span class="lno">136</span></span>
<span id="line-S-58181-137"><span class="lno">137</span></span>
<span id="line-S-58181-138"><span class="lno">138</span></span>
<span id="line-S-58181-139"><span class="lno">139</span></span>
<span id="line-S-58181-140">140</span>
<span id="line-S-58181-141"><span class="lno">141</span></span>
<span id="line-S-58181-142"><span class="lno">142</span></span>
<span id="line-S-58181-143"><span class="lno">143</span></span>
<span id="line-S-58181-144"><span class="lno">144</span></span>
<span id="line-S-58181-145">145</span>
<span id="line-S-58181-146"><span class="lno">146</span></span>
<span id="line-S-58181-147"><span class="lno">147</span></span>
<span id="line-S-58181-148"><span class="lno">148</span></span>
<span id="line-S-58181-149"><span class="lno">149</span></span>
<span id="line-S-58181-150">150</span>
<span id="line-S-58181-151"><span class="lno">151</span></span>
<span id="line-S-58181-152"><span class="lno">152</span></span>
<span id="line-S-58181-153"><span class="lno">153</span></span>
<span id="line-S-58181-154"><span class="lno">154</span></span>
<span id="line-S-58181-155">155</span>
<span id="line-S-58181-156"><span class="lno">156</span></span>
<span id="line-S-58181-157"><span class="lno">157</span></span>
<span id="line-S-58181-158"><span class="lno">158</span></span>
<span id="line-S-58181-159"><span class="lno">159</span></span>
<span id="line-S-58181-160">160</span>
<span id="line-S-58181-161"><span class="lno">161</span></span>
<span id="line-S-58181-162"><span class="lno">162</span></span>
<span id="line-S-58181-163"><span class="lno">163</span></span>
<span id="line-S-58181-164"><span class="lno">164</span></span>
<span id="line-S-58181-165">165</span>
<span id="line-S-58181-166"><span class="lno">166</span></span>
<span id="line-S-58181-167"><span class="lno">167</span></span>
<span id="line-S-58181-168"><span class="lno">168</span></span>
<span id="line-S-58181-169"><span class="lno">169</span></span>
<span id="line-S-58181-170">170</span>
<span id="line-S-58181-171"><span class="lno">171</span></span>
<span id="line-S-58181-172"><span class="lno">172</span></span>
<span id="line-S-58181-173"><span class="lno">173</span></span>
<span id="line-S-58181-174"><span class="lno">174</span></span>
<span id="line-S-58181-175">175</span>
<span id="line-S-58181-176"><span class="lno">176</span></span>
<span id="line-S-58181-177"><span class="lno">177</span></span>
<span id="line-S-58181-178"><span class="lno">178</span></span>
<span id="line-S-58181-179"><span class="lno">179</span></span>
<span id="line-S-58181-180">180</span>
<span id="line-S-58181-181"><span class="lno">181</span></span>
<span id="line-S-58181-182"><span class="lno">182</span></span>
<span id="line-S-58181-183"><span class="lno">183</span></span>
<span id="line-S-58181-184"><span class="lno">184</span></span>
<span id="line-S-58181-185">185</span>
<span id="line-S-58181-186"><span class="lno">186</span></span>
<span id="line-S-58181-187"><span class="lno">187</span></span>
<span id="line-S-58181-188"><span class="lno">188</span></span>
<span id="line-S-58181-189"><span class="lno">189</span></span>
<span id="line-S-58181-190">190</span>
<span id="line-S-58181-191"><span class="lno">191</span></span>
<span id="line-S-58181-192"><span class="lno">192</span></span>
<span id="line-S-58181-193"><span class="lno">193</span></span>
<span id="line-S-58181-194"><span class="lno">194</span></span>
<span id="line-S-58181-195">195</span>
<span id="line-S-58181-196"><span class="lno">196</span></span>
<span id="line-S-58181-197"><span class="lno">197</span></span>
<span id="line-S-58181-198"><span class="lno">198</span></span>
<span id="line-S-58181-199"><span class="lno">199</span></span>
<span id="line-S-58181-200">200</span>
<span id="line-S-58181-201"><span class="lno">201</span></span>
<span id="line-S-58181-202"><span class="lno">202</span></span>
<span id="line-S-58181-203"><span class="lno">203</span></span>
<span id="line-S-58181-204"><span class="lno">204</span></span>
<span id="line-S-58181-205">205</span>
<span id="line-S-58181-206"><span class="lno">206</span></span>
<span id="line-S-58181-207"><span class="lno">207</span></span>
<span id="line-S-58181-208"><span class="lno">208</span></span>
<span id="line-S-58181-209"><span class="lno">209</span></span>
<span id="line-S-58181-210">210</span>
<span id="line-S-58181-211"><span class="lno">211</span></span>
<span id="line-S-58181-212"><span class="lno">212</span></span>
<span id="line-S-58181-213"><span class="lno">213</span></span>
<span id="line-S-58181-214"><span class="lno">214</span></span>
<span id="line-S-58181-215">215</span>
<span id="line-S-58181-216"><span class="lno">216</span></span>
<span id="line-S-58181-217"><span class="lno">217</span></span>
<span id="line-S-58181-218"><span class="lno">218</span></span>
<span id="line-S-58181-219"><span class="lno">219</span></span>
<span id="line-S-58181-220">220</span>
<span id="line-S-58181-221"><span class="lno">221</span></span>
<span id="line-S-58181-222"><span class="lno">222</span></span>
<span id="line-S-58181-223"><span class="lno">223</span></span>
<span id="line-S-58181-224"><span class="lno">224</span></span>
<span id="line-S-58181-225">225</span>
<span id="line-S-58181-226"><span class="lno">226</span></span>
<span id="line-S-58181-227"><span class="lno">227</span></span>
<span id="line-S-58181-228"><span class="lno">228</span></span>
<span id="line-S-58181-229"><span class="lno">229</span></span>
<span id="line-S-58181-230">230</span>
<span id="line-S-58181-231"><span class="lno">231</span></span>
<span id="line-S-58181-232"><span class="lno">232</span></span>
<span id="line-S-58181-233"><span class="lno">233</span></span>
<span id="line-S-58181-234"><span class="lno">234</span></span>
<span id="line-S-58181-235">235</span>
<span id="line-S-58181-236"><span class="lno">236</span></span>
<span id="line-S-58181-237"><span class="lno">237</span></span>
<span id="line-S-58181-238"><span class="lno">238</span></span>
<span id="line-S-58181-239"><span class="lno">239</span></span>
<span id="line-S-58181-240">240</span>
<span id="line-S-58181-241"><span class="lno">241</span></span>
<span id="line-S-58181-242"><span class="lno">242</span></span>
<span id="line-S-58181-243"><span class="lno">243</span></span>
<span id="line-S-58181-244"><span class="lno">244</span></span>
<span id="line-S-58181-245">245</span>
<span id="line-S-58181-246"><span class="lno">246</span></span>
<span id="line-S-58181-247"><span class="lno">247</span></span>
<span id="line-S-58181-248"><span class="lno">248</span></span>
<span id="line-S-58181-249"><span class="lno">249</span></span>
<span id="line-S-58181-250">250</span>
<span id="line-S-58181-251"><span class="lno">251</span></span>
<span id="line-S-58181-252"><span class="lno">252</span></span>
<span id="line-S-58181-253"><span class="lno">253</span></span>
<span id="line-S-58181-254"><span class="lno">254</span></span>
<span id="line-S-58181-255">255</span>
<span id="line-S-58181-256"><span class="lno">256</span></span>
<span id="line-S-58181-257"><span class="lno">257</span></span>
<span id="line-S-58181-258"><span class="lno">258</span></span>
<span id="line-S-58181-259"><span class="lno">259</span></span>
<span id="line-S-58181-260">260</span>
<span id="line-S-58181-261"><span class="lno">261</span></span>
<span id="line-S-58181-262"><span class="lno">262</span></span>
<span id="line-S-58181-263"><span class="lno">263</span></span>
<span id="line-S-58181-264"><span class="lno">264</span></span>
<span id="line-S-58181-265">265</span>
<span id="line-S-58181-266"><span class="lno">266</span></span>
<span id="line-S-58181-267"><span class="lno">267</span></span>
<span id="line-S-58181-268"><span class="lno">268</span></span>
<span id="line-S-58181-269"><span class="lno">269</span></span>
<span id="line-S-58181-270">270</span>
<span id="line-S-58181-271"><span class="lno">271</span></span>
<span id="line-S-58181-272"><span class="lno">272</span></span>
<span id="line-S-58181-273"><span class="lno">273</span></span>
<span id="line-S-58181-274"><span class="lno">274</span></span>
<span id="line-S-58181-275">275</span>
<span id="line-S-58181-276"><span class="lno">276</span></span>
<span id="line-S-58181-277"><span class="lno">277</span></span>
<span id="line-S-58181-278"><span class="lno">278</span></span>
<span id="line-S-58181-279"><span class="lno">279</span></span>
<span id="line-S-58181-280">280</span>
<span id="line-S-58181-281"><span class="lno">281</span></span>
<span id="line-S-58181-282"><span class="lno">282</span></span>
<span id="line-S-58181-283"><span class="lno">283</span></span>
<span id="line-S-58181-284"><span class="lno">284</span></span>
<span id="line-S-58181-285">285</span>
<span id="line-S-58181-286"><span class="lno">286</span></span>
<span id="line-S-58181-287"><span class="lno">287</span></span>
<span id="line-S-58181-288"><span class="lno">288</span></span>
<span id="line-S-58181-289"><span class="lno">289</span></span>
<span id="line-S-58181-290">290</span>
<span id="line-S-58181-291"><span class="lno">291</span></span>
<span id="line-S-58181-292"><span class="lno">292</span></span>
<span id="line-S-58181-293"><span class="lno">293</span></span>
<span id="line-S-58181-294"><span class="lno">294</span></span>
<span id="line-S-58181-295">295</span>
<span id="line-S-58181-296"><span class="lno">296</span></span>
<span id="line-S-58181-297"><span class="lno">297</span></span>
<span id="line-S-58181-298"><span class="lno">298</span></span>
<span id="line-S-58181-299"><span class="lno">299</span></span>
<span id="line-S-58181-300">300</span>
<span id="line-S-58181-301"><span class="lno">301</span></span>
<span id="line-S-58181-302"><span class="lno">302</span></span>
<span id="line-S-58181-303"><span class="lno">303</span></span>
<span id="line-S-58181-304"><span class="lno">304</span></span>
<span id="line-S-58181-305">305</span>
<span id="line-S-58181-306"><span class="lno">306</span></span>
<span id="line-S-58181-307"><span class="lno">307</span></span>
<span id="line-S-58181-308"><span class="lno">308</span></span>
<span id="line-S-58181-309"><span class="lno">309</span></span>
<span id="line-S-58181-310">310</span>
<span id="line-S-58181-311"><span class="lno">311</span></span>
<span id="line-S-58181-312"><span class="lno">312</span></span>
<span id="line-S-58181-313"><span class="lno">313</span></span>
<span id="line-S-58181-314"><span class="lno">314</span></span>
<span id="line-S-58181-315">315</span>
<span id="line-S-58181-316"><span class="lno">316</span></span>
<span id="line-S-58181-317"><span class="lno">317</span></span>
<span id="line-S-58181-318"><span class="lno">318</span></span>
<span id="line-S-58181-319"><span class="lno">319</span></span>
<span id="line-S-58181-320">320</span>
<span id="line-S-58181-321"><span class="lno">321</span></span>
<span id="line-S-58181-322"><span class="lno">322</span></span>
<span id="line-S-58181-323"><span class="lno">323</span></span>
<span id="line-S-58181-324"><span class="lno">324</span></span>
<span id="line-S-58181-325">325</span>
<span id="line-S-58181-326"><span class="lno">326</span></span>
<span id="line-S-58181-327"><span class="lno">327</span></span>
<span id="line-S-58181-328"><span class="lno">328</span></span>
<span id="line-S-58181-329"><span class="lno">329</span></span>
<span id="line-S-58181-330">330</span>
<span id="line-S-58181-331"><span class="lno">331</span></span>
<span id="line-S-58181-332"><span class="lno">332</span></span>
<span id="line-S-58181-333"><span class="lno">333</span></span>
<span id="line-S-58181-334"><span class="lno">334</span></span>
<span id="line-S-58181-335">335</span>
<span id="line-S-58181-336"><span class="lno">336</span></span>
<span id="line-S-58181-337"><span class="lno">337</span></span>
<span id="line-S-58181-338"><span class="lno">338</span></span>
<span id="line-S-58181-339"><span class="lno">339</span></span>
<span id="line-S-58181-340">340</span>
<span id="line-S-58181-341"><span class="lno">341</span></span>
<span id="line-S-58181-342"><span class="lno">342</span></span>
<span id="line-S-58181-343"><span class="lno">343</span></span>
<span id="line-S-58181-344"><span class="lno">344</span></span>
<span id="line-S-58181-345">345</span>
<span id="line-S-58181-346"><span class="lno">346</span></span>
<span id="line-S-58181-347"><span class="lno">347</span></span>
<span id="line-S-58181-348"><span class="lno">348</span></span>
<span id="line-S-58181-349"><span class="lno">349</span></span>
<span id="line-S-58181-350">350</span>
<span id="line-S-58181-351"><span class="lno">351</span></span>
<span id="line-S-58181-352"><span class="lno">352</span></span>
<span id="line-S-58181-353"><span class="lno">353</span></span>
<span id="line-S-58181-354"><span class="lno">354</span></span>
<span id="line-S-58181-355">355</span>
<span id="line-S-58181-356"><span class="lno">356</span></span>
<span id="line-S-58181-357"><span class="lno">357</span></span>
<span id="line-S-58181-358"><span class="lno">358</span></span>
<span id="line-S-58181-359"><span class="lno">359</span></span>
<span id="line-S-58181-360">360</span>
<span id="line-S-58181-361"><span class="lno">361</span></span>
<span id="line-S-58181-362"><span class="lno">362</span></span>
<span id="line-S-58181-363"><span class="lno">363</span></span>
<span id="line-S-58181-364"><span class="lno">364</span></span>
<span id="line-S-58181-365">365</span>
<span id="line-S-58181-366"><span class="lno">366</span></span>
<span id="line-S-58181-367"><span class="lno">367</span></span>
<span id="line-S-58181-368"><span class="lno">368</span></span>
<span id="line-S-58181-369"><span class="lno">369</span></span>
<span id="line-S-58181-370">370</span>
<span id="line-S-58181-371"><span class="lno">371</span></span>
<span id="line-S-58181-372"><span class="lno">372</span></span>
<span id="line-S-58181-373"><span class="lno">373</span></span>
<span id="line-S-58181-374"><span class="lno">374</span></span>
<span id="line-S-58181-375">375</span>
<span id="line-S-58181-376"><span class="lno">376</span></span>
<span id="line-S-58181-377"><span class="lno">377</span></span>
<span id="line-S-58181-378"><span class="lno">378</span></span>
<span id="line-S-58181-379"><span class="lno">379</span></span>
<span id="line-S-58181-380">380</span>
<span id="line-S-58181-381"><span class="lno">381</span></span>
<span id="line-S-58181-382"><span class="lno">382</span></span>
<span id="line-S-58181-383"><span class="lno">383</span></span>
<span id="line-S-58181-384"><span class="lno">384</span></span>
<span id="line-S-58181-385">385</span>
<span id="line-S-58181-386"><span class="lno">386</span></span>
<span id="line-S-58181-387"><span class="lno">387</span></span>
<span id="line-S-58181-388"><span class="lno">388</span></span>
<span id="line-S-58181-389"><span class="lno">389</span></span>
<span id="line-S-58181-390">390</span>
<span id="line-S-58181-391"><span class="lno">391</span></span>
<span id="line-S-58181-392"><span class="lno">392</span></span>
<span id="line-S-58181-393"><span class="lno">393</span></span>
<span id="line-S-58181-394"><span class="lno">394</span></span>
<span id="line-S-58181-395">395</span>
<span id="line-S-58181-396"><span class="lno">396</span></span>
<span id="line-S-58181-397"><span class="lno">397</span></span>
<span id="line-S-58181-398"><span class="lno">398</span></span>
<span id="line-S-58181-399"><span class="lno">399</span></span>
<span id="line-S-58181-400">400</span>
<span id="line-S-58181-401"><span class="lno">401</span></span>
<span id="line-S-58181-402"><span class="lno">402</span></span>
<span id="line-S-58181-403"><span class="lno">403</span></span>
<span id="line-S-58181-404"><span class="lno">404</span></span>
<span id="line-S-58181-405">405</span>
<span id="line-S-58181-406"><span class="lno">406</span></span>
<span id="line-S-58181-407"><span class="lno">407</span></span>
<span id="line-S-58181-408"><span class="lno">408</span></span>
<span id="line-S-58181-409"><span class="lno">409</span></span>
<span id="line-S-58181-410">410</span>
<span id="line-S-58181-411"><span class="lno">411</span></span>
<span id="line-S-58181-412"><span class="lno">412</span></span>
<span id="line-S-58181-413"><span class="lno">413</span></span>
<span id="line-S-58181-414"><span class="lno">414</span></span>
<span id="line-S-58181-415">415</span>
<span id="line-S-58181-416"><span class="lno">416</span></span>
<span id="line-S-58181-417"><span class="lno">417</span></span>
<span id="line-S-58181-418"><span class="lno">418</span></span>
<span id="line-S-58181-419"><span class="lno">419</span></span>
<span id="line-S-58181-420">420</span>
<span id="line-S-58181-421"><span class="lno">421</span></span>
<span id="line-S-58181-422"><span class="lno">422</span></span>
<span id="line-S-58181-423"><span class="lno">423</span></span>
<span id="line-S-58181-424"><span class="lno">424</span></span>
<span id="line-S-58181-425">425</span>
<span id="line-S-58181-426"><span class="lno">426</span></span>
<span id="line-S-58181-427"><span class="lno">427</span></span>
<span id="line-S-58181-428"><span class="lno">428</span></span>
<span id="line-S-58181-429"><span class="lno">429</span></span>
<span id="line-S-58181-430">430</span>
<span id="line-S-58181-431"><span class="lno">431</span></span>
<span id="line-S-58181-432"><span class="lno">432</span></span>
<span id="line-S-58181-433"><span class="lno">433</span></span>
<span id="line-S-58181-434"><span class="lno">434</span></span>
<span id="line-S-58181-435">435</span>
<span id="line-S-58181-436"><span class="lno">436</span></span>
<span id="line-S-58181-437"><span class="lno">437</span></span>
<span id="line-S-58181-438"><span class="lno">438</span></span>
<span id="line-S-58181-439"><span class="lno">439</span></span>
<span id="line-S-58181-440">440</span>
<span id="line-S-58181-441"><span class="lno">441</span></span>
<span id="line-S-58181-442"><span class="lno">442</span></span>
<span id="line-S-58181-443"><span class="lno">443</span></span>
<span id="line-S-58181-444"><span class="lno">444</span></span>
<span id="line-S-58181-445">445</span>
<span id="line-S-58181-446"><span class="lno">446</span></span>
<span id="line-S-58181-447"><span class="lno">447</span></span>
<span id="line-S-58181-448"><span class="lno">448</span></span>
<span id="line-S-58181-449"><span class="lno">449</span></span>
<span id="line-S-58181-450">450</span>
<span id="line-S-58181-451"><span class="lno">451</span></span>
<span id="line-S-58181-452"><span class="lno">452</span></span>
<span id="line-S-58181-453"><span class="lno">453</span></span>
<span id="line-S-58181-454"><span class="lno">454</span></span>
<span id="line-S-58181-455">455</span>
<span id="line-S-58181-456"><span class="lno">456</span></span>
<span id="line-S-58181-457"><span class="lno">457</span></span>
<span id="line-S-58181-458"><span class="lno">458</span></span>
<span id="line-S-58181-459"><span class="lno">459</span></span>
<span id="line-S-58181-460">460</span>
<span id="line-S-58181-461"><span class="lno">461</span></span>
<span id="line-S-58181-462"><span class="lno">462</span></span>
<span id="line-S-58181-463"><span class="lno">463</span></span>
<span id="line-S-58181-464"><span class="lno">464</span></span>
<span id="line-S-58181-465">465</span>
<span id="line-S-58181-466"><span class="lno">466</span></span>
<span id="line-S-58181-467"><span class="lno">467</span></span>
<span id="line-S-58181-468"><span class="lno">468</span></span>
<span id="line-S-58181-469"><span class="lno">469</span></span>
<span id="line-S-58181-470">470</span>
<span id="line-S-58181-471"><span class="lno">471</span></span>
<span id="line-S-58181-472"><span class="lno">472</span></span>
<span id="line-S-58181-473"><span class="lno">473</span></span>
<span id="line-S-58181-474"><span class="lno">474</span></span>
<span id="line-S-58181-475">475</span>
<span id="line-S-58181-476"><span class="lno">476</span></span>
<span id="line-S-58181-477"><span class="lno">477</span></span>
<span id="line-S-58181-478"><span class="lno">478</span></span>
<span id="line-S-58181-479"><span class="lno">479</span></span>
<span id="line-S-58181-480">480</span>
<span id="line-S-58181-481"><span class="lno">481</span></span>
<span id="line-S-58181-482"><span class="lno">482</span></span>
<span id="line-S-58181-483"><span class="lno">483</span></span>
<span id="line-S-58181-484"><span class="lno">484</span></span>
<span id="line-S-58181-485">485</span>
<span id="line-S-58181-486"><span class="lno">486</span></span>
<span id="line-S-58181-487"><span class="lno">487</span></span>
<span id="line-S-58181-488"><span class="lno">488</span></span>
<span id="line-S-58181-489"><span class="lno">489</span></span>
<span id="line-S-58181-490">490</span>
<span id="line-S-58181-491"><span class="lno">491</span></span>
<span id="line-S-58181-492"><span class="lno">492</span></span>
<span id="line-S-58181-493"><span class="lno">493</span></span>
<span id="line-S-58181-494"><span class="lno">494</span></span>
<span id="line-S-58181-495">495</span>
<span id="line-S-58181-496"><span class="lno">496</span></span>
<span id="line-S-58181-497"><span class="lno">497</span></span>
<span id="line-S-58181-498"><span class="lno">498</span></span>
<span id="line-S-58181-499"><span class="lno">499</span></span>
<span id="line-S-58181-500">500</span>
<span id="line-S-58181-501"><span class="lno">501</span></span>
<span id="line-S-58181-502"><span class="lno">502</span></span>
<span id="line-S-58181-503"><span class="lno">503</span></span>
<span id="line-S-58181-504"><span class="lno">504</span></span>
<span id="line-S-58181-505">505</span>
<span id="line-S-58181-506"><span class="lno">506</span></span>
<span id="line-S-58181-507"><span class="lno">507</span></span>
<span id="line-S-58181-508"><span class="lno">508</span></span>
<span id="line-S-58181-509"><span class="lno">509</span></span>
<span id="line-S-58181-510">510</span>
<span id="line-S-58181-511"><span class="lno">511</span></span>
<span id="line-S-58181-512"><span class="lno">512</span></span>
<span id="line-S-58181-513"><span class="lno">513</span></span>
<span id="line-S-58181-514"><span class="lno">514</span></span>
<span id="line-S-58181-515">515</span>
<span id="line-S-58181-516"><span class="lno">516</span></span>
<span id="line-S-58181-517"><span class="lno">517</span></span>
<span id="line-S-58181-518"><span class="lno">518</span></span>
<span id="line-S-58181-519"><span class="lno">519</span></span>
<span id="line-S-58181-520">520</span>
<span id="line-S-58181-521"><span class="lno">521</span></span>
<span id="line-S-58181-522"><span class="lno">522</span></span>
<span id="line-S-58181-523"><span class="lno">523</span></span>
<span id="line-S-58181-524"><span class="lno">524</span></span>
<span id="line-S-58181-525">525</span>
<span id="line-S-58181-526"><span class="lno">526</span></span>
<span id="line-S-58181-527"><span class="lno">527</span></span>
<span id="line-S-58181-528"><span class="lno">528</span></span>
<span id="line-S-58181-529"><span class="lno">529</span></span>
<span id="line-S-58181-530">530</span>
<span id="line-S-58181-531"><span class="lno">531</span></span>
<span id="line-S-58181-532"><span class="lno">532</span></span>
<span id="line-S-58181-533"><span class="lno">533</span></span>
<span id="line-S-58181-534"><span class="lno">534</span></span>
<span id="line-S-58181-535">535</span>
<span id="line-S-58181-536"><span class="lno">536</span></span>
<span id="line-S-58181-537"><span class="lno">537</span></span>
<span id="line-S-58181-538"><span class="lno">538</span></span>
<span id="line-S-58181-539"><span class="lno">539</span></span>
<span id="line-S-58181-540">540</span>
<span id="line-S-58181-541"><span class="lno">541</span></span>
<span id="line-S-58181-542"><span class="lno">542</span></span>
<span id="line-S-58181-543"><span class="lno">543</span></span>
<span id="line-S-58181-544"><span class="lno">544</span></span>
<span id="line-S-58181-545">545</span>
<span id="line-S-58181-546"><span class="lno">546</span></span>
<span id="line-S-58181-547"><span class="lno">547</span></span>
<span id="line-S-58181-548"><span class="lno">548</span></span>
<span id="line-S-58181-549"><span class="lno">549</span></span>
<span id="line-S-58181-550">550</span>
<span id="line-S-58181-551"><span class="lno">551</span></span>
<span id="line-S-58181-552"><span class="lno">552</span></span>
<span id="line-S-58181-553"><span class="lno">553</span></span>
<span id="line-S-58181-554"><span class="lno">554</span></span>
<span id="line-S-58181-555">555</span>
<span id="line-S-58181-556"><span class="lno">556</span></span>
<span id="line-S-58181-557"><span class="lno">557</span></span>
<span id="line-S-58181-558"><span class="lno">558</span></span>
<span id="line-S-58181-559"><span class="lno">559</span></span>
<span id="line-S-58181-560">560</span>
<span id="line-S-58181-561"><span class="lno">561</span></span>
<span id="line-S-58181-562"><span class="lno">562</span></span>
<span id="line-S-58181-563"><span class="lno">563</span></span>
<span id="line-S-58181-564"><span class="lno">564</span></span>
<span id="line-S-58181-565">565</span>
<span id="line-S-58181-566"><span class="lno">566</span></span>
<span id="line-S-58181-567"><span class="lno">567</span></span>
<span id="line-S-58181-568"><span class="lno">568</span></span>
<span id="line-S-58181-569"><span class="lno">569</span></span>
<span id="line-S-58181-570">570</span>
<span id="line-S-58181-571"><span class="lno">571</span></span>
<span id="line-S-58181-572"><span class="lno">572</span></span>
<span id="line-S-58181-573"><span class="lno">573</span></span>
<span id="line-S-58181-574"><span class="lno">574</span></span>
<span id="line-S-58181-575">575</span>
<span id="line-S-58181-576"><span class="lno">576</span></span>
<span id="line-S-58181-577"><span class="lno">577</span></span>
<span id="line-S-58181-578"><span class="lno">578</span></span>
<span id="line-S-58181-579"><span class="lno">579</span></span>
<span id="line-S-58181-580">580</span>
<span id="line-S-58181-581"><span class="lno">581</span></span>
<span id="line-S-58181-582"><span class="lno">582</span></span>
<span id="line-S-58181-583"><span class="lno">583</span></span>
<span id="line-S-58181-584"><span class="lno">584</span></span>
<span id="line-S-58181-585">585</span>
<span id="line-S-58181-586"><span class="lno">586</span></span>
<span id="line-S-58181-587"><span class="lno">587</span></span>
<span id="line-S-58181-588"><span class="lno">588</span></span>
<span id="line-S-58181-589"><span class="lno">589</span></span>
<span id="line-S-58181-590">590</span>
<span id="line-S-58181-591"><span class="lno">591</span></span>
<span id="line-S-58181-592"><span class="lno">592</span></span>
<span id="line-S-58181-593"><span class="lno">593</span></span>
<span id="line-S-58181-594"><span class="lno">594</span></span>
<span id="line-S-58181-595">595</span>
<span id="line-S-58181-596"><span class="lno">596</span></span>
<span id="line-S-58181-597"><span class="lno">597</span></span>
<span id="line-S-58181-598"><span class="lno">598</span></span>
<span id="line-S-58181-599"><span class="lno">599</span></span>
<span id="line-S-58181-600">600</span>
<span id="line-S-58181-601"><span class="lno">601</span></span>
<span id="line-S-58181-602"><span class="lno">602</span></span>
<span id="line-S-58181-603"><span class="lno">603</span></span>
<span id="line-S-58181-604"><span class="lno">604</span></span>
<span id="line-S-58181-605">605</span>
<span id="line-S-58181-606"><span class="lno">606</span></span>
<span id="line-S-58181-607"><span class="lno">607</span></span>
<span id="line-S-58181-608"><span class="lno">608</span></span>
<span id="line-S-58181-609"><span class="lno">609</span></span>
<span id="line-S-58181-610">610</span>
<span id="line-S-58181-611"><span class="lno">611</span></span>
<span id="line-S-58181-612"><span class="lno">612</span></span>
<span id="line-S-58181-613"><span class="lno">613</span></span>
<span id="line-S-58181-614"><span class="lno">614</span></span>
<span id="line-S-58181-615">615</span>
<span id="line-S-58181-616"><span class="lno">616</span></span>
<span id="line-S-58181-617"><span class="lno">617</span></span>
<span id="line-S-58181-618"><span class="lno">618</span></span>
<span id="line-S-58181-619"><span class="lno">619</span></span>
<span id="line-S-58181-620">620</span>
<span id="line-S-58181-621"><span class="lno">621</span></span>
<span id="line-S-58181-622"><span class="lno">622</span></span>
<span id="line-S-58181-623"><span class="lno">623</span></span>
<span id="line-S-58181-624"><span class="lno">624</span></span>
<span id="line-S-58181-625">625</span>
<span id="line-S-58181-626"><span class="lno">626</span></span>
<span id="line-S-58181-627"><span class="lno">627</span></span>
<span id="line-S-58181-628"><span class="lno">628</span></span>
<span id="line-S-58181-629"><span class="lno">629</span></span>
<span id="line-S-58181-630">630</span>
<span id="line-S-58181-631"><span class="lno">631</span></span>
<span id="line-S-58181-632"><span class="lno">632</span></span>
<span id="line-S-58181-633"><span class="lno">633</span></span>
<span id="line-S-58181-634"><span class="lno">634</span></span>
<span id="line-S-58181-635">635</span>
<span id="line-S-58181-636"><span class="lno">636</span></span>
<span id="line-S-58181-637"><span class="lno">637</span></span>
<span id="line-S-58181-638"><span class="lno">638</span></span>
<span id="line-S-58181-639"><span class="lno">639</span></span>
<span id="line-S-58181-640">640</span>
<span id="line-S-58181-641"><span class="lno">641</span></span>
<span id="line-S-58181-642"><span class="lno">642</span></span>
<span id="line-S-58181-643"><span class="lno">643</span></span>
<span id="line-S-58181-644"><span class="lno">644</span></span>
<span id="line-S-58181-645">645</span>
<span id="line-S-58181-646"><span class="lno">646</span></span>
<span id="line-S-58181-647"><span class="lno">647</span></span>
<span id="line-S-58181-648"><span class="lno">648</span></span>
</pre></td><td valign="top"><pre><code class="language-xml">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                xmlns:db="http://docbook.org/ns/docbook"
                xmlns:f="http://docbook.org/ns/docbook/functions"
                xmlns:fp="http://docbook.org/ns/docbook/functions/private"
                xmlns:l="http://docbook.org/ns/docbook/l10n"
                xmlns:m="http://docbook.org/ns/docbook/modes"
                xmlns:mp="http://docbook.org/ns/docbook/modes/private"
                xmlns:t="http://docbook.org/ns/docbook/templates"
                xmlns:tp="http://docbook.org/ns/docbook/templates/private"
                xmlns:vp="http://docbook.org/ns/docbook/variables/private"
                xmlns:xs="http://www.w3.org/2001/XMLSchema"
                xmlns="http://www.w3.org/1999/xhtml"
                default-mode="m:docbook"
                exclude-result-prefixes="#all"
                version="3.0"&gt;

&lt;xsl:template match="db:indexterm"&gt;
  &lt;span class="indexterm" id="{f:generate-id(.)}"&gt;
    &lt;xsl:if test="not(empty($index-show-entries))"&gt;
      &lt;xsl:attribute name="title" select="string-join(.//*, ', ')"/&gt;
      &lt;xsl:sequence select="$index-show-entries"/&gt;
    &lt;/xsl:if&gt;
  &lt;/span&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:primary|db:secondary|db:tertiary|db:see|db:seealso"/&gt;

&lt;xsl:template match="db:setindex|db:index|db:indexdiv"&gt;
  &lt;xsl:variable name="gi" select="if (parent::*)
                                  then 'div'
                                  else 'article'"/&gt;
  &lt;xsl:element name="{$gi}" namespace="http://www.w3.org/1999/xhtml"&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
    &lt;xsl:apply-templates select="." mode="m:generate-titlepage"/&gt;
    &lt;xsl:apply-templates
        select="node() except (db:indexdiv|db:indexentry|db:segmentedlist)"/&gt;

    &lt;xsl:variable name="autoindex"
                  select="f:pi(., 'autoindex', $generate-index)"/&gt;
    &lt;xsl:if test="f:is-true($autoindex)"&gt;
      &lt;div class="index-list"&gt;
        &lt;xsl:choose&gt;
          &lt;xsl:when test="not(db:indexdiv|db:indexentry|db:segmentedlist)
                          and f:is-true(f:pi(., 'autoindex', 'true'))
                          and f:is-true($generate-index)"&gt;
            &lt;xsl:call-template name="t:generate-index"&gt;
              &lt;xsl:with-param name="scope" select="parent::*"/&gt;
            &lt;/xsl:call-template&gt;
          &lt;/xsl:when&gt;
          &lt;xsl:otherwise&gt;
            &lt;xsl:apply-templates select="db:indexdiv|db:indexentry|db:segmentedlist"/&gt;
          &lt;/xsl:otherwise&gt;
        &lt;/xsl:choose&gt;
      &lt;/div&gt;
    &lt;/xsl:if&gt;
  &lt;/xsl:element&gt;
&lt;/xsl:template&gt;

&lt;!-- ============================================================ --&gt;

&lt;xsl:key name="primary"
         match="db:indexterm"
         use="normalize-space(concat(db:primary/@sortas, db:primary[not(@sortas)]))"/&gt;

&lt;xsl:key name="endofrange"
         match="db:indexterm[@class='endofrange']"
         use="@startref"/&gt;

&lt;!-- ============================================================ --&gt;

&lt;xsl:function name="fp:primary" as="xs:string"&gt;
  &lt;xsl:param name="indexterm" as="element(db:indexterm)"/&gt;
  &lt;xsl:sequence
      select="normalize-space(concat($indexterm/db:primary/@sortas,
                                     $indexterm/db:primary[not(@sortas)]))"/&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="fp:secondary" as="xs:string"&gt;
  &lt;xsl:param name="indexterm" as="element(db:indexterm)"/&gt;
  &lt;xsl:sequence
      select="normalize-space(concat($indexterm/db:secondary/@sortas,
                                     $indexterm/db:secondary[not(@sortas)]))"/&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="fp:tertiary" as="xs:string"&gt;
  &lt;xsl:param name="indexterm" as="element(db:indexterm)"/&gt;
  &lt;xsl:sequence
      select="normalize-space(concat($indexterm/db:tertiary/@sortas,
                                     $indexterm/db:tertiary[not(@sortas)]))"/&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="fp:scope" as="xs:boolean"&gt;
  &lt;xsl:param name="node" as="element()"/&gt;
  &lt;xsl:param name="scope" as="element()"/&gt;
  &lt;xsl:param name="role" as="xs:string?"/&gt;
  &lt;xsl:param name="type" as="xs:string?"/&gt;
  &lt;xsl:sequence
      select="count($node/ancestor::node()|$scope) = count($node/ancestor::node())
                and ($role = $node/@role or $type = $node/@type or
                (string-length($role) = 0 and string-length($type) = 0))"/&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="fp:nearest-section" as="element()"&gt;
  &lt;xsl:param name="node" as="element()"/&gt;
  &lt;xsl:sequence select="($node/ancestor-or-self::db:set
                         |$node/ancestor-or-self::db:book
                         |$node/ancestor-or-self::db:part
                         |$node/ancestor-or-self::db:reference
                         |$node/ancestor-or-self::db:partintro
                         |$node/ancestor-or-self::db:chapter
                         |$node/ancestor-or-self::db:appendix
                         |$node/ancestor-or-self::db:preface
                         |$node/ancestor-or-self::db:article
                         |$node/ancestor-or-self::db:section
                         |$node/ancestor-or-self::db:sect1
                         |$node/ancestor-or-self::db:sect2
                         |$node/ancestor-or-self::db:sect3
                         |$node/ancestor-or-self::db:sect4
                         |$node/ancestor-or-self::db:sect5
                         |$node/ancestor-or-self::db:refentry
                         |$node/ancestor-or-self::db:refsect1
                         |$node/ancestor-or-self::db:refsect2
                         |$node/ancestor-or-self::db:refsect3
                         |$node/ancestor-or-self::db:simplesect
                         |$node/ancestor-or-self::db:bibliography
                         |$node/ancestor-or-self::db:glossary
                         |$node/ancestor-or-self::db:index)[last()]"/&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="fp:nearest-section-id" as="xs:string"&gt;
  &lt;xsl:param name="indexterm" as="element(db:indexterm)"/&gt;
  &lt;xsl:sequence select="f:generate-id(fp:nearest-section($indexterm))"/&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="fp:group-index"&gt;
  &lt;xsl:param name="term" as="xs:string"/&gt;
  &lt;xsl:param name="lang" as="xs:string"/&gt;

  &lt;xsl:variable name="letters"
                select="f:gentext-letters-for-language($lang)"/&gt;

  &lt;xsl:variable name="long-letter-index"
                select="$letters/l:l[. = substring($term,1,2)]/@i"/&gt;

  &lt;xsl:variable name="short-letter-index"
                select="$letters/l:l[. = substring($term,1,1)]/@i"/&gt;

  &lt;xsl:sequence select="($long-letter-index, $short-letter-index, 0)[1]"/&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="fp:group-label"&gt;
  &lt;xsl:param name="index" as="xs:integer"/&gt;
  &lt;xsl:param name="lang" as="xs:string"/&gt;

  &lt;xsl:variable name="letters"
                select="f:gentext-letters-for-language($lang)"/&gt;

  &lt;xsl:value-of select="$letters/l:l[@i=$index][1]"/&gt;
&lt;/xsl:function&gt;

&lt;!-- ============================================================ --&gt;

&lt;xsl:template name="t:generate-index"&gt;
  &lt;xsl:param name="scope" select="(ancestor::db:book|/)[last()]"/&gt;

  &lt;xsl:variable name="role"
                select="if (f:is-true($index-on-role))
                        then @role
                        else ()"/&gt;

  &lt;xsl:variable name="type"
                select="if (f:is-true($index-on-type))
                        then @type
                        else ()"/&gt;

  &lt;xsl:variable name="lang" select="f:l10n-language($scope)"/&gt;

  &lt;div class="generated-index"&gt;
    &lt;xsl:for-each-group select="//db:indexterm[fp:scope(., $scope, $role, $type)]
                                   [not(@class = 'endofrange')]"
                        group-by="fp:group-index(fp:primary(.), $lang)"&gt;
      &lt;xsl:sort select="fp:group-index(fp:primary(.), $lang)" data-type="number"/&gt;
      &lt;xsl:apply-templates select="." mode="m:index-div"&gt;
        &lt;xsl:with-param name="scope" select="$scope"/&gt;
        &lt;xsl:with-param name="role" select="$role"/&gt;
        &lt;xsl:with-param name="type" select="$type"/&gt;
        &lt;xsl:with-param name="lang" select="$lang"/&gt;
        &lt;xsl:with-param name="nodes" select="current-group()"/&gt;
        &lt;xsl:with-param name="group-index" select="current-grouping-key()"/&gt;
      &lt;/xsl:apply-templates&gt;
    &lt;/xsl:for-each-group&gt;
  &lt;/div&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:indexterm" mode="m:index-div"&gt;
  &lt;xsl:param name="scope" select="."/&gt;
  &lt;xsl:param name="role" select="''"/&gt;
  &lt;xsl:param name="type" select="''"/&gt;
  &lt;xsl:param name="lang" select="'en'"/&gt;
  &lt;xsl:param name="nodes" as="element()*"/&gt;
  &lt;xsl:param name="group-index"/&gt;

  &lt;xsl:if test="$nodes"&gt;
    &lt;div class="generated-indexdiv"&gt;
      &lt;header&gt;
        &lt;h3&gt;
          &lt;xsl:value-of select="fp:group-label($group-index, $lang)"/&gt;
        &lt;/h3&gt;
      &lt;/header&gt;
      &lt;ul&gt;
        &lt;xsl:for-each-group select="$nodes" group-by="fp:primary(.)"&gt;
          &lt;xsl:sort select="fp:primary(.)" lang="{$lang}"/&gt;
          &lt;xsl:apply-templates select="current-group()[1]" mode="m:index-primary"&gt;
            &lt;xsl:with-param name="scope" select="$scope"/&gt;
            &lt;xsl:with-param name="role" select="$role"/&gt;
            &lt;xsl:with-param name="type" select="$type"/&gt;
            &lt;xsl:with-param name="lang" select="$lang"/&gt;
          &lt;/xsl:apply-templates&gt;
        &lt;/xsl:for-each-group&gt;
      &lt;/ul&gt;
    &lt;/div&gt;
  &lt;/xsl:if&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:indexterm" mode="m:index-primary"&gt;
  &lt;xsl:param name="scope" select="."/&gt;
  &lt;xsl:param name="role" select="''"/&gt;
  &lt;xsl:param name="type" select="''"/&gt;
  &lt;xsl:param name="lang" select="'en'"/&gt;

  &lt;xsl:variable name="key" select="fp:primary(.)"/&gt;
  &lt;xsl:variable name="refs"
                select="key('primary', $key)[fp:scope(., $scope, $role, $type)]"/&gt;
  &lt;li&gt;
    &lt;xsl:value-of select="db:primary"/&gt;
    &lt;xsl:for-each-group select="$refs[not(db:secondary) and not(db:see)]"
                        group-by="concat(fp:primary(.), ' ', fp:nearest-section-id(.))"&gt;
      &lt;xsl:call-template name="tp:indexed-section"&gt;
        &lt;xsl:with-param name="nodes" select="current-group()"/&gt;
        &lt;xsl:with-param name="scope" select="$scope"/&gt;
        &lt;xsl:with-param name="role" select="$role"/&gt;
        &lt;xsl:with-param name="type" select="$type"/&gt;
        &lt;xsl:with-param name="lang" select="$lang"/&gt;
      &lt;/xsl:call-template&gt;
    &lt;/xsl:for-each-group&gt;

    &lt;xsl:if test="$refs[not(db:secondary)]/*[self::db:see]"&gt;
      &lt;xsl:for-each-group select="$refs[db:see]"
                          group-by="concat(fp:primary(.), ' ', ' ', ' ', db:see)"&gt;
        &lt;xsl:apply-templates select="." mode="m:index-see"&gt;
          &lt;xsl:with-param name="scope" select="$scope"/&gt;
          &lt;xsl:with-param name="role" select="$role"/&gt;
          &lt;xsl:with-param name="type" select="$type"/&gt;
          &lt;xsl:with-param name="lang" select="$lang"/&gt;
          &lt;xsl:sort select="upper-case(db:see)" lang="{$lang}"/&gt;
        &lt;/xsl:apply-templates&gt;
      &lt;/xsl:for-each-group&gt;
    &lt;/xsl:if&gt;
    &lt;xsl:if test="$refs/db:secondary or $refs[not(db:secondary)]/*[self::db:seealso]"&gt;
      &lt;ul&gt;
        &lt;xsl:if test="count(db:seealso) &amp;gt; 1"&gt;
          &lt;xsl:message&gt;Multiple see also's not supported: only using first&lt;/xsl:message&gt;
        &lt;/xsl:if&gt;

        &lt;xsl:for-each-group select="$refs[db:seealso]"
                            group-by="concat(fp:primary(.), ' ', ' ', ' ', db:seealso[1])"&gt;
          &lt;xsl:apply-templates select="." mode="m:index-seealso"&gt;
            &lt;xsl:with-param name="scope" select="$scope"/&gt;
            &lt;xsl:with-param name="role" select="$role"/&gt;
            &lt;xsl:with-param name="type" select="$type"/&gt;
            &lt;xsl:with-param name="lang" select="$lang"/&gt;
            &lt;xsl:sort select="upper-case(db:seealso[1])" lang="{$lang}"/&gt;
          &lt;/xsl:apply-templates&gt;
        &lt;/xsl:for-each-group&gt;
        &lt;xsl:for-each-group select="$refs[db:secondary]"
                            group-by="concat(fp:primary(.), ' ', fp:secondary(.))"&gt;
          &lt;xsl:apply-templates select="." mode="m:index-secondary"&gt;
            &lt;xsl:with-param name="scope" select="$scope"/&gt;
            &lt;xsl:with-param name="role" select="$role"/&gt;
            &lt;xsl:with-param name="type" select="$type"/&gt;
            &lt;xsl:with-param name="lang" select="$lang"/&gt;
            &lt;xsl:with-param name="refs" select="current-group()"/&gt;
            &lt;xsl:sort select="upper-case(fp:secondary(.))" lang="{$lang}"/&gt;
          &lt;/xsl:apply-templates&gt;
        &lt;/xsl:for-each-group&gt;
      &lt;/ul&gt;
    &lt;/xsl:if&gt;
  &lt;/li&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:indexterm" mode="m:index-secondary"&gt;
  &lt;xsl:param name="scope" select="."/&gt;
  &lt;xsl:param name="role" select="''"/&gt;
  &lt;xsl:param name="type" select="''"/&gt;
  &lt;xsl:param name="refs" as="element()*"/&gt;
  &lt;xsl:param name="lang" select="'en'"/&gt;

  &lt;xsl:variable name="key" select="concat(fp:primary(.), ' ', fp:secondary(.))"/&gt;
  &lt;li&gt;
    &lt;xsl:value-of select="db:secondary"/&gt;
    &lt;xsl:for-each-group select="$refs[not(db:tertiary) and not(db:see)]"
                        group-by="concat($key, ' ', fp:nearest-section-id(.))"&gt;
      &lt;xsl:call-template name="tp:indexed-section"&gt;
        &lt;xsl:with-param name="nodes" select="current-group()"/&gt;
        &lt;xsl:with-param name="scope" select="$scope"/&gt;
        &lt;xsl:with-param name="role" select="$role"/&gt;
        &lt;xsl:with-param name="type" select="$type"/&gt;
        &lt;xsl:with-param name="lang" select="$lang"/&gt;
      &lt;/xsl:call-template&gt;
    &lt;/xsl:for-each-group&gt;

    &lt;xsl:if test="$refs[not(db:tertiary)]/*[self::db:see]"&gt;
      &lt;xsl:for-each-group select="$refs[db:see]"
                          group-by="concat(fp:primary(.), ' ', fp:secondary(.), ' ', ' ', db:see)"&gt;
        &lt;xsl:apply-templates select="." mode="m:index-see"&gt;
          &lt;xsl:with-param name="scope" select="$scope"/&gt;
          &lt;xsl:with-param name="role" select="$role"/&gt;
          &lt;xsl:with-param name="type" select="$type"/&gt;
          &lt;xsl:with-param name="lang" select="$lang"/&gt;
          &lt;xsl:sort select="upper-case(db:see)" lang="{$lang}"/&gt;
        &lt;/xsl:apply-templates&gt;
      &lt;/xsl:for-each-group&gt;
    &lt;/xsl:if&gt;
    &lt;xsl:if test="$refs/db:tertiary or $refs[not(db:tertiary)]/*[self::db:seealso]"&gt;
      &lt;ul&gt;
        &lt;xsl:if test="count(db:seealso) &amp;gt; 1"&gt;
          &lt;xsl:message&gt;Multiple see also's not supported: only using first&lt;/xsl:message&gt;
        &lt;/xsl:if&gt;

        &lt;xsl:for-each-group select="$refs[db:seealso]"
                            group-by="concat(fp:primary(.), ' ', fp:secondary(.), ' ', ' ', db:seealso[1])"&gt;
          &lt;xsl:apply-templates select="." mode="m:index-seealso"&gt;
            &lt;xsl:with-param name="scope" select="$scope"/&gt;
            &lt;xsl:with-param name="role" select="$role"/&gt;
            &lt;xsl:with-param name="type" select="$type"/&gt;
            &lt;xsl:with-param name="lang" select="$lang"/&gt;
            &lt;xsl:sort select="upper-case(db:seealso[1])" lang="{$lang}"/&gt;
          &lt;/xsl:apply-templates&gt;
        &lt;/xsl:for-each-group&gt;

        &lt;xsl:for-each-group select="$refs[db:tertiary]"
                            group-by="concat($key, ' ', fp:tertiary(.))"&gt;
          &lt;xsl:apply-templates select="." mode="m:index-tertiary"&gt;
            &lt;xsl:with-param name="scope" select="$scope"/&gt;
            &lt;xsl:with-param name="role" select="$role"/&gt;
            &lt;xsl:with-param name="type" select="$type"/&gt;
            &lt;xsl:with-param name="lang" select="$lang"/&gt;
            &lt;xsl:with-param name="refs" select="current-group()"/&gt;
            &lt;xsl:sort select="upper-case(fp:tertiary(.))" lang="{$lang}"/&gt;
          &lt;/xsl:apply-templates&gt;
        &lt;/xsl:for-each-group&gt;
      &lt;/ul&gt;
    &lt;/xsl:if&gt;
  &lt;/li&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:indexterm" mode="m:index-tertiary"&gt;
  &lt;xsl:param name="scope" select="."/&gt;
  &lt;xsl:param name="role" select="''"/&gt;
  &lt;xsl:param name="type" select="''"/&gt;
  &lt;xsl:param name="lang" select="'en'"/&gt;
  &lt;xsl:param name="refs" as="element()*"/&gt;

  &lt;xsl:variable name="key" select="concat(fp:primary(.), ' ', fp:secondary(.), ' ', fp:tertiary(.))"/&gt;
  &lt;li&gt;
    &lt;xsl:value-of select="db:tertiary"/&gt;
    &lt;xsl:for-each-group select="$refs[not(db:see)]"
                        group-by="concat($key, ' ', fp:nearest-section-id(.))"&gt;
      &lt;xsl:call-template name="tp:indexed-section"&gt;
        &lt;xsl:with-param name="nodes" select="current-group()"/&gt;
        &lt;xsl:with-param name="scope" select="$scope"/&gt;
        &lt;xsl:with-param name="role" select="$role"/&gt;
        &lt;xsl:with-param name="type" select="$type"/&gt;
        &lt;xsl:with-param name="lang" select="$lang"/&gt;
      &lt;/xsl:call-template&gt;
    &lt;/xsl:for-each-group&gt;

    &lt;xsl:if test="$refs/db:see"&gt;
      &lt;xsl:for-each-group select="$refs[db:see]"
                          group-by="concat(fp:primary(.), ' ', fp:secondary(.), ' ', fp:tertiary(.), ' ', db:see)"&gt;
        &lt;xsl:apply-templates select="." mode="m:index-see"&gt;
          &lt;xsl:with-param name="scope" select="$scope"/&gt;
          &lt;xsl:with-param name="role" select="$role"/&gt;
          &lt;xsl:with-param name="type" select="$type"/&gt;
          &lt;xsl:with-param name="lang" select="$lang"/&gt;
          &lt;xsl:sort select="upper-case(db:see)" lang="{$lang}"/&gt;
        &lt;/xsl:apply-templates&gt;
      &lt;/xsl:for-each-group&gt;
    &lt;/xsl:if&gt;
    &lt;xsl:if test="$refs/db:seealso"&gt;
      &lt;ul&gt;
        &lt;xsl:if test="count(db:seealso) &amp;gt; 1"&gt;
          &lt;xsl:message&gt;Multiple see also's not supported: only using first&lt;/xsl:message&gt;
        &lt;/xsl:if&gt;

        &lt;xsl:for-each-group select="$refs[db:seealso]"
                            group-by="concat(fp:primary(.), ' ', fp:secondary(.), ' ', fp:tertiary(.), ' ', db:seealso[1])"&gt;
          &lt;xsl:apply-templates select="." mode="m:index-seealso"&gt;
            &lt;xsl:with-param name="scope" select="$scope"/&gt;
            &lt;xsl:with-param name="role" select="$role"/&gt;
            &lt;xsl:with-param name="type" select="$type"/&gt;
            &lt;xsl:with-param name="lang" select="$lang"/&gt;
            &lt;xsl:sort select="upper-case(db:seealso[1])" lang="{$lang}"/&gt;
          &lt;/xsl:apply-templates&gt;
        &lt;/xsl:for-each-group&gt;
      &lt;/ul&gt;
    &lt;/xsl:if&gt;
  &lt;/li&gt;
&lt;/xsl:template&gt;

&lt;xsl:template name="tp:indexed-section"&gt;
  &lt;xsl:param name="nodes" as="element()+" required="yes"/&gt;
  &lt;xsl:param name="scope" select="."/&gt;
  &lt;xsl:param name="role" select="''"/&gt;
  &lt;xsl:param name="type" select="''"/&gt;
  &lt;xsl:param name="lang" select="'en'"/&gt;

  &lt;xsl:choose&gt;
    &lt;xsl:when test="f:is-true($indexed-section-groups)"&gt;
      &lt;xsl:text&gt;, &lt;/xsl:text&gt;
      &lt;xsl:variable name="tobject"
                    select="$nodes[1]/ancestor::*[db:title or db:info/db:title][1]"/&gt;
      &lt;span class="indexed-section"&gt;
        &lt;xsl:attribute name="title"&gt;
          &lt;xsl:apply-templates select="$tobject" mode="m:headline"&gt;
            &lt;xsl:with-param name="purpose" select="'index-tooltip'"/&gt;
          &lt;/xsl:apply-templates&gt;
        &lt;/xsl:attribute&gt;

        &lt;xsl:for-each select="$nodes"&gt;
          &lt;xsl:variable name="pos" select="position()"/&gt;
          &lt;xsl:variable name="last" select="count(current-group())"/&gt;

          &lt;xsl:apply-templates select="." mode="mp:reference"&gt;
            &lt;xsl:with-param name="scope" select="$scope"/&gt;
            &lt;xsl:with-param name="role" select="$role"/&gt;
            &lt;xsl:with-param name="type" select="$type"/&gt;
            &lt;xsl:with-param name="lang" select="$lang"/&gt;
            &lt;xsl:with-param name="separator" select="if ($pos = 1) then '' else ', '"/&gt;
            &lt;xsl:with-param name="position" select="$pos"/&gt;
            &lt;xsl:with-param name="last" select="$last"/&gt;
          &lt;/xsl:apply-templates&gt;
        &lt;/xsl:for-each&gt;
      &lt;/span&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:apply-templates select="$nodes[1]" mode="mp:reference"&gt;
        &lt;xsl:with-param name="scope" select="$scope"/&gt;
        &lt;xsl:with-param name="role" select="$role"/&gt;
        &lt;xsl:with-param name="type" select="$type"/&gt;
        &lt;xsl:with-param name="lang" select="$lang"/&gt;
      &lt;/xsl:apply-templates&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:indexterm" mode="mp:reference"&gt;
  &lt;xsl:param name="scope" select="."/&gt;
  &lt;xsl:param name="role" select="''"/&gt;
  &lt;xsl:param name="type" select="''"/&gt;
  &lt;xsl:param name="lang" select="'en'"/&gt;
  &lt;xsl:param name="separator" select="', '"/&gt;
  &lt;xsl:param name="position" as="xs:integer?"/&gt;
  &lt;xsl:param name="last" as="xs:integer?"/&gt;

  &lt;xsl:value-of select="$separator"/&gt;
  &lt;xsl:choose&gt;
    &lt;xsl:when test="@zone"&gt;
      &lt;xsl:call-template name="t:index-zone-reference"&gt;
        &lt;xsl:with-param name="zones" select="tokenize(@zone, '\s+')"/&gt;
        &lt;xsl:with-param name="scope" select="$scope"/&gt;
        &lt;xsl:with-param name="role" select="$role"/&gt;
        &lt;xsl:with-param name="type" select="$type"/&gt;
        &lt;xsl:with-param name="lang" select="$lang"/&gt;
      &lt;/xsl:call-template&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:variable name="tobject"
                    select="ancestor::*[db:title or db:info/db:title][1]"/&gt;
      &lt;a class="indexref" href="{f:href(/,.)}"&gt;
        &lt;xsl:if test="not(f:is-true($indexed-section-groups))"&gt;
          &lt;xsl:attribute name="title"&gt;
            &lt;xsl:apply-templates select="$tobject" mode="m:headline"&gt;
              &lt;xsl:with-param name="purpose" select="'index-tooltip'"/&gt;
            &lt;/xsl:apply-templates&gt;
          &lt;/xsl:attribute&gt;
        &lt;/xsl:if&gt;
        &lt;xsl:sequence select="($position, position())[1]"/&gt;
      &lt;/a&gt;

      &lt;xsl:if test="key('endofrange', @xml:id)[fp:scope(., $scope, $role, $type)]"&gt;
        &lt;xsl:apply-templates select="key('endofrange', @xml:id)[fp:scope(., $scope, $role, $type)][last()]"
                             mode="mp:reference"&gt;
          &lt;xsl:with-param name="scope" select="$scope"/&gt;
          &lt;xsl:with-param name="role" select="$role"/&gt;
          &lt;xsl:with-param name="type" select="$type"/&gt;
          &lt;xsl:with-param name="lang" select="$lang"/&gt;
          &lt;xsl:with-param name="separator" select="'-'"/&gt;
        &lt;/xsl:apply-templates&gt;
      &lt;/xsl:if&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:template&gt;

&lt;xsl:template name="t:index-zone-reference"&gt;
  &lt;xsl:param name="scope" select="."/&gt;
  &lt;xsl:param name="role" select="''"/&gt;
  &lt;xsl:param name="type" select="''"/&gt;
  &lt;xsl:param name="lang" select="'en'"/&gt;
  &lt;xsl:param name="zones" as="xs:string*"/&gt;

  &lt;xsl:choose&gt;
    &lt;xsl:when test="empty($zones)"/&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:variable name="zone" select="$zones[1]"/&gt;
      &lt;xsl:variable name="target" select="key('id', $zone)
                                             [fp:scope(., $scope, $role, $type)]"/&gt;
      &lt;xsl:choose&gt;
        &lt;xsl:when test="$target"&gt;
          &lt;a class="indexref" href="{f:href(/,$target[1])}"&gt;
            &lt;xsl:apply-templates select="$target[1]" mode="m:headline"&gt;
              &lt;xsl:with-param name="purpose" select="'index'"/&gt;
            &lt;/xsl:apply-templates&gt;
          &lt;/a&gt;
        &lt;/xsl:when&gt;
        &lt;xsl:otherwise&gt;
          &lt;xsl:message select="'Warning: missing zone:', $zone"/&gt;
        &lt;/xsl:otherwise&gt;
      &lt;/xsl:choose&gt;
      &lt;xsl:if test="count($zones) gt 1"&gt;
        &lt;xsl:text&gt;, &lt;/xsl:text&gt;
        &lt;xsl:call-template name="t:index-zone-reference"&gt;
          &lt;xsl:with-param name="zones" select="substring-after($zones, ' ')"/&gt;
          &lt;xsl:with-param name="scope" select="$scope"/&gt;
          &lt;xsl:with-param name="role" select="$role"/&gt;
          &lt;xsl:with-param name="type" select="$type"/&gt;
          &lt;xsl:with-param name="lang" select="$lang"/&gt;
        &lt;/xsl:call-template&gt;
      &lt;/xsl:if&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:indexterm" mode="m:index-see"&gt;
  &lt;xsl:param name="scope" select="."/&gt;
  &lt;xsl:param name="role" select="''"/&gt;
  &lt;xsl:param name="type" select="''"/&gt;
  &lt;xsl:param name="lang" select="'en'"/&gt;

  &lt;span class="sep"&gt; (&lt;/span&gt;
   &lt;xsl:apply-templates select="db:see" mode="m:crossref"/&gt;
  &lt;span class="sep"&gt;)&lt;/span&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:indexterm" mode="m:index-seealso"&gt;
  &lt;xsl:param name="scope" select="."/&gt;
  &lt;xsl:param name="role" select="''"/&gt;
  &lt;xsl:param name="type" select="''"/&gt;
  &lt;xsl:param name="lang" select="'en'"/&gt;

  &lt;xsl:for-each select="db:seealso"&gt;
    &lt;xsl:sort select="upper-case(.)" lang="{$lang}"/&gt;
    &lt;li&gt;
      &lt;span class="sep"&gt;(&lt;/span&gt;
      &lt;xsl:apply-templates select="." mode="m:crossref"/&gt;
      &lt;span class="sep"&gt;)&lt;/span&gt;
    &lt;/li&gt;
  &lt;/xsl:for-each&gt;
&lt;/xsl:template&gt;

&lt;!-- ============================================================ --&gt;

&lt;xsl:template match="db:indexentry"&gt;
  &lt;xsl:apply-templates select="db:primaryie"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:primaryie"&gt;
  &lt;li&gt;
    &lt;xsl:apply-templates/&gt;
    &lt;xsl:choose&gt;
      &lt;xsl:when test="following-sibling::db:secondaryie"&gt;
        &lt;ul&gt;
          &lt;xsl:apply-templates select="following-sibling::db:secondaryie"/&gt;
        &lt;/ul&gt;
      &lt;/xsl:when&gt;
      &lt;xsl:when test="following-sibling::db:seeie
                      |following-sibling::db:seealsoie"&gt;
        &lt;ul&gt;
          &lt;xsl:apply-templates select="following-sibling::db:seeie
                                       |following-sibling::db:seealsoie"/&gt;
        &lt;/ul&gt;
      &lt;/xsl:when&gt;
    &lt;/xsl:choose&gt;
  &lt;/li&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:secondaryie"&gt;
  &lt;li&gt;
    &lt;xsl:apply-templates/&gt;
    &lt;xsl:choose&gt;
      &lt;xsl:when test="following-sibling::db:tertiaryie"&gt;
        &lt;ul&gt;
          &lt;xsl:apply-templates select="following-sibling::db:tertiaryie"/&gt;
        &lt;/ul&gt;
      &lt;/xsl:when&gt;
      &lt;xsl:when test="following-sibling::db:seeie
                      |following-sibling::db:seealsoie"&gt;
        &lt;ul&gt;
          &lt;xsl:apply-templates select="following-sibling::db:seeie
                                       |following-sibling::db:seealsoie"/&gt;
        &lt;/ul&gt;
      &lt;/xsl:when&gt;
    &lt;/xsl:choose&gt;
  &lt;/li&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:tertiaryie"&gt;
  &lt;li&gt;
    &lt;xsl:apply-templates/&gt;
    &lt;xsl:if test="following-sibling::db:seeie
                  |following-sibling::db:seealsoie"&gt;
      &lt;ul&gt;
        &lt;xsl:apply-templates select="following-sibling::db:seeie
                                     |following-sibling::db:seealsoie"/&gt;
      &lt;/ul&gt;
    &lt;/xsl:if&gt;
  &lt;/li&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:seeie"&gt;
  &lt;li&gt;
    &lt;xsl:sequence select="f:gentext(., 'label', 'see')"/&gt;
    &lt;xsl:text&gt; &lt;/xsl:text&gt;
    &lt;xsl:apply-templates/&gt;
  &lt;/li&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:seealsoie"&gt;
  &lt;li&gt;
    &lt;xsl:sequence select="f:gentext(., 'label', 'seealso')"/&gt;
    &lt;xsl:text&gt; &lt;/xsl:text&gt;
    &lt;xsl:apply-templates/&gt;
  &lt;/li&gt;
&lt;/xsl:template&gt;

&lt;/xsl:stylesheet&gt;
</code></pre></td></tr></table></div></div></div></div><div class="stylesheet" id="S-7830"><h3>sections.xsl</h3><p><span><span class="template all">2 templates</span></span>, <span><span class="variable all">1 variable</span></span></p><div class="instructions"><div class="title closed">Instructions</div><div class="body"><div id="S-7830-t-1" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:sect1|db:sect2|db:sect3|db:…</div><div class="props"><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:sect1</code>, <code>db:sect2</code>, <code>db:sect3</code>, <code>db:sect4</code>, <code>db:sect5</code>, <code>db:section</code>, <code>db:simplesect</code></div></div></div><div id="S-7830-docbook.org.ns.docbook.variables.bridgehead-map" class="instruction variable"><div class="title"><span class="link"></span>Variable <code>$v:bridgehead-map</code> as <code>map(*)</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-7830-t-2">template</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-7830">modules/sections.xsl</a></div></div></div><div id="S-7830-t-2" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:bridgehead</div><div class="props"><div class="uses">Uses: <a href="#S-7830-docbook.org.ns.docbook.variables.bridgehead-map">$v:bridgehead-map</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:bridgehead</code></div></div></div></div></div><div class="source-code"><div class="title closed">Source code</div><div class="body"><div><table><tr><td valign="top" align="right"><pre class="fake-prism"><span id="line-S-7830-1">1</span>
<span id="line-S-7830-2"><span class="lno">2</span></span>
<span id="line-S-7830-3"><span class="lno">3</span></span>
<span id="line-S-7830-4"><span class="lno">4</span></span>
<span id="line-S-7830-5">5</span>
<span id="line-S-7830-6"><span class="lno">6</span></span>
<span id="line-S-7830-7"><span class="lno">7</span></span>
<span id="line-S-7830-8"><span class="lno">8</span></span>
<span id="line-S-7830-9"><span class="lno">9</span></span>
<span id="line-S-7830-10">10</span>
<span id="line-S-7830-11"><span class="lno">11</span></span>
<span id="line-S-7830-12"><span class="lno">12</span></span>
<span id="line-S-7830-13"><span class="lno">13</span></span>
<span id="line-S-7830-14"><span class="lno">14</span></span>
<span id="line-S-7830-15">15</span>
<span id="line-S-7830-16"><span class="lno">16</span></span>
<span id="line-S-7830-17"><span class="lno">17</span></span>
<span id="line-S-7830-18"><span class="lno">18</span></span>
<span id="line-S-7830-19"><span class="lno">19</span></span>
<span id="line-S-7830-20">20</span>
<span id="line-S-7830-21"><span class="lno">21</span></span>
<span id="line-S-7830-22"><span class="lno">22</span></span>
<span id="line-S-7830-23"><span class="lno">23</span></span>
<span id="line-S-7830-24"><span class="lno">24</span></span>
<span id="line-S-7830-25">25</span>
<span id="line-S-7830-26"><span class="lno">26</span></span>
<span id="line-S-7830-27"><span class="lno">27</span></span>
<span id="line-S-7830-28"><span class="lno">28</span></span>
<span id="line-S-7830-29"><span class="lno">29</span></span>
<span id="line-S-7830-30">30</span>
<span id="line-S-7830-31"><span class="lno">31</span></span>
<span id="line-S-7830-32"><span class="lno">32</span></span>
<span id="line-S-7830-33"><span class="lno">33</span></span>
<span id="line-S-7830-34"><span class="lno">34</span></span>
<span id="line-S-7830-35">35</span>
<span id="line-S-7830-36"><span class="lno">36</span></span>
<span id="line-S-7830-37"><span class="lno">37</span></span>
<span id="line-S-7830-38"><span class="lno">38</span></span>
<span id="line-S-7830-39"><span class="lno">39</span></span>
<span id="line-S-7830-40">40</span>
<span id="line-S-7830-41"><span class="lno">41</span></span>
<span id="line-S-7830-42"><span class="lno">42</span></span>
<span id="line-S-7830-43"><span class="lno">43</span></span>
<span id="line-S-7830-44"><span class="lno">44</span></span>
<span id="line-S-7830-45">45</span>
<span id="line-S-7830-46"><span class="lno">46</span></span>
<span id="line-S-7830-47"><span class="lno">47</span></span>
<span id="line-S-7830-48"><span class="lno">48</span></span>
<span id="line-S-7830-49"><span class="lno">49</span></span>
<span id="line-S-7830-50">50</span>
<span id="line-S-7830-51"><span class="lno">51</span></span>
<span id="line-S-7830-52"><span class="lno">52</span></span>
<span id="line-S-7830-53"><span class="lno">53</span></span>
<span id="line-S-7830-54"><span class="lno">54</span></span>
<span id="line-S-7830-55">55</span>
<span id="line-S-7830-56"><span class="lno">56</span></span>
<span id="line-S-7830-57"><span class="lno">57</span></span>
<span id="line-S-7830-58"><span class="lno">58</span></span>
<span id="line-S-7830-59"><span class="lno">59</span></span>
<span id="line-S-7830-60">60</span>
<span id="line-S-7830-61"><span class="lno">61</span></span>
<span id="line-S-7830-62"><span class="lno">62</span></span>
<span id="line-S-7830-63"><span class="lno">63</span></span>
<span id="line-S-7830-64"><span class="lno">64</span></span>
<span id="line-S-7830-65">65</span>
<span id="line-S-7830-66"><span class="lno">66</span></span>
<span id="line-S-7830-67"><span class="lno">67</span></span>
<span id="line-S-7830-68"><span class="lno">68</span></span>
<span id="line-S-7830-69"><span class="lno">69</span></span>
<span id="line-S-7830-70">70</span>
<span id="line-S-7830-71"><span class="lno">71</span></span>
<span id="line-S-7830-72"><span class="lno">72</span></span>
<span id="line-S-7830-73"><span class="lno">73</span></span>
<span id="line-S-7830-74"><span class="lno">74</span></span>
<span id="line-S-7830-75">75</span>
<span id="line-S-7830-76"><span class="lno">76</span></span>
<span id="line-S-7830-77"><span class="lno">77</span></span>
<span id="line-S-7830-78"><span class="lno">78</span></span>
<span id="line-S-7830-79"><span class="lno">79</span></span>
<span id="line-S-7830-80">80</span>
<span id="line-S-7830-81"><span class="lno">81</span></span>
<span id="line-S-7830-82"><span class="lno">82</span></span>
<span id="line-S-7830-83"><span class="lno">83</span></span>
<span id="line-S-7830-84"><span class="lno">84</span></span>
<span id="line-S-7830-85">85</span>
<span id="line-S-7830-86"><span class="lno">86</span></span>
<span id="line-S-7830-87"><span class="lno">87</span></span>
<span id="line-S-7830-88"><span class="lno">88</span></span>
<span id="line-S-7830-89"><span class="lno">89</span></span>
<span id="line-S-7830-90">90</span>
<span id="line-S-7830-91"><span class="lno">91</span></span>
<span id="line-S-7830-92"><span class="lno">92</span></span>
<span id="line-S-7830-93"><span class="lno">93</span></span>
<span id="line-S-7830-94"><span class="lno">94</span></span>
<span id="line-S-7830-95">95</span>
<span id="line-S-7830-96"><span class="lno">96</span></span>
<span id="line-S-7830-97"><span class="lno">97</span></span>
<span id="line-S-7830-98"><span class="lno">98</span></span>
<span id="line-S-7830-99"><span class="lno">99</span></span>
</pre></td><td valign="top"><pre><code class="language-xml">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                xmlns:db="http://docbook.org/ns/docbook"
                xmlns:f="http://docbook.org/ns/docbook/functions"
                xmlns:m="http://docbook.org/ns/docbook/modes"
                xmlns:map="http://www.w3.org/2005/xpath-functions/map"
                xmlns:t="http://docbook.org/ns/docbook/templates"
                xmlns:v="http://docbook.org/ns/docbook/variables"
                xmlns:xs="http://www.w3.org/2001/XMLSchema"
                xmlns="http://www.w3.org/1999/xhtml"
                default-mode="m:docbook"
                exclude-result-prefixes="db f m map t v xs"
                version="3.0"&gt;

&lt;xsl:template match="db:sect1|db:sect2|db:sect3|db:sect4|db:sect5
                     |db:section|db:simplesect"&gt;
  &lt;section&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
    &lt;xsl:apply-templates select="." mode="m:generate-titlepage"/&gt;
    &lt;xsl:apply-templates/&gt;
  &lt;/section&gt;
&lt;/xsl:template&gt;

&lt;xsl:variable name="v:bridgehead-map" as="map(*)"&gt;
  &lt;xsl:map&gt;
    &lt;xsl:map-entry key="'sect1'" select="'h2'"/&gt;
    &lt;xsl:map-entry key="'sect2'" select="'h3'"/&gt;
    &lt;xsl:map-entry key="'sect3'" select="'h4'"/&gt;
    &lt;xsl:map-entry key="'sect4'" select="'h5'"/&gt;
    &lt;xsl:map-entry key="'sect5'" select="'h5'"/&gt;
    &lt;xsl:map-entry key="'sect6'" select="'h5'"/&gt;
    &lt;xsl:map-entry key="'block'" select="'div'"/&gt;
  &lt;/xsl:map&gt;
&lt;/xsl:variable&gt;

&lt;xsl:template match="db:bridgehead"&gt;
  &lt;xsl:variable name="renderas" as="xs:string"&gt;
    &lt;xsl:choose&gt;
      &lt;xsl:when test="@renderas"&gt;
        &lt;xsl:sequence select="@renderas/string()"/&gt;
      &lt;/xsl:when&gt;
      &lt;xsl:when test="parent::db:section"&gt;
        &lt;xsl:sequence select="'sect' || (count(ancestor::db:section)+1)"/&gt;
      &lt;/xsl:when&gt;
      &lt;xsl:when test="parent::db:refsection"&gt;
        &lt;xsl:sequence select="'sect' || (count(ancestor::db:refsection)+1)"/&gt;
      &lt;/xsl:when&gt;
      &lt;xsl:when test="parent::db:sect5"&gt;
        &lt;xsl:sequence select="'sect5'"/&gt;
      &lt;/xsl:when&gt;
      &lt;xsl:when test="parent::db:sect1|parent::db:sect2|parent::db:sect3|parent::db:sect4"&gt;
        &lt;xsl:sequence select="'sect' ||
                               (xs:integer(substring(local-name(parent::*), 5, 1)) + 1)"/&gt;
      &lt;/xsl:when&gt;
      &lt;xsl:when test="parent::db:refsect1|parent::db:refsect2|parent::db:refsect3"&gt;
        &lt;xsl:sequence select="'sect' ||
                               (xs:integer(substring(local-name(parent::*), 8, 1)) + 1)"/&gt;
      &lt;/xsl:when&gt;
      &lt;xsl:when test="parent::db:article|parent::db:chapter|parent::db:appendix
                      |parent::db:preface|parent::db:partintro
                      |parent::db:part|parent::db:reference"&gt;
        &lt;xsl:sequence select="'sect1'"/&gt;
      &lt;/xsl:when&gt;
      &lt;xsl:otherwise&gt;
        &lt;xsl:sequence select="'block'"/&gt;
      &lt;/xsl:otherwise&gt;
    &lt;/xsl:choose&gt;
  &lt;/xsl:variable&gt;

  &lt;xsl:choose&gt;
    &lt;xsl:when test="empty(map:get($v:bridgehead-map, $renderas))"&gt;
      &lt;xsl:message select="'Unknown bridgehead renderas:', $renderas"/&gt;
      &lt;div&gt;
        &lt;xsl:apply-templates select="." mode="m:attributes"&gt;
          &lt;xsl:with-param name="extra-classes" select="('title')"/&gt;
        &lt;/xsl:apply-templates&gt;
        &lt;xsl:apply-templates/&gt;
      &lt;/div&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="map:get($v:bridgehead-map, $renderas) = 'div'"&gt;
      &lt;div&gt;
        &lt;xsl:apply-templates select="." mode="m:attributes"&gt;
          &lt;xsl:with-param name="extra-classes" select="('title')"/&gt;
        &lt;/xsl:apply-templates&gt;
        &lt;xsl:apply-templates/&gt;
      &lt;/div&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:element name="{map:get($v:bridgehead-map, $renderas)}"
                   namespace="http://www.w3.org/1999/xhtml"&gt;
        &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
        &lt;xsl:apply-templates/&gt;
      &lt;/xsl:element&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:template&gt;

&lt;/xsl:stylesheet&gt;
</code></pre></td></tr></table></div></div></div></div><div class="stylesheet" id="S-17405"><h3>templates.xsl</h3><p><span><span class="template all">15 templates</span> (<span class="template elsewhere">1 used only in one other module</span>)</span>, <span><span class="function all">3 functions</span></span>, <span><span class="variable all">3 variables</span></span></p><div class="instructions"><div class="title closed">Instructions</div><div class="body"><div id="S-17405-docbook.org.ns.docbook.variables.templates" class="instruction variable"><div class="title"><span class="link"></span>Variable <code>$v:templates</code> as <code>document-node()</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-17405-docbook.org.ns.docbook.variables.private.templates">$vp:templates</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-17405">modules/templates.xsl</a></div></div></div><div id="S-17405-docbook.org.ns.docbook.variables.private.templates" class="instruction variable"><div class="title"><span class="link"></span>Variable <code>$vp:templates</code> as <code>document-node()</code></div><div class="props"><div class="uses">Uses: <a href="#S-17405-docbook.org.ns.docbook.variables.templates">$v:templates</a></div><div class="calls">Calls: <a href="#S-17405-docbook.org.ns.docbook.functions.private.construct-templates,2">fp:construct-templates()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-17405-docbook.org.ns.docbook.functions.template,2">f:template()</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-17405">modules/templates.xsl</a></div></div></div><div id="S-17405-docbook.org.ns.docbook.functions.private.construct-templates,2" class="instruction function"><div class="title"><span class="link"></span>Function fp:construct-templates($templates as element()*, $list as element()*) <span class="recursive" title="Recursive function">♻</span></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-17405-docbook.org.ns.docbook.functions.private.construct-templates,2">fp:construct-templates()</a>, <a href="#S-17405-docbook.org.ns.docbook.variables.private.templates">$vp:templates</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-17405">modules/templates.xsl</a></div></div></div><div id="S-17405-t-1" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ element()</div><div class="props"><div class="mode">Mode: <code>mp:expand-template</code></div><div class="matches">Matches: <code>element()</code></div></div></div><div id="S-17405-t-2" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ tmp:insert</div><div class="props"><div class="uses">Uses: <a href="#S-29386-docbook.org.ns.docbook.errors.INVALID-TEMPLATE">$dbe:INVALID-TEMPLATE</a></div><div class="mode">Mode: <code>mp:expand-template</code></div><div class="matches">Matches: <code>tmp:insert</code></div></div></div><div id="S-17405-t-3" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ attribute()|comment()|processi…</div><div class="props"><div class="mode">Mode: <code>mp:expand-template</code></div><div class="matches">Matches: <code>attribute()</code>, <code>comment()</code>, <code>processing-instruction()</code>, <code>text()</code></div></div></div><div id="S-17405-docbook.org.ns.docbook.functions.template,2" class="instruction function"><div class="title"><span class="link"></span>Function f:template($context as element(), $default as element()) as element()</div><div class="props"><div class="uses">Uses: <a href="#S-17405-docbook.org.ns.docbook.variables.private.templates">$vp:templates</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-17405-t-4">template</a>, <a href="#S-17405-docbook.org.ns.docbook.templates.biblioentry">t:biblioentry</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-17405">modules/templates.xsl</a></div></div></div><div id="S-17405-docbook.org.ns.docbook.functions.private.pick-template,2" class="instruction function"><div class="title"><span class="link"></span>Function fp:pick-template($context as element(), $templates as element()+) as element() <span class="recursive" title="Recursive function">♻</span></div><div class="props"><div class="calls">Calls: <a href="#S-17405-docbook.org.ns.docbook.functions.template,2">f:template()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-17405-docbook.org.ns.docbook.functions.private.pick-template,2">fp:pick-template()</a>, <a href="#S-17405-docbook.org.ns.docbook.functions.template,2">f:template()</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-17405">modules/templates.xsl</a></div></div></div><div id="S-17405-docbook.org.ns.docbook.variables.titlepage-default" class="instruction variable"><div class="title"><span class="link"></span>Variable <code>$v:titlepage-default</code> as <code>element()</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-17405-t-4">template</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-17405">modules/templates.xsl</a></div></div></div><div id="S-17405-t-4" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ *</div><div class="props"><div class="uses">Uses: <a href="#S-17405-docbook.org.ns.docbook.variables.titlepage-default">$v:titlepage-default</a></div><div class="calls">Calls: <a href="#S-29523-docbook.org.ns.docbook.functions.private.pmuj,2">fp:pmuj()</a>, <a href="#S-29523-docbook.org.ns.docbook.functions.private.pmuj-enabled,1">fp:pmuj-enabled()</a>, <a href="#S-17405-docbook.org.ns.docbook.functions.template,2">f:template()</a></div><div class="mode">Mode: <code>m:generate-titlepage</code></div><div class="matches">Matches: <code>*</code></div></div></div><div id="S-17405-t-5" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ tmp:apply-templates</div><div class="props"><div class="mode">Mode: <code>mp:construct-titlepage</code></div><div class="matches">Matches: <code>tmp:apply-templates</code></div></div></div><div id="S-17405-t-6" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ tmp:content</div><div class="props"><div class="mode">Mode: <code>mp:construct-titlepage</code></div><div class="matches">Matches: <code>tmp:content</code></div></div></div><div id="S-17405-t-7" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ element()</div><div class="props"><div class="mode">Mode: <code>mp:construct-titlepage</code></div><div class="matches">Matches: <code>element()</code></div></div></div><div id="S-17405-t-8" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ text()</div><div class="props"><div class="mode">Mode: <code>mp:construct-titlepage</code></div><div class="matches">Matches: <code>text()</code></div></div></div><div id="S-17405-t-9" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ attribute()|comment()|processi…</div><div class="props"><div class="mode">Mode: <code>mp:construct-titlepage</code></div><div class="matches">Matches: <code>attribute()</code>, <code>comment()</code>, <code>processing-instruction()</code></div></div></div><div id="S-17405-docbook.org.ns.docbook.templates.biblioentry" class="instruction template elsewhere"><div class="title"><span class="link"></span>Template t:biblioentry  match ≅ </div><div class="props"><div class="calls">Calls: <a href="#S-17405-docbook.org.ns.docbook.functions.template,2">f:template()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-45868-t-2">template</a></div><div class="used-in"><span class="marker" title="Only used in one other module">☝</span>Used in: <a href="#S-45868">modules/bibliography.xsl</a></div><div class="mode">Mode: <code>m:docbook</code></div></div></div><div id="S-17405-t-11" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ tmp:apply-templates</div><div class="props"><div class="mode">Mode: <code>mp:construct-biblioentry</code></div><div class="matches">Matches: <code>tmp:apply-templates</code></div></div></div><div id="S-17405-t-12" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ tmp:content</div><div class="props"><div class="mode">Mode: <code>mp:construct-biblioentry</code></div><div class="matches">Matches: <code>tmp:content</code></div></div></div><div id="S-17405-t-13" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ element()</div><div class="props"><div class="mode">Mode: <code>mp:construct-biblioentry</code></div><div class="matches">Matches: <code>element()</code></div></div></div><div id="S-17405-t-14" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ text()</div><div class="props"><div class="mode">Mode: <code>mp:construct-biblioentry</code></div><div class="matches">Matches: <code>text()</code></div></div></div><div id="S-17405-t-15" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ attribute()|comment()|processi…</div><div class="props"><div class="mode">Mode: <code>mp:construct-biblioentry</code></div><div class="matches">Matches: <code>attribute()</code>, <code>comment()</code>, <code>processing-instruction()</code></div></div></div></div></div><div class="source-code"><div class="title closed">Source code</div><div class="body"><div><table><tr><td valign="top" align="right"><pre class="fake-prism"><span id="line-S-17405-1">1</span>
<span id="line-S-17405-2"><span class="lno">2</span></span>
<span id="line-S-17405-3"><span class="lno">3</span></span>
<span id="line-S-17405-4"><span class="lno">4</span></span>
<span id="line-S-17405-5">5</span>
<span id="line-S-17405-6"><span class="lno">6</span></span>
<span id="line-S-17405-7"><span class="lno">7</span></span>
<span id="line-S-17405-8"><span class="lno">8</span></span>
<span id="line-S-17405-9"><span class="lno">9</span></span>
<span id="line-S-17405-10">10</span>
<span id="line-S-17405-11"><span class="lno">11</span></span>
<span id="line-S-17405-12"><span class="lno">12</span></span>
<span id="line-S-17405-13"><span class="lno">13</span></span>
<span id="line-S-17405-14"><span class="lno">14</span></span>
<span id="line-S-17405-15">15</span>
<span id="line-S-17405-16"><span class="lno">16</span></span>
<span id="line-S-17405-17"><span class="lno">17</span></span>
<span id="line-S-17405-18"><span class="lno">18</span></span>
<span id="line-S-17405-19"><span class="lno">19</span></span>
<span id="line-S-17405-20">20</span>
<span id="line-S-17405-21"><span class="lno">21</span></span>
<span id="line-S-17405-22"><span class="lno">22</span></span>
<span id="line-S-17405-23"><span class="lno">23</span></span>
<span id="line-S-17405-24"><span class="lno">24</span></span>
<span id="line-S-17405-25">25</span>
<span id="line-S-17405-26"><span class="lno">26</span></span>
<span id="line-S-17405-27"><span class="lno">27</span></span>
<span id="line-S-17405-28"><span class="lno">28</span></span>
<span id="line-S-17405-29"><span class="lno">29</span></span>
<span id="line-S-17405-30">30</span>
<span id="line-S-17405-31"><span class="lno">31</span></span>
<span id="line-S-17405-32"><span class="lno">32</span></span>
<span id="line-S-17405-33"><span class="lno">33</span></span>
<span id="line-S-17405-34"><span class="lno">34</span></span>
<span id="line-S-17405-35">35</span>
<span id="line-S-17405-36"><span class="lno">36</span></span>
<span id="line-S-17405-37"><span class="lno">37</span></span>
<span id="line-S-17405-38"><span class="lno">38</span></span>
<span id="line-S-17405-39"><span class="lno">39</span></span>
<span id="line-S-17405-40">40</span>
<span id="line-S-17405-41"><span class="lno">41</span></span>
<span id="line-S-17405-42"><span class="lno">42</span></span>
<span id="line-S-17405-43"><span class="lno">43</span></span>
<span id="line-S-17405-44"><span class="lno">44</span></span>
<span id="line-S-17405-45">45</span>
<span id="line-S-17405-46"><span class="lno">46</span></span>
<span id="line-S-17405-47"><span class="lno">47</span></span>
<span id="line-S-17405-48"><span class="lno">48</span></span>
<span id="line-S-17405-49"><span class="lno">49</span></span>
<span id="line-S-17405-50">50</span>
<span id="line-S-17405-51"><span class="lno">51</span></span>
<span id="line-S-17405-52"><span class="lno">52</span></span>
<span id="line-S-17405-53"><span class="lno">53</span></span>
<span id="line-S-17405-54"><span class="lno">54</span></span>
<span id="line-S-17405-55">55</span>
<span id="line-S-17405-56"><span class="lno">56</span></span>
<span id="line-S-17405-57"><span class="lno">57</span></span>
<span id="line-S-17405-58"><span class="lno">58</span></span>
<span id="line-S-17405-59"><span class="lno">59</span></span>
<span id="line-S-17405-60">60</span>
<span id="line-S-17405-61"><span class="lno">61</span></span>
<span id="line-S-17405-62"><span class="lno">62</span></span>
<span id="line-S-17405-63"><span class="lno">63</span></span>
<span id="line-S-17405-64"><span class="lno">64</span></span>
<span id="line-S-17405-65">65</span>
<span id="line-S-17405-66"><span class="lno">66</span></span>
<span id="line-S-17405-67"><span class="lno">67</span></span>
<span id="line-S-17405-68"><span class="lno">68</span></span>
<span id="line-S-17405-69"><span class="lno">69</span></span>
<span id="line-S-17405-70">70</span>
<span id="line-S-17405-71"><span class="lno">71</span></span>
<span id="line-S-17405-72"><span class="lno">72</span></span>
<span id="line-S-17405-73"><span class="lno">73</span></span>
<span id="line-S-17405-74"><span class="lno">74</span></span>
<span id="line-S-17405-75">75</span>
<span id="line-S-17405-76"><span class="lno">76</span></span>
<span id="line-S-17405-77"><span class="lno">77</span></span>
<span id="line-S-17405-78"><span class="lno">78</span></span>
<span id="line-S-17405-79"><span class="lno">79</span></span>
<span id="line-S-17405-80">80</span>
<span id="line-S-17405-81"><span class="lno">81</span></span>
<span id="line-S-17405-82"><span class="lno">82</span></span>
<span id="line-S-17405-83"><span class="lno">83</span></span>
<span id="line-S-17405-84"><span class="lno">84</span></span>
<span id="line-S-17405-85">85</span>
<span id="line-S-17405-86"><span class="lno">86</span></span>
<span id="line-S-17405-87"><span class="lno">87</span></span>
<span id="line-S-17405-88"><span class="lno">88</span></span>
<span id="line-S-17405-89"><span class="lno">89</span></span>
<span id="line-S-17405-90">90</span>
<span id="line-S-17405-91"><span class="lno">91</span></span>
<span id="line-S-17405-92"><span class="lno">92</span></span>
<span id="line-S-17405-93"><span class="lno">93</span></span>
<span id="line-S-17405-94"><span class="lno">94</span></span>
<span id="line-S-17405-95">95</span>
<span id="line-S-17405-96"><span class="lno">96</span></span>
<span id="line-S-17405-97"><span class="lno">97</span></span>
<span id="line-S-17405-98"><span class="lno">98</span></span>
<span id="line-S-17405-99"><span class="lno">99</span></span>
<span id="line-S-17405-100">100</span>
<span id="line-S-17405-101"><span class="lno">101</span></span>
<span id="line-S-17405-102"><span class="lno">102</span></span>
<span id="line-S-17405-103"><span class="lno">103</span></span>
<span id="line-S-17405-104"><span class="lno">104</span></span>
<span id="line-S-17405-105">105</span>
<span id="line-S-17405-106"><span class="lno">106</span></span>
<span id="line-S-17405-107"><span class="lno">107</span></span>
<span id="line-S-17405-108"><span class="lno">108</span></span>
<span id="line-S-17405-109"><span class="lno">109</span></span>
<span id="line-S-17405-110">110</span>
<span id="line-S-17405-111"><span class="lno">111</span></span>
<span id="line-S-17405-112"><span class="lno">112</span></span>
<span id="line-S-17405-113"><span class="lno">113</span></span>
<span id="line-S-17405-114"><span class="lno">114</span></span>
<span id="line-S-17405-115">115</span>
<span id="line-S-17405-116"><span class="lno">116</span></span>
<span id="line-S-17405-117"><span class="lno">117</span></span>
<span id="line-S-17405-118"><span class="lno">118</span></span>
<span id="line-S-17405-119"><span class="lno">119</span></span>
<span id="line-S-17405-120">120</span>
<span id="line-S-17405-121"><span class="lno">121</span></span>
<span id="line-S-17405-122"><span class="lno">122</span></span>
<span id="line-S-17405-123"><span class="lno">123</span></span>
<span id="line-S-17405-124"><span class="lno">124</span></span>
<span id="line-S-17405-125">125</span>
<span id="line-S-17405-126"><span class="lno">126</span></span>
<span id="line-S-17405-127"><span class="lno">127</span></span>
<span id="line-S-17405-128"><span class="lno">128</span></span>
<span id="line-S-17405-129"><span class="lno">129</span></span>
<span id="line-S-17405-130">130</span>
<span id="line-S-17405-131"><span class="lno">131</span></span>
<span id="line-S-17405-132"><span class="lno">132</span></span>
<span id="line-S-17405-133"><span class="lno">133</span></span>
<span id="line-S-17405-134"><span class="lno">134</span></span>
<span id="line-S-17405-135">135</span>
<span id="line-S-17405-136"><span class="lno">136</span></span>
<span id="line-S-17405-137"><span class="lno">137</span></span>
<span id="line-S-17405-138"><span class="lno">138</span></span>
<span id="line-S-17405-139"><span class="lno">139</span></span>
<span id="line-S-17405-140">140</span>
<span id="line-S-17405-141"><span class="lno">141</span></span>
<span id="line-S-17405-142"><span class="lno">142</span></span>
<span id="line-S-17405-143"><span class="lno">143</span></span>
<span id="line-S-17405-144"><span class="lno">144</span></span>
<span id="line-S-17405-145">145</span>
<span id="line-S-17405-146"><span class="lno">146</span></span>
<span id="line-S-17405-147"><span class="lno">147</span></span>
<span id="line-S-17405-148"><span class="lno">148</span></span>
<span id="line-S-17405-149"><span class="lno">149</span></span>
<span id="line-S-17405-150">150</span>
<span id="line-S-17405-151"><span class="lno">151</span></span>
<span id="line-S-17405-152"><span class="lno">152</span></span>
<span id="line-S-17405-153"><span class="lno">153</span></span>
<span id="line-S-17405-154"><span class="lno">154</span></span>
<span id="line-S-17405-155">155</span>
<span id="line-S-17405-156"><span class="lno">156</span></span>
<span id="line-S-17405-157"><span class="lno">157</span></span>
<span id="line-S-17405-158"><span class="lno">158</span></span>
<span id="line-S-17405-159"><span class="lno">159</span></span>
<span id="line-S-17405-160">160</span>
<span id="line-S-17405-161"><span class="lno">161</span></span>
<span id="line-S-17405-162"><span class="lno">162</span></span>
<span id="line-S-17405-163"><span class="lno">163</span></span>
<span id="line-S-17405-164"><span class="lno">164</span></span>
<span id="line-S-17405-165">165</span>
<span id="line-S-17405-166"><span class="lno">166</span></span>
<span id="line-S-17405-167"><span class="lno">167</span></span>
<span id="line-S-17405-168"><span class="lno">168</span></span>
<span id="line-S-17405-169"><span class="lno">169</span></span>
<span id="line-S-17405-170">170</span>
<span id="line-S-17405-171"><span class="lno">171</span></span>
<span id="line-S-17405-172"><span class="lno">172</span></span>
<span id="line-S-17405-173"><span class="lno">173</span></span>
<span id="line-S-17405-174"><span class="lno">174</span></span>
<span id="line-S-17405-175">175</span>
<span id="line-S-17405-176"><span class="lno">176</span></span>
<span id="line-S-17405-177"><span class="lno">177</span></span>
<span id="line-S-17405-178"><span class="lno">178</span></span>
<span id="line-S-17405-179"><span class="lno">179</span></span>
<span id="line-S-17405-180">180</span>
<span id="line-S-17405-181"><span class="lno">181</span></span>
<span id="line-S-17405-182"><span class="lno">182</span></span>
<span id="line-S-17405-183"><span class="lno">183</span></span>
<span id="line-S-17405-184"><span class="lno">184</span></span>
<span id="line-S-17405-185">185</span>
<span id="line-S-17405-186"><span class="lno">186</span></span>
<span id="line-S-17405-187"><span class="lno">187</span></span>
<span id="line-S-17405-188"><span class="lno">188</span></span>
<span id="line-S-17405-189"><span class="lno">189</span></span>
<span id="line-S-17405-190">190</span>
<span id="line-S-17405-191"><span class="lno">191</span></span>
<span id="line-S-17405-192"><span class="lno">192</span></span>
<span id="line-S-17405-193"><span class="lno">193</span></span>
<span id="line-S-17405-194"><span class="lno">194</span></span>
<span id="line-S-17405-195">195</span>
<span id="line-S-17405-196"><span class="lno">196</span></span>
<span id="line-S-17405-197"><span class="lno">197</span></span>
<span id="line-S-17405-198"><span class="lno">198</span></span>
<span id="line-S-17405-199"><span class="lno">199</span></span>
<span id="line-S-17405-200">200</span>
<span id="line-S-17405-201"><span class="lno">201</span></span>
<span id="line-S-17405-202"><span class="lno">202</span></span>
<span id="line-S-17405-203"><span class="lno">203</span></span>
<span id="line-S-17405-204"><span class="lno">204</span></span>
<span id="line-S-17405-205">205</span>
<span id="line-S-17405-206"><span class="lno">206</span></span>
<span id="line-S-17405-207"><span class="lno">207</span></span>
<span id="line-S-17405-208"><span class="lno">208</span></span>
<span id="line-S-17405-209"><span class="lno">209</span></span>
<span id="line-S-17405-210">210</span>
<span id="line-S-17405-211"><span class="lno">211</span></span>
<span id="line-S-17405-212"><span class="lno">212</span></span>
<span id="line-S-17405-213"><span class="lno">213</span></span>
<span id="line-S-17405-214"><span class="lno">214</span></span>
<span id="line-S-17405-215">215</span>
<span id="line-S-17405-216"><span class="lno">216</span></span>
<span id="line-S-17405-217"><span class="lno">217</span></span>
<span id="line-S-17405-218"><span class="lno">218</span></span>
<span id="line-S-17405-219"><span class="lno">219</span></span>
<span id="line-S-17405-220">220</span>
<span id="line-S-17405-221"><span class="lno">221</span></span>
<span id="line-S-17405-222"><span class="lno">222</span></span>
<span id="line-S-17405-223"><span class="lno">223</span></span>
<span id="line-S-17405-224"><span class="lno">224</span></span>
<span id="line-S-17405-225">225</span>
<span id="line-S-17405-226"><span class="lno">226</span></span>
<span id="line-S-17405-227"><span class="lno">227</span></span>
<span id="line-S-17405-228"><span class="lno">228</span></span>
<span id="line-S-17405-229"><span class="lno">229</span></span>
<span id="line-S-17405-230">230</span>
<span id="line-S-17405-231"><span class="lno">231</span></span>
<span id="line-S-17405-232"><span class="lno">232</span></span>
<span id="line-S-17405-233"><span class="lno">233</span></span>
<span id="line-S-17405-234"><span class="lno">234</span></span>
<span id="line-S-17405-235">235</span>
<span id="line-S-17405-236"><span class="lno">236</span></span>
<span id="line-S-17405-237"><span class="lno">237</span></span>
<span id="line-S-17405-238"><span class="lno">238</span></span>
<span id="line-S-17405-239"><span class="lno">239</span></span>
<span id="line-S-17405-240">240</span>
<span id="line-S-17405-241"><span class="lno">241</span></span>
<span id="line-S-17405-242"><span class="lno">242</span></span>
<span id="line-S-17405-243"><span class="lno">243</span></span>
<span id="line-S-17405-244"><span class="lno">244</span></span>
<span id="line-S-17405-245">245</span>
<span id="line-S-17405-246"><span class="lno">246</span></span>
<span id="line-S-17405-247"><span class="lno">247</span></span>
<span id="line-S-17405-248"><span class="lno">248</span></span>
<span id="line-S-17405-249"><span class="lno">249</span></span>
<span id="line-S-17405-250">250</span>
<span id="line-S-17405-251"><span class="lno">251</span></span>
<span id="line-S-17405-252"><span class="lno">252</span></span>
<span id="line-S-17405-253"><span class="lno">253</span></span>
<span id="line-S-17405-254"><span class="lno">254</span></span>
<span id="line-S-17405-255">255</span>
<span id="line-S-17405-256"><span class="lno">256</span></span>
<span id="line-S-17405-257"><span class="lno">257</span></span>
<span id="line-S-17405-258"><span class="lno">258</span></span>
<span id="line-S-17405-259"><span class="lno">259</span></span>
<span id="line-S-17405-260">260</span>
<span id="line-S-17405-261"><span class="lno">261</span></span>
<span id="line-S-17405-262"><span class="lno">262</span></span>
<span id="line-S-17405-263"><span class="lno">263</span></span>
<span id="line-S-17405-264"><span class="lno">264</span></span>
<span id="line-S-17405-265">265</span>
<span id="line-S-17405-266"><span class="lno">266</span></span>
<span id="line-S-17405-267"><span class="lno">267</span></span>
<span id="line-S-17405-268"><span class="lno">268</span></span>
<span id="line-S-17405-269"><span class="lno">269</span></span>
<span id="line-S-17405-270">270</span>
<span id="line-S-17405-271"><span class="lno">271</span></span>
<span id="line-S-17405-272"><span class="lno">272</span></span>
<span id="line-S-17405-273"><span class="lno">273</span></span>
<span id="line-S-17405-274"><span class="lno">274</span></span>
<span id="line-S-17405-275">275</span>
<span id="line-S-17405-276"><span class="lno">276</span></span>
<span id="line-S-17405-277"><span class="lno">277</span></span>
<span id="line-S-17405-278"><span class="lno">278</span></span>
<span id="line-S-17405-279"><span class="lno">279</span></span>
<span id="line-S-17405-280">280</span>
<span id="line-S-17405-281"><span class="lno">281</span></span>
<span id="line-S-17405-282"><span class="lno">282</span></span>
<span id="line-S-17405-283"><span class="lno">283</span></span>
<span id="line-S-17405-284"><span class="lno">284</span></span>
<span id="line-S-17405-285">285</span>
<span id="line-S-17405-286"><span class="lno">286</span></span>
<span id="line-S-17405-287"><span class="lno">287</span></span>
<span id="line-S-17405-288"><span class="lno">288</span></span>
<span id="line-S-17405-289"><span class="lno">289</span></span>
<span id="line-S-17405-290">290</span>
<span id="line-S-17405-291"><span class="lno">291</span></span>
<span id="line-S-17405-292"><span class="lno">292</span></span>
<span id="line-S-17405-293"><span class="lno">293</span></span>
<span id="line-S-17405-294"><span class="lno">294</span></span>
<span id="line-S-17405-295">295</span>
<span id="line-S-17405-296"><span class="lno">296</span></span>
<span id="line-S-17405-297"><span class="lno">297</span></span>
<span id="line-S-17405-298"><span class="lno">298</span></span>
<span id="line-S-17405-299"><span class="lno">299</span></span>
<span id="line-S-17405-300">300</span>
<span id="line-S-17405-301"><span class="lno">301</span></span>
<span id="line-S-17405-302"><span class="lno">302</span></span>
<span id="line-S-17405-303"><span class="lno">303</span></span>
<span id="line-S-17405-304"><span class="lno">304</span></span>
<span id="line-S-17405-305">305</span>
<span id="line-S-17405-306"><span class="lno">306</span></span>
<span id="line-S-17405-307"><span class="lno">307</span></span>
<span id="line-S-17405-308"><span class="lno">308</span></span>
<span id="line-S-17405-309"><span class="lno">309</span></span>
<span id="line-S-17405-310">310</span>
<span id="line-S-17405-311"><span class="lno">311</span></span>
<span id="line-S-17405-312"><span class="lno">312</span></span>
<span id="line-S-17405-313"><span class="lno">313</span></span>
<span id="line-S-17405-314"><span class="lno">314</span></span>
<span id="line-S-17405-315">315</span>
<span id="line-S-17405-316"><span class="lno">316</span></span>
<span id="line-S-17405-317"><span class="lno">317</span></span>
<span id="line-S-17405-318"><span class="lno">318</span></span>
<span id="line-S-17405-319"><span class="lno">319</span></span>
<span id="line-S-17405-320">320</span>
<span id="line-S-17405-321"><span class="lno">321</span></span>
<span id="line-S-17405-322"><span class="lno">322</span></span>
<span id="line-S-17405-323"><span class="lno">323</span></span>
<span id="line-S-17405-324"><span class="lno">324</span></span>
<span id="line-S-17405-325">325</span>
<span id="line-S-17405-326"><span class="lno">326</span></span>
<span id="line-S-17405-327"><span class="lno">327</span></span>
<span id="line-S-17405-328"><span class="lno">328</span></span>
<span id="line-S-17405-329"><span class="lno">329</span></span>
<span id="line-S-17405-330">330</span>
<span id="line-S-17405-331"><span class="lno">331</span></span>
<span id="line-S-17405-332"><span class="lno">332</span></span>
<span id="line-S-17405-333"><span class="lno">333</span></span>
<span id="line-S-17405-334"><span class="lno">334</span></span>
<span id="line-S-17405-335">335</span>
<span id="line-S-17405-336"><span class="lno">336</span></span>
<span id="line-S-17405-337"><span class="lno">337</span></span>
<span id="line-S-17405-338"><span class="lno">338</span></span>
<span id="line-S-17405-339"><span class="lno">339</span></span>
<span id="line-S-17405-340">340</span>
<span id="line-S-17405-341"><span class="lno">341</span></span>
<span id="line-S-17405-342"><span class="lno">342</span></span>
<span id="line-S-17405-343"><span class="lno">343</span></span>
<span id="line-S-17405-344"><span class="lno">344</span></span>
<span id="line-S-17405-345">345</span>
<span id="line-S-17405-346"><span class="lno">346</span></span>
<span id="line-S-17405-347"><span class="lno">347</span></span>
<span id="line-S-17405-348"><span class="lno">348</span></span>
<span id="line-S-17405-349"><span class="lno">349</span></span>
<span id="line-S-17405-350">350</span>
<span id="line-S-17405-351"><span class="lno">351</span></span>
<span id="line-S-17405-352"><span class="lno">352</span></span>
<span id="line-S-17405-353"><span class="lno">353</span></span>
<span id="line-S-17405-354"><span class="lno">354</span></span>
<span id="line-S-17405-355">355</span>
<span id="line-S-17405-356"><span class="lno">356</span></span>
<span id="line-S-17405-357"><span class="lno">357</span></span>
<span id="line-S-17405-358"><span class="lno">358</span></span>
<span id="line-S-17405-359"><span class="lno">359</span></span>
<span id="line-S-17405-360">360</span>
<span id="line-S-17405-361"><span class="lno">361</span></span>
<span id="line-S-17405-362"><span class="lno">362</span></span>
<span id="line-S-17405-363"><span class="lno">363</span></span>
<span id="line-S-17405-364"><span class="lno">364</span></span>
<span id="line-S-17405-365">365</span>
<span id="line-S-17405-366"><span class="lno">366</span></span>
<span id="line-S-17405-367"><span class="lno">367</span></span>
<span id="line-S-17405-368"><span class="lno">368</span></span>
<span id="line-S-17405-369"><span class="lno">369</span></span>
<span id="line-S-17405-370">370</span>
<span id="line-S-17405-371"><span class="lno">371</span></span>
<span id="line-S-17405-372"><span class="lno">372</span></span>
<span id="line-S-17405-373"><span class="lno">373</span></span>
<span id="line-S-17405-374"><span class="lno">374</span></span>
<span id="line-S-17405-375">375</span>
<span id="line-S-17405-376"><span class="lno">376</span></span>
<span id="line-S-17405-377"><span class="lno">377</span></span>
<span id="line-S-17405-378"><span class="lno">378</span></span>
<span id="line-S-17405-379"><span class="lno">379</span></span>
<span id="line-S-17405-380">380</span>
<span id="line-S-17405-381"><span class="lno">381</span></span>
<span id="line-S-17405-382"><span class="lno">382</span></span>
<span id="line-S-17405-383"><span class="lno">383</span></span>
<span id="line-S-17405-384"><span class="lno">384</span></span>
<span id="line-S-17405-385">385</span>
<span id="line-S-17405-386"><span class="lno">386</span></span>
<span id="line-S-17405-387"><span class="lno">387</span></span>
<span id="line-S-17405-388"><span class="lno">388</span></span>
<span id="line-S-17405-389"><span class="lno">389</span></span>
<span id="line-S-17405-390">390</span>
<span id="line-S-17405-391"><span class="lno">391</span></span>
<span id="line-S-17405-392"><span class="lno">392</span></span>
<span id="line-S-17405-393"><span class="lno">393</span></span>
<span id="line-S-17405-394"><span class="lno">394</span></span>
<span id="line-S-17405-395">395</span>
</pre></td><td valign="top"><pre><code class="language-xml">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                xmlns:db="http://docbook.org/ns/docbook"
                xmlns:dbe="http://docbook.org/ns/docbook/errors"
                xmlns:f="http://docbook.org/ns/docbook/functions"
                xmlns:fp="http://docbook.org/ns/docbook/functions/private"
                xmlns:h="http://www.w3.org/1999/xhtml"
                xmlns:m="http://docbook.org/ns/docbook/modes"
                xmlns:mp="http://docbook.org/ns/docbook/modes/private"
                xmlns:t="http://docbook.org/ns/docbook/templates"
                xmlns:tmp="http://docbook.org/ns/docbook/templates"
                xmlns:v="http://docbook.org/ns/docbook/variables"
                xmlns:vp="http://docbook.org/ns/docbook/variables/private"
                xmlns:xs="http://www.w3.org/2001/XMLSchema"
                xmlns="http://www.w3.org/1999/xhtml"
                default-mode="m:docbook"
                exclude-result-prefixes="db dbe f fp h m mp t tmp v vp xs"
                version="3.0"&gt;

&lt;!-- It's a real shame that you can't have mode variables ... --&gt;

&lt;xsl:strip-space elements="tmp:*"/&gt;

&lt;!-- The default value is an empty document, it's for customizations to override --&gt;
&lt;xsl:variable name="v:templates" as="document-node()"&gt;
  &lt;xsl:document/&gt;
&lt;/xsl:variable&gt;

&lt;xsl:variable name="vp:templates" as="document-node()"&gt;
  &lt;!-- Yes, this is basically fold-left done the hard way,
       but it avoids an EE feature in Saxon 9. --&gt;
  &lt;xsl:document&gt;
    &lt;xsl:sequence
        select="fp:construct-templates(($v:templates/*, doc('templates.xml')/*/*),
                                        ())"/&gt;
  &lt;/xsl:document&gt;
&lt;/xsl:variable&gt;

&lt;xsl:function name="fp:construct-templates"&gt;
  &lt;xsl:param name="templates" as="element()*"/&gt;
  &lt;xsl:param name="list" as="element()*"/&gt;

  &lt;xsl:variable name="car" select="subsequence($templates, 1, 1)"/&gt;
  &lt;xsl:variable name="cdr" select="subsequence($templates, 2)"/&gt;

  &lt;xsl:choose&gt;
    &lt;xsl:when test="empty($templates)"&gt;
      &lt;xsl:sequence select="$list"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:variable name="template" as="element()"&gt;
        &lt;xsl:apply-templates select="$car" mode="mp:expand-template"&gt;
          &lt;xsl:with-param name="list" select="$list"/&gt;
        &lt;/xsl:apply-templates&gt;
      &lt;/xsl:variable&gt;
      &lt;xsl:sequence select="fp:construct-templates($cdr, ($list, $template))"/&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:function&gt;

&lt;xsl:template match="element()" mode="mp:expand-template"&gt;
  &lt;xsl:param name="list" as="element()*" required="yes"/&gt;
  &lt;xsl:copy&gt;
    &lt;xsl:apply-templates select="@*, node()"
                         mode="mp:expand-template"&gt;
      &lt;xsl:with-param name="list" select="$list"/&gt;
    &lt;/xsl:apply-templates&gt;
  &lt;/xsl:copy&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="tmp:insert" mode="mp:expand-template"&gt;
  &lt;xsl:param name="list" as="element()*" required="yes"/&gt;

  &lt;xsl:variable name="name"
                select="QName('http://docbook.org/ns/docbook/templates', @ref)"/&gt;
  &lt;xsl:variable name="template"
                select="($list[node-name(.)=$name])[1]"/&gt;

  &lt;xsl:sequence select="if (empty($template))
                        then error($dbe:INVALID-TEMPLATE,
                                   'No such template: ' || @ref)
                        else $template/*"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="attribute()|text()|comment()|processing-instruction()"
              mode="mp:expand-template"&gt;
  &lt;xsl:copy/&gt;
&lt;/xsl:template&gt;

&lt;!-- ============================================================ --&gt;

&lt;xsl:function name="f:template" as="element()"&gt;
  &lt;xsl:param name="context" as="element()"/&gt;
  &lt;xsl:param name="default" as="element()"/&gt;

  &lt;xsl:variable name="xpath" select="'/db:' || local-name($context)"/&gt;
  &lt;xsl:variable name="template" as="element()*"&gt;
    &lt;xsl:evaluate context-item="$vp:templates" xpath="$xpath"/&gt;
  &lt;/xsl:variable&gt;

  &lt;xsl:variable name="template" as="element()*"&gt;
    &lt;xsl:sequence select="if (empty($template))
                          then $default
                          else $template"/&gt;
  &lt;/xsl:variable&gt;

  &lt;xsl:sequence select="if (count($template) gt 1)
                        then fp:pick-template($context, $template)
                        else $template"/&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="fp:pick-template" as="element()"&gt;
  &lt;xsl:param name="context" as="element()"/&gt;
  &lt;xsl:param name="templates" as="element()+"/&gt;

  &lt;xsl:if test="not($templates[1]/@context) and (count($templates) gt 1)"
          use-when="'templates' = $v:debug"&gt;
    &lt;xsl:message select="'A template without context should be last.'"/&gt;
  &lt;/xsl:if&gt;

  &lt;xsl:choose&gt;
    &lt;xsl:when test="count($templates) eq 1 or not($templates[1]/@context)"&gt;
      &lt;xsl:sequence select="$templates[1]"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:variable name="items" as="item()*"&gt;
        &lt;xsl:evaluate context-item="$context"
                      xpath="$templates[1]/@context"/&gt;
      &lt;/xsl:variable&gt;

      &lt;xsl:choose&gt;
        &lt;xsl:when test="count($items) = 1 and $items instance of xs:boolean"&gt;
          &lt;xsl:sequence
              select="if ($items)
                      then $templates[1]
                      else fp:pick-template($context, subsequence($templates, 2))"/&gt;
        &lt;/xsl:when&gt;
        &lt;xsl:otherwise&gt;
          &lt;xsl:sequence select="if (empty($items))
                                then fp:pick-template($context, subsequence($templates, 2))
                                else $templates[1]"/&gt;
        &lt;/xsl:otherwise&gt;
      &lt;/xsl:choose&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:function&gt;

&lt;!-- ============================================================ --&gt;

&lt;xsl:variable name="v:titlepage-default" as="element()"&gt;
  &lt;tmp:titlepage-default&gt;
    &lt;header&gt;
      &lt;tmp:apply-templates select="db:title"&gt;
        &lt;div class="title"&gt;&lt;tmp:content/&gt;&lt;/div&gt;
      &lt;/tmp:apply-templates&gt;
    &lt;/header&gt;
  &lt;/tmp:titlepage-default&gt;
&lt;/xsl:variable&gt;

&lt;xsl:template match="*" mode="m:generate-titlepage"&gt;
  &lt;xsl:if test="fp:pmuj-enabled(/)"&gt;
    &lt;xsl:sequence select="@xml:id ! fp:pmuj(./parent::*, ./string())"/&gt;
  &lt;/xsl:if&gt;

  &lt;xsl:variable name="template"
                select="if (db:info/tmp:titlepage-template)
                        then db:info/tmp:titlepage-template
                        else f:template(., $v:titlepage-default)"/&gt;

  &lt;xsl:if test="empty(db:info)" use-when="'templates' = $v:debug"&gt;
    &lt;xsl:message terminate="yes" select="'No db:info in', local-name(.)"/&gt;
  &lt;/xsl:if&gt;

  &lt;xsl:variable name="empty-info" as="element(db:info)"&gt;
    &lt;info xmlns="http://docbook.org/ns/docbook"/&gt;
  &lt;/xsl:variable&gt;

  &lt;xsl:variable name="info"
                select="if (empty(db:info)) then $empty-info else db:info"/&gt;

  &lt;xsl:variable name="titlepage" as="node()*"&gt;
    &lt;xsl:apply-templates select="$template/node()" mode="mp:construct-titlepage"&gt;
      &lt;xsl:with-param name="info" select="$info"/&gt;
      &lt;xsl:with-param name="context" select="$info"/&gt;
      &lt;xsl:with-param name="template" select="$template/*"/&gt;
      &lt;xsl:with-param name="content" select="()"/&gt;
    &lt;/xsl:apply-templates&gt;
  &lt;/xsl:variable&gt;

  &lt;xsl:sequence select="if (count($titlepage) = 1
                            and $titlepage/self::*
                            and empty($titlepage/node())
                            and empty($titlepage/@*))
                        then ()
                        else $titlepage"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="tmp:apply-templates" mode="mp:construct-titlepage"&gt;
  &lt;xsl:param name="info" required="yes"/&gt;
  &lt;xsl:param name="context" required="yes"/&gt;
  &lt;xsl:param name="template" required="yes"/&gt;
  &lt;xsl:param name="content" required="yes"/&gt;

  &lt;xsl:variable name="content" select="node()"/&gt;

  &lt;xsl:variable use-when="'templates' = $v:debug"
                name="select" select="@select/string()"/&gt;

  &lt;xsl:variable name="elements" as="element()*"&gt;
    &lt;xsl:evaluate xpath="@select" context-item="$context"/&gt;
  &lt;/xsl:variable&gt;

  &lt;xsl:for-each select="$elements"&gt;
    &lt;xsl:message use-when="'templates-matches' = $v:debug"
                 select="'Template:', $select, 'matched', node-name(.)"/&gt;

    &lt;xsl:choose&gt;
      &lt;xsl:when test="empty($content)"&gt;
        &lt;xsl:apply-templates select="." mode="m:titlepage"/&gt;
      &lt;/xsl:when&gt;
      &lt;xsl:otherwise&gt;
        &lt;xsl:apply-templates select="$content" mode="mp:construct-titlepage"&gt;
          &lt;xsl:with-param name="info" select="$info"/&gt;
          &lt;xsl:with-param name="context" select="."/&gt;
          &lt;xsl:with-param name="template" select="$template"/&gt;
          &lt;xsl:with-param name="content" select="."/&gt;
        &lt;/xsl:apply-templates&gt;
      &lt;/xsl:otherwise&gt;
    &lt;/xsl:choose&gt;
  &lt;/xsl:for-each&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="tmp:content" mode="mp:construct-titlepage"&gt;
  &lt;xsl:param name="info" required="yes"/&gt;
  &lt;xsl:param name="context" required="yes"/&gt;
  &lt;xsl:param name="template" required="yes"/&gt;
  &lt;xsl:param name="content" required="yes"/&gt;

  &lt;xsl:apply-templates select="$content" mode="m:titlepage"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="element()" mode="mp:construct-titlepage"&gt;
  &lt;xsl:param name="info" required="yes"/&gt;
  &lt;xsl:param name="context" required="yes"/&gt;
  &lt;xsl:param name="template" required="yes"/&gt;
  &lt;xsl:param name="content" required="yes"/&gt;

  &lt;!-- For some reason, exclude-result-prefixes isn't
       excluding them, so just don't copy them. --&gt;
  &lt;xsl:element name="{node-name(.)}" namespace="http://www.w3.org/1999/xhtml"&gt;
    &lt;xsl:apply-templates select="@*,node()"
                         mode="mp:construct-titlepage"&gt;
      &lt;xsl:with-param name="info" select="$info"/&gt;
      &lt;xsl:with-param name="context" select="$context"/&gt;
      &lt;xsl:with-param name="template" select="$template"/&gt;
      &lt;xsl:with-param name="content" select="$content"/&gt;
    &lt;/xsl:apply-templates&gt;
  &lt;/xsl:element&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="text()" mode="mp:construct-titlepage"&gt;
  &lt;!-- whitespace in templates is ignored --&gt;
  &lt;xsl:param name="info" required="yes"/&gt;
  &lt;xsl:param name="context" required="yes"/&gt;
  &lt;xsl:param name="template" required="yes"/&gt;
  &lt;xsl:param name="content" required="yes"/&gt;
  &lt;xsl:if test="normalize-space(.) != ''"&gt;
    &lt;xsl:copy/&gt;
  &lt;/xsl:if&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="attribute()|comment()|processing-instruction()"
              mode="mp:construct-titlepage"&gt;
  &lt;xsl:param name="info" required="yes"/&gt;
  &lt;xsl:param name="context" required="yes"/&gt;
  &lt;xsl:param name="template" required="yes"/&gt;
  &lt;xsl:param name="content" required="yes"/&gt;
  &lt;xsl:copy/&gt;
&lt;/xsl:template&gt;

&lt;!-- ============================================================ --&gt;

&lt;xsl:template name="t:biblioentry"&gt;
  &lt;!-- For many elements, there's a default template if the user fails
       to provide one. There's so much variation in biblioentry, it's
       not even worth trying. --&gt;
  &lt;xsl:variable name="biblioentry-default" as="element()"&gt;
    &lt;tmp:biblioentry-default&gt;
      &lt;div&gt;ERROR: No template for biblioentry&lt;/div&gt;
    &lt;/tmp:biblioentry-default&gt;
  &lt;/xsl:variable&gt;
  &lt;xsl:variable name="template" select="f:template(., $biblioentry-default)"/&gt;
  &lt;xsl:variable name="entry" as="node()*"&gt;
    &lt;xsl:apply-templates select="$template/node()" mode="mp:construct-biblioentry"&gt;
      &lt;xsl:with-param name="info" select="."/&gt;
      &lt;xsl:with-param name="context" select="."/&gt;
      &lt;xsl:with-param name="template" select="$template/*"/&gt;
      &lt;xsl:with-param name="content" select="()"/&gt;
    &lt;/xsl:apply-templates&gt;
  &lt;/xsl:variable&gt;

  &lt;xsl:sequence select="if (count($entry) = 1
                            and $entry/self::*
                            and empty($entry/node())
                            and empty($entry/@*))
                        then ()
                        else $entry"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="tmp:apply-templates" mode="mp:construct-biblioentry"&gt;
  &lt;xsl:param name="info" required="yes"/&gt;
  &lt;xsl:param name="context" required="yes"/&gt;
  &lt;xsl:param name="template" required="yes"/&gt;
  &lt;xsl:param name="content" required="yes"/&gt;

  &lt;xsl:variable name="content" select="node()"/&gt;

  &lt;xsl:variable use-when="'templates' = $v:debug"
                name="select" select="@select/string()"/&gt;

  &lt;xsl:variable name="elements" as="element()*"&gt;
    &lt;xsl:evaluate xpath="@select" context-item="$context"/&gt;
  &lt;/xsl:variable&gt;

  &lt;xsl:for-each select="$elements"&gt;
    &lt;xsl:message use-when="'templates-matches' = $v:debug"
                 select="'Template:', $select, 'matched', node-name(.)"/&gt;

    &lt;xsl:choose&gt;
      &lt;xsl:when test="empty($content)"&gt;
        &lt;xsl:apply-templates select="." mode="m:biblioentry"/&gt;
      &lt;/xsl:when&gt;
      &lt;xsl:otherwise&gt;
        &lt;xsl:apply-templates select="$content" mode="mp:construct-biblioentry"&gt;
          &lt;xsl:with-param name="info" select="$info"/&gt;
          &lt;xsl:with-param name="context" select="."/&gt;
          &lt;xsl:with-param name="template" select="$template"/&gt;
          &lt;xsl:with-param name="content" select="."/&gt;
        &lt;/xsl:apply-templates&gt;
      &lt;/xsl:otherwise&gt;
    &lt;/xsl:choose&gt;
  &lt;/xsl:for-each&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="tmp:content" mode="mp:construct-biblioentry"&gt;
  &lt;xsl:param name="info" required="yes"/&gt;
  &lt;xsl:param name="context" required="yes"/&gt;
  &lt;xsl:param name="template" required="yes"/&gt;
  &lt;xsl:param name="content" required="yes"/&gt;

  &lt;xsl:apply-templates select="$content" mode="m:biblioentry"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="element()" mode="mp:construct-biblioentry"&gt;
  &lt;xsl:param name="info" required="yes"/&gt;
  &lt;xsl:param name="context" required="yes"/&gt;
  &lt;xsl:param name="template" required="yes"/&gt;
  &lt;xsl:param name="content" required="yes"/&gt;

  &lt;!-- For some reason, exclude-result-prefixes isn't
       excluding them, so just don't copy them. --&gt;
  &lt;xsl:element name="{node-name(.)}" namespace="http://www.w3.org/1999/xhtml"&gt;
    &lt;xsl:apply-templates select="@*,node()"
                         mode="mp:construct-biblioentry"&gt;
      &lt;xsl:with-param name="info" select="$info"/&gt;
      &lt;xsl:with-param name="context" select="$context"/&gt;
      &lt;xsl:with-param name="template" select="$template"/&gt;
      &lt;xsl:with-param name="content" select="$content"/&gt;
    &lt;/xsl:apply-templates&gt;
  &lt;/xsl:element&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="text()" mode="mp:construct-biblioentry"&gt;
  &lt;!-- whitespace in templates is ignored --&gt;
  &lt;xsl:param name="info" required="yes"/&gt;
  &lt;xsl:param name="context" required="yes"/&gt;
  &lt;xsl:param name="template" required="yes"/&gt;
  &lt;xsl:param name="content" required="yes"/&gt;
  &lt;xsl:if test="normalize-space(.) != ''"&gt;
    &lt;xsl:copy/&gt;
  &lt;/xsl:if&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="attribute()|comment()|processing-instruction()"
              mode="mp:construct-biblioentry"&gt;
  &lt;xsl:param name="info" required="yes"/&gt;
  &lt;xsl:param name="context" required="yes"/&gt;
  &lt;xsl:param name="template" required="yes"/&gt;
  &lt;xsl:param name="content" required="yes"/&gt;
  &lt;xsl:copy/&gt;
&lt;/xsl:template&gt;


&lt;/xsl:stylesheet&gt;
</code></pre></td></tr></table></div></div></div></div><div class="stylesheet" id="S-4845"><h3>titlepage.xsl</h3><p><span><span class="template all">9 templates</span></span></p><div class="instructions"><div class="title closed">Instructions</div><div class="body"><div id="S-4845-t-1" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:title</div><div class="props"><div class="mode">Mode: <code>m:titlepage</code></div><div class="matches">Matches: <code>db:title</code></div></div></div><div id="S-4845-t-2" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:formalpara/db:info/db:title</div><div class="props"><div class="mode">Mode: <code>m:titlepage</code></div><div class="priority">Priority: <code>10</code></div><div class="matches">Matches: <code>db:formalpara/db:info/db:title</code></div></div></div><div id="S-4845-t-3" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:subtitle</div><div class="props"><div class="mode">Mode: <code>m:titlepage</code></div><div class="matches">Matches: <code>db:subtitle</code></div></div></div><div id="S-4845-t-4" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:abstract|db:authorgroup|db:…</div><div class="props"><div class="mode">Mode: <code>m:titlepage</code></div><div class="matches">Matches: <code>db:abstract</code>, <code>db:authorgroup</code>, <code>db:copyright</code>, <code>db:legalnotice</code>, <code>db:pubdate</code>, <code>db:revhistory</code></div></div></div><div id="S-4845-t-5" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:releaseinfo</div><div class="props"><div class="mode">Mode: <code>m:titlepage</code></div><div class="matches">Matches: <code>db:releaseinfo</code></div></div></div><div id="S-4845-t-6" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:author</div><div class="props"><div class="mode">Mode: <code>m:titlepage</code></div><div class="matches">Matches: <code>db:author</code></div></div></div><div id="S-4845-t-7" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:editor</div><div class="props"><div class="calls">Calls: <a href="#S-22317-docbook.org.ns.docbook.functions.gentext,3">f:gentext()</a>, <a href="#S-28936-docbook.org.ns.docbook.functions.label-separator,1">f:label-separator()</a></div><div class="mode">Mode: <code>m:titlepage</code></div><div class="matches">Matches: <code>db:editor</code></div></div></div><div id="S-4845-t-8" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:jobtitle|db:orgdiv|db:orgna…</div><div class="props"><div class="mode">Mode: <code>m:titlepage</code></div><div class="matches">Matches: <code>db:jobtitle</code>, <code>db:orgdiv</code>, <code>db:orgname</code></div></div></div><div id="S-4845-t-9" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ *</div><div class="props"><div class="mode">Mode: <code>m:titlepage</code></div><div class="matches">Matches: <code>*</code></div></div></div></div></div><div class="source-code"><div class="title closed">Source code</div><div class="body"><div><table><tr><td valign="top" align="right"><pre class="fake-prism"><span id="line-S-4845-1">1</span>
<span id="line-S-4845-2"><span class="lno">2</span></span>
<span id="line-S-4845-3"><span class="lno">3</span></span>
<span id="line-S-4845-4"><span class="lno">4</span></span>
<span id="line-S-4845-5">5</span>
<span id="line-S-4845-6"><span class="lno">6</span></span>
<span id="line-S-4845-7"><span class="lno">7</span></span>
<span id="line-S-4845-8"><span class="lno">8</span></span>
<span id="line-S-4845-9"><span class="lno">9</span></span>
<span id="line-S-4845-10">10</span>
<span id="line-S-4845-11"><span class="lno">11</span></span>
<span id="line-S-4845-12"><span class="lno">12</span></span>
<span id="line-S-4845-13"><span class="lno">13</span></span>
<span id="line-S-4845-14"><span class="lno">14</span></span>
<span id="line-S-4845-15">15</span>
<span id="line-S-4845-16"><span class="lno">16</span></span>
<span id="line-S-4845-17"><span class="lno">17</span></span>
<span id="line-S-4845-18"><span class="lno">18</span></span>
<span id="line-S-4845-19"><span class="lno">19</span></span>
<span id="line-S-4845-20">20</span>
<span id="line-S-4845-21"><span class="lno">21</span></span>
<span id="line-S-4845-22"><span class="lno">22</span></span>
<span id="line-S-4845-23"><span class="lno">23</span></span>
<span id="line-S-4845-24"><span class="lno">24</span></span>
<span id="line-S-4845-25">25</span>
<span id="line-S-4845-26"><span class="lno">26</span></span>
<span id="line-S-4845-27"><span class="lno">27</span></span>
<span id="line-S-4845-28"><span class="lno">28</span></span>
<span id="line-S-4845-29"><span class="lno">29</span></span>
<span id="line-S-4845-30">30</span>
<span id="line-S-4845-31"><span class="lno">31</span></span>
<span id="line-S-4845-32"><span class="lno">32</span></span>
<span id="line-S-4845-33"><span class="lno">33</span></span>
<span id="line-S-4845-34"><span class="lno">34</span></span>
<span id="line-S-4845-35">35</span>
<span id="line-S-4845-36"><span class="lno">36</span></span>
<span id="line-S-4845-37"><span class="lno">37</span></span>
<span id="line-S-4845-38"><span class="lno">38</span></span>
<span id="line-S-4845-39"><span class="lno">39</span></span>
<span id="line-S-4845-40">40</span>
<span id="line-S-4845-41"><span class="lno">41</span></span>
<span id="line-S-4845-42"><span class="lno">42</span></span>
<span id="line-S-4845-43"><span class="lno">43</span></span>
<span id="line-S-4845-44"><span class="lno">44</span></span>
<span id="line-S-4845-45">45</span>
<span id="line-S-4845-46"><span class="lno">46</span></span>
<span id="line-S-4845-47"><span class="lno">47</span></span>
<span id="line-S-4845-48"><span class="lno">48</span></span>
<span id="line-S-4845-49"><span class="lno">49</span></span>
<span id="line-S-4845-50">50</span>
<span id="line-S-4845-51"><span class="lno">51</span></span>
<span id="line-S-4845-52"><span class="lno">52</span></span>
<span id="line-S-4845-53"><span class="lno">53</span></span>
<span id="line-S-4845-54"><span class="lno">54</span></span>
<span id="line-S-4845-55">55</span>
<span id="line-S-4845-56"><span class="lno">56</span></span>
<span id="line-S-4845-57"><span class="lno">57</span></span>
<span id="line-S-4845-58"><span class="lno">58</span></span>
<span id="line-S-4845-59"><span class="lno">59</span></span>
<span id="line-S-4845-60">60</span>
<span id="line-S-4845-61"><span class="lno">61</span></span>
<span id="line-S-4845-62"><span class="lno">62</span></span>
<span id="line-S-4845-63"><span class="lno">63</span></span>
<span id="line-S-4845-64"><span class="lno">64</span></span>
<span id="line-S-4845-65">65</span>
<span id="line-S-4845-66"><span class="lno">66</span></span>
<span id="line-S-4845-67"><span class="lno">67</span></span>
<span id="line-S-4845-68"><span class="lno">68</span></span>
<span id="line-S-4845-69"><span class="lno">69</span></span>
<span id="line-S-4845-70">70</span>
<span id="line-S-4845-71"><span class="lno">71</span></span>
<span id="line-S-4845-72"><span class="lno">72</span></span>
<span id="line-S-4845-73"><span class="lno">73</span></span>
<span id="line-S-4845-74"><span class="lno">74</span></span>
<span id="line-S-4845-75">75</span>
</pre></td><td valign="top"><pre><code class="language-xml">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                xmlns:db="http://docbook.org/ns/docbook"
                xmlns:f="http://docbook.org/ns/docbook/functions"
                xmlns:fp="http://docbook.org/ns/docbook/functions/private"
                xmlns:m="http://docbook.org/ns/docbook/modes"
                xmlns:t="http://docbook.org/ns/docbook/l10n/title"
                xmlns:vp="http://docbook.org/ns/docbook/variables/private"
                xmlns:xs="http://www.w3.org/2001/XMLSchema"
                xmlns="http://www.w3.org/1999/xhtml"
                default-mode="m:docbook"
                exclude-result-prefixes="db f fp m t vp xs"
                version="3.0"&gt;

&lt;xsl:template match="db:title" mode="m:titlepage"&gt;
  &lt;xsl:apply-templates select="../.." mode="m:headline"&gt;
    &lt;xsl:with-param name="purpose" select="'title'"/&gt;
  &lt;/xsl:apply-templates&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:formalpara/db:info/db:title" mode="m:titlepage" priority="10"&gt;
  &lt;span&gt;
    &lt;xsl:choose&gt;
      &lt;xsl:when test="matches(normalize-space(string(.)), '^.*\p{P}$')"&gt;
        &lt;xsl:attribute name="class" select="'title titlepunct'"/&gt;
      &lt;/xsl:when&gt;
      &lt;xsl:otherwise&gt;
        &lt;xsl:attribute name="class" select="'title'"/&gt;
      &lt;/xsl:otherwise&gt;
    &lt;/xsl:choose&gt;
    &lt;xsl:apply-templates mode="m:titlepage"/&gt;
  &lt;/span&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:subtitle" mode="m:titlepage"&gt;
  &lt;xsl:apply-templates/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:copyright|db:abstract|db:legalnotice
                     |db:authorgroup|db:revhistory
                     |db:pubdate"
              mode="m:titlepage"&gt;
  &lt;xsl:apply-templates select="."/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:releaseinfo" mode="m:titlepage"&gt;
  &lt;span&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
    &lt;xsl:apply-templates/&gt;
  &lt;/span&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:author" mode="m:titlepage"&gt;
  &lt;xsl:apply-templates select="db:personname|db:orgname"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:editor" mode="m:titlepage"&gt;
  &lt;span class="editedby"&gt;
    &lt;xsl:sequence select="f:gentext(., 'label', 'edited-by')"/&gt;
    &lt;xsl:sequence select="f:label-separator(.)"/&gt;
  &lt;/span&gt;
  &lt;xsl:apply-templates select="db:personname|db:orgname"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:jobtitle|db:orgname|db:orgdiv" mode="m:titlepage"&gt;
  &lt;xsl:apply-templates select="."/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="*" mode="m:titlepage"&gt;
  &lt;xsl:message select="'No titlepage template for: ' || node-name(.)"/&gt;
  &lt;xsl:apply-templates select="node()"/&gt;
&lt;/xsl:template&gt;

&lt;/xsl:stylesheet&gt;
</code></pre></td></tr></table></div></div></div></div><div class="stylesheet" id="S-33240"><h3>info.xsl</h3><p><span><span class="template all">20 templates</span></span>, <span><span class="function all">2 functions</span></span></p><div class="instructions"><div class="title closed">Instructions</div><div class="body"><div id="S-33240-t-1" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:info</div><div class="props"><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:info</code></div></div></div><div id="S-33240-t-2" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:copyright</div><div class="props"><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:copyright</code></div></div></div><div id="S-33240-t-3" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:year</div><div class="props"><div class="uses">Uses: <a href="#S-26643-..copyright-collapse-years">$copyright-collapse-years</a></div><div class="calls">Calls: <a href="#S-33240-docbook.org.ns.docbook.functions.private.collapse-years,1">fp:collapse-years()</a></div><div class="mode">Mode: <code>m:copyright-years</code></div><div class="matches">Matches: <code>db:year</code></div></div></div><div id="S-33240-docbook.org.ns.docbook.functions.private.collapse-years,1" class="instruction function"><div class="title"><span class="link"></span>Function fp:collapse-years#1($years as element(db:year)*)</div><div class="props"><div class="uses">Uses: <a href="#S-26643-..copyright-year-range-separator">$copyright-year-range-separator</a>, <a href="#S-26643-..copyright-year-separator">$copyright-year-separator</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-33240-t-3">template</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-33240">modules/info.xsl</a></div></div></div><div id="S-33240-docbook.org.ns.docbook.functions.private.collapse-years,4" class="instruction function"><div class="title"><span class="link"></span>Function fp:collapse-years#4($years as element(db:year)*, $first as xs:boolean, $prevyear as element(db:year)?, $constructed as item()*) <span class="recursive" title="Recursive function">♻</span></div><div class="props"><div class="uses">Uses: <a href="#S-26643-..copyright-year-range-separator">$copyright-year-range-separator</a>, <a href="#S-26643-..copyright-year-separator">$copyright-year-separator</a></div><div class="calls">Calls: <a href="#S-33240-docbook.org.ns.docbook.functions.private.collapse-years,1">fp:collapse-years()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-33240-docbook.org.ns.docbook.functions.private.collapse-years,1">fp:collapse-years()</a>, <a href="#S-33240-docbook.org.ns.docbook.functions.private.collapse-years,4">fp:collapse-years()</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-33240">modules/info.xsl</a></div></div></div><div id="S-33240-t-4" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:holder|db:year</div><div class="props"><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:holder</code>, <code>db:year</code></div></div></div><div id="S-33240-t-5" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:abstract|db:authorgroup|db:…</div><div class="props"><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:abstract</code>, <code>db:authorgroup</code>, <code>db:legalnotice</code></div></div></div><div id="S-33240-t-6" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:firstname|db:givenname|db:h…</div><div class="props"><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:firstname</code>, <code>db:givenname</code>, <code>db:honorific</code>, <code>db:lineage</code>, <code>db:othername</code>, <code>db:surname</code></div></div></div><div id="S-33240-t-7" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:personname</div><div class="props"><div class="uses">Uses: <a href="#S-23412-docbook.org.ns.docbook.variables.personal-name-styles">$v:personal-name-styles</a>, <a href="#S-26643-..default-personal-name-style">$default-personal-name-style</a></div><div class="calls">Calls: <a href="#S-28936-docbook.org.ns.docbook.functions.check-gentext,3">f:check-gentext()</a>, <a href="#S-22317-docbook.org.ns.docbook.functions.gentext,3">f:gentext()</a></div><div class="calls">Calls: <a href="#S-33240-docbook.org.ns.docbook.templates.person-name">t:person-name</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:personname</code></div></div></div><div id="S-33240-docbook.org.ns.docbook.templates.person-name" class="instruction template"><div class="title"><span class="link"></span>Template t:person-name  match ≅ </div><div class="props"><div class="uses">Uses: <a href="#S-29386-docbook.org.ns.docbook.errors.INVALID-NAME-STYLE">$dbe:INVALID-NAME-STYLE</a></div><div class="calls">Calls: <a href="#S-33240-docbook.org.ns.docbook.templates.person-name-family-given">t:person-name-family-given</a>, <a href="#S-33240-docbook.org.ns.docbook.templates.person-name-first-last">t:person-name-first-last</a>, <a href="#S-33240-docbook.org.ns.docbook.templates.person-name-last-first">t:person-name-last-first</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-33240-t-7">template</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-33240">modules/info.xsl</a></div><div class="mode">Mode: <code>m:docbook</code></div></div></div><div id="S-33240-docbook.org.ns.docbook.templates.person-name-family-given" class="instruction template"><div class="title"><span class="link"></span>Template t:person-name-family-given  match ≅ </div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-33240-docbook.org.ns.docbook.templates.person-name">t:person-name</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-33240">modules/info.xsl</a></div><div class="mode">Mode: <code>m:docbook</code></div></div></div><div id="S-33240-t-10" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ /</div><div class="props"><div class="mode">Mode: <code>m:to-uppercase</code></div><div class="matches">Matches: <code>/</code></div></div></div><div id="S-33240-t-11" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ *</div><div class="props"><div class="mode">Mode: <code>m:to-uppercase</code></div><div class="matches">Matches: <code>*</code></div></div></div><div id="S-33240-t-12" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ comment()|processing-instructi…</div><div class="props"><div class="mode">Mode: <code>m:to-uppercase</code></div><div class="matches">Matches: <code>comment()</code>, <code>processing-instruction()</code></div></div></div><div id="S-33240-t-13" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ text()</div><div class="props"><div class="mode">Mode: <code>m:to-uppercase</code></div><div class="matches">Matches: <code>text()</code></div></div></div><div id="S-33240-docbook.org.ns.docbook.templates.person-name-last-first" class="instruction template"><div class="title"><span class="link"></span>Template t:person-name-last-first  match ≅ </div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-33240-docbook.org.ns.docbook.templates.person-name">t:person-name</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-33240">modules/info.xsl</a></div><div class="mode">Mode: <code>m:docbook</code></div></div></div><div id="S-33240-docbook.org.ns.docbook.templates.person-name-first-last" class="instruction template"><div class="title"><span class="link"></span>Template t:person-name-first-last  match ≅ </div><div class="props"><div class="uses">Uses: <a href="#S-26643-..othername-in-middle">$othername-in-middle</a></div><div class="calls">Calls: <a href="#S-28936-docbook.org.ns.docbook.functions.is-true,1">f:is-true()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-33240-docbook.org.ns.docbook.templates.person-name">t:person-name</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-33240">modules/info.xsl</a></div><div class="mode">Mode: <code>m:docbook</code></div></div></div><div id="S-33240-t-16" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:city|db:country|db:email|db…</div><div class="props"><div class="calls">Calls: <a href="#S-9504-docbook.org.ns.docbook.templates.inline">t:inline</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:city</code>, <code>db:country</code>, <code>db:email</code>, <code>db:fax</code>, <code>db:otheraddr</code>, <code>db:phone</code>, <code>db:pob</code>, <code>db:postcode</code>, <code>db:state</code>, <code>db:street</code></div></div></div><div id="S-33240-docbook.org.ns.docbook.templates.person-name-list" class="instruction template"><div class="title"><span class="link"></span>Template t:person-name-list  match ≅  <span class="recursive" title="Recursive template">♻</span></div><div class="props"><div class="calls">Calls: <a href="#S-22317-docbook.org.ns.docbook.functions.gentext,3">f:gentext()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-45868-t-22">template</a>, <a href="#S-33240-docbook.org.ns.docbook.templates.person-name-list">t:person-name-list</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-45868">modules/bibliography.xsl</a>, <a href="#S-33240">modules/info.xsl</a></div><div class="mode">Mode: <code>m:docbook</code></div></div></div><div id="S-33240-t-18" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:artpagenums|db:authorinitia…</div><div class="props"><div class="calls">Calls: <a href="#S-9504-docbook.org.ns.docbook.templates.inline">t:inline</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:artpagenums</code>, <code>db:authorinitials</code>, <code>db:contractnum</code>, <code>db:contractsponsor</code>, <code>db:edition</code>, <code>db:issuenum</code>, <code>db:pagenums</code>, <code>db:publishername</code>, <code>db:seriesvolnums</code>, <code>db:volumenum</code></div></div></div><div id="S-33240-t-19" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:pubdate</div><div class="props"><div class="calls">Calls: <a href="#S-28936-docbook.org.ns.docbook.functions.pi,2">f:pi()</a></div><div class="calls">Calls: <a href="#S-9504-docbook.org.ns.docbook.templates.inline">t:inline</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:pubdate</code></div></div></div><div id="S-33240-t-20" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:info/db:pubdate</div><div class="props"><div class="uses">Uses: <a href="#S-26643-..date-date-format">$date-date-format</a>, <a href="#S-26643-..date-dateTime-format">$date-dateTime-format</a></div><div class="calls">Calls: <a href="#S-28936-docbook.org.ns.docbook.functions.pi,2">f:pi()</a></div><div class="calls">Calls: <a href="#S-9504-docbook.org.ns.docbook.templates.inline">t:inline</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:info/db:pubdate</code></div></div></div></div></div><div class="source-code"><div class="title closed">Source code</div><div class="body"><div><table><tr><td valign="top" align="right"><pre class="fake-prism"><span id="line-S-33240-1">1</span>
<span id="line-S-33240-2"><span class="lno">2</span></span>
<span id="line-S-33240-3"><span class="lno">3</span></span>
<span id="line-S-33240-4"><span class="lno">4</span></span>
<span id="line-S-33240-5">5</span>
<span id="line-S-33240-6"><span class="lno">6</span></span>
<span id="line-S-33240-7"><span class="lno">7</span></span>
<span id="line-S-33240-8"><span class="lno">8</span></span>
<span id="line-S-33240-9"><span class="lno">9</span></span>
<span id="line-S-33240-10">10</span>
<span id="line-S-33240-11"><span class="lno">11</span></span>
<span id="line-S-33240-12"><span class="lno">12</span></span>
<span id="line-S-33240-13"><span class="lno">13</span></span>
<span id="line-S-33240-14"><span class="lno">14</span></span>
<span id="line-S-33240-15">15</span>
<span id="line-S-33240-16"><span class="lno">16</span></span>
<span id="line-S-33240-17"><span class="lno">17</span></span>
<span id="line-S-33240-18"><span class="lno">18</span></span>
<span id="line-S-33240-19"><span class="lno">19</span></span>
<span id="line-S-33240-20">20</span>
<span id="line-S-33240-21"><span class="lno">21</span></span>
<span id="line-S-33240-22"><span class="lno">22</span></span>
<span id="line-S-33240-23"><span class="lno">23</span></span>
<span id="line-S-33240-24"><span class="lno">24</span></span>
<span id="line-S-33240-25">25</span>
<span id="line-S-33240-26"><span class="lno">26</span></span>
<span id="line-S-33240-27"><span class="lno">27</span></span>
<span id="line-S-33240-28"><span class="lno">28</span></span>
<span id="line-S-33240-29"><span class="lno">29</span></span>
<span id="line-S-33240-30">30</span>
<span id="line-S-33240-31"><span class="lno">31</span></span>
<span id="line-S-33240-32"><span class="lno">32</span></span>
<span id="line-S-33240-33"><span class="lno">33</span></span>
<span id="line-S-33240-34"><span class="lno">34</span></span>
<span id="line-S-33240-35">35</span>
<span id="line-S-33240-36"><span class="lno">36</span></span>
<span id="line-S-33240-37"><span class="lno">37</span></span>
<span id="line-S-33240-38"><span class="lno">38</span></span>
<span id="line-S-33240-39"><span class="lno">39</span></span>
<span id="line-S-33240-40">40</span>
<span id="line-S-33240-41"><span class="lno">41</span></span>
<span id="line-S-33240-42"><span class="lno">42</span></span>
<span id="line-S-33240-43"><span class="lno">43</span></span>
<span id="line-S-33240-44"><span class="lno">44</span></span>
<span id="line-S-33240-45">45</span>
<span id="line-S-33240-46"><span class="lno">46</span></span>
<span id="line-S-33240-47"><span class="lno">47</span></span>
<span id="line-S-33240-48"><span class="lno">48</span></span>
<span id="line-S-33240-49"><span class="lno">49</span></span>
<span id="line-S-33240-50">50</span>
<span id="line-S-33240-51"><span class="lno">51</span></span>
<span id="line-S-33240-52"><span class="lno">52</span></span>
<span id="line-S-33240-53"><span class="lno">53</span></span>
<span id="line-S-33240-54"><span class="lno">54</span></span>
<span id="line-S-33240-55">55</span>
<span id="line-S-33240-56"><span class="lno">56</span></span>
<span id="line-S-33240-57"><span class="lno">57</span></span>
<span id="line-S-33240-58"><span class="lno">58</span></span>
<span id="line-S-33240-59"><span class="lno">59</span></span>
<span id="line-S-33240-60">60</span>
<span id="line-S-33240-61"><span class="lno">61</span></span>
<span id="line-S-33240-62"><span class="lno">62</span></span>
<span id="line-S-33240-63"><span class="lno">63</span></span>
<span id="line-S-33240-64"><span class="lno">64</span></span>
<span id="line-S-33240-65">65</span>
<span id="line-S-33240-66"><span class="lno">66</span></span>
<span id="line-S-33240-67"><span class="lno">67</span></span>
<span id="line-S-33240-68"><span class="lno">68</span></span>
<span id="line-S-33240-69"><span class="lno">69</span></span>
<span id="line-S-33240-70">70</span>
<span id="line-S-33240-71"><span class="lno">71</span></span>
<span id="line-S-33240-72"><span class="lno">72</span></span>
<span id="line-S-33240-73"><span class="lno">73</span></span>
<span id="line-S-33240-74"><span class="lno">74</span></span>
<span id="line-S-33240-75">75</span>
<span id="line-S-33240-76"><span class="lno">76</span></span>
<span id="line-S-33240-77"><span class="lno">77</span></span>
<span id="line-S-33240-78"><span class="lno">78</span></span>
<span id="line-S-33240-79"><span class="lno">79</span></span>
<span id="line-S-33240-80">80</span>
<span id="line-S-33240-81"><span class="lno">81</span></span>
<span id="line-S-33240-82"><span class="lno">82</span></span>
<span id="line-S-33240-83"><span class="lno">83</span></span>
<span id="line-S-33240-84"><span class="lno">84</span></span>
<span id="line-S-33240-85">85</span>
<span id="line-S-33240-86"><span class="lno">86</span></span>
<span id="line-S-33240-87"><span class="lno">87</span></span>
<span id="line-S-33240-88"><span class="lno">88</span></span>
<span id="line-S-33240-89"><span class="lno">89</span></span>
<span id="line-S-33240-90">90</span>
<span id="line-S-33240-91"><span class="lno">91</span></span>
<span id="line-S-33240-92"><span class="lno">92</span></span>
<span id="line-S-33240-93"><span class="lno">93</span></span>
<span id="line-S-33240-94"><span class="lno">94</span></span>
<span id="line-S-33240-95">95</span>
<span id="line-S-33240-96"><span class="lno">96</span></span>
<span id="line-S-33240-97"><span class="lno">97</span></span>
<span id="line-S-33240-98"><span class="lno">98</span></span>
<span id="line-S-33240-99"><span class="lno">99</span></span>
<span id="line-S-33240-100">100</span>
<span id="line-S-33240-101"><span class="lno">101</span></span>
<span id="line-S-33240-102"><span class="lno">102</span></span>
<span id="line-S-33240-103"><span class="lno">103</span></span>
<span id="line-S-33240-104"><span class="lno">104</span></span>
<span id="line-S-33240-105">105</span>
<span id="line-S-33240-106"><span class="lno">106</span></span>
<span id="line-S-33240-107"><span class="lno">107</span></span>
<span id="line-S-33240-108"><span class="lno">108</span></span>
<span id="line-S-33240-109"><span class="lno">109</span></span>
<span id="line-S-33240-110">110</span>
<span id="line-S-33240-111"><span class="lno">111</span></span>
<span id="line-S-33240-112"><span class="lno">112</span></span>
<span id="line-S-33240-113"><span class="lno">113</span></span>
<span id="line-S-33240-114"><span class="lno">114</span></span>
<span id="line-S-33240-115">115</span>
<span id="line-S-33240-116"><span class="lno">116</span></span>
<span id="line-S-33240-117"><span class="lno">117</span></span>
<span id="line-S-33240-118"><span class="lno">118</span></span>
<span id="line-S-33240-119"><span class="lno">119</span></span>
<span id="line-S-33240-120">120</span>
<span id="line-S-33240-121"><span class="lno">121</span></span>
<span id="line-S-33240-122"><span class="lno">122</span></span>
<span id="line-S-33240-123"><span class="lno">123</span></span>
<span id="line-S-33240-124"><span class="lno">124</span></span>
<span id="line-S-33240-125">125</span>
<span id="line-S-33240-126"><span class="lno">126</span></span>
<span id="line-S-33240-127"><span class="lno">127</span></span>
<span id="line-S-33240-128"><span class="lno">128</span></span>
<span id="line-S-33240-129"><span class="lno">129</span></span>
<span id="line-S-33240-130">130</span>
<span id="line-S-33240-131"><span class="lno">131</span></span>
<span id="line-S-33240-132"><span class="lno">132</span></span>
<span id="line-S-33240-133"><span class="lno">133</span></span>
<span id="line-S-33240-134"><span class="lno">134</span></span>
<span id="line-S-33240-135">135</span>
<span id="line-S-33240-136"><span class="lno">136</span></span>
<span id="line-S-33240-137"><span class="lno">137</span></span>
<span id="line-S-33240-138"><span class="lno">138</span></span>
<span id="line-S-33240-139"><span class="lno">139</span></span>
<span id="line-S-33240-140">140</span>
<span id="line-S-33240-141"><span class="lno">141</span></span>
<span id="line-S-33240-142"><span class="lno">142</span></span>
<span id="line-S-33240-143"><span class="lno">143</span></span>
<span id="line-S-33240-144"><span class="lno">144</span></span>
<span id="line-S-33240-145">145</span>
<span id="line-S-33240-146"><span class="lno">146</span></span>
<span id="line-S-33240-147"><span class="lno">147</span></span>
<span id="line-S-33240-148"><span class="lno">148</span></span>
<span id="line-S-33240-149"><span class="lno">149</span></span>
<span id="line-S-33240-150">150</span>
<span id="line-S-33240-151"><span class="lno">151</span></span>
<span id="line-S-33240-152"><span class="lno">152</span></span>
<span id="line-S-33240-153"><span class="lno">153</span></span>
<span id="line-S-33240-154"><span class="lno">154</span></span>
<span id="line-S-33240-155">155</span>
<span id="line-S-33240-156"><span class="lno">156</span></span>
<span id="line-S-33240-157"><span class="lno">157</span></span>
<span id="line-S-33240-158"><span class="lno">158</span></span>
<span id="line-S-33240-159"><span class="lno">159</span></span>
<span id="line-S-33240-160">160</span>
<span id="line-S-33240-161"><span class="lno">161</span></span>
<span id="line-S-33240-162"><span class="lno">162</span></span>
<span id="line-S-33240-163"><span class="lno">163</span></span>
<span id="line-S-33240-164"><span class="lno">164</span></span>
<span id="line-S-33240-165">165</span>
<span id="line-S-33240-166"><span class="lno">166</span></span>
<span id="line-S-33240-167"><span class="lno">167</span></span>
<span id="line-S-33240-168"><span class="lno">168</span></span>
<span id="line-S-33240-169"><span class="lno">169</span></span>
<span id="line-S-33240-170">170</span>
<span id="line-S-33240-171"><span class="lno">171</span></span>
<span id="line-S-33240-172"><span class="lno">172</span></span>
<span id="line-S-33240-173"><span class="lno">173</span></span>
<span id="line-S-33240-174"><span class="lno">174</span></span>
<span id="line-S-33240-175">175</span>
<span id="line-S-33240-176"><span class="lno">176</span></span>
<span id="line-S-33240-177"><span class="lno">177</span></span>
<span id="line-S-33240-178"><span class="lno">178</span></span>
<span id="line-S-33240-179"><span class="lno">179</span></span>
<span id="line-S-33240-180">180</span>
<span id="line-S-33240-181"><span class="lno">181</span></span>
<span id="line-S-33240-182"><span class="lno">182</span></span>
<span id="line-S-33240-183"><span class="lno">183</span></span>
<span id="line-S-33240-184"><span class="lno">184</span></span>
<span id="line-S-33240-185">185</span>
<span id="line-S-33240-186"><span class="lno">186</span></span>
<span id="line-S-33240-187"><span class="lno">187</span></span>
<span id="line-S-33240-188"><span class="lno">188</span></span>
<span id="line-S-33240-189"><span class="lno">189</span></span>
<span id="line-S-33240-190">190</span>
<span id="line-S-33240-191"><span class="lno">191</span></span>
<span id="line-S-33240-192"><span class="lno">192</span></span>
<span id="line-S-33240-193"><span class="lno">193</span></span>
<span id="line-S-33240-194"><span class="lno">194</span></span>
<span id="line-S-33240-195">195</span>
<span id="line-S-33240-196"><span class="lno">196</span></span>
<span id="line-S-33240-197"><span class="lno">197</span></span>
<span id="line-S-33240-198"><span class="lno">198</span></span>
<span id="line-S-33240-199"><span class="lno">199</span></span>
<span id="line-S-33240-200">200</span>
<span id="line-S-33240-201"><span class="lno">201</span></span>
<span id="line-S-33240-202"><span class="lno">202</span></span>
<span id="line-S-33240-203"><span class="lno">203</span></span>
<span id="line-S-33240-204"><span class="lno">204</span></span>
<span id="line-S-33240-205">205</span>
<span id="line-S-33240-206"><span class="lno">206</span></span>
<span id="line-S-33240-207"><span class="lno">207</span></span>
<span id="line-S-33240-208"><span class="lno">208</span></span>
<span id="line-S-33240-209"><span class="lno">209</span></span>
<span id="line-S-33240-210">210</span>
<span id="line-S-33240-211"><span class="lno">211</span></span>
<span id="line-S-33240-212"><span class="lno">212</span></span>
<span id="line-S-33240-213"><span class="lno">213</span></span>
<span id="line-S-33240-214"><span class="lno">214</span></span>
<span id="line-S-33240-215">215</span>
<span id="line-S-33240-216"><span class="lno">216</span></span>
<span id="line-S-33240-217"><span class="lno">217</span></span>
<span id="line-S-33240-218"><span class="lno">218</span></span>
<span id="line-S-33240-219"><span class="lno">219</span></span>
<span id="line-S-33240-220">220</span>
<span id="line-S-33240-221"><span class="lno">221</span></span>
<span id="line-S-33240-222"><span class="lno">222</span></span>
<span id="line-S-33240-223"><span class="lno">223</span></span>
<span id="line-S-33240-224"><span class="lno">224</span></span>
<span id="line-S-33240-225">225</span>
<span id="line-S-33240-226"><span class="lno">226</span></span>
<span id="line-S-33240-227"><span class="lno">227</span></span>
<span id="line-S-33240-228"><span class="lno">228</span></span>
<span id="line-S-33240-229"><span class="lno">229</span></span>
<span id="line-S-33240-230">230</span>
<span id="line-S-33240-231"><span class="lno">231</span></span>
<span id="line-S-33240-232"><span class="lno">232</span></span>
<span id="line-S-33240-233"><span class="lno">233</span></span>
<span id="line-S-33240-234"><span class="lno">234</span></span>
<span id="line-S-33240-235">235</span>
<span id="line-S-33240-236"><span class="lno">236</span></span>
<span id="line-S-33240-237"><span class="lno">237</span></span>
<span id="line-S-33240-238"><span class="lno">238</span></span>
<span id="line-S-33240-239"><span class="lno">239</span></span>
<span id="line-S-33240-240">240</span>
<span id="line-S-33240-241"><span class="lno">241</span></span>
<span id="line-S-33240-242"><span class="lno">242</span></span>
<span id="line-S-33240-243"><span class="lno">243</span></span>
<span id="line-S-33240-244"><span class="lno">244</span></span>
<span id="line-S-33240-245">245</span>
<span id="line-S-33240-246"><span class="lno">246</span></span>
<span id="line-S-33240-247"><span class="lno">247</span></span>
<span id="line-S-33240-248"><span class="lno">248</span></span>
<span id="line-S-33240-249"><span class="lno">249</span></span>
<span id="line-S-33240-250">250</span>
<span id="line-S-33240-251"><span class="lno">251</span></span>
<span id="line-S-33240-252"><span class="lno">252</span></span>
<span id="line-S-33240-253"><span class="lno">253</span></span>
<span id="line-S-33240-254"><span class="lno">254</span></span>
<span id="line-S-33240-255">255</span>
<span id="line-S-33240-256"><span class="lno">256</span></span>
<span id="line-S-33240-257"><span class="lno">257</span></span>
<span id="line-S-33240-258"><span class="lno">258</span></span>
<span id="line-S-33240-259"><span class="lno">259</span></span>
<span id="line-S-33240-260">260</span>
<span id="line-S-33240-261"><span class="lno">261</span></span>
<span id="line-S-33240-262"><span class="lno">262</span></span>
<span id="line-S-33240-263"><span class="lno">263</span></span>
<span id="line-S-33240-264"><span class="lno">264</span></span>
<span id="line-S-33240-265">265</span>
<span id="line-S-33240-266"><span class="lno">266</span></span>
<span id="line-S-33240-267"><span class="lno">267</span></span>
<span id="line-S-33240-268"><span class="lno">268</span></span>
<span id="line-S-33240-269"><span class="lno">269</span></span>
<span id="line-S-33240-270">270</span>
<span id="line-S-33240-271"><span class="lno">271</span></span>
<span id="line-S-33240-272"><span class="lno">272</span></span>
<span id="line-S-33240-273"><span class="lno">273</span></span>
<span id="line-S-33240-274"><span class="lno">274</span></span>
<span id="line-S-33240-275">275</span>
<span id="line-S-33240-276"><span class="lno">276</span></span>
<span id="line-S-33240-277"><span class="lno">277</span></span>
<span id="line-S-33240-278"><span class="lno">278</span></span>
<span id="line-S-33240-279"><span class="lno">279</span></span>
<span id="line-S-33240-280">280</span>
<span id="line-S-33240-281"><span class="lno">281</span></span>
<span id="line-S-33240-282"><span class="lno">282</span></span>
<span id="line-S-33240-283"><span class="lno">283</span></span>
<span id="line-S-33240-284"><span class="lno">284</span></span>
<span id="line-S-33240-285">285</span>
<span id="line-S-33240-286"><span class="lno">286</span></span>
<span id="line-S-33240-287"><span class="lno">287</span></span>
<span id="line-S-33240-288"><span class="lno">288</span></span>
<span id="line-S-33240-289"><span class="lno">289</span></span>
<span id="line-S-33240-290">290</span>
<span id="line-S-33240-291"><span class="lno">291</span></span>
<span id="line-S-33240-292"><span class="lno">292</span></span>
<span id="line-S-33240-293"><span class="lno">293</span></span>
<span id="line-S-33240-294"><span class="lno">294</span></span>
<span id="line-S-33240-295">295</span>
<span id="line-S-33240-296"><span class="lno">296</span></span>
<span id="line-S-33240-297"><span class="lno">297</span></span>
<span id="line-S-33240-298"><span class="lno">298</span></span>
<span id="line-S-33240-299"><span class="lno">299</span></span>
<span id="line-S-33240-300">300</span>
<span id="line-S-33240-301"><span class="lno">301</span></span>
<span id="line-S-33240-302"><span class="lno">302</span></span>
<span id="line-S-33240-303"><span class="lno">303</span></span>
<span id="line-S-33240-304"><span class="lno">304</span></span>
<span id="line-S-33240-305">305</span>
<span id="line-S-33240-306"><span class="lno">306</span></span>
<span id="line-S-33240-307"><span class="lno">307</span></span>
<span id="line-S-33240-308"><span class="lno">308</span></span>
<span id="line-S-33240-309"><span class="lno">309</span></span>
<span id="line-S-33240-310">310</span>
<span id="line-S-33240-311"><span class="lno">311</span></span>
<span id="line-S-33240-312"><span class="lno">312</span></span>
<span id="line-S-33240-313"><span class="lno">313</span></span>
<span id="line-S-33240-314"><span class="lno">314</span></span>
<span id="line-S-33240-315">315</span>
<span id="line-S-33240-316"><span class="lno">316</span></span>
<span id="line-S-33240-317"><span class="lno">317</span></span>
<span id="line-S-33240-318"><span class="lno">318</span></span>
<span id="line-S-33240-319"><span class="lno">319</span></span>
<span id="line-S-33240-320">320</span>
<span id="line-S-33240-321"><span class="lno">321</span></span>
<span id="line-S-33240-322"><span class="lno">322</span></span>
<span id="line-S-33240-323"><span class="lno">323</span></span>
<span id="line-S-33240-324"><span class="lno">324</span></span>
<span id="line-S-33240-325">325</span>
<span id="line-S-33240-326"><span class="lno">326</span></span>
<span id="line-S-33240-327"><span class="lno">327</span></span>
<span id="line-S-33240-328"><span class="lno">328</span></span>
<span id="line-S-33240-329"><span class="lno">329</span></span>
<span id="line-S-33240-330">330</span>
<span id="line-S-33240-331"><span class="lno">331</span></span>
<span id="line-S-33240-332"><span class="lno">332</span></span>
<span id="line-S-33240-333"><span class="lno">333</span></span>
<span id="line-S-33240-334"><span class="lno">334</span></span>
<span id="line-S-33240-335">335</span>
<span id="line-S-33240-336"><span class="lno">336</span></span>
<span id="line-S-33240-337"><span class="lno">337</span></span>
<span id="line-S-33240-338"><span class="lno">338</span></span>
<span id="line-S-33240-339"><span class="lno">339</span></span>
<span id="line-S-33240-340">340</span>
<span id="line-S-33240-341"><span class="lno">341</span></span>
<span id="line-S-33240-342"><span class="lno">342</span></span>
<span id="line-S-33240-343"><span class="lno">343</span></span>
<span id="line-S-33240-344"><span class="lno">344</span></span>
<span id="line-S-33240-345">345</span>
<span id="line-S-33240-346"><span class="lno">346</span></span>
<span id="line-S-33240-347"><span class="lno">347</span></span>
<span id="line-S-33240-348"><span class="lno">348</span></span>
<span id="line-S-33240-349"><span class="lno">349</span></span>
<span id="line-S-33240-350">350</span>
<span id="line-S-33240-351"><span class="lno">351</span></span>
<span id="line-S-33240-352"><span class="lno">352</span></span>
<span id="line-S-33240-353"><span class="lno">353</span></span>
<span id="line-S-33240-354"><span class="lno">354</span></span>
<span id="line-S-33240-355">355</span>
<span id="line-S-33240-356"><span class="lno">356</span></span>
<span id="line-S-33240-357"><span class="lno">357</span></span>
<span id="line-S-33240-358"><span class="lno">358</span></span>
<span id="line-S-33240-359"><span class="lno">359</span></span>
<span id="line-S-33240-360">360</span>
<span id="line-S-33240-361"><span class="lno">361</span></span>
<span id="line-S-33240-362"><span class="lno">362</span></span>
<span id="line-S-33240-363"><span class="lno">363</span></span>
<span id="line-S-33240-364"><span class="lno">364</span></span>
<span id="line-S-33240-365">365</span>
<span id="line-S-33240-366"><span class="lno">366</span></span>
<span id="line-S-33240-367"><span class="lno">367</span></span>
<span id="line-S-33240-368"><span class="lno">368</span></span>
<span id="line-S-33240-369"><span class="lno">369</span></span>
<span id="line-S-33240-370">370</span>
<span id="line-S-33240-371"><span class="lno">371</span></span>
<span id="line-S-33240-372"><span class="lno">372</span></span>
<span id="line-S-33240-373"><span class="lno">373</span></span>
<span id="line-S-33240-374"><span class="lno">374</span></span>
<span id="line-S-33240-375">375</span>
<span id="line-S-33240-376"><span class="lno">376</span></span>
<span id="line-S-33240-377"><span class="lno">377</span></span>
<span id="line-S-33240-378"><span class="lno">378</span></span>
<span id="line-S-33240-379"><span class="lno">379</span></span>
<span id="line-S-33240-380">380</span>
<span id="line-S-33240-381"><span class="lno">381</span></span>
<span id="line-S-33240-382"><span class="lno">382</span></span>
<span id="line-S-33240-383"><span class="lno">383</span></span>
<span id="line-S-33240-384"><span class="lno">384</span></span>
<span id="line-S-33240-385">385</span>
<span id="line-S-33240-386"><span class="lno">386</span></span>
<span id="line-S-33240-387"><span class="lno">387</span></span>
<span id="line-S-33240-388"><span class="lno">388</span></span>
<span id="line-S-33240-389"><span class="lno">389</span></span>
<span id="line-S-33240-390">390</span>
<span id="line-S-33240-391"><span class="lno">391</span></span>
<span id="line-S-33240-392"><span class="lno">392</span></span>
<span id="line-S-33240-393"><span class="lno">393</span></span>
<span id="line-S-33240-394"><span class="lno">394</span></span>
<span id="line-S-33240-395">395</span>
<span id="line-S-33240-396"><span class="lno">396</span></span>
<span id="line-S-33240-397"><span class="lno">397</span></span>
<span id="line-S-33240-398"><span class="lno">398</span></span>
<span id="line-S-33240-399"><span class="lno">399</span></span>
<span id="line-S-33240-400">400</span>
<span id="line-S-33240-401"><span class="lno">401</span></span>
<span id="line-S-33240-402"><span class="lno">402</span></span>
<span id="line-S-33240-403"><span class="lno">403</span></span>
<span id="line-S-33240-404"><span class="lno">404</span></span>
<span id="line-S-33240-405">405</span>
<span id="line-S-33240-406"><span class="lno">406</span></span>
<span id="line-S-33240-407"><span class="lno">407</span></span>
<span id="line-S-33240-408"><span class="lno">408</span></span>
<span id="line-S-33240-409"><span class="lno">409</span></span>
<span id="line-S-33240-410">410</span>
<span id="line-S-33240-411"><span class="lno">411</span></span>
<span id="line-S-33240-412"><span class="lno">412</span></span>
<span id="line-S-33240-413"><span class="lno">413</span></span>
<span id="line-S-33240-414"><span class="lno">414</span></span>
<span id="line-S-33240-415">415</span>
<span id="line-S-33240-416"><span class="lno">416</span></span>
<span id="line-S-33240-417"><span class="lno">417</span></span>
<span id="line-S-33240-418"><span class="lno">418</span></span>
<span id="line-S-33240-419"><span class="lno">419</span></span>
<span id="line-S-33240-420">420</span>
<span id="line-S-33240-421"><span class="lno">421</span></span>
<span id="line-S-33240-422"><span class="lno">422</span></span>
<span id="line-S-33240-423"><span class="lno">423</span></span>
<span id="line-S-33240-424"><span class="lno">424</span></span>
<span id="line-S-33240-425">425</span>
<span id="line-S-33240-426"><span class="lno">426</span></span>
<span id="line-S-33240-427"><span class="lno">427</span></span>
<span id="line-S-33240-428"><span class="lno">428</span></span>
<span id="line-S-33240-429"><span class="lno">429</span></span>
<span id="line-S-33240-430">430</span>
<span id="line-S-33240-431"><span class="lno">431</span></span>
<span id="line-S-33240-432"><span class="lno">432</span></span>
<span id="line-S-33240-433"><span class="lno">433</span></span>
<span id="line-S-33240-434"><span class="lno">434</span></span>
<span id="line-S-33240-435">435</span>
<span id="line-S-33240-436"><span class="lno">436</span></span>
<span id="line-S-33240-437"><span class="lno">437</span></span>
<span id="line-S-33240-438"><span class="lno">438</span></span>
<span id="line-S-33240-439"><span class="lno">439</span></span>
<span id="line-S-33240-440">440</span>
<span id="line-S-33240-441"><span class="lno">441</span></span>
<span id="line-S-33240-442"><span class="lno">442</span></span>
<span id="line-S-33240-443"><span class="lno">443</span></span>
<span id="line-S-33240-444"><span class="lno">444</span></span>
<span id="line-S-33240-445">445</span>
<span id="line-S-33240-446"><span class="lno">446</span></span>
<span id="line-S-33240-447"><span class="lno">447</span></span>
<span id="line-S-33240-448"><span class="lno">448</span></span>
<span id="line-S-33240-449"><span class="lno">449</span></span>
<span id="line-S-33240-450">450</span>
<span id="line-S-33240-451"><span class="lno">451</span></span>
<span id="line-S-33240-452"><span class="lno">452</span></span>
<span id="line-S-33240-453"><span class="lno">453</span></span>
<span id="line-S-33240-454"><span class="lno">454</span></span>
<span id="line-S-33240-455">455</span>
<span id="line-S-33240-456"><span class="lno">456</span></span>
<span id="line-S-33240-457"><span class="lno">457</span></span>
<span id="line-S-33240-458"><span class="lno">458</span></span>
<span id="line-S-33240-459"><span class="lno">459</span></span>
<span id="line-S-33240-460">460</span>
<span id="line-S-33240-461"><span class="lno">461</span></span>
<span id="line-S-33240-462"><span class="lno">462</span></span>
<span id="line-S-33240-463"><span class="lno">463</span></span>
<span id="line-S-33240-464"><span class="lno">464</span></span>
<span id="line-S-33240-465">465</span>
<span id="line-S-33240-466"><span class="lno">466</span></span>
<span id="line-S-33240-467"><span class="lno">467</span></span>
<span id="line-S-33240-468"><span class="lno">468</span></span>
<span id="line-S-33240-469"><span class="lno">469</span></span>
<span id="line-S-33240-470">470</span>
<span id="line-S-33240-471"><span class="lno">471</span></span>
<span id="line-S-33240-472"><span class="lno">472</span></span>
<span id="line-S-33240-473"><span class="lno">473</span></span>
<span id="line-S-33240-474"><span class="lno">474</span></span>
<span id="line-S-33240-475">475</span>
<span id="line-S-33240-476"><span class="lno">476</span></span>
<span id="line-S-33240-477"><span class="lno">477</span></span>
<span id="line-S-33240-478"><span class="lno">478</span></span>
<span id="line-S-33240-479"><span class="lno">479</span></span>
<span id="line-S-33240-480">480</span>
<span id="line-S-33240-481"><span class="lno">481</span></span>
<span id="line-S-33240-482"><span class="lno">482</span></span>
<span id="line-S-33240-483"><span class="lno">483</span></span>
<span id="line-S-33240-484"><span class="lno">484</span></span>
<span id="line-S-33240-485">485</span>
<span id="line-S-33240-486"><span class="lno">486</span></span>
</pre></td><td valign="top"><pre><code class="language-xml">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                xmlns:db="http://docbook.org/ns/docbook"
                xmlns:dbe="http://docbook.org/ns/docbook/errors"
                xmlns:f="http://docbook.org/ns/docbook/functions"
                xmlns:fp="http://docbook.org/ns/docbook/functions/private"
                xmlns:m="http://docbook.org/ns/docbook/modes"
                xmlns:t="http://docbook.org/ns/docbook/templates"
                xmlns:v="http://docbook.org/ns/docbook/variables"
                xmlns:vp="http://docbook.org/ns/docbook/variables/private"
                xmlns:xs="http://www.w3.org/2001/XMLSchema"
                xmlns="http://www.w3.org/1999/xhtml"
                default-mode="m:docbook"
                exclude-result-prefixes="db dbe f fp m t v vp xs"
                version="3.0"&gt;

&lt;xsl:template match="db:info"&gt;
  &lt;xsl:apply-templates select="db:indexterm"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:copyright"&gt;
  &lt;xsl:variable name="gi" select="if (parent::db:info)
                                  then 'div'
                                  else 'span'"/&gt;
  &lt;xsl:element name="{$gi}" namespace="http://www.w3.org/1999/xhtml"&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
    &lt;xsl:text&gt;Copyright © &lt;/xsl:text&gt;
    &lt;xsl:apply-templates select="db:year[1]" mode="m:copyright-years"/&gt;
    &lt;xsl:text&gt; &lt;/xsl:text&gt;
    &lt;xsl:apply-templates select="db:holder"/&gt;
  &lt;/xsl:element&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:year" mode="m:copyright-years"&gt;
  &lt;xsl:param name="prevyear" select="()"/&gt;
  &lt;xsl:param name="range" select="()"/&gt;

  &lt;xsl:choose&gt;
    &lt;xsl:when test="not($copyright-collapse-years)"&gt;
      &lt;span&gt;
        &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
        &lt;xsl:apply-templates/&gt;
      &lt;/span&gt;
      &lt;xsl:if test="following-sibling::db:year"&gt;
        &lt;xsl:text&gt;, &lt;/xsl:text&gt;
        &lt;xsl:apply-templates select="(following-sibling::db:year)[1]"/&gt;
      &lt;/xsl:if&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:sequence select="fp:collapse-years((., following-sibling::db:year))"/&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:template&gt;

&lt;xsl:function name="fp:collapse-years"&gt;
  &lt;xsl:param name="years" as="element(db:year)*"/&gt;

  &lt;span class="copyright-years"&gt;
    &lt;xsl:choose&gt;
      &lt;xsl:when test="count($years) = 1"&gt;
        &lt;xsl:apply-templates select="$years"/&gt;
      &lt;/xsl:when&gt;
      &lt;xsl:when test="count($years) = 2"&gt;
        &lt;xsl:choose&gt;
          &lt;xsl:when test="$years[1] castable as xs:integer
                          and $years[2] castable as xs:integer
                          and xs:integer($years[2]) = xs:integer($years[1]) + 1"&gt;
            &lt;xsl:apply-templates select="$years[1]"/&gt;
            &lt;xsl:sequence select="$copyright-year-range-separator"/&gt;
            &lt;xsl:apply-templates select="$years[2]"/&gt;
          &lt;/xsl:when&gt;
          &lt;xsl:otherwise&gt;
            &lt;xsl:apply-templates select="$years[1]"/&gt;
            &lt;xsl:sequence select="$copyright-year-separator"/&gt;
            &lt;xsl:apply-templates select="$years[2]"/&gt;
          &lt;/xsl:otherwise&gt;
        &lt;/xsl:choose&gt;
      &lt;/xsl:when&gt;
      &lt;xsl:otherwise&gt;
        &lt;xsl:sequence select="fp:collapse-years($years, true(), (), ())"/&gt;
      &lt;/xsl:otherwise&gt;
    &lt;/xsl:choose&gt;
  &lt;/span&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="fp:collapse-years"&gt;
  &lt;xsl:param name="years" as="element(db:year)*"/&gt;
  &lt;xsl:param name="first" as="xs:boolean"/&gt;
  &lt;xsl:param name="prevyear" as="element(db:year)?"/&gt;
  &lt;xsl:param name="constructed" as="item()*"/&gt;

  &lt;!--
  &lt;xsl:message select="'[', $prevyear/string(), ']:', $years ! string(.)"/&gt;
  &lt;xsl:message select="'X:', $first, $constructed"/&gt;
  --&gt;

  &lt;xsl:choose&gt;
    &lt;xsl:when test="empty($prevyear)"&gt;
      &lt;xsl:sequence
          select="fp:collapse-years(subsequence($years, 2), $first, $years[1], ())"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="empty($years)"&gt;
      &lt;xsl:choose&gt;
        &lt;xsl:when test="empty($constructed)"&gt;
          &lt;xsl:if test="not($first)"&gt;
            &lt;xsl:sequence select="$copyright-year-separator"/&gt;
          &lt;/xsl:if&gt;
          &lt;xsl:apply-templates select="$prevyear"/&gt;
        &lt;/xsl:when&gt;
        &lt;xsl:otherwise&gt;
          &lt;xsl:if test="not($first)"&gt;
            &lt;xsl:sequence select="$copyright-year-separator"/&gt;
          &lt;/xsl:if&gt;
          &lt;xsl:sequence select="$constructed"/&gt;
          &lt;xsl:sequence select="$copyright-year-range-separator"/&gt;
          &lt;xsl:apply-templates select="$prevyear"/&gt;
        &lt;/xsl:otherwise&gt;
      &lt;/xsl:choose&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="$prevyear castable as xs:integer
                    and $years[1] castable as xs:integer
                    and xs:integer($years[1]) = xs:integer($prevyear) + 1"&gt;
      &lt;xsl:choose&gt;
        &lt;xsl:when test="empty($constructed)"&gt;
          &lt;xsl:variable name="firstitem" as="item()*"&gt;
            &lt;xsl:apply-templates select="$prevyear"/&gt;
          &lt;/xsl:variable&gt;
          &lt;xsl:sequence
              select="fp:collapse-years(subsequence($years, 2),
                         $first, $years[1], $firstitem)"/&gt;
        &lt;/xsl:when&gt;
        &lt;xsl:otherwise&gt;
          &lt;xsl:sequence
              select="fp:collapse-years(subsequence($years, 2),
                         $first, $years[1], $constructed)"/&gt;
        &lt;/xsl:otherwise&gt;
      &lt;/xsl:choose&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:choose&gt;
        &lt;xsl:when test="empty($constructed)"&gt;
          &lt;xsl:if test="not($first)"&gt;
            &lt;xsl:sequence select="$copyright-year-separator"/&gt;
          &lt;/xsl:if&gt;
          &lt;xsl:apply-templates select="$prevyear"/&gt;
          &lt;xsl:sequence
              select="fp:collapse-years(subsequence($years, 2), false(), $years[1], ())"/&gt;
        &lt;/xsl:when&gt;
        &lt;xsl:otherwise&gt;
          &lt;xsl:if test="not($first)"&gt;
            &lt;xsl:sequence select="$copyright-year-separator"/&gt;
          &lt;/xsl:if&gt;
          &lt;xsl:sequence select="$constructed"/&gt;
          &lt;xsl:sequence select="$copyright-year-range-separator"/&gt;
          &lt;xsl:apply-templates select="$prevyear"/&gt;
          &lt;xsl:sequence
              select="fp:collapse-years(subsequence($years, 2), false(), $years[1], ())"/&gt;
        &lt;/xsl:otherwise&gt;
      &lt;/xsl:choose&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:function&gt;

&lt;xsl:template match="db:holder|db:year"&gt;
  &lt;span&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
    &lt;xsl:apply-templates/&gt;
  &lt;/span&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:abstract|db:legalnotice
                     |db:authorgroup[parent::db:info]"&gt;
  &lt;div&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
    &lt;xsl:apply-templates/&gt;
  &lt;/div&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:honorific|db:firstname|db:othername
                     |db:surname|db:givenname|db:lineage"&gt;
  &lt;span&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
    &lt;xsl:apply-templates/&gt;
  &lt;/span&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:personname"&gt;
  &lt;xsl:variable name="node" select="."/&gt;

  &lt;xsl:variable name="style" as="xs:string?"&gt;
    &lt;xsl:for-each select="$v:personal-name-styles"&gt;
      &lt;xsl:if test="contains-token($node/@role, .)"&gt;
        &lt;xsl:sequence select="."/&gt;
      &lt;/xsl:if&gt;
    &lt;/xsl:for-each&gt;
  &lt;/xsl:variable&gt;

  &lt;xsl:variable name="style" as="xs:string?"&gt;
    &lt;xsl:choose&gt;
      &lt;xsl:when test="empty($style)
                      and (parent::db:author
                           or parent::db:editor
                           or parent::db:othercredit)
                      and parent::*/@role"&gt;
        &lt;xsl:for-each select="$v:personal-name-styles"&gt;
          &lt;xsl:if test="contains-token($node/parent::*/@role, .)"&gt;
            &lt;xsl:sequence select="."/&gt;
          &lt;/xsl:if&gt;
        &lt;/xsl:for-each&gt;
      &lt;/xsl:when&gt;
      &lt;xsl:otherwise&gt;
        &lt;xsl:sequence select="$style"/&gt;
      &lt;/xsl:otherwise&gt;
    &lt;/xsl:choose&gt;
  &lt;/xsl:variable&gt;

  &lt;xsl:variable name="style" as="xs:string?"
                select="if (empty($style))
                        then if (f:check-gentext(., 'style', 'personname'))
                             then  f:gentext(., 'style', 'personname')
                             else  $default-personal-name-style
                        else $style"/&gt;

  &lt;span&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"&gt;
      &lt;xsl:with-param name="style" select="$style"/&gt;
    &lt;/xsl:apply-templates&gt;
    &lt;xsl:call-template name="t:person-name"&gt;
      &lt;xsl:with-param name="style" select="$style"/&gt;
    &lt;/xsl:call-template&gt;
  &lt;/span&gt;
&lt;/xsl:template&gt;

&lt;xsl:template name="t:person-name"&gt;
  &lt;xsl:param name="style" as="xs:string" required="yes"/&gt;

  &lt;xsl:variable name="node" select="."/&gt;

  &lt;xsl:choose&gt;
    &lt;xsl:when test="not(*)"&gt;
      &lt;xsl:value-of select="normalize-space(.)"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="$style = 'FAMILY-given'"&gt;
      &lt;xsl:call-template name="t:person-name-family-given"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="$style = 'last-first'"&gt;
      &lt;xsl:call-template name="t:person-name-last-first"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="$style = 'first-last'"&gt;
      &lt;xsl:call-template name="t:person-name-first-last"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:sequence select="error($dbe:INVALID-NAME-STYLE,
        'Invalid name style: ' || $style)"/&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:template&gt;

&lt;!-- ============================================================ --&gt;

&lt;xsl:template name="t:person-name-family-given"&gt;
  &lt;!-- The family-given style applies a convention for identifying given --&gt;
  &lt;!-- and family names in locales where it may be ambiguous --&gt;
  &lt;xsl:variable name="surname"&gt;
    &lt;xsl:apply-templates select="db:surname[1]"/&gt;
  &lt;/xsl:variable&gt;

  &lt;xsl:apply-templates select="$surname/node()" mode="m:to-uppercase"/&gt;

  &lt;xsl:if test="db:surname and (db:firstname or db:givenname)"&gt;
    &lt;xsl:text&gt; &lt;/xsl:text&gt;
  &lt;/xsl:if&gt;

  &lt;xsl:apply-templates select="(db:firstname|db:givenname)[1]"/&gt;

  &lt;xsl:text&gt; [FAMILY Given]&lt;/xsl:text&gt;
&lt;/xsl:template&gt;

&lt;!-- ============================================================ --&gt;

&lt;xsl:template match="/" mode="m:to-uppercase"&gt;
  &lt;xsl:apply-templates mode="m:to-uppercase"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="*" mode="m:to-uppercase"&gt;
  &lt;xsl:copy&gt;
    &lt;xsl:copy-of select="@*"/&gt;
    &lt;xsl:apply-templates mode="m:to-uppercase"/&gt;
  &lt;/xsl:copy&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="processing-instruction()|comment()" mode="m:to-uppercase"&gt;
  &lt;xsl:copy/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="text()" mode="m:to-uppercase"&gt;
  &lt;xsl:value-of select="upper-case(.)"/&gt;
&lt;/xsl:template&gt;

&lt;!-- ============================================================ --&gt;

&lt;xsl:template name="t:person-name-last-first"&gt;
  &lt;xsl:apply-templates select="db:surname[1]"/&gt;

  &lt;xsl:if test="db:surname and (db:firstname or db:givenname)"&gt;
    &lt;xsl:text&gt;, &lt;/xsl:text&gt;
  &lt;/xsl:if&gt;

  &lt;xsl:apply-templates select="(db:firstname|db:givenname)[1]"/&gt;
&lt;/xsl:template&gt;

&lt;!-- ============================================================ --&gt;

&lt;xsl:template name="t:person-name-first-last"&gt;
  &lt;xsl:if test="db:honorific"&gt;
    &lt;xsl:apply-templates select="db:honorific[1]"/&gt;
  &lt;/xsl:if&gt;

  &lt;xsl:if test="db:firstname or db:givenname"&gt;
    &lt;xsl:if test="db:honorific"&gt;
      &lt;xsl:text&gt; &lt;/xsl:text&gt;
    &lt;/xsl:if&gt;
    &lt;xsl:apply-templates select="(db:firstname|db:givenname)[1]"/&gt;
  &lt;/xsl:if&gt;

  &lt;xsl:if test="db:othername and f:is-true($othername-in-middle)"&gt;
    &lt;xsl:if test="db:honorific or db:firstname or db:givenname"&gt;
      &lt;xsl:text&gt; &lt;/xsl:text&gt;
    &lt;/xsl:if&gt;
    &lt;xsl:apply-templates select="db:othername[1]"/&gt;
  &lt;/xsl:if&gt;

  &lt;xsl:if test="db:surname"&gt;
    &lt;xsl:if test="db:honorific or db:firstname or db:givenname
                  or (db:othername and f:is-true($othername-in-middle))"&gt;
      &lt;xsl:text&gt; &lt;/xsl:text&gt;
    &lt;/xsl:if&gt;
    &lt;xsl:apply-templates select="db:surname[1]"/&gt;
  &lt;/xsl:if&gt;

  &lt;xsl:if test="db:lineage"&gt;
    &lt;xsl:text&gt;, &lt;/xsl:text&gt;
    &lt;xsl:apply-templates select="db:lineage[1]"/&gt;
  &lt;/xsl:if&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:city|db:country|db:email|db:fax|db:phone
                     |db:pob|db:postcode|db:state|db:street|db:otheraddr"&gt;
  &lt;xsl:call-template name="t:inline"/&gt;
&lt;/xsl:template&gt;

&lt;!-- ============================================================ --&gt;

&lt;xsl:template name="t:person-name-list"&gt;
  &lt;!-- Return a formatted string representation of the contents of
       the current element. The current element must contain one or
       more AUTHORs, CORPAUTHORs, OTHERCREDITs, and/or EDITORs.

       John Doe
     or
       John Doe and Jane Doe
     or
       John Doe, Jane Doe, and A. Nonymous
  --&gt;
  &lt;xsl:param name="person.list"
             select="db:author|db:corpauthor|db:othercredit|db:editor"/&gt;
  &lt;xsl:param name="person.count" select="count($person.list)"/&gt;
  &lt;xsl:param name="count" select="1"/&gt;

  &lt;xsl:choose&gt;
    &lt;xsl:when test="$count &amp;gt; $person.count"&gt;&lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:apply-templates select="$person.list[position()=$count]"/&gt;

      &lt;xsl:choose&gt;
        &lt;xsl:when test="$person.count = 2 and $count = 1"&gt;
          &lt;xsl:sequence select="f:gentext(., 'separator', 'author-sep2')"/&gt;
        &lt;/xsl:when&gt;
        &lt;xsl:when test="$person.count &amp;gt; 2 and $count+1 = $person.count"&gt;
          &lt;xsl:sequence select="f:gentext(., 'separator', 'author-seplast')"/&gt;
        &lt;/xsl:when&gt;
        &lt;xsl:when test="$count &amp;lt; $person.count"&gt;
          &lt;xsl:sequence select="f:gentext(., 'separator', 'author-sep')"/&gt;
        &lt;/xsl:when&gt;
      &lt;/xsl:choose&gt;

      &lt;xsl:call-template name="t:person-name-list"&gt;
        &lt;xsl:with-param name="person.list" select="$person.list"/&gt;
        &lt;xsl:with-param name="person.count" select="$person.count"/&gt;
        &lt;xsl:with-param name="count" select="$count+1"/&gt;
      &lt;/xsl:call-template&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:template&gt;

&lt;!-- ============================================================ --&gt;

&lt;xsl:template match="db:publishername
                     |db:seriesvolnums|db:volumenum|db:issuenum
                     |db:artpagenums|db:authorinitials|db:edition|db:pagenums
                     |db:contractnum|db:contractsponsor"&gt;
  &lt;xsl:call-template name="t:inline"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:pubdate"&gt;
  &lt;xsl:variable name="format" select="f:pi(., 'format')"/&gt;

  &lt;xsl:call-template name="t:inline"&gt;
    &lt;xsl:with-param name="namemap" select="'time'"/&gt;
    &lt;xsl:with-param name="content"&gt;
      &lt;xsl:apply-templates/&gt;
    &lt;/xsl:with-param&gt;
    &lt;xsl:with-param name="extra-attributes" as="attribute()*"&gt;
      &lt;xsl:choose&gt;
        &lt;xsl:when test="*"/&gt;
        &lt;xsl:when test="string(.) castable as xs:dateTime"&gt;
          &lt;xsl:attribute name="datetime" select="."/&gt;
        &lt;/xsl:when&gt;
        &lt;xsl:when test="string(.) castable as xs:date"&gt;
          &lt;xsl:attribute name="datetime" select="."/&gt;
        &lt;/xsl:when&gt;
        &lt;xsl:when test="string(.) castable as xs:integer"&gt;
          &lt;xsl:attribute name="datetime" select="."/&gt;
        &lt;/xsl:when&gt;
        &lt;xsl:otherwise/&gt;
      &lt;/xsl:choose&gt;
    &lt;/xsl:with-param&gt;
  &lt;/xsl:call-template&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:info/db:pubdate"&gt;
  &lt;xsl:variable name="format" select="f:pi(., 'format')"/&gt;

  &lt;xsl:call-template name="t:inline"&gt;
    &lt;xsl:with-param name="namemap" select="'time'"/&gt;
    &lt;xsl:with-param name="content"&gt;
      &lt;xsl:choose&gt;
        &lt;xsl:when test="*"&gt;
          &lt;xsl:apply-templates/&gt;
        &lt;/xsl:when&gt;
        &lt;xsl:when test="string(.) castable as xs:dateTime"&gt;
          &lt;xsl:variable name="date" select="xs:dateTime(string(.))"/&gt;
          &lt;xsl:choose&gt;
            &lt;xsl:when test="$format"&gt;
              &lt;xsl:sequence select="format-dateTime($date, $format)"/&gt;
            &lt;/xsl:when&gt;
            &lt;xsl:otherwise&gt;
              &lt;xsl:sequence select="format-dateTime($date, $date-dateTime-format)"/&gt;
            &lt;/xsl:otherwise&gt;
          &lt;/xsl:choose&gt;
        &lt;/xsl:when&gt;
        &lt;xsl:when test="string(.) castable as xs:date"&gt;
          &lt;xsl:variable name="date" select="xs:date(string(.))"/&gt;
          &lt;xsl:choose&gt;
            &lt;xsl:when test="$format"&gt;
              &lt;xsl:sequence select="format-date($date, $format)"/&gt;
            &lt;/xsl:when&gt;
            &lt;xsl:otherwise&gt;
              &lt;xsl:sequence select="format-date($date, $date-date-format)"/&gt;
            &lt;/xsl:otherwise&gt;
          &lt;/xsl:choose&gt;
        &lt;/xsl:when&gt;
        &lt;xsl:otherwise&gt;
          &lt;xsl:apply-templates/&gt;
        &lt;/xsl:otherwise&gt;
      &lt;/xsl:choose&gt;
    &lt;/xsl:with-param&gt;
    &lt;xsl:with-param name="extra-attributes" as="attribute()*"&gt;
      &lt;xsl:choose&gt;
        &lt;xsl:when test="*"/&gt;
        &lt;xsl:when test="string(.) castable as xs:dateTime"&gt;
          &lt;xsl:attribute name="datetime" select="."/&gt;
        &lt;/xsl:when&gt;
        &lt;xsl:when test="string(.) castable as xs:date"&gt;
          &lt;xsl:attribute name="datetime" select="."/&gt;
        &lt;/xsl:when&gt;
        &lt;xsl:when test="string(.) castable as xs:integer"&gt;
          &lt;xsl:attribute name="datetime" select="."/&gt;
        &lt;/xsl:when&gt;
        &lt;xsl:otherwise/&gt;
      &lt;/xsl:choose&gt;
    &lt;/xsl:with-param&gt;
  &lt;/xsl:call-template&gt;
&lt;/xsl:template&gt;
&lt;/xsl:stylesheet&gt;
</code></pre></td></tr></table></div></div></div></div><div class="stylesheet" id="S-33116"><h3>lists.xsl</h3><p><span><span class="template all">29 templates</span></span>, <span><span class="function all">2 functions</span></span>, <span><span class="variable all">1 variable</span> (<span class="variable unused">1 unused</span>)</span></p><div class="instructions"><div class="title closed">Instructions</div><div class="body"><div id="S-33116-t-1" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:itemizedlist</div><div class="props"><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:itemizedlist</code></div></div></div><div id="S-33116-t-2" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:orderedlist</div><div class="props"><div class="calls">Calls: <a href="#S-33116-docbook.org.ns.docbook.templates.private.orderedlist-properties">tp:orderedlist-properties</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:orderedlist</code></div></div></div><div id="S-33116-docbook.org.ns.docbook.templates.private.orderedlist-properties" class="instruction template"><div class="title"><span class="link"></span>Template tp:orderedlist-properties  match ≅ </div><div class="props"><div class="calls">Calls: <a href="#S-28936-docbook.org.ns.docbook.functions.orderedlist-item-numeration,1">f:orderedlist-item-numeration()</a>, <a href="#S-28936-docbook.org.ns.docbook.functions.orderedlist-startingnumber,1">f:orderedlist-startingnumber()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-33116-t-2">template</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-33116">modules/lists.xsl</a></div><div class="mode">Mode: <code>m:docbook</code></div></div></div><div id="S-33116-t-4" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:listitem</div><div class="props"><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:listitem</code></div></div></div><div id="S-33116-t-5" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:simplelist</div><div class="props"><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:simplelist</code></div></div></div><div id="S-33116-t-6" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:simplelist</div><div class="props"><div class="calls">Calls: <a href="#S-33116-docbook.org.ns.docbook.functions.private.select-vert-members,2">fp:select-vert-members()</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:simplelist</code></div></div></div><div id="S-33116-docbook.org.ns.docbook.functions.private.select-vert-members,2" class="instruction function"><div class="title"><span class="link"></span>Function fp:select-vert-members($member as element(db:member)?, $rows as xs:integer) as element(db:member)* <span class="recursive" title="Recursive function">♻</span></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-33116-t-6">template</a>, <a href="#S-33116-docbook.org.ns.docbook.functions.private.select-vert-members,2">fp:select-vert-members()</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-33116">modules/lists.xsl</a></div></div></div><div id="S-33116-t-7" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:member</div><div class="props"><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:member</code></div></div></div><div id="S-33116-t-8" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:variablelist</div><div class="props"><div class="calls">Calls: <a href="#S-33116-docbook.org.ns.docbook.functions.private.estimated-term-length,1">fp:estimated-term-length()</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:variablelist</code></div></div></div><div id="S-33116-docbook.org.ns.docbook.variables.private.term" class="instruction variable unused"><div class="title"><span class="link"></span>Variable <code>$vp:term</code></div><div class="props"><div class="used-by"><span class="marker">☞</span><span class="unused">Unused</span></div></div></div><div id="S-33116-t-9" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:varlistentry</div><div class="props"><div class="calls">Calls: <a href="#S-22317-docbook.org.ns.docbook.functions.gentext,3">f:gentext()</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:varlistentry</code></div></div></div><div id="S-33116-t-10" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:term</div><div class="props"><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:term</code></div></div></div><div id="S-33116-docbook.org.ns.docbook.functions.private.estimated-term-length,1" class="instruction function"><div class="title"><span class="link"></span>Function fp:estimated-term-length($entry as element(db:varlistentry))</div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-33116-t-8">template</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-33116">modules/lists.xsl</a></div></div></div><div id="S-33116-t-11" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:segmentedlist</div><div class="props"><div class="uses">Uses: <a href="#S-26643-..segmentedlist-style">$segmentedlist-style</a></div><div class="calls">Calls: <a href="#S-28936-docbook.org.ns.docbook.functions.pi,3">f:pi()</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:segmentedlist</code></div></div></div><div id="S-33116-t-12" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:segtitle</div><div class="props"><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:segtitle</code></div></div></div><div id="S-33116-t-13" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:segtitle</div><div class="props"><div class="mode">Mode: <code>m:segtitle-in-seg</code></div><div class="matches">Matches: <code>db:segtitle</code></div></div></div><div id="S-33116-t-14" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:seglistitem</div><div class="props"><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:seglistitem</code></div></div></div><div id="S-33116-t-15" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:seg</div><div class="props"><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:seg</code></div></div></div><div id="S-33116-t-16" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:segmentedlist</div><div class="props"><div class="calls">Calls: <a href="#S-28936-docbook.org.ns.docbook.functions.pi,2">f:pi()</a></div><div class="mode">Mode: <code>m:seglist-table</code></div><div class="matches">Matches: <code>db:segmentedlist</code></div></div></div><div id="S-33116-t-17" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:segtitle</div><div class="props"><div class="mode">Mode: <code>m:seglist-table</code></div><div class="matches">Matches: <code>db:segtitle</code></div></div></div><div id="S-33116-t-18" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:seglistitem</div><div class="props"><div class="mode">Mode: <code>m:seglist-table</code></div><div class="matches">Matches: <code>db:seglistitem</code></div></div></div><div id="S-33116-t-19" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:seg</div><div class="props"><div class="mode">Mode: <code>m:seglist-table</code></div><div class="matches">Matches: <code>db:seg</code></div></div></div><div id="S-33116-t-20" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:calloutlist</div><div class="props"><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:calloutlist</code></div></div></div><div id="S-33116-t-21" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:callout</div><div class="props"><div class="uses">Uses: <a href="#S-29386-docbook.org.ns.docbook.errors.INVALID-AREAREFS">$dbe:INVALID-AREAREFS</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:callout</code></div></div></div><div id="S-33116-t-22" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ *</div><div class="props"><div class="mode">Mode: <code>m:callout-link</code></div><div class="matches">Matches: <code>*</code></div></div></div><div id="S-33116-t-23" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:area|db:co</div><div class="props"><div class="mode">Mode: <code>m:callout-link</code></div><div class="matches">Matches: <code>db:area</code>, <code>db:co</code></div></div></div><div id="S-33116-t-24" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:procedure</div><div class="props"><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:procedure</code></div></div></div><div id="S-33116-t-25" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:step</div><div class="props"><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:step</code></div></div></div><div id="S-33116-t-26" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:substeps</div><div class="props"><div class="calls">Calls: <a href="#S-28936-docbook.org.ns.docbook.functions.step-numeration,1">f:step-numeration()</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:substeps</code></div></div></div><div id="S-33116-t-27" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:stepalternatives</div><div class="props"><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:stepalternatives</code></div></div></div><div id="S-33116-t-28" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:result</div><div class="props"><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:result</code></div></div></div><div id="S-33116-t-29" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:task|db:taskprerequisites|d…</div><div class="props"><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:task</code>, <code>db:taskprerequisites</code>, <code>db:taskrelated</code>, <code>db:tasksummary</code></div></div></div></div></div><div class="source-code"><div class="title closed">Source code</div><div class="body"><div><table><tr><td valign="top" align="right"><pre class="fake-prism"><span id="line-S-33116-1">1</span>
<span id="line-S-33116-2"><span class="lno">2</span></span>
<span id="line-S-33116-3"><span class="lno">3</span></span>
<span id="line-S-33116-4"><span class="lno">4</span></span>
<span id="line-S-33116-5">5</span>
<span id="line-S-33116-6"><span class="lno">6</span></span>
<span id="line-S-33116-7"><span class="lno">7</span></span>
<span id="line-S-33116-8"><span class="lno">8</span></span>
<span id="line-S-33116-9"><span class="lno">9</span></span>
<span id="line-S-33116-10">10</span>
<span id="line-S-33116-11"><span class="lno">11</span></span>
<span id="line-S-33116-12"><span class="lno">12</span></span>
<span id="line-S-33116-13"><span class="lno">13</span></span>
<span id="line-S-33116-14"><span class="lno">14</span></span>
<span id="line-S-33116-15">15</span>
<span id="line-S-33116-16"><span class="lno">16</span></span>
<span id="line-S-33116-17"><span class="lno">17</span></span>
<span id="line-S-33116-18"><span class="lno">18</span></span>
<span id="line-S-33116-19"><span class="lno">19</span></span>
<span id="line-S-33116-20">20</span>
<span id="line-S-33116-21"><span class="lno">21</span></span>
<span id="line-S-33116-22"><span class="lno">22</span></span>
<span id="line-S-33116-23"><span class="lno">23</span></span>
<span id="line-S-33116-24"><span class="lno">24</span></span>
<span id="line-S-33116-25">25</span>
<span id="line-S-33116-26"><span class="lno">26</span></span>
<span id="line-S-33116-27"><span class="lno">27</span></span>
<span id="line-S-33116-28"><span class="lno">28</span></span>
<span id="line-S-33116-29"><span class="lno">29</span></span>
<span id="line-S-33116-30">30</span>
<span id="line-S-33116-31"><span class="lno">31</span></span>
<span id="line-S-33116-32"><span class="lno">32</span></span>
<span id="line-S-33116-33"><span class="lno">33</span></span>
<span id="line-S-33116-34"><span class="lno">34</span></span>
<span id="line-S-33116-35">35</span>
<span id="line-S-33116-36"><span class="lno">36</span></span>
<span id="line-S-33116-37"><span class="lno">37</span></span>
<span id="line-S-33116-38"><span class="lno">38</span></span>
<span id="line-S-33116-39"><span class="lno">39</span></span>
<span id="line-S-33116-40">40</span>
<span id="line-S-33116-41"><span class="lno">41</span></span>
<span id="line-S-33116-42"><span class="lno">42</span></span>
<span id="line-S-33116-43"><span class="lno">43</span></span>
<span id="line-S-33116-44"><span class="lno">44</span></span>
<span id="line-S-33116-45">45</span>
<span id="line-S-33116-46"><span class="lno">46</span></span>
<span id="line-S-33116-47"><span class="lno">47</span></span>
<span id="line-S-33116-48"><span class="lno">48</span></span>
<span id="line-S-33116-49"><span class="lno">49</span></span>
<span id="line-S-33116-50">50</span>
<span id="line-S-33116-51"><span class="lno">51</span></span>
<span id="line-S-33116-52"><span class="lno">52</span></span>
<span id="line-S-33116-53"><span class="lno">53</span></span>
<span id="line-S-33116-54"><span class="lno">54</span></span>
<span id="line-S-33116-55">55</span>
<span id="line-S-33116-56"><span class="lno">56</span></span>
<span id="line-S-33116-57"><span class="lno">57</span></span>
<span id="line-S-33116-58"><span class="lno">58</span></span>
<span id="line-S-33116-59"><span class="lno">59</span></span>
<span id="line-S-33116-60">60</span>
<span id="line-S-33116-61"><span class="lno">61</span></span>
<span id="line-S-33116-62"><span class="lno">62</span></span>
<span id="line-S-33116-63"><span class="lno">63</span></span>
<span id="line-S-33116-64"><span class="lno">64</span></span>
<span id="line-S-33116-65">65</span>
<span id="line-S-33116-66"><span class="lno">66</span></span>
<span id="line-S-33116-67"><span class="lno">67</span></span>
<span id="line-S-33116-68"><span class="lno">68</span></span>
<span id="line-S-33116-69"><span class="lno">69</span></span>
<span id="line-S-33116-70">70</span>
<span id="line-S-33116-71"><span class="lno">71</span></span>
<span id="line-S-33116-72"><span class="lno">72</span></span>
<span id="line-S-33116-73"><span class="lno">73</span></span>
<span id="line-S-33116-74"><span class="lno">74</span></span>
<span id="line-S-33116-75">75</span>
<span id="line-S-33116-76"><span class="lno">76</span></span>
<span id="line-S-33116-77"><span class="lno">77</span></span>
<span id="line-S-33116-78"><span class="lno">78</span></span>
<span id="line-S-33116-79"><span class="lno">79</span></span>
<span id="line-S-33116-80">80</span>
<span id="line-S-33116-81"><span class="lno">81</span></span>
<span id="line-S-33116-82"><span class="lno">82</span></span>
<span id="line-S-33116-83"><span class="lno">83</span></span>
<span id="line-S-33116-84"><span class="lno">84</span></span>
<span id="line-S-33116-85">85</span>
<span id="line-S-33116-86"><span class="lno">86</span></span>
<span id="line-S-33116-87"><span class="lno">87</span></span>
<span id="line-S-33116-88"><span class="lno">88</span></span>
<span id="line-S-33116-89"><span class="lno">89</span></span>
<span id="line-S-33116-90">90</span>
<span id="line-S-33116-91"><span class="lno">91</span></span>
<span id="line-S-33116-92"><span class="lno">92</span></span>
<span id="line-S-33116-93"><span class="lno">93</span></span>
<span id="line-S-33116-94"><span class="lno">94</span></span>
<span id="line-S-33116-95">95</span>
<span id="line-S-33116-96"><span class="lno">96</span></span>
<span id="line-S-33116-97"><span class="lno">97</span></span>
<span id="line-S-33116-98"><span class="lno">98</span></span>
<span id="line-S-33116-99"><span class="lno">99</span></span>
<span id="line-S-33116-100">100</span>
<span id="line-S-33116-101"><span class="lno">101</span></span>
<span id="line-S-33116-102"><span class="lno">102</span></span>
<span id="line-S-33116-103"><span class="lno">103</span></span>
<span id="line-S-33116-104"><span class="lno">104</span></span>
<span id="line-S-33116-105">105</span>
<span id="line-S-33116-106"><span class="lno">106</span></span>
<span id="line-S-33116-107"><span class="lno">107</span></span>
<span id="line-S-33116-108"><span class="lno">108</span></span>
<span id="line-S-33116-109"><span class="lno">109</span></span>
<span id="line-S-33116-110">110</span>
<span id="line-S-33116-111"><span class="lno">111</span></span>
<span id="line-S-33116-112"><span class="lno">112</span></span>
<span id="line-S-33116-113"><span class="lno">113</span></span>
<span id="line-S-33116-114"><span class="lno">114</span></span>
<span id="line-S-33116-115">115</span>
<span id="line-S-33116-116"><span class="lno">116</span></span>
<span id="line-S-33116-117"><span class="lno">117</span></span>
<span id="line-S-33116-118"><span class="lno">118</span></span>
<span id="line-S-33116-119"><span class="lno">119</span></span>
<span id="line-S-33116-120">120</span>
<span id="line-S-33116-121"><span class="lno">121</span></span>
<span id="line-S-33116-122"><span class="lno">122</span></span>
<span id="line-S-33116-123"><span class="lno">123</span></span>
<span id="line-S-33116-124"><span class="lno">124</span></span>
<span id="line-S-33116-125">125</span>
<span id="line-S-33116-126"><span class="lno">126</span></span>
<span id="line-S-33116-127"><span class="lno">127</span></span>
<span id="line-S-33116-128"><span class="lno">128</span></span>
<span id="line-S-33116-129"><span class="lno">129</span></span>
<span id="line-S-33116-130">130</span>
<span id="line-S-33116-131"><span class="lno">131</span></span>
<span id="line-S-33116-132"><span class="lno">132</span></span>
<span id="line-S-33116-133"><span class="lno">133</span></span>
<span id="line-S-33116-134"><span class="lno">134</span></span>
<span id="line-S-33116-135">135</span>
<span id="line-S-33116-136"><span class="lno">136</span></span>
<span id="line-S-33116-137"><span class="lno">137</span></span>
<span id="line-S-33116-138"><span class="lno">138</span></span>
<span id="line-S-33116-139"><span class="lno">139</span></span>
<span id="line-S-33116-140">140</span>
<span id="line-S-33116-141"><span class="lno">141</span></span>
<span id="line-S-33116-142"><span class="lno">142</span></span>
<span id="line-S-33116-143"><span class="lno">143</span></span>
<span id="line-S-33116-144"><span class="lno">144</span></span>
<span id="line-S-33116-145">145</span>
<span id="line-S-33116-146"><span class="lno">146</span></span>
<span id="line-S-33116-147"><span class="lno">147</span></span>
<span id="line-S-33116-148"><span class="lno">148</span></span>
<span id="line-S-33116-149"><span class="lno">149</span></span>
<span id="line-S-33116-150">150</span>
<span id="line-S-33116-151"><span class="lno">151</span></span>
<span id="line-S-33116-152"><span class="lno">152</span></span>
<span id="line-S-33116-153"><span class="lno">153</span></span>
<span id="line-S-33116-154"><span class="lno">154</span></span>
<span id="line-S-33116-155">155</span>
<span id="line-S-33116-156"><span class="lno">156</span></span>
<span id="line-S-33116-157"><span class="lno">157</span></span>
<span id="line-S-33116-158"><span class="lno">158</span></span>
<span id="line-S-33116-159"><span class="lno">159</span></span>
<span id="line-S-33116-160">160</span>
<span id="line-S-33116-161"><span class="lno">161</span></span>
<span id="line-S-33116-162"><span class="lno">162</span></span>
<span id="line-S-33116-163"><span class="lno">163</span></span>
<span id="line-S-33116-164"><span class="lno">164</span></span>
<span id="line-S-33116-165">165</span>
<span id="line-S-33116-166"><span class="lno">166</span></span>
<span id="line-S-33116-167"><span class="lno">167</span></span>
<span id="line-S-33116-168"><span class="lno">168</span></span>
<span id="line-S-33116-169"><span class="lno">169</span></span>
<span id="line-S-33116-170">170</span>
<span id="line-S-33116-171"><span class="lno">171</span></span>
<span id="line-S-33116-172"><span class="lno">172</span></span>
<span id="line-S-33116-173"><span class="lno">173</span></span>
<span id="line-S-33116-174"><span class="lno">174</span></span>
<span id="line-S-33116-175">175</span>
<span id="line-S-33116-176"><span class="lno">176</span></span>
<span id="line-S-33116-177"><span class="lno">177</span></span>
<span id="line-S-33116-178"><span class="lno">178</span></span>
<span id="line-S-33116-179"><span class="lno">179</span></span>
<span id="line-S-33116-180">180</span>
<span id="line-S-33116-181"><span class="lno">181</span></span>
<span id="line-S-33116-182"><span class="lno">182</span></span>
<span id="line-S-33116-183"><span class="lno">183</span></span>
<span id="line-S-33116-184"><span class="lno">184</span></span>
<span id="line-S-33116-185">185</span>
<span id="line-S-33116-186"><span class="lno">186</span></span>
<span id="line-S-33116-187"><span class="lno">187</span></span>
<span id="line-S-33116-188"><span class="lno">188</span></span>
<span id="line-S-33116-189"><span class="lno">189</span></span>
<span id="line-S-33116-190">190</span>
<span id="line-S-33116-191"><span class="lno">191</span></span>
<span id="line-S-33116-192"><span class="lno">192</span></span>
<span id="line-S-33116-193"><span class="lno">193</span></span>
<span id="line-S-33116-194"><span class="lno">194</span></span>
<span id="line-S-33116-195">195</span>
<span id="line-S-33116-196"><span class="lno">196</span></span>
<span id="line-S-33116-197"><span class="lno">197</span></span>
<span id="line-S-33116-198"><span class="lno">198</span></span>
<span id="line-S-33116-199"><span class="lno">199</span></span>
<span id="line-S-33116-200">200</span>
<span id="line-S-33116-201"><span class="lno">201</span></span>
<span id="line-S-33116-202"><span class="lno">202</span></span>
<span id="line-S-33116-203"><span class="lno">203</span></span>
<span id="line-S-33116-204"><span class="lno">204</span></span>
<span id="line-S-33116-205">205</span>
<span id="line-S-33116-206"><span class="lno">206</span></span>
<span id="line-S-33116-207"><span class="lno">207</span></span>
<span id="line-S-33116-208"><span class="lno">208</span></span>
<span id="line-S-33116-209"><span class="lno">209</span></span>
<span id="line-S-33116-210">210</span>
<span id="line-S-33116-211"><span class="lno">211</span></span>
<span id="line-S-33116-212"><span class="lno">212</span></span>
<span id="line-S-33116-213"><span class="lno">213</span></span>
<span id="line-S-33116-214"><span class="lno">214</span></span>
<span id="line-S-33116-215">215</span>
<span id="line-S-33116-216"><span class="lno">216</span></span>
<span id="line-S-33116-217"><span class="lno">217</span></span>
<span id="line-S-33116-218"><span class="lno">218</span></span>
<span id="line-S-33116-219"><span class="lno">219</span></span>
<span id="line-S-33116-220">220</span>
<span id="line-S-33116-221"><span class="lno">221</span></span>
<span id="line-S-33116-222"><span class="lno">222</span></span>
<span id="line-S-33116-223"><span class="lno">223</span></span>
<span id="line-S-33116-224"><span class="lno">224</span></span>
<span id="line-S-33116-225">225</span>
<span id="line-S-33116-226"><span class="lno">226</span></span>
<span id="line-S-33116-227"><span class="lno">227</span></span>
<span id="line-S-33116-228"><span class="lno">228</span></span>
<span id="line-S-33116-229"><span class="lno">229</span></span>
<span id="line-S-33116-230">230</span>
<span id="line-S-33116-231"><span class="lno">231</span></span>
<span id="line-S-33116-232"><span class="lno">232</span></span>
<span id="line-S-33116-233"><span class="lno">233</span></span>
<span id="line-S-33116-234"><span class="lno">234</span></span>
<span id="line-S-33116-235">235</span>
<span id="line-S-33116-236"><span class="lno">236</span></span>
<span id="line-S-33116-237"><span class="lno">237</span></span>
<span id="line-S-33116-238"><span class="lno">238</span></span>
<span id="line-S-33116-239"><span class="lno">239</span></span>
<span id="line-S-33116-240">240</span>
<span id="line-S-33116-241"><span class="lno">241</span></span>
<span id="line-S-33116-242"><span class="lno">242</span></span>
<span id="line-S-33116-243"><span class="lno">243</span></span>
<span id="line-S-33116-244"><span class="lno">244</span></span>
<span id="line-S-33116-245">245</span>
<span id="line-S-33116-246"><span class="lno">246</span></span>
<span id="line-S-33116-247"><span class="lno">247</span></span>
<span id="line-S-33116-248"><span class="lno">248</span></span>
<span id="line-S-33116-249"><span class="lno">249</span></span>
<span id="line-S-33116-250">250</span>
<span id="line-S-33116-251"><span class="lno">251</span></span>
<span id="line-S-33116-252"><span class="lno">252</span></span>
<span id="line-S-33116-253"><span class="lno">253</span></span>
<span id="line-S-33116-254"><span class="lno">254</span></span>
<span id="line-S-33116-255">255</span>
<span id="line-S-33116-256"><span class="lno">256</span></span>
<span id="line-S-33116-257"><span class="lno">257</span></span>
<span id="line-S-33116-258"><span class="lno">258</span></span>
<span id="line-S-33116-259"><span class="lno">259</span></span>
<span id="line-S-33116-260">260</span>
<span id="line-S-33116-261"><span class="lno">261</span></span>
<span id="line-S-33116-262"><span class="lno">262</span></span>
<span id="line-S-33116-263"><span class="lno">263</span></span>
<span id="line-S-33116-264"><span class="lno">264</span></span>
<span id="line-S-33116-265">265</span>
<span id="line-S-33116-266"><span class="lno">266</span></span>
<span id="line-S-33116-267"><span class="lno">267</span></span>
<span id="line-S-33116-268"><span class="lno">268</span></span>
<span id="line-S-33116-269"><span class="lno">269</span></span>
<span id="line-S-33116-270">270</span>
<span id="line-S-33116-271"><span class="lno">271</span></span>
<span id="line-S-33116-272"><span class="lno">272</span></span>
<span id="line-S-33116-273"><span class="lno">273</span></span>
<span id="line-S-33116-274"><span class="lno">274</span></span>
<span id="line-S-33116-275">275</span>
<span id="line-S-33116-276"><span class="lno">276</span></span>
<span id="line-S-33116-277"><span class="lno">277</span></span>
<span id="line-S-33116-278"><span class="lno">278</span></span>
<span id="line-S-33116-279"><span class="lno">279</span></span>
<span id="line-S-33116-280">280</span>
<span id="line-S-33116-281"><span class="lno">281</span></span>
<span id="line-S-33116-282"><span class="lno">282</span></span>
<span id="line-S-33116-283"><span class="lno">283</span></span>
<span id="line-S-33116-284"><span class="lno">284</span></span>
<span id="line-S-33116-285">285</span>
<span id="line-S-33116-286"><span class="lno">286</span></span>
<span id="line-S-33116-287"><span class="lno">287</span></span>
<span id="line-S-33116-288"><span class="lno">288</span></span>
<span id="line-S-33116-289"><span class="lno">289</span></span>
<span id="line-S-33116-290">290</span>
<span id="line-S-33116-291"><span class="lno">291</span></span>
<span id="line-S-33116-292"><span class="lno">292</span></span>
<span id="line-S-33116-293"><span class="lno">293</span></span>
<span id="line-S-33116-294"><span class="lno">294</span></span>
<span id="line-S-33116-295">295</span>
<span id="line-S-33116-296"><span class="lno">296</span></span>
<span id="line-S-33116-297"><span class="lno">297</span></span>
<span id="line-S-33116-298"><span class="lno">298</span></span>
<span id="line-S-33116-299"><span class="lno">299</span></span>
<span id="line-S-33116-300">300</span>
<span id="line-S-33116-301"><span class="lno">301</span></span>
<span id="line-S-33116-302"><span class="lno">302</span></span>
<span id="line-S-33116-303"><span class="lno">303</span></span>
<span id="line-S-33116-304"><span class="lno">304</span></span>
<span id="line-S-33116-305">305</span>
<span id="line-S-33116-306"><span class="lno">306</span></span>
<span id="line-S-33116-307"><span class="lno">307</span></span>
<span id="line-S-33116-308"><span class="lno">308</span></span>
<span id="line-S-33116-309"><span class="lno">309</span></span>
<span id="line-S-33116-310">310</span>
<span id="line-S-33116-311"><span class="lno">311</span></span>
<span id="line-S-33116-312"><span class="lno">312</span></span>
<span id="line-S-33116-313"><span class="lno">313</span></span>
<span id="line-S-33116-314"><span class="lno">314</span></span>
<span id="line-S-33116-315">315</span>
<span id="line-S-33116-316"><span class="lno">316</span></span>
<span id="line-S-33116-317"><span class="lno">317</span></span>
<span id="line-S-33116-318"><span class="lno">318</span></span>
<span id="line-S-33116-319"><span class="lno">319</span></span>
<span id="line-S-33116-320">320</span>
<span id="line-S-33116-321"><span class="lno">321</span></span>
<span id="line-S-33116-322"><span class="lno">322</span></span>
<span id="line-S-33116-323"><span class="lno">323</span></span>
<span id="line-S-33116-324"><span class="lno">324</span></span>
<span id="line-S-33116-325">325</span>
<span id="line-S-33116-326"><span class="lno">326</span></span>
<span id="line-S-33116-327"><span class="lno">327</span></span>
<span id="line-S-33116-328"><span class="lno">328</span></span>
<span id="line-S-33116-329"><span class="lno">329</span></span>
<span id="line-S-33116-330">330</span>
<span id="line-S-33116-331"><span class="lno">331</span></span>
<span id="line-S-33116-332"><span class="lno">332</span></span>
<span id="line-S-33116-333"><span class="lno">333</span></span>
<span id="line-S-33116-334"><span class="lno">334</span></span>
<span id="line-S-33116-335">335</span>
<span id="line-S-33116-336"><span class="lno">336</span></span>
<span id="line-S-33116-337"><span class="lno">337</span></span>
<span id="line-S-33116-338"><span class="lno">338</span></span>
<span id="line-S-33116-339"><span class="lno">339</span></span>
<span id="line-S-33116-340">340</span>
<span id="line-S-33116-341"><span class="lno">341</span></span>
<span id="line-S-33116-342"><span class="lno">342</span></span>
<span id="line-S-33116-343"><span class="lno">343</span></span>
<span id="line-S-33116-344"><span class="lno">344</span></span>
<span id="line-S-33116-345">345</span>
<span id="line-S-33116-346"><span class="lno">346</span></span>
<span id="line-S-33116-347"><span class="lno">347</span></span>
<span id="line-S-33116-348"><span class="lno">348</span></span>
<span id="line-S-33116-349"><span class="lno">349</span></span>
<span id="line-S-33116-350">350</span>
<span id="line-S-33116-351"><span class="lno">351</span></span>
<span id="line-S-33116-352"><span class="lno">352</span></span>
<span id="line-S-33116-353"><span class="lno">353</span></span>
<span id="line-S-33116-354"><span class="lno">354</span></span>
<span id="line-S-33116-355">355</span>
<span id="line-S-33116-356"><span class="lno">356</span></span>
<span id="line-S-33116-357"><span class="lno">357</span></span>
<span id="line-S-33116-358"><span class="lno">358</span></span>
<span id="line-S-33116-359"><span class="lno">359</span></span>
<span id="line-S-33116-360">360</span>
<span id="line-S-33116-361"><span class="lno">361</span></span>
<span id="line-S-33116-362"><span class="lno">362</span></span>
<span id="line-S-33116-363"><span class="lno">363</span></span>
<span id="line-S-33116-364"><span class="lno">364</span></span>
<span id="line-S-33116-365">365</span>
<span id="line-S-33116-366"><span class="lno">366</span></span>
<span id="line-S-33116-367"><span class="lno">367</span></span>
<span id="line-S-33116-368"><span class="lno">368</span></span>
<span id="line-S-33116-369"><span class="lno">369</span></span>
<span id="line-S-33116-370">370</span>
<span id="line-S-33116-371"><span class="lno">371</span></span>
<span id="line-S-33116-372"><span class="lno">372</span></span>
<span id="line-S-33116-373"><span class="lno">373</span></span>
<span id="line-S-33116-374"><span class="lno">374</span></span>
<span id="line-S-33116-375">375</span>
<span id="line-S-33116-376"><span class="lno">376</span></span>
<span id="line-S-33116-377"><span class="lno">377</span></span>
<span id="line-S-33116-378"><span class="lno">378</span></span>
<span id="line-S-33116-379"><span class="lno">379</span></span>
<span id="line-S-33116-380">380</span>
<span id="line-S-33116-381"><span class="lno">381</span></span>
<span id="line-S-33116-382"><span class="lno">382</span></span>
<span id="line-S-33116-383"><span class="lno">383</span></span>
<span id="line-S-33116-384"><span class="lno">384</span></span>
<span id="line-S-33116-385">385</span>
<span id="line-S-33116-386"><span class="lno">386</span></span>
<span id="line-S-33116-387"><span class="lno">387</span></span>
<span id="line-S-33116-388"><span class="lno">388</span></span>
<span id="line-S-33116-389"><span class="lno">389</span></span>
<span id="line-S-33116-390">390</span>
<span id="line-S-33116-391"><span class="lno">391</span></span>
<span id="line-S-33116-392"><span class="lno">392</span></span>
<span id="line-S-33116-393"><span class="lno">393</span></span>
<span id="line-S-33116-394"><span class="lno">394</span></span>
<span id="line-S-33116-395">395</span>
<span id="line-S-33116-396"><span class="lno">396</span></span>
<span id="line-S-33116-397"><span class="lno">397</span></span>
<span id="line-S-33116-398"><span class="lno">398</span></span>
<span id="line-S-33116-399"><span class="lno">399</span></span>
<span id="line-S-33116-400">400</span>
<span id="line-S-33116-401"><span class="lno">401</span></span>
<span id="line-S-33116-402"><span class="lno">402</span></span>
<span id="line-S-33116-403"><span class="lno">403</span></span>
<span id="line-S-33116-404"><span class="lno">404</span></span>
<span id="line-S-33116-405">405</span>
<span id="line-S-33116-406"><span class="lno">406</span></span>
<span id="line-S-33116-407"><span class="lno">407</span></span>
<span id="line-S-33116-408"><span class="lno">408</span></span>
<span id="line-S-33116-409"><span class="lno">409</span></span>
<span id="line-S-33116-410">410</span>
<span id="line-S-33116-411"><span class="lno">411</span></span>
<span id="line-S-33116-412"><span class="lno">412</span></span>
<span id="line-S-33116-413"><span class="lno">413</span></span>
<span id="line-S-33116-414"><span class="lno">414</span></span>
<span id="line-S-33116-415">415</span>
<span id="line-S-33116-416"><span class="lno">416</span></span>
<span id="line-S-33116-417"><span class="lno">417</span></span>
<span id="line-S-33116-418"><span class="lno">418</span></span>
<span id="line-S-33116-419"><span class="lno">419</span></span>
<span id="line-S-33116-420">420</span>
<span id="line-S-33116-421"><span class="lno">421</span></span>
<span id="line-S-33116-422"><span class="lno">422</span></span>
<span id="line-S-33116-423"><span class="lno">423</span></span>
<span id="line-S-33116-424"><span class="lno">424</span></span>
<span id="line-S-33116-425">425</span>
<span id="line-S-33116-426"><span class="lno">426</span></span>
<span id="line-S-33116-427"><span class="lno">427</span></span>
<span id="line-S-33116-428"><span class="lno">428</span></span>
<span id="line-S-33116-429"><span class="lno">429</span></span>
<span id="line-S-33116-430">430</span>
<span id="line-S-33116-431"><span class="lno">431</span></span>
<span id="line-S-33116-432"><span class="lno">432</span></span>
<span id="line-S-33116-433"><span class="lno">433</span></span>
<span id="line-S-33116-434"><span class="lno">434</span></span>
<span id="line-S-33116-435">435</span>
<span id="line-S-33116-436"><span class="lno">436</span></span>
<span id="line-S-33116-437"><span class="lno">437</span></span>
<span id="line-S-33116-438"><span class="lno">438</span></span>
<span id="line-S-33116-439"><span class="lno">439</span></span>
<span id="line-S-33116-440">440</span>
<span id="line-S-33116-441"><span class="lno">441</span></span>
<span id="line-S-33116-442"><span class="lno">442</span></span>
<span id="line-S-33116-443"><span class="lno">443</span></span>
<span id="line-S-33116-444"><span class="lno">444</span></span>
<span id="line-S-33116-445">445</span>
<span id="line-S-33116-446"><span class="lno">446</span></span>
<span id="line-S-33116-447"><span class="lno">447</span></span>
<span id="line-S-33116-448"><span class="lno">448</span></span>
<span id="line-S-33116-449"><span class="lno">449</span></span>
<span id="line-S-33116-450">450</span>
<span id="line-S-33116-451"><span class="lno">451</span></span>
<span id="line-S-33116-452"><span class="lno">452</span></span>
<span id="line-S-33116-453"><span class="lno">453</span></span>
<span id="line-S-33116-454"><span class="lno">454</span></span>
<span id="line-S-33116-455">455</span>
<span id="line-S-33116-456"><span class="lno">456</span></span>
<span id="line-S-33116-457"><span class="lno">457</span></span>
<span id="line-S-33116-458"><span class="lno">458</span></span>
<span id="line-S-33116-459"><span class="lno">459</span></span>
<span id="line-S-33116-460">460</span>
<span id="line-S-33116-461"><span class="lno">461</span></span>
<span id="line-S-33116-462"><span class="lno">462</span></span>
<span id="line-S-33116-463"><span class="lno">463</span></span>
<span id="line-S-33116-464"><span class="lno">464</span></span>
<span id="line-S-33116-465">465</span>
<span id="line-S-33116-466"><span class="lno">466</span></span>
<span id="line-S-33116-467"><span class="lno">467</span></span>
<span id="line-S-33116-468"><span class="lno">468</span></span>
<span id="line-S-33116-469"><span class="lno">469</span></span>
<span id="line-S-33116-470">470</span>
<span id="line-S-33116-471"><span class="lno">471</span></span>
<span id="line-S-33116-472"><span class="lno">472</span></span>
<span id="line-S-33116-473"><span class="lno">473</span></span>
<span id="line-S-33116-474"><span class="lno">474</span></span>
<span id="line-S-33116-475">475</span>
<span id="line-S-33116-476"><span class="lno">476</span></span>
<span id="line-S-33116-477"><span class="lno">477</span></span>
<span id="line-S-33116-478"><span class="lno">478</span></span>
<span id="line-S-33116-479"><span class="lno">479</span></span>
<span id="line-S-33116-480">480</span>
<span id="line-S-33116-481"><span class="lno">481</span></span>
<span id="line-S-33116-482"><span class="lno">482</span></span>
<span id="line-S-33116-483"><span class="lno">483</span></span>
<span id="line-S-33116-484"><span class="lno">484</span></span>
<span id="line-S-33116-485">485</span>
<span id="line-S-33116-486"><span class="lno">486</span></span>
<span id="line-S-33116-487"><span class="lno">487</span></span>
<span id="line-S-33116-488"><span class="lno">488</span></span>
<span id="line-S-33116-489"><span class="lno">489</span></span>
<span id="line-S-33116-490">490</span>
<span id="line-S-33116-491"><span class="lno">491</span></span>
<span id="line-S-33116-492"><span class="lno">492</span></span>
<span id="line-S-33116-493"><span class="lno">493</span></span>
<span id="line-S-33116-494"><span class="lno">494</span></span>
<span id="line-S-33116-495">495</span>
<span id="line-S-33116-496"><span class="lno">496</span></span>
<span id="line-S-33116-497"><span class="lno">497</span></span>
<span id="line-S-33116-498"><span class="lno">498</span></span>
<span id="line-S-33116-499"><span class="lno">499</span></span>
<span id="line-S-33116-500">500</span>
<span id="line-S-33116-501"><span class="lno">501</span></span>
<span id="line-S-33116-502"><span class="lno">502</span></span>
<span id="line-S-33116-503"><span class="lno">503</span></span>
<span id="line-S-33116-504"><span class="lno">504</span></span>
<span id="line-S-33116-505">505</span>
<span id="line-S-33116-506"><span class="lno">506</span></span>
<span id="line-S-33116-507"><span class="lno">507</span></span>
<span id="line-S-33116-508"><span class="lno">508</span></span>
<span id="line-S-33116-509"><span class="lno">509</span></span>
<span id="line-S-33116-510">510</span>
<span id="line-S-33116-511"><span class="lno">511</span></span>
<span id="line-S-33116-512"><span class="lno">512</span></span>
<span id="line-S-33116-513"><span class="lno">513</span></span>
<span id="line-S-33116-514"><span class="lno">514</span></span>
<span id="line-S-33116-515">515</span>
<span id="line-S-33116-516"><span class="lno">516</span></span>
<span id="line-S-33116-517"><span class="lno">517</span></span>
<span id="line-S-33116-518"><span class="lno">518</span></span>
<span id="line-S-33116-519"><span class="lno">519</span></span>
<span id="line-S-33116-520">520</span>
<span id="line-S-33116-521"><span class="lno">521</span></span>
<span id="line-S-33116-522"><span class="lno">522</span></span>
<span id="line-S-33116-523"><span class="lno">523</span></span>
<span id="line-S-33116-524"><span class="lno">524</span></span>
<span id="line-S-33116-525">525</span>
<span id="line-S-33116-526"><span class="lno">526</span></span>
<span id="line-S-33116-527"><span class="lno">527</span></span>
<span id="line-S-33116-528"><span class="lno">528</span></span>
<span id="line-S-33116-529"><span class="lno">529</span></span>
<span id="line-S-33116-530">530</span>
<span id="line-S-33116-531"><span class="lno">531</span></span>
<span id="line-S-33116-532"><span class="lno">532</span></span>
<span id="line-S-33116-533"><span class="lno">533</span></span>
<span id="line-S-33116-534"><span class="lno">534</span></span>
<span id="line-S-33116-535">535</span>
<span id="line-S-33116-536"><span class="lno">536</span></span>
<span id="line-S-33116-537"><span class="lno">537</span></span>
<span id="line-S-33116-538"><span class="lno">538</span></span>
<span id="line-S-33116-539"><span class="lno">539</span></span>
<span id="line-S-33116-540">540</span>
<span id="line-S-33116-541"><span class="lno">541</span></span>
<span id="line-S-33116-542"><span class="lno">542</span></span>
<span id="line-S-33116-543"><span class="lno">543</span></span>
<span id="line-S-33116-544"><span class="lno">544</span></span>
<span id="line-S-33116-545">545</span>
<span id="line-S-33116-546"><span class="lno">546</span></span>
<span id="line-S-33116-547"><span class="lno">547</span></span>
<span id="line-S-33116-548"><span class="lno">548</span></span>
<span id="line-S-33116-549"><span class="lno">549</span></span>
<span id="line-S-33116-550">550</span>
<span id="line-S-33116-551"><span class="lno">551</span></span>
<span id="line-S-33116-552"><span class="lno">552</span></span>
<span id="line-S-33116-553"><span class="lno">553</span></span>
<span id="line-S-33116-554"><span class="lno">554</span></span>
<span id="line-S-33116-555">555</span>
<span id="line-S-33116-556"><span class="lno">556</span></span>
<span id="line-S-33116-557"><span class="lno">557</span></span>
<span id="line-S-33116-558"><span class="lno">558</span></span>
<span id="line-S-33116-559"><span class="lno">559</span></span>
<span id="line-S-33116-560">560</span>
<span id="line-S-33116-561"><span class="lno">561</span></span>
<span id="line-S-33116-562"><span class="lno">562</span></span>
<span id="line-S-33116-563"><span class="lno">563</span></span>
<span id="line-S-33116-564"><span class="lno">564</span></span>
<span id="line-S-33116-565">565</span>
<span id="line-S-33116-566"><span class="lno">566</span></span>
<span id="line-S-33116-567"><span class="lno">567</span></span>
<span id="line-S-33116-568"><span class="lno">568</span></span>
<span id="line-S-33116-569"><span class="lno">569</span></span>
<span id="line-S-33116-570">570</span>
<span id="line-S-33116-571"><span class="lno">571</span></span>
<span id="line-S-33116-572"><span class="lno">572</span></span>
<span id="line-S-33116-573"><span class="lno">573</span></span>
<span id="line-S-33116-574"><span class="lno">574</span></span>
<span id="line-S-33116-575">575</span>
<span id="line-S-33116-576"><span class="lno">576</span></span>
<span id="line-S-33116-577"><span class="lno">577</span></span>
<span id="line-S-33116-578"><span class="lno">578</span></span>
<span id="line-S-33116-579"><span class="lno">579</span></span>
<span id="line-S-33116-580">580</span>
<span id="line-S-33116-581"><span class="lno">581</span></span>
<span id="line-S-33116-582"><span class="lno">582</span></span>
<span id="line-S-33116-583"><span class="lno">583</span></span>
<span id="line-S-33116-584"><span class="lno">584</span></span>
<span id="line-S-33116-585">585</span>
<span id="line-S-33116-586"><span class="lno">586</span></span>
<span id="line-S-33116-587"><span class="lno">587</span></span>
<span id="line-S-33116-588"><span class="lno">588</span></span>
<span id="line-S-33116-589"><span class="lno">589</span></span>
<span id="line-S-33116-590">590</span>
<span id="line-S-33116-591"><span class="lno">591</span></span>
<span id="line-S-33116-592"><span class="lno">592</span></span>
<span id="line-S-33116-593"><span class="lno">593</span></span>
<span id="line-S-33116-594"><span class="lno">594</span></span>
<span id="line-S-33116-595">595</span>
<span id="line-S-33116-596"><span class="lno">596</span></span>
<span id="line-S-33116-597"><span class="lno">597</span></span>
<span id="line-S-33116-598"><span class="lno">598</span></span>
<span id="line-S-33116-599"><span class="lno">599</span></span>
<span id="line-S-33116-600">600</span>
<span id="line-S-33116-601"><span class="lno">601</span></span>
<span id="line-S-33116-602"><span class="lno">602</span></span>
<span id="line-S-33116-603"><span class="lno">603</span></span>
<span id="line-S-33116-604"><span class="lno">604</span></span>
<span id="line-S-33116-605">605</span>
<span id="line-S-33116-606"><span class="lno">606</span></span>
<span id="line-S-33116-607"><span class="lno">607</span></span>
<span id="line-S-33116-608"><span class="lno">608</span></span>
<span id="line-S-33116-609"><span class="lno">609</span></span>
<span id="line-S-33116-610">610</span>
<span id="line-S-33116-611"><span class="lno">611</span></span>
<span id="line-S-33116-612"><span class="lno">612</span></span>
<span id="line-S-33116-613"><span class="lno">613</span></span>
<span id="line-S-33116-614"><span class="lno">614</span></span>
<span id="line-S-33116-615">615</span>
<span id="line-S-33116-616"><span class="lno">616</span></span>
<span id="line-S-33116-617"><span class="lno">617</span></span>
</pre></td><td valign="top"><pre><code class="language-xml">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                xmlns:db="http://docbook.org/ns/docbook"
                xmlns:dbe="http://docbook.org/ns/docbook/errors"
                xmlns:f="http://docbook.org/ns/docbook/functions"
                xmlns:fp="http://docbook.org/ns/docbook/functions/private"
                xmlns:m="http://docbook.org/ns/docbook/modes"
                xmlns:t="http://docbook.org/ns/docbook/templates"
                xmlns:tp="http://docbook.org/ns/docbook/templates/private"
                xmlns:vp="http://docbook.org/ns/docbook/variables/private"
                xmlns:xs="http://www.w3.org/2001/XMLSchema"
                xmlns="http://www.w3.org/1999/xhtml"
                default-mode="m:docbook"
                exclude-result-prefixes="db dbe f fp m t tp vp xs"
                version="3.0"&gt;

&lt;xsl:template match="db:itemizedlist"&gt;
  &lt;xsl:variable name="compact" as="xs:boolean"
                select="@spacing = 'compact'
                        and count(db:listitem/db:para) = count(db:listitem)
                        and empty(db:listitem/*[not(self::db:para)])"/&gt;

  &lt;xsl:choose&gt;
    &lt;xsl:when test="empty(db:info/*)
                    and empty(* except (db:info|db:listitem|db:annotation))"&gt;
      &lt;ul&gt;
        &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
        &lt;xsl:if test="@mark"&gt;
          &lt;xsl:attribute name="db-mark" select="@mark"/&gt;
        &lt;/xsl:if&gt;
        &lt;xsl:apply-templates select="node()"&gt;
          &lt;xsl:with-param name="compact" select="$compact"/&gt;
        &lt;/xsl:apply-templates&gt;
      &lt;/ul&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;div&gt;
        &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
        &lt;xsl:apply-templates select="." mode="m:generate-titlepage"/&gt;
        &lt;xsl:apply-templates select="* except db:listitem"/&gt;
        &lt;ul&gt;
          &lt;xsl:if test="@mark"&gt;
            &lt;xsl:attribute name="db-mark" select="@mark"/&gt;
          &lt;/xsl:if&gt;
          &lt;xsl:apply-templates select="db:listitem"&gt;
            &lt;xsl:with-param name="compact" select="$compact"/&gt;
          &lt;/xsl:apply-templates&gt;
        &lt;/ul&gt;
      &lt;/div&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:orderedlist"&gt;
  &lt;xsl:variable name="compact" as="xs:boolean"
                select="@spacing = 'compact'
                        and count(db:listitem/db:para) = count(db:listitem)
                        and empty(db:listitem/*[not(self::db:para)])"/&gt;

  &lt;xsl:choose&gt;
    &lt;xsl:when test="empty(db:info/*)
                    and empty(* except (db:info|db:listitem|db:annotation))"&gt;
      &lt;ol&gt;
        &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
        &lt;xsl:call-template name="tp:orderedlist-properties"/&gt;
        &lt;xsl:apply-templates select="node()"&gt;
          &lt;xsl:with-param name="compact" select="$compact"/&gt;
        &lt;/xsl:apply-templates&gt;
      &lt;/ol&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;div&gt;
        &lt;xsl:apply-templates select="." mode="m:attributes"&gt;
          &lt;xsl:with-param name="exclude-classes"
                          select="if (@inheritnum = 'inherit')
                                  then 'inheritnum'
                                  else ()"/&gt;
        &lt;/xsl:apply-templates&gt;
        &lt;xsl:apply-templates select="." mode="m:generate-titlepage"/&gt;
        &lt;xsl:apply-templates select="* except db:listitem"/&gt;
        &lt;ol&gt;
          &lt;xsl:if test="@inheritnum = 'inherit'"&gt;
            &lt;xsl:attribute name="class" select="'inheritnum'"/&gt;
          &lt;/xsl:if&gt;
          &lt;xsl:call-template name="tp:orderedlist-properties"/&gt;
          &lt;xsl:apply-templates select="db:listitem"&gt;
            &lt;xsl:with-param name="compact" select="$compact"/&gt;
          &lt;/xsl:apply-templates&gt;
        &lt;/ol&gt;
      &lt;/div&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:template&gt;

&lt;xsl:template name="tp:orderedlist-properties"&gt;
  &lt;xsl:if test="@startingnumber"&gt;
    &lt;xsl:attribute name="start" select="@startingnumber"/&gt;
  &lt;/xsl:if&gt;
  &lt;xsl:if test="@continuation='continues'"&gt;
    &lt;xsl:attribute name="start" select="f:orderedlist-startingnumber(.)"/&gt;
  &lt;/xsl:if&gt;
  &lt;xsl:choose&gt;
    &lt;xsl:when test="empty(@numeration)"&gt;
      &lt;xsl:attribute name="type"
                     select="f:orderedlist-item-numeration(db:listitem[1])"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="@numeration='arabic'"&gt;
      &lt;xsl:attribute name="type" select="'1'"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="@numeration='upperalpha'"&gt;
      &lt;xsl:attribute name="type" select="'A'"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="@numeration='loweralpha'"&gt;
      &lt;xsl:attribute name="type" select="'a'"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="@numeration='upperroman'"&gt;
      &lt;xsl:attribute name="type" select="'I'"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="@numeration='lowerroman'"&gt;
      &lt;xsl:attribute name="type" select="'i'"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:message&gt;Ignoring unexpected numeration: {@numeration}&lt;/xsl:message&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;

  &lt;xsl:if test="@inheritnum and not(@inheritnum = ('ignore', 'inherit'))"&gt;
    &lt;xsl:message&gt;Ignoring unexpected inheritnum: {@inheritnum}&lt;/xsl:message&gt;
  &lt;/xsl:if&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:listitem"&gt;
  &lt;xsl:param name="compact" as="xs:boolean" select="false()"/&gt;

  &lt;xsl:variable name="gi" select="if (parent::db:varlistentry)
                                  then 'dd'
                                  else 'li'"/&gt;

  &lt;xsl:element name="{$gi}" namespace="http://www.w3.org/1999/xhtml"&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
    &lt;xsl:if test="@override"&gt;
      &lt;xsl:choose&gt;
        &lt;xsl:when test="parent::db:orderedlist"&gt;
          &lt;xsl:attribute name="value" select="@override"/&gt;
        &lt;/xsl:when&gt;
        &lt;xsl:otherwise&gt;
          &lt;xsl:attribute name="db-mark" select="@override"/&gt;
        &lt;/xsl:otherwise&gt;
      &lt;/xsl:choose&gt;
    &lt;/xsl:if&gt;
    &lt;xsl:choose&gt;
      &lt;xsl:when test="$compact and count(*) = 1 and db:para"&gt;
        &lt;xsl:apply-templates select="db:para/node()"/&gt;
      &lt;/xsl:when&gt;
      &lt;xsl:otherwise&gt;
        &lt;xsl:apply-templates/&gt;
      &lt;/xsl:otherwise&gt;
    &lt;/xsl:choose&gt;
  &lt;/xsl:element&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:simplelist[@type='inline']"&gt;
  &lt;span&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
    &lt;xsl:for-each select="db:member"&gt;
      &lt;xsl:if test="position() gt 1"&gt;, &lt;/xsl:if&gt;
      &lt;xsl:apply-templates select="."/&gt;
    &lt;/xsl:for-each&gt;
  &lt;/span&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:simplelist"&gt;
  &lt;xsl:variable name="cols" as="xs:integer"&gt;
    &lt;xsl:choose&gt;
      &lt;xsl:when test="not(@columns)"&gt;
        &lt;xsl:sequence select="1"/&gt;
      &lt;/xsl:when&gt;
      &lt;xsl:when test="@columns castable as xs:integer"&gt;
        &lt;xsl:sequence select="@columns cast as xs:integer"/&gt;
      &lt;/xsl:when&gt;
      &lt;xsl:otherwise&gt;
        &lt;xsl:message&gt;Treating non-numeric columns ({@columns}) as 1&lt;/xsl:message&gt;
        &lt;xsl:sequence select="1"/&gt;
      &lt;/xsl:otherwise&gt;
    &lt;/xsl:choose&gt;
  &lt;/xsl:variable&gt;

  &lt;xsl:choose&gt;
    &lt;xsl:when test="@type = 'horiz'"&gt;
      &lt;div&gt;
        &lt;xsl:apply-templates select="." mode="m:attributes"&gt;
          &lt;xsl:with-param name="extra-classes" select="'simplelisthoriz'"/&gt;
        &lt;/xsl:apply-templates&gt;
        &lt;xsl:for-each select="db:member"&gt;
          &lt;xsl:if test="$cols eq 1 or position() mod $cols = 1"&gt;
            &lt;xsl:variable name="member" select="."/&gt;
            &lt;xsl:variable name="row" as="element(db:member)+"&gt;
              &lt;xsl:sequence select="$member"/&gt;
              &lt;xsl:if test="$cols gt 1"&gt;
                &lt;xsl:sequence select="$member/following-sibling::db:member
                                      [position() lt $cols]"/&gt;
              &lt;/xsl:if&gt;
            &lt;/xsl:variable&gt;
            &lt;div class="row"&gt;
              &lt;xsl:apply-templates select="$row"/&gt;
            &lt;/div&gt;
          &lt;/xsl:if&gt;
        &lt;/xsl:for-each&gt;
      &lt;/div&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;div&gt;
        &lt;xsl:apply-templates select="." mode="m:attributes"&gt;
          &lt;xsl:with-param name="extra-classes" select="'simplelistvert'"/&gt;
        &lt;/xsl:apply-templates&gt;

        &lt;xsl:choose&gt;
          &lt;xsl:when test="$cols = 1"&gt;
            &lt;!-- special case a single column... --&gt;
            &lt;xsl:for-each select="db:member"&gt;
              &lt;div class="row"&gt;
                &lt;xsl:apply-templates select="."/&gt;
              &lt;/div&gt;
            &lt;/xsl:for-each&gt;
          &lt;/xsl:when&gt;
          &lt;xsl:otherwise&gt;
            &lt;xsl:variable name="rows" select="(count(db:member) + $cols - 1) idiv $cols"/&gt;
            &lt;xsl:for-each select="subsequence(db:member, 1, $rows)"&gt;
              &lt;div class="row"&gt;
                &lt;xsl:apply-templates select="fp:select-vert-members(., $rows)"/&gt;
              &lt;/div&gt;
            &lt;/xsl:for-each&gt;
          &lt;/xsl:otherwise&gt;
        &lt;/xsl:choose&gt;
      &lt;/div&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:template&gt;

&lt;!-- 
  A B C D E =&gt; A D
               B E
               C
--&gt;

&lt;xsl:function name="fp:select-vert-members" as="element(db:member)*"&gt;
  &lt;xsl:param name="member" as="element(db:member)?"/&gt;
  &lt;xsl:param name="rows" as="xs:integer"/&gt;

  &lt;xsl:variable name="next"
                select="$member/following-sibling::*[position() eq $rows]"/&gt;

  &lt;xsl:sequence select="$member"/&gt;
  &lt;xsl:if test="$next"&gt;
    &lt;xsl:sequence select="fp:select-vert-members($next, $rows)"/&gt;
  &lt;/xsl:if&gt;
&lt;/xsl:function&gt;

&lt;xsl:template match="db:member"&gt;
  &lt;span&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
    &lt;xsl:apply-templates/&gt;
  &lt;/span&gt;
&lt;/xsl:template&gt;

&lt;!-- ============================================================ --&gt;

&lt;xsl:template match="db:variablelist"&gt;
  &lt;xsl:variable name="compact" as="xs:boolean"
                select="@spacing = 'compact'
                        and count(db:varlistentry/db:listitem/db:para)
                            = count(db:varlistentry/db:listitem)
                        and empty(db:varlistentry/db:listitem/*[not(self::db:para)])"/&gt;
  &lt;xsl:variable name="term-length"
                select="if (@termlength)
                        then @termlength/string()
                        else max((db:varlistentry ! fp:estimated-term-length(.)))"/&gt;

  &lt;xsl:choose&gt;
    &lt;xsl:when test="empty(db:info/*)
                    and empty(* except (db:info|db:varlistentry|db:annotation))"&gt;
      &lt;dl&gt;
        &lt;xsl:apply-templates select="." mode="m:attributes"&gt;
          &lt;xsl:with-param name="term-length" select="$term-length"/&gt;
        &lt;/xsl:apply-templates&gt;
        &lt;xsl:apply-templates select="node()"&gt;
          &lt;xsl:with-param name="compact" select="$compact"/&gt;
        &lt;/xsl:apply-templates&gt;
      &lt;/dl&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;div&gt;
        &lt;xsl:apply-templates select="." mode="m:attributes"&gt;
          &lt;xsl:with-param name="term-length" select="$term-length"/&gt;
        &lt;/xsl:apply-templates&gt;
        &lt;xsl:apply-templates select="." mode="m:generate-titlepage"/&gt;
        &lt;xsl:apply-templates select="* except db:varlistentry"/&gt;
        &lt;dl&gt;
          &lt;!-- repeat the class and other attributes for convenience --&gt;
          &lt;xsl:apply-templates select="." mode="m:attributes"&gt;
            &lt;xsl:with-param name="term-length" select="$term-length"/&gt;
            &lt;xsl:with-param name="exclude-id" select="true()"/&gt;
          &lt;/xsl:apply-templates&gt;
          &lt;xsl:apply-templates select="db:varlistentry"&gt;
            &lt;xsl:with-param name="compact" select="$compact"/&gt;
          &lt;/xsl:apply-templates&gt;
        &lt;/dl&gt;
      &lt;/div&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:template&gt;

&lt;xsl:variable name="vp:term"
              select="QName('http://docbook.org/ns/docbook', 'term')"/&gt;

&lt;xsl:template match="db:varlistentry"&gt;
  &lt;xsl:param name="compact" as="xs:boolean" select="false()"/&gt;
  &lt;dt&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
    &lt;xsl:apply-templates select="db:term[1]"/&gt;
    &lt;xsl:choose&gt;
      &lt;xsl:when test="count(db:term) = 1"/&gt;
      &lt;xsl:when test="count(db:term) = 2"&gt;
        &lt;xsl:apply-templates select="db:term[2]"&gt;
          &lt;xsl:with-param name="sep"
                          select="f:gentext(db:term[2], 'separator', 'term-sep2')"/&gt;
        &lt;/xsl:apply-templates&gt;
      &lt;/xsl:when&gt;
      &lt;xsl:otherwise&gt;
        &lt;xsl:apply-templates select="db:term[position() gt 1 and position() lt last()]"&gt;
          &lt;xsl:with-param name="sep"
                          select="f:gentext(db:term[2], 'separator', 'term-sep')"/&gt;
        &lt;/xsl:apply-templates&gt;
        &lt;xsl:apply-templates select="db:term[last()]"&gt;
          &lt;xsl:with-param name="sep"
                          select="f:gentext(db:term[2], 'separator', 'term-seplast')"/&gt;
        &lt;/xsl:apply-templates&gt;
      &lt;/xsl:otherwise&gt;
    &lt;/xsl:choose&gt;
  &lt;/dt&gt;

  &lt;xsl:apply-templates select="db:listitem"&gt;
    &lt;xsl:with-param name="compact" select="$compact"/&gt;
  &lt;/xsl:apply-templates&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:term"&gt;
  &lt;xsl:param name="sep" as="item()*" select="()"/&gt;
  &lt;xsl:if test="exists($sep) and preceding-sibling::db:term"&gt;
    &lt;xsl:sequence select="$sep"/&gt;
  &lt;/xsl:if&gt;
  &lt;span&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
    &lt;xsl:apply-templates/&gt;
  &lt;/span&gt;
&lt;/xsl:template&gt;

&lt;xsl:function name="fp:estimated-term-length"&gt;
  &lt;xsl:param name="entry" as="element(db:varlistentry)"/&gt;
  &lt;xsl:value-of select="sum(($entry/db:term ! string-length(string(.))))"/&gt;
&lt;/xsl:function&gt;

&lt;!-- ============================================================ --&gt;

&lt;xsl:template match="db:segmentedlist"&gt;
  &lt;xsl:variable name="presentation"
                select="f:pi(., 'segmentedlist-style', $segmentedlist-style)"/&gt;

  &lt;div&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
    &lt;xsl:apply-templates select="." mode="m:generate-titlepage"/&gt;

    &lt;xsl:choose&gt;
      &lt;xsl:when test="$presentation = 'table'"&gt;
        &lt;xsl:apply-templates select="." mode="m:seglist-table"/&gt;
      &lt;/xsl:when&gt;
      &lt;xsl:when test="$presentation = 'list'"&gt;
        &lt;xsl:apply-templates/&gt;
      &lt;/xsl:when&gt;
      &lt;xsl:otherwise&gt;
        &lt;xsl:message select="'Unrecognized segementedlist-style:', $presentation"/&gt;
        &lt;xsl:apply-templates/&gt;
      &lt;/xsl:otherwise&gt;
    &lt;/xsl:choose&gt;
  &lt;/div&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:segtitle"/&gt;

&lt;xsl:template match="db:segtitle" mode="m:segtitle-in-seg"&gt;
  &lt;xsl:apply-templates/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:seglistitem"&gt;
  &lt;div&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
    &lt;xsl:apply-templates/&gt;
  &lt;/div&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:seg"&gt;
  &lt;xsl:variable name="segnum" select="count(preceding-sibling::db:seg)+1"/&gt;
  &lt;xsl:variable name="seglist" select="ancestor::db:segmentedlist"/&gt;
  &lt;xsl:variable name="segtitles" select="$seglist/db:segtitle"/&gt;

  &lt;!--
     Note: segtitle is only going to be the right thing in a well formed
     SegmentedList.  If there are too many Segs or too few SegTitles,
     you'll get something odd...maybe an error
  --&gt;

  &lt;div&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
    &lt;strong&gt;
      &lt;span class="segtitle"&gt;
        &lt;xsl:apply-templates select="$segtitles[$segnum=position()]"
                             mode="m:segtitle-in-seg"/&gt;
        &lt;xsl:text&gt;: &lt;/xsl:text&gt;
      &lt;/span&gt;
    &lt;/strong&gt;
    &lt;xsl:apply-templates/&gt;
  &lt;/div&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:segmentedlist" mode="m:seglist-table"&gt;
  &lt;xsl:variable name="table-summary"
                select="f:pi(., 'table-summary')"/&gt;

  &lt;table&gt;
    &lt;xsl:if test="$table-summary != ''"&gt;
      &lt;xsl:attribute name="summary"&gt;
        &lt;xsl:value-of select="$table-summary"/&gt;
      &lt;/xsl:attribute&gt;
    &lt;/xsl:if&gt;
    &lt;thead class="segtitles"&gt;
      &lt;tr&gt;
        &lt;xsl:apply-templates select="db:segtitle" mode="m:seglist-table"/&gt;
      &lt;/tr&gt;
    &lt;/thead&gt;
    &lt;tbody&gt;
      &lt;xsl:apply-templates select="db:seglistitem" mode="m:seglist-table"/&gt;
    &lt;/tbody&gt;
  &lt;/table&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:segtitle" mode="m:seglist-table"&gt;
  &lt;th&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
    &lt;xsl:apply-templates/&gt;
  &lt;/th&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:seglistitem" mode="m:seglist-table"&gt;
  &lt;xsl:variable name="seglinum"&gt;
    &lt;xsl:number from="db:segmentedlist" count="db:seglistitem"/&gt;
  &lt;/xsl:variable&gt;

  &lt;tr&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
    &lt;xsl:apply-templates mode="m:seglist-table"/&gt;
  &lt;/tr&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:seg" mode="m:seglist-table"&gt;
  &lt;td&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
    &lt;xsl:apply-templates/&gt;
  &lt;/td&gt;
&lt;/xsl:template&gt;

&lt;!-- ============================================================ --&gt;

&lt;xsl:template match="db:calloutlist"&gt;
  &lt;div&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
    &lt;xsl:apply-templates select="." mode="m:generate-titlepage"/&gt;
    &lt;xsl:apply-templates select="* except db:callout"/&gt;
    &lt;dl&gt;
      &lt;xsl:apply-templates select="db:callout"/&gt;
    &lt;/dl&gt;
  &lt;/div&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:callout"&gt;
  &lt;xsl:variable name="context" select="."/&gt;
  &lt;dt&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
    &lt;xsl:for-each select="tokenize(normalize-space(@arearefs), '\s+')"&gt;
      &lt;xsl:variable name="id" select="."/&gt;
      &lt;xsl:variable name="area" select="key('id', $id, root($context))"/&gt;
      &lt;xsl:variable name="area"
                    select="if (empty($area))
                            then root($context)//*[@xml:id = $id]
                            else $area"/&gt;

      &lt;xsl:choose&gt;
        &lt;xsl:when test="$area/parent::db:areaset
                        and $area/preceding-sibling::db:area"/&gt;
        &lt;xsl:when test="$area/self::db:areaset"&gt;
          &lt;xsl:apply-templates select="$area/db:area[1]"
                               mode="m:callout-link"&gt;
            &lt;xsl:with-param name="id" select="$id"/&gt;
            &lt;xsl:with-param name="target" select="$area"/&gt;
          &lt;/xsl:apply-templates&gt;
        &lt;/xsl:when&gt;
        &lt;xsl:when test="$area/self::db:area"&gt;
          &lt;xsl:apply-templates select="$area"
                               mode="m:callout-link"&gt;
            &lt;xsl:with-param name="id" select="$id"/&gt;
            &lt;xsl:with-param name="target" select="$area"/&gt;
          &lt;/xsl:apply-templates&gt;
        &lt;/xsl:when&gt;
        &lt;xsl:when test="$area/self::db:co"&gt;
          &lt;xsl:apply-templates select="$area"
                               mode="m:callout-link"&gt;
            &lt;xsl:with-param name="id" select="$id"/&gt;
            &lt;xsl:with-param name="target" select="$area"/&gt;
          &lt;/xsl:apply-templates&gt;
        &lt;/xsl:when&gt;
        &lt;xsl:otherwise&gt;
          &lt;xsl:sequence select="error($dbe:INVALID-AREAREFS,
                                      'Invalid area in arearefs: ' || $id)"/&gt;
        &lt;/xsl:otherwise&gt;
      &lt;/xsl:choose&gt;
    &lt;/xsl:for-each&gt;
  &lt;/dt&gt;
  &lt;dd&gt;
    &lt;xsl:apply-templates/&gt;
  &lt;/dd&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="*" mode="m:callout-link"&gt;
  &lt;xsl:message select="'Error: processing ', node-name(.), ' in m:callout-link mode'"/&gt;
  &lt;span class="error"&gt;???&lt;/span&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:area|db:co" mode="m:callout-link"&gt;
  &lt;xsl:param name="id" as="xs:string"/&gt;
  &lt;xsl:param name="target" as="element()?"/&gt;
  &lt;a class="callout-bug" href="#{$id}"&gt;
    &lt;xsl:apply-templates select="." mode="m:callout-bug"&gt;
      &lt;xsl:with-param name="id" select="$id"/&gt;
    &lt;/xsl:apply-templates&gt;
  &lt;/a&gt;
&lt;/xsl:template&gt;

&lt;!-- ============================================================ --&gt;

&lt;xsl:template match="db:procedure"&gt;
  &lt;xsl:choose&gt;
    &lt;xsl:when test="empty(db:info/*)
                    and empty(* except (db:step|db:annotation))"&gt;
      &lt;ol type="1"&gt;
        &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
        &lt;xsl:apply-templates select="db:step"/&gt;
      &lt;/ol&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;div&gt;
        &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
        &lt;xsl:apply-templates select="." mode="m:generate-titlepage"/&gt;
        &lt;xsl:apply-templates select="child::* except (db:step|db:result)"/&gt;
        &lt;ol class="{local-name(.)}" type="1"&gt;
          &lt;xsl:apply-templates select="db:step"/&gt;
        &lt;/ol&gt;
        &lt;xsl:apply-templates select="db:result"/&gt;
      &lt;/div&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:step"&gt;
  &lt;li&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
    &lt;xsl:apply-templates select="." mode="m:generate-titlepage"/&gt;
    &lt;xsl:apply-templates/&gt;
  &lt;/li&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:substeps"&gt;
  &lt;div&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
    &lt;ol class="procedure {local-name(.)}"
        type="{f:step-numeration(db:step[1])}"&gt;
      &lt;xsl:apply-templates/&gt;
    &lt;/ol&gt;
  &lt;/div&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:stepalternatives"&gt;
  &lt;div&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
    &lt;ul class="procedure {local-name(.)}"&gt;
      &lt;xsl:apply-templates/&gt;
    &lt;/ul&gt;
  &lt;/div&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:result"&gt;
  &lt;div&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
    &lt;xsl:apply-templates/&gt;
  &lt;/div&gt;
&lt;/xsl:template&gt;

&lt;!-- ============================================================ --&gt;

&lt;xsl:template match="db:task|db:tasksummary|db:taskprerequisites|db:taskrelated"&gt;
  &lt;div&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
    &lt;xsl:apply-templates select="." mode="m:generate-titlepage"/&gt;
    &lt;xsl:apply-templates/&gt;
  &lt;/div&gt;
&lt;/xsl:template&gt;

&lt;/xsl:stylesheet&gt;
</code></pre></td></tr></table></div></div></div></div><div class="stylesheet" id="S-34731"><h3>blocks.xsl</h3><p><span><span class="template all">24 templates</span></span></p><div class="instructions"><div class="title closed">Instructions</div><div class="body"><div id="S-34731-t-1" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:informalequation|db:informa…</div><div class="props"><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:informalequation</code>, <code>db:informalexample</code>, <code>db:informalfigure</code></div></div></div><div id="S-34731-t-2" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:equation|db:example|db:figu…</div><div class="props"><div class="uses">Uses: <a href="#S-23412-docbook.org.ns.docbook.variables.formal-object-title-placement">$v:formal-object-title-placement</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:equation</code>, <code>db:example</code>, <code>db:figure</code>, <code>db:formalgroup</code>, <code>db:screenshot</code></div></div></div><div id="S-34731-t-3" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ math:*</div><div class="props"><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>math:*</code></div></div></div><div id="S-34731-t-4" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:para|db:simpara</div><div class="props"><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:para</code>, <code>db:simpara</code></div></div></div><div id="S-34731-t-5" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:formalpara</div><div class="props"><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:formalpara</code></div></div></div><div id="S-34731-t-6" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:blockquote|db:epigraph</div><div class="props"><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:blockquote</code>, <code>db:epigraph</code></div></div></div><div id="S-34731-t-7" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:attribution</div><div class="props"><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:attribution</code></div></div></div><div id="S-34731-t-8" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:revhistory</div><div class="props"><div class="uses">Uses: <a href="#S-26643-..revhistory-style">$revhistory-style</a></div><div class="calls">Calls: <a href="#S-28936-docbook.org.ns.docbook.functions.pi,3">f:pi()</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:revhistory</code></div></div></div><div id="S-34731-t-9" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:revision</div><div class="props"><div class="mode">Mode: <code>m:revhistory-list</code></div><div class="matches">Matches: <code>db:revision</code></div></div></div><div id="S-34731-t-10" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:revision</div><div class="props"><div class="mode">Mode: <code>m:revhistory-table</code></div><div class="matches">Matches: <code>db:revision</code></div></div></div><div id="S-34731-t-11" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:revdescription</div><div class="props"><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:revdescription</code></div></div></div><div id="S-34731-t-12" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:revremark</div><div class="props"><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:revremark</code></div></div></div><div id="S-34731-t-13" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:sidebar</div><div class="props"><div class="uses">Uses: <a href="#S-26643-..sidebar-as-aside">$sidebar-as-aside</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:sidebar</code></div></div></div><div id="S-34731-t-14" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:qandaset</div><div class="props"><div class="uses">Uses: <a href="#S-26643-..qandaset-default-toc">$qandaset-default-toc</a></div><div class="calls">Calls: <a href="#S-28936-docbook.org.ns.docbook.functions.is-true,1">f:is-true()</a>, <a href="#S-28936-docbook.org.ns.docbook.functions.pi-attributes,1">f:pi-attributes()</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:qandaset</code></div></div></div><div id="S-34731-t-15" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:qandadiv</div><div class="props"><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:qandadiv</code></div></div></div><div id="S-34731-t-16" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:qandaentry</div><div class="props"><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:qandaentry</code></div></div></div><div id="S-34731-t-17" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:question</div><div class="props"><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:question</code></div></div></div><div id="S-34731-t-18" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:answer</div><div class="props"><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:answer</code></div></div></div><div id="S-34731-t-19" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:qandaset</div><div class="props"><div class="mode">Mode: <code>m:toc</code></div><div class="matches">Matches: <code>db:qandaset</code></div></div></div><div id="S-34731-t-20" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:qandadiv</div><div class="props"><div class="uses">Uses: <a href="#S-26643-..qandadiv-default-toc">$qandadiv-default-toc</a></div><div class="calls">Calls: <a href="#S-28936-docbook.org.ns.docbook.functions.id,1">f:id()</a>, <a href="#S-28936-docbook.org.ns.docbook.functions.is-true,1">f:is-true()</a>, <a href="#S-28936-docbook.org.ns.docbook.functions.pi,2">f:pi()</a></div><div class="mode">Mode: <code>m:toc</code></div><div class="matches">Matches: <code>db:qandadiv</code></div></div></div><div id="S-34731-t-21" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:qandaentry</div><div class="props"><div class="calls">Calls: <a href="#S-28936-docbook.org.ns.docbook.functions.id,1">f:id()</a></div><div class="mode">Mode: <code>m:toc</code></div><div class="matches">Matches: <code>db:qandaentry</code></div></div></div><div id="S-34731-t-22" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:question</div><div class="props"><div class="mode">Mode: <code>m:toc</code></div><div class="matches">Matches: <code>db:question</code></div></div></div><div id="S-34731-t-23" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:label</div><div class="props"><div class="calls">Calls: <a href="#S-9504-docbook.org.ns.docbook.templates.inline">t:inline</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:label</code></div></div></div><div id="S-34731-t-24" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:remark</div><div class="props"><div class="uses">Uses: <a href="#S-26643-..show-remarks">$show-remarks</a></div><div class="calls">Calls: <a href="#S-28936-docbook.org.ns.docbook.functions.is-true,1">f:is-true()</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:remark</code></div></div></div></div></div><div class="source-code"><div class="title closed">Source code</div><div class="body"><div><table><tr><td valign="top" align="right"><pre class="fake-prism"><span id="line-S-34731-1">1</span>
<span id="line-S-34731-2"><span class="lno">2</span></span>
<span id="line-S-34731-3"><span class="lno">3</span></span>
<span id="line-S-34731-4"><span class="lno">4</span></span>
<span id="line-S-34731-5">5</span>
<span id="line-S-34731-6"><span class="lno">6</span></span>
<span id="line-S-34731-7"><span class="lno">7</span></span>
<span id="line-S-34731-8"><span class="lno">8</span></span>
<span id="line-S-34731-9"><span class="lno">9</span></span>
<span id="line-S-34731-10">10</span>
<span id="line-S-34731-11"><span class="lno">11</span></span>
<span id="line-S-34731-12"><span class="lno">12</span></span>
<span id="line-S-34731-13"><span class="lno">13</span></span>
<span id="line-S-34731-14"><span class="lno">14</span></span>
<span id="line-S-34731-15">15</span>
<span id="line-S-34731-16"><span class="lno">16</span></span>
<span id="line-S-34731-17"><span class="lno">17</span></span>
<span id="line-S-34731-18"><span class="lno">18</span></span>
<span id="line-S-34731-19"><span class="lno">19</span></span>
<span id="line-S-34731-20">20</span>
<span id="line-S-34731-21"><span class="lno">21</span></span>
<span id="line-S-34731-22"><span class="lno">22</span></span>
<span id="line-S-34731-23"><span class="lno">23</span></span>
<span id="line-S-34731-24"><span class="lno">24</span></span>
<span id="line-S-34731-25">25</span>
<span id="line-S-34731-26"><span class="lno">26</span></span>
<span id="line-S-34731-27"><span class="lno">27</span></span>
<span id="line-S-34731-28"><span class="lno">28</span></span>
<span id="line-S-34731-29"><span class="lno">29</span></span>
<span id="line-S-34731-30">30</span>
<span id="line-S-34731-31"><span class="lno">31</span></span>
<span id="line-S-34731-32"><span class="lno">32</span></span>
<span id="line-S-34731-33"><span class="lno">33</span></span>
<span id="line-S-34731-34"><span class="lno">34</span></span>
<span id="line-S-34731-35">35</span>
<span id="line-S-34731-36"><span class="lno">36</span></span>
<span id="line-S-34731-37"><span class="lno">37</span></span>
<span id="line-S-34731-38"><span class="lno">38</span></span>
<span id="line-S-34731-39"><span class="lno">39</span></span>
<span id="line-S-34731-40">40</span>
<span id="line-S-34731-41"><span class="lno">41</span></span>
<span id="line-S-34731-42"><span class="lno">42</span></span>
<span id="line-S-34731-43"><span class="lno">43</span></span>
<span id="line-S-34731-44"><span class="lno">44</span></span>
<span id="line-S-34731-45">45</span>
<span id="line-S-34731-46"><span class="lno">46</span></span>
<span id="line-S-34731-47"><span class="lno">47</span></span>
<span id="line-S-34731-48"><span class="lno">48</span></span>
<span id="line-S-34731-49"><span class="lno">49</span></span>
<span id="line-S-34731-50">50</span>
<span id="line-S-34731-51"><span class="lno">51</span></span>
<span id="line-S-34731-52"><span class="lno">52</span></span>
<span id="line-S-34731-53"><span class="lno">53</span></span>
<span id="line-S-34731-54"><span class="lno">54</span></span>
<span id="line-S-34731-55">55</span>
<span id="line-S-34731-56"><span class="lno">56</span></span>
<span id="line-S-34731-57"><span class="lno">57</span></span>
<span id="line-S-34731-58"><span class="lno">58</span></span>
<span id="line-S-34731-59"><span class="lno">59</span></span>
<span id="line-S-34731-60">60</span>
<span id="line-S-34731-61"><span class="lno">61</span></span>
<span id="line-S-34731-62"><span class="lno">62</span></span>
<span id="line-S-34731-63"><span class="lno">63</span></span>
<span id="line-S-34731-64"><span class="lno">64</span></span>
<span id="line-S-34731-65">65</span>
<span id="line-S-34731-66"><span class="lno">66</span></span>
<span id="line-S-34731-67"><span class="lno">67</span></span>
<span id="line-S-34731-68"><span class="lno">68</span></span>
<span id="line-S-34731-69"><span class="lno">69</span></span>
<span id="line-S-34731-70">70</span>
<span id="line-S-34731-71"><span class="lno">71</span></span>
<span id="line-S-34731-72"><span class="lno">72</span></span>
<span id="line-S-34731-73"><span class="lno">73</span></span>
<span id="line-S-34731-74"><span class="lno">74</span></span>
<span id="line-S-34731-75">75</span>
<span id="line-S-34731-76"><span class="lno">76</span></span>
<span id="line-S-34731-77"><span class="lno">77</span></span>
<span id="line-S-34731-78"><span class="lno">78</span></span>
<span id="line-S-34731-79"><span class="lno">79</span></span>
<span id="line-S-34731-80">80</span>
<span id="line-S-34731-81"><span class="lno">81</span></span>
<span id="line-S-34731-82"><span class="lno">82</span></span>
<span id="line-S-34731-83"><span class="lno">83</span></span>
<span id="line-S-34731-84"><span class="lno">84</span></span>
<span id="line-S-34731-85">85</span>
<span id="line-S-34731-86"><span class="lno">86</span></span>
<span id="line-S-34731-87"><span class="lno">87</span></span>
<span id="line-S-34731-88"><span class="lno">88</span></span>
<span id="line-S-34731-89"><span class="lno">89</span></span>
<span id="line-S-34731-90">90</span>
<span id="line-S-34731-91"><span class="lno">91</span></span>
<span id="line-S-34731-92"><span class="lno">92</span></span>
<span id="line-S-34731-93"><span class="lno">93</span></span>
<span id="line-S-34731-94"><span class="lno">94</span></span>
<span id="line-S-34731-95">95</span>
<span id="line-S-34731-96"><span class="lno">96</span></span>
<span id="line-S-34731-97"><span class="lno">97</span></span>
<span id="line-S-34731-98"><span class="lno">98</span></span>
<span id="line-S-34731-99"><span class="lno">99</span></span>
<span id="line-S-34731-100">100</span>
<span id="line-S-34731-101"><span class="lno">101</span></span>
<span id="line-S-34731-102"><span class="lno">102</span></span>
<span id="line-S-34731-103"><span class="lno">103</span></span>
<span id="line-S-34731-104"><span class="lno">104</span></span>
<span id="line-S-34731-105">105</span>
<span id="line-S-34731-106"><span class="lno">106</span></span>
<span id="line-S-34731-107"><span class="lno">107</span></span>
<span id="line-S-34731-108"><span class="lno">108</span></span>
<span id="line-S-34731-109"><span class="lno">109</span></span>
<span id="line-S-34731-110">110</span>
<span id="line-S-34731-111"><span class="lno">111</span></span>
<span id="line-S-34731-112"><span class="lno">112</span></span>
<span id="line-S-34731-113"><span class="lno">113</span></span>
<span id="line-S-34731-114"><span class="lno">114</span></span>
<span id="line-S-34731-115">115</span>
<span id="line-S-34731-116"><span class="lno">116</span></span>
<span id="line-S-34731-117"><span class="lno">117</span></span>
<span id="line-S-34731-118"><span class="lno">118</span></span>
<span id="line-S-34731-119"><span class="lno">119</span></span>
<span id="line-S-34731-120">120</span>
<span id="line-S-34731-121"><span class="lno">121</span></span>
<span id="line-S-34731-122"><span class="lno">122</span></span>
<span id="line-S-34731-123"><span class="lno">123</span></span>
<span id="line-S-34731-124"><span class="lno">124</span></span>
<span id="line-S-34731-125">125</span>
<span id="line-S-34731-126"><span class="lno">126</span></span>
<span id="line-S-34731-127"><span class="lno">127</span></span>
<span id="line-S-34731-128"><span class="lno">128</span></span>
<span id="line-S-34731-129"><span class="lno">129</span></span>
<span id="line-S-34731-130">130</span>
<span id="line-S-34731-131"><span class="lno">131</span></span>
<span id="line-S-34731-132"><span class="lno">132</span></span>
<span id="line-S-34731-133"><span class="lno">133</span></span>
<span id="line-S-34731-134"><span class="lno">134</span></span>
<span id="line-S-34731-135">135</span>
<span id="line-S-34731-136"><span class="lno">136</span></span>
<span id="line-S-34731-137"><span class="lno">137</span></span>
<span id="line-S-34731-138"><span class="lno">138</span></span>
<span id="line-S-34731-139"><span class="lno">139</span></span>
<span id="line-S-34731-140">140</span>
<span id="line-S-34731-141"><span class="lno">141</span></span>
<span id="line-S-34731-142"><span class="lno">142</span></span>
<span id="line-S-34731-143"><span class="lno">143</span></span>
<span id="line-S-34731-144"><span class="lno">144</span></span>
<span id="line-S-34731-145">145</span>
<span id="line-S-34731-146"><span class="lno">146</span></span>
<span id="line-S-34731-147"><span class="lno">147</span></span>
<span id="line-S-34731-148"><span class="lno">148</span></span>
<span id="line-S-34731-149"><span class="lno">149</span></span>
<span id="line-S-34731-150">150</span>
<span id="line-S-34731-151"><span class="lno">151</span></span>
<span id="line-S-34731-152"><span class="lno">152</span></span>
<span id="line-S-34731-153"><span class="lno">153</span></span>
<span id="line-S-34731-154"><span class="lno">154</span></span>
<span id="line-S-34731-155">155</span>
<span id="line-S-34731-156"><span class="lno">156</span></span>
<span id="line-S-34731-157"><span class="lno">157</span></span>
<span id="line-S-34731-158"><span class="lno">158</span></span>
<span id="line-S-34731-159"><span class="lno">159</span></span>
<span id="line-S-34731-160">160</span>
<span id="line-S-34731-161"><span class="lno">161</span></span>
<span id="line-S-34731-162"><span class="lno">162</span></span>
<span id="line-S-34731-163"><span class="lno">163</span></span>
<span id="line-S-34731-164"><span class="lno">164</span></span>
<span id="line-S-34731-165">165</span>
<span id="line-S-34731-166"><span class="lno">166</span></span>
<span id="line-S-34731-167"><span class="lno">167</span></span>
<span id="line-S-34731-168"><span class="lno">168</span></span>
<span id="line-S-34731-169"><span class="lno">169</span></span>
<span id="line-S-34731-170">170</span>
<span id="line-S-34731-171"><span class="lno">171</span></span>
<span id="line-S-34731-172"><span class="lno">172</span></span>
<span id="line-S-34731-173"><span class="lno">173</span></span>
<span id="line-S-34731-174"><span class="lno">174</span></span>
<span id="line-S-34731-175">175</span>
<span id="line-S-34731-176"><span class="lno">176</span></span>
<span id="line-S-34731-177"><span class="lno">177</span></span>
<span id="line-S-34731-178"><span class="lno">178</span></span>
<span id="line-S-34731-179"><span class="lno">179</span></span>
<span id="line-S-34731-180">180</span>
<span id="line-S-34731-181"><span class="lno">181</span></span>
<span id="line-S-34731-182"><span class="lno">182</span></span>
<span id="line-S-34731-183"><span class="lno">183</span></span>
<span id="line-S-34731-184"><span class="lno">184</span></span>
<span id="line-S-34731-185">185</span>
<span id="line-S-34731-186"><span class="lno">186</span></span>
<span id="line-S-34731-187"><span class="lno">187</span></span>
<span id="line-S-34731-188"><span class="lno">188</span></span>
<span id="line-S-34731-189"><span class="lno">189</span></span>
<span id="line-S-34731-190">190</span>
<span id="line-S-34731-191"><span class="lno">191</span></span>
<span id="line-S-34731-192"><span class="lno">192</span></span>
<span id="line-S-34731-193"><span class="lno">193</span></span>
<span id="line-S-34731-194"><span class="lno">194</span></span>
<span id="line-S-34731-195">195</span>
<span id="line-S-34731-196"><span class="lno">196</span></span>
<span id="line-S-34731-197"><span class="lno">197</span></span>
<span id="line-S-34731-198"><span class="lno">198</span></span>
<span id="line-S-34731-199"><span class="lno">199</span></span>
<span id="line-S-34731-200">200</span>
<span id="line-S-34731-201"><span class="lno">201</span></span>
<span id="line-S-34731-202"><span class="lno">202</span></span>
<span id="line-S-34731-203"><span class="lno">203</span></span>
<span id="line-S-34731-204"><span class="lno">204</span></span>
<span id="line-S-34731-205">205</span>
<span id="line-S-34731-206"><span class="lno">206</span></span>
<span id="line-S-34731-207"><span class="lno">207</span></span>
<span id="line-S-34731-208"><span class="lno">208</span></span>
<span id="line-S-34731-209"><span class="lno">209</span></span>
<span id="line-S-34731-210">210</span>
<span id="line-S-34731-211"><span class="lno">211</span></span>
<span id="line-S-34731-212"><span class="lno">212</span></span>
<span id="line-S-34731-213"><span class="lno">213</span></span>
<span id="line-S-34731-214"><span class="lno">214</span></span>
<span id="line-S-34731-215">215</span>
<span id="line-S-34731-216"><span class="lno">216</span></span>
<span id="line-S-34731-217"><span class="lno">217</span></span>
<span id="line-S-34731-218"><span class="lno">218</span></span>
<span id="line-S-34731-219"><span class="lno">219</span></span>
<span id="line-S-34731-220">220</span>
<span id="line-S-34731-221"><span class="lno">221</span></span>
<span id="line-S-34731-222"><span class="lno">222</span></span>
<span id="line-S-34731-223"><span class="lno">223</span></span>
<span id="line-S-34731-224"><span class="lno">224</span></span>
<span id="line-S-34731-225">225</span>
<span id="line-S-34731-226"><span class="lno">226</span></span>
<span id="line-S-34731-227"><span class="lno">227</span></span>
<span id="line-S-34731-228"><span class="lno">228</span></span>
<span id="line-S-34731-229"><span class="lno">229</span></span>
<span id="line-S-34731-230">230</span>
<span id="line-S-34731-231"><span class="lno">231</span></span>
<span id="line-S-34731-232"><span class="lno">232</span></span>
<span id="line-S-34731-233"><span class="lno">233</span></span>
<span id="line-S-34731-234"><span class="lno">234</span></span>
<span id="line-S-34731-235">235</span>
<span id="line-S-34731-236"><span class="lno">236</span></span>
<span id="line-S-34731-237"><span class="lno">237</span></span>
<span id="line-S-34731-238"><span class="lno">238</span></span>
<span id="line-S-34731-239"><span class="lno">239</span></span>
<span id="line-S-34731-240">240</span>
<span id="line-S-34731-241"><span class="lno">241</span></span>
<span id="line-S-34731-242"><span class="lno">242</span></span>
<span id="line-S-34731-243"><span class="lno">243</span></span>
<span id="line-S-34731-244"><span class="lno">244</span></span>
<span id="line-S-34731-245">245</span>
<span id="line-S-34731-246"><span class="lno">246</span></span>
<span id="line-S-34731-247"><span class="lno">247</span></span>
<span id="line-S-34731-248"><span class="lno">248</span></span>
<span id="line-S-34731-249"><span class="lno">249</span></span>
<span id="line-S-34731-250">250</span>
<span id="line-S-34731-251"><span class="lno">251</span></span>
<span id="line-S-34731-252"><span class="lno">252</span></span>
<span id="line-S-34731-253"><span class="lno">253</span></span>
<span id="line-S-34731-254"><span class="lno">254</span></span>
<span id="line-S-34731-255">255</span>
<span id="line-S-34731-256"><span class="lno">256</span></span>
<span id="line-S-34731-257"><span class="lno">257</span></span>
<span id="line-S-34731-258"><span class="lno">258</span></span>
<span id="line-S-34731-259"><span class="lno">259</span></span>
<span id="line-S-34731-260">260</span>
<span id="line-S-34731-261"><span class="lno">261</span></span>
<span id="line-S-34731-262"><span class="lno">262</span></span>
<span id="line-S-34731-263"><span class="lno">263</span></span>
<span id="line-S-34731-264"><span class="lno">264</span></span>
<span id="line-S-34731-265">265</span>
<span id="line-S-34731-266"><span class="lno">266</span></span>
<span id="line-S-34731-267"><span class="lno">267</span></span>
<span id="line-S-34731-268"><span class="lno">268</span></span>
<span id="line-S-34731-269"><span class="lno">269</span></span>
<span id="line-S-34731-270">270</span>
<span id="line-S-34731-271"><span class="lno">271</span></span>
<span id="line-S-34731-272"><span class="lno">272</span></span>
<span id="line-S-34731-273"><span class="lno">273</span></span>
<span id="line-S-34731-274"><span class="lno">274</span></span>
<span id="line-S-34731-275">275</span>
<span id="line-S-34731-276"><span class="lno">276</span></span>
<span id="line-S-34731-277"><span class="lno">277</span></span>
<span id="line-S-34731-278"><span class="lno">278</span></span>
<span id="line-S-34731-279"><span class="lno">279</span></span>
<span id="line-S-34731-280">280</span>
<span id="line-S-34731-281"><span class="lno">281</span></span>
<span id="line-S-34731-282"><span class="lno">282</span></span>
<span id="line-S-34731-283"><span class="lno">283</span></span>
<span id="line-S-34731-284"><span class="lno">284</span></span>
<span id="line-S-34731-285">285</span>
<span id="line-S-34731-286"><span class="lno">286</span></span>
<span id="line-S-34731-287"><span class="lno">287</span></span>
<span id="line-S-34731-288"><span class="lno">288</span></span>
<span id="line-S-34731-289"><span class="lno">289</span></span>
<span id="line-S-34731-290">290</span>
<span id="line-S-34731-291"><span class="lno">291</span></span>
<span id="line-S-34731-292"><span class="lno">292</span></span>
<span id="line-S-34731-293"><span class="lno">293</span></span>
<span id="line-S-34731-294"><span class="lno">294</span></span>
<span id="line-S-34731-295">295</span>
<span id="line-S-34731-296"><span class="lno">296</span></span>
<span id="line-S-34731-297"><span class="lno">297</span></span>
<span id="line-S-34731-298"><span class="lno">298</span></span>
<span id="line-S-34731-299"><span class="lno">299</span></span>
<span id="line-S-34731-300">300</span>
<span id="line-S-34731-301"><span class="lno">301</span></span>
<span id="line-S-34731-302"><span class="lno">302</span></span>
<span id="line-S-34731-303"><span class="lno">303</span></span>
<span id="line-S-34731-304"><span class="lno">304</span></span>
<span id="line-S-34731-305">305</span>
<span id="line-S-34731-306"><span class="lno">306</span></span>
<span id="line-S-34731-307"><span class="lno">307</span></span>
<span id="line-S-34731-308"><span class="lno">308</span></span>
<span id="line-S-34731-309"><span class="lno">309</span></span>
<span id="line-S-34731-310">310</span>
<span id="line-S-34731-311"><span class="lno">311</span></span>
<span id="line-S-34731-312"><span class="lno">312</span></span>
<span id="line-S-34731-313"><span class="lno">313</span></span>
<span id="line-S-34731-314"><span class="lno">314</span></span>
<span id="line-S-34731-315">315</span>
<span id="line-S-34731-316"><span class="lno">316</span></span>
<span id="line-S-34731-317"><span class="lno">317</span></span>
<span id="line-S-34731-318"><span class="lno">318</span></span>
<span id="line-S-34731-319"><span class="lno">319</span></span>
<span id="line-S-34731-320">320</span>
<span id="line-S-34731-321"><span class="lno">321</span></span>
<span id="line-S-34731-322"><span class="lno">322</span></span>
<span id="line-S-34731-323"><span class="lno">323</span></span>
<span id="line-S-34731-324"><span class="lno">324</span></span>
<span id="line-S-34731-325">325</span>
<span id="line-S-34731-326"><span class="lno">326</span></span>
<span id="line-S-34731-327"><span class="lno">327</span></span>
<span id="line-S-34731-328"><span class="lno">328</span></span>
<span id="line-S-34731-329"><span class="lno">329</span></span>
<span id="line-S-34731-330">330</span>
<span id="line-S-34731-331"><span class="lno">331</span></span>
<span id="line-S-34731-332"><span class="lno">332</span></span>
<span id="line-S-34731-333"><span class="lno">333</span></span>
<span id="line-S-34731-334"><span class="lno">334</span></span>
<span id="line-S-34731-335">335</span>
<span id="line-S-34731-336"><span class="lno">336</span></span>
<span id="line-S-34731-337"><span class="lno">337</span></span>
<span id="line-S-34731-338"><span class="lno">338</span></span>
<span id="line-S-34731-339"><span class="lno">339</span></span>
<span id="line-S-34731-340">340</span>
</pre></td><td valign="top"><pre><code class="language-xml">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                xmlns:db="http://docbook.org/ns/docbook"
                xmlns:f="http://docbook.org/ns/docbook/functions"
                xmlns:h="http://www.w3.org/1999/xhtml"
                xmlns:m="http://docbook.org/ns/docbook/modes"
                xmlns:map="http://www.w3.org/2005/xpath-functions/map"
                xmlns:math="http://www.w3.org/1998/Math/MathML"
                xmlns:t="http://docbook.org/ns/docbook/templates"
                xmlns:v="http://docbook.org/ns/docbook/variables"
                xmlns:xs="http://www.w3.org/2001/XMLSchema"
                xmlns="http://www.w3.org/1999/xhtml"
                default-mode="m:docbook"
                exclude-result-prefixes="db f h m map math t v xs"
                version="3.0"&gt;

&lt;xsl:template match="db:informalfigure|db:informalequation|db:informalexample"&gt;
  &lt;div&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
    &lt;xsl:apply-templates/&gt;
  &lt;/div&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:formalgroup
                     |db:figure|db:equation|db:example|db:screenshot"&gt;
  &lt;xsl:variable name="placement"
                select="if (map:get($v:formal-object-title-placement, local-name(.)))
                        then map:get($v:formal-object-title-placement, local-name(.))
                        else map:get($v:formal-object-title-placement, '_default')"/&gt;
  &lt;div&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
    &lt;xsl:choose&gt;
      &lt;xsl:when test="$placement = 'before'"&gt;
        &lt;xsl:apply-templates select="." mode="m:generate-titlepage"/&gt;
        &lt;xsl:apply-templates/&gt;
      &lt;/xsl:when&gt;
      &lt;xsl:otherwise&gt;
        &lt;xsl:apply-templates/&gt;
        &lt;xsl:apply-templates select="." mode="m:generate-titlepage"/&gt;
      &lt;/xsl:otherwise&gt;
    &lt;/xsl:choose&gt;
  &lt;/div&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="math:*"&gt;
  &lt;xsl:copy&gt;
    &lt;xsl:copy-of select="@*"/&gt;
    &lt;xsl:apply-templates select="node()"/&gt;
  &lt;/xsl:copy&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:para|db:simpara"&gt;
  &lt;p&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
    &lt;xsl:apply-templates/&gt;
  &lt;/p&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:formalpara"&gt;
  &lt;p&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
    &lt;xsl:apply-templates select="." mode="m:generate-titlepage"/&gt;
    &lt;span class="para"&gt;
      &lt;xsl:apply-templates select="db:para" mode="m:attributes"/&gt;
      &lt;xsl:apply-templates select="db:para/node()"/&gt;
    &lt;/span&gt;
  &lt;/p&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:blockquote|db:epigraph"&gt;
  &lt;blockquote&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
    &lt;xsl:apply-templates select="." mode="m:generate-titlepage"/&gt;
    &lt;xsl:apply-templates select="* except db:attribution"/&gt;
    &lt;xsl:apply-templates select="db:attribution"/&gt;
  &lt;/blockquote&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:attribution"&gt;
  &lt;div&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
    &lt;xsl:apply-templates/&gt;
  &lt;/div&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:revhistory"&gt;
  &lt;xsl:variable name="style"
                select="f:pi(., 'revhistory-style', $revhistory-style)"/&gt;

  &lt;div&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
    &lt;xsl:apply-templates select="." mode="m:generate-titlepage"/&gt;
    &lt;xsl:choose&gt;
      &lt;xsl:when test="$style = 'table'"&gt;
        &lt;table&gt;
          &lt;colgroup&gt;
            &lt;col class="revnumber"/&gt;
            &lt;col class="date" style="text-align: right;"/&gt;
            &lt;col class="author"/&gt;
            &lt;col class="revremark"/&gt;
          &lt;/colgroup&gt;
          &lt;tbody&gt;
            &lt;xsl:apply-templates select="db:revision" mode="m:revhistory-table"/&gt;
          &lt;/tbody&gt;
        &lt;/table&gt;
      &lt;/xsl:when&gt;
      &lt;xsl:when test="$style = 'list'"&gt;
        &lt;ul&gt;
          &lt;xsl:apply-templates select="db:revision" mode="m:revhistory-list"/&gt;
        &lt;/ul&gt;
      &lt;/xsl:when&gt;
      &lt;xsl:otherwise&gt;
        &lt;xsl:message select="'Uknown revhistory-style: ' || $style"/&gt;
        &lt;ul&gt;
          &lt;xsl:apply-templates select="db:revision" mode="m:revhistory-list"/&gt;
        &lt;/ul&gt;
      &lt;/xsl:otherwise&gt;
    &lt;/xsl:choose&gt;
  &lt;/div&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:revision" mode="m:revhistory-list"&gt;
  &lt;li&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
    &lt;xsl:if test="db:revnumber"&gt;
      &lt;xsl:apply-templates select="db:revnumber"/&gt;
      &lt;xsl:text&gt;, &lt;/xsl:text&gt;
    &lt;/xsl:if&gt;
    &lt;xsl:apply-templates select="db:date"/&gt;
    &lt;xsl:for-each select="db:author|db:authorinitials"&gt;
      &lt;xsl:text&gt;, &lt;/xsl:text&gt;
      &lt;xsl:apply-templates select="."/&gt;
    &lt;/xsl:for-each&gt;
    &lt;xsl:apply-templates select="db:revdescription|db:revremark"/&gt;
  &lt;/li&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:revision" mode="m:revhistory-table"&gt;
  &lt;tr&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
    &lt;td&gt;
      &lt;xsl:apply-templates select="db:revnumber"/&gt;
    &lt;/td&gt;
    &lt;td&gt;
      &lt;xsl:apply-templates select="db:date"/&gt;
    &lt;/td&gt;
    &lt;td&gt;
      &lt;xsl:for-each select="db:author|db:authorinitials"&gt;
        &lt;xsl:if test="position() gt 1"&gt;
          &lt;xsl:text&gt;, &lt;/xsl:text&gt;
        &lt;/xsl:if&gt;
        &lt;xsl:apply-templates select="."/&gt;
      &lt;/xsl:for-each&gt;
    &lt;/td&gt;
    &lt;td&gt;
      &lt;xsl:apply-templates select="db:revdescription|db:revremark"/&gt;
    &lt;/td&gt;
  &lt;/tr&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:revdescription"&gt;
  &lt;div&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
    &lt;xsl:apply-templates/&gt;
  &lt;/div&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:revremark"&gt;
  &lt;p&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
    &lt;xsl:apply-templates/&gt;
  &lt;/p&gt;
&lt;/xsl:template&gt;

&lt;!-- ============================================================ --&gt;

&lt;xsl:template match="db:sidebar"&gt;
  &lt;xsl:element name="{if ($sidebar-as-aside) then 'aside' else 'div'}"
               namespace="http://docbook.org/ns/docbook"&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
    &lt;xsl:apply-templates select="." mode="m:generate-titlepage"/&gt;
    &lt;xsl:apply-templates/&gt;
  &lt;/xsl:element&gt;
&lt;/xsl:template&gt;

&lt;!-- ============================================================ --&gt;

&lt;xsl:template match="db:qandaset"&gt;
  &lt;xsl:variable name="pis"
                select="f:pi-attributes(processing-instruction('db'))"/&gt;
  &lt;div&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
    &lt;xsl:apply-templates select="." mode="m:generate-titlepage"/&gt;

    &lt;xsl:if test="(exists($pis/@toc) and f:is-true($pis/@toc))
                   or (not($pis/@toc) and f:is-true($qandaset-default-toc))"&gt;
      &lt;xsl:apply-templates select="." mode="m:toc"/&gt;
    &lt;/xsl:if&gt;

    &lt;xsl:choose&gt;
      &lt;xsl:when test="db:qandadiv"&gt;
        &lt;xsl:apply-templates/&gt;
      &lt;/xsl:when&gt;
      &lt;xsl:otherwise&gt;
        &lt;div class="qandalist"&gt;
          &lt;xsl:apply-templates/&gt;
        &lt;/div&gt;
      &lt;/xsl:otherwise&gt;
    &lt;/xsl:choose&gt;
  &lt;/div&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:qandadiv"&gt;
  &lt;div&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
    &lt;xsl:apply-templates select="." mode="m:generate-titlepage"/&gt;
    &lt;xsl:choose&gt;
      &lt;xsl:when test="db:qandadiv"&gt;
        &lt;xsl:apply-templates/&gt;
      &lt;/xsl:when&gt;
      &lt;xsl:otherwise&gt;
        &lt;div class="qandalist"&gt;
          &lt;xsl:apply-templates/&gt;
        &lt;/div&gt;
      &lt;/xsl:otherwise&gt;
    &lt;/xsl:choose&gt;
  &lt;/div&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:qandaentry"&gt;
  &lt;div&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
    &lt;xsl:apply-templates select="." mode="m:generate-titlepage"/&gt;
    &lt;div class="qanda"&gt;
      &lt;xsl:apply-templates/&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:question"&gt;
  &lt;div&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
    &lt;div class="label"&gt;
      &lt;xsl:apply-templates select="." mode="m:headline-label"/&gt;
    &lt;/div&gt;
    &lt;div class="body"&gt;
      &lt;xsl:apply-templates select="node() except db:label"/&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:answer"&gt;
  &lt;div&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
    &lt;div class="label"&gt;
      &lt;xsl:apply-templates select="." mode="m:headline-label"/&gt;
    &lt;/div&gt;
    &lt;div class="body"&gt;
      &lt;xsl:apply-templates select="node() except db:label"/&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:qandaset" mode="m:toc"&gt;
  &lt;ul class="toc"&gt;
    &lt;xsl:apply-templates select="db:qandadiv|db:qandaentry" mode="m:toc"/&gt;
  &lt;/ul&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:qandadiv" mode="m:toc"&gt;
  &lt;li&gt;
    &lt;a href="#{f:id(.)}"&gt;
      &lt;xsl:apply-templates select="." mode="m:headline"&gt;
        &lt;xsl:with-param name="purpose" select="'lot'"/&gt;
      &lt;/xsl:apply-templates&gt;
    &lt;/a&gt;

    &lt;xsl:variable name="toc" select="f:pi(., 'toc')"/&gt;

    &lt;xsl:if test="($toc and f:is-true($toc))
                   or (empty($toc) and f:is-true($qandadiv-default-toc))"&gt;
      &lt;ul&gt;
        &lt;xsl:apply-templates select="db:qandadiv|db:qandaentry" mode="m:toc"/&gt;
      &lt;/ul&gt;
    &lt;/xsl:if&gt;
  &lt;/li&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:qandaentry" mode="m:toc"&gt;
  &lt;li&gt;
    &lt;a href="#{f:id(.)}"&gt;
      &lt;xsl:apply-templates select="db:question" mode="m:headline"&gt;
        &lt;xsl:with-param name="purpose" select="'lot'"/&gt;
      &lt;/xsl:apply-templates&gt;
    &lt;/a&gt;
  &lt;/li&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:question" mode="m:toc"&gt;
  &lt;xsl:choose&gt;
    &lt;xsl:when test="(* except db:label)[1]/self::db:para"&gt;
      &lt;xsl:apply-templates select="(* except db:label)[1]/node()"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:message select="'No question title for ' || local-name(*[1])"/&gt;
      &lt;xsl:variable name="question" as="node()"&gt;
        &lt;xsl:apply-templates select="."/&gt;
      &lt;/xsl:variable&gt;
      &lt;xsl:variable name="question" select="string($question)"/&gt;
      &lt;xsl:sequence select="$question"/&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:label"&gt;
  &lt;xsl:call-template name="t:inline"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:remark"&gt;
  &lt;xsl:if test="f:is-true($show-remarks)"&gt;
    &lt;xsl:choose&gt;
      &lt;xsl:when test="ancestor::db:para"&gt;
        &lt;!-- Assume it's an inline; this is not a foolproof test! --&gt;
        &lt;span&gt;
          &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
          &lt;xsl:apply-templates/&gt;
        &lt;/span&gt;
      &lt;/xsl:when&gt;
      &lt;xsl:otherwise&gt;
        &lt;div&gt;
          &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
          &lt;xsl:apply-templates/&gt;
        &lt;/div&gt;
      &lt;/xsl:otherwise&gt;
    &lt;/xsl:choose&gt;
  &lt;/xsl:if&gt;
&lt;/xsl:template&gt;

&lt;/xsl:stylesheet&gt;
</code></pre></td></tr></table></div></div></div></div><div class="stylesheet" id="S-15572"><h3>admonitions.xsl</h3><p><span><span class="template all">1 template</span></span></p><div class="instructions"><div class="title closed">Instructions</div><div class="body"><div id="S-15572-t-1" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:caution|db:danger|db:import…</div><div class="props"><div class="uses">Uses: <a href="#S-23412-docbook.org.ns.docbook.variables.admonition-icons">$v:admonition-icons</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:caution</code>, <code>db:danger</code>, <code>db:important</code>, <code>db:note</code>, <code>db:tip</code>, <code>db:warning</code></div></div></div></div></div><div class="source-code"><div class="title closed">Source code</div><div class="body"><div><table><tr><td valign="top" align="right"><pre class="fake-prism"><span id="line-S-15572-1">1</span>
<span id="line-S-15572-2"><span class="lno">2</span></span>
<span id="line-S-15572-3"><span class="lno">3</span></span>
<span id="line-S-15572-4"><span class="lno">4</span></span>
<span id="line-S-15572-5">5</span>
<span id="line-S-15572-6"><span class="lno">6</span></span>
<span id="line-S-15572-7"><span class="lno">7</span></span>
<span id="line-S-15572-8"><span class="lno">8</span></span>
<span id="line-S-15572-9"><span class="lno">9</span></span>
<span id="line-S-15572-10">10</span>
<span id="line-S-15572-11"><span class="lno">11</span></span>
<span id="line-S-15572-12"><span class="lno">12</span></span>
<span id="line-S-15572-13"><span class="lno">13</span></span>
<span id="line-S-15572-14"><span class="lno">14</span></span>
<span id="line-S-15572-15">15</span>
<span id="line-S-15572-16"><span class="lno">16</span></span>
<span id="line-S-15572-17"><span class="lno">17</span></span>
<span id="line-S-15572-18"><span class="lno">18</span></span>
<span id="line-S-15572-19"><span class="lno">19</span></span>
<span id="line-S-15572-20">20</span>
<span id="line-S-15572-21"><span class="lno">21</span></span>
<span id="line-S-15572-22"><span class="lno">22</span></span>
<span id="line-S-15572-23"><span class="lno">23</span></span>
<span id="line-S-15572-24"><span class="lno">24</span></span>
<span id="line-S-15572-25">25</span>
<span id="line-S-15572-26"><span class="lno">26</span></span>
<span id="line-S-15572-27"><span class="lno">27</span></span>
<span id="line-S-15572-28"><span class="lno">28</span></span>
<span id="line-S-15572-29"><span class="lno">29</span></span>
<span id="line-S-15572-30">30</span>
<span id="line-S-15572-31"><span class="lno">31</span></span>
<span id="line-S-15572-32"><span class="lno">32</span></span>
<span id="line-S-15572-33"><span class="lno">33</span></span>
</pre></td><td valign="top"><pre><code class="language-xml">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                xmlns:db="http://docbook.org/ns/docbook"
                xmlns:f="http://docbook.org/ns/docbook/functions"
                xmlns:m="http://docbook.org/ns/docbook/modes"
                xmlns:t="http://docbook.org/ns/docbook/templates"
                xmlns:v="http://docbook.org/ns/docbook/variables"
                xmlns:xs="http://www.w3.org/2001/XMLSchema"
                xmlns="http://www.w3.org/1999/xhtml"
                default-mode="m:docbook"
                exclude-result-prefixes="db f m t v xs"
                version="3.0"&gt;

&lt;xsl:template match="db:note|db:tip|db:important|db:caution|db:warning|db:danger"&gt;
  &lt;div&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
    &lt;div&gt;
      &lt;div class="icon"&gt;
        &lt;xsl:apply-templates
            select="$v:admonition-icons/*[node-name(.) = node-name(current())]/node()"/&gt;
      &lt;/div&gt;
      &lt;div class="body"&gt;
        &lt;xsl:apply-templates select="." mode="m:generate-titlepage"/&gt;
        &lt;div&gt;
          &lt;xsl:apply-templates/&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/xsl:template&gt;

&lt;/xsl:stylesheet&gt;
</code></pre></td></tr></table></div></div></div></div><div class="stylesheet" id="S-62162"><h3>programming.xsl</h3><p><span><span class="template all">102 templates</span></span></p><div class="instructions"><div class="title closed">Instructions</div><div class="body"><div id="S-62162-t-1" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:productionset</div><div class="props"><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:productionset</code></div></div></div><div id="S-62162-t-2" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:production</div><div class="props"><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:production</code></div></div></div><div id="S-62162-t-3" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:productionrecap</div><div class="props"><div class="uses">Uses: <a href="#S-29386-docbook.org.ns.docbook.errors.INVALID-PRODUCTIONRECAP">$dbe:INVALID-PRODUCTIONRECAP</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:productionrecap</code></div></div></div><div id="S-62162-t-4" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:lhs</div><div class="props"><div class="uses">Uses: <a href="#S-26643-..productionset-lhs-rhs-separator">$productionset-lhs-rhs-separator</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:lhs</code></div></div></div><div id="S-62162-t-5" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:production</div><div class="props"><div class="calls">Calls: <a href="#S-28936-docbook.org.ns.docbook.functions.generate-id,1">f:generate-id()</a></div><div class="mode">Mode: <code>m:production-number</code></div><div class="matches">Matches: <code>db:production</code></div></div></div><div id="S-62162-t-6" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:rhs</div><div class="props"><div class="mode">Mode: <code>m:docbook</code></div><div class="priority">Priority: <code>10</code></div><div class="matches">Matches: <code>db:rhs</code></div></div></div><div id="S-62162-t-7" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:rhs</div><div class="props"><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:rhs</code></div></div></div><div id="S-62162-t-8" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:constraint</div><div class="props"><div class="uses">Uses: <a href="#S-29386-docbook.org.ns.docbook.errors.INVALID-CONSTRAINT">$dbe:INVALID-CONSTRAINT</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:constraint</code></div></div></div><div id="S-62162-t-9" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:lineannotation</div><div class="props"><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:lineannotation</code></div></div></div><div id="S-62162-t-10" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:sbr</div><div class="props"><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:sbr</code></div></div></div><div id="S-62162-t-11" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:nonterminal</div><div class="props"><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:nonterminal</code></div></div></div><div id="S-62162-t-12" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:constraintdef</div><div class="props"><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:constraintdef</code></div></div></div><div id="S-62162-t-13" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:funcsynopsis</div><div class="props"><div class="uses">Uses: <a href="#S-26643-..funcsynopsis-default-style">$funcsynopsis-default-style</a></div><div class="calls">Calls: <a href="#S-28936-docbook.org.ns.docbook.functions.pi,3">f:pi()</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:funcsynopsis</code></div></div></div><div id="S-62162-t-14" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ element()</div><div class="props"><div class="mode">Mode: <code>m:kr</code></div><div class="matches">Matches: <code>element()</code></div></div></div><div id="S-62162-t-15" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:funcsynopsisinfo</div><div class="props"><div class="mode">Mode: <code>m:kr</code></div><div class="matches">Matches: <code>db:funcsynopsisinfo</code></div></div></div><div id="S-62162-t-16" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:funcprototype</div><div class="props"><div class="uses">Uses: <a href="#S-26643-..funcsynopsis-table-threshold">$funcsynopsis-table-threshold</a>, <a href="#S-26643-..funcsynopsis-trailing-punctuation">$funcsynopsis-trailing-punctuation</a></div><div class="mode">Mode: <code>m:kr</code></div><div class="matches">Matches: <code>db:funcprototype</code></div></div></div><div id="S-62162-t-17" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:funcdef</div><div class="props"><div class="mode">Mode: <code>m:kr</code></div><div class="matches">Matches: <code>db:funcdef</code></div></div></div><div id="S-62162-t-18" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:type</div><div class="props"><div class="mode">Mode: <code>m:kr</code></div><div class="matches">Matches: <code>db:type</code></div></div></div><div id="S-62162-t-19" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:function</div><div class="props"><div class="mode">Mode: <code>m:kr</code></div><div class="matches">Matches: <code>db:function</code></div></div></div><div id="S-62162-t-20" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:void</div><div class="props"><div class="mode">Mode: <code>m:kr-args</code></div><div class="matches">Matches: <code>db:void</code></div></div></div><div id="S-62162-t-21" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:varargs</div><div class="props"><div class="mode">Mode: <code>m:kr-args</code></div><div class="matches">Matches: <code>db:varargs</code></div></div></div><div id="S-62162-t-22" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:paramdef</div><div class="props"><div class="mode">Mode: <code>m:kr-args</code></div><div class="matches">Matches: <code>db:paramdef</code></div></div></div><div id="S-62162-t-23" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:parameter</div><div class="props"><div class="mode">Mode: <code>m:kr-args</code></div><div class="matches">Matches: <code>db:parameter</code></div></div></div><div id="S-62162-t-24" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:void</div><div class="props"><div class="mode">Mode: <code>m:kr</code></div><div class="matches">Matches: <code>db:void</code></div></div></div><div id="S-62162-t-25" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:varargs</div><div class="props"><div class="mode">Mode: <code>m:kr</code></div><div class="matches">Matches: <code>db:varargs</code></div></div></div><div id="S-62162-t-26" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:paramdef</div><div class="props"><div class="mode">Mode: <code>m:kr</code></div><div class="matches">Matches: <code>db:paramdef</code></div></div></div><div id="S-62162-t-27" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:parameter</div><div class="props"><div class="mode">Mode: <code>m:kr</code></div><div class="matches">Matches: <code>db:parameter</code></div></div></div><div id="S-62162-t-28" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:funcparams</div><div class="props"><div class="mode">Mode: <code>m:kr</code></div><div class="matches">Matches: <code>db:funcparams</code></div></div></div><div id="S-62162-t-29" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ text()</div><div class="props"><div class="mode">Mode: <code>m:kr</code></div><div class="matches">Matches: <code>text()</code></div></div></div><div id="S-62162-t-30" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ comment()|processing-instructi…</div><div class="props"><div class="mode">Mode: <code>m:kr</code></div><div class="matches">Matches: <code>comment()</code>, <code>processing-instruction()</code></div></div></div><div id="S-62162-t-31" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ attribute()</div><div class="props"><div class="mode">Mode: <code>m:kr</code></div><div class="matches">Matches: <code>attribute()</code></div></div></div><div id="S-62162-t-32" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ text()</div><div class="props"><div class="mode">Mode: <code>m:kr-args</code></div><div class="matches">Matches: <code>text()</code></div></div></div><div id="S-62162-t-33" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ comment()|processing-instructi…</div><div class="props"><div class="mode">Mode: <code>m:kr-args</code></div><div class="matches">Matches: <code>comment()</code>, <code>processing-instruction()</code></div></div></div><div id="S-62162-t-34" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ attribute()</div><div class="props"><div class="mode">Mode: <code>m:kr-args</code></div><div class="matches">Matches: <code>attribute()</code></div></div></div><div id="S-62162-t-35" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ element()</div><div class="props"><div class="mode">Mode: <code>m:kr-table</code></div><div class="matches">Matches: <code>element()</code></div></div></div><div id="S-62162-t-36" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:funcsynopsisinfo</div><div class="props"><div class="mode">Mode: <code>m:kr-table</code></div><div class="matches">Matches: <code>db:funcsynopsisinfo</code></div></div></div><div id="S-62162-t-37" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:funcprototype</div><div class="props"><div class="mode">Mode: <code>m:kr-table</code></div><div class="matches">Matches: <code>db:funcprototype</code></div></div></div><div id="S-62162-t-38" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:funcdef</div><div class="props"><div class="mode">Mode: <code>m:kr-table</code></div><div class="matches">Matches: <code>db:funcdef</code></div></div></div><div id="S-62162-t-39" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:type</div><div class="props"><div class="mode">Mode: <code>m:kr-table</code></div><div class="matches">Matches: <code>db:type</code></div></div></div><div id="S-62162-t-40" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:function</div><div class="props"><div class="mode">Mode: <code>m:kr-table</code></div><div class="matches">Matches: <code>db:function</code></div></div></div><div id="S-62162-t-41" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:void</div><div class="props"><div class="uses">Uses: <a href="#S-26643-..funcsynopsis-trailing-punctuation">$funcsynopsis-trailing-punctuation</a></div><div class="mode">Mode: <code>m:kr-table-args</code></div><div class="matches">Matches: <code>db:void</code></div></div></div><div id="S-62162-t-42" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:varargs</div><div class="props"><div class="uses">Uses: <a href="#S-26643-..funcsynopsis-trailing-punctuation">$funcsynopsis-trailing-punctuation</a></div><div class="mode">Mode: <code>m:kr-table-args</code></div><div class="matches">Matches: <code>db:varargs</code></div></div></div><div id="S-62162-t-43" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:parameter</div><div class="props"><div class="mode">Mode: <code>m:kr-table-args</code></div><div class="matches">Matches: <code>db:parameter</code></div></div></div><div id="S-62162-t-44" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:void</div><div class="props"><div class="mode">Mode: <code>m:kr-table</code></div><div class="matches">Matches: <code>db:void</code></div></div></div><div id="S-62162-t-45" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:varargs</div><div class="props"><div class="mode">Mode: <code>m:kr-table</code></div><div class="matches">Matches: <code>db:varargs</code></div></div></div><div id="S-62162-t-46" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:paramdef</div><div class="props"><div class="uses">Uses: <a href="#S-26643-..funcsynopsis-trailing-punctuation">$funcsynopsis-trailing-punctuation</a></div><div class="mode">Mode: <code>m:kr-table-args</code></div><div class="matches">Matches: <code>db:paramdef</code></div></div></div><div id="S-62162-t-47" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:paramdef</div><div class="props"><div class="mode">Mode: <code>m:kr-table</code></div><div class="matches">Matches: <code>db:paramdef</code></div></div></div><div id="S-62162-t-48" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:parameter</div><div class="props"><div class="mode">Mode: <code>m:kr-table</code></div><div class="matches">Matches: <code>db:parameter</code></div></div></div><div id="S-62162-t-49" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:funcparams</div><div class="props"><div class="mode">Mode: <code>m:kr-table</code></div><div class="matches">Matches: <code>db:funcparams</code></div></div></div><div id="S-62162-t-50" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ text()</div><div class="props"><div class="mode">Mode: <code>m:kr-table</code></div><div class="matches">Matches: <code>text()</code></div></div></div><div id="S-62162-t-51" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ comment()|processing-instructi…</div><div class="props"><div class="mode">Mode: <code>m:kr-table</code></div><div class="matches">Matches: <code>comment()</code>, <code>processing-instruction()</code></div></div></div><div id="S-62162-t-52" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ attribute()</div><div class="props"><div class="mode">Mode: <code>m:kr-table</code></div><div class="matches">Matches: <code>attribute()</code></div></div></div><div id="S-62162-t-53" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ text()</div><div class="props"><div class="mode">Mode: <code>m:kr-table-args</code></div><div class="matches">Matches: <code>text()</code></div></div></div><div id="S-62162-t-54" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ comment()|processing-instructi…</div><div class="props"><div class="mode">Mode: <code>m:kr-table-args</code></div><div class="matches">Matches: <code>comment()</code>, <code>processing-instruction()</code></div></div></div><div id="S-62162-t-55" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ attribute()|text()</div><div class="props"><div class="mode">Mode: <code>m:kr-table-args</code></div><div class="matches">Matches: <code>attribute()</code>, <code>text()</code></div></div></div><div id="S-62162-t-56" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ element()</div><div class="props"><div class="mode">Mode: <code>m:ansi</code></div><div class="matches">Matches: <code>element()</code></div></div></div><div id="S-62162-t-57" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:funcsynopsisinfo</div><div class="props"><div class="mode">Mode: <code>m:ansi</code></div><div class="matches">Matches: <code>db:funcsynopsisinfo</code></div></div></div><div id="S-62162-t-58" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:funcprototype</div><div class="props"><div class="uses">Uses: <a href="#S-26643-..funcsynopsis-table-threshold">$funcsynopsis-table-threshold</a>, <a href="#S-26643-..funcsynopsis-trailing-punctuation">$funcsynopsis-trailing-punctuation</a></div><div class="mode">Mode: <code>m:ansi</code></div><div class="matches">Matches: <code>db:funcprototype</code></div></div></div><div id="S-62162-t-59" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:funcdef</div><div class="props"><div class="mode">Mode: <code>m:ansi</code></div><div class="matches">Matches: <code>db:funcdef</code></div></div></div><div id="S-62162-t-60" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:type</div><div class="props"><div class="mode">Mode: <code>m:ansi</code></div><div class="matches">Matches: <code>db:type</code></div></div></div><div id="S-62162-t-61" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:function</div><div class="props"><div class="mode">Mode: <code>m:ansi</code></div><div class="matches">Matches: <code>db:function</code></div></div></div><div id="S-62162-t-62" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:void</div><div class="props"><div class="mode">Mode: <code>m:ansi</code></div><div class="matches">Matches: <code>db:void</code></div></div></div><div id="S-62162-t-63" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:varargs</div><div class="props"><div class="mode">Mode: <code>m:ansi</code></div><div class="matches">Matches: <code>db:varargs</code></div></div></div><div id="S-62162-t-64" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:paramdef</div><div class="props"><div class="mode">Mode: <code>m:ansi</code></div><div class="matches">Matches: <code>db:paramdef</code></div></div></div><div id="S-62162-t-65" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:parameter</div><div class="props"><div class="mode">Mode: <code>m:ansi</code></div><div class="matches">Matches: <code>db:parameter</code></div></div></div><div id="S-62162-t-66" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:funcparams</div><div class="props"><div class="mode">Mode: <code>m:ansi</code></div><div class="matches">Matches: <code>db:funcparams</code></div></div></div><div id="S-62162-t-67" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ text()</div><div class="props"><div class="mode">Mode: <code>m:ansi</code></div><div class="matches">Matches: <code>text()</code></div></div></div><div id="S-62162-t-68" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ comment()|processing-instructi…</div><div class="props"><div class="mode">Mode: <code>m:ansi</code></div><div class="matches">Matches: <code>comment()</code>, <code>processing-instruction()</code></div></div></div><div id="S-62162-t-69" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ attribute()</div><div class="props"><div class="mode">Mode: <code>m:ansi</code></div><div class="matches">Matches: <code>attribute()</code></div></div></div><div id="S-62162-t-70" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ element()</div><div class="props"><div class="mode">Mode: <code>m:ansi-table</code></div><div class="matches">Matches: <code>element()</code></div></div></div><div id="S-62162-t-71" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:funcsynopsisinfo</div><div class="props"><div class="mode">Mode: <code>m:ansi-table</code></div><div class="matches">Matches: <code>db:funcsynopsisinfo</code></div></div></div><div id="S-62162-t-72" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:funcprototype</div><div class="props"><div class="mode">Mode: <code>m:ansi-table</code></div><div class="matches">Matches: <code>db:funcprototype</code></div></div></div><div id="S-62162-t-73" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:funcdef</div><div class="props"><div class="mode">Mode: <code>m:ansi-table</code></div><div class="matches">Matches: <code>db:funcdef</code></div></div></div><div id="S-62162-t-74" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:type</div><div class="props"><div class="mode">Mode: <code>m:ansi-table</code></div><div class="matches">Matches: <code>db:type</code></div></div></div><div id="S-62162-t-75" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:function</div><div class="props"><div class="mode">Mode: <code>m:ansi-table</code></div><div class="matches">Matches: <code>db:function</code></div></div></div><div id="S-62162-t-76" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:void</div><div class="props"><div class="uses">Uses: <a href="#S-26643-..funcsynopsis-trailing-punctuation">$funcsynopsis-trailing-punctuation</a></div><div class="mode">Mode: <code>m:ansi-table</code></div><div class="matches">Matches: <code>db:void</code></div></div></div><div id="S-62162-t-77" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:varargs</div><div class="props"><div class="uses">Uses: <a href="#S-26643-..funcsynopsis-trailing-punctuation">$funcsynopsis-trailing-punctuation</a></div><div class="mode">Mode: <code>m:ansi-table</code></div><div class="matches">Matches: <code>db:varargs</code></div></div></div><div id="S-62162-t-78" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:paramdef</div><div class="props"><div class="uses">Uses: <a href="#S-26643-..funcsynopsis-trailing-punctuation">$funcsynopsis-trailing-punctuation</a></div><div class="mode">Mode: <code>m:ansi-table</code></div><div class="matches">Matches: <code>db:paramdef</code></div></div></div><div id="S-62162-t-79" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:parameter</div><div class="props"><div class="mode">Mode: <code>m:ansi-table</code></div><div class="matches">Matches: <code>db:parameter</code></div></div></div><div id="S-62162-t-80" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:funcparams</div><div class="props"><div class="mode">Mode: <code>m:ansi-table</code></div><div class="matches">Matches: <code>db:funcparams</code></div></div></div><div id="S-62162-t-81" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ text()</div><div class="props"><div class="mode">Mode: <code>m:ansi-table</code></div><div class="matches">Matches: <code>text()</code></div></div></div><div id="S-62162-t-82" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ comment()|processing-instructi…</div><div class="props"><div class="mode">Mode: <code>m:ansi-table</code></div><div class="matches">Matches: <code>comment()</code>, <code>processing-instruction()</code></div></div></div><div id="S-62162-t-83" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ attribute()</div><div class="props"><div class="mode">Mode: <code>m:ansi-table</code></div><div class="matches">Matches: <code>attribute()</code></div></div></div><div id="S-62162-t-84" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:classsynopsis|db:constructo…</div><div class="props"><div class="mode">Mode: <code>m:docbook</code></div><div class="priority">Priority: <code>100</code></div><div class="matches">Matches: <code>db:classsynopsis</code>, <code>db:constructorsynopsis</code>, <code>db:destructorsynopsis</code>, <code>db:fieldsynopsis</code>, <code>db:methodsynopsis</code></div></div></div><div id="S-62162-t-85" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:classsynopsis</div><div class="props"><div class="uses">Uses: <a href="#S-26643-..classsynopsis-indent">$classsynopsis-indent</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:classsynopsis</code></div></div></div><div id="S-62162-t-86" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:fieldsynopsis</div><div class="props"><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:fieldsynopsis</code></div></div></div><div id="S-62162-t-87" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:fieldsynopsis</div><div class="props"><div class="mode">Mode: <code>m:synopsis</code></div><div class="matches">Matches: <code>db:fieldsynopsis</code></div></div></div><div id="S-62162-t-88" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:varname</div><div class="props"><div class="mode">Mode: <code>m:synopsis</code></div><div class="matches">Matches: <code>db:varname</code></div></div></div><div id="S-62162-t-89" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:initializer</div><div class="props"><div class="mode">Mode: <code>m:synopsis</code></div><div class="matches">Matches: <code>db:initializer</code></div></div></div><div id="S-62162-t-90" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:constructorsynopsis|db:dest…</div><div class="props"><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:constructorsynopsis</code>, <code>db:destructorsynopsis</code>, <code>db:methodsynopsis</code></div></div></div><div id="S-62162-t-91" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:constructorsynopsis|db:dest…</div><div class="props"><div class="uses">Uses: <a href="#S-26643-..funcsynopsis-trailing-punctuation">$funcsynopsis-trailing-punctuation</a></div><div class="calls">Calls: <a href="#S-28936-docbook.org.ns.docbook.functions.spaces,1">f:spaces()</a></div><div class="mode">Mode: <code>m:synopsis</code></div><div class="matches">Matches: <code>db:constructorsynopsis</code>, <code>db:destructorsynopsis</code>, <code>db:methodsynopsis</code></div></div></div><div id="S-62162-t-92" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:methodparam</div><div class="props"><div class="uses">Uses: <a href="#S-26643-..funcsynopsis-trailing-punctuation">$funcsynopsis-trailing-punctuation</a></div><div class="mode">Mode: <code>m:synopsis</code></div><div class="matches">Matches: <code>db:methodparam</code></div></div></div><div id="S-62162-t-93" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:modifier|db:type</div><div class="props"><div class="mode">Mode: <code>m:synopsis</code></div><div class="matches">Matches: <code>db:modifier</code>, <code>db:type</code></div></div></div><div id="S-62162-t-94" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:classname|db:methodname|db:…</div><div class="props"><div class="mode">Mode: <code>m:synopsis</code></div><div class="matches">Matches: <code>db:classname</code>, <code>db:methodname</code>, <code>db:parameter</code></div></div></div><div id="S-62162-t-95" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:synopsisinfo</div><div class="props"><div class="mode">Mode: <code>m:synopsis</code></div><div class="matches">Matches: <code>db:synopsisinfo</code></div></div></div><div id="S-62162-t-96" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:cmdsynopsis</div><div class="props"><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:cmdsynopsis</code></div></div></div><div id="S-62162-t-97" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:synopfragment</div><div class="props"><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:synopfragment</code></div></div></div><div id="S-62162-t-98" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:synopfragmentref</div><div class="props"><div class="calls">Calls: <a href="#S-28936-docbook.org.ns.docbook.functions.href,2">f:href()</a>, <a href="#S-28936-docbook.org.ns.docbook.functions.target,2">f:target()</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:synopfragmentref</code></div></div></div><div id="S-62162-t-99" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:synopfragment</div><div class="props"><div class="uses">Uses: <a href="#S-26643-..callout-unicode-start">$callout-unicode-start</a></div><div class="mode">Mode: <code>m:synopfragment-bug</code></div><div class="matches">Matches: <code>db:synopfragment</code></div></div></div><div id="S-62162-t-100" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:cmdsynopsis/db:command</div><div class="props"><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:cmdsynopsis/db:command</code></div></div></div><div id="S-62162-docbook.org.ns.docbook.templates.private.group-or-arg" class="instruction template"><div class="title"><span class="link"></span>Template tp:group-or-arg  match ≅ db:arg|db:group</div><div class="props"><div class="uses">Uses: <a href="#S-23412-docbook.org.ns.docbook.variables.arg-choice-def-close-str">$v:arg-choice-def-close-str</a>, <a href="#S-23412-docbook.org.ns.docbook.variables.arg-choice-def-open-str">$v:arg-choice-def-open-str</a>, <a href="#S-23412-docbook.org.ns.docbook.variables.arg-choice-opt-close-str">$v:arg-choice-opt-close-str</a>, <a href="#S-23412-docbook.org.ns.docbook.variables.arg-choice-opt-open-str">$v:arg-choice-opt-open-str</a>, <a href="#S-23412-docbook.org.ns.docbook.variables.arg-choice-plain-close-str">$v:arg-choice-plain-close-str</a>, <a href="#S-23412-docbook.org.ns.docbook.variables.arg-choice-plain-open-str">$v:arg-choice-plain-open-str</a>, <a href="#S-23412-docbook.org.ns.docbook.variables.arg-choice-req-close-str">$v:arg-choice-req-close-str</a>, <a href="#S-23412-docbook.org.ns.docbook.variables.arg-choice-req-open-str">$v:arg-choice-req-open-str</a>, <a href="#S-23412-docbook.org.ns.docbook.variables.arg-rep-def-str">$v:arg-rep-def-str</a>, <a href="#S-23412-docbook.org.ns.docbook.variables.arg-rep-norepeat-str">$v:arg-rep-norepeat-str</a>, <a href="#S-23412-docbook.org.ns.docbook.variables.arg-rep-repeat-str">$v:arg-rep-repeat-str</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-62162-t-102">template</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-62162">modules/programming.xsl</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:arg</code>, <code>db:group</code></div></div></div><div id="S-62162-t-102" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:group/db:arg</div><div class="props"><div class="uses">Uses: <a href="#S-23412-docbook.org.ns.docbook.variables.arg-or-sep">$v:arg-or-sep</a></div><div class="calls">Calls: <a href="#S-62162-docbook.org.ns.docbook.templates.private.group-or-arg">tp:group-or-arg</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:group/db:arg</code></div></div></div></div></div><div class="source-code"><div class="title closed">Source code</div><div class="body"><div><table><tr><td valign="top" align="right"><pre class="fake-prism"><span id="line-S-62162-1">1</span>
<span id="line-S-62162-2"><span class="lno">2</span></span>
<span id="line-S-62162-3"><span class="lno">3</span></span>
<span id="line-S-62162-4"><span class="lno">4</span></span>
<span id="line-S-62162-5">5</span>
<span id="line-S-62162-6"><span class="lno">6</span></span>
<span id="line-S-62162-7"><span class="lno">7</span></span>
<span id="line-S-62162-8"><span class="lno">8</span></span>
<span id="line-S-62162-9"><span class="lno">9</span></span>
<span id="line-S-62162-10">10</span>
<span id="line-S-62162-11"><span class="lno">11</span></span>
<span id="line-S-62162-12"><span class="lno">12</span></span>
<span id="line-S-62162-13"><span class="lno">13</span></span>
<span id="line-S-62162-14"><span class="lno">14</span></span>
<span id="line-S-62162-15">15</span>
<span id="line-S-62162-16"><span class="lno">16</span></span>
<span id="line-S-62162-17"><span class="lno">17</span></span>
<span id="line-S-62162-18"><span class="lno">18</span></span>
<span id="line-S-62162-19"><span class="lno">19</span></span>
<span id="line-S-62162-20">20</span>
<span id="line-S-62162-21"><span class="lno">21</span></span>
<span id="line-S-62162-22"><span class="lno">22</span></span>
<span id="line-S-62162-23"><span class="lno">23</span></span>
<span id="line-S-62162-24"><span class="lno">24</span></span>
<span id="line-S-62162-25">25</span>
<span id="line-S-62162-26"><span class="lno">26</span></span>
<span id="line-S-62162-27"><span class="lno">27</span></span>
<span id="line-S-62162-28"><span class="lno">28</span></span>
<span id="line-S-62162-29"><span class="lno">29</span></span>
<span id="line-S-62162-30">30</span>
<span id="line-S-62162-31"><span class="lno">31</span></span>
<span id="line-S-62162-32"><span class="lno">32</span></span>
<span id="line-S-62162-33"><span class="lno">33</span></span>
<span id="line-S-62162-34"><span class="lno">34</span></span>
<span id="line-S-62162-35">35</span>
<span id="line-S-62162-36"><span class="lno">36</span></span>
<span id="line-S-62162-37"><span class="lno">37</span></span>
<span id="line-S-62162-38"><span class="lno">38</span></span>
<span id="line-S-62162-39"><span class="lno">39</span></span>
<span id="line-S-62162-40">40</span>
<span id="line-S-62162-41"><span class="lno">41</span></span>
<span id="line-S-62162-42"><span class="lno">42</span></span>
<span id="line-S-62162-43"><span class="lno">43</span></span>
<span id="line-S-62162-44"><span class="lno">44</span></span>
<span id="line-S-62162-45">45</span>
<span id="line-S-62162-46"><span class="lno">46</span></span>
<span id="line-S-62162-47"><span class="lno">47</span></span>
<span id="line-S-62162-48"><span class="lno">48</span></span>
<span id="line-S-62162-49"><span class="lno">49</span></span>
<span id="line-S-62162-50">50</span>
<span id="line-S-62162-51"><span class="lno">51</span></span>
<span id="line-S-62162-52"><span class="lno">52</span></span>
<span id="line-S-62162-53"><span class="lno">53</span></span>
<span id="line-S-62162-54"><span class="lno">54</span></span>
<span id="line-S-62162-55">55</span>
<span id="line-S-62162-56"><span class="lno">56</span></span>
<span id="line-S-62162-57"><span class="lno">57</span></span>
<span id="line-S-62162-58"><span class="lno">58</span></span>
<span id="line-S-62162-59"><span class="lno">59</span></span>
<span id="line-S-62162-60">60</span>
<span id="line-S-62162-61"><span class="lno">61</span></span>
<span id="line-S-62162-62"><span class="lno">62</span></span>
<span id="line-S-62162-63"><span class="lno">63</span></span>
<span id="line-S-62162-64"><span class="lno">64</span></span>
<span id="line-S-62162-65">65</span>
<span id="line-S-62162-66"><span class="lno">66</span></span>
<span id="line-S-62162-67"><span class="lno">67</span></span>
<span id="line-S-62162-68"><span class="lno">68</span></span>
<span id="line-S-62162-69"><span class="lno">69</span></span>
<span id="line-S-62162-70">70</span>
<span id="line-S-62162-71"><span class="lno">71</span></span>
<span id="line-S-62162-72"><span class="lno">72</span></span>
<span id="line-S-62162-73"><span class="lno">73</span></span>
<span id="line-S-62162-74"><span class="lno">74</span></span>
<span id="line-S-62162-75">75</span>
<span id="line-S-62162-76"><span class="lno">76</span></span>
<span id="line-S-62162-77"><span class="lno">77</span></span>
<span id="line-S-62162-78"><span class="lno">78</span></span>
<span id="line-S-62162-79"><span class="lno">79</span></span>
<span id="line-S-62162-80">80</span>
<span id="line-S-62162-81"><span class="lno">81</span></span>
<span id="line-S-62162-82"><span class="lno">82</span></span>
<span id="line-S-62162-83"><span class="lno">83</span></span>
<span id="line-S-62162-84"><span class="lno">84</span></span>
<span id="line-S-62162-85">85</span>
<span id="line-S-62162-86"><span class="lno">86</span></span>
<span id="line-S-62162-87"><span class="lno">87</span></span>
<span id="line-S-62162-88"><span class="lno">88</span></span>
<span id="line-S-62162-89"><span class="lno">89</span></span>
<span id="line-S-62162-90">90</span>
<span id="line-S-62162-91"><span class="lno">91</span></span>
<span id="line-S-62162-92"><span class="lno">92</span></span>
<span id="line-S-62162-93"><span class="lno">93</span></span>
<span id="line-S-62162-94"><span class="lno">94</span></span>
<span id="line-S-62162-95">95</span>
<span id="line-S-62162-96"><span class="lno">96</span></span>
<span id="line-S-62162-97"><span class="lno">97</span></span>
<span id="line-S-62162-98"><span class="lno">98</span></span>
<span id="line-S-62162-99"><span class="lno">99</span></span>
<span id="line-S-62162-100">100</span>
<span id="line-S-62162-101"><span class="lno">101</span></span>
<span id="line-S-62162-102"><span class="lno">102</span></span>
<span id="line-S-62162-103"><span class="lno">103</span></span>
<span id="line-S-62162-104"><span class="lno">104</span></span>
<span id="line-S-62162-105">105</span>
<span id="line-S-62162-106"><span class="lno">106</span></span>
<span id="line-S-62162-107"><span class="lno">107</span></span>
<span id="line-S-62162-108"><span class="lno">108</span></span>
<span id="line-S-62162-109"><span class="lno">109</span></span>
<span id="line-S-62162-110">110</span>
<span id="line-S-62162-111"><span class="lno">111</span></span>
<span id="line-S-62162-112"><span class="lno">112</span></span>
<span id="line-S-62162-113"><span class="lno">113</span></span>
<span id="line-S-62162-114"><span class="lno">114</span></span>
<span id="line-S-62162-115">115</span>
<span id="line-S-62162-116"><span class="lno">116</span></span>
<span id="line-S-62162-117"><span class="lno">117</span></span>
<span id="line-S-62162-118"><span class="lno">118</span></span>
<span id="line-S-62162-119"><span class="lno">119</span></span>
<span id="line-S-62162-120">120</span>
<span id="line-S-62162-121"><span class="lno">121</span></span>
<span id="line-S-62162-122"><span class="lno">122</span></span>
<span id="line-S-62162-123"><span class="lno">123</span></span>
<span id="line-S-62162-124"><span class="lno">124</span></span>
<span id="line-S-62162-125">125</span>
<span id="line-S-62162-126"><span class="lno">126</span></span>
<span id="line-S-62162-127"><span class="lno">127</span></span>
<span id="line-S-62162-128"><span class="lno">128</span></span>
<span id="line-S-62162-129"><span class="lno">129</span></span>
<span id="line-S-62162-130">130</span>
<span id="line-S-62162-131"><span class="lno">131</span></span>
<span id="line-S-62162-132"><span class="lno">132</span></span>
<span id="line-S-62162-133"><span class="lno">133</span></span>
<span id="line-S-62162-134"><span class="lno">134</span></span>
<span id="line-S-62162-135">135</span>
<span id="line-S-62162-136"><span class="lno">136</span></span>
<span id="line-S-62162-137"><span class="lno">137</span></span>
<span id="line-S-62162-138"><span class="lno">138</span></span>
<span id="line-S-62162-139"><span class="lno">139</span></span>
<span id="line-S-62162-140">140</span>
<span id="line-S-62162-141"><span class="lno">141</span></span>
<span id="line-S-62162-142"><span class="lno">142</span></span>
<span id="line-S-62162-143"><span class="lno">143</span></span>
<span id="line-S-62162-144"><span class="lno">144</span></span>
<span id="line-S-62162-145">145</span>
<span id="line-S-62162-146"><span class="lno">146</span></span>
<span id="line-S-62162-147"><span class="lno">147</span></span>
<span id="line-S-62162-148"><span class="lno">148</span></span>
<span id="line-S-62162-149"><span class="lno">149</span></span>
<span id="line-S-62162-150">150</span>
<span id="line-S-62162-151"><span class="lno">151</span></span>
<span id="line-S-62162-152"><span class="lno">152</span></span>
<span id="line-S-62162-153"><span class="lno">153</span></span>
<span id="line-S-62162-154"><span class="lno">154</span></span>
<span id="line-S-62162-155">155</span>
<span id="line-S-62162-156"><span class="lno">156</span></span>
<span id="line-S-62162-157"><span class="lno">157</span></span>
<span id="line-S-62162-158"><span class="lno">158</span></span>
<span id="line-S-62162-159"><span class="lno">159</span></span>
<span id="line-S-62162-160">160</span>
<span id="line-S-62162-161"><span class="lno">161</span></span>
<span id="line-S-62162-162"><span class="lno">162</span></span>
<span id="line-S-62162-163"><span class="lno">163</span></span>
<span id="line-S-62162-164"><span class="lno">164</span></span>
<span id="line-S-62162-165">165</span>
<span id="line-S-62162-166"><span class="lno">166</span></span>
<span id="line-S-62162-167"><span class="lno">167</span></span>
<span id="line-S-62162-168"><span class="lno">168</span></span>
<span id="line-S-62162-169"><span class="lno">169</span></span>
<span id="line-S-62162-170">170</span>
<span id="line-S-62162-171"><span class="lno">171</span></span>
<span id="line-S-62162-172"><span class="lno">172</span></span>
<span id="line-S-62162-173"><span class="lno">173</span></span>
<span id="line-S-62162-174"><span class="lno">174</span></span>
<span id="line-S-62162-175">175</span>
<span id="line-S-62162-176"><span class="lno">176</span></span>
<span id="line-S-62162-177"><span class="lno">177</span></span>
<span id="line-S-62162-178"><span class="lno">178</span></span>
<span id="line-S-62162-179"><span class="lno">179</span></span>
<span id="line-S-62162-180">180</span>
<span id="line-S-62162-181"><span class="lno">181</span></span>
<span id="line-S-62162-182"><span class="lno">182</span></span>
<span id="line-S-62162-183"><span class="lno">183</span></span>
<span id="line-S-62162-184"><span class="lno">184</span></span>
<span id="line-S-62162-185">185</span>
<span id="line-S-62162-186"><span class="lno">186</span></span>
<span id="line-S-62162-187"><span class="lno">187</span></span>
<span id="line-S-62162-188"><span class="lno">188</span></span>
<span id="line-S-62162-189"><span class="lno">189</span></span>
<span id="line-S-62162-190">190</span>
<span id="line-S-62162-191"><span class="lno">191</span></span>
<span id="line-S-62162-192"><span class="lno">192</span></span>
<span id="line-S-62162-193"><span class="lno">193</span></span>
<span id="line-S-62162-194"><span class="lno">194</span></span>
<span id="line-S-62162-195">195</span>
<span id="line-S-62162-196"><span class="lno">196</span></span>
<span id="line-S-62162-197"><span class="lno">197</span></span>
<span id="line-S-62162-198"><span class="lno">198</span></span>
<span id="line-S-62162-199"><span class="lno">199</span></span>
<span id="line-S-62162-200">200</span>
<span id="line-S-62162-201"><span class="lno">201</span></span>
<span id="line-S-62162-202"><span class="lno">202</span></span>
<span id="line-S-62162-203"><span class="lno">203</span></span>
<span id="line-S-62162-204"><span class="lno">204</span></span>
<span id="line-S-62162-205">205</span>
<span id="line-S-62162-206"><span class="lno">206</span></span>
<span id="line-S-62162-207"><span class="lno">207</span></span>
<span id="line-S-62162-208"><span class="lno">208</span></span>
<span id="line-S-62162-209"><span class="lno">209</span></span>
<span id="line-S-62162-210">210</span>
<span id="line-S-62162-211"><span class="lno">211</span></span>
<span id="line-S-62162-212"><span class="lno">212</span></span>
<span id="line-S-62162-213"><span class="lno">213</span></span>
<span id="line-S-62162-214"><span class="lno">214</span></span>
<span id="line-S-62162-215">215</span>
<span id="line-S-62162-216"><span class="lno">216</span></span>
<span id="line-S-62162-217"><span class="lno">217</span></span>
<span id="line-S-62162-218"><span class="lno">218</span></span>
<span id="line-S-62162-219"><span class="lno">219</span></span>
<span id="line-S-62162-220">220</span>
<span id="line-S-62162-221"><span class="lno">221</span></span>
<span id="line-S-62162-222"><span class="lno">222</span></span>
<span id="line-S-62162-223"><span class="lno">223</span></span>
<span id="line-S-62162-224"><span class="lno">224</span></span>
<span id="line-S-62162-225">225</span>
<span id="line-S-62162-226"><span class="lno">226</span></span>
<span id="line-S-62162-227"><span class="lno">227</span></span>
<span id="line-S-62162-228"><span class="lno">228</span></span>
<span id="line-S-62162-229"><span class="lno">229</span></span>
<span id="line-S-62162-230">230</span>
<span id="line-S-62162-231"><span class="lno">231</span></span>
<span id="line-S-62162-232"><span class="lno">232</span></span>
<span id="line-S-62162-233"><span class="lno">233</span></span>
<span id="line-S-62162-234"><span class="lno">234</span></span>
<span id="line-S-62162-235">235</span>
<span id="line-S-62162-236"><span class="lno">236</span></span>
<span id="line-S-62162-237"><span class="lno">237</span></span>
<span id="line-S-62162-238"><span class="lno">238</span></span>
<span id="line-S-62162-239"><span class="lno">239</span></span>
<span id="line-S-62162-240">240</span>
<span id="line-S-62162-241"><span class="lno">241</span></span>
<span id="line-S-62162-242"><span class="lno">242</span></span>
<span id="line-S-62162-243"><span class="lno">243</span></span>
<span id="line-S-62162-244"><span class="lno">244</span></span>
<span id="line-S-62162-245">245</span>
<span id="line-S-62162-246"><span class="lno">246</span></span>
<span id="line-S-62162-247"><span class="lno">247</span></span>
<span id="line-S-62162-248"><span class="lno">248</span></span>
<span id="line-S-62162-249"><span class="lno">249</span></span>
<span id="line-S-62162-250">250</span>
<span id="line-S-62162-251"><span class="lno">251</span></span>
<span id="line-S-62162-252"><span class="lno">252</span></span>
<span id="line-S-62162-253"><span class="lno">253</span></span>
<span id="line-S-62162-254"><span class="lno">254</span></span>
<span id="line-S-62162-255">255</span>
<span id="line-S-62162-256"><span class="lno">256</span></span>
<span id="line-S-62162-257"><span class="lno">257</span></span>
<span id="line-S-62162-258"><span class="lno">258</span></span>
<span id="line-S-62162-259"><span class="lno">259</span></span>
<span id="line-S-62162-260">260</span>
<span id="line-S-62162-261"><span class="lno">261</span></span>
<span id="line-S-62162-262"><span class="lno">262</span></span>
<span id="line-S-62162-263"><span class="lno">263</span></span>
<span id="line-S-62162-264"><span class="lno">264</span></span>
<span id="line-S-62162-265">265</span>
<span id="line-S-62162-266"><span class="lno">266</span></span>
<span id="line-S-62162-267"><span class="lno">267</span></span>
<span id="line-S-62162-268"><span class="lno">268</span></span>
<span id="line-S-62162-269"><span class="lno">269</span></span>
<span id="line-S-62162-270">270</span>
<span id="line-S-62162-271"><span class="lno">271</span></span>
<span id="line-S-62162-272"><span class="lno">272</span></span>
<span id="line-S-62162-273"><span class="lno">273</span></span>
<span id="line-S-62162-274"><span class="lno">274</span></span>
<span id="line-S-62162-275">275</span>
<span id="line-S-62162-276"><span class="lno">276</span></span>
<span id="line-S-62162-277"><span class="lno">277</span></span>
<span id="line-S-62162-278"><span class="lno">278</span></span>
<span id="line-S-62162-279"><span class="lno">279</span></span>
<span id="line-S-62162-280">280</span>
<span id="line-S-62162-281"><span class="lno">281</span></span>
<span id="line-S-62162-282"><span class="lno">282</span></span>
<span id="line-S-62162-283"><span class="lno">283</span></span>
<span id="line-S-62162-284"><span class="lno">284</span></span>
<span id="line-S-62162-285">285</span>
<span id="line-S-62162-286"><span class="lno">286</span></span>
<span id="line-S-62162-287"><span class="lno">287</span></span>
<span id="line-S-62162-288"><span class="lno">288</span></span>
<span id="line-S-62162-289"><span class="lno">289</span></span>
<span id="line-S-62162-290">290</span>
<span id="line-S-62162-291"><span class="lno">291</span></span>
<span id="line-S-62162-292"><span class="lno">292</span></span>
<span id="line-S-62162-293"><span class="lno">293</span></span>
<span id="line-S-62162-294"><span class="lno">294</span></span>
<span id="line-S-62162-295">295</span>
<span id="line-S-62162-296"><span class="lno">296</span></span>
<span id="line-S-62162-297"><span class="lno">297</span></span>
<span id="line-S-62162-298"><span class="lno">298</span></span>
<span id="line-S-62162-299"><span class="lno">299</span></span>
<span id="line-S-62162-300">300</span>
<span id="line-S-62162-301"><span class="lno">301</span></span>
<span id="line-S-62162-302"><span class="lno">302</span></span>
<span id="line-S-62162-303"><span class="lno">303</span></span>
<span id="line-S-62162-304"><span class="lno">304</span></span>
<span id="line-S-62162-305">305</span>
<span id="line-S-62162-306"><span class="lno">306</span></span>
<span id="line-S-62162-307"><span class="lno">307</span></span>
<span id="line-S-62162-308"><span class="lno">308</span></span>
<span id="line-S-62162-309"><span class="lno">309</span></span>
<span id="line-S-62162-310">310</span>
<span id="line-S-62162-311"><span class="lno">311</span></span>
<span id="line-S-62162-312"><span class="lno">312</span></span>
<span id="line-S-62162-313"><span class="lno">313</span></span>
<span id="line-S-62162-314"><span class="lno">314</span></span>
<span id="line-S-62162-315">315</span>
<span id="line-S-62162-316"><span class="lno">316</span></span>
<span id="line-S-62162-317"><span class="lno">317</span></span>
<span id="line-S-62162-318"><span class="lno">318</span></span>
<span id="line-S-62162-319"><span class="lno">319</span></span>
<span id="line-S-62162-320">320</span>
<span id="line-S-62162-321"><span class="lno">321</span></span>
<span id="line-S-62162-322"><span class="lno">322</span></span>
<span id="line-S-62162-323"><span class="lno">323</span></span>
<span id="line-S-62162-324"><span class="lno">324</span></span>
<span id="line-S-62162-325">325</span>
<span id="line-S-62162-326"><span class="lno">326</span></span>
<span id="line-S-62162-327"><span class="lno">327</span></span>
<span id="line-S-62162-328"><span class="lno">328</span></span>
<span id="line-S-62162-329"><span class="lno">329</span></span>
<span id="line-S-62162-330">330</span>
<span id="line-S-62162-331"><span class="lno">331</span></span>
<span id="line-S-62162-332"><span class="lno">332</span></span>
<span id="line-S-62162-333"><span class="lno">333</span></span>
<span id="line-S-62162-334"><span class="lno">334</span></span>
<span id="line-S-62162-335">335</span>
<span id="line-S-62162-336"><span class="lno">336</span></span>
<span id="line-S-62162-337"><span class="lno">337</span></span>
<span id="line-S-62162-338"><span class="lno">338</span></span>
<span id="line-S-62162-339"><span class="lno">339</span></span>
<span id="line-S-62162-340">340</span>
<span id="line-S-62162-341"><span class="lno">341</span></span>
<span id="line-S-62162-342"><span class="lno">342</span></span>
<span id="line-S-62162-343"><span class="lno">343</span></span>
<span id="line-S-62162-344"><span class="lno">344</span></span>
<span id="line-S-62162-345">345</span>
<span id="line-S-62162-346"><span class="lno">346</span></span>
<span id="line-S-62162-347"><span class="lno">347</span></span>
<span id="line-S-62162-348"><span class="lno">348</span></span>
<span id="line-S-62162-349"><span class="lno">349</span></span>
<span id="line-S-62162-350">350</span>
<span id="line-S-62162-351"><span class="lno">351</span></span>
<span id="line-S-62162-352"><span class="lno">352</span></span>
<span id="line-S-62162-353"><span class="lno">353</span></span>
<span id="line-S-62162-354"><span class="lno">354</span></span>
<span id="line-S-62162-355">355</span>
<span id="line-S-62162-356"><span class="lno">356</span></span>
<span id="line-S-62162-357"><span class="lno">357</span></span>
<span id="line-S-62162-358"><span class="lno">358</span></span>
<span id="line-S-62162-359"><span class="lno">359</span></span>
<span id="line-S-62162-360">360</span>
<span id="line-S-62162-361"><span class="lno">361</span></span>
<span id="line-S-62162-362"><span class="lno">362</span></span>
<span id="line-S-62162-363"><span class="lno">363</span></span>
<span id="line-S-62162-364"><span class="lno">364</span></span>
<span id="line-S-62162-365">365</span>
<span id="line-S-62162-366"><span class="lno">366</span></span>
<span id="line-S-62162-367"><span class="lno">367</span></span>
<span id="line-S-62162-368"><span class="lno">368</span></span>
<span id="line-S-62162-369"><span class="lno">369</span></span>
<span id="line-S-62162-370">370</span>
<span id="line-S-62162-371"><span class="lno">371</span></span>
<span id="line-S-62162-372"><span class="lno">372</span></span>
<span id="line-S-62162-373"><span class="lno">373</span></span>
<span id="line-S-62162-374"><span class="lno">374</span></span>
<span id="line-S-62162-375">375</span>
<span id="line-S-62162-376"><span class="lno">376</span></span>
<span id="line-S-62162-377"><span class="lno">377</span></span>
<span id="line-S-62162-378"><span class="lno">378</span></span>
<span id="line-S-62162-379"><span class="lno">379</span></span>
<span id="line-S-62162-380">380</span>
<span id="line-S-62162-381"><span class="lno">381</span></span>
<span id="line-S-62162-382"><span class="lno">382</span></span>
<span id="line-S-62162-383"><span class="lno">383</span></span>
<span id="line-S-62162-384"><span class="lno">384</span></span>
<span id="line-S-62162-385">385</span>
<span id="line-S-62162-386"><span class="lno">386</span></span>
<span id="line-S-62162-387"><span class="lno">387</span></span>
<span id="line-S-62162-388"><span class="lno">388</span></span>
<span id="line-S-62162-389"><span class="lno">389</span></span>
<span id="line-S-62162-390">390</span>
<span id="line-S-62162-391"><span class="lno">391</span></span>
<span id="line-S-62162-392"><span class="lno">392</span></span>
<span id="line-S-62162-393"><span class="lno">393</span></span>
<span id="line-S-62162-394"><span class="lno">394</span></span>
<span id="line-S-62162-395">395</span>
<span id="line-S-62162-396"><span class="lno">396</span></span>
<span id="line-S-62162-397"><span class="lno">397</span></span>
<span id="line-S-62162-398"><span class="lno">398</span></span>
<span id="line-S-62162-399"><span class="lno">399</span></span>
<span id="line-S-62162-400">400</span>
<span id="line-S-62162-401"><span class="lno">401</span></span>
<span id="line-S-62162-402"><span class="lno">402</span></span>
<span id="line-S-62162-403"><span class="lno">403</span></span>
<span id="line-S-62162-404"><span class="lno">404</span></span>
<span id="line-S-62162-405">405</span>
<span id="line-S-62162-406"><span class="lno">406</span></span>
<span id="line-S-62162-407"><span class="lno">407</span></span>
<span id="line-S-62162-408"><span class="lno">408</span></span>
<span id="line-S-62162-409"><span class="lno">409</span></span>
<span id="line-S-62162-410">410</span>
<span id="line-S-62162-411"><span class="lno">411</span></span>
<span id="line-S-62162-412"><span class="lno">412</span></span>
<span id="line-S-62162-413"><span class="lno">413</span></span>
<span id="line-S-62162-414"><span class="lno">414</span></span>
<span id="line-S-62162-415">415</span>
<span id="line-S-62162-416"><span class="lno">416</span></span>
<span id="line-S-62162-417"><span class="lno">417</span></span>
<span id="line-S-62162-418"><span class="lno">418</span></span>
<span id="line-S-62162-419"><span class="lno">419</span></span>
<span id="line-S-62162-420">420</span>
<span id="line-S-62162-421"><span class="lno">421</span></span>
<span id="line-S-62162-422"><span class="lno">422</span></span>
<span id="line-S-62162-423"><span class="lno">423</span></span>
<span id="line-S-62162-424"><span class="lno">424</span></span>
<span id="line-S-62162-425">425</span>
<span id="line-S-62162-426"><span class="lno">426</span></span>
<span id="line-S-62162-427"><span class="lno">427</span></span>
<span id="line-S-62162-428"><span class="lno">428</span></span>
<span id="line-S-62162-429"><span class="lno">429</span></span>
<span id="line-S-62162-430">430</span>
<span id="line-S-62162-431"><span class="lno">431</span></span>
<span id="line-S-62162-432"><span class="lno">432</span></span>
<span id="line-S-62162-433"><span class="lno">433</span></span>
<span id="line-S-62162-434"><span class="lno">434</span></span>
<span id="line-S-62162-435">435</span>
<span id="line-S-62162-436"><span class="lno">436</span></span>
<span id="line-S-62162-437"><span class="lno">437</span></span>
<span id="line-S-62162-438"><span class="lno">438</span></span>
<span id="line-S-62162-439"><span class="lno">439</span></span>
<span id="line-S-62162-440">440</span>
<span id="line-S-62162-441"><span class="lno">441</span></span>
<span id="line-S-62162-442"><span class="lno">442</span></span>
<span id="line-S-62162-443"><span class="lno">443</span></span>
<span id="line-S-62162-444"><span class="lno">444</span></span>
<span id="line-S-62162-445">445</span>
<span id="line-S-62162-446"><span class="lno">446</span></span>
<span id="line-S-62162-447"><span class="lno">447</span></span>
<span id="line-S-62162-448"><span class="lno">448</span></span>
<span id="line-S-62162-449"><span class="lno">449</span></span>
<span id="line-S-62162-450">450</span>
<span id="line-S-62162-451"><span class="lno">451</span></span>
<span id="line-S-62162-452"><span class="lno">452</span></span>
<span id="line-S-62162-453"><span class="lno">453</span></span>
<span id="line-S-62162-454"><span class="lno">454</span></span>
<span id="line-S-62162-455">455</span>
<span id="line-S-62162-456"><span class="lno">456</span></span>
<span id="line-S-62162-457"><span class="lno">457</span></span>
<span id="line-S-62162-458"><span class="lno">458</span></span>
<span id="line-S-62162-459"><span class="lno">459</span></span>
<span id="line-S-62162-460">460</span>
<span id="line-S-62162-461"><span class="lno">461</span></span>
<span id="line-S-62162-462"><span class="lno">462</span></span>
<span id="line-S-62162-463"><span class="lno">463</span></span>
<span id="line-S-62162-464"><span class="lno">464</span></span>
<span id="line-S-62162-465">465</span>
<span id="line-S-62162-466"><span class="lno">466</span></span>
<span id="line-S-62162-467"><span class="lno">467</span></span>
<span id="line-S-62162-468"><span class="lno">468</span></span>
<span id="line-S-62162-469"><span class="lno">469</span></span>
<span id="line-S-62162-470">470</span>
<span id="line-S-62162-471"><span class="lno">471</span></span>
<span id="line-S-62162-472"><span class="lno">472</span></span>
<span id="line-S-62162-473"><span class="lno">473</span></span>
<span id="line-S-62162-474"><span class="lno">474</span></span>
<span id="line-S-62162-475">475</span>
<span id="line-S-62162-476"><span class="lno">476</span></span>
<span id="line-S-62162-477"><span class="lno">477</span></span>
<span id="line-S-62162-478"><span class="lno">478</span></span>
<span id="line-S-62162-479"><span class="lno">479</span></span>
<span id="line-S-62162-480">480</span>
<span id="line-S-62162-481"><span class="lno">481</span></span>
<span id="line-S-62162-482"><span class="lno">482</span></span>
<span id="line-S-62162-483"><span class="lno">483</span></span>
<span id="line-S-62162-484"><span class="lno">484</span></span>
<span id="line-S-62162-485">485</span>
<span id="line-S-62162-486"><span class="lno">486</span></span>
<span id="line-S-62162-487"><span class="lno">487</span></span>
<span id="line-S-62162-488"><span class="lno">488</span></span>
<span id="line-S-62162-489"><span class="lno">489</span></span>
<span id="line-S-62162-490">490</span>
<span id="line-S-62162-491"><span class="lno">491</span></span>
<span id="line-S-62162-492"><span class="lno">492</span></span>
<span id="line-S-62162-493"><span class="lno">493</span></span>
<span id="line-S-62162-494"><span class="lno">494</span></span>
<span id="line-S-62162-495">495</span>
<span id="line-S-62162-496"><span class="lno">496</span></span>
<span id="line-S-62162-497"><span class="lno">497</span></span>
<span id="line-S-62162-498"><span class="lno">498</span></span>
<span id="line-S-62162-499"><span class="lno">499</span></span>
<span id="line-S-62162-500">500</span>
<span id="line-S-62162-501"><span class="lno">501</span></span>
<span id="line-S-62162-502"><span class="lno">502</span></span>
<span id="line-S-62162-503"><span class="lno">503</span></span>
<span id="line-S-62162-504"><span class="lno">504</span></span>
<span id="line-S-62162-505">505</span>
<span id="line-S-62162-506"><span class="lno">506</span></span>
<span id="line-S-62162-507"><span class="lno">507</span></span>
<span id="line-S-62162-508"><span class="lno">508</span></span>
<span id="line-S-62162-509"><span class="lno">509</span></span>
<span id="line-S-62162-510">510</span>
<span id="line-S-62162-511"><span class="lno">511</span></span>
<span id="line-S-62162-512"><span class="lno">512</span></span>
<span id="line-S-62162-513"><span class="lno">513</span></span>
<span id="line-S-62162-514"><span class="lno">514</span></span>
<span id="line-S-62162-515">515</span>
<span id="line-S-62162-516"><span class="lno">516</span></span>
<span id="line-S-62162-517"><span class="lno">517</span></span>
<span id="line-S-62162-518"><span class="lno">518</span></span>
<span id="line-S-62162-519"><span class="lno">519</span></span>
<span id="line-S-62162-520">520</span>
<span id="line-S-62162-521"><span class="lno">521</span></span>
<span id="line-S-62162-522"><span class="lno">522</span></span>
<span id="line-S-62162-523"><span class="lno">523</span></span>
<span id="line-S-62162-524"><span class="lno">524</span></span>
<span id="line-S-62162-525">525</span>
<span id="line-S-62162-526"><span class="lno">526</span></span>
<span id="line-S-62162-527"><span class="lno">527</span></span>
<span id="line-S-62162-528"><span class="lno">528</span></span>
<span id="line-S-62162-529"><span class="lno">529</span></span>
<span id="line-S-62162-530">530</span>
<span id="line-S-62162-531"><span class="lno">531</span></span>
<span id="line-S-62162-532"><span class="lno">532</span></span>
<span id="line-S-62162-533"><span class="lno">533</span></span>
<span id="line-S-62162-534"><span class="lno">534</span></span>
<span id="line-S-62162-535">535</span>
<span id="line-S-62162-536"><span class="lno">536</span></span>
<span id="line-S-62162-537"><span class="lno">537</span></span>
<span id="line-S-62162-538"><span class="lno">538</span></span>
<span id="line-S-62162-539"><span class="lno">539</span></span>
<span id="line-S-62162-540">540</span>
<span id="line-S-62162-541"><span class="lno">541</span></span>
<span id="line-S-62162-542"><span class="lno">542</span></span>
<span id="line-S-62162-543"><span class="lno">543</span></span>
<span id="line-S-62162-544"><span class="lno">544</span></span>
<span id="line-S-62162-545">545</span>
<span id="line-S-62162-546"><span class="lno">546</span></span>
<span id="line-S-62162-547"><span class="lno">547</span></span>
<span id="line-S-62162-548"><span class="lno">548</span></span>
<span id="line-S-62162-549"><span class="lno">549</span></span>
<span id="line-S-62162-550">550</span>
<span id="line-S-62162-551"><span class="lno">551</span></span>
<span id="line-S-62162-552"><span class="lno">552</span></span>
<span id="line-S-62162-553"><span class="lno">553</span></span>
<span id="line-S-62162-554"><span class="lno">554</span></span>
<span id="line-S-62162-555">555</span>
<span id="line-S-62162-556"><span class="lno">556</span></span>
<span id="line-S-62162-557"><span class="lno">557</span></span>
<span id="line-S-62162-558"><span class="lno">558</span></span>
<span id="line-S-62162-559"><span class="lno">559</span></span>
<span id="line-S-62162-560">560</span>
<span id="line-S-62162-561"><span class="lno">561</span></span>
<span id="line-S-62162-562"><span class="lno">562</span></span>
<span id="line-S-62162-563"><span class="lno">563</span></span>
<span id="line-S-62162-564"><span class="lno">564</span></span>
<span id="line-S-62162-565">565</span>
<span id="line-S-62162-566"><span class="lno">566</span></span>
<span id="line-S-62162-567"><span class="lno">567</span></span>
<span id="line-S-62162-568"><span class="lno">568</span></span>
<span id="line-S-62162-569"><span class="lno">569</span></span>
<span id="line-S-62162-570">570</span>
<span id="line-S-62162-571"><span class="lno">571</span></span>
<span id="line-S-62162-572"><span class="lno">572</span></span>
<span id="line-S-62162-573"><span class="lno">573</span></span>
<span id="line-S-62162-574"><span class="lno">574</span></span>
<span id="line-S-62162-575">575</span>
<span id="line-S-62162-576"><span class="lno">576</span></span>
<span id="line-S-62162-577"><span class="lno">577</span></span>
<span id="line-S-62162-578"><span class="lno">578</span></span>
<span id="line-S-62162-579"><span class="lno">579</span></span>
<span id="line-S-62162-580">580</span>
<span id="line-S-62162-581"><span class="lno">581</span></span>
<span id="line-S-62162-582"><span class="lno">582</span></span>
<span id="line-S-62162-583"><span class="lno">583</span></span>
<span id="line-S-62162-584"><span class="lno">584</span></span>
<span id="line-S-62162-585">585</span>
<span id="line-S-62162-586"><span class="lno">586</span></span>
<span id="line-S-62162-587"><span class="lno">587</span></span>
<span id="line-S-62162-588"><span class="lno">588</span></span>
<span id="line-S-62162-589"><span class="lno">589</span></span>
<span id="line-S-62162-590">590</span>
<span id="line-S-62162-591"><span class="lno">591</span></span>
<span id="line-S-62162-592"><span class="lno">592</span></span>
<span id="line-S-62162-593"><span class="lno">593</span></span>
<span id="line-S-62162-594"><span class="lno">594</span></span>
<span id="line-S-62162-595">595</span>
<span id="line-S-62162-596"><span class="lno">596</span></span>
<span id="line-S-62162-597"><span class="lno">597</span></span>
<span id="line-S-62162-598"><span class="lno">598</span></span>
<span id="line-S-62162-599"><span class="lno">599</span></span>
<span id="line-S-62162-600">600</span>
<span id="line-S-62162-601"><span class="lno">601</span></span>
<span id="line-S-62162-602"><span class="lno">602</span></span>
<span id="line-S-62162-603"><span class="lno">603</span></span>
<span id="line-S-62162-604"><span class="lno">604</span></span>
<span id="line-S-62162-605">605</span>
<span id="line-S-62162-606"><span class="lno">606</span></span>
<span id="line-S-62162-607"><span class="lno">607</span></span>
<span id="line-S-62162-608"><span class="lno">608</span></span>
<span id="line-S-62162-609"><span class="lno">609</span></span>
<span id="line-S-62162-610">610</span>
<span id="line-S-62162-611"><span class="lno">611</span></span>
<span id="line-S-62162-612"><span class="lno">612</span></span>
<span id="line-S-62162-613"><span class="lno">613</span></span>
<span id="line-S-62162-614"><span class="lno">614</span></span>
<span id="line-S-62162-615">615</span>
<span id="line-S-62162-616"><span class="lno">616</span></span>
<span id="line-S-62162-617"><span class="lno">617</span></span>
<span id="line-S-62162-618"><span class="lno">618</span></span>
<span id="line-S-62162-619"><span class="lno">619</span></span>
<span id="line-S-62162-620">620</span>
<span id="line-S-62162-621"><span class="lno">621</span></span>
<span id="line-S-62162-622"><span class="lno">622</span></span>
<span id="line-S-62162-623"><span class="lno">623</span></span>
<span id="line-S-62162-624"><span class="lno">624</span></span>
<span id="line-S-62162-625">625</span>
<span id="line-S-62162-626"><span class="lno">626</span></span>
<span id="line-S-62162-627"><span class="lno">627</span></span>
<span id="line-S-62162-628"><span class="lno">628</span></span>
<span id="line-S-62162-629"><span class="lno">629</span></span>
<span id="line-S-62162-630">630</span>
<span id="line-S-62162-631"><span class="lno">631</span></span>
<span id="line-S-62162-632"><span class="lno">632</span></span>
<span id="line-S-62162-633"><span class="lno">633</span></span>
<span id="line-S-62162-634"><span class="lno">634</span></span>
<span id="line-S-62162-635">635</span>
<span id="line-S-62162-636"><span class="lno">636</span></span>
<span id="line-S-62162-637"><span class="lno">637</span></span>
<span id="line-S-62162-638"><span class="lno">638</span></span>
<span id="line-S-62162-639"><span class="lno">639</span></span>
<span id="line-S-62162-640">640</span>
<span id="line-S-62162-641"><span class="lno">641</span></span>
<span id="line-S-62162-642"><span class="lno">642</span></span>
<span id="line-S-62162-643"><span class="lno">643</span></span>
<span id="line-S-62162-644"><span class="lno">644</span></span>
<span id="line-S-62162-645">645</span>
<span id="line-S-62162-646"><span class="lno">646</span></span>
<span id="line-S-62162-647"><span class="lno">647</span></span>
<span id="line-S-62162-648"><span class="lno">648</span></span>
<span id="line-S-62162-649"><span class="lno">649</span></span>
<span id="line-S-62162-650">650</span>
<span id="line-S-62162-651"><span class="lno">651</span></span>
<span id="line-S-62162-652"><span class="lno">652</span></span>
<span id="line-S-62162-653"><span class="lno">653</span></span>
<span id="line-S-62162-654"><span class="lno">654</span></span>
<span id="line-S-62162-655">655</span>
<span id="line-S-62162-656"><span class="lno">656</span></span>
<span id="line-S-62162-657"><span class="lno">657</span></span>
<span id="line-S-62162-658"><span class="lno">658</span></span>
<span id="line-S-62162-659"><span class="lno">659</span></span>
<span id="line-S-62162-660">660</span>
<span id="line-S-62162-661"><span class="lno">661</span></span>
<span id="line-S-62162-662"><span class="lno">662</span></span>
<span id="line-S-62162-663"><span class="lno">663</span></span>
<span id="line-S-62162-664"><span class="lno">664</span></span>
<span id="line-S-62162-665">665</span>
<span id="line-S-62162-666"><span class="lno">666</span></span>
<span id="line-S-62162-667"><span class="lno">667</span></span>
<span id="line-S-62162-668"><span class="lno">668</span></span>
<span id="line-S-62162-669"><span class="lno">669</span></span>
<span id="line-S-62162-670">670</span>
<span id="line-S-62162-671"><span class="lno">671</span></span>
<span id="line-S-62162-672"><span class="lno">672</span></span>
<span id="line-S-62162-673"><span class="lno">673</span></span>
<span id="line-S-62162-674"><span class="lno">674</span></span>
<span id="line-S-62162-675">675</span>
<span id="line-S-62162-676"><span class="lno">676</span></span>
<span id="line-S-62162-677"><span class="lno">677</span></span>
<span id="line-S-62162-678"><span class="lno">678</span></span>
<span id="line-S-62162-679"><span class="lno">679</span></span>
<span id="line-S-62162-680">680</span>
<span id="line-S-62162-681"><span class="lno">681</span></span>
<span id="line-S-62162-682"><span class="lno">682</span></span>
<span id="line-S-62162-683"><span class="lno">683</span></span>
<span id="line-S-62162-684"><span class="lno">684</span></span>
<span id="line-S-62162-685">685</span>
<span id="line-S-62162-686"><span class="lno">686</span></span>
<span id="line-S-62162-687"><span class="lno">687</span></span>
<span id="line-S-62162-688"><span class="lno">688</span></span>
<span id="line-S-62162-689"><span class="lno">689</span></span>
<span id="line-S-62162-690">690</span>
<span id="line-S-62162-691"><span class="lno">691</span></span>
<span id="line-S-62162-692"><span class="lno">692</span></span>
<span id="line-S-62162-693"><span class="lno">693</span></span>
<span id="line-S-62162-694"><span class="lno">694</span></span>
<span id="line-S-62162-695">695</span>
<span id="line-S-62162-696"><span class="lno">696</span></span>
<span id="line-S-62162-697"><span class="lno">697</span></span>
<span id="line-S-62162-698"><span class="lno">698</span></span>
<span id="line-S-62162-699"><span class="lno">699</span></span>
<span id="line-S-62162-700">700</span>
<span id="line-S-62162-701"><span class="lno">701</span></span>
<span id="line-S-62162-702"><span class="lno">702</span></span>
<span id="line-S-62162-703"><span class="lno">703</span></span>
<span id="line-S-62162-704"><span class="lno">704</span></span>
<span id="line-S-62162-705">705</span>
<span id="line-S-62162-706"><span class="lno">706</span></span>
<span id="line-S-62162-707"><span class="lno">707</span></span>
<span id="line-S-62162-708"><span class="lno">708</span></span>
<span id="line-S-62162-709"><span class="lno">709</span></span>
<span id="line-S-62162-710">710</span>
<span id="line-S-62162-711"><span class="lno">711</span></span>
<span id="line-S-62162-712"><span class="lno">712</span></span>
<span id="line-S-62162-713"><span class="lno">713</span></span>
<span id="line-S-62162-714"><span class="lno">714</span></span>
<span id="line-S-62162-715">715</span>
<span id="line-S-62162-716"><span class="lno">716</span></span>
<span id="line-S-62162-717"><span class="lno">717</span></span>
<span id="line-S-62162-718"><span class="lno">718</span></span>
<span id="line-S-62162-719"><span class="lno">719</span></span>
<span id="line-S-62162-720">720</span>
<span id="line-S-62162-721"><span class="lno">721</span></span>
<span id="line-S-62162-722"><span class="lno">722</span></span>
<span id="line-S-62162-723"><span class="lno">723</span></span>
<span id="line-S-62162-724"><span class="lno">724</span></span>
<span id="line-S-62162-725">725</span>
<span id="line-S-62162-726"><span class="lno">726</span></span>
<span id="line-S-62162-727"><span class="lno">727</span></span>
<span id="line-S-62162-728"><span class="lno">728</span></span>
<span id="line-S-62162-729"><span class="lno">729</span></span>
<span id="line-S-62162-730">730</span>
<span id="line-S-62162-731"><span class="lno">731</span></span>
<span id="line-S-62162-732"><span class="lno">732</span></span>
<span id="line-S-62162-733"><span class="lno">733</span></span>
<span id="line-S-62162-734"><span class="lno">734</span></span>
<span id="line-S-62162-735">735</span>
<span id="line-S-62162-736"><span class="lno">736</span></span>
<span id="line-S-62162-737"><span class="lno">737</span></span>
<span id="line-S-62162-738"><span class="lno">738</span></span>
<span id="line-S-62162-739"><span class="lno">739</span></span>
<span id="line-S-62162-740">740</span>
<span id="line-S-62162-741"><span class="lno">741</span></span>
<span id="line-S-62162-742"><span class="lno">742</span></span>
<span id="line-S-62162-743"><span class="lno">743</span></span>
<span id="line-S-62162-744"><span class="lno">744</span></span>
<span id="line-S-62162-745">745</span>
<span id="line-S-62162-746"><span class="lno">746</span></span>
<span id="line-S-62162-747"><span class="lno">747</span></span>
<span id="line-S-62162-748"><span class="lno">748</span></span>
<span id="line-S-62162-749"><span class="lno">749</span></span>
<span id="line-S-62162-750">750</span>
<span id="line-S-62162-751"><span class="lno">751</span></span>
<span id="line-S-62162-752"><span class="lno">752</span></span>
<span id="line-S-62162-753"><span class="lno">753</span></span>
<span id="line-S-62162-754"><span class="lno">754</span></span>
<span id="line-S-62162-755">755</span>
<span id="line-S-62162-756"><span class="lno">756</span></span>
<span id="line-S-62162-757"><span class="lno">757</span></span>
<span id="line-S-62162-758"><span class="lno">758</span></span>
<span id="line-S-62162-759"><span class="lno">759</span></span>
<span id="line-S-62162-760">760</span>
<span id="line-S-62162-761"><span class="lno">761</span></span>
<span id="line-S-62162-762"><span class="lno">762</span></span>
<span id="line-S-62162-763"><span class="lno">763</span></span>
<span id="line-S-62162-764"><span class="lno">764</span></span>
<span id="line-S-62162-765">765</span>
<span id="line-S-62162-766"><span class="lno">766</span></span>
<span id="line-S-62162-767"><span class="lno">767</span></span>
<span id="line-S-62162-768"><span class="lno">768</span></span>
<span id="line-S-62162-769"><span class="lno">769</span></span>
<span id="line-S-62162-770">770</span>
<span id="line-S-62162-771"><span class="lno">771</span></span>
<span id="line-S-62162-772"><span class="lno">772</span></span>
<span id="line-S-62162-773"><span class="lno">773</span></span>
<span id="line-S-62162-774"><span class="lno">774</span></span>
<span id="line-S-62162-775">775</span>
<span id="line-S-62162-776"><span class="lno">776</span></span>
<span id="line-S-62162-777"><span class="lno">777</span></span>
<span id="line-S-62162-778"><span class="lno">778</span></span>
<span id="line-S-62162-779"><span class="lno">779</span></span>
<span id="line-S-62162-780">780</span>
<span id="line-S-62162-781"><span class="lno">781</span></span>
<span id="line-S-62162-782"><span class="lno">782</span></span>
<span id="line-S-62162-783"><span class="lno">783</span></span>
<span id="line-S-62162-784"><span class="lno">784</span></span>
<span id="line-S-62162-785">785</span>
<span id="line-S-62162-786"><span class="lno">786</span></span>
<span id="line-S-62162-787"><span class="lno">787</span></span>
<span id="line-S-62162-788"><span class="lno">788</span></span>
<span id="line-S-62162-789"><span class="lno">789</span></span>
<span id="line-S-62162-790">790</span>
<span id="line-S-62162-791"><span class="lno">791</span></span>
<span id="line-S-62162-792"><span class="lno">792</span></span>
<span id="line-S-62162-793"><span class="lno">793</span></span>
<span id="line-S-62162-794"><span class="lno">794</span></span>
<span id="line-S-62162-795">795</span>
<span id="line-S-62162-796"><span class="lno">796</span></span>
<span id="line-S-62162-797"><span class="lno">797</span></span>
<span id="line-S-62162-798"><span class="lno">798</span></span>
<span id="line-S-62162-799"><span class="lno">799</span></span>
<span id="line-S-62162-800">800</span>
<span id="line-S-62162-801"><span class="lno">801</span></span>
<span id="line-S-62162-802"><span class="lno">802</span></span>
<span id="line-S-62162-803"><span class="lno">803</span></span>
<span id="line-S-62162-804"><span class="lno">804</span></span>
<span id="line-S-62162-805">805</span>
<span id="line-S-62162-806"><span class="lno">806</span></span>
<span id="line-S-62162-807"><span class="lno">807</span></span>
<span id="line-S-62162-808"><span class="lno">808</span></span>
<span id="line-S-62162-809"><span class="lno">809</span></span>
<span id="line-S-62162-810">810</span>
<span id="line-S-62162-811"><span class="lno">811</span></span>
<span id="line-S-62162-812"><span class="lno">812</span></span>
<span id="line-S-62162-813"><span class="lno">813</span></span>
<span id="line-S-62162-814"><span class="lno">814</span></span>
<span id="line-S-62162-815">815</span>
<span id="line-S-62162-816"><span class="lno">816</span></span>
<span id="line-S-62162-817"><span class="lno">817</span></span>
<span id="line-S-62162-818"><span class="lno">818</span></span>
<span id="line-S-62162-819"><span class="lno">819</span></span>
<span id="line-S-62162-820">820</span>
<span id="line-S-62162-821"><span class="lno">821</span></span>
<span id="line-S-62162-822"><span class="lno">822</span></span>
<span id="line-S-62162-823"><span class="lno">823</span></span>
<span id="line-S-62162-824"><span class="lno">824</span></span>
<span id="line-S-62162-825">825</span>
<span id="line-S-62162-826"><span class="lno">826</span></span>
<span id="line-S-62162-827"><span class="lno">827</span></span>
<span id="line-S-62162-828"><span class="lno">828</span></span>
<span id="line-S-62162-829"><span class="lno">829</span></span>
<span id="line-S-62162-830">830</span>
<span id="line-S-62162-831"><span class="lno">831</span></span>
<span id="line-S-62162-832"><span class="lno">832</span></span>
<span id="line-S-62162-833"><span class="lno">833</span></span>
<span id="line-S-62162-834"><span class="lno">834</span></span>
<span id="line-S-62162-835">835</span>
<span id="line-S-62162-836"><span class="lno">836</span></span>
<span id="line-S-62162-837"><span class="lno">837</span></span>
<span id="line-S-62162-838"><span class="lno">838</span></span>
<span id="line-S-62162-839"><span class="lno">839</span></span>
<span id="line-S-62162-840">840</span>
<span id="line-S-62162-841"><span class="lno">841</span></span>
<span id="line-S-62162-842"><span class="lno">842</span></span>
<span id="line-S-62162-843"><span class="lno">843</span></span>
<span id="line-S-62162-844"><span class="lno">844</span></span>
<span id="line-S-62162-845">845</span>
<span id="line-S-62162-846"><span class="lno">846</span></span>
<span id="line-S-62162-847"><span class="lno">847</span></span>
<span id="line-S-62162-848"><span class="lno">848</span></span>
<span id="line-S-62162-849"><span class="lno">849</span></span>
<span id="line-S-62162-850">850</span>
<span id="line-S-62162-851"><span class="lno">851</span></span>
<span id="line-S-62162-852"><span class="lno">852</span></span>
<span id="line-S-62162-853"><span class="lno">853</span></span>
<span id="line-S-62162-854"><span class="lno">854</span></span>
<span id="line-S-62162-855">855</span>
<span id="line-S-62162-856"><span class="lno">856</span></span>
<span id="line-S-62162-857"><span class="lno">857</span></span>
<span id="line-S-62162-858"><span class="lno">858</span></span>
<span id="line-S-62162-859"><span class="lno">859</span></span>
<span id="line-S-62162-860">860</span>
<span id="line-S-62162-861"><span class="lno">861</span></span>
<span id="line-S-62162-862"><span class="lno">862</span></span>
<span id="line-S-62162-863"><span class="lno">863</span></span>
<span id="line-S-62162-864"><span class="lno">864</span></span>
<span id="line-S-62162-865">865</span>
<span id="line-S-62162-866"><span class="lno">866</span></span>
<span id="line-S-62162-867"><span class="lno">867</span></span>
<span id="line-S-62162-868"><span class="lno">868</span></span>
<span id="line-S-62162-869"><span class="lno">869</span></span>
<span id="line-S-62162-870">870</span>
<span id="line-S-62162-871"><span class="lno">871</span></span>
<span id="line-S-62162-872"><span class="lno">872</span></span>
<span id="line-S-62162-873"><span class="lno">873</span></span>
<span id="line-S-62162-874"><span class="lno">874</span></span>
<span id="line-S-62162-875">875</span>
<span id="line-S-62162-876"><span class="lno">876</span></span>
<span id="line-S-62162-877"><span class="lno">877</span></span>
<span id="line-S-62162-878"><span class="lno">878</span></span>
<span id="line-S-62162-879"><span class="lno">879</span></span>
<span id="line-S-62162-880">880</span>
<span id="line-S-62162-881"><span class="lno">881</span></span>
<span id="line-S-62162-882"><span class="lno">882</span></span>
<span id="line-S-62162-883"><span class="lno">883</span></span>
<span id="line-S-62162-884"><span class="lno">884</span></span>
<span id="line-S-62162-885">885</span>
<span id="line-S-62162-886"><span class="lno">886</span></span>
<span id="line-S-62162-887"><span class="lno">887</span></span>
<span id="line-S-62162-888"><span class="lno">888</span></span>
<span id="line-S-62162-889"><span class="lno">889</span></span>
<span id="line-S-62162-890">890</span>
<span id="line-S-62162-891"><span class="lno">891</span></span>
<span id="line-S-62162-892"><span class="lno">892</span></span>
<span id="line-S-62162-893"><span class="lno">893</span></span>
<span id="line-S-62162-894"><span class="lno">894</span></span>
<span id="line-S-62162-895">895</span>
<span id="line-S-62162-896"><span class="lno">896</span></span>
<span id="line-S-62162-897"><span class="lno">897</span></span>
<span id="line-S-62162-898"><span class="lno">898</span></span>
<span id="line-S-62162-899"><span class="lno">899</span></span>
<span id="line-S-62162-900">900</span>
<span id="line-S-62162-901"><span class="lno">901</span></span>
<span id="line-S-62162-902"><span class="lno">902</span></span>
<span id="line-S-62162-903"><span class="lno">903</span></span>
<span id="line-S-62162-904"><span class="lno">904</span></span>
<span id="line-S-62162-905">905</span>
<span id="line-S-62162-906"><span class="lno">906</span></span>
<span id="line-S-62162-907"><span class="lno">907</span></span>
<span id="line-S-62162-908"><span class="lno">908</span></span>
<span id="line-S-62162-909"><span class="lno">909</span></span>
<span id="line-S-62162-910">910</span>
<span id="line-S-62162-911"><span class="lno">911</span></span>
<span id="line-S-62162-912"><span class="lno">912</span></span>
<span id="line-S-62162-913"><span class="lno">913</span></span>
<span id="line-S-62162-914"><span class="lno">914</span></span>
<span id="line-S-62162-915">915</span>
<span id="line-S-62162-916"><span class="lno">916</span></span>
<span id="line-S-62162-917"><span class="lno">917</span></span>
<span id="line-S-62162-918"><span class="lno">918</span></span>
<span id="line-S-62162-919"><span class="lno">919</span></span>
<span id="line-S-62162-920">920</span>
<span id="line-S-62162-921"><span class="lno">921</span></span>
<span id="line-S-62162-922"><span class="lno">922</span></span>
<span id="line-S-62162-923"><span class="lno">923</span></span>
<span id="line-S-62162-924"><span class="lno">924</span></span>
<span id="line-S-62162-925">925</span>
<span id="line-S-62162-926"><span class="lno">926</span></span>
<span id="line-S-62162-927"><span class="lno">927</span></span>
<span id="line-S-62162-928"><span class="lno">928</span></span>
<span id="line-S-62162-929"><span class="lno">929</span></span>
<span id="line-S-62162-930">930</span>
<span id="line-S-62162-931"><span class="lno">931</span></span>
<span id="line-S-62162-932"><span class="lno">932</span></span>
<span id="line-S-62162-933"><span class="lno">933</span></span>
<span id="line-S-62162-934"><span class="lno">934</span></span>
<span id="line-S-62162-935">935</span>
<span id="line-S-62162-936"><span class="lno">936</span></span>
<span id="line-S-62162-937"><span class="lno">937</span></span>
<span id="line-S-62162-938"><span class="lno">938</span></span>
<span id="line-S-62162-939"><span class="lno">939</span></span>
<span id="line-S-62162-940">940</span>
<span id="line-S-62162-941"><span class="lno">941</span></span>
<span id="line-S-62162-942"><span class="lno">942</span></span>
<span id="line-S-62162-943"><span class="lno">943</span></span>
<span id="line-S-62162-944"><span class="lno">944</span></span>
<span id="line-S-62162-945">945</span>
<span id="line-S-62162-946"><span class="lno">946</span></span>
<span id="line-S-62162-947"><span class="lno">947</span></span>
<span id="line-S-62162-948"><span class="lno">948</span></span>
<span id="line-S-62162-949"><span class="lno">949</span></span>
<span id="line-S-62162-950">950</span>
<span id="line-S-62162-951"><span class="lno">951</span></span>
<span id="line-S-62162-952"><span class="lno">952</span></span>
<span id="line-S-62162-953"><span class="lno">953</span></span>
<span id="line-S-62162-954"><span class="lno">954</span></span>
<span id="line-S-62162-955">955</span>
<span id="line-S-62162-956"><span class="lno">956</span></span>
<span id="line-S-62162-957"><span class="lno">957</span></span>
<span id="line-S-62162-958"><span class="lno">958</span></span>
<span id="line-S-62162-959"><span class="lno">959</span></span>
<span id="line-S-62162-960">960</span>
<span id="line-S-62162-961"><span class="lno">961</span></span>
<span id="line-S-62162-962"><span class="lno">962</span></span>
<span id="line-S-62162-963"><span class="lno">963</span></span>
<span id="line-S-62162-964"><span class="lno">964</span></span>
<span id="line-S-62162-965">965</span>
<span id="line-S-62162-966"><span class="lno">966</span></span>
<span id="line-S-62162-967"><span class="lno">967</span></span>
<span id="line-S-62162-968"><span class="lno">968</span></span>
<span id="line-S-62162-969"><span class="lno">969</span></span>
<span id="line-S-62162-970">970</span>
<span id="line-S-62162-971"><span class="lno">971</span></span>
<span id="line-S-62162-972"><span class="lno">972</span></span>
<span id="line-S-62162-973"><span class="lno">973</span></span>
<span id="line-S-62162-974"><span class="lno">974</span></span>
<span id="line-S-62162-975">975</span>
<span id="line-S-62162-976"><span class="lno">976</span></span>
<span id="line-S-62162-977"><span class="lno">977</span></span>
<span id="line-S-62162-978"><span class="lno">978</span></span>
<span id="line-S-62162-979"><span class="lno">979</span></span>
<span id="line-S-62162-980">980</span>
<span id="line-S-62162-981"><span class="lno">981</span></span>
<span id="line-S-62162-982"><span class="lno">982</span></span>
<span id="line-S-62162-983"><span class="lno">983</span></span>
<span id="line-S-62162-984"><span class="lno">984</span></span>
<span id="line-S-62162-985">985</span>
<span id="line-S-62162-986"><span class="lno">986</span></span>
<span id="line-S-62162-987"><span class="lno">987</span></span>
<span id="line-S-62162-988"><span class="lno">988</span></span>
<span id="line-S-62162-989"><span class="lno">989</span></span>
<span id="line-S-62162-990">990</span>
<span id="line-S-62162-991"><span class="lno">991</span></span>
<span id="line-S-62162-992"><span class="lno">992</span></span>
<span id="line-S-62162-993"><span class="lno">993</span></span>
<span id="line-S-62162-994"><span class="lno">994</span></span>
<span id="line-S-62162-995">995</span>
<span id="line-S-62162-996"><span class="lno">996</span></span>
<span id="line-S-62162-997"><span class="lno">997</span></span>
<span id="line-S-62162-998"><span class="lno">998</span></span>
<span id="line-S-62162-999"><span class="lno">999</span></span>
</pre></td><td valign="top"><pre><code class="language-xml">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                xmlns:db="http://docbook.org/ns/docbook"
                xmlns:dbe="http://docbook.org/ns/docbook/errors"
                xmlns:f="http://docbook.org/ns/docbook/functions"
                xmlns:m="http://docbook.org/ns/docbook/modes"
                xmlns:t="http://docbook.org/ns/docbook/templates"
                xmlns:tp="http://docbook.org/ns/docbook/templates/private"
                xmlns:v="http://docbook.org/ns/docbook/variables"
                xmlns:xs="http://www.w3.org/2001/XMLSchema"
                xmlns="http://www.w3.org/1999/xhtml"
                default-mode="m:docbook"
                exclude-result-prefixes="db dbe f m t tp v xs"
                version="3.0"&gt;

&lt;xsl:template match="db:productionset"&gt;
  &lt;div&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
    &lt;xsl:apply-templates select="." mode="m:generate-titlepage"/&gt;
    &lt;div class="productions"&gt;
      &lt;xsl:apply-templates/&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:production"&gt;
  &lt;xsl:param name="recap" select="false()"/&gt;
  &lt;xsl:apply-templates select="db:lhs"&gt;
    &lt;xsl:with-param name="recap" select="$recap"/&gt;
  &lt;/xsl:apply-templates&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:productionrecap[@linkend]"&gt;
  &lt;xsl:variable name="prod" select="key('id', @linkend)"/&gt;
  &lt;xsl:choose&gt;
    &lt;xsl:when test="empty($prod)"&gt;
      &lt;xsl:message select="'Failed to find production: ' || @linkend"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="$prod/self::db:production"&gt;
      &lt;xsl:apply-templates select="$prod"&gt;
        &lt;xsl:with-param name="recap" select="true()"/&gt;
      &lt;/xsl:apply-templates&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:sequence select="error($dbe:INVALID-PRODUCTIONRECAP,
                                  'Not a production: ' || @linkend)"/&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:lhs"&gt;
  &lt;xsl:param name="recap" select="false()"/&gt;
  &lt;div&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
    &lt;span class="lhs"&gt;
      &lt;xsl:apply-templates select=".." mode="m:production-number"&gt;
        &lt;xsl:with-param name="recap" select="$recap"/&gt;
      &lt;/xsl:apply-templates&gt;
      &lt;xsl:apply-templates/&gt;
    &lt;/span&gt;
    &lt;span class="lhssep lhs1sep"&gt;
      &lt;xsl:sequence select="$productionset-lhs-rhs-separator"/&gt;
    &lt;/span&gt;
    &lt;xsl:apply-templates select="(following-sibling::db:rhs)[1]"/&gt;
  &lt;/div&gt;
  &lt;xsl:apply-templates
      select="(following-sibling::db:rhs)[1]/following-sibling::db:rhs"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:production" mode="m:production-number"&gt;
  &lt;xsl:param name="recap" select="false()"/&gt;
  &lt;span class="number"&gt;
    &lt;xsl:if test="not($recap)"&gt;
      &lt;xsl:attribute name="id" select="f:generate-id(.)"/&gt;
    &lt;/xsl:if&gt;
    &lt;xsl:text&gt;[&lt;/xsl:text&gt;
    &lt;xsl:number from="/" level="any"/&gt;
    &lt;xsl:text&gt;] &lt;/xsl:text&gt;
  &lt;/span&gt;
&lt;/xsl:template&gt;

&lt;!-- the first rhs --&gt;
&lt;xsl:template match="db:rhs[not(preceding-sibling::db:rhs)]"
              priority="10"&gt;
  &lt;span&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
    &lt;xsl:apply-templates/&gt;
  &lt;/span&gt;
  &lt;span class="constraint"&gt;
    &lt;xsl:apply-templates select="../db:constraint"/&gt;
  &lt;/span&gt;
&lt;/xsl:template&gt;

&lt;!-- all the other rhs --&gt;
&lt;xsl:template match="db:rhs"&gt;
  &lt;div&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
    &lt;span class="lhs ghost"&gt;&lt;/span&gt;
    &lt;span class="lhssep"&gt;&lt;/span&gt;
    &lt;span class="rhs"&gt;
      &lt;xsl:apply-templates/&gt;
    &lt;/span&gt;
    &lt;span class="constraint"&gt;&lt;/span&gt;
  &lt;/div&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:constraint[@linkend]"&gt;
  &lt;xsl:variable name="cons" select="key('id', @linkend)"/&gt;
  &lt;xsl:choose&gt;
    &lt;xsl:when test="empty($cons)"&gt;
      &lt;xsl:message select="'Failed to find constraint: ' || @linkend"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="$cons/self::db:constraintdef"&gt;
      &lt;a href="#{@linkend}"&gt;
        &lt;xsl:sequence select="@linkend/string()"/&gt;
      &lt;/a&gt;
      &lt;xsl:text&gt; &lt;/xsl:text&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:sequence select="error($dbe:INVALID-CONSTRAINT,
                                  'Not a constraintdef: ' || @linkend)"/&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:lineannotation"&gt;
  &lt;span&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
    &lt;xsl:apply-templates/&gt;
  &lt;/span&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:sbr"&gt;
  &lt;br/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:nonterminal"&gt;
  &lt;a href="{@def}"&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
    &lt;xsl:apply-templates/&gt;
  &lt;/a&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:constraintdef"&gt;
  &lt;div&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
    &lt;xsl:apply-templates select="." mode="m:generate-titlepage"/&gt;
    &lt;xsl:apply-templates/&gt;
  &lt;/div&gt;
&lt;/xsl:template&gt;

&lt;!-- ============================================================ --&gt;

&lt;xsl:template match="db:funcsynopsis"&gt;
  &lt;xsl:variable name="style"
                select="f:pi(., 'funcsynopsis-style', $funcsynopsis-default-style)"/&gt;
  &lt;div&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;

    &lt;xsl:choose&gt;
      &lt;xsl:when test="$style = 'kr'"&gt;
        &lt;xsl:apply-templates mode="m:kr"/&gt;
      &lt;/xsl:when&gt;
      &lt;xsl:when test="$style = 'ansi'"&gt;
        &lt;xsl:apply-templates mode="m:ansi"/&gt;
      &lt;/xsl:when&gt;
      &lt;xsl:otherwise&gt;
        &lt;xsl:message select="'Unrecognized funcsynopsis style: ' || $style"/&gt;
        &lt;xsl:apply-templates mode="m:kr"/&gt;
      &lt;/xsl:otherwise&gt;
    &lt;/xsl:choose&gt;
  &lt;/div&gt;
&lt;/xsl:template&gt;

&lt;!-- ============================================================ --&gt;

&lt;xsl:template match="element()" mode="m:kr"&gt;
  &lt;xsl:message
      select="'Unexpected funcsynopsis element in kr: ' || node-name(.)"/&gt;
  &lt;span&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
    &lt;xsl:apply-templates mode="m:kr"/&gt;
  &lt;/span&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:funcsynopsisinfo" mode="m:kr"&gt;
  &lt;xsl:apply-templates select="."/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:funcprototype" mode="m:kr"&gt;
  &lt;xsl:variable name="width"
                select="sum(.//text() ! string-length(normalize-space(.)))"/&gt;

  &lt;xsl:choose&gt;
    &lt;xsl:when test="$width gt $funcsynopsis-table-threshold"&gt;
      &lt;xsl:apply-templates select="." mode="m:kr-table"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;div&gt;
        &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
        &lt;div&gt;
          &lt;xsl:apply-templates select="db:funcdef" mode="m:kr"/&gt;
          &lt;span class="arglist"&gt;
            &lt;xsl:text&gt;(&lt;/xsl:text&gt;
            &lt;xsl:apply-templates select="db:funcdef/following-sibling::*" mode="m:kr-args"/&gt;
            &lt;xsl:text&gt;)&lt;/xsl:text&gt;
            &lt;xsl:sequence select="$funcsynopsis-trailing-punctuation"/&gt;
          &lt;/span&gt;
        &lt;/div&gt;
        &lt;xsl:apply-templates select="db:funcdef/following-sibling::*" mode="m:kr"/&gt;
      &lt;/div&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:funcdef" mode="m:kr"&gt;
  &lt;span&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
    &lt;xsl:apply-templates mode="m:kr"/&gt;
  &lt;/span&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:type" mode="m:kr"&gt;
  &lt;span&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
    &lt;xsl:apply-templates mode="m:kr"/&gt;
  &lt;/span&gt;
  &lt;xsl:text&gt; &lt;/xsl:text&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:function" mode="m:kr"&gt;
  &lt;span&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
    &lt;xsl:apply-templates mode="m:kr"/&gt;
  &lt;/span&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:void" mode="m:kr-args"&gt;
  &lt;span&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
  &lt;/span&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:varargs" mode="m:kr-args"&gt;
  &lt;span&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
    &lt;xsl:text&gt;...&lt;/xsl:text&gt;
  &lt;/span&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:paramdef" mode="m:kr-args"&gt;
  &lt;span&gt;
    &lt;xsl:apply-templates select="db:parameter" mode="m:kr-args"/&gt;
    &lt;xsl:if test="following-sibling::db:paramdef"&gt;
      &lt;span&gt;, &lt;/span&gt;
    &lt;/xsl:if&gt;
  &lt;/span&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:parameter" mode="m:kr-args"&gt;
  &lt;span class="{local-name(.)}"&gt;
    &lt;xsl:apply-templates mode="m:kr"/&gt;
  &lt;/span&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:void" mode="m:kr"/&gt;
&lt;xsl:template match="db:varargs" mode="m:kr"/&gt;

&lt;xsl:template match="db:paramdef" mode="m:kr"&gt;
  &lt;div&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
    &lt;xsl:apply-templates mode="m:kr"/&gt;
    &lt;xsl:text&gt;;&lt;/xsl:text&gt;
  &lt;/div&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:parameter" mode="m:kr"&gt;
  &lt;span&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
    &lt;xsl:apply-templates mode="m:kr"/&gt;
  &lt;/span&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:funcparams" mode="m:kr"&gt;
  &lt;span&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
    &lt;xsl:apply-templates mode="m:kr"/&gt;
  &lt;/span&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="text()" mode="m:kr"&gt;
  &lt;xsl:sequence select="if (normalize-space(.) = '')
                        then ()
                        else ."/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="comment()|processing-instruction()" mode="m:kr"/&gt;
&lt;xsl:template match="attribute()" mode="m:kr"&gt;
  &lt;xsl:copy/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="text()" mode="m:kr-args"&gt;
  &lt;xsl:sequence select="if (normalize-space(.) = '')
                        then ()
                        else ."/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="comment()|processing-instruction()" mode="m:kr-args"/&gt;
&lt;xsl:template match="attribute()" mode="m:kr-args"&gt;
  &lt;xsl:copy/&gt;
&lt;/xsl:template&gt;

&lt;!-- ============================================================ --&gt;

&lt;xsl:template match="element()" mode="m:kr-table"&gt;
  &lt;xsl:message
      select="'Unexpected funcsynopsis element in kr-table: ' || node-name(.)"/&gt;
  &lt;span&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
    &lt;xsl:apply-templates mode="m:kr-table"/&gt;
  &lt;/span&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:funcsynopsisinfo" mode="m:kr-table"&gt;
  &lt;xsl:apply-templates select="."/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:funcprototype" mode="m:kr-table"&gt;
  &lt;xsl:variable name="rowspan" select="count(*) - 2"/&gt;

  &lt;div&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
    &lt;table class="prototype"&gt;
      &lt;tbody&gt;
        &lt;tr&gt;
          &lt;td&gt;
            &lt;xsl:apply-templates select="db:funcdef" mode="m:kr-table"/&gt;
            &lt;xsl:text&gt;(&lt;/xsl:text&gt;
          &lt;/td&gt;
          &lt;xsl:apply-templates select="db:funcdef/following-sibling::*[1]"
                               mode="m:kr-table-args"/&gt;
        &lt;/tr&gt;
        &lt;xsl:for-each select="db:funcdef/following-sibling::*[position() gt 1]"&gt;
          &lt;tr&gt;
            &lt;xsl:if test="position() = 1"&gt;
              &lt;td rowspan="{$rowspan}"/&gt;
            &lt;/xsl:if&gt;
            &lt;xsl:apply-templates select="." mode="m:kr-table-args"/&gt;
          &lt;/tr&gt;
        &lt;/xsl:for-each&gt;
      &lt;/tbody&gt;
    &lt;/table&gt;
    &lt;table class="params"&gt;
      &lt;tbody&gt;
        &lt;xsl:apply-templates select="db:paramdef" mode="m:kr-table"/&gt;
      &lt;/tbody&gt;
    &lt;/table&gt;
  &lt;/div&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:funcdef" mode="m:kr-table"&gt;
  &lt;span&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
    &lt;xsl:apply-templates mode="m:kr-table"/&gt;
  &lt;/span&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:type" mode="m:kr-table"&gt;
  &lt;span&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
    &lt;xsl:apply-templates mode="m:kr-table"/&gt;
  &lt;/span&gt;
  &lt;xsl:text&gt; &lt;/xsl:text&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:function" mode="m:kr-table"&gt;
  &lt;span&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
    &lt;xsl:apply-templates mode="m:kr-table"/&gt;
  &lt;/span&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:void" mode="m:kr-table-args"&gt;
  &lt;td&gt;
    &lt;span&gt;
      &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
    &lt;/span&gt;
    &lt;xsl:text&gt;)&lt;/xsl:text&gt;
    &lt;xsl:sequence select="$funcsynopsis-trailing-punctuation"/&gt;
  &lt;/td&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:varargs" mode="m:kr-table-args"&gt;
  &lt;td&gt;
    &lt;span&gt;
      &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
      &lt;xsl:text&gt;...&lt;/xsl:text&gt;
    &lt;/span&gt;
    &lt;xsl:text&gt;)&lt;/xsl:text&gt;
    &lt;xsl:sequence select="$funcsynopsis-trailing-punctuation"/&gt;
  &lt;/td&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:parameter" mode="m:kr-table-args"&gt;
  &lt;span class="{local-name(.)}"&gt;
    &lt;xsl:apply-templates mode="m:kr-table"/&gt;
  &lt;/span&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:void" mode="m:kr-table"/&gt;
&lt;xsl:template match="db:varargs" mode="m:kr-table"/&gt;

&lt;xsl:template match="db:paramdef" mode="m:kr-table-args"&gt;
  &lt;td&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
    &lt;xsl:apply-templates select="db:parameter" mode="m:kr-table-args"/&gt;
    &lt;xsl:sequence select="if (following-sibling::db:paramdef)
                          then ','
                          else ')' || $funcsynopsis-trailing-punctuation"/&gt;
  &lt;/td&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:paramdef" mode="m:kr-table"&gt;
  &lt;xsl:variable name="split" select="if (db:funcparams)
                                     then db:funcparams
                                     else db:parameter"/&gt;
  &lt;tr&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
    &lt;td&gt;
      &lt;xsl:apply-templates select="$split/preceding-sibling::node()"
                           mode="m:kr-table"/&gt;
    &lt;/td&gt;
    &lt;td&gt;
      &lt;xsl:apply-templates select="$split"
                           mode="m:kr-table"/&gt;
      &lt;xsl:apply-templates select="$split/following-sibling::node()"
                           mode="m:kr-table"/&gt;
    &lt;/td&gt;
  &lt;/tr&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:parameter" mode="m:kr-table"&gt;
  &lt;span&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
    &lt;xsl:apply-templates mode="m:kr-table"/&gt;
  &lt;/span&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:funcparams" mode="m:kr-table"&gt;
  &lt;xsl:text&gt;(&lt;/xsl:text&gt;
  &lt;span&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
    &lt;xsl:apply-templates mode="m:kr-table"/&gt;
  &lt;/span&gt;
  &lt;xsl:text&gt;)&lt;/xsl:text&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="text()" mode="m:kr-table"&gt;
  &lt;xsl:sequence select="if (normalize-space(.) = '')
                        then ()
                        else ."/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="comment()|processing-instruction()" mode="m:kr-table"/&gt;
&lt;xsl:template match="attribute()" mode="m:kr-table"&gt;
  &lt;xsl:copy/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="text()" mode="m:kr-table-args"&gt;
  &lt;xsl:sequence select="if (normalize-space(.) = '')
                        then ()
                        else ."/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="comment()|processing-instruction()" mode="m:kr-table-args"/&gt;
&lt;xsl:template match="attribute()|text()" mode="m:kr-table-args"&gt;
  &lt;xsl:copy/&gt;
&lt;/xsl:template&gt;

&lt;!-- ============================================================ --&gt;

&lt;xsl:template match="element()" mode="m:ansi"&gt;
  &lt;xsl:message
      select="'Unexpected funcsynopsis element in kr: ' || node-name(.)"/&gt;
  &lt;span&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
    &lt;xsl:apply-templates mode="m:ansi"/&gt;
  &lt;/span&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:funcsynopsisinfo" mode="m:ansi"&gt;
  &lt;xsl:apply-templates select="."/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:funcprototype" mode="m:ansi"&gt;
  &lt;xsl:variable name="width"
                select="sum(.//text() ! string-length(normalize-space(.)))"/&gt;

  &lt;xsl:choose&gt;
    &lt;xsl:when test="$width gt $funcsynopsis-table-threshold"&gt;
      &lt;xsl:apply-templates select="." mode="m:ansi-table"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;div&gt;
        &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
        &lt;xsl:apply-templates select="db:funcdef" mode="m:ansi"/&gt;
        &lt;span class="arglist"&gt;
          &lt;xsl:text&gt;(&lt;/xsl:text&gt;
          &lt;xsl:apply-templates
              select="db:funcdef/following-sibling::*" mode="m:ansi"/&gt;
          &lt;xsl:text&gt;)&lt;/xsl:text&gt;
          &lt;xsl:sequence select="$funcsynopsis-trailing-punctuation"/&gt;
        &lt;/span&gt;
      &lt;/div&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:funcdef" mode="m:ansi"&gt;
  &lt;span&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
    &lt;xsl:apply-templates mode="m:ansi"/&gt;
  &lt;/span&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:type" mode="m:ansi"&gt;
  &lt;span&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
    &lt;xsl:apply-templates mode="m:ansi"/&gt;
  &lt;/span&gt;
  &lt;xsl:text&gt; &lt;/xsl:text&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:function" mode="m:ansi"&gt;
  &lt;span&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
    &lt;xsl:apply-templates mode="m:ansi"/&gt;
  &lt;/span&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:void" mode="m:ansi"&gt;
  &lt;span&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
    &lt;xsl:text&gt;void&lt;/xsl:text&gt;
  &lt;/span&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:varargs" mode="m:ansi"&gt;
  &lt;span&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
    &lt;xsl:text&gt;...&lt;/xsl:text&gt;
  &lt;/span&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:paramdef" mode="m:ansi"&gt;
  &lt;span&gt;
    &lt;xsl:apply-templates mode="m:ansi"/&gt;
    &lt;xsl:if test="following-sibling::db:paramdef"&gt;
      &lt;span&gt;, &lt;/span&gt;
    &lt;/xsl:if&gt;
  &lt;/span&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:parameter" mode="m:ansi"&gt;
  &lt;span class="{local-name(.)}"&gt;
    &lt;xsl:apply-templates mode="m:ansi"/&gt;
  &lt;/span&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:funcparams" mode="m:ansi"&gt;
  &lt;span&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
    &lt;xsl:apply-templates mode="m:ansi"/&gt;
  &lt;/span&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="text()" mode="m:ansi"&gt;
  &lt;xsl:sequence select="if (normalize-space(.) = '')
                        then ()
                        else ."/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="comment()|processing-instruction()" mode="m:ansi"/&gt;
&lt;xsl:template match="attribute()" mode="m:ansi"&gt;
  &lt;xsl:copy/&gt;
&lt;/xsl:template&gt;

&lt;!-- ============================================================ --&gt;

&lt;xsl:template match="element()" mode="m:ansi-table"&gt;
  &lt;xsl:message
      select="'Unexpected funcsynopsis element in kr-table: ' || node-name(.)"/&gt;
  &lt;span&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
    &lt;xsl:apply-templates mode="m:ansi-table"/&gt;
  &lt;/span&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:funcsynopsisinfo" mode="m:ansi-table"&gt;
  &lt;xsl:apply-templates select="."/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:funcprototype" mode="m:ansi-table"&gt;
  &lt;xsl:variable name="rowspan" select="count(*) - 2"/&gt;

  &lt;div&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
    &lt;table class="prototype"&gt;
      &lt;tbody&gt;
        &lt;tr&gt;
          &lt;td&gt;
            &lt;xsl:apply-templates select="db:funcdef" mode="m:ansi-table"/&gt;
            &lt;xsl:text&gt;(&lt;/xsl:text&gt;
          &lt;/td&gt;
          &lt;xsl:apply-templates select="db:funcdef/following-sibling::*[1]"
                               mode="m:ansi-table"/&gt;
        &lt;/tr&gt;
        &lt;xsl:for-each select="db:funcdef/following-sibling::*[position() gt 1]"&gt;
          &lt;tr&gt;
            &lt;xsl:if test="position() = 1"&gt;
              &lt;td rowspan="{$rowspan}"/&gt;
            &lt;/xsl:if&gt;
            &lt;xsl:apply-templates select="." mode="m:ansi-table"/&gt;
          &lt;/tr&gt;
        &lt;/xsl:for-each&gt;
      &lt;/tbody&gt;
    &lt;/table&gt;
  &lt;/div&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:funcdef" mode="m:ansi-table"&gt;
  &lt;span&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
    &lt;xsl:apply-templates mode="m:ansi-table"/&gt;
  &lt;/span&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:type" mode="m:ansi-table"&gt;
  &lt;span&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
    &lt;xsl:apply-templates mode="m:ansi-table"/&gt;
  &lt;/span&gt;
  &lt;xsl:text&gt; &lt;/xsl:text&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:function" mode="m:ansi-table"&gt;
  &lt;span&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
    &lt;xsl:apply-templates mode="m:ansi-table"/&gt;
  &lt;/span&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:void" mode="m:ansi-table"&gt;
  &lt;td&gt;
    &lt;span&gt;
      &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
      &lt;xsl:apply-templates mode="m:ansi-table"/&gt;
    &lt;/span&gt;
    &lt;xsl:text&gt;)&lt;/xsl:text&gt;
    &lt;xsl:sequence select="$funcsynopsis-trailing-punctuation"/&gt;
  &lt;/td&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:varargs" mode="m:ansi-table"&gt;
  &lt;td&gt;
    &lt;span&gt;
      &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
      &lt;xsl:text&gt;...&lt;/xsl:text&gt;
    &lt;/span&gt;
    &lt;xsl:text&gt;)&lt;/xsl:text&gt;
    &lt;xsl:sequence select="$funcsynopsis-trailing-punctuation"/&gt;
  &lt;/td&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:paramdef" mode="m:ansi-table"&gt;
  &lt;td&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
    &lt;xsl:apply-templates mode="m:ansi-table"/&gt;
    &lt;xsl:sequence select="if (following-sibling::*)
                          then ','
                          else ')' || $funcsynopsis-trailing-punctuation"/&gt;
  &lt;/td&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:parameter" mode="m:ansi-table"&gt;
  &lt;span&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
    &lt;xsl:apply-templates mode="m:ansi-table"/&gt;
  &lt;/span&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:funcparams" mode="m:ansi-table"&gt;
  &lt;xsl:text&gt;(&lt;/xsl:text&gt;
  &lt;span&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
    &lt;xsl:apply-templates mode="m:ansi-table"/&gt;
  &lt;/span&gt;
  &lt;xsl:text&gt;)&lt;/xsl:text&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="text()" mode="m:ansi-table"&gt;
  &lt;xsl:sequence select="if (normalize-space(.) = '')
                        then ()
                        else ."/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="comment()|processing-instruction()" mode="m:ansi-table"/&gt;
&lt;xsl:template match="attribute()" mode="m:ansi-table"&gt;
  &lt;xsl:copy/&gt;
&lt;/xsl:template&gt;

&lt;!-- ============================================================ --&gt;

&lt;xsl:template match="db:classsynopsis
                     |db:fieldsynopsis
                     |db:methodsynopsis
                     |db:constructorsynopsis
                     |db:destructorsynopsis"
              priority="100"&gt;
  &lt;xsl:if test="@language and @language ne 'java'"&gt;
    &lt;xsl:message select="'Warning: no explicit support for', @language, 'synopses.'"/&gt;
  &lt;/xsl:if&gt;
  &lt;xsl:next-match/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:classsynopsis"&gt;
  &lt;xsl:param name="indent" select="''"/&gt;
  &lt;div&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
    &lt;xsl:apply-templates select="db:classsynopsisinfo"/&gt;
    &lt;pre&gt;
      &lt;xsl:apply-templates select="db:ooclass/db:modifier" mode="m:synopsis"/&gt;
      &lt;xsl:text&gt;class &lt;/xsl:text&gt;
      &lt;xsl:apply-templates select="db:ooclass/db:classname" mode="m:synopsis"/&gt;
      &lt;xsl:text&gt; {&lt;/xsl:text&gt;
      &lt;xsl:text&gt;&amp;#10;&lt;/xsl:text&gt;
      &lt;xsl:apply-templates select="* except (db:ooclass|db:classsynopsisinfo)"
                           mode="m:synopsis"&gt;
        &lt;xsl:with-param name="indent" select="$indent || $classsynopsis-indent"/&gt;
      &lt;/xsl:apply-templates&gt;
      &lt;xsl:text&gt;&amp;#10;&lt;/xsl:text&gt;
      &lt;xsl:text&gt;}&lt;/xsl:text&gt;
    &lt;/pre&gt;
  &lt;/div&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:fieldsynopsis"&gt;
  &lt;xsl:param name="indent" select="''"/&gt;
  &lt;pre class="synopsis"&gt;
    &lt;xsl:apply-templates select="." mode="m:synopsis"/&gt;
  &lt;/pre&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:fieldsynopsis" mode="m:synopsis"&gt;
  &lt;xsl:param name="indent" select="''"/&gt;

  &lt;xsl:apply-templates
      select="db:synopsisinfo[empty(preceding-sibling::* except preceding-sibling::db:synopsisinfo)]"
      mode="m:synopsis"/&gt;

  &lt;xsl:sequence select="$indent"/&gt;
  &lt;span&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
    &lt;xsl:apply-templates select="db:modifier|db:type" mode="m:synopsis"/&gt;
    &lt;xsl:apply-templates select="db:varname" mode="m:synopsis"/&gt;
    &lt;xsl:apply-templates select="db:initializer" mode="m:synopsis"/&gt;
  &lt;/span&gt;
  &lt;xsl:text&gt;&amp;#10;&lt;/xsl:text&gt;

  &lt;xsl:apply-templates
      select="db:synopsisinfo[empty(following-sibling::* except following-sibling::db:synopsisinfo)]"
      mode="m:synopsis"/&gt;

&lt;/xsl:template&gt;

&lt;xsl:template match="db:varname" mode="m:synopsis"&gt;
  &lt;span&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
    &lt;xsl:apply-templates mode="m:synopsis"/&gt;
    &lt;xsl:if test="not(following-sibling::db:initializer)"&gt;;&lt;/xsl:if&gt;
  &lt;/span&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:initializer" mode="m:synopsis"&gt;
  &lt;xsl:text&gt; = &lt;/xsl:text&gt;
  &lt;span&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
    &lt;xsl:apply-templates mode="m:synopsis"/&gt;
  &lt;/span&gt;
  &lt;xsl:text&gt;;&lt;/xsl:text&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:methodsynopsis
                     |db:constructorsynopsis
                     |db:destructorsynopsis"&gt;
  &lt;xsl:param name="indent" select="''"/&gt;
  &lt;pre class="synopsis"&gt;
    &lt;xsl:apply-templates select="." mode="m:synopsis"/&gt;
  &lt;/pre&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:methodsynopsis
                     |db:constructorsynopsis
                     |db:destructorsynopsis"
              mode="m:synopsis"&gt;
  &lt;xsl:param name="indent" select="''"/&gt;

  &lt;xsl:apply-templates
      select="db:synopsisinfo[empty(preceding-sibling::* except preceding-sibling::db:synopsisinfo)]"
      mode="m:synopsis"/&gt;

  &lt;xsl:sequence select="$indent"/&gt;
  &lt;span&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
    &lt;xsl:variable name="line" as="node()*"&gt;
      &lt;xsl:apply-templates select="db:modifier|db:type" mode="m:synopsis"/&gt;
      &lt;xsl:apply-templates select="db:methodname" mode="m:synopsis"/&gt;
      &lt;xsl:text&gt;(&lt;/xsl:text&gt;
    &lt;/xsl:variable&gt;
    &lt;xsl:sequence select="$line"/&gt;
    &lt;xsl:apply-templates select="db:methodparam[1]" mode="m:synopsis"&gt;
      &lt;xsl:with-param name="indent" select="''"/&gt;
    &lt;/xsl:apply-templates&gt;
    &lt;xsl:choose&gt;
      &lt;xsl:when test="count(db:methodparam) gt 1"&gt;
        &lt;xsl:text&gt;&amp;#10;&lt;/xsl:text&gt;
        &lt;xsl:apply-templates select="db:methodparam[position() gt 1]"
                             mode="m:synopsis"&gt;
          &lt;xsl:with-param name="indent" select="$indent || f:spaces($line)"/&gt;
        &lt;/xsl:apply-templates&gt;
      &lt;/xsl:when&gt;
      &lt;xsl:when test="count(db:methodparam) eq 0"&gt;
        &lt;xsl:text&gt;)&lt;/xsl:text&gt;
        &lt;xsl:sequence select="$funcsynopsis-trailing-punctuation"/&gt;
        &lt;xsl:text&gt;&amp;#10;&lt;/xsl:text&gt;
      &lt;/xsl:when&gt;
      &lt;xsl:otherwise&gt;
        &lt;!-- nop --&gt;
      &lt;/xsl:otherwise&gt;
    &lt;/xsl:choose&gt;
  &lt;/span&gt;

  &lt;xsl:apply-templates
      select="db:synopsisinfo[empty(following-sibling::* except following-sibling::db:synopsisinfo)]"
      mode="m:synopsis"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:methodparam" mode="m:synopsis"&gt;
  &lt;xsl:param name="indent" select="''"/&gt;

  &lt;xsl:sequence select="$indent"/&gt;
  &lt;span&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
    &lt;xsl:apply-templates select="db:modifier|db:type" mode="m:synopsis"/&gt;
    &lt;xsl:apply-templates select="db:parameter" mode="m:synopsis"/&gt;
  &lt;/span&gt;
  &lt;xsl:sequence select="if (following-sibling::db:methodparam)
                        then ','
                        else ')' || $funcsynopsis-trailing-punctuation"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:modifier|db:type" mode="m:synopsis"&gt;
  &lt;xsl:apply-templates/&gt;
  &lt;xsl:text&gt; &lt;/xsl:text&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:classname|db:methodname|db:parameter" mode="m:synopsis"&gt;
  &lt;xsl:apply-templates/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:synopsisinfo" mode="m:synopsis"&gt;
  &lt;span&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
    &lt;xsl:apply-templates/&gt;
  &lt;/span&gt;
&lt;/xsl:template&gt;

&lt;!-- ============================================================ --&gt;

&lt;xsl:template match="db:cmdsynopsis"&gt;
  &lt;div&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
    &lt;xsl:apply-templates/&gt;
  &lt;/div&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:synopfragment"&gt;
  &lt;div&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
    &lt;xsl:apply-templates select="." mode="m:synopfragment-bug"/&gt;
    &lt;xsl:text&gt; &lt;/xsl:text&gt;
    &lt;xsl:apply-templates/&gt;
  &lt;/div&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:synopfragmentref"&gt;
  &lt;xsl:variable name="target" select="f:target(@linkend, .)"/&gt;
  &lt;span&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
    &lt;a href="{f:href(., $target)}"&gt;
      &lt;xsl:apply-templates select="$target" mode="m:synopfragment-bug"/&gt;
    &lt;/a&gt;
    &lt;xsl:text&gt; &lt;/xsl:text&gt;
    &lt;xsl:apply-templates/&gt;
  &lt;/span&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:synopfragment" mode="m:synopfragment-bug"&gt;
  &lt;xsl:variable name="number" as="item()*"&gt;
    &lt;xsl:number from="db:cmdsynopsis" level="any"/&gt;
  &lt;/xsl:variable&gt;
  &lt;xsl:variable name="number" select="xs:integer($number)"/&gt;
  &lt;span class="synopfragmentref-number"&gt;
    &lt;xsl:sequence
        select="codepoints-to-string($callout-unicode-start + $number)"/&gt;
  &lt;/span&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:cmdsynopsis/db:command"&gt;
  &lt;xsl:if test="preceding-sibling::*[1]"&gt;
    &lt;br/&gt;
  &lt;/xsl:if&gt;
  &lt;span&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
  &lt;/span&gt;
  &lt;xsl:text&gt; &lt;/xsl:text&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:group|db:arg" name="tp:group-or-arg"&gt;
  &lt;xsl:variable name="choice" select="@choice/string()"/&gt;
  &lt;xsl:variable name="rep" select="@rep/string()"/&gt;
  &lt;xsl:variable name="sepchar"
                select="if (ancestor-or-self::*/@sepchar)
                        then ancestor-or-self::*/@sepchar/string()
                        else ' '"/&gt;

  &lt;xsl:if test="position() gt 1"&gt;
    &lt;xsl:sequence select="$sepchar"/&gt;
  &lt;/xsl:if&gt;

  &lt;xsl:choose&gt;
    &lt;xsl:when test="$choice='plain'"&gt;
      &lt;xsl:sequence select="$v:arg-choice-plain-open-str"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="$choice='req'"&gt;
      &lt;xsl:sequence select="$v:arg-choice-req-open-str"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="$choice='opt'"&gt;
      &lt;xsl:sequence select="$v:arg-choice-opt-open-str"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:sequence select="$v:arg-choice-def-open-str"/&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;

  &lt;span&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
    &lt;xsl:apply-templates/&gt;
  &lt;/span&gt;

  &lt;xsl:choose&gt;
    &lt;xsl:when test="$rep='repeat'"&gt;
      &lt;xsl:sequence select="$v:arg-rep-repeat-str"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="$rep='norepeat'"&gt;
      &lt;xsl:sequence select="$v:arg-rep-norepeat-str"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:sequence select="$v:arg-rep-def-str"/&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;

  &lt;xsl:choose&gt;
    &lt;xsl:when test="$choice='plain'"&gt;
      &lt;xsl:sequence select="$v:arg-choice-plain-close-str"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="$choice='req'"&gt;
      &lt;xsl:sequence select="$v:arg-choice-req-close-str"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="$choice='opt'"&gt;
      &lt;xsl:sequence select="$v:arg-choice-opt-close-str"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:sequence select="$v:arg-choice-def-close-str"/&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:group/db:arg"&gt;
  &lt;xsl:variable name="choice" select="@choice"/&gt;
  &lt;xsl:variable name="rep" select="@rep"/&gt;
  &lt;xsl:if test="position()&gt;1"&gt;
    &lt;xsl:sequence select="$v:arg-or-sep"/&gt;
  &lt;/xsl:if&gt;
  &lt;xsl:call-template name="tp:group-or-arg"/&gt;
&lt;/xsl:template&gt;

&lt;/xsl:stylesheet&gt;
</code></pre></td></tr></table></div></div></div></div><div class="stylesheet" id="S-18112"><h3>msgset.xsl</h3><p><span><span class="template all">7 templates</span></span></p><div class="instructions"><div class="title closed">Instructions</div><div class="body"><div id="S-18112-t-1" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:msg|db:msgentry|db:msgexpla…</div><div class="props"><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:msg</code>, <code>db:msgentry</code>, <code>db:msgexplan</code>, <code>db:msgset</code></div></div></div><div id="S-18112-t-2" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:msginfo|db:simplemsgentry</div><div class="props"><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:msginfo</code>, <code>db:simplemsgentry</code></div></div></div><div id="S-18112-t-3" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:msgmain</div><div class="props"><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:msgmain</code></div></div></div><div id="S-18112-t-4" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:msgsub</div><div class="props"><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:msgsub</code></div></div></div><div id="S-18112-t-5" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:msgrel</div><div class="props"><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:msgrel</code></div></div></div><div id="S-18112-t-6" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:msgtext</div><div class="props"><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:msgtext</code></div></div></div><div id="S-18112-t-7" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:msgaud|db:msglevel|db:msgor…</div><div class="props"><div class="calls">Calls: <a href="#S-22317-docbook.org.ns.docbook.functions.gentext,2">f:gentext()</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:msgaud</code>, <code>db:msglevel</code>, <code>db:msgorig</code></div></div></div></div></div><div class="source-code"><div class="title closed">Source code</div><div class="body"><div><table><tr><td valign="top" align="right"><pre class="fake-prism"><span id="line-S-18112-1">1</span>
<span id="line-S-18112-2"><span class="lno">2</span></span>
<span id="line-S-18112-3"><span class="lno">3</span></span>
<span id="line-S-18112-4"><span class="lno">4</span></span>
<span id="line-S-18112-5">5</span>
<span id="line-S-18112-6"><span class="lno">6</span></span>
<span id="line-S-18112-7"><span class="lno">7</span></span>
<span id="line-S-18112-8"><span class="lno">8</span></span>
<span id="line-S-18112-9"><span class="lno">9</span></span>
<span id="line-S-18112-10">10</span>
<span id="line-S-18112-11"><span class="lno">11</span></span>
<span id="line-S-18112-12"><span class="lno">12</span></span>
<span id="line-S-18112-13"><span class="lno">13</span></span>
<span id="line-S-18112-14"><span class="lno">14</span></span>
<span id="line-S-18112-15">15</span>
<span id="line-S-18112-16"><span class="lno">16</span></span>
<span id="line-S-18112-17"><span class="lno">17</span></span>
<span id="line-S-18112-18"><span class="lno">18</span></span>
<span id="line-S-18112-19"><span class="lno">19</span></span>
<span id="line-S-18112-20">20</span>
<span id="line-S-18112-21"><span class="lno">21</span></span>
<span id="line-S-18112-22"><span class="lno">22</span></span>
<span id="line-S-18112-23"><span class="lno">23</span></span>
<span id="line-S-18112-24"><span class="lno">24</span></span>
<span id="line-S-18112-25">25</span>
<span id="line-S-18112-26"><span class="lno">26</span></span>
<span id="line-S-18112-27"><span class="lno">27</span></span>
<span id="line-S-18112-28"><span class="lno">28</span></span>
<span id="line-S-18112-29"><span class="lno">29</span></span>
<span id="line-S-18112-30">30</span>
<span id="line-S-18112-31"><span class="lno">31</span></span>
<span id="line-S-18112-32"><span class="lno">32</span></span>
<span id="line-S-18112-33"><span class="lno">33</span></span>
<span id="line-S-18112-34"><span class="lno">34</span></span>
<span id="line-S-18112-35">35</span>
<span id="line-S-18112-36"><span class="lno">36</span></span>
<span id="line-S-18112-37"><span class="lno">37</span></span>
<span id="line-S-18112-38"><span class="lno">38</span></span>
<span id="line-S-18112-39"><span class="lno">39</span></span>
<span id="line-S-18112-40">40</span>
<span id="line-S-18112-41"><span class="lno">41</span></span>
<span id="line-S-18112-42"><span class="lno">42</span></span>
<span id="line-S-18112-43"><span class="lno">43</span></span>
<span id="line-S-18112-44"><span class="lno">44</span></span>
<span id="line-S-18112-45">45</span>
<span id="line-S-18112-46"><span class="lno">46</span></span>
<span id="line-S-18112-47"><span class="lno">47</span></span>
<span id="line-S-18112-48"><span class="lno">48</span></span>
<span id="line-S-18112-49"><span class="lno">49</span></span>
<span id="line-S-18112-50">50</span>
<span id="line-S-18112-51"><span class="lno">51</span></span>
<span id="line-S-18112-52"><span class="lno">52</span></span>
<span id="line-S-18112-53"><span class="lno">53</span></span>
<span id="line-S-18112-54"><span class="lno">54</span></span>
</pre></td><td valign="top"><pre><code class="language-xml">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                xmlns:db="http://docbook.org/ns/docbook"
                xmlns:f="http://docbook.org/ns/docbook/functions"
                xmlns:m="http://docbook.org/ns/docbook/modes"
                xmlns:t="http://docbook.org/ns/docbook/templates"
                xmlns:xs="http://www.w3.org/2001/XMLSchema"
                xmlns="http://www.w3.org/1999/xhtml"
                default-mode="m:docbook"
                exclude-result-prefixes="db f m t xs"
                version="3.0"&gt;

&lt;xsl:template match="db:msgset|db:msgentry|db:msg|db:msgexplan"&gt;
  &lt;div&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
    &lt;xsl:apply-templates select="." mode="m:generate-titlepage"/&gt;
    &lt;xsl:apply-templates/&gt;
  &lt;/div&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:simplemsgentry|db:msginfo"&gt;
  &lt;div&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
    &lt;xsl:apply-templates/&gt;
  &lt;/div&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:msgmain"&gt;
  &lt;xsl:apply-templates/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:msgsub"&gt;
  &lt;xsl:apply-templates/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:msgrel"&gt;
  &lt;xsl:apply-templates/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:msgtext"&gt;
  &lt;xsl:apply-templates/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:msglevel|db:msgorig|db:msgaud"&gt;
  &lt;div&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
    &lt;xsl:sequence select="f:gentext(., 'title')"/&gt;
    &lt;xsl:text&gt;: &lt;/xsl:text&gt;
    &lt;xsl:apply-templates/&gt;
  &lt;/div&gt;
&lt;/xsl:template&gt;

&lt;/xsl:stylesheet&gt;
</code></pre></td></tr></table></div></div></div></div><div class="stylesheet" id="S-51480"><h3>objects.xsl</h3><p><span><span class="template all">30 templates</span></span>, <span><span class="function all">15 functions</span></span></p><div class="instructions"><div class="title closed">Instructions</div><div class="body"><div id="S-51480-t-1" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:textobject</div><div class="props"><div class="mode">Mode: <code>m:details-attribute</code></div><div class="matches">Matches: <code>db:textobject</code></div></div></div><div id="S-51480-t-2" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:alt</div><div class="props"><div class="mode">Mode: <code>m:details-attribute</code></div><div class="matches">Matches: <code>db:alt</code></div></div></div><div id="S-51480-t-3" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:inlinemediaobject|db:mediao…</div><div class="props"><div class="mode">Mode: <code>m:details-attribute</code></div><div class="matches">Matches: <code>db:inlinemediaobject</code>, <code>db:mediaobject</code></div></div></div><div id="S-51480-t-4" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ *</div><div class="props"><div class="mode">Mode: <code>m:details-attribute</code></div><div class="matches">Matches: <code>*</code></div></div></div><div id="S-51480-t-5" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:textobject</div><div class="props"><div class="mode">Mode: <code>m:details</code></div><div class="matches">Matches: <code>db:textobject</code></div></div></div><div id="S-51480-t-6" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:alt</div><div class="props"><div class="mode">Mode: <code>m:details</code></div><div class="matches">Matches: <code>db:alt</code></div></div></div><div id="S-51480-t-7" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:textobject</div><div class="props"><div class="mode">Mode: <code>m:details</code></div><div class="matches">Matches: <code>db:textobject</code></div></div></div><div id="S-51480-t-8" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:inlinemediaobject|db:mediao…</div><div class="props"><div class="uses">Uses: <a href="#S-26643-..mediaobject-accessibility">$mediaobject-accessibility</a></div><div class="calls">Calls: <a href="#S-28936-docbook.org.ns.docbook.functions.pi-attributes,1">f:pi-attributes()</a>, <a href="#S-51480-docbook.org.ns.docbook.functions.select-mediaobject,1">f:select-mediaobject()</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:inlinemediaobject</code>, <code>db:mediaobject</code></div></div></div><div id="S-51480-t-9" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:audioobject|db:imageobject|…</div><div class="props"><div class="calls">Calls: <a href="#S-51480-docbook.org.ns.docbook.functions.select-mediaobject-data,2">f:select-mediaobject-data()</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:audioobject</code>, <code>db:imageobject</code>, <code>db:videoobject</code></div></div></div><div id="S-51480-t-10" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ svg:*</div><div class="props"><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>svg:*</code></div></div></div><div id="S-51480-t-11" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:imageobjectco</div><div class="props"><div class="calls">Calls: <a href="#S-51480-docbook.org.ns.docbook.functions.select-mediaobject,1">f:select-mediaobject()</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:imageobjectco</code></div></div></div><div id="S-51480-t-12" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:textobject</div><div class="props"><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:textobject</code></div></div></div><div id="S-51480-t-13" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:audiodata</div><div class="props"><div class="calls">Calls: <a href="#S-51480-docbook.org.ns.docbook.templates.private.process-object">tp:process-object</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:audiodata</code></div></div></div><div id="S-51480-t-14" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:videodata</div><div class="props"><div class="calls">Calls: <a href="#S-51480-docbook.org.ns.docbook.templates.private.process-object">tp:process-object</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:videodata</code></div></div></div><div id="S-51480-t-15" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:textdata</div><div class="props"><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:textdata</code></div></div></div><div id="S-51480-t-16" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:imagedata</div><div class="props"><div class="calls">Calls: <a href="#S-51480-docbook.org.ns.docbook.templates.private.process-object">tp:process-object</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:imagedata</code></div></div></div><div id="S-51480-t-17" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:multimediaparam</div><div class="props"><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:multimediaparam</code></div></div></div><div id="S-51480-docbook.org.ns.docbook.templates.private.process-object" class="instruction template"><div class="title"><span class="link"></span>Template tp:process-object  match ≅ </div><div class="props"><div class="uses">Uses: <a href="#S-23412-docbook.org.ns.docbook.variables.image-nominal-height">$v:image-nominal-height</a>, <a href="#S-23412-docbook.org.ns.docbook.variables.image-nominal-width">$v:image-nominal-width</a>, <a href="#S-23412-docbook.org.ns.docbook.variables.mediaobject-input-base-uri">$v:mediaobject-input-base-uri</a></div><div class="calls">Calls: <a href="#S-46176-docbook.org.ns.docbook.functions.equal-lengths,2">f:equal-lengths()</a>, <a href="#S-46176-docbook.org.ns.docbook.functions.is-empty-length,1">f:is-empty-length()</a>, <a href="#S-46176-docbook.org.ns.docbook.functions.length-string,1">f:length-string()</a>, <a href="#S-46176-docbook.org.ns.docbook.functions.make-length,2">f:make-length()</a>, <a href="#S-51480-docbook.org.ns.docbook.functions.object-align,1">f:object-align()</a>, <a href="#S-51480-docbook.org.ns.docbook.functions.object-contentheight,2">f:object-contentheight()</a>, <a href="#S-51480-docbook.org.ns.docbook.functions.object-contentwidth,2">f:object-contentwidth()</a>, <a href="#S-51480-docbook.org.ns.docbook.functions.object-height,1">f:object-height()</a>, <a href="#S-51480-docbook.org.ns.docbook.functions.object-properties,1">f:object-properties()</a>, <a href="#S-51480-docbook.org.ns.docbook.functions.object-scale,1">f:object-scale()</a>, <a href="#S-51480-docbook.org.ns.docbook.functions.object-scalefit,1">f:object-scalefit()</a>, <a href="#S-51480-docbook.org.ns.docbook.functions.object-valign,1">f:object-valign()</a>, <a href="#S-51480-docbook.org.ns.docbook.functions.object-width,1">f:object-width()</a>, <a href="#S-28936-docbook.org.ns.docbook.functions.pi-attributes,1">f:pi-attributes()</a>, <a href="#S-51480-docbook.org.ns.docbook.functions.resolve-object-uri,1">f:resolve-object-uri()</a></div><div class="calls">Calls: <a href="#S-51480-docbook.org.ns.docbook.templates.private.viewport">tp:viewport</a>, <a href="#S-51480-docbook.org.ns.docbook.templates.imagemap">t:imagemap</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-51480-t-13">template</a>, <a href="#S-51480-t-14">template</a>, <a href="#S-51480-t-16">template</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-51480">modules/objects.xsl</a></div><div class="mode">Mode: <code>m:docbook</code></div></div></div><div id="S-51480-docbook.org.ns.docbook.templates.imagemap" class="instruction template"><div class="title"><span class="link"></span>Template t:imagemap  match ≅ </div><div class="props"><div class="calls">Calls: <a href="#S-28936-docbook.org.ns.docbook.functions.href,2">f:href()</a>, <a href="#S-28936-docbook.org.ns.docbook.functions.id,1">f:id()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-51480-docbook.org.ns.docbook.templates.private.process-object">tp:process-object</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-51480">modules/objects.xsl</a></div><div class="mode">Mode: <code>m:docbook</code></div></div></div><div id="S-51480-docbook.org.ns.docbook.templates.private.viewport" class="instruction template"><div class="title"><span class="link"></span>Template tp:viewport  match ≅ </div><div class="props"><div class="calls">Calls: <a href="#S-51480-docbook.org.ns.docbook.functions.css-length,2">f:css-length()</a>, <a href="#S-51480-docbook.org.ns.docbook.functions.css-property,2">f:css-property()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-51480-docbook.org.ns.docbook.templates.private.process-object">tp:process-object</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-51480">modules/objects.xsl</a></div><div class="mode">Mode: <code>m:docbook</code></div></div></div><div id="S-51480-t-21" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ *</div><div class="props"><div class="calls">Calls: <a href="#S-51480-docbook.org.ns.docbook.functions.css-length,2">f:css-length()</a>, <a href="#S-28936-docbook.org.ns.docbook.functions.id,1">f:id()</a></div><div class="mode">Mode: <code>mp:imagedata</code></div><div class="matches">Matches: <code>*</code></div></div></div><div id="S-51480-docbook.org.ns.docbook.functions.object-width,1" class="instruction function"><div class="title"><span class="link"></span>Function f:object-width($object as element()) as map(*)</div><div class="props"><div class="uses">Uses: <a href="#S-26643-..image-ignore-scaling">$image-ignore-scaling</a></div><div class="calls">Calls: <a href="#S-51480-docbook.org.ns.docbook.functions.object-scalefit,1">f:object-scalefit()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-51480-docbook.org.ns.docbook.functions.object-scalefit,1">f:object-scalefit()</a>, <a href="#S-51480-docbook.org.ns.docbook.templates.private.process-object">tp:process-object</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-51480">modules/objects.xsl</a></div></div></div><div id="S-51480-docbook.org.ns.docbook.functions.object-height,1" class="instruction function"><div class="title"><span class="link"></span>Function f:object-height($object as element()) as map(*)</div><div class="props"><div class="uses">Uses: <a href="#S-26643-..image-ignore-scaling">$image-ignore-scaling</a></div><div class="calls">Calls: <a href="#S-51480-docbook.org.ns.docbook.functions.object-scalefit,1">f:object-scalefit()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-51480-docbook.org.ns.docbook.functions.object-scalefit,1">f:object-scalefit()</a>, <a href="#S-51480-docbook.org.ns.docbook.templates.private.process-object">tp:process-object</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-51480">modules/objects.xsl</a></div></div></div><div id="S-51480-docbook.org.ns.docbook.functions.object-contentwidth,2" class="instruction function"><div class="title"><span class="link"></span>Function f:object-contentwidth($object as element(), $intrinsicwidth as map(*)) as map(*)</div><div class="props"><div class="uses">Uses: <a href="#S-26643-..image-ignore-scaling">$image-ignore-scaling</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-51480-docbook.org.ns.docbook.templates.private.process-object">tp:process-object</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-51480">modules/objects.xsl</a></div></div></div><div id="S-51480-docbook.org.ns.docbook.functions.object-contentheight,2" class="instruction function"><div class="title"><span class="link"></span>Function f:object-contentheight($object as element(), $intrinsicheight as map(*)) as map(*)</div><div class="props"><div class="uses">Uses: <a href="#S-26643-..image-ignore-scaling">$image-ignore-scaling</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-51480-docbook.org.ns.docbook.templates.private.process-object">tp:process-object</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-51480">modules/objects.xsl</a></div></div></div><div id="S-51480-docbook.org.ns.docbook.functions.css-length,2" class="instruction function"><div class="title"><span class="link"></span>Function f:css-length($property as xs:string, $length as map(*)?) as xs:string?</div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-51480-t-21">template</a>, <a href="#S-51480-docbook.org.ns.docbook.templates.private.viewport">tp:viewport</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-51480">modules/objects.xsl</a></div></div></div><div id="S-51480-docbook.org.ns.docbook.functions.css-property,2" class="instruction function"><div class="title"><span class="link"></span>Function f:css-property($property as xs:string, $value as xs:string?) as xs:string?</div><div class="props"><div class="calls">Calls: <a href="#S-51480-docbook.org.ns.docbook.functions.css-length,2">f:css-length()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-51480-docbook.org.ns.docbook.functions.css-length,2">f:css-length()</a>, <a href="#S-51480-docbook.org.ns.docbook.templates.private.viewport">tp:viewport</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-51480">modules/objects.xsl</a></div></div></div><div id="S-51480-docbook.org.ns.docbook.functions.object-scalefit,1" class="instruction function"><div class="title"><span class="link"></span>Function f:object-scalefit($object as element()) as xs:boolean</div><div class="props"><div class="uses">Uses: <a href="#S-26643-..image-ignore-scaling">$image-ignore-scaling</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-51480-docbook.org.ns.docbook.templates.private.process-object">tp:process-object</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-51480">modules/objects.xsl</a></div></div></div><div id="S-51480-docbook.org.ns.docbook.functions.object-scale,1" class="instruction function"><div class="title"><span class="link"></span>Function f:object-scale($object as element()) as xs:double</div><div class="props"><div class="uses">Uses: <a href="#S-26643-..image-ignore-scaling">$image-ignore-scaling</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-51480-docbook.org.ns.docbook.templates.private.process-object">tp:process-object</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-51480">modules/objects.xsl</a></div></div></div><div id="S-51480-docbook.org.ns.docbook.functions.object-align,1" class="instruction function"><div class="title"><span class="link"></span>Function f:object-align($object as element()) as xs:string?</div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-51480-docbook.org.ns.docbook.templates.private.process-object">tp:process-object</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-51480">modules/objects.xsl</a></div></div></div><div id="S-51480-docbook.org.ns.docbook.functions.object-valign,1" class="instruction function"><div class="title"><span class="link"></span>Function f:object-valign($object as element()) as xs:string?</div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-51480-docbook.org.ns.docbook.templates.private.process-object">tp:process-object</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-51480">modules/objects.xsl</a></div></div></div><div id="S-51480-docbook.org.ns.docbook.functions.object-properties,1" class="instruction function"><div class="title"><span class="link"></span>Function f:object-properties($uri as xs:string) as map(xs:string, xs:anyAtomicType)</div><div class="props"><div class="uses">Uses: <a href="#S-26643-..image-property-warning">$image-property-warning</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-51480-docbook.org.ns.docbook.templates.private.process-object">tp:process-object</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-51480">modules/objects.xsl</a></div></div></div><div id="S-51480-docbook.org.ns.docbook.functions.resolve-object-uri,1" class="instruction function"><div class="title"><span class="link"></span>Function f:resolve-object-uri($uri as xs:string) as xs:string</div><div class="props"><div class="uses">Uses: <a href="#S-23412-docbook.org.ns.docbook.variables.mediaobject-input-base-uri">$v:mediaobject-input-base-uri</a>, <a href="#S-23412-docbook.org.ns.docbook.variables.mediaobject-output-base-uri">$v:mediaobject-output-base-uri</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-51480-docbook.org.ns.docbook.templates.private.process-object">tp:process-object</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-51480">modules/objects.xsl</a></div></div></div><div id="S-51480-docbook.org.ns.docbook.functions.select-mediaobject,1" class="instruction function"><div class="title"><span class="link"></span>Function f:select-mediaobject($objects as element()+) as element()</div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-51480-t-8">template</a>, <a href="#S-51480-t-11">template</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-51480">modules/objects.xsl</a></div></div></div><div id="S-51480-t-22" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:audioobject|db:imageobject|…  as element()?</div><div class="props"><div class="calls">Calls: <a href="#S-51480-docbook.org.ns.docbook.functions.select-mediaobject-data,1">f:select-mediaobject-data()</a></div><div class="mode">Mode: <code>m:acceptable-mediaobject</code></div><div class="matches">Matches: <code>db:audioobject</code>, <code>db:imageobject</code>, <code>db:imageobjectco</code>, <code>db:videoobject</code></div></div></div><div id="S-51480-docbook.org.ns.docbook.functions.select-mediaobject-data,1" class="instruction function"><div class="title"><span class="link"></span>Function f:select-mediaobject-data#1($data as element()*) as element()?</div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-51480-t-22">template</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-51480">modules/objects.xsl</a></div></div></div><div id="S-51480-docbook.org.ns.docbook.functions.select-mediaobject-data,2" class="instruction function"><div class="title"><span class="link"></span>Function f:select-mediaobject-data#2($data as element()*, $force as xs:boolean) as element()?</div><div class="props"><div class="calls">Calls: <a href="#S-51480-docbook.org.ns.docbook.functions.select-mediaobject-data,1">f:select-mediaobject-data()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-51480-t-9">template</a>, <a href="#S-51480-docbook.org.ns.docbook.functions.select-mediaobject-data,1">f:select-mediaobject-data()</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-51480">modules/objects.xsl</a></div></div></div><div id="S-51480-t-23" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:textobject  as element()?</div><div class="props"><div class="mode">Mode: <code>m:acceptable-mediaobject</code></div><div class="matches">Matches: <code>db:textobject</code></div></div></div><div id="S-51480-t-24" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:alt|db:areaspec|db:caption|…</div><div class="props"><div class="mode">Mode: <code>m:acceptable-mediaobject</code></div><div class="matches">Matches: <code>db:alt</code>, <code>db:areaspec</code>, <code>db:caption</code>, <code>db:info</code></div></div></div><div id="S-51480-t-25" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ *</div><div class="props"><div class="mode">Mode: <code>m:acceptable-mediaobject</code></div><div class="matches">Matches: <code>*</code></div></div></div><div id="S-51480-t-26" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:audiodata|db:imagedata|db:v…  as element()*</div><div class="props"><div class="uses">Uses: <a href="#S-26643-..mediaobject-exclude-extensions">$mediaobject-exclude-extensions</a></div><div class="mode">Mode: <code>m:acceptable-mediaobject-data</code></div><div class="matches">Matches: <code>db:audiodata</code>, <code>db:imagedata</code>, <code>db:videodata</code></div></div></div><div id="S-51480-t-27" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:imageobject</div><div class="props"><div class="mode">Mode: <code>m:acceptable-mediaobject-data</code></div><div class="matches">Matches: <code>db:imageobject</code></div></div></div><div id="S-51480-t-28" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:areaspec|db:calloutlist|db:…</div><div class="props"><div class="mode">Mode: <code>m:acceptable-mediaobject-data</code></div><div class="matches">Matches: <code>db:areaspec</code>, <code>db:calloutlist</code>, <code>db:info</code></div></div></div><div id="S-51480-t-29" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ *</div><div class="props"><div class="mode">Mode: <code>m:acceptable-mediaobject-data</code></div><div class="matches">Matches: <code>*</code></div></div></div><div id="S-51480-t-30" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:alt</div><div class="props"><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:alt</code></div></div></div></div></div><div class="source-code"><div class="title closed">Source code</div><div class="body"><div><table><tr><td valign="top" align="right"><pre class="fake-prism"><span id="line-S-51480-1">1</span>
<span id="line-S-51480-2"><span class="lno">2</span></span>
<span id="line-S-51480-3"><span class="lno">3</span></span>
<span id="line-S-51480-4"><span class="lno">4</span></span>
<span id="line-S-51480-5">5</span>
<span id="line-S-51480-6"><span class="lno">6</span></span>
<span id="line-S-51480-7"><span class="lno">7</span></span>
<span id="line-S-51480-8"><span class="lno">8</span></span>
<span id="line-S-51480-9"><span class="lno">9</span></span>
<span id="line-S-51480-10">10</span>
<span id="line-S-51480-11"><span class="lno">11</span></span>
<span id="line-S-51480-12"><span class="lno">12</span></span>
<span id="line-S-51480-13"><span class="lno">13</span></span>
<span id="line-S-51480-14"><span class="lno">14</span></span>
<span id="line-S-51480-15">15</span>
<span id="line-S-51480-16"><span class="lno">16</span></span>
<span id="line-S-51480-17"><span class="lno">17</span></span>
<span id="line-S-51480-18"><span class="lno">18</span></span>
<span id="line-S-51480-19"><span class="lno">19</span></span>
<span id="line-S-51480-20">20</span>
<span id="line-S-51480-21"><span class="lno">21</span></span>
<span id="line-S-51480-22"><span class="lno">22</span></span>
<span id="line-S-51480-23"><span class="lno">23</span></span>
<span id="line-S-51480-24"><span class="lno">24</span></span>
<span id="line-S-51480-25">25</span>
<span id="line-S-51480-26"><span class="lno">26</span></span>
<span id="line-S-51480-27"><span class="lno">27</span></span>
<span id="line-S-51480-28"><span class="lno">28</span></span>
<span id="line-S-51480-29"><span class="lno">29</span></span>
<span id="line-S-51480-30">30</span>
<span id="line-S-51480-31"><span class="lno">31</span></span>
<span id="line-S-51480-32"><span class="lno">32</span></span>
<span id="line-S-51480-33"><span class="lno">33</span></span>
<span id="line-S-51480-34"><span class="lno">34</span></span>
<span id="line-S-51480-35">35</span>
<span id="line-S-51480-36"><span class="lno">36</span></span>
<span id="line-S-51480-37"><span class="lno">37</span></span>
<span id="line-S-51480-38"><span class="lno">38</span></span>
<span id="line-S-51480-39"><span class="lno">39</span></span>
<span id="line-S-51480-40">40</span>
<span id="line-S-51480-41"><span class="lno">41</span></span>
<span id="line-S-51480-42"><span class="lno">42</span></span>
<span id="line-S-51480-43"><span class="lno">43</span></span>
<span id="line-S-51480-44"><span class="lno">44</span></span>
<span id="line-S-51480-45">45</span>
<span id="line-S-51480-46"><span class="lno">46</span></span>
<span id="line-S-51480-47"><span class="lno">47</span></span>
<span id="line-S-51480-48"><span class="lno">48</span></span>
<span id="line-S-51480-49"><span class="lno">49</span></span>
<span id="line-S-51480-50">50</span>
<span id="line-S-51480-51"><span class="lno">51</span></span>
<span id="line-S-51480-52"><span class="lno">52</span></span>
<span id="line-S-51480-53"><span class="lno">53</span></span>
<span id="line-S-51480-54"><span class="lno">54</span></span>
<span id="line-S-51480-55">55</span>
<span id="line-S-51480-56"><span class="lno">56</span></span>
<span id="line-S-51480-57"><span class="lno">57</span></span>
<span id="line-S-51480-58"><span class="lno">58</span></span>
<span id="line-S-51480-59"><span class="lno">59</span></span>
<span id="line-S-51480-60">60</span>
<span id="line-S-51480-61"><span class="lno">61</span></span>
<span id="line-S-51480-62"><span class="lno">62</span></span>
<span id="line-S-51480-63"><span class="lno">63</span></span>
<span id="line-S-51480-64"><span class="lno">64</span></span>
<span id="line-S-51480-65">65</span>
<span id="line-S-51480-66"><span class="lno">66</span></span>
<span id="line-S-51480-67"><span class="lno">67</span></span>
<span id="line-S-51480-68"><span class="lno">68</span></span>
<span id="line-S-51480-69"><span class="lno">69</span></span>
<span id="line-S-51480-70">70</span>
<span id="line-S-51480-71"><span class="lno">71</span></span>
<span id="line-S-51480-72"><span class="lno">72</span></span>
<span id="line-S-51480-73"><span class="lno">73</span></span>
<span id="line-S-51480-74"><span class="lno">74</span></span>
<span id="line-S-51480-75">75</span>
<span id="line-S-51480-76"><span class="lno">76</span></span>
<span id="line-S-51480-77"><span class="lno">77</span></span>
<span id="line-S-51480-78"><span class="lno">78</span></span>
<span id="line-S-51480-79"><span class="lno">79</span></span>
<span id="line-S-51480-80">80</span>
<span id="line-S-51480-81"><span class="lno">81</span></span>
<span id="line-S-51480-82"><span class="lno">82</span></span>
<span id="line-S-51480-83"><span class="lno">83</span></span>
<span id="line-S-51480-84"><span class="lno">84</span></span>
<span id="line-S-51480-85">85</span>
<span id="line-S-51480-86"><span class="lno">86</span></span>
<span id="line-S-51480-87"><span class="lno">87</span></span>
<span id="line-S-51480-88"><span class="lno">88</span></span>
<span id="line-S-51480-89"><span class="lno">89</span></span>
<span id="line-S-51480-90">90</span>
<span id="line-S-51480-91"><span class="lno">91</span></span>
<span id="line-S-51480-92"><span class="lno">92</span></span>
<span id="line-S-51480-93"><span class="lno">93</span></span>
<span id="line-S-51480-94"><span class="lno">94</span></span>
<span id="line-S-51480-95">95</span>
<span id="line-S-51480-96"><span class="lno">96</span></span>
<span id="line-S-51480-97"><span class="lno">97</span></span>
<span id="line-S-51480-98"><span class="lno">98</span></span>
<span id="line-S-51480-99"><span class="lno">99</span></span>
<span id="line-S-51480-100">100</span>
<span id="line-S-51480-101"><span class="lno">101</span></span>
<span id="line-S-51480-102"><span class="lno">102</span></span>
<span id="line-S-51480-103"><span class="lno">103</span></span>
<span id="line-S-51480-104"><span class="lno">104</span></span>
<span id="line-S-51480-105">105</span>
<span id="line-S-51480-106"><span class="lno">106</span></span>
<span id="line-S-51480-107"><span class="lno">107</span></span>
<span id="line-S-51480-108"><span class="lno">108</span></span>
<span id="line-S-51480-109"><span class="lno">109</span></span>
<span id="line-S-51480-110">110</span>
<span id="line-S-51480-111"><span class="lno">111</span></span>
<span id="line-S-51480-112"><span class="lno">112</span></span>
<span id="line-S-51480-113"><span class="lno">113</span></span>
<span id="line-S-51480-114"><span class="lno">114</span></span>
<span id="line-S-51480-115">115</span>
<span id="line-S-51480-116"><span class="lno">116</span></span>
<span id="line-S-51480-117"><span class="lno">117</span></span>
<span id="line-S-51480-118"><span class="lno">118</span></span>
<span id="line-S-51480-119"><span class="lno">119</span></span>
<span id="line-S-51480-120">120</span>
<span id="line-S-51480-121"><span class="lno">121</span></span>
<span id="line-S-51480-122"><span class="lno">122</span></span>
<span id="line-S-51480-123"><span class="lno">123</span></span>
<span id="line-S-51480-124"><span class="lno">124</span></span>
<span id="line-S-51480-125">125</span>
<span id="line-S-51480-126"><span class="lno">126</span></span>
<span id="line-S-51480-127"><span class="lno">127</span></span>
<span id="line-S-51480-128"><span class="lno">128</span></span>
<span id="line-S-51480-129"><span class="lno">129</span></span>
<span id="line-S-51480-130">130</span>
<span id="line-S-51480-131"><span class="lno">131</span></span>
<span id="line-S-51480-132"><span class="lno">132</span></span>
<span id="line-S-51480-133"><span class="lno">133</span></span>
<span id="line-S-51480-134"><span class="lno">134</span></span>
<span id="line-S-51480-135">135</span>
<span id="line-S-51480-136"><span class="lno">136</span></span>
<span id="line-S-51480-137"><span class="lno">137</span></span>
<span id="line-S-51480-138"><span class="lno">138</span></span>
<span id="line-S-51480-139"><span class="lno">139</span></span>
<span id="line-S-51480-140">140</span>
<span id="line-S-51480-141"><span class="lno">141</span></span>
<span id="line-S-51480-142"><span class="lno">142</span></span>
<span id="line-S-51480-143"><span class="lno">143</span></span>
<span id="line-S-51480-144"><span class="lno">144</span></span>
<span id="line-S-51480-145">145</span>
<span id="line-S-51480-146"><span class="lno">146</span></span>
<span id="line-S-51480-147"><span class="lno">147</span></span>
<span id="line-S-51480-148"><span class="lno">148</span></span>
<span id="line-S-51480-149"><span class="lno">149</span></span>
<span id="line-S-51480-150">150</span>
<span id="line-S-51480-151"><span class="lno">151</span></span>
<span id="line-S-51480-152"><span class="lno">152</span></span>
<span id="line-S-51480-153"><span class="lno">153</span></span>
<span id="line-S-51480-154"><span class="lno">154</span></span>
<span id="line-S-51480-155">155</span>
<span id="line-S-51480-156"><span class="lno">156</span></span>
<span id="line-S-51480-157"><span class="lno">157</span></span>
<span id="line-S-51480-158"><span class="lno">158</span></span>
<span id="line-S-51480-159"><span class="lno">159</span></span>
<span id="line-S-51480-160">160</span>
<span id="line-S-51480-161"><span class="lno">161</span></span>
<span id="line-S-51480-162"><span class="lno">162</span></span>
<span id="line-S-51480-163"><span class="lno">163</span></span>
<span id="line-S-51480-164"><span class="lno">164</span></span>
<span id="line-S-51480-165">165</span>
<span id="line-S-51480-166"><span class="lno">166</span></span>
<span id="line-S-51480-167"><span class="lno">167</span></span>
<span id="line-S-51480-168"><span class="lno">168</span></span>
<span id="line-S-51480-169"><span class="lno">169</span></span>
<span id="line-S-51480-170">170</span>
<span id="line-S-51480-171"><span class="lno">171</span></span>
<span id="line-S-51480-172"><span class="lno">172</span></span>
<span id="line-S-51480-173"><span class="lno">173</span></span>
<span id="line-S-51480-174"><span class="lno">174</span></span>
<span id="line-S-51480-175">175</span>
<span id="line-S-51480-176"><span class="lno">176</span></span>
<span id="line-S-51480-177"><span class="lno">177</span></span>
<span id="line-S-51480-178"><span class="lno">178</span></span>
<span id="line-S-51480-179"><span class="lno">179</span></span>
<span id="line-S-51480-180">180</span>
<span id="line-S-51480-181"><span class="lno">181</span></span>
<span id="line-S-51480-182"><span class="lno">182</span></span>
<span id="line-S-51480-183"><span class="lno">183</span></span>
<span id="line-S-51480-184"><span class="lno">184</span></span>
<span id="line-S-51480-185">185</span>
<span id="line-S-51480-186"><span class="lno">186</span></span>
<span id="line-S-51480-187"><span class="lno">187</span></span>
<span id="line-S-51480-188"><span class="lno">188</span></span>
<span id="line-S-51480-189"><span class="lno">189</span></span>
<span id="line-S-51480-190">190</span>
<span id="line-S-51480-191"><span class="lno">191</span></span>
<span id="line-S-51480-192"><span class="lno">192</span></span>
<span id="line-S-51480-193"><span class="lno">193</span></span>
<span id="line-S-51480-194"><span class="lno">194</span></span>
<span id="line-S-51480-195">195</span>
<span id="line-S-51480-196"><span class="lno">196</span></span>
<span id="line-S-51480-197"><span class="lno">197</span></span>
<span id="line-S-51480-198"><span class="lno">198</span></span>
<span id="line-S-51480-199"><span class="lno">199</span></span>
<span id="line-S-51480-200">200</span>
<span id="line-S-51480-201"><span class="lno">201</span></span>
<span id="line-S-51480-202"><span class="lno">202</span></span>
<span id="line-S-51480-203"><span class="lno">203</span></span>
<span id="line-S-51480-204"><span class="lno">204</span></span>
<span id="line-S-51480-205">205</span>
<span id="line-S-51480-206"><span class="lno">206</span></span>
<span id="line-S-51480-207"><span class="lno">207</span></span>
<span id="line-S-51480-208"><span class="lno">208</span></span>
<span id="line-S-51480-209"><span class="lno">209</span></span>
<span id="line-S-51480-210">210</span>
<span id="line-S-51480-211"><span class="lno">211</span></span>
<span id="line-S-51480-212"><span class="lno">212</span></span>
<span id="line-S-51480-213"><span class="lno">213</span></span>
<span id="line-S-51480-214"><span class="lno">214</span></span>
<span id="line-S-51480-215">215</span>
<span id="line-S-51480-216"><span class="lno">216</span></span>
<span id="line-S-51480-217"><span class="lno">217</span></span>
<span id="line-S-51480-218"><span class="lno">218</span></span>
<span id="line-S-51480-219"><span class="lno">219</span></span>
<span id="line-S-51480-220">220</span>
<span id="line-S-51480-221"><span class="lno">221</span></span>
<span id="line-S-51480-222"><span class="lno">222</span></span>
<span id="line-S-51480-223"><span class="lno">223</span></span>
<span id="line-S-51480-224"><span class="lno">224</span></span>
<span id="line-S-51480-225">225</span>
<span id="line-S-51480-226"><span class="lno">226</span></span>
<span id="line-S-51480-227"><span class="lno">227</span></span>
<span id="line-S-51480-228"><span class="lno">228</span></span>
<span id="line-S-51480-229"><span class="lno">229</span></span>
<span id="line-S-51480-230">230</span>
<span id="line-S-51480-231"><span class="lno">231</span></span>
<span id="line-S-51480-232"><span class="lno">232</span></span>
<span id="line-S-51480-233"><span class="lno">233</span></span>
<span id="line-S-51480-234"><span class="lno">234</span></span>
<span id="line-S-51480-235">235</span>
<span id="line-S-51480-236"><span class="lno">236</span></span>
<span id="line-S-51480-237"><span class="lno">237</span></span>
<span id="line-S-51480-238"><span class="lno">238</span></span>
<span id="line-S-51480-239"><span class="lno">239</span></span>
<span id="line-S-51480-240">240</span>
<span id="line-S-51480-241"><span class="lno">241</span></span>
<span id="line-S-51480-242"><span class="lno">242</span></span>
<span id="line-S-51480-243"><span class="lno">243</span></span>
<span id="line-S-51480-244"><span class="lno">244</span></span>
<span id="line-S-51480-245">245</span>
<span id="line-S-51480-246"><span class="lno">246</span></span>
<span id="line-S-51480-247"><span class="lno">247</span></span>
<span id="line-S-51480-248"><span class="lno">248</span></span>
<span id="line-S-51480-249"><span class="lno">249</span></span>
<span id="line-S-51480-250">250</span>
<span id="line-S-51480-251"><span class="lno">251</span></span>
<span id="line-S-51480-252"><span class="lno">252</span></span>
<span id="line-S-51480-253"><span class="lno">253</span></span>
<span id="line-S-51480-254"><span class="lno">254</span></span>
<span id="line-S-51480-255">255</span>
<span id="line-S-51480-256"><span class="lno">256</span></span>
<span id="line-S-51480-257"><span class="lno">257</span></span>
<span id="line-S-51480-258"><span class="lno">258</span></span>
<span id="line-S-51480-259"><span class="lno">259</span></span>
<span id="line-S-51480-260">260</span>
<span id="line-S-51480-261"><span class="lno">261</span></span>
<span id="line-S-51480-262"><span class="lno">262</span></span>
<span id="line-S-51480-263"><span class="lno">263</span></span>
<span id="line-S-51480-264"><span class="lno">264</span></span>
<span id="line-S-51480-265">265</span>
<span id="line-S-51480-266"><span class="lno">266</span></span>
<span id="line-S-51480-267"><span class="lno">267</span></span>
<span id="line-S-51480-268"><span class="lno">268</span></span>
<span id="line-S-51480-269"><span class="lno">269</span></span>
<span id="line-S-51480-270">270</span>
<span id="line-S-51480-271"><span class="lno">271</span></span>
<span id="line-S-51480-272"><span class="lno">272</span></span>
<span id="line-S-51480-273"><span class="lno">273</span></span>
<span id="line-S-51480-274"><span class="lno">274</span></span>
<span id="line-S-51480-275">275</span>
<span id="line-S-51480-276"><span class="lno">276</span></span>
<span id="line-S-51480-277"><span class="lno">277</span></span>
<span id="line-S-51480-278"><span class="lno">278</span></span>
<span id="line-S-51480-279"><span class="lno">279</span></span>
<span id="line-S-51480-280">280</span>
<span id="line-S-51480-281"><span class="lno">281</span></span>
<span id="line-S-51480-282"><span class="lno">282</span></span>
<span id="line-S-51480-283"><span class="lno">283</span></span>
<span id="line-S-51480-284"><span class="lno">284</span></span>
<span id="line-S-51480-285">285</span>
<span id="line-S-51480-286"><span class="lno">286</span></span>
<span id="line-S-51480-287"><span class="lno">287</span></span>
<span id="line-S-51480-288"><span class="lno">288</span></span>
<span id="line-S-51480-289"><span class="lno">289</span></span>
<span id="line-S-51480-290">290</span>
<span id="line-S-51480-291"><span class="lno">291</span></span>
<span id="line-S-51480-292"><span class="lno">292</span></span>
<span id="line-S-51480-293"><span class="lno">293</span></span>
<span id="line-S-51480-294"><span class="lno">294</span></span>
<span id="line-S-51480-295">295</span>
<span id="line-S-51480-296"><span class="lno">296</span></span>
<span id="line-S-51480-297"><span class="lno">297</span></span>
<span id="line-S-51480-298"><span class="lno">298</span></span>
<span id="line-S-51480-299"><span class="lno">299</span></span>
<span id="line-S-51480-300">300</span>
<span id="line-S-51480-301"><span class="lno">301</span></span>
<span id="line-S-51480-302"><span class="lno">302</span></span>
<span id="line-S-51480-303"><span class="lno">303</span></span>
<span id="line-S-51480-304"><span class="lno">304</span></span>
<span id="line-S-51480-305">305</span>
<span id="line-S-51480-306"><span class="lno">306</span></span>
<span id="line-S-51480-307"><span class="lno">307</span></span>
<span id="line-S-51480-308"><span class="lno">308</span></span>
<span id="line-S-51480-309"><span class="lno">309</span></span>
<span id="line-S-51480-310">310</span>
<span id="line-S-51480-311"><span class="lno">311</span></span>
<span id="line-S-51480-312"><span class="lno">312</span></span>
<span id="line-S-51480-313"><span class="lno">313</span></span>
<span id="line-S-51480-314"><span class="lno">314</span></span>
<span id="line-S-51480-315">315</span>
<span id="line-S-51480-316"><span class="lno">316</span></span>
<span id="line-S-51480-317"><span class="lno">317</span></span>
<span id="line-S-51480-318"><span class="lno">318</span></span>
<span id="line-S-51480-319"><span class="lno">319</span></span>
<span id="line-S-51480-320">320</span>
<span id="line-S-51480-321"><span class="lno">321</span></span>
<span id="line-S-51480-322"><span class="lno">322</span></span>
<span id="line-S-51480-323"><span class="lno">323</span></span>
<span id="line-S-51480-324"><span class="lno">324</span></span>
<span id="line-S-51480-325">325</span>
<span id="line-S-51480-326"><span class="lno">326</span></span>
<span id="line-S-51480-327"><span class="lno">327</span></span>
<span id="line-S-51480-328"><span class="lno">328</span></span>
<span id="line-S-51480-329"><span class="lno">329</span></span>
<span id="line-S-51480-330">330</span>
<span id="line-S-51480-331"><span class="lno">331</span></span>
<span id="line-S-51480-332"><span class="lno">332</span></span>
<span id="line-S-51480-333"><span class="lno">333</span></span>
<span id="line-S-51480-334"><span class="lno">334</span></span>
<span id="line-S-51480-335">335</span>
<span id="line-S-51480-336"><span class="lno">336</span></span>
<span id="line-S-51480-337"><span class="lno">337</span></span>
<span id="line-S-51480-338"><span class="lno">338</span></span>
<span id="line-S-51480-339"><span class="lno">339</span></span>
<span id="line-S-51480-340">340</span>
<span id="line-S-51480-341"><span class="lno">341</span></span>
<span id="line-S-51480-342"><span class="lno">342</span></span>
<span id="line-S-51480-343"><span class="lno">343</span></span>
<span id="line-S-51480-344"><span class="lno">344</span></span>
<span id="line-S-51480-345">345</span>
<span id="line-S-51480-346"><span class="lno">346</span></span>
<span id="line-S-51480-347"><span class="lno">347</span></span>
<span id="line-S-51480-348"><span class="lno">348</span></span>
<span id="line-S-51480-349"><span class="lno">349</span></span>
<span id="line-S-51480-350">350</span>
<span id="line-S-51480-351"><span class="lno">351</span></span>
<span id="line-S-51480-352"><span class="lno">352</span></span>
<span id="line-S-51480-353"><span class="lno">353</span></span>
<span id="line-S-51480-354"><span class="lno">354</span></span>
<span id="line-S-51480-355">355</span>
<span id="line-S-51480-356"><span class="lno">356</span></span>
<span id="line-S-51480-357"><span class="lno">357</span></span>
<span id="line-S-51480-358"><span class="lno">358</span></span>
<span id="line-S-51480-359"><span class="lno">359</span></span>
<span id="line-S-51480-360">360</span>
<span id="line-S-51480-361"><span class="lno">361</span></span>
<span id="line-S-51480-362"><span class="lno">362</span></span>
<span id="line-S-51480-363"><span class="lno">363</span></span>
<span id="line-S-51480-364"><span class="lno">364</span></span>
<span id="line-S-51480-365">365</span>
<span id="line-S-51480-366"><span class="lno">366</span></span>
<span id="line-S-51480-367"><span class="lno">367</span></span>
<span id="line-S-51480-368"><span class="lno">368</span></span>
<span id="line-S-51480-369"><span class="lno">369</span></span>
<span id="line-S-51480-370">370</span>
<span id="line-S-51480-371"><span class="lno">371</span></span>
<span id="line-S-51480-372"><span class="lno">372</span></span>
<span id="line-S-51480-373"><span class="lno">373</span></span>
<span id="line-S-51480-374"><span class="lno">374</span></span>
<span id="line-S-51480-375">375</span>
<span id="line-S-51480-376"><span class="lno">376</span></span>
<span id="line-S-51480-377"><span class="lno">377</span></span>
<span id="line-S-51480-378"><span class="lno">378</span></span>
<span id="line-S-51480-379"><span class="lno">379</span></span>
<span id="line-S-51480-380">380</span>
<span id="line-S-51480-381"><span class="lno">381</span></span>
<span id="line-S-51480-382"><span class="lno">382</span></span>
<span id="line-S-51480-383"><span class="lno">383</span></span>
<span id="line-S-51480-384"><span class="lno">384</span></span>
<span id="line-S-51480-385">385</span>
<span id="line-S-51480-386"><span class="lno">386</span></span>
<span id="line-S-51480-387"><span class="lno">387</span></span>
<span id="line-S-51480-388"><span class="lno">388</span></span>
<span id="line-S-51480-389"><span class="lno">389</span></span>
<span id="line-S-51480-390">390</span>
<span id="line-S-51480-391"><span class="lno">391</span></span>
<span id="line-S-51480-392"><span class="lno">392</span></span>
<span id="line-S-51480-393"><span class="lno">393</span></span>
<span id="line-S-51480-394"><span class="lno">394</span></span>
<span id="line-S-51480-395">395</span>
<span id="line-S-51480-396"><span class="lno">396</span></span>
<span id="line-S-51480-397"><span class="lno">397</span></span>
<span id="line-S-51480-398"><span class="lno">398</span></span>
<span id="line-S-51480-399"><span class="lno">399</span></span>
<span id="line-S-51480-400">400</span>
<span id="line-S-51480-401"><span class="lno">401</span></span>
<span id="line-S-51480-402"><span class="lno">402</span></span>
<span id="line-S-51480-403"><span class="lno">403</span></span>
<span id="line-S-51480-404"><span class="lno">404</span></span>
<span id="line-S-51480-405">405</span>
<span id="line-S-51480-406"><span class="lno">406</span></span>
<span id="line-S-51480-407"><span class="lno">407</span></span>
<span id="line-S-51480-408"><span class="lno">408</span></span>
<span id="line-S-51480-409"><span class="lno">409</span></span>
<span id="line-S-51480-410">410</span>
<span id="line-S-51480-411"><span class="lno">411</span></span>
<span id="line-S-51480-412"><span class="lno">412</span></span>
<span id="line-S-51480-413"><span class="lno">413</span></span>
<span id="line-S-51480-414"><span class="lno">414</span></span>
<span id="line-S-51480-415">415</span>
<span id="line-S-51480-416"><span class="lno">416</span></span>
<span id="line-S-51480-417"><span class="lno">417</span></span>
<span id="line-S-51480-418"><span class="lno">418</span></span>
<span id="line-S-51480-419"><span class="lno">419</span></span>
<span id="line-S-51480-420">420</span>
<span id="line-S-51480-421"><span class="lno">421</span></span>
<span id="line-S-51480-422"><span class="lno">422</span></span>
<span id="line-S-51480-423"><span class="lno">423</span></span>
<span id="line-S-51480-424"><span class="lno">424</span></span>
<span id="line-S-51480-425">425</span>
<span id="line-S-51480-426"><span class="lno">426</span></span>
<span id="line-S-51480-427"><span class="lno">427</span></span>
<span id="line-S-51480-428"><span class="lno">428</span></span>
<span id="line-S-51480-429"><span class="lno">429</span></span>
<span id="line-S-51480-430">430</span>
<span id="line-S-51480-431"><span class="lno">431</span></span>
<span id="line-S-51480-432"><span class="lno">432</span></span>
<span id="line-S-51480-433"><span class="lno">433</span></span>
<span id="line-S-51480-434"><span class="lno">434</span></span>
<span id="line-S-51480-435">435</span>
<span id="line-S-51480-436"><span class="lno">436</span></span>
<span id="line-S-51480-437"><span class="lno">437</span></span>
<span id="line-S-51480-438"><span class="lno">438</span></span>
<span id="line-S-51480-439"><span class="lno">439</span></span>
<span id="line-S-51480-440">440</span>
<span id="line-S-51480-441"><span class="lno">441</span></span>
<span id="line-S-51480-442"><span class="lno">442</span></span>
<span id="line-S-51480-443"><span class="lno">443</span></span>
<span id="line-S-51480-444"><span class="lno">444</span></span>
<span id="line-S-51480-445">445</span>
<span id="line-S-51480-446"><span class="lno">446</span></span>
<span id="line-S-51480-447"><span class="lno">447</span></span>
<span id="line-S-51480-448"><span class="lno">448</span></span>
<span id="line-S-51480-449"><span class="lno">449</span></span>
<span id="line-S-51480-450">450</span>
<span id="line-S-51480-451"><span class="lno">451</span></span>
<span id="line-S-51480-452"><span class="lno">452</span></span>
<span id="line-S-51480-453"><span class="lno">453</span></span>
<span id="line-S-51480-454"><span class="lno">454</span></span>
<span id="line-S-51480-455">455</span>
<span id="line-S-51480-456"><span class="lno">456</span></span>
<span id="line-S-51480-457"><span class="lno">457</span></span>
<span id="line-S-51480-458"><span class="lno">458</span></span>
<span id="line-S-51480-459"><span class="lno">459</span></span>
<span id="line-S-51480-460">460</span>
<span id="line-S-51480-461"><span class="lno">461</span></span>
<span id="line-S-51480-462"><span class="lno">462</span></span>
<span id="line-S-51480-463"><span class="lno">463</span></span>
<span id="line-S-51480-464"><span class="lno">464</span></span>
<span id="line-S-51480-465">465</span>
<span id="line-S-51480-466"><span class="lno">466</span></span>
<span id="line-S-51480-467"><span class="lno">467</span></span>
<span id="line-S-51480-468"><span class="lno">468</span></span>
<span id="line-S-51480-469"><span class="lno">469</span></span>
<span id="line-S-51480-470">470</span>
<span id="line-S-51480-471"><span class="lno">471</span></span>
<span id="line-S-51480-472"><span class="lno">472</span></span>
<span id="line-S-51480-473"><span class="lno">473</span></span>
<span id="line-S-51480-474"><span class="lno">474</span></span>
<span id="line-S-51480-475">475</span>
<span id="line-S-51480-476"><span class="lno">476</span></span>
<span id="line-S-51480-477"><span class="lno">477</span></span>
<span id="line-S-51480-478"><span class="lno">478</span></span>
<span id="line-S-51480-479"><span class="lno">479</span></span>
<span id="line-S-51480-480">480</span>
<span id="line-S-51480-481"><span class="lno">481</span></span>
<span id="line-S-51480-482"><span class="lno">482</span></span>
<span id="line-S-51480-483"><span class="lno">483</span></span>
<span id="line-S-51480-484"><span class="lno">484</span></span>
<span id="line-S-51480-485">485</span>
<span id="line-S-51480-486"><span class="lno">486</span></span>
<span id="line-S-51480-487"><span class="lno">487</span></span>
<span id="line-S-51480-488"><span class="lno">488</span></span>
<span id="line-S-51480-489"><span class="lno">489</span></span>
<span id="line-S-51480-490">490</span>
<span id="line-S-51480-491"><span class="lno">491</span></span>
<span id="line-S-51480-492"><span class="lno">492</span></span>
<span id="line-S-51480-493"><span class="lno">493</span></span>
<span id="line-S-51480-494"><span class="lno">494</span></span>
<span id="line-S-51480-495">495</span>
<span id="line-S-51480-496"><span class="lno">496</span></span>
<span id="line-S-51480-497"><span class="lno">497</span></span>
<span id="line-S-51480-498"><span class="lno">498</span></span>
<span id="line-S-51480-499"><span class="lno">499</span></span>
<span id="line-S-51480-500">500</span>
<span id="line-S-51480-501"><span class="lno">501</span></span>
<span id="line-S-51480-502"><span class="lno">502</span></span>
<span id="line-S-51480-503"><span class="lno">503</span></span>
<span id="line-S-51480-504"><span class="lno">504</span></span>
<span id="line-S-51480-505">505</span>
<span id="line-S-51480-506"><span class="lno">506</span></span>
<span id="line-S-51480-507"><span class="lno">507</span></span>
<span id="line-S-51480-508"><span class="lno">508</span></span>
<span id="line-S-51480-509"><span class="lno">509</span></span>
<span id="line-S-51480-510">510</span>
<span id="line-S-51480-511"><span class="lno">511</span></span>
<span id="line-S-51480-512"><span class="lno">512</span></span>
<span id="line-S-51480-513"><span class="lno">513</span></span>
<span id="line-S-51480-514"><span class="lno">514</span></span>
<span id="line-S-51480-515">515</span>
<span id="line-S-51480-516"><span class="lno">516</span></span>
<span id="line-S-51480-517"><span class="lno">517</span></span>
<span id="line-S-51480-518"><span class="lno">518</span></span>
<span id="line-S-51480-519"><span class="lno">519</span></span>
<span id="line-S-51480-520">520</span>
<span id="line-S-51480-521"><span class="lno">521</span></span>
<span id="line-S-51480-522"><span class="lno">522</span></span>
<span id="line-S-51480-523"><span class="lno">523</span></span>
<span id="line-S-51480-524"><span class="lno">524</span></span>
<span id="line-S-51480-525">525</span>
<span id="line-S-51480-526"><span class="lno">526</span></span>
<span id="line-S-51480-527"><span class="lno">527</span></span>
<span id="line-S-51480-528"><span class="lno">528</span></span>
<span id="line-S-51480-529"><span class="lno">529</span></span>
<span id="line-S-51480-530">530</span>
<span id="line-S-51480-531"><span class="lno">531</span></span>
<span id="line-S-51480-532"><span class="lno">532</span></span>
<span id="line-S-51480-533"><span class="lno">533</span></span>
<span id="line-S-51480-534"><span class="lno">534</span></span>
<span id="line-S-51480-535">535</span>
<span id="line-S-51480-536"><span class="lno">536</span></span>
<span id="line-S-51480-537"><span class="lno">537</span></span>
<span id="line-S-51480-538"><span class="lno">538</span></span>
<span id="line-S-51480-539"><span class="lno">539</span></span>
<span id="line-S-51480-540">540</span>
<span id="line-S-51480-541"><span class="lno">541</span></span>
<span id="line-S-51480-542"><span class="lno">542</span></span>
<span id="line-S-51480-543"><span class="lno">543</span></span>
<span id="line-S-51480-544"><span class="lno">544</span></span>
<span id="line-S-51480-545">545</span>
<span id="line-S-51480-546"><span class="lno">546</span></span>
<span id="line-S-51480-547"><span class="lno">547</span></span>
<span id="line-S-51480-548"><span class="lno">548</span></span>
<span id="line-S-51480-549"><span class="lno">549</span></span>
<span id="line-S-51480-550">550</span>
<span id="line-S-51480-551"><span class="lno">551</span></span>
<span id="line-S-51480-552"><span class="lno">552</span></span>
<span id="line-S-51480-553"><span class="lno">553</span></span>
<span id="line-S-51480-554"><span class="lno">554</span></span>
<span id="line-S-51480-555">555</span>
<span id="line-S-51480-556"><span class="lno">556</span></span>
<span id="line-S-51480-557"><span class="lno">557</span></span>
<span id="line-S-51480-558"><span class="lno">558</span></span>
<span id="line-S-51480-559"><span class="lno">559</span></span>
<span id="line-S-51480-560">560</span>
<span id="line-S-51480-561"><span class="lno">561</span></span>
<span id="line-S-51480-562"><span class="lno">562</span></span>
<span id="line-S-51480-563"><span class="lno">563</span></span>
<span id="line-S-51480-564"><span class="lno">564</span></span>
<span id="line-S-51480-565">565</span>
<span id="line-S-51480-566"><span class="lno">566</span></span>
<span id="line-S-51480-567"><span class="lno">567</span></span>
<span id="line-S-51480-568"><span class="lno">568</span></span>
<span id="line-S-51480-569"><span class="lno">569</span></span>
<span id="line-S-51480-570">570</span>
<span id="line-S-51480-571"><span class="lno">571</span></span>
<span id="line-S-51480-572"><span class="lno">572</span></span>
<span id="line-S-51480-573"><span class="lno">573</span></span>
<span id="line-S-51480-574"><span class="lno">574</span></span>
<span id="line-S-51480-575">575</span>
<span id="line-S-51480-576"><span class="lno">576</span></span>
<span id="line-S-51480-577"><span class="lno">577</span></span>
<span id="line-S-51480-578"><span class="lno">578</span></span>
<span id="line-S-51480-579"><span class="lno">579</span></span>
<span id="line-S-51480-580">580</span>
<span id="line-S-51480-581"><span class="lno">581</span></span>
<span id="line-S-51480-582"><span class="lno">582</span></span>
<span id="line-S-51480-583"><span class="lno">583</span></span>
<span id="line-S-51480-584"><span class="lno">584</span></span>
<span id="line-S-51480-585">585</span>
<span id="line-S-51480-586"><span class="lno">586</span></span>
<span id="line-S-51480-587"><span class="lno">587</span></span>
<span id="line-S-51480-588"><span class="lno">588</span></span>
<span id="line-S-51480-589"><span class="lno">589</span></span>
<span id="line-S-51480-590">590</span>
<span id="line-S-51480-591"><span class="lno">591</span></span>
<span id="line-S-51480-592"><span class="lno">592</span></span>
<span id="line-S-51480-593"><span class="lno">593</span></span>
<span id="line-S-51480-594"><span class="lno">594</span></span>
<span id="line-S-51480-595">595</span>
<span id="line-S-51480-596"><span class="lno">596</span></span>
<span id="line-S-51480-597"><span class="lno">597</span></span>
<span id="line-S-51480-598"><span class="lno">598</span></span>
<span id="line-S-51480-599"><span class="lno">599</span></span>
<span id="line-S-51480-600">600</span>
<span id="line-S-51480-601"><span class="lno">601</span></span>
<span id="line-S-51480-602"><span class="lno">602</span></span>
<span id="line-S-51480-603"><span class="lno">603</span></span>
<span id="line-S-51480-604"><span class="lno">604</span></span>
<span id="line-S-51480-605">605</span>
<span id="line-S-51480-606"><span class="lno">606</span></span>
<span id="line-S-51480-607"><span class="lno">607</span></span>
<span id="line-S-51480-608"><span class="lno">608</span></span>
<span id="line-S-51480-609"><span class="lno">609</span></span>
<span id="line-S-51480-610">610</span>
<span id="line-S-51480-611"><span class="lno">611</span></span>
<span id="line-S-51480-612"><span class="lno">612</span></span>
<span id="line-S-51480-613"><span class="lno">613</span></span>
<span id="line-S-51480-614"><span class="lno">614</span></span>
<span id="line-S-51480-615">615</span>
<span id="line-S-51480-616"><span class="lno">616</span></span>
<span id="line-S-51480-617"><span class="lno">617</span></span>
<span id="line-S-51480-618"><span class="lno">618</span></span>
<span id="line-S-51480-619"><span class="lno">619</span></span>
<span id="line-S-51480-620">620</span>
<span id="line-S-51480-621"><span class="lno">621</span></span>
<span id="line-S-51480-622"><span class="lno">622</span></span>
<span id="line-S-51480-623"><span class="lno">623</span></span>
<span id="line-S-51480-624"><span class="lno">624</span></span>
<span id="line-S-51480-625">625</span>
<span id="line-S-51480-626"><span class="lno">626</span></span>
<span id="line-S-51480-627"><span class="lno">627</span></span>
<span id="line-S-51480-628"><span class="lno">628</span></span>
<span id="line-S-51480-629"><span class="lno">629</span></span>
<span id="line-S-51480-630">630</span>
<span id="line-S-51480-631"><span class="lno">631</span></span>
<span id="line-S-51480-632"><span class="lno">632</span></span>
<span id="line-S-51480-633"><span class="lno">633</span></span>
<span id="line-S-51480-634"><span class="lno">634</span></span>
<span id="line-S-51480-635">635</span>
<span id="line-S-51480-636"><span class="lno">636</span></span>
<span id="line-S-51480-637"><span class="lno">637</span></span>
<span id="line-S-51480-638"><span class="lno">638</span></span>
<span id="line-S-51480-639"><span class="lno">639</span></span>
<span id="line-S-51480-640">640</span>
<span id="line-S-51480-641"><span class="lno">641</span></span>
<span id="line-S-51480-642"><span class="lno">642</span></span>
<span id="line-S-51480-643"><span class="lno">643</span></span>
<span id="line-S-51480-644"><span class="lno">644</span></span>
<span id="line-S-51480-645">645</span>
<span id="line-S-51480-646"><span class="lno">646</span></span>
<span id="line-S-51480-647"><span class="lno">647</span></span>
<span id="line-S-51480-648"><span class="lno">648</span></span>
<span id="line-S-51480-649"><span class="lno">649</span></span>
<span id="line-S-51480-650">650</span>
<span id="line-S-51480-651"><span class="lno">651</span></span>
<span id="line-S-51480-652"><span class="lno">652</span></span>
<span id="line-S-51480-653"><span class="lno">653</span></span>
<span id="line-S-51480-654"><span class="lno">654</span></span>
<span id="line-S-51480-655">655</span>
<span id="line-S-51480-656"><span class="lno">656</span></span>
<span id="line-S-51480-657"><span class="lno">657</span></span>
<span id="line-S-51480-658"><span class="lno">658</span></span>
<span id="line-S-51480-659"><span class="lno">659</span></span>
<span id="line-S-51480-660">660</span>
<span id="line-S-51480-661"><span class="lno">661</span></span>
<span id="line-S-51480-662"><span class="lno">662</span></span>
<span id="line-S-51480-663"><span class="lno">663</span></span>
<span id="line-S-51480-664"><span class="lno">664</span></span>
<span id="line-S-51480-665">665</span>
<span id="line-S-51480-666"><span class="lno">666</span></span>
<span id="line-S-51480-667"><span class="lno">667</span></span>
<span id="line-S-51480-668"><span class="lno">668</span></span>
<span id="line-S-51480-669"><span class="lno">669</span></span>
<span id="line-S-51480-670">670</span>
<span id="line-S-51480-671"><span class="lno">671</span></span>
<span id="line-S-51480-672"><span class="lno">672</span></span>
<span id="line-S-51480-673"><span class="lno">673</span></span>
<span id="line-S-51480-674"><span class="lno">674</span></span>
<span id="line-S-51480-675">675</span>
<span id="line-S-51480-676"><span class="lno">676</span></span>
<span id="line-S-51480-677"><span class="lno">677</span></span>
<span id="line-S-51480-678"><span class="lno">678</span></span>
<span id="line-S-51480-679"><span class="lno">679</span></span>
<span id="line-S-51480-680">680</span>
<span id="line-S-51480-681"><span class="lno">681</span></span>
<span id="line-S-51480-682"><span class="lno">682</span></span>
<span id="line-S-51480-683"><span class="lno">683</span></span>
<span id="line-S-51480-684"><span class="lno">684</span></span>
<span id="line-S-51480-685">685</span>
<span id="line-S-51480-686"><span class="lno">686</span></span>
<span id="line-S-51480-687"><span class="lno">687</span></span>
<span id="line-S-51480-688"><span class="lno">688</span></span>
<span id="line-S-51480-689"><span class="lno">689</span></span>
<span id="line-S-51480-690">690</span>
<span id="line-S-51480-691"><span class="lno">691</span></span>
<span id="line-S-51480-692"><span class="lno">692</span></span>
<span id="line-S-51480-693"><span class="lno">693</span></span>
<span id="line-S-51480-694"><span class="lno">694</span></span>
<span id="line-S-51480-695">695</span>
<span id="line-S-51480-696"><span class="lno">696</span></span>
<span id="line-S-51480-697"><span class="lno">697</span></span>
<span id="line-S-51480-698"><span class="lno">698</span></span>
<span id="line-S-51480-699"><span class="lno">699</span></span>
<span id="line-S-51480-700">700</span>
<span id="line-S-51480-701"><span class="lno">701</span></span>
<span id="line-S-51480-702"><span class="lno">702</span></span>
<span id="line-S-51480-703"><span class="lno">703</span></span>
<span id="line-S-51480-704"><span class="lno">704</span></span>
<span id="line-S-51480-705">705</span>
<span id="line-S-51480-706"><span class="lno">706</span></span>
<span id="line-S-51480-707"><span class="lno">707</span></span>
<span id="line-S-51480-708"><span class="lno">708</span></span>
<span id="line-S-51480-709"><span class="lno">709</span></span>
<span id="line-S-51480-710">710</span>
<span id="line-S-51480-711"><span class="lno">711</span></span>
<span id="line-S-51480-712"><span class="lno">712</span></span>
<span id="line-S-51480-713"><span class="lno">713</span></span>
<span id="line-S-51480-714"><span class="lno">714</span></span>
<span id="line-S-51480-715">715</span>
<span id="line-S-51480-716"><span class="lno">716</span></span>
<span id="line-S-51480-717"><span class="lno">717</span></span>
<span id="line-S-51480-718"><span class="lno">718</span></span>
<span id="line-S-51480-719"><span class="lno">719</span></span>
<span id="line-S-51480-720">720</span>
<span id="line-S-51480-721"><span class="lno">721</span></span>
<span id="line-S-51480-722"><span class="lno">722</span></span>
<span id="line-S-51480-723"><span class="lno">723</span></span>
<span id="line-S-51480-724"><span class="lno">724</span></span>
<span id="line-S-51480-725">725</span>
<span id="line-S-51480-726"><span class="lno">726</span></span>
<span id="line-S-51480-727"><span class="lno">727</span></span>
<span id="line-S-51480-728"><span class="lno">728</span></span>
<span id="line-S-51480-729"><span class="lno">729</span></span>
<span id="line-S-51480-730">730</span>
<span id="line-S-51480-731"><span class="lno">731</span></span>
<span id="line-S-51480-732"><span class="lno">732</span></span>
<span id="line-S-51480-733"><span class="lno">733</span></span>
<span id="line-S-51480-734"><span class="lno">734</span></span>
<span id="line-S-51480-735">735</span>
<span id="line-S-51480-736"><span class="lno">736</span></span>
<span id="line-S-51480-737"><span class="lno">737</span></span>
<span id="line-S-51480-738"><span class="lno">738</span></span>
<span id="line-S-51480-739"><span class="lno">739</span></span>
<span id="line-S-51480-740">740</span>
<span id="line-S-51480-741"><span class="lno">741</span></span>
<span id="line-S-51480-742"><span class="lno">742</span></span>
<span id="line-S-51480-743"><span class="lno">743</span></span>
<span id="line-S-51480-744"><span class="lno">744</span></span>
<span id="line-S-51480-745">745</span>
<span id="line-S-51480-746"><span class="lno">746</span></span>
<span id="line-S-51480-747"><span class="lno">747</span></span>
<span id="line-S-51480-748"><span class="lno">748</span></span>
<span id="line-S-51480-749"><span class="lno">749</span></span>
<span id="line-S-51480-750">750</span>
<span id="line-S-51480-751"><span class="lno">751</span></span>
<span id="line-S-51480-752"><span class="lno">752</span></span>
<span id="line-S-51480-753"><span class="lno">753</span></span>
<span id="line-S-51480-754"><span class="lno">754</span></span>
<span id="line-S-51480-755">755</span>
<span id="line-S-51480-756"><span class="lno">756</span></span>
<span id="line-S-51480-757"><span class="lno">757</span></span>
<span id="line-S-51480-758"><span class="lno">758</span></span>
<span id="line-S-51480-759"><span class="lno">759</span></span>
<span id="line-S-51480-760">760</span>
<span id="line-S-51480-761"><span class="lno">761</span></span>
<span id="line-S-51480-762"><span class="lno">762</span></span>
<span id="line-S-51480-763"><span class="lno">763</span></span>
<span id="line-S-51480-764"><span class="lno">764</span></span>
<span id="line-S-51480-765">765</span>
<span id="line-S-51480-766"><span class="lno">766</span></span>
<span id="line-S-51480-767"><span class="lno">767</span></span>
<span id="line-S-51480-768"><span class="lno">768</span></span>
<span id="line-S-51480-769"><span class="lno">769</span></span>
<span id="line-S-51480-770">770</span>
<span id="line-S-51480-771"><span class="lno">771</span></span>
<span id="line-S-51480-772"><span class="lno">772</span></span>
<span id="line-S-51480-773"><span class="lno">773</span></span>
<span id="line-S-51480-774"><span class="lno">774</span></span>
<span id="line-S-51480-775">775</span>
<span id="line-S-51480-776"><span class="lno">776</span></span>
<span id="line-S-51480-777"><span class="lno">777</span></span>
<span id="line-S-51480-778"><span class="lno">778</span></span>
<span id="line-S-51480-779"><span class="lno">779</span></span>
<span id="line-S-51480-780">780</span>
<span id="line-S-51480-781"><span class="lno">781</span></span>
<span id="line-S-51480-782"><span class="lno">782</span></span>
<span id="line-S-51480-783"><span class="lno">783</span></span>
<span id="line-S-51480-784"><span class="lno">784</span></span>
<span id="line-S-51480-785">785</span>
<span id="line-S-51480-786"><span class="lno">786</span></span>
<span id="line-S-51480-787"><span class="lno">787</span></span>
<span id="line-S-51480-788"><span class="lno">788</span></span>
<span id="line-S-51480-789"><span class="lno">789</span></span>
<span id="line-S-51480-790">790</span>
<span id="line-S-51480-791"><span class="lno">791</span></span>
<span id="line-S-51480-792"><span class="lno">792</span></span>
<span id="line-S-51480-793"><span class="lno">793</span></span>
<span id="line-S-51480-794"><span class="lno">794</span></span>
<span id="line-S-51480-795">795</span>
<span id="line-S-51480-796"><span class="lno">796</span></span>
<span id="line-S-51480-797"><span class="lno">797</span></span>
<span id="line-S-51480-798"><span class="lno">798</span></span>
<span id="line-S-51480-799"><span class="lno">799</span></span>
<span id="line-S-51480-800">800</span>
<span id="line-S-51480-801"><span class="lno">801</span></span>
<span id="line-S-51480-802"><span class="lno">802</span></span>
<span id="line-S-51480-803"><span class="lno">803</span></span>
<span id="line-S-51480-804"><span class="lno">804</span></span>
<span id="line-S-51480-805">805</span>
<span id="line-S-51480-806"><span class="lno">806</span></span>
<span id="line-S-51480-807"><span class="lno">807</span></span>
<span id="line-S-51480-808"><span class="lno">808</span></span>
<span id="line-S-51480-809"><span class="lno">809</span></span>
<span id="line-S-51480-810">810</span>
<span id="line-S-51480-811"><span class="lno">811</span></span>
<span id="line-S-51480-812"><span class="lno">812</span></span>
<span id="line-S-51480-813"><span class="lno">813</span></span>
<span id="line-S-51480-814"><span class="lno">814</span></span>
<span id="line-S-51480-815">815</span>
<span id="line-S-51480-816"><span class="lno">816</span></span>
<span id="line-S-51480-817"><span class="lno">817</span></span>
<span id="line-S-51480-818"><span class="lno">818</span></span>
<span id="line-S-51480-819"><span class="lno">819</span></span>
<span id="line-S-51480-820">820</span>
<span id="line-S-51480-821"><span class="lno">821</span></span>
<span id="line-S-51480-822"><span class="lno">822</span></span>
<span id="line-S-51480-823"><span class="lno">823</span></span>
<span id="line-S-51480-824"><span class="lno">824</span></span>
<span id="line-S-51480-825">825</span>
<span id="line-S-51480-826"><span class="lno">826</span></span>
<span id="line-S-51480-827"><span class="lno">827</span></span>
<span id="line-S-51480-828"><span class="lno">828</span></span>
<span id="line-S-51480-829"><span class="lno">829</span></span>
<span id="line-S-51480-830">830</span>
<span id="line-S-51480-831"><span class="lno">831</span></span>
<span id="line-S-51480-832"><span class="lno">832</span></span>
<span id="line-S-51480-833"><span class="lno">833</span></span>
<span id="line-S-51480-834"><span class="lno">834</span></span>
<span id="line-S-51480-835">835</span>
<span id="line-S-51480-836"><span class="lno">836</span></span>
<span id="line-S-51480-837"><span class="lno">837</span></span>
<span id="line-S-51480-838"><span class="lno">838</span></span>
<span id="line-S-51480-839"><span class="lno">839</span></span>
<span id="line-S-51480-840">840</span>
<span id="line-S-51480-841"><span class="lno">841</span></span>
<span id="line-S-51480-842"><span class="lno">842</span></span>
<span id="line-S-51480-843"><span class="lno">843</span></span>
<span id="line-S-51480-844"><span class="lno">844</span></span>
<span id="line-S-51480-845">845</span>
<span id="line-S-51480-846"><span class="lno">846</span></span>
<span id="line-S-51480-847"><span class="lno">847</span></span>
<span id="line-S-51480-848"><span class="lno">848</span></span>
<span id="line-S-51480-849"><span class="lno">849</span></span>
<span id="line-S-51480-850">850</span>
<span id="line-S-51480-851"><span class="lno">851</span></span>
<span id="line-S-51480-852"><span class="lno">852</span></span>
<span id="line-S-51480-853"><span class="lno">853</span></span>
<span id="line-S-51480-854"><span class="lno">854</span></span>
<span id="line-S-51480-855">855</span>
<span id="line-S-51480-856"><span class="lno">856</span></span>
<span id="line-S-51480-857"><span class="lno">857</span></span>
<span id="line-S-51480-858"><span class="lno">858</span></span>
<span id="line-S-51480-859"><span class="lno">859</span></span>
<span id="line-S-51480-860">860</span>
<span id="line-S-51480-861"><span class="lno">861</span></span>
<span id="line-S-51480-862"><span class="lno">862</span></span>
<span id="line-S-51480-863"><span class="lno">863</span></span>
<span id="line-S-51480-864"><span class="lno">864</span></span>
<span id="line-S-51480-865">865</span>
<span id="line-S-51480-866"><span class="lno">866</span></span>
<span id="line-S-51480-867"><span class="lno">867</span></span>
<span id="line-S-51480-868"><span class="lno">868</span></span>
<span id="line-S-51480-869"><span class="lno">869</span></span>
<span id="line-S-51480-870">870</span>
<span id="line-S-51480-871"><span class="lno">871</span></span>
<span id="line-S-51480-872"><span class="lno">872</span></span>
<span id="line-S-51480-873"><span class="lno">873</span></span>
<span id="line-S-51480-874"><span class="lno">874</span></span>
<span id="line-S-51480-875">875</span>
<span id="line-S-51480-876"><span class="lno">876</span></span>
<span id="line-S-51480-877"><span class="lno">877</span></span>
<span id="line-S-51480-878"><span class="lno">878</span></span>
<span id="line-S-51480-879"><span class="lno">879</span></span>
<span id="line-S-51480-880">880</span>
<span id="line-S-51480-881"><span class="lno">881</span></span>
<span id="line-S-51480-882"><span class="lno">882</span></span>
<span id="line-S-51480-883"><span class="lno">883</span></span>
<span id="line-S-51480-884"><span class="lno">884</span></span>
<span id="line-S-51480-885">885</span>
<span id="line-S-51480-886"><span class="lno">886</span></span>
<span id="line-S-51480-887"><span class="lno">887</span></span>
<span id="line-S-51480-888"><span class="lno">888</span></span>
<span id="line-S-51480-889"><span class="lno">889</span></span>
</pre></td><td valign="top"><pre><code class="language-xml">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                xmlns:db="http://docbook.org/ns/docbook"
                xmlns:dbe="http://docbook.org/ns/docbook/errors"
                xmlns:ext="http://docbook.org/extensions/xslt"
                xmlns:f="http://docbook.org/ns/docbook/functions"
                xmlns:fp="http://docbook.org/ns/docbook/functions/private"
                xmlns:h="http://www.w3.org/1999/xhtml"
                xmlns:m="http://docbook.org/ns/docbook/modes"
                xmlns:map="http://www.w3.org/2005/xpath-functions/map"
                xmlns:mp="http://docbook.org/ns/docbook/modes/private"
                xmlns:svg="http://www.w3.org/2000/svg"
                xmlns:t="http://docbook.org/ns/docbook/templates"
                xmlns:tp="http://docbook.org/ns/docbook/templates/private"
                xmlns:v="http://docbook.org/ns/docbook/variables"
                xmlns:xlink='http://www.w3.org/1999/xlink'
                xmlns:xs="http://www.w3.org/2001/XMLSchema"
                xmlns="http://www.w3.org/1999/xhtml"
                default-mode="m:docbook"
                exclude-result-prefixes="db dbe ext f fp h m map mp svg t tp v xlink xs"
                version="3.0"&gt;

&lt;!-- ============================================================ --&gt;

&lt;xsl:template match="db:textobject[db:phrase]" mode="m:details-attribute"&gt;
  &lt;xsl:param name="attribute" select="'summary'"/&gt;
  &lt;xsl:attribute name="{$attribute}" select="normalize-space(.)"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:alt" mode="m:details-attribute"&gt;
  &lt;xsl:param name="attribute" select="'summary'"/&gt;
  &lt;xsl:attribute name="{$attribute}" select="normalize-space(.)"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:mediaobject|db:inlinemediaobject"
              mode="m:details-attribute"&gt;
  &lt;xsl:param name="attribute" select="'summary'"/&gt;
  &lt;xsl:apply-templates select="(db:alt,db:textobject[db:phrase])[1]"
                       mode="m:details-attribute"&gt;
    &lt;xsl:with-param name="attribute" select="$attribute"/&gt;
  &lt;/xsl:apply-templates&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="*" mode="m:details-attribute"/&gt;

&lt;!-- ============================================================ --&gt;

&lt;xsl:template match="db:textobject[db:phrase]" mode="m:details"&gt;
  &lt;xsl:attribute name="summary" select="normalize-space(.)"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:alt" mode="m:details"&gt;
  &lt;summary&gt;
    &lt;xsl:apply-templates/&gt;
  &lt;/summary&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:textobject[not(db:phrase)]" mode="m:details"&gt;
  &lt;details&gt;
    &lt;xsl:apply-templates select="db:alt[1]" mode="m:details"/&gt;
    &lt;xsl:apply-templates select="node() except db:alt"/&gt;
  &lt;/details&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:mediaobject|db:inlinemediaobject"&gt;
  &lt;xsl:variable name="pi-properties"
                select="f:pi-attributes(./processing-instruction('db'))"/&gt;
  &lt;xsl:variable name="gi" select="if (self::db:mediaobject)
                                  then 'div'
                                  else 'span'"/&gt;
  &lt;xsl:element name="{$gi}" namespace="http://www.w3.org/1999/xhtml"&gt;
    &lt;xsl:copy-of select="$pi-properties/@style"/&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
    &lt;xsl:if test="('summary' = $mediaobject-accessibility
                   and (db:alt or db:textobject/db:phrase))"&gt;
      &lt;xsl:if test="db:alt or exists(* except db:textobject)"&gt;
        &lt;xsl:choose&gt;
          &lt;xsl:when test="db:alt"&gt;
            &lt;xsl:attribute name="summary" select="normalize-space(db:alt)"/&gt;
          &lt;/xsl:when&gt;
          &lt;xsl:otherwise&gt;
            &lt;xsl:apply-templates select="(db:textobject[db:phrase])[1]"
                                 mode="m:details"/&gt;
          &lt;/xsl:otherwise&gt;
        &lt;/xsl:choose&gt;
      &lt;/xsl:if&gt;
    &lt;/xsl:if&gt;
    &lt;xsl:if test="('details' = $mediaobject-accessibility)"&gt;
      &lt;xsl:apply-templates select="db:textobject[not(db:phrase)]"
                           mode="m:details"/&gt;
    &lt;/xsl:if&gt;
    &lt;xsl:apply-templates select="f:select-mediaobject(*)"/&gt;
  &lt;/xsl:element&gt;
&lt;/xsl:template&gt;

&lt;!--
&lt;xsl:template match="db:inlinemediaobject"&gt;
  &lt;div&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
    &lt;xsl:apply-templates select="f:select-mediaobject-data(*)"/&gt;
  &lt;/div&gt;
--&gt;

&lt;xsl:template match="db:imageobject|db:audioobject|db:videoobject"&gt;
  &lt;xsl:element name="{if (ancestor::db:inlinemediaobject) then 'span' else 'div'}"
               namespace="http://www.w3.org/1999/xhtml"&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
    &lt;xsl:apply-templates select="f:select-mediaobject-data(*, true())"/&gt;
  &lt;/xsl:element&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="svg:*"&gt;
  &lt;xsl:element name="{local-name(.)}" namespace="http://www.w3.org/1999/xhtml"&gt;
    &lt;xsl:copy-of select="@*"/&gt;
    &lt;xsl:apply-templates select="node()"/&gt;
  &lt;/xsl:element&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:imageobjectco"&gt;
  &lt;xsl:apply-templates select="f:select-mediaobject(*)"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:textobject"&gt;
  &lt;xsl:apply-templates/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:audiodata"&gt;
  &lt;xsl:call-template name="tp:process-object"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:videodata"&gt;
  &lt;xsl:call-template name="tp:process-object"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:textdata"&gt;
  &lt;xsl:message&gt;FIXME: db:textdata&lt;/xsl:message&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:imagedata"&gt;
  &lt;xsl:call-template name="tp:process-object"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:multimediaparam"&gt;
  &lt;xsl:attribute name="{@name}" select="@value"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template name="tp:process-object"&gt;
  &lt;!-- When this template is called, the current node should be  --&gt;
  &lt;!-- a graphic, inlinegraphic, imagedata, or videodata. All    --&gt;
  &lt;!-- those elements have the same set of attributes, so we can --&gt;
  &lt;!-- handle them all in one place.                             --&gt;

  &lt;xsl:variable name="href" select="resolve-uri(@fileref, base-uri(.))"/&gt;

  &lt;xsl:if use-when="'mediaobject-uris' = $v:debug"
          test="@fileref"&gt;
    &lt;xsl:message select="'1: m/o fileref:', base-uri(.)"/&gt;
    &lt;xsl:message select="'              +', @fileref/string()"/&gt;
    &lt;xsl:message select="'              →', $href"/&gt;
  &lt;/xsl:if&gt;

  &lt;!-- imagedata, videodata, audiodata --&gt;
  &lt;xsl:variable name="uri" as="xs:string?"&gt;
    &lt;xsl:choose&gt;
      &lt;xsl:when test="not(@fileref)"&gt;
        &lt;xsl:sequence select="()"/&gt;
      &lt;/xsl:when&gt;
      &lt;xsl:when test="exists($v:mediaobject-input-base-uri)"&gt;
        &lt;xsl:sequence select="resolve-uri($href, $v:mediaobject-input-base-uri)"/&gt;
      &lt;/xsl:when&gt;
      &lt;xsl:otherwise&gt;
        &lt;xsl:sequence select="resolve-uri($href, base-uri(.))"/&gt;
      &lt;/xsl:otherwise&gt;
    &lt;/xsl:choose&gt;
  &lt;/xsl:variable&gt;

  &lt;xsl:if use-when="'mediaobject-uris' = $v:debug"
          test="@fileref"&gt;
    &lt;xsl:message select="'2: m/o input:', @fileref/string()"/&gt;
    &lt;xsl:message select="'            →', $uri"/&gt;
  &lt;/xsl:if&gt;

  &lt;xsl:variable name="filename"
                select="if (empty($uri))
                        then ()
                        else f:resolve-object-uri($uri)"/&gt;

  &lt;xsl:variable name="imageproperties" as="map(*)"
                select="if (./self::db:imagedata and @fileref)
                        then f:object-properties($uri)
                        else map { }"/&gt;

  &lt;xsl:variable name="intrinsicwidth"
                select="if (map:contains($imageproperties, 'width'))
                        then f:make-length($imageproperties?width, 'px')
                        else $v:image-nominal-width"/&gt;

  &lt;xsl:variable name="intrinsicheight"
                select="if (map:contains($imageproperties, 'height'))
                        then f:make-length($imageproperties?height, 'px')
                        else $v:image-nominal-height"/&gt;

  &lt;xsl:variable name="width" select="f:object-width(.)"/&gt;
  &lt;xsl:variable name="height" select="f:object-height(.)"/&gt;

  &lt;!-- Convert % widths into absolute widths if we can --&gt;

  &lt;xsl:variable name="width" select="if ($width?unit = '%'
                                         and not(f:is-empty-length($intrinsicwidth)))
                                     then
                                       f:make-length(
                                         $intrinsicwidth?magnitude
                                         * $width?magnitude
                                         div 100.0,
                                         $intrinsicwidth?unit)
                                     else
                                       $width"/&gt;

  &lt;xsl:variable name="height" select="if ($height?unit = '%'
                                         and not(f:is-empty-length($intrinsicheight)))
                                     then
                                       f:make-length(
                                         $intrinsicheight?magnitude
                                         * $height?magnitude
                                         div 100.0,
                                         $intrinsicheight?unit)
                                     else
                                       $height"/&gt;

  &lt;xsl:variable name="scalefit" select="f:object-scalefit(.)"/&gt;
  &lt;xsl:variable name="scale" select="f:object-scale(.)"/&gt;

  &lt;xsl:variable name="cw" select="f:object-contentwidth(., $intrinsicwidth)"/&gt;

  &lt;xsl:variable name="cw" select="if (f:is-empty-length($cw))
                                  then $intrinsicwidth
                                  else $cw"/&gt;

  &lt;xsl:variable name="contentwidth"
                select="if ($scalefit)
                        then $width
                        else $cw"/&gt;

  &lt;xsl:variable name="cw" select="if (f:is-empty-length($contentwidth))
                                  then $v:image-nominal-width
                                  else $contentwidth"/&gt;

  &lt;xsl:variable name="contentwidth"
                select="if ($scale ne 1.0)
                        then f:make-length($cw?magnitude * $scale, $cw?unit)
                        else $contentwidth"/&gt;

  &lt;xsl:variable name="contentwidth"
                select="if (f:equal-lengths($contentwidth, $intrinsicwidth))
                        then ()
                        else $contentwidth"/&gt;

&lt;!-- ======================================== --&gt;

  &lt;xsl:variable name="ch" select="f:object-contentheight(., $intrinsicheight)"/&gt;

  &lt;xsl:variable name="ch" select="if (f:is-empty-length($ch))
                                  then $intrinsicheight
                                  else $ch"/&gt;

  &lt;xsl:variable name="contentheight"
                select="if ($scalefit)
                        then $height
                        else $ch"/&gt;

  &lt;xsl:variable name="ch" select="if (f:is-empty-length($contentheight))
                                  then $v:image-nominal-height
                                  else $contentheight"/&gt;

  &lt;xsl:variable name="contentheight" as="map(*)?"&gt;
    &lt;xsl:choose&gt;
      &lt;xsl:when test="exists(@contentdepth)"&gt;
        &lt;xsl:sequence select="$contentheight"/&gt;
      &lt;/xsl:when&gt;
      &lt;xsl:otherwise&gt;
        &lt;xsl:sequence select="if (f:is-empty-length($contentwidth)
                                  and $scale ne 1.0)
                              then f:make-length($ch?magnitude * $scale, $ch?unit)
                              else if (f:is-empty-length($contentwidth))
                                   then $contentheight
                                   else ()"/&gt;
      &lt;/xsl:otherwise&gt;
    &lt;/xsl:choose&gt;
  &lt;/xsl:variable&gt;

  &lt;xsl:variable name="contentheight"
                select="if (f:equal-lengths($contentheight, $intrinsicheight))
                        then ()
                        else $contentheight"/&gt;

  &lt;xsl:variable name="align" select="f:object-align(.)"/&gt;

  &lt;!-- There's no point doing valign if there's no height --&gt;
  &lt;xsl:variable name="valign" select="if (f:is-empty-length($height)
                                          and f:is-empty-length($contentheight))
                                      then ()
                                      else f:object-valign(.)"/&gt;

  &lt;xsl:if test="true()" use-when="'objects' = $v:debug"&gt;
    &lt;xsl:message select="$filename, ':'"/&gt;
    &lt;xsl:message select="' iwidth : ', f:length-string($intrinsicwidth)"/&gt;
    &lt;xsl:message select="' iheight: ', f:length-string($intrinsicheight)"/&gt;
    &lt;xsl:message select="'  width : ', f:length-string($width)"/&gt;
    &lt;xsl:message select="'  height: ', f:length-string($height)"/&gt;
    &lt;xsl:message select="' cwidth : ', f:length-string($contentwidth)"/&gt;
    &lt;xsl:message select="' cheight: ', f:length-string($contentheight)"/&gt;
    &lt;xsl:message select="'  scale : ', $scale, ' ', $scalefit"/&gt;
    &lt;xsl:message select="'   align: ', $align"/&gt;
    &lt;xsl:message select="'  valign: ', $valign"/&gt;
  &lt;/xsl:if&gt;

  &lt;xsl:variable name="viewport" as="element(h:span)"&gt;
    &lt;xsl:call-template name="tp:viewport"&gt;
      &lt;xsl:with-param name="class" select="'viewport-table'"/&gt;
      &lt;xsl:with-param name="width" select="$width"/&gt;
      &lt;xsl:with-param name="height" select="$height"/&gt;
      &lt;xsl:with-param name="pi-properties"
                      select="f:pi-attributes(../processing-instruction('db'))"/&gt;
      &lt;xsl:with-param name="content" as="element()+"&gt;
        &lt;span class="viewport-row"&gt;
          &lt;xsl:call-template name="tp:viewport"&gt;
            &lt;xsl:with-param name="class" select="'viewport-cell'"/&gt;
            &lt;xsl:with-param name="align" select="$align"/&gt;
            &lt;xsl:with-param name="valign" select="$valign"/&gt;
            &lt;xsl:with-param name="pi-properties"
                            select="f:pi-attributes(processing-instruction('db'))"/&gt;
            &lt;xsl:with-param name="content" as="element()+"&gt;
              &lt;span class="viewport"&gt;
                &lt;xsl:apply-templates select="." mode="mp:imagedata"&gt;
                  &lt;xsl:with-param name="filename" select="$filename"/&gt;
                  &lt;xsl:with-param name="width" select="$contentwidth"/&gt;
                  &lt;xsl:with-param name="height" select="$contentheight"/&gt;
                  &lt;xsl:with-param name="imageproperties" select="$imageproperties"/&gt;
                &lt;/xsl:apply-templates&gt;
              &lt;/span&gt;
            &lt;/xsl:with-param&gt;
          &lt;/xsl:call-template&gt;
        &lt;/span&gt;
      &lt;/xsl:with-param&gt;
    &lt;/xsl:call-template&gt;
  &lt;/xsl:variable&gt;

  &lt;xsl:element name="{if (ancestor::db:inlinemediaobject) then 'span' else 'div'}"
               namespace="http://www.w3.org/1999/xhtml"&gt;
    &lt;xsl:attribute name="class" select="'media'"/&gt;
    &lt;xsl:choose&gt;
      &lt;xsl:when test="empty($viewport/@* except $viewport/@class)
                      and empty($viewport/h:span/@*
                                except $viewport/h:span/@class)
                      and empty($viewport/h:span/h:span/@*
                                except $viewport/h:span/h:span/@class)
                      and empty($viewport/h:span/h:span/h:span/@*
                                except $viewport/h:span/h:span/h:span/@class)"&gt;
        &lt;xsl:sequence select="$viewport/h:span/h:span/h:span/node()"/&gt;
      &lt;/xsl:when&gt;
      &lt;xsl:otherwise&gt;
        &lt;xsl:sequence select="$viewport"/&gt;
      &lt;/xsl:otherwise&gt;
    &lt;/xsl:choose&gt;
  &lt;/xsl:element&gt;

  &lt;xsl:if test="ancestor::db:imageobjectco
                and exists($imageproperties)"&gt;
    &lt;xsl:call-template name="t:imagemap"&gt;
      &lt;xsl:with-param name="intrinsicwidth" select="$intrinsicwidth"/&gt;
      &lt;xsl:with-param name="intrinsicheight" select="$intrinsicheight"/&gt;
    &lt;/xsl:call-template&gt;
  &lt;/xsl:if&gt;
&lt;/xsl:template&gt;

&lt;xsl:template name="t:imagemap"&gt;
  &lt;xsl:param name="intrinsicwidth" required="yes"/&gt;
  &lt;xsl:param name="intrinsicheight" required="yes"/&gt;

  &lt;map name="{f:id(ancestor::db:imageobjectco)}"&gt;
    &lt;xsl:for-each select="ancestor::db:imageobjectco/db:areaspec//db:area"&gt;
      &lt;xsl:variable name="units" as="xs:string"
                    select="if (@units) then @units
                            else if (../@units) then ../@units
                            else 'calspair'"/&gt;

      &lt;xsl:choose&gt;
        &lt;xsl:when test="$units = 'calspair'"&gt;
          &lt;xsl:variable name="coords"
                        select="tokenize(normalize-space(@coords),
                                '[\s,]+')"/&gt;

          &lt;xsl:variable name="x1p"
                        select="xs:decimal($coords[1]) div 100.0"/&gt;
          &lt;xsl:variable name="y1p"
                        select="xs:decimal($coords[2]) div 100.0"/&gt;
          &lt;xsl:variable name="x2p"
                        select="xs:decimal($coords[3]) div 100.0"/&gt;
          &lt;xsl:variable name="y2p"
                        select="xs:decimal($coords[4]) div 100.0"/&gt;

          &lt;area shape="rect"&gt;
            &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
            &lt;xsl:choose&gt;
              &lt;xsl:when test="@linkends
                              or (parent::db:areaset and ../@linkends)"&gt;
                &lt;xsl:variable name="idrefs"
                              select="if (@linkends)
                                      then normalize-space(@linkends)
                                      else normalize-space(../@linkends)"/&gt;

                &lt;xsl:variable name="target"
                              select="key('id', tokenize($idrefs, '[\s]'))[1]"/&gt;

                &lt;xsl:if test="$target"&gt;
                  &lt;xsl:attribute name="href" select="f:href(., $target)"/&gt;
                &lt;/xsl:if&gt;
              &lt;/xsl:when&gt;
              &lt;xsl:when test="@xlink:href"&gt;
                &lt;xsl:attribute name="href" select="@xlink:href"/&gt;
              &lt;/xsl:when&gt;
            &lt;/xsl:choose&gt;

            &lt;xsl:attribute name="coords"&gt;
              &lt;xsl:sequence
                  select="round($x1p * $intrinsicwidth?magnitude div 100.0)"/&gt;
              &lt;xsl:text&gt;,&lt;/xsl:text&gt;
              &lt;xsl:sequence
                  select="round($intrinsicheight?magnitude
                          - ($y1p * $intrinsicheight?magnitude div 100.0))"/&gt;
              &lt;xsl:text&gt;,&lt;/xsl:text&gt;
              &lt;xsl:sequence
                  select="round($x2p * $intrinsicwidth?magnitude div 100.0)"/&gt;
              &lt;xsl:text&gt;,&lt;/xsl:text&gt;
              &lt;xsl:sequence
                  select="round($intrinsicheight?magnitude
                          - ($y2p * $intrinsicheight?magnitude div 100.0))"/&gt;
            &lt;/xsl:attribute&gt;
          &lt;/area&gt;
        &lt;/xsl:when&gt;
        &lt;xsl:otherwise&gt;
          &lt;xsl:message&gt;
            &lt;xsl:text&gt;Warning: only calspair supported &lt;/xsl:text&gt;
            &lt;xsl:text&gt;in imageobjectco&lt;/xsl:text&gt;
          &lt;/xsl:message&gt;
        &lt;/xsl:otherwise&gt;
      &lt;/xsl:choose&gt;
    &lt;/xsl:for-each&gt;
  &lt;/map&gt;
&lt;/xsl:template&gt;

&lt;xsl:template name="tp:viewport"&gt;
  &lt;xsl:param name="class" as="xs:string" select="'viewport'"/&gt;
  &lt;xsl:param name="width" as="map(*)?"/&gt;
  &lt;xsl:param name="height" as="map(*)?"/&gt;
  &lt;xsl:param name="align" as="xs:string?"/&gt;
  &lt;xsl:param name="valign" as="xs:string?"/&gt;
  &lt;xsl:param name="pi-properties" as="element()?"/&gt;
  &lt;xsl:param name="content" as="element()+"/&gt;

  &lt;xsl:variable name="valign" select="f:css-property('vertical-align', $valign)"/&gt;
  &lt;xsl:variable name="width" select="f:css-length('width', $width)"/&gt;
  &lt;xsl:variable name="height" select="f:css-length('height', $height)"/&gt;
  &lt;xsl:variable name="align" select="f:css-property('text-align', $align)"/&gt;

  &lt;xsl:variable name="pi-styles"
                select="tokenize($pi-properties/@style, '\s*;\s*')"/&gt;

  &lt;xsl:variable name="styles" as="xs:string*"&gt;
    &lt;xsl:sequence select="($width, $height, $align, $valign)"/&gt;
    &lt;xsl:for-each select="$pi-styles"&gt;
      &lt;xsl:choose&gt;
        &lt;xsl:when test="normalize-space(.) = ''"/&gt;
        &lt;xsl:when test="starts-with(., 'width:')
                        or starts-with(., 'height:')
                        or starts-with(., 'text-align:')
                        or starts-with(., 'vertical-align:')"&gt;
          &lt;xsl:message expand-text="yes"
                       &gt;Ignoring ?db style property: {.}&lt;/xsl:message&gt;
        &lt;/xsl:when&gt;
        &lt;xsl:otherwise&gt;
          &lt;xsl:sequence select="."/&gt;
        &lt;/xsl:otherwise&gt;
      &lt;/xsl:choose&gt;
    &lt;/xsl:for-each&gt;
  &lt;/xsl:variable&gt;

  &lt;span&gt;
    &lt;xsl:attribute name="class" select="$class"/&gt;
    &lt;xsl:if test="exists($styles)"&gt;
      &lt;xsl:attribute name="style" select="string-join($styles, ';')||';'"/&gt;
    &lt;/xsl:if&gt;
    &lt;xsl:sequence select="$content"/&gt;
  &lt;/span&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="*" mode="mp:imagedata"&gt;
  &lt;xsl:param name="filename" required="yes"/&gt;
  &lt;xsl:param name="width" select="()"/&gt;
  &lt;xsl:param name="height" select="()"/&gt;
  &lt;xsl:param name="imageproperties" select="()"/&gt;

  &lt;xsl:variable name="width" select="f:css-length('width', $width)"/&gt;
  &lt;xsl:variable name="height" select="f:css-length('height', $height)"/&gt;

  &lt;xsl:variable name="styles" as="xs:string*"&gt;
    &lt;xsl:for-each select="($width, $height)"&gt;
      &lt;xsl:sequence select="."/&gt;
    &lt;/xsl:for-each&gt;
  &lt;/xsl:variable&gt;

  &lt;xsl:choose&gt;
    &lt;!-- attempt to handle audio data --&gt;
    &lt;xsl:when test="self::db:audiodata"&gt;
      &lt;audio controls="controls"
             src="{$filename}"&gt;
        &lt;xsl:apply-templates select="db:multimediaparam"/&gt;
        &lt;span&gt;The &lt;code&gt;audio&lt;/code&gt; element is not supported.&lt;/span&gt;
      &lt;/audio&gt;
    &lt;/xsl:when&gt;

    &lt;!-- attempt to handle video data --&gt;
    &lt;xsl:when test="self::db:videodata"&gt;
      &lt;iframe src="{$filename}"&gt;
        &lt;!-- Width and height, if present, will be in CSS terms as px. --&gt;
        &lt;xsl:if test="$width"&gt;
          &lt;xsl:attribute name="width"
                         select="substring-after($width, 'width:') =&amp;gt; substring-before('px')"/&gt;
        &lt;/xsl:if&gt;
        &lt;xsl:if test="$height"&gt;
          &lt;xsl:attribute name="height"
                         select="substring-after($height, 'height:') =&amp;gt; substring-before('px')"/&gt;
        &lt;/xsl:if&gt;
        &lt;xsl:apply-templates select="db:multimediaparam"/&gt;
      &lt;/iframe&gt;
    &lt;/xsl:when&gt;

    &lt;xsl:when test="svg:*"&gt;
      &lt;div class="svg"&gt;
        &lt;xsl:if test="exists($styles)"&gt;
          &lt;xsl:attribute name="style" select="string-join($styles, ';')||';'"/&gt;
        &lt;/xsl:if&gt;
        &lt;xsl:apply-templates/&gt;
      &lt;/div&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;img src="{$filename}"&gt;
        &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
        &lt;xsl:apply-templates
            select="ancestor::db:mediaobject
                    |ancestor::db:inlinemediaobject"
            mode="m:details-attribute"&gt;
          &lt;xsl:with-param name="attribute" select="'alt'"/&gt;
        &lt;/xsl:apply-templates&gt;
        &lt;xsl:if test="exists($styles)"&gt;
          &lt;xsl:attribute name="style" select="string-join($styles, ';')||';'"/&gt;
        &lt;/xsl:if&gt;

        &lt;xsl:if test="ancestor::db:imageobjectco"&gt;
          &lt;xsl:variable name="co"
                        select="ancestor::db:imageobjectco"/&gt;
          &lt;xsl:choose&gt;
            &lt;xsl:when test="empty($imageproperties)"&gt;
              &lt;xsl:message&gt;
                &lt;xsl:text&gt;Imagemaps require image &lt;/xsl:text&gt;
                &lt;xsl:text&gt;intrinsics extension&lt;/xsl:text&gt;
              &lt;/xsl:message&gt;
            &lt;/xsl:when&gt;
            &lt;xsl:otherwise&gt;
              &lt;xsl:attribute name="usemap"
                             select="concat('#', f:id($co))"/&gt;
            &lt;/xsl:otherwise&gt;
          &lt;/xsl:choose&gt;
        &lt;/xsl:if&gt;
      &lt;/img&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:template&gt;

&lt;xsl:function name="f:object-width" as="map(*)"&gt;
  &lt;xsl:param name="object" as="element()"/&gt;
  &lt;xsl:choose&gt;
    &lt;xsl:when test="$image-ignore-scaling"&gt;
      &lt;xsl:sequence select="f:empty-length()"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="$object/@width"&gt;
      &lt;xsl:sequence select="f:parse-length($object/@width)"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:sequence select="f:empty-length()"/&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="f:object-height" as="map(*)"&gt;
  &lt;xsl:param name="object" as="element()"/&gt;
  &lt;xsl:choose&gt;
    &lt;xsl:when test="$image-ignore-scaling or not($object/@depth)"&gt;
      &lt;xsl:sequence select="f:empty-length()"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:sequence select="f:parse-length($object/@depth)"/&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="f:object-contentwidth" as="map(*)"&gt;
  &lt;xsl:param name="object" as="element()"/&gt;
  &lt;xsl:param name="intrinsicwidth" as="map(*)"/&gt;

  &lt;xsl:choose&gt;
    &lt;xsl:when test="$image-ignore-scaling"&gt;
      &lt;xsl:sequence select="f:empty-length()"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="$object/@contentwidth"&gt;
      &lt;xsl:variable name="width"
                    select="f:parse-length($object/@contentwidth)"/&gt;
      &lt;xsl:sequence
          select="if ($width?unit = '%')
                  then f:make-length($width?magnitude
                                     * $intrinsicwidth?magnitude
                                     div 100.0,
                                     $intrinsicwidth?unit)
                  else $width"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:sequence select="f:empty-length()"/&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="f:object-contentheight" as="map(*)"&gt;
  &lt;xsl:param name="object" as="element()"/&gt;
  &lt;xsl:param name="intrinsicheight" as="map(*)"/&gt;

  &lt;xsl:choose&gt;
    &lt;xsl:when test="$image-ignore-scaling"&gt;
      &lt;xsl:sequence select="f:empty-length()"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="$object/@contentdepth"&gt;
      &lt;xsl:variable name="depth"
                    select="f:parse-length($object/@contentdepth)"/&gt;
      &lt;xsl:sequence
          select="if ($depth?unit = '%')
                  then f:make-length($depth?magnitude
                                     * $intrinsicheight?magnitude
                                     div 100.0,
                                     $intrinsicheight?unit)
                  else $depth"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:sequence select="f:empty-length()"/&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="f:css-length" as="xs:string?"&gt;
  &lt;xsl:param name="property" as="xs:string"/&gt;
  &lt;xsl:param name="length" as="map(*)?"/&gt;
  &lt;xsl:sequence
      select="if (exists($length) and $length?unit)
              then f:css-property($property, string(f:absolute-length($length))||'px')
              else ()"/&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="f:css-property" as="xs:string?"&gt;
  &lt;xsl:param name="property" as="xs:string"/&gt;
  &lt;xsl:param name="value" as="xs:string?"/&gt;
  &lt;xsl:sequence
      select="if (exists($value))
              then $property || ':' || $value
              else ()"/&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="f:object-scalefit" as="xs:boolean"&gt;
  &lt;xsl:param name="object" as="element()"/&gt;
  &lt;xsl:choose&gt;
    &lt;xsl:when test="$image-ignore-scaling
                    or $object/@contentwidth
                    or $object/@contentdepth"&gt;
      &lt;xsl:sequence select="false()"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="$object/@scale"&gt;
      &lt;xsl:sequence select="false()"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="$object/@scalefit"&gt;
      &lt;xsl:sequence select="$object/@scalefit != '0'"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="f:object-width($object)?magnitude
                    or f:object-height($object)?magnitude"&gt;
      &lt;!-- this is for backwards compatibility --&gt;
      &lt;xsl:sequence select="true()"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:sequence select="false()"/&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="f:object-scale" as="xs:double"&gt;
  &lt;xsl:param name="object" as="element()"/&gt;
  &lt;xsl:choose&gt;
    &lt;xsl:when test="$image-ignore-scaling or not($object/@scale)"&gt;
      &lt;xsl:sequence select="1.0"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:sequence select="xs:double($object/@scale) div 100.0"/&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="f:object-align" as="xs:string?"&gt;
  &lt;xsl:param name="object" as="element()"/&gt;
  &lt;xsl:sequence select="$object/@align/string()"/&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="f:object-valign" as="xs:string?"&gt;
  &lt;xsl:param name="object" as="element()"/&gt;
  &lt;!-- Historically, middle seems to have been the default --&gt;
  &lt;xsl:sequence select="if ($object/@valign)
                        then $object/@valign/string()
                        else 'middle'"/&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="f:object-properties" as="map(xs:string, xs:anyAtomicType)"&gt;
  &lt;xsl:param name="uri" as="xs:string"/&gt;

  &lt;xsl:variable name="properties" as="map(xs:string, xs:anyAtomicType)"
                use-when="function-available('ext:image-metadata')"&gt;
    &lt;xsl:sequence select="ext:image-metadata($uri)"/&gt;
  &lt;/xsl:variable&gt;

  &lt;xsl:variable name="properties" as="map(xs:string, xs:anyAtomicType)"
                use-when="function-available('ext:image-properties')
                          and not(function-available('ext:image-metadata'))"&gt;
    &lt;xsl:sequence select="ext:image-properties($uri)"/&gt;
  &lt;/xsl:variable&gt;

  &lt;xsl:variable name="properties" as="map(xs:string, xs:anyAtomicType)"
                use-when="not(function-available('ext:image-properties'))
                          and not(function-available('ext:image-properties'))"
                select="map {}"/&gt;

  &lt;xsl:if use-when="not(function-available('ext:image-properties'))
                    and not(function-available('ext:image-properties'))"
          test="$image-property-warning"&gt;
    &lt;xsl:message&gt;
      &lt;xsl:text&gt;Cannot read image properties (no extension)&lt;/xsl:text&gt;
    &lt;/xsl:message&gt;
  &lt;/xsl:if&gt;

  &lt;xsl:message use-when="$debug = 'image-properties'"
               select="$uri"/&gt;
  &lt;xsl:for-each use-when="$debug = 'image-properties'"
                select="map:keys($properties)"&gt;
    &lt;xsl:message select="., '=', map:get($properties, .)"/&gt;
  &lt;/xsl:for-each&gt;

  &lt;xsl:sequence select="$properties"/&gt;
&lt;/xsl:function&gt;

&lt;!-- ============================================================ --&gt;

&lt;xsl:function name="f:resolve-object-uri" as="xs:string"&gt;
  &lt;xsl:param name="uri" as="xs:string"/&gt;

  &lt;xsl:variable name="expected-location"
                select="exists($v:mediaobject-input-base-uri)
                        and starts-with($uri, $v:mediaobject-input-base-uri)"/&gt;

  &lt;xsl:variable name="input-uri"
                select="if ($expected-location)
                        then substring-after($uri, $v:mediaobject-input-base-uri)
                        else $uri"/&gt;

  &lt;xsl:message use-when="'mediaobject-uris' = $v:debug"
               select="'3: m/o input-uri:', $input-uri"/&gt;

  &lt;xsl:variable name="output-uri"
                select="if (exists($v:mediaobject-output-base-uri)
                            and $expected-location)
                        then $v:mediaobject-output-base-uri || $input-uri
                        else $input-uri"/&gt;

  &lt;xsl:message use-when="'mediaobject-uris' = $v:debug"
               select="'5: mediaobject output:', $uri, '→', $output-uri"/&gt;

  &lt;xsl:sequence select="$output-uri"/&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="f:select-mediaobject" as="element()"&gt;
  &lt;xsl:param name="objects" as="element()+"/&gt;

  &lt;xsl:variable name="possible" as="element()*"&gt;
    &lt;xsl:apply-templates select="$objects" mode="m:acceptable-mediaobject"/&gt;
  &lt;/xsl:variable&gt;

  &lt;xsl:sequence select="if (exists($possible))
                        then $possible[1]
                        else $objects[1]"/&gt;
&lt;/xsl:function&gt;

&lt;xsl:template match="db:audioobject
                     |db:imageobject
                     |db:imageobjectco
                     |db:videoobject"
              as="element()?"
              mode="m:acceptable-mediaobject"&gt;
  &lt;xsl:sequence select="if (exists(f:select-mediaobject-data(*)))
                        then .
                        else ()"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:function name="f:select-mediaobject-data" as="element()?"&gt;
  &lt;xsl:param name="data" as="element()*"/&gt;
  &lt;xsl:sequence select="f:select-mediaobject-data($data, false())"/&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="f:select-mediaobject-data" as="element()?"&gt;
  &lt;xsl:param name="data" as="element()*"/&gt;
  &lt;xsl:param name="force" as="xs:boolean"/&gt;

  &lt;xsl:variable name="selected" as="element()*"&gt;
    &lt;xsl:apply-templates select="$data"
                         mode="m:acceptable-mediaobject-data"/&gt;
  &lt;/xsl:variable&gt;

  &lt;xsl:if test="$force and empty($selected)"&gt;
    &lt;xsl:message select="'No acceptable media type, using ',
                         $data[1]/@fileref/string()"/&gt;
  &lt;/xsl:if&gt;

  &lt;xsl:sequence select="if (exists($selected))
                        then $selected[1]
                        else if ($force)
                             then $data[1]
                             else ()"/&gt;
&lt;/xsl:function&gt;

&lt;xsl:template match="db:textobject"
              as="element()?"
              mode="m:acceptable-mediaobject"&gt;
  &lt;xsl:sequence select="."/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:info|db:alt|db:caption|db:areaspec"
              mode="m:acceptable-mediaobject"/&gt;

&lt;xsl:template match="*" mode="m:acceptable-mediaobject"&gt;
  &lt;xsl:message expand-text="yes"
               &gt;Unexpected mediaobject: {local-name(.)}&lt;/xsl:message&gt;
&lt;/xsl:template&gt;

&lt;!-- ============================================================ --&gt;

&lt;xsl:template match="db:audiodata|db:imagedata|db:videodata"
              as="element()*"
              mode="m:acceptable-mediaobject-data"&gt;
  &lt;xsl:variable name="data" select="."/&gt;
  &lt;xsl:variable name="exclude" as="xs:string*"&gt;
    &lt;xsl:for-each select="$mediaobject-exclude-extensions"&gt;
      &lt;xsl:sequence select="if (ends-with($data/@fileref, .))
                            then .
                            else ()"/&gt;
    &lt;/xsl:for-each&gt;
  &lt;/xsl:variable&gt;
  &lt;xsl:if test="empty($exclude)"&gt;
    &lt;xsl:sequence select="."/&gt;
  &lt;/xsl:if&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:imageobject" mode="m:acceptable-mediaobject-data"&gt;
  &lt;xsl:apply-templates select="db:imagedata"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:info|db:areaspec|db:calloutlist"
              mode="m:acceptable-mediaobject-data"/&gt;

&lt;xsl:template match="*" mode="m:acceptable-mediaobject-data"&gt;
  &lt;xsl:message expand-text="yes"
               &gt;Unexpected mediaobject child: {local-name(.)}&lt;/xsl:message&gt;
&lt;/xsl:template&gt;

&lt;!-- ============================================================ --&gt;

&lt;xsl:template match="db:alt"/&gt;

&lt;/xsl:stylesheet&gt;
</code></pre></td></tr></table></div></div></div></div><div class="stylesheet" id="S-50448"><h3>footnotes.xsl</h3><p><span><span class="template all">6 templates</span></span>, <span><span class="function all">2 functions</span> (<span class="function unused">2 unused</span>)</span></p><div class="instructions"><div class="title closed">Instructions</div><div class="body"><div id="S-50448-t-1" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:footnote</div><div class="props"><div class="calls">Calls: <a href="#S-7006-docbook.org.ns.docbook.functions.private.footnote-number,1">fp:footnote-number()</a>, <a href="#S-28936-docbook.org.ns.docbook.functions.id,1">f:id()</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:footnote</code></div></div></div><div id="S-50448-t-2" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:footnoteref</div><div class="props"><div class="calls">Calls: <a href="#S-7006-docbook.org.ns.docbook.functions.private.footnote-number,1">fp:footnote-number()</a>, <a href="#S-28936-docbook.org.ns.docbook.functions.id,1">f:id()</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:footnoteref</code></div></div></div><div id="S-50448-docbook.org.ns.docbook.functions.private.footnote-number,1" class="instruction function unused"><div class="title"><span class="link"></span>Function fp:footnote-number#1($node as element(db:footnote)) as xs:integer</div><div class="props"><div class="used-by"><span class="marker">☞</span><span class="unused">Unused</span></div></div></div><div id="S-50448-t-3" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:footnote  as xs:integer</div><div class="props"><div class="mode">Mode: <code>mp:footnote-number</code></div><div class="matches">Matches: <code>db:footnote</code></div></div></div><div id="S-50448-t-4" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:footnote</div><div class="props"><div class="uses">Uses: <a href="#S-26643-..footnote-numeration">$footnote-numeration</a>, <a href="#S-26643-..table-footnote-numeration">$table-footnote-numeration</a></div><div class="calls">Calls: <a href="#S-7006-docbook.org.ns.docbook.functions.private.footnote-mark,2">fp:footnote-mark()</a>, <a href="#S-7006-docbook.org.ns.docbook.functions.private.footnote-number,1">fp:footnote-number()</a></div><div class="mode">Mode: <code>m:footnote-number</code></div><div class="matches">Matches: <code>db:footnote</code></div></div></div><div id="S-50448-docbook.org.ns.docbook.functions.private.footnote-mark,2" class="instruction function unused"><div class="title"><span class="link"></span>Function fp:footnote-mark#2($number as xs:integer, $marks as xs:string+) as xs:string</div><div class="props"><div class="used-by"><span class="marker">☞</span><span class="unused">Unused</span></div></div></div><div id="S-50448-t-5" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:footnote</div><div class="props"><div class="calls">Calls: <a href="#S-7006-docbook.org.ns.docbook.functions.private.footnote-number,1">fp:footnote-number()</a>, <a href="#S-28936-docbook.org.ns.docbook.functions.id,1">f:id()</a></div><div class="mode">Mode: <code>m:footnotes</code></div><div class="matches">Matches: <code>db:footnote</code></div></div></div><div id="S-50448-docbook.org.ns.docbook.templates.table-footnotes" class="instruction template"><div class="title"><span class="link"></span>Template t:table-footnotes  match ≅ </div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-59097-t-1">template</a>, <a href="#S-59097-t-2">template</a>, <a href="#S-30699-t-1">template</a>, <a href="#S-30699-t-3">template</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-59097">modules/tablecals.xsl</a>, <a href="#S-30699">modules/tablehtml.xsl</a></div><div class="mode">Mode: <code>m:docbook</code></div></div></div></div></div><div class="source-code"><div class="title closed">Source code</div><div class="body"><div><table><tr><td valign="top" align="right"><pre class="fake-prism"><span id="line-S-50448-1">1</span>
<span id="line-S-50448-2"><span class="lno">2</span></span>
<span id="line-S-50448-3"><span class="lno">3</span></span>
<span id="line-S-50448-4"><span class="lno">4</span></span>
<span id="line-S-50448-5">5</span>
<span id="line-S-50448-6"><span class="lno">6</span></span>
<span id="line-S-50448-7"><span class="lno">7</span></span>
<span id="line-S-50448-8"><span class="lno">8</span></span>
<span id="line-S-50448-9"><span class="lno">9</span></span>
<span id="line-S-50448-10">10</span>
<span id="line-S-50448-11"><span class="lno">11</span></span>
<span id="line-S-50448-12"><span class="lno">12</span></span>
<span id="line-S-50448-13"><span class="lno">13</span></span>
<span id="line-S-50448-14"><span class="lno">14</span></span>
<span id="line-S-50448-15">15</span>
<span id="line-S-50448-16"><span class="lno">16</span></span>
<span id="line-S-50448-17"><span class="lno">17</span></span>
<span id="line-S-50448-18"><span class="lno">18</span></span>
<span id="line-S-50448-19"><span class="lno">19</span></span>
<span id="line-S-50448-20">20</span>
<span id="line-S-50448-21"><span class="lno">21</span></span>
<span id="line-S-50448-22"><span class="lno">22</span></span>
<span id="line-S-50448-23"><span class="lno">23</span></span>
<span id="line-S-50448-24"><span class="lno">24</span></span>
<span id="line-S-50448-25">25</span>
<span id="line-S-50448-26"><span class="lno">26</span></span>
<span id="line-S-50448-27"><span class="lno">27</span></span>
<span id="line-S-50448-28"><span class="lno">28</span></span>
<span id="line-S-50448-29"><span class="lno">29</span></span>
<span id="line-S-50448-30">30</span>
<span id="line-S-50448-31"><span class="lno">31</span></span>
<span id="line-S-50448-32"><span class="lno">32</span></span>
<span id="line-S-50448-33"><span class="lno">33</span></span>
<span id="line-S-50448-34"><span class="lno">34</span></span>
<span id="line-S-50448-35">35</span>
<span id="line-S-50448-36"><span class="lno">36</span></span>
<span id="line-S-50448-37"><span class="lno">37</span></span>
<span id="line-S-50448-38"><span class="lno">38</span></span>
<span id="line-S-50448-39"><span class="lno">39</span></span>
<span id="line-S-50448-40">40</span>
<span id="line-S-50448-41"><span class="lno">41</span></span>
<span id="line-S-50448-42"><span class="lno">42</span></span>
<span id="line-S-50448-43"><span class="lno">43</span></span>
<span id="line-S-50448-44"><span class="lno">44</span></span>
<span id="line-S-50448-45">45</span>
<span id="line-S-50448-46"><span class="lno">46</span></span>
<span id="line-S-50448-47"><span class="lno">47</span></span>
<span id="line-S-50448-48"><span class="lno">48</span></span>
<span id="line-S-50448-49"><span class="lno">49</span></span>
<span id="line-S-50448-50">50</span>
<span id="line-S-50448-51"><span class="lno">51</span></span>
<span id="line-S-50448-52"><span class="lno">52</span></span>
<span id="line-S-50448-53"><span class="lno">53</span></span>
<span id="line-S-50448-54"><span class="lno">54</span></span>
<span id="line-S-50448-55">55</span>
<span id="line-S-50448-56"><span class="lno">56</span></span>
<span id="line-S-50448-57"><span class="lno">57</span></span>
<span id="line-S-50448-58"><span class="lno">58</span></span>
<span id="line-S-50448-59"><span class="lno">59</span></span>
<span id="line-S-50448-60">60</span>
<span id="line-S-50448-61"><span class="lno">61</span></span>
<span id="line-S-50448-62"><span class="lno">62</span></span>
<span id="line-S-50448-63"><span class="lno">63</span></span>
<span id="line-S-50448-64"><span class="lno">64</span></span>
<span id="line-S-50448-65">65</span>
<span id="line-S-50448-66"><span class="lno">66</span></span>
<span id="line-S-50448-67"><span class="lno">67</span></span>
<span id="line-S-50448-68"><span class="lno">68</span></span>
<span id="line-S-50448-69"><span class="lno">69</span></span>
<span id="line-S-50448-70">70</span>
<span id="line-S-50448-71"><span class="lno">71</span></span>
<span id="line-S-50448-72"><span class="lno">72</span></span>
<span id="line-S-50448-73"><span class="lno">73</span></span>
<span id="line-S-50448-74"><span class="lno">74</span></span>
<span id="line-S-50448-75">75</span>
<span id="line-S-50448-76"><span class="lno">76</span></span>
<span id="line-S-50448-77"><span class="lno">77</span></span>
<span id="line-S-50448-78"><span class="lno">78</span></span>
<span id="line-S-50448-79"><span class="lno">79</span></span>
<span id="line-S-50448-80">80</span>
<span id="line-S-50448-81"><span class="lno">81</span></span>
<span id="line-S-50448-82"><span class="lno">82</span></span>
<span id="line-S-50448-83"><span class="lno">83</span></span>
<span id="line-S-50448-84"><span class="lno">84</span></span>
<span id="line-S-50448-85">85</span>
<span id="line-S-50448-86"><span class="lno">86</span></span>
<span id="line-S-50448-87"><span class="lno">87</span></span>
<span id="line-S-50448-88"><span class="lno">88</span></span>
<span id="line-S-50448-89"><span class="lno">89</span></span>
<span id="line-S-50448-90">90</span>
<span id="line-S-50448-91"><span class="lno">91</span></span>
<span id="line-S-50448-92"><span class="lno">92</span></span>
<span id="line-S-50448-93"><span class="lno">93</span></span>
<span id="line-S-50448-94"><span class="lno">94</span></span>
<span id="line-S-50448-95">95</span>
<span id="line-S-50448-96"><span class="lno">96</span></span>
<span id="line-S-50448-97"><span class="lno">97</span></span>
<span id="line-S-50448-98"><span class="lno">98</span></span>
<span id="line-S-50448-99"><span class="lno">99</span></span>
<span id="line-S-50448-100">100</span>
<span id="line-S-50448-101"><span class="lno">101</span></span>
<span id="line-S-50448-102"><span class="lno">102</span></span>
<span id="line-S-50448-103"><span class="lno">103</span></span>
<span id="line-S-50448-104"><span class="lno">104</span></span>
<span id="line-S-50448-105">105</span>
<span id="line-S-50448-106"><span class="lno">106</span></span>
<span id="line-S-50448-107"><span class="lno">107</span></span>
<span id="line-S-50448-108"><span class="lno">108</span></span>
<span id="line-S-50448-109"><span class="lno">109</span></span>
<span id="line-S-50448-110">110</span>
<span id="line-S-50448-111"><span class="lno">111</span></span>
<span id="line-S-50448-112"><span class="lno">112</span></span>
<span id="line-S-50448-113"><span class="lno">113</span></span>
<span id="line-S-50448-114"><span class="lno">114</span></span>
<span id="line-S-50448-115">115</span>
<span id="line-S-50448-116"><span class="lno">116</span></span>
<span id="line-S-50448-117"><span class="lno">117</span></span>
<span id="line-S-50448-118"><span class="lno">118</span></span>
<span id="line-S-50448-119"><span class="lno">119</span></span>
<span id="line-S-50448-120">120</span>
<span id="line-S-50448-121"><span class="lno">121</span></span>
<span id="line-S-50448-122"><span class="lno">122</span></span>
<span id="line-S-50448-123"><span class="lno">123</span></span>
<span id="line-S-50448-124"><span class="lno">124</span></span>
<span id="line-S-50448-125">125</span>
<span id="line-S-50448-126"><span class="lno">126</span></span>
<span id="line-S-50448-127"><span class="lno">127</span></span>
<span id="line-S-50448-128"><span class="lno">128</span></span>
<span id="line-S-50448-129"><span class="lno">129</span></span>
<span id="line-S-50448-130">130</span>
<span id="line-S-50448-131"><span class="lno">131</span></span>
<span id="line-S-50448-132"><span class="lno">132</span></span>
<span id="line-S-50448-133"><span class="lno">133</span></span>
<span id="line-S-50448-134"><span class="lno">134</span></span>
<span id="line-S-50448-135">135</span>
<span id="line-S-50448-136"><span class="lno">136</span></span>
<span id="line-S-50448-137"><span class="lno">137</span></span>
<span id="line-S-50448-138"><span class="lno">138</span></span>
<span id="line-S-50448-139"><span class="lno">139</span></span>
<span id="line-S-50448-140">140</span>
<span id="line-S-50448-141"><span class="lno">141</span></span>
<span id="line-S-50448-142"><span class="lno">142</span></span>
<span id="line-S-50448-143"><span class="lno">143</span></span>
<span id="line-S-50448-144"><span class="lno">144</span></span>
<span id="line-S-50448-145">145</span>
<span id="line-S-50448-146"><span class="lno">146</span></span>
<span id="line-S-50448-147"><span class="lno">147</span></span>
<span id="line-S-50448-148"><span class="lno">148</span></span>
<span id="line-S-50448-149"><span class="lno">149</span></span>
<span id="line-S-50448-150">150</span>
<span id="line-S-50448-151"><span class="lno">151</span></span>
<span id="line-S-50448-152"><span class="lno">152</span></span>
<span id="line-S-50448-153"><span class="lno">153</span></span>
<span id="line-S-50448-154"><span class="lno">154</span></span>
<span id="line-S-50448-155">155</span>
<span id="line-S-50448-156"><span class="lno">156</span></span>
<span id="line-S-50448-157"><span class="lno">157</span></span>
<span id="line-S-50448-158"><span class="lno">158</span></span>
</pre></td><td valign="top"><pre><code class="language-xml">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                xmlns:db="http://docbook.org/ns/docbook"
                xmlns:f="http://docbook.org/ns/docbook/functions"
                xmlns:fp="http://docbook.org/ns/docbook/functions/private"
                xmlns:m="http://docbook.org/ns/docbook/modes"
                xmlns:mp="http://docbook.org/ns/docbook/modes/private"
                xmlns:t="http://docbook.org/ns/docbook/templates"
                xmlns:xlink='http://www.w3.org/1999/xlink'
                xmlns:xs="http://www.w3.org/2001/XMLSchema"
                xmlns="http://www.w3.org/1999/xhtml"
                default-mode="m:docbook"
                exclude-result-prefixes="db f fp m mp t xlink xs"
                version="3.0"&gt;

&lt;xsl:template match="db:footnote"&gt;
  &lt;sup id="{f:id(.)}-fref" db-footnote="{fp:footnote-number(.)}"
       class="footnote-number{
              if (ancestor::db:table or ancestor::db:informaltable)
              then ' table-footnote'
              else ()
              }"&gt;
    &lt;a href="#{f:id(.)}-fnote"&gt;
      &lt;xsl:apply-templates select="." mode="m:footnote-number"/&gt;
    &lt;/a&gt;
  &lt;/sup&gt;
  &lt;db-footnote id="{f:id(.)}-fnote" db-footnote="{fp:footnote-number(.)}"&gt;
    &lt;xsl:apply-templates select="." mode="m:footnotes"/&gt;
  &lt;/db-footnote&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:footnoteref"&gt;
  &lt;xsl:variable name="linkend"
                select="(@linkend,
                        if (starts-with(@xlink:href, '#'))
                        then substring-after(@xlink:href, '#')
                        else ())[1]"/&gt;
  &lt;xsl:variable name="target"
                select="if ($linkend)
                        then key('id', $linkend)[1]
                        else ()"/&gt;
  &lt;xsl:choose&gt;
    &lt;xsl:when test="empty($target)"&gt;
      &lt;xsl:message select="'Footnote link to non-existent ID: ' || $linkend"/&gt;
      &lt;sup class="footnote-number"&gt;
        &lt;xsl:sequence select="'[???' || $linkend || '???]'"/&gt;
      &lt;/sup&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;sup id="{f:id(.)}-fref" db-footnote="{fp:footnote-number($target)}"
           class="footnote-number{
                  if ($target/ancestor::db:table or $target/ancestor::db:informaltable)
                  then ' table-footnote'
                  else ()
                  }"&gt;
        &lt;a href="#{f:id($target)}-fnote"&gt;
          &lt;xsl:apply-templates select="$target" mode="m:footnote-number"/&gt;
        &lt;/a&gt;
      &lt;/sup&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:template&gt;

&lt;xsl:function name="fp:footnote-number" as="xs:integer" cache="yes"&gt;
  &lt;xsl:param name="node" as="element(db:footnote)"/&gt;
  &lt;xsl:apply-templates select="$node" mode="mp:footnote-number"/&gt;
&lt;/xsl:function&gt;

&lt;xsl:template match="db:footnote" as="xs:integer" mode="mp:footnote-number"&gt;
  &lt;xsl:variable name="nearest"
                select="(ancestor::db:table
                        |ancestor::db:informaltable)[last()]"/&gt;

  &lt;xsl:variable name="fnum" as="xs:string"&gt;
    &lt;xsl:choose&gt;
      &lt;xsl:when test="empty($nearest)"&gt;
        &lt;xsl:variable name="pfoot" select="count(preceding::db:footnote)"/&gt;
        &lt;xsl:variable name="ptfoot"
              select="count(preceding::db:footnote[ancestor::db:table])
                      + count(preceding::db:footnote[ancestor::db:informaltable])"/&gt;
        &lt;xsl:value-of select="$pfoot - $ptfoot + 1"/&gt;
      &lt;/xsl:when&gt;
      &lt;xsl:when test="$nearest/self::db:informaltable"&gt;
        &lt;xsl:number format="1" from="db:informaltable" level="any"/&gt;
      &lt;/xsl:when&gt;
      &lt;xsl:when test="$nearest/self::db:table"&gt;
        &lt;xsl:number format="1" from="db:table" level="any"/&gt;
      &lt;/xsl:when&gt;
      &lt;xsl:otherwise&gt;
        &lt;xsl:message&gt;Error: failed to enumerate footnote:&lt;/xsl:message&gt;
        &lt;xsl:message select="."/&gt;
        &lt;xsl:sequence select="1"/&gt;
      &lt;/xsl:otherwise&gt;
    &lt;/xsl:choose&gt;
  &lt;/xsl:variable&gt;

  &lt;xsl:sequence select="xs:integer($fnum)"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:footnote" mode="m:footnote-number"&gt;
  &lt;xsl:variable name="nearest"
                select="(ancestor::db:table
                        |ancestor::db:informaltable)[last()]"/&gt;

  &lt;xsl:variable name="fnum" select="fp:footnote-number(.)"/&gt;

  &lt;xsl:variable name="marks"
                select="if (empty($nearest))
                        then $footnote-numeration
                        else $table-footnote-numeration"/&gt;

  &lt;xsl:sequence select="fp:footnote-mark($fnum, $marks)"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:function name="fp:footnote-mark" as="xs:string"&gt;
  &lt;xsl:param name="number" as="xs:integer"/&gt;
  &lt;xsl:param name="marks" as="xs:string+"/&gt;

  &lt;xsl:choose&gt;
    &lt;xsl:when test="$number lt count($marks)"&gt;
      &lt;xsl:sequence select="$marks[$number]"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:number value="$number" format="{$marks[count($marks)]}"/&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:function&gt;

&lt;xsl:template match="db:footnote" mode="m:footnotes"&gt;
  &lt;div class="footnote" id="{f:id(.)}-fnote"&gt;
    &lt;div class="footnote-number"&gt;
      &lt;sup db-footnote="{fp:footnote-number(.)}"
           class="footnote-number{
                  if (ancestor::db:table or ancestor::db:informaltable)
                  then ' table-footnote'
                  else ()
                  }"&gt;
        &lt;a href="#{f:id(.)}-fref"&gt;
          &lt;xsl:apply-templates select="." mode="m:footnote-number"/&gt;
        &lt;/a&gt;
      &lt;/sup&gt;
    &lt;/div&gt;
    &lt;div class="footnote-body"&gt;
      &lt;xsl:apply-templates/&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/xsl:template&gt;

&lt;xsl:template name="t:table-footnotes"&gt;
  &lt;xsl:param name="footnotes" as="element(db:footnote)+" required="yes"/&gt;

  &lt;div class="footnotes table-footnotes"&gt;
    &lt;xsl:apply-templates select="$footnotes" mode="m:footnotes"/&gt;
  &lt;/div&gt;
&lt;/xsl:template&gt;

&lt;/xsl:stylesheet&gt;
</code></pre></td></tr></table></div></div></div></div><div class="stylesheet" id="S-56456"><h3>verbatim.xsl</h3><p><span class="import all">1 import</span></p><div class="stylesheet" id="S-16614"><h4>highlight.xsl</h4><p><span><span class="template all">3 templates</span></span>, <span><span class="function all">5 functions</span> (<span class="function unused">3 unused</span>)</span></p><div class="instructions"><div class="title closed">Instructions</div><div class="body"><div id="S-16614-docbook.org.ns.docbook.functions.syntax-highlight,1" class="instruction function unused"><div class="title"><span class="link"></span>Function f:syntax-highlight#1($source as xs:string)</div><div class="props"><div class="used-by"><span class="marker">☞</span><span class="unused">Unused</span></div></div></div><div id="S-16614-docbook.org.ns.docbook.functions.syntax-highlight,2" class="instruction function unused"><div class="title"><span class="link"></span>Function f:syntax-highlight#2($source as xs:string, $language as xs:string)</div><div class="props"><div class="used-by"><span class="marker">☞</span><span class="unused">Unused</span></div></div></div><div id="S-16614-docbook.org.ns.docbook.functions.syntax-highlight,3" class="instruction function"><div class="title"><span class="link"></span>Function f:syntax-highlight#3($source as xs:string, $options, $pyoptions as map(xs:string,xs:string)) as node()*</div><div class="props"><div class="calls">Calls: <a href="#S-16614-docbook.org.ns.docbook.functions.syntax-highlight,1">f:syntax-highlight()</a>, <a href="#S-16614-docbook.org.ns.docbook.functions.syntax-highlight,2">f:syntax-highlight()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-16614-docbook.org.ns.docbook.functions.syntax-highlight,1">f:syntax-highlight()</a>, <a href="#S-16614-docbook.org.ns.docbook.functions.syntax-highlight,2">f:syntax-highlight()</a>, <a href="#S-56456-docbook.org.ns.docbook.templates.private.verbatim-array">tp:verbatim-array</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-56456">modules/verbatim.xsl</a>, <a href="#S-16614">highlight.xsl</a></div></div></div><div id="S-16614-docbook.org.ns.docbook.functions.private.syntax-highlight,3" class="instruction function"><div class="title"><span class="link"></span>Function fp:syntax-highlight#3($source as xs:string, $options as map(xs:string,xs:string), $pyoptions as map(xs:string,xs:string)) as node()*</div><div class="props"><div class="calls">Calls: <a href="#S-16614-docbook.org.ns.docbook.functions.syntax-highlight,3">f:syntax-highlight()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-16614-docbook.org.ns.docbook.functions.syntax-highlight,3">f:syntax-highlight()</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-16614">highlight.xsl</a></div></div></div><div id="S-16614-docbook.org.ns.docbook.functions.private.syntax-highlight,0" class="instruction function unused"><div class="title"><span class="link"></span>Function fp:syntax-highlight#0() as node()*</div><div class="props"><div class="uses">Uses: <a href="#S-29386-docbook.org.ns.docbook.errors.INTERNAL-HIGHLIGHT-ERROR">$dbe:INTERNAL-HIGHLIGHT-ERROR</a></div><div class="used-by"><span class="marker">☞</span><span class="unused">Unused</span></div></div></div><div id="S-16614-t-1" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ element()</div><div class="props"><div class="mode">Mode: <code>mp:fix-html</code></div><div class="matches">Matches: <code>element()</code></div></div></div><div id="S-16614-t-2" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ span</div><div class="props"><div class="mode">Mode: <code>mp:fix-html</code></div><div class="matches">Matches: <code>span</code></div></div></div><div id="S-16614-t-3" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ attribute()|comment()|processi…</div><div class="props"><div class="mode">Mode: <code>mp:fix-html</code></div><div class="matches">Matches: <code>attribute()</code>, <code>comment()</code>, <code>processing-instruction()</code>, <code>text()</code></div></div></div></div></div><div class="source-code"><div class="title closed">Source code</div><div class="body"><div><table><tr><td valign="top" align="right"><pre class="fake-prism"><span id="line-S-16614-1">1</span>
<span id="line-S-16614-2"><span class="lno">2</span></span>
<span id="line-S-16614-3"><span class="lno">3</span></span>
<span id="line-S-16614-4"><span class="lno">4</span></span>
<span id="line-S-16614-5">5</span>
<span id="line-S-16614-6"><span class="lno">6</span></span>
<span id="line-S-16614-7"><span class="lno">7</span></span>
<span id="line-S-16614-8"><span class="lno">8</span></span>
<span id="line-S-16614-9"><span class="lno">9</span></span>
<span id="line-S-16614-10">10</span>
<span id="line-S-16614-11"><span class="lno">11</span></span>
<span id="line-S-16614-12"><span class="lno">12</span></span>
<span id="line-S-16614-13"><span class="lno">13</span></span>
<span id="line-S-16614-14"><span class="lno">14</span></span>
<span id="line-S-16614-15">15</span>
<span id="line-S-16614-16"><span class="lno">16</span></span>
<span id="line-S-16614-17"><span class="lno">17</span></span>
<span id="line-S-16614-18"><span class="lno">18</span></span>
<span id="line-S-16614-19"><span class="lno">19</span></span>
<span id="line-S-16614-20">20</span>
<span id="line-S-16614-21"><span class="lno">21</span></span>
<span id="line-S-16614-22"><span class="lno">22</span></span>
<span id="line-S-16614-23"><span class="lno">23</span></span>
<span id="line-S-16614-24"><span class="lno">24</span></span>
<span id="line-S-16614-25">25</span>
<span id="line-S-16614-26"><span class="lno">26</span></span>
<span id="line-S-16614-27"><span class="lno">27</span></span>
<span id="line-S-16614-28"><span class="lno">28</span></span>
<span id="line-S-16614-29"><span class="lno">29</span></span>
<span id="line-S-16614-30">30</span>
<span id="line-S-16614-31"><span class="lno">31</span></span>
<span id="line-S-16614-32"><span class="lno">32</span></span>
<span id="line-S-16614-33"><span class="lno">33</span></span>
<span id="line-S-16614-34"><span class="lno">34</span></span>
<span id="line-S-16614-35">35</span>
<span id="line-S-16614-36"><span class="lno">36</span></span>
<span id="line-S-16614-37"><span class="lno">37</span></span>
<span id="line-S-16614-38"><span class="lno">38</span></span>
<span id="line-S-16614-39"><span class="lno">39</span></span>
<span id="line-S-16614-40">40</span>
<span id="line-S-16614-41"><span class="lno">41</span></span>
<span id="line-S-16614-42"><span class="lno">42</span></span>
<span id="line-S-16614-43"><span class="lno">43</span></span>
<span id="line-S-16614-44"><span class="lno">44</span></span>
<span id="line-S-16614-45">45</span>
<span id="line-S-16614-46"><span class="lno">46</span></span>
<span id="line-S-16614-47"><span class="lno">47</span></span>
<span id="line-S-16614-48"><span class="lno">48</span></span>
<span id="line-S-16614-49"><span class="lno">49</span></span>
<span id="line-S-16614-50">50</span>
<span id="line-S-16614-51"><span class="lno">51</span></span>
<span id="line-S-16614-52"><span class="lno">52</span></span>
<span id="line-S-16614-53"><span class="lno">53</span></span>
<span id="line-S-16614-54"><span class="lno">54</span></span>
<span id="line-S-16614-55">55</span>
<span id="line-S-16614-56"><span class="lno">56</span></span>
<span id="line-S-16614-57"><span class="lno">57</span></span>
<span id="line-S-16614-58"><span class="lno">58</span></span>
<span id="line-S-16614-59"><span class="lno">59</span></span>
<span id="line-S-16614-60">60</span>
<span id="line-S-16614-61"><span class="lno">61</span></span>
<span id="line-S-16614-62"><span class="lno">62</span></span>
<span id="line-S-16614-63"><span class="lno">63</span></span>
<span id="line-S-16614-64"><span class="lno">64</span></span>
<span id="line-S-16614-65">65</span>
<span id="line-S-16614-66"><span class="lno">66</span></span>
<span id="line-S-16614-67"><span class="lno">67</span></span>
<span id="line-S-16614-68"><span class="lno">68</span></span>
<span id="line-S-16614-69"><span class="lno">69</span></span>
<span id="line-S-16614-70">70</span>
<span id="line-S-16614-71"><span class="lno">71</span></span>
<span id="line-S-16614-72"><span class="lno">72</span></span>
<span id="line-S-16614-73"><span class="lno">73</span></span>
<span id="line-S-16614-74"><span class="lno">74</span></span>
<span id="line-S-16614-75">75</span>
<span id="line-S-16614-76"><span class="lno">76</span></span>
<span id="line-S-16614-77"><span class="lno">77</span></span>
<span id="line-S-16614-78"><span class="lno">78</span></span>
<span id="line-S-16614-79"><span class="lno">79</span></span>
<span id="line-S-16614-80">80</span>
<span id="line-S-16614-81"><span class="lno">81</span></span>
<span id="line-S-16614-82"><span class="lno">82</span></span>
<span id="line-S-16614-83"><span class="lno">83</span></span>
<span id="line-S-16614-84"><span class="lno">84</span></span>
<span id="line-S-16614-85">85</span>
<span id="line-S-16614-86"><span class="lno">86</span></span>
<span id="line-S-16614-87"><span class="lno">87</span></span>
<span id="line-S-16614-88"><span class="lno">88</span></span>
<span id="line-S-16614-89"><span class="lno">89</span></span>
<span id="line-S-16614-90">90</span>
<span id="line-S-16614-91"><span class="lno">91</span></span>
<span id="line-S-16614-92"><span class="lno">92</span></span>
<span id="line-S-16614-93"><span class="lno">93</span></span>
<span id="line-S-16614-94"><span class="lno">94</span></span>
<span id="line-S-16614-95">95</span>
<span id="line-S-16614-96"><span class="lno">96</span></span>
<span id="line-S-16614-97"><span class="lno">97</span></span>
<span id="line-S-16614-98"><span class="lno">98</span></span>
<span id="line-S-16614-99"><span class="lno">99</span></span>
<span id="line-S-16614-100">100</span>
<span id="line-S-16614-101"><span class="lno">101</span></span>
<span id="line-S-16614-102"><span class="lno">102</span></span>
<span id="line-S-16614-103"><span class="lno">103</span></span>
<span id="line-S-16614-104"><span class="lno">104</span></span>
<span id="line-S-16614-105">105</span>
<span id="line-S-16614-106"><span class="lno">106</span></span>
<span id="line-S-16614-107"><span class="lno">107</span></span>
<span id="line-S-16614-108"><span class="lno">108</span></span>
<span id="line-S-16614-109"><span class="lno">109</span></span>
<span id="line-S-16614-110">110</span>
<span id="line-S-16614-111"><span class="lno">111</span></span>
<span id="line-S-16614-112"><span class="lno">112</span></span>
<span id="line-S-16614-113"><span class="lno">113</span></span>
<span id="line-S-16614-114"><span class="lno">114</span></span>
<span id="line-S-16614-115">115</span>
</pre></td><td valign="top"><pre><code class="language-xml">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                xmlns:dbe="http://docbook.org/ns/docbook/errors"
                xmlns:ext="http://docbook.org/extensions/xslt"
                xmlns:f="http://docbook.org/ns/docbook/functions"
                xmlns:fp="http://docbook.org/ns/docbook/functions/private"
                xmlns:h="http://www.w3.org/1999/xhtml"
                xmlns:m="http://docbook.org/ns/docbook/modes"
                xmlns:mp="http://docbook.org/ns/docbook/modes/private"
                xmlns:v="http://docbook.org/ns/docbook/variables"
                xmlns:xs="http://www.w3.org/2001/XMLSchema"
                default-mode="m:docbook"
                exclude-result-prefixes="dbe ext f fp h m mp v xs"
                version="3.0"&gt;

&lt;xsl:function name="f:syntax-highlight"&gt;
  &lt;xsl:param name="source" as="xs:string"/&gt;
  &lt;xsl:sequence select="f:syntax-highlight($source, map{}, map{})"/&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="f:syntax-highlight"&gt;
  &lt;xsl:param name="source" as="xs:string"/&gt;
  &lt;xsl:param name="language" as="xs:string"/&gt;
  &lt;xsl:sequence
      select="f:syntax-highlight($source, $language, map{})"/&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="f:syntax-highlight" as="node()*"&gt;
  &lt;xsl:param name="source" as="xs:string"/&gt;
  &lt;xsl:param name="options"/&gt;
  &lt;xsl:param name="pyoptions" as="map(xs:string,xs:string)"/&gt;

  &lt;!-- Special case for just the language option --&gt;
  &lt;xsl:variable name="options" as="map(xs:string,xs:string)"&gt;
    &lt;xsl:choose&gt;
      &lt;xsl:when test="$options instance of xs:string"&gt;
        &lt;xsl:sequence select="map { 'language': $options }"/&gt;
      &lt;/xsl:when&gt;
      &lt;xsl:when test="$options instance of attribute()"&gt;
        &lt;xsl:sequence select="map { 'language': string($options) }"/&gt;
      &lt;/xsl:when&gt;
      &lt;xsl:otherwise&gt;
        &lt;xsl:sequence select="$options"/&gt;
      &lt;/xsl:otherwise&gt;
    &lt;/xsl:choose&gt;
  &lt;/xsl:variable&gt;

  &lt;xsl:message use-when="'highlight' = $v:debug"&gt;
    &lt;xsl:text use-when="not(function-available('ext:pygmentize'))
                          or not(function-available('ext:pygmentize-available'))"
              &gt;Syntax highlighting is not configured&lt;/xsl:text&gt;
    &lt;xsl:text use-when="function-available('ext:pygmentize')
                        and function-available('ext:pygmentize-available')
                        and not(ext:pygmentize-available())"
              &gt;Syntax highlighting is not available&lt;/xsl:text&gt;
    &lt;xsl:text use-when="function-available('ext:pygmentize')
                        and function-available('ext:pygmentize-available')
                        and ext:pygmentize-available()"
              &gt;Syntax highlighting is available&lt;/xsl:text&gt;
  &lt;/xsl:message&gt;

  &lt;!-- N.B. xsl:value-of is intentional here; this function returns a node --&gt;
  &lt;xsl:value-of use-when="not(function-available('ext:pygmentize'))
                          or not(function-available('ext:pygmentize-available'))"
                select="$source"/&gt;

  &lt;xsl:if use-when="function-available('ext:pygmentize')
                    and function-available('ext:pygmentize-available')"
          test="ext:pygmentize-available()"&gt;
    &lt;xsl:sequence select="fp:syntax-highlight($source, $options, $pyoptions)"/&gt;
  &lt;/xsl:if&gt;

  &lt;xsl:if use-when="function-available('ext:pygmentize')
                    and function-available('ext:pygmentize-available')"
          test="not(ext:pygmentize-available())"&gt;
    &lt;xsl:value-of select="$source"/&gt;
  &lt;/xsl:if&gt;
&lt;/xsl:function&gt;

&lt;xsl:function use-when="function-available('ext:pygmentize')"
              name="fp:syntax-highlight" as="node()*"&gt;
  &lt;xsl:param name="source" as="xs:string"/&gt;
  &lt;xsl:param name="options" as="map(xs:string,xs:string)"/&gt;
  &lt;xsl:param name="pyoptions" as="map(xs:string,xs:string)"/&gt;

  &lt;xsl:variable name="string"
                select="ext:pygmentize($source, $options, $pyoptions)"/&gt;
  &lt;xsl:variable name="html"&gt;
    &lt;xsl:apply-templates select="parse-xml($string)/node()" mode="mp:fix-html"/&gt;
  &lt;/xsl:variable&gt;

  &lt;xsl:sequence select="$html/h:div/h:pre/node()"/&gt;
&lt;/xsl:function&gt;

&lt;xsl:function use-when="not(function-available('ext:pygmentize'))"
              name="fp:syntax-highlight" as="node()*"&gt;
  &lt;xsl:sequence select="error($dbe:INTERNAL-HIGHLIGHT-ERROR,
                              'Syntax highlighting called when not available')"/&gt;
&lt;/xsl:function&gt;

&lt;xsl:template match="element()" mode="mp:fix-html"&gt;
  &lt;xsl:element name="{local-name(.)}" namespace="http://www.w3.org/1999/xhtml"&gt;
    &lt;xsl:apply-templates select="@*,node()" mode="mp:fix-html"/&gt;
  &lt;/xsl:element&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="span[empty(node()) and empty(@*)]" mode="mp:fix-html"/&gt;

&lt;xsl:template match="attribute()|text()|comment()|processing-instruction()" 
              mode="mp:fix-html"&gt;
  &lt;xsl:copy/&gt;
&lt;/xsl:template&gt;

&lt;/xsl:stylesheet&gt;
</code></pre></td></tr></table></div></div></div></div><p><span><span class="template all">22 templates</span></span>, <span><span class="function all">29 functions</span></span>, <span><span class="variable all">2 variables</span></span>, <span><span class="FIXME: comment all">2 FIXME: comments</span></span></p><div class="instructions"><div class="title closed">Instructions</div><div class="body"><div id="S-56456-docbook.org.ns.docbook.variables.invisible-characters" class="instruction variable"><div class="title"><span class="link"></span>Variable <code>$v:invisible-characters</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-56456-docbook.org.ns.docbook.functions.private.inject-into-chars,5">fp:inject-into-chars()</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-56456">modules/verbatim.xsl</a></div></div></div><div id="S-56456-docbook.org.ns.docbook.variables.verbatim-properties" class="instruction variable"><div class="title"><span class="link"></span>Variable <code>$v:verbatim-properties</code> as <code>array(map(*))</code></div><div class="props"><div class="uses">Uses: <a href="#S-23412-docbook.org.ns.docbook.variables.verbatim-callouts">$v:verbatim-callouts</a>, <a href="#S-23412-docbook.org.ns.docbook.variables.verbatim-line-style">$v:verbatim-line-style</a>, <a href="#S-23412-docbook.org.ns.docbook.variables.verbatim-numbered-elements">$v:verbatim-numbered-elements</a>, <a href="#S-23412-docbook.org.ns.docbook.variables.verbatim-plain-style">$v:verbatim-plain-style</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-56456-docbook.org.ns.docbook.functions.private.verbatim-properties,1">fp:verbatim-properties()</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-56456">modules/verbatim.xsl</a></div></div></div><div id="S-56456-t-1" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:programlistingco|db:screenc…</div><div class="props"><div class="uses">Uses: <a href="#S-26643-..verbatim-syntax-highlighter">$verbatim-syntax-highlighter</a></div><div class="calls">Calls: <a href="#S-56456-docbook.org.ns.docbook.functions.verbatim-highlight,1">f:verbatim-highlight()</a>, <a href="#S-56456-docbook.org.ns.docbook.functions.verbatim-numbered,1">f:verbatim-numbered()</a>, <a href="#S-56456-docbook.org.ns.docbook.functions.verbatim-style,1">f:verbatim-style()</a>, <a href="#S-56456-docbook.org.ns.docbook.functions.verbatim-trim-trailing,1">f:verbatim-trim-trailing()</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:programlistingco</code>, <code>db:screenco</code></div></div></div><div id="S-56456-t-2" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:address|db:classsynopsisinf…</div><div class="props"><div class="calls">Calls: <a href="#S-56456-docbook.org.ns.docbook.functions.private.injection-array,1">fp:injection-array()</a>, <a href="#S-56456-docbook.org.ns.docbook.functions.verbatim-highlight,1">f:verbatim-highlight()</a>, <a href="#S-56456-docbook.org.ns.docbook.functions.verbatim-numbered,1">f:verbatim-numbered()</a>, <a href="#S-56456-docbook.org.ns.docbook.functions.verbatim-style,1">f:verbatim-style()</a>, <a href="#S-56456-docbook.org.ns.docbook.functions.verbatim-trim-trailing,1">f:verbatim-trim-trailing()</a></div><div class="calls">Calls: <a href="#S-56456-docbook.org.ns.docbook.templates.private.verbatim">tp:verbatim</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:address</code>, <code>db:classsynopsisinfo</code>, <code>db:funcsynopsisinfo</code>, <code>db:literallayout</code>, <code>db:programlisting</code>, <code>db:screen</code>, <code>db:synopsis</code></div></div></div><div id="S-56456-docbook.org.ns.docbook.templates.private.verbatim" class="instruction template"><div class="title"><span class="link"></span>Template tp:verbatim  match ≅   as element()</div><div class="props"><div class="calls">Calls: <a href="#S-56456-docbook.org.ns.docbook.templates.private.verbatim-lines">tp:verbatim-lines</a>, <a href="#S-56456-docbook.org.ns.docbook.templates.private.verbatim-plain">tp:verbatim-plain</a>, <a href="#S-56456-docbook.org.ns.docbook.templates.private.verbatim-raw">tp:verbatim-raw</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-56456-t-2">template</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-56456">modules/verbatim.xsl</a></div><div class="mode">Mode: <code>m:docbook</code></div></div></div><div id="S-56456-docbook.org.ns.docbook.templates.private.verbatim-plain" class="instruction template"><div class="title"><span class="link"></span>Template tp:verbatim-plain  match ≅   as element()</div><div class="props"><div class="calls">Calls: <a href="#S-56456-docbook.org.ns.docbook.templates.private.filter-callouts">tp:filter-callouts</a>, <a href="#S-56456-docbook.org.ns.docbook.templates.private.verbatim-array">tp:verbatim-array</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-56456-docbook.org.ns.docbook.templates.private.verbatim">tp:verbatim</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-56456">modules/verbatim.xsl</a></div><div class="mode">Mode: <code>m:docbook</code></div></div></div><div id="S-56456-docbook.org.ns.docbook.templates.private.verbatim-raw" class="instruction template"><div class="title"><span class="link"></span>Template tp:verbatim-raw  match ≅   as element()</div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-56456-docbook.org.ns.docbook.templates.private.verbatim">tp:verbatim</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-56456">modules/verbatim.xsl</a></div><div class="mode">Mode: <code>m:docbook</code></div></div></div><div id="S-56456-docbook.org.ns.docbook.templates.private.verbatim-lines" class="instruction template"><div class="title"><span class="link"></span>Template tp:verbatim-lines  match ≅   as element()</div><div class="props"><div class="uses">Uses: <a href="#S-23412-docbook.org.ns.docbook.variables.verbatim-number-every-nth">$v:verbatim-number-every-nth</a>, <a href="#S-23412-docbook.org.ns.docbook.variables.verbatim-number-first-line">$v:verbatim-number-first-line</a>, <a href="#S-23412-docbook.org.ns.docbook.variables.verbatim-number-minlines">$v:verbatim-number-minlines</a></div><div class="calls">Calls: <a href="#S-56456-docbook.org.ns.docbook.functions.private.verbatim-properties,1">fp:verbatim-properties()</a>, <a href="#S-56456-docbook.org.ns.docbook.functions.highlight-verbatim,1">f:highlight-verbatim()</a>, <a href="#S-28936-docbook.org.ns.docbook.functions.is-true,1">f:is-true()</a>, <a href="#S-28936-docbook.org.ns.docbook.functions.pi,3">f:pi()</a></div><div class="calls">Calls: <a href="#S-56456-docbook.org.ns.docbook.templates.private.filter-callouts">tp:filter-callouts</a>, <a href="#S-56456-docbook.org.ns.docbook.templates.private.verbatim-array">tp:verbatim-array</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-56456-docbook.org.ns.docbook.templates.private.verbatim">tp:verbatim</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-56456">modules/verbatim.xsl</a></div><div class="mode">Mode: <code>m:docbook</code></div></div></div><div id="S-56456-docbook.org.ns.docbook.templates.private.filter-callouts" class="instruction template"><div class="title"><span class="link"></span>Template tp:filter-callouts  match ≅ </div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-56456-docbook.org.ns.docbook.templates.private.verbatim-lines">tp:verbatim-lines</a>, <a href="#S-56456-docbook.org.ns.docbook.templates.private.verbatim-plain">tp:verbatim-plain</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-56456">modules/verbatim.xsl</a></div><div class="mode">Mode: <code>m:docbook</code></div></div></div><div id="S-56456-docbook.org.ns.docbook.templates.private.verbatim-array" class="instruction template"><div class="title"><span class="link"></span>Template tp:verbatim-array  match ≅   as array(*)</div><div class="props"><div class="uses">Uses: <a href="#S-23412-docbook.org.ns.docbook.variables.verbatim-syntax-highlight-options">$v:verbatim-syntax-highlight-options</a>, <a href="#S-23412-docbook.org.ns.docbook.variables.verbatim-syntax-highlight-pygments-options">$v:verbatim-syntax-highlight-pygments-options</a></div><div class="calls">Calls: <a href="#S-56456-docbook.org.ns.docbook.functions.private.balance-markup,1">fp:balance-markup()</a>, <a href="#S-56456-docbook.org.ns.docbook.functions.private.inject-array,2">fp:inject-array()</a>, <a href="#S-56456-docbook.org.ns.docbook.functions.private.make-lines,2">fp:make-lines()</a>, <a href="#S-56456-docbook.org.ns.docbook.functions.private.unflatten,1">fp:unflatten()</a>, <a href="#S-56456-docbook.org.ns.docbook.functions.highlight-verbatim,1">f:highlight-verbatim()</a>, <a href="#S-16614-docbook.org.ns.docbook.functions.syntax-highlight,3">f:syntax-highlight()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-56456-docbook.org.ns.docbook.templates.private.verbatim-lines">tp:verbatim-lines</a>, <a href="#S-56456-docbook.org.ns.docbook.templates.private.verbatim-plain">tp:verbatim-plain</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-56456">modules/verbatim.xsl</a></div><div class="mode">Mode: <code>m:docbook</code></div></div></div><div id="S-56456-docbook.org.ns.docbook.functions.highlight-verbatim,1" class="instruction function"><div class="title"><span class="link"></span>Function f:highlight-verbatim($node as element()) as xs:boolean</div><div class="props"><div class="uses">Uses: <a href="#S-23412-docbook.org.ns.docbook.variables.verbatim-syntax-highlight-languages">$v:verbatim-syntax-highlight-languages</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-56456-docbook.org.ns.docbook.templates.private.verbatim-array">tp:verbatim-array</a>, <a href="#S-56456-docbook.org.ns.docbook.templates.private.verbatim-lines">tp:verbatim-lines</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-56456">modules/verbatim.xsl</a></div></div></div><div id="S-56456-t-9" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ *  as map(xs:string, xs:string)</div><div class="props"><div class="mode">Mode: <code>m:highlight-options</code></div><div class="matches">Matches: <code>*</code></div></div></div><div id="S-56456-t-10" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ *  as map(xs:string, xs:string)</div><div class="props"><div class="calls">Calls: <a href="#S-28936-docbook.org.ns.docbook.functions.pi-attributes,1">f:pi-attributes()</a></div><div class="mode">Mode: <code>m:pygments-options</code></div><div class="matches">Matches: <code>*</code></div></div></div><div id="S-56456-docbook.org.ns.docbook.functions.private.inject-array,2" class="instruction function"><div class="title"><span class="link"></span>Function fp:inject-array($lines as array(*), $inject as array(*)) as array(*) <span class="recursive" title="Recursive function">♻</span></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-56456-docbook.org.ns.docbook.functions.private.inject-array,2">fp:inject-array()</a>, <a href="#S-56456-docbook.org.ns.docbook.templates.private.verbatim-array">tp:verbatim-array</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-56456">modules/verbatim.xsl</a></div></div></div><div id="S-56456-docbook.org.ns.docbook.functions.private.make-lines,2" class="instruction function"><div class="title"><span class="link"></span>Function fp:make-lines#2($body as node()*, $trim-trailing as xs:boolean) as array(*)</div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-56456-docbook.org.ns.docbook.templates.private.verbatim-array">tp:verbatim-array</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-56456">modules/verbatim.xsl</a></div></div></div><div id="S-56456-docbook.org.ns.docbook.functions.private.trim-trailing-blank-lines,1" class="instruction function"><div class="title"><span class="link"></span>Function fp:trim-trailing-blank-lines($lines as array(*)) <span class="recursive" title="Recursive function">♻</span></div><div class="props"><div class="calls">Calls: <a href="#S-56456-docbook.org.ns.docbook.functions.private.make-lines,2">fp:make-lines()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-56456-docbook.org.ns.docbook.functions.private.make-lines,2">fp:make-lines()</a>, <a href="#S-56456-docbook.org.ns.docbook.functions.private.trim-trailing-blank-lines,1">fp:trim-trailing-blank-lines()</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-56456">modules/verbatim.xsl</a></div></div></div><div id="S-56456-docbook.org.ns.docbook.functions.private.make-lines,3" class="instruction function"><div class="title"><span class="link"></span>Function fp:make-lines#3($body as node()*, $curline as item()*, $linearray as array(*)) as array(*) <span class="recursive" title="Recursive function">♻</span></div><div class="props"><div class="calls">Calls: <a href="#S-56456-docbook.org.ns.docbook.functions.private.make-lines,2">fp:make-lines()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-56456-docbook.org.ns.docbook.functions.private.make-lines,2">fp:make-lines()</a>, <a href="#S-56456-docbook.org.ns.docbook.functions.private.make-lines,3">fp:make-lines()</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-56456">modules/verbatim.xsl</a></div></div></div><div id="S-56456-docbook.org.ns.docbook.functions.private.balance-markup,1" class="instruction function"><div class="title"><span class="link"></span>Function fp:balance-markup#1($lines as array(*))</div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-56456-docbook.org.ns.docbook.templates.private.verbatim-array">tp:verbatim-array</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-56456">modules/verbatim.xsl</a></div></div></div><div id="S-56456-docbook.org.ns.docbook.functions.private.balance-markup,3" class="instruction function"><div class="title"><span class="link"></span>Function fp:balance-markup#3($lines as array(*), $open as element()*, $balanced as array(*)) <span class="recursive" title="Recursive function">♻</span></div><div class="props"><div class="calls">Calls: <a href="#S-56456-docbook.org.ns.docbook.functions.private.balance-markup,1">fp:balance-markup()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-56456-docbook.org.ns.docbook.functions.private.balance-markup,1">fp:balance-markup()</a>, <a href="#S-56456-docbook.org.ns.docbook.functions.private.balance-markup,3">fp:balance-markup()</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-56456">modules/verbatim.xsl</a></div></div></div><div id="S-56456-docbook.org.ns.docbook.functions.private.balance-line,2" class="instruction function"><div class="title"><span class="link"></span>Function fp:balance-line($open as element()*, $line as item()*) as item()*</div><div class="props"><div class="calls">Calls: <a href="#S-56456-docbook.org.ns.docbook.functions.private.balance-markup,3">fp:balance-markup()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-56456-docbook.org.ns.docbook.functions.private.balance-markup,3">fp:balance-markup()</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-56456">modules/verbatim.xsl</a></div></div></div><div id="S-56456-docbook.org.ns.docbook.functions.private.open,2" class="instruction function"><div class="title"><span class="link"></span>Function fp:open($open as element()*, $line as item()*) as element()*</div><div class="props"><div class="calls">Calls: <a href="#S-56456-docbook.org.ns.docbook.functions.private.balance-markup,3">fp:balance-markup()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-56456-docbook.org.ns.docbook.functions.private.balance-markup,3">fp:balance-markup()</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-56456">modules/verbatim.xsl</a></div></div></div><div id="S-56456-docbook.org.ns.docbook.functions.private.unflatten,1" class="instruction function"><div class="title"><span class="link"></span>Function fp:unflatten#1($lines as array(*)) as array(*)</div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-56456-docbook.org.ns.docbook.templates.private.verbatim-array">tp:verbatim-array</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-56456">modules/verbatim.xsl</a></div></div></div><div id="S-56456-docbook.org.ns.docbook.functions.private.unflatten,2" class="instruction function"><div class="title"><span class="link"></span>Function fp:unflatten#2($lines as array(*), $newlines as array(*)) as array(*) <span class="recursive" title="Recursive function">♻</span></div><div class="props"><div class="calls">Calls: <a href="#S-56456-docbook.org.ns.docbook.functions.private.unflatten,1">fp:unflatten()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-56456-docbook.org.ns.docbook.functions.private.unflatten,1">fp:unflatten()</a>, <a href="#S-56456-docbook.org.ns.docbook.functions.private.unflatten,2">fp:unflatten()</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-56456">modules/verbatim.xsl</a></div></div></div><div id="S-56456-docbook.org.ns.docbook.functions.private.unflatten-line,1" class="instruction function"><div class="title"><span class="link"></span>Function fp:unflatten-line#1($line as item()*) as item()*</div><div class="props"><div class="calls">Calls: <a href="#S-56456-docbook.org.ns.docbook.functions.private.unflatten,2">fp:unflatten()</a>, <a href="#S-56456-docbook.org.ns.docbook.functions.private.unflatten-line,2">fp:unflatten-line()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-56456-docbook.org.ns.docbook.functions.private.unflatten,2">fp:unflatten()</a>, <a href="#S-56456-docbook.org.ns.docbook.functions.private.unflatten-line,2">fp:unflatten-line()</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-56456">modules/verbatim.xsl</a></div></div></div><div id="S-56456-docbook.org.ns.docbook.functions.private.unflatten-line,2" class="instruction function"><div class="title"><span class="link"></span>Function fp:unflatten-line#2($line as item()*, $newline as item()*) as item()* <span class="recursive" title="Recursive function">♻</span></div><div class="props"><div class="calls">Calls: <a href="#S-56456-docbook.org.ns.docbook.functions.private.unflatten-line,1">fp:unflatten-line()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-56456-docbook.org.ns.docbook.functions.private.unflatten-line,1">fp:unflatten-line()</a>, <a href="#S-56456-docbook.org.ns.docbook.functions.private.unflatten-line,2">fp:unflatten-line()</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-56456">modules/verbatim.xsl</a></div></div></div><div id="S-56456-docbook.org.ns.docbook.functions.private.contains,2" class="instruction function"><div class="title"><span class="link"></span>Function fp:contains($line as item()*, $id as xs:string) as xs:boolean</div><div class="props"><div class="calls">Calls: <a href="#S-56456-docbook.org.ns.docbook.functions.private.unflatten-line,2">fp:unflatten-line()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-56456-docbook.org.ns.docbook.functions.private.unflatten-line,2">fp:unflatten-line()</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-56456">modules/verbatim.xsl</a></div></div></div><div id="S-56456-docbook.org.ns.docbook.functions.private.up-to,2" class="instruction function"><div class="title"><span class="link"></span>Function fp:up-to($line as item()*, $id as xs:string) <span class="recursive" title="Recursive function">♻</span></div><div class="props"><div class="calls">Calls: <a href="#S-56456-docbook.org.ns.docbook.functions.private.unflatten-line,2">fp:unflatten-line()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-56456-docbook.org.ns.docbook.functions.private.unflatten-line,2">fp:unflatten-line()</a>, <a href="#S-56456-docbook.org.ns.docbook.functions.private.up-to,2">fp:up-to()</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-56456">modules/verbatim.xsl</a></div></div></div><div id="S-56456-docbook.org.ns.docbook.functions.private.following,2" class="instruction function"><div class="title"><span class="link"></span>Function fp:following($line as item()*, $id as xs:string) <span class="recursive" title="Recursive function">♻</span></div><div class="props"><div class="calls">Calls: <a href="#S-56456-docbook.org.ns.docbook.functions.private.unflatten-line,2">fp:unflatten-line()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-56456-docbook.org.ns.docbook.functions.private.following,2">fp:following()</a>, <a href="#S-56456-docbook.org.ns.docbook.functions.private.unflatten-line,2">fp:unflatten-line()</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-56456">modules/verbatim.xsl</a></div></div></div><div id="S-56456-docbook.org.ns.docbook.functions.private.array-append,2" class="instruction function"><div class="title"><span class="link"></span>Function fp:array-append($array as array(*), $seq as item()*) <span class="recursive" title="Recursive function">♻</span></div><div class="props"><div class="calls">Calls: <a href="#S-56456-docbook.org.ns.docbook.functions.private.make-lines,3">fp:make-lines()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-56456-docbook.org.ns.docbook.functions.private.array-append,2">fp:array-append()</a>, <a href="#S-56456-docbook.org.ns.docbook.functions.private.make-lines,3">fp:make-lines()</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-56456">modules/verbatim.xsl</a></div></div></div><div id="S-56456-docbook.org.ns.docbook.functions.private.inject,4" class="instruction function"><div class="title"><span class="link"></span>Function fp:inject($lines as array(*), $item as item(), $lineno as xs:integer, $colno as xs:integer) as array(*)</div><div class="props"><div class="calls">Calls: <a href="#S-56456-docbook.org.ns.docbook.functions.private.inject-array,2">fp:inject-array()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-56456-docbook.org.ns.docbook.functions.private.inject-array,2">fp:inject-array()</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-56456">modules/verbatim.xsl</a></div></div></div><div id="S-56456-docbook.org.ns.docbook.functions.private.array-pad,2" class="instruction function"><div class="title"><span class="link"></span>Function fp:array-pad($lines as array(*), $lineno as xs:integer) <span class="recursive" title="Recursive function">♻</span></div><div class="props"><div class="calls">Calls: <a href="#S-56456-docbook.org.ns.docbook.functions.private.inject,4">fp:inject()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-56456-docbook.org.ns.docbook.functions.private.array-pad,2">fp:array-pad()</a>, <a href="#S-56456-docbook.org.ns.docbook.functions.private.inject,4">fp:inject()</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-56456">modules/verbatim.xsl</a></div></div></div><div id="S-56456-docbook.org.ns.docbook.functions.private.inject-into-line,3" class="instruction function"><div class="title"><span class="link"></span>Function fp:inject-into-line($line as item()*, $item as item(), $colno as xs:integer) as item()*</div><div class="props"><div class="calls">Calls: <a href="#S-56456-docbook.org.ns.docbook.functions.private.inject,4">fp:inject()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-56456-docbook.org.ns.docbook.functions.private.inject,4">fp:inject()</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-56456">modules/verbatim.xsl</a></div></div></div><div id="S-56456-docbook.org.ns.docbook.functions.private.inject-into-chars,5" class="instruction function"><div class="title"><span class="link"></span>Function fp:inject-into-chars($chars as item()*, $item as item(), $colno as xs:integer, $pos as xs:integer, $open as element()*) as item()* <span class="recursive" title="Recursive function">♻</span></div><div class="props"><div class="uses">Uses: <a href="#S-56456-docbook.org.ns.docbook.variables.invisible-characters">$v:invisible-characters</a>, <a href="#S-23412-docbook.org.ns.docbook.variables.verbatim-space">$v:verbatim-space</a></div><div class="calls">Calls: <a href="#S-56456-docbook.org.ns.docbook.functions.private.inject-into-line,3">fp:inject-into-line()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-56456-docbook.org.ns.docbook.functions.private.inject-into-chars,5">fp:inject-into-chars()</a>, <a href="#S-56456-docbook.org.ns.docbook.functions.private.inject-into-line,3">fp:inject-into-line()</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-56456">modules/verbatim.xsl</a></div></div></div><div id="S-56456-docbook.org.ns.docbook.functions.private.line-to-chars,1" class="instruction function"><div class="title"><span class="link"></span>Function fp:line-to-chars($line as item()*) as item()* <span class="recursive" title="Recursive function">♻</span></div><div class="props"><div class="calls">Calls: <a href="#S-56456-docbook.org.ns.docbook.functions.private.inject-into-line,3">fp:inject-into-line()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-56456-docbook.org.ns.docbook.functions.private.inject-into-line,3">fp:inject-into-line()</a>, <a href="#S-56456-docbook.org.ns.docbook.functions.private.line-to-chars,1">fp:line-to-chars()</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-56456">modules/verbatim.xsl</a></div></div></div><div id="S-56456-docbook.org.ns.docbook.functions.private.injection-array,1" class="instruction function"><div class="title"><span class="link"></span>Function fp:injection-array($inject as item()?) as array(*)?</div><div class="props"><div class="uses">Uses: <a href="#S-29386-docbook.org.ns.docbook.errors.INVALID-INJECT">$dbe:INVALID-INJECT</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-56456-t-2">template</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-56456">modules/verbatim.xsl</a></div></div></div><div id="S-56456-t-11" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:area</div><div class="props"><div class="uses">Uses: <a href="#S-29386-docbook.org.ns.docbook.errors.INVALID-INJECT">$dbe:INVALID-INJECT</a>, <a href="#S-26643-..callout-default-column">$callout-default-column</a></div><div class="mode">Mode: <code>mp:inj-map</code></div><div class="matches">Matches: <code>db:area</code></div></div></div><div id="S-56456-t-12" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:areaset</div><div class="props"><div class="mode">Mode: <code>mp:inj-map</code></div><div class="matches">Matches: <code>db:areaset</code></div></div></div><div id="S-56456-t-13" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ *</div><div class="props"><div class="uses">Uses: <a href="#S-29386-docbook.org.ns.docbook.errors.INVALID-INJECT">$dbe:INVALID-INJECT</a></div><div class="mode">Mode: <code>mp:inj-map</code></div><div class="matches">Matches: <code>*</code></div></div></div><div id="S-56456-t-14" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ attribute()|comment()|processi…</div><div class="props"><div class="mode">Mode: <code>mp:inj-map</code></div><div class="matches">Matches: <code>attribute()</code>, <code>comment()</code>, <code>processing-instruction()</code>, <code>text()</code></div></div></div><div id="S-56456-t-15" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:co</div><div class="props"><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:co</code></div></div></div><div id="S-56456-t-16" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:co</div><div class="props"><div class="uses">Uses: <a href="#S-26643-..callout-unicode-start">$callout-unicode-start</a></div><div class="mode">Mode: <code>m:callout-bug</code></div><div class="matches">Matches: <code>db:co</code></div></div></div><div id="S-56456-t-17" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:coref</div><div class="props"><div class="calls">Calls: <a href="#S-9504-docbook.org.ns.docbook.templates.inline">t:inline</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:coref</code></div></div></div><div id="S-56456-t-18" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:areaspec  as xs:integer</div><div class="props"><div class="calls">Calls: <a href="#S-28936-docbook.org.ns.docbook.functions.pi,2">f:pi()</a></div><div class="mode">Mode: <code>m:callout-bug</code></div><div class="matches">Matches: <code>db:areaspec</code></div></div></div><div id="S-56456-t-19" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:area</div><div class="props"><div class="mode">Mode: <code>m:callout-bug</code></div><div class="matches">Matches: <code>db:area</code></div></div></div><div id="S-56456-t-20" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:area</div><div class="props"><div class="calls">Calls: <a href="#S-28936-docbook.org.ns.docbook.functions.generate-id,1">f:generate-id()</a></div><div class="mode">Mode: <code>mp:callout-in-verbatim</code></div><div class="matches">Matches: <code>db:area</code></div></div></div><div id="S-56456-docbook.org.ns.docbook.functions.private.validate-injection-array,1" class="instruction function"><div class="title"><span class="link"></span>Function fp:validate-injection-array($array as array(*)) as array(*)</div><div class="props"><div class="uses">Uses: <a href="#S-29386-docbook.org.ns.docbook.errors.INVALID-INJECT">$dbe:INVALID-INJECT</a></div><div class="calls">Calls: <a href="#S-56456-docbook.org.ns.docbook.functions.private.injection-array,1">fp:injection-array()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-56456-docbook.org.ns.docbook.functions.private.injection-array,1">fp:injection-array()</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-56456">modules/verbatim.xsl</a></div></div></div><div id="S-56456-t-21" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ element()</div><div class="props"><div class="mode">Mode: <code>mp:flatten-markup</code></div><div class="matches">Matches: <code>element()</code></div></div></div><div id="S-56456-t-22" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ attribute()|comment()|processi…</div><div class="props"><div class="mode">Mode: <code>mp:flatten-markup</code></div><div class="matches">Matches: <code>attribute()</code>, <code>comment()</code>, <code>processing-instruction()</code>, <code>text()</code></div></div></div><div id="S-56456-docbook.org.ns.docbook.functions.private.verbatim-properties,1" class="instruction function"><div class="title"><span class="link"></span>Function fp:verbatim-properties($context as element()) as map(*)</div><div class="props"><div class="uses">Uses: <a href="#S-23412-docbook.org.ns.docbook.variables.verbatim-callouts">$v:verbatim-callouts</a>, <a href="#S-23412-docbook.org.ns.docbook.variables.verbatim-numbered-elements">$v:verbatim-numbered-elements</a>, <a href="#S-56456-docbook.org.ns.docbook.variables.verbatim-properties">$v:verbatim-properties</a>, <a href="#S-26643-..verbatim-style-default">$verbatim-style-default</a></div><div class="calls">Calls: <a href="#S-56456-docbook.org.ns.docbook.functions.verbatim-highlight,1">f:verbatim-highlight()</a>, <a href="#S-56456-docbook.org.ns.docbook.functions.verbatim-numbered,1">f:verbatim-numbered()</a>, <a href="#S-56456-docbook.org.ns.docbook.functions.verbatim-style,1">f:verbatim-style()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-56456-docbook.org.ns.docbook.functions.verbatim-highlight,1">f:verbatim-highlight()</a>, <a href="#S-56456-docbook.org.ns.docbook.functions.verbatim-numbered,1">f:verbatim-numbered()</a>, <a href="#S-56456-docbook.org.ns.docbook.functions.verbatim-style,1">f:verbatim-style()</a>, <a href="#S-56456-docbook.org.ns.docbook.templates.private.verbatim-lines">tp:verbatim-lines</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-56456">modules/verbatim.xsl</a></div></div></div><div id="S-56456-docbook.org.ns.docbook.functions.verbatim-style,1" class="instruction function"><div class="title"><span class="link"></span>Function f:verbatim-style($context as element()) as xs:string</div><div class="props"><div class="uses">Uses: <a href="#S-26643-..verbatim-syntax-highlighter">$verbatim-syntax-highlighter</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-56456-t-1">template</a>, <a href="#S-56456-t-2">template</a>, <a href="#S-10102-t-14">template</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-56456">modules/verbatim.xsl</a>, <a href="#S-10102">modules/attributes.xsl</a></div></div></div><div id="S-56456-docbook.org.ns.docbook.functions.verbatim-highlight,1" class="instruction function"><div class="title"><span class="link"></span>Function f:verbatim-highlight($context as element()) as xs:string*</div><div class="props"><div class="uses">Uses: <a href="#S-26643-..verbatim-syntax-highlighter">$verbatim-syntax-highlighter</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-56456-t-1">template</a>, <a href="#S-56456-t-2">template</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-56456">modules/verbatim.xsl</a></div></div></div><div id="S-56456-docbook.org.ns.docbook.functions.verbatim-numbered,1" class="instruction function"><div class="title"><span class="link"></span>Function f:verbatim-numbered($context as element()) as xs:boolean</div><div class="props"><div class="uses">Uses: <a href="#S-26643-..verbatim-syntax-highlighter">$verbatim-syntax-highlighter</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-56456-t-1">template</a>, <a href="#S-56456-t-2">template</a>, <a href="#S-10102-t-14">template</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-56456">modules/verbatim.xsl</a>, <a href="#S-10102">modules/attributes.xsl</a></div></div></div><div id="S-56456-docbook.org.ns.docbook.functions.verbatim-trim-trailing,1" class="instruction function"><div class="title"><span class="link"></span>Function f:verbatim-trim-trailing($context as element()) as xs:boolean</div><div class="props"><div class="uses">Uses: <a href="#S-26643-..verbatim-trim-trailing-blank-lines">$verbatim-trim-trailing-blank-lines</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-56456-t-1">template</a>, <a href="#S-56456-t-2">template</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-56456">modules/verbatim.xsl</a></div></div></div></div></div><div class="instructions"><div class="title closed">FIXME: comments</div><div class="body"><div id="S-56456-c-2" class="instruction comment"><div class="title"><span class="link"></span>Comment</div><div class="props">When counting characters in a line, these characters are invisible, just skip right past them. FIXME: get an authoritative list of invisible characters this is just a small selection of ones that occurred to me.</div></div><div id="S-56456-c-3" class="instruction comment"><div class="title"><span class="link"></span>Comment</div><div class="props">FIXME: rename 'highlight' to 'callout' for consistency</div></div></div></div><div class="source-code"><div class="title closed">Source code</div><div class="body"><div><table><tr><td valign="top" align="right"><pre class="fake-prism"><span id="line-S-56456-1">1</span>
<span id="line-S-56456-2"><span class="lno">2</span></span>
<span id="line-S-56456-3"><span class="lno">3</span></span>
<span id="line-S-56456-4"><span class="lno">4</span></span>
<span id="line-S-56456-5">5</span>
<span id="line-S-56456-6"><span class="lno">6</span></span>
<span id="line-S-56456-7"><span class="lno">7</span></span>
<span id="line-S-56456-8"><span class="lno">8</span></span>
<span id="line-S-56456-9"><span class="lno">9</span></span>
<span id="line-S-56456-10">10</span>
<span id="line-S-56456-11"><span class="lno">11</span></span>
<span id="line-S-56456-12"><span class="lno">12</span></span>
<span id="line-S-56456-13"><span class="lno">13</span></span>
<span id="line-S-56456-14"><span class="lno">14</span></span>
<span id="line-S-56456-15">15</span>
<span id="line-S-56456-16"><span class="lno">16</span></span>
<span id="line-S-56456-17"><span class="lno">17</span></span>
<span id="line-S-56456-18"><span class="lno">18</span></span>
<span id="line-S-56456-19"><span class="lno">19</span></span>
<span id="line-S-56456-20">20</span>
<span id="line-S-56456-21"><span class="lno">21</span></span>
<span id="line-S-56456-22"><span class="lno">22</span></span>
<span id="line-S-56456-23"><span class="lno">23</span></span>
<span id="line-S-56456-24"><span class="lno">24</span></span>
<span id="line-S-56456-25">25</span>
<span id="line-S-56456-26"><span class="lno">26</span></span>
<span id="line-S-56456-27"><span class="lno">27</span></span>
<span id="line-S-56456-28"><span class="lno">28</span></span>
<span id="line-S-56456-29"><span class="lno">29</span></span>
<span id="line-S-56456-30">30</span>
<span id="line-S-56456-31"><span class="lno">31</span></span>
<span id="line-S-56456-32"><span class="lno">32</span></span>
<span id="line-S-56456-33"><span class="lno">33</span></span>
<span id="line-S-56456-34"><span class="lno">34</span></span>
<span id="line-S-56456-35">35</span>
<span id="line-S-56456-36"><span class="lno">36</span></span>
<span id="line-S-56456-37"><span class="lno">37</span></span>
<span id="line-S-56456-38"><span class="lno">38</span></span>
<span id="line-S-56456-39"><span class="lno">39</span></span>
<span id="line-S-56456-40">40</span>
<span id="line-S-56456-41"><span class="lno">41</span></span>
<span id="line-S-56456-42"><span class="lno">42</span></span>
<span id="line-S-56456-43"><span class="lno">43</span></span>
<span id="line-S-56456-44"><span class="lno">44</span></span>
<span id="line-S-56456-45">45</span>
<span id="line-S-56456-46"><span class="lno">46</span></span>
<span id="line-S-56456-47"><span class="lno">47</span></span>
<span id="line-S-56456-48"><span class="lno">48</span></span>
<span id="line-S-56456-49"><span class="lno">49</span></span>
<span id="line-S-56456-50">50</span>
<span id="line-S-56456-51"><span class="lno">51</span></span>
<span id="line-S-56456-52"><span class="lno">52</span></span>
<span id="line-S-56456-53"><span class="lno">53</span></span>
<span id="line-S-56456-54"><span class="lno">54</span></span>
<span id="line-S-56456-55">55</span>
<span id="line-S-56456-56"><span class="lno">56</span></span>
<span id="line-S-56456-57"><span class="lno">57</span></span>
<span id="line-S-56456-58"><span class="lno">58</span></span>
<span id="line-S-56456-59"><span class="lno">59</span></span>
<span id="line-S-56456-60">60</span>
<span id="line-S-56456-61"><span class="lno">61</span></span>
<span id="line-S-56456-62"><span class="lno">62</span></span>
<span id="line-S-56456-63"><span class="lno">63</span></span>
<span id="line-S-56456-64"><span class="lno">64</span></span>
<span id="line-S-56456-65">65</span>
<span id="line-S-56456-66"><span class="lno">66</span></span>
<span id="line-S-56456-67"><span class="lno">67</span></span>
<span id="line-S-56456-68"><span class="lno">68</span></span>
<span id="line-S-56456-69"><span class="lno">69</span></span>
<span id="line-S-56456-70">70</span>
<span id="line-S-56456-71"><span class="lno">71</span></span>
<span id="line-S-56456-72"><span class="lno">72</span></span>
<span id="line-S-56456-73"><span class="lno">73</span></span>
<span id="line-S-56456-74"><span class="lno">74</span></span>
<span id="line-S-56456-75">75</span>
<span id="line-S-56456-76"><span class="lno">76</span></span>
<span id="line-S-56456-77"><span class="lno">77</span></span>
<span id="line-S-56456-78"><span class="lno">78</span></span>
<span id="line-S-56456-79"><span class="lno">79</span></span>
<span id="line-S-56456-80">80</span>
<span id="line-S-56456-81"><span class="lno">81</span></span>
<span id="line-S-56456-82"><span class="lno">82</span></span>
<span id="line-S-56456-83"><span class="lno">83</span></span>
<span id="line-S-56456-84"><span class="lno">84</span></span>
<span id="line-S-56456-85">85</span>
<span id="line-S-56456-86"><span class="lno">86</span></span>
<span id="line-S-56456-87"><span class="lno">87</span></span>
<span id="line-S-56456-88"><span class="lno">88</span></span>
<span id="line-S-56456-89"><span class="lno">89</span></span>
<span id="line-S-56456-90">90</span>
<span id="line-S-56456-91"><span class="lno">91</span></span>
<span id="line-S-56456-92"><span class="lno">92</span></span>
<span id="line-S-56456-93"><span class="lno">93</span></span>
<span id="line-S-56456-94"><span class="lno">94</span></span>
<span id="line-S-56456-95">95</span>
<span id="line-S-56456-96"><span class="lno">96</span></span>
<span id="line-S-56456-97"><span class="lno">97</span></span>
<span id="line-S-56456-98"><span class="lno">98</span></span>
<span id="line-S-56456-99"><span class="lno">99</span></span>
<span id="line-S-56456-100">100</span>
<span id="line-S-56456-101"><span class="lno">101</span></span>
<span id="line-S-56456-102"><span class="lno">102</span></span>
<span id="line-S-56456-103"><span class="lno">103</span></span>
<span id="line-S-56456-104"><span class="lno">104</span></span>
<span id="line-S-56456-105">105</span>
<span id="line-S-56456-106"><span class="lno">106</span></span>
<span id="line-S-56456-107"><span class="lno">107</span></span>
<span id="line-S-56456-108"><span class="lno">108</span></span>
<span id="line-S-56456-109"><span class="lno">109</span></span>
<span id="line-S-56456-110">110</span>
<span id="line-S-56456-111"><span class="lno">111</span></span>
<span id="line-S-56456-112"><span class="lno">112</span></span>
<span id="line-S-56456-113"><span class="lno">113</span></span>
<span id="line-S-56456-114"><span class="lno">114</span></span>
<span id="line-S-56456-115">115</span>
<span id="line-S-56456-116"><span class="lno">116</span></span>
<span id="line-S-56456-117"><span class="lno">117</span></span>
<span id="line-S-56456-118"><span class="lno">118</span></span>
<span id="line-S-56456-119"><span class="lno">119</span></span>
<span id="line-S-56456-120">120</span>
<span id="line-S-56456-121"><span class="lno">121</span></span>
<span id="line-S-56456-122"><span class="lno">122</span></span>
<span id="line-S-56456-123"><span class="lno">123</span></span>
<span id="line-S-56456-124"><span class="lno">124</span></span>
<span id="line-S-56456-125">125</span>
<span id="line-S-56456-126"><span class="lno">126</span></span>
<span id="line-S-56456-127"><span class="lno">127</span></span>
<span id="line-S-56456-128"><span class="lno">128</span></span>
<span id="line-S-56456-129"><span class="lno">129</span></span>
<span id="line-S-56456-130">130</span>
<span id="line-S-56456-131"><span class="lno">131</span></span>
<span id="line-S-56456-132"><span class="lno">132</span></span>
<span id="line-S-56456-133"><span class="lno">133</span></span>
<span id="line-S-56456-134"><span class="lno">134</span></span>
<span id="line-S-56456-135">135</span>
<span id="line-S-56456-136"><span class="lno">136</span></span>
<span id="line-S-56456-137"><span class="lno">137</span></span>
<span id="line-S-56456-138"><span class="lno">138</span></span>
<span id="line-S-56456-139"><span class="lno">139</span></span>
<span id="line-S-56456-140">140</span>
<span id="line-S-56456-141"><span class="lno">141</span></span>
<span id="line-S-56456-142"><span class="lno">142</span></span>
<span id="line-S-56456-143"><span class="lno">143</span></span>
<span id="line-S-56456-144"><span class="lno">144</span></span>
<span id="line-S-56456-145">145</span>
<span id="line-S-56456-146"><span class="lno">146</span></span>
<span id="line-S-56456-147"><span class="lno">147</span></span>
<span id="line-S-56456-148"><span class="lno">148</span></span>
<span id="line-S-56456-149"><span class="lno">149</span></span>
<span id="line-S-56456-150">150</span>
<span id="line-S-56456-151"><span class="lno">151</span></span>
<span id="line-S-56456-152"><span class="lno">152</span></span>
<span id="line-S-56456-153"><span class="lno">153</span></span>
<span id="line-S-56456-154"><span class="lno">154</span></span>
<span id="line-S-56456-155">155</span>
<span id="line-S-56456-156"><span class="lno">156</span></span>
<span id="line-S-56456-157"><span class="lno">157</span></span>
<span id="line-S-56456-158"><span class="lno">158</span></span>
<span id="line-S-56456-159"><span class="lno">159</span></span>
<span id="line-S-56456-160">160</span>
<span id="line-S-56456-161"><span class="lno">161</span></span>
<span id="line-S-56456-162"><span class="lno">162</span></span>
<span id="line-S-56456-163"><span class="lno">163</span></span>
<span id="line-S-56456-164"><span class="lno">164</span></span>
<span id="line-S-56456-165">165</span>
<span id="line-S-56456-166"><span class="lno">166</span></span>
<span id="line-S-56456-167"><span class="lno">167</span></span>
<span id="line-S-56456-168"><span class="lno">168</span></span>
<span id="line-S-56456-169"><span class="lno">169</span></span>
<span id="line-S-56456-170">170</span>
<span id="line-S-56456-171"><span class="lno">171</span></span>
<span id="line-S-56456-172"><span class="lno">172</span></span>
<span id="line-S-56456-173"><span class="lno">173</span></span>
<span id="line-S-56456-174"><span class="lno">174</span></span>
<span id="line-S-56456-175">175</span>
<span id="line-S-56456-176"><span class="lno">176</span></span>
<span id="line-S-56456-177"><span class="lno">177</span></span>
<span id="line-S-56456-178"><span class="lno">178</span></span>
<span id="line-S-56456-179"><span class="lno">179</span></span>
<span id="line-S-56456-180">180</span>
<span id="line-S-56456-181"><span class="lno">181</span></span>
<span id="line-S-56456-182"><span class="lno">182</span></span>
<span id="line-S-56456-183"><span class="lno">183</span></span>
<span id="line-S-56456-184"><span class="lno">184</span></span>
<span id="line-S-56456-185">185</span>
<span id="line-S-56456-186"><span class="lno">186</span></span>
<span id="line-S-56456-187"><span class="lno">187</span></span>
<span id="line-S-56456-188"><span class="lno">188</span></span>
<span id="line-S-56456-189"><span class="lno">189</span></span>
<span id="line-S-56456-190">190</span>
<span id="line-S-56456-191"><span class="lno">191</span></span>
<span id="line-S-56456-192"><span class="lno">192</span></span>
<span id="line-S-56456-193"><span class="lno">193</span></span>
<span id="line-S-56456-194"><span class="lno">194</span></span>
<span id="line-S-56456-195">195</span>
<span id="line-S-56456-196"><span class="lno">196</span></span>
<span id="line-S-56456-197"><span class="lno">197</span></span>
<span id="line-S-56456-198"><span class="lno">198</span></span>
<span id="line-S-56456-199"><span class="lno">199</span></span>
<span id="line-S-56456-200">200</span>
<span id="line-S-56456-201"><span class="lno">201</span></span>
<span id="line-S-56456-202"><span class="lno">202</span></span>
<span id="line-S-56456-203"><span class="lno">203</span></span>
<span id="line-S-56456-204"><span class="lno">204</span></span>
<span id="line-S-56456-205">205</span>
<span id="line-S-56456-206"><span class="lno">206</span></span>
<span id="line-S-56456-207"><span class="lno">207</span></span>
<span id="line-S-56456-208"><span class="lno">208</span></span>
<span id="line-S-56456-209"><span class="lno">209</span></span>
<span id="line-S-56456-210">210</span>
<span id="line-S-56456-211"><span class="lno">211</span></span>
<span id="line-S-56456-212"><span class="lno">212</span></span>
<span id="line-S-56456-213"><span class="lno">213</span></span>
<span id="line-S-56456-214"><span class="lno">214</span></span>
<span id="line-S-56456-215">215</span>
<span id="line-S-56456-216"><span class="lno">216</span></span>
<span id="line-S-56456-217"><span class="lno">217</span></span>
<span id="line-S-56456-218"><span class="lno">218</span></span>
<span id="line-S-56456-219"><span class="lno">219</span></span>
<span id="line-S-56456-220">220</span>
<span id="line-S-56456-221"><span class="lno">221</span></span>
<span id="line-S-56456-222"><span class="lno">222</span></span>
<span id="line-S-56456-223"><span class="lno">223</span></span>
<span id="line-S-56456-224"><span class="lno">224</span></span>
<span id="line-S-56456-225">225</span>
<span id="line-S-56456-226"><span class="lno">226</span></span>
<span id="line-S-56456-227"><span class="lno">227</span></span>
<span id="line-S-56456-228"><span class="lno">228</span></span>
<span id="line-S-56456-229"><span class="lno">229</span></span>
<span id="line-S-56456-230">230</span>
<span id="line-S-56456-231"><span class="lno">231</span></span>
<span id="line-S-56456-232"><span class="lno">232</span></span>
<span id="line-S-56456-233"><span class="lno">233</span></span>
<span id="line-S-56456-234"><span class="lno">234</span></span>
<span id="line-S-56456-235">235</span>
<span id="line-S-56456-236"><span class="lno">236</span></span>
<span id="line-S-56456-237"><span class="lno">237</span></span>
<span id="line-S-56456-238"><span class="lno">238</span></span>
<span id="line-S-56456-239"><span class="lno">239</span></span>
<span id="line-S-56456-240">240</span>
<span id="line-S-56456-241"><span class="lno">241</span></span>
<span id="line-S-56456-242"><span class="lno">242</span></span>
<span id="line-S-56456-243"><span class="lno">243</span></span>
<span id="line-S-56456-244"><span class="lno">244</span></span>
<span id="line-S-56456-245">245</span>
<span id="line-S-56456-246"><span class="lno">246</span></span>
<span id="line-S-56456-247"><span class="lno">247</span></span>
<span id="line-S-56456-248"><span class="lno">248</span></span>
<span id="line-S-56456-249"><span class="lno">249</span></span>
<span id="line-S-56456-250">250</span>
<span id="line-S-56456-251"><span class="lno">251</span></span>
<span id="line-S-56456-252"><span class="lno">252</span></span>
<span id="line-S-56456-253"><span class="lno">253</span></span>
<span id="line-S-56456-254"><span class="lno">254</span></span>
<span id="line-S-56456-255">255</span>
<span id="line-S-56456-256"><span class="lno">256</span></span>
<span id="line-S-56456-257"><span class="lno">257</span></span>
<span id="line-S-56456-258"><span class="lno">258</span></span>
<span id="line-S-56456-259"><span class="lno">259</span></span>
<span id="line-S-56456-260">260</span>
<span id="line-S-56456-261"><span class="lno">261</span></span>
<span id="line-S-56456-262"><span class="lno">262</span></span>
<span id="line-S-56456-263"><span class="lno">263</span></span>
<span id="line-S-56456-264"><span class="lno">264</span></span>
<span id="line-S-56456-265">265</span>
<span id="line-S-56456-266"><span class="lno">266</span></span>
<span id="line-S-56456-267"><span class="lno">267</span></span>
<span id="line-S-56456-268"><span class="lno">268</span></span>
<span id="line-S-56456-269"><span class="lno">269</span></span>
<span id="line-S-56456-270">270</span>
<span id="line-S-56456-271"><span class="lno">271</span></span>
<span id="line-S-56456-272"><span class="lno">272</span></span>
<span id="line-S-56456-273"><span class="lno">273</span></span>
<span id="line-S-56456-274"><span class="lno">274</span></span>
<span id="line-S-56456-275">275</span>
<span id="line-S-56456-276"><span class="lno">276</span></span>
<span id="line-S-56456-277"><span class="lno">277</span></span>
<span id="line-S-56456-278"><span class="lno">278</span></span>
<span id="line-S-56456-279"><span class="lno">279</span></span>
<span id="line-S-56456-280">280</span>
<span id="line-S-56456-281"><span class="lno">281</span></span>
<span id="line-S-56456-282"><span class="lno">282</span></span>
<span id="line-S-56456-283"><span class="lno">283</span></span>
<span id="line-S-56456-284"><span class="lno">284</span></span>
<span id="line-S-56456-285">285</span>
<span id="line-S-56456-286"><span class="lno">286</span></span>
<span id="line-S-56456-287"><span class="lno">287</span></span>
<span id="line-S-56456-288"><span class="lno">288</span></span>
<span id="line-S-56456-289"><span class="lno">289</span></span>
<span id="line-S-56456-290">290</span>
<span id="line-S-56456-291"><span class="lno">291</span></span>
<span id="line-S-56456-292"><span class="lno">292</span></span>
<span id="line-S-56456-293"><span class="lno">293</span></span>
<span id="line-S-56456-294"><span class="lno">294</span></span>
<span id="line-S-56456-295">295</span>
<span id="line-S-56456-296"><span class="lno">296</span></span>
<span id="line-S-56456-297"><span class="lno">297</span></span>
<span id="line-S-56456-298"><span class="lno">298</span></span>
<span id="line-S-56456-299"><span class="lno">299</span></span>
<span id="line-S-56456-300">300</span>
<span id="line-S-56456-301"><span class="lno">301</span></span>
<span id="line-S-56456-302"><span class="lno">302</span></span>
<span id="line-S-56456-303"><span class="lno">303</span></span>
<span id="line-S-56456-304"><span class="lno">304</span></span>
<span id="line-S-56456-305">305</span>
<span id="line-S-56456-306"><span class="lno">306</span></span>
<span id="line-S-56456-307"><span class="lno">307</span></span>
<span id="line-S-56456-308"><span class="lno">308</span></span>
<span id="line-S-56456-309"><span class="lno">309</span></span>
<span id="line-S-56456-310">310</span>
<span id="line-S-56456-311"><span class="lno">311</span></span>
<span id="line-S-56456-312"><span class="lno">312</span></span>
<span id="line-S-56456-313"><span class="lno">313</span></span>
<span id="line-S-56456-314"><span class="lno">314</span></span>
<span id="line-S-56456-315">315</span>
<span id="line-S-56456-316"><span class="lno">316</span></span>
<span id="line-S-56456-317"><span class="lno">317</span></span>
<span id="line-S-56456-318"><span class="lno">318</span></span>
<span id="line-S-56456-319"><span class="lno">319</span></span>
<span id="line-S-56456-320">320</span>
<span id="line-S-56456-321"><span class="lno">321</span></span>
<span id="line-S-56456-322"><span class="lno">322</span></span>
<span id="line-S-56456-323"><span class="lno">323</span></span>
<span id="line-S-56456-324"><span class="lno">324</span></span>
<span id="line-S-56456-325">325</span>
<span id="line-S-56456-326"><span class="lno">326</span></span>
<span id="line-S-56456-327"><span class="lno">327</span></span>
<span id="line-S-56456-328"><span class="lno">328</span></span>
<span id="line-S-56456-329"><span class="lno">329</span></span>
<span id="line-S-56456-330">330</span>
<span id="line-S-56456-331"><span class="lno">331</span></span>
<span id="line-S-56456-332"><span class="lno">332</span></span>
<span id="line-S-56456-333"><span class="lno">333</span></span>
<span id="line-S-56456-334"><span class="lno">334</span></span>
<span id="line-S-56456-335">335</span>
<span id="line-S-56456-336"><span class="lno">336</span></span>
<span id="line-S-56456-337"><span class="lno">337</span></span>
<span id="line-S-56456-338"><span class="lno">338</span></span>
<span id="line-S-56456-339"><span class="lno">339</span></span>
<span id="line-S-56456-340">340</span>
<span id="line-S-56456-341"><span class="lno">341</span></span>
<span id="line-S-56456-342"><span class="lno">342</span></span>
<span id="line-S-56456-343"><span class="lno">343</span></span>
<span id="line-S-56456-344"><span class="lno">344</span></span>
<span id="line-S-56456-345">345</span>
<span id="line-S-56456-346"><span class="lno">346</span></span>
<span id="line-S-56456-347"><span class="lno">347</span></span>
<span id="line-S-56456-348"><span class="lno">348</span></span>
<span id="line-S-56456-349"><span class="lno">349</span></span>
<span id="line-S-56456-350">350</span>
<span id="line-S-56456-351"><span class="lno">351</span></span>
<span id="line-S-56456-352"><span class="lno">352</span></span>
<span id="line-S-56456-353"><span class="lno">353</span></span>
<span id="line-S-56456-354"><span class="lno">354</span></span>
<span id="line-S-56456-355">355</span>
<span id="line-S-56456-356"><span class="lno">356</span></span>
<span id="line-S-56456-357"><span class="lno">357</span></span>
<span id="line-S-56456-358"><span class="lno">358</span></span>
<span id="line-S-56456-359"><span class="lno">359</span></span>
<span id="line-S-56456-360">360</span>
<span id="line-S-56456-361"><span class="lno">361</span></span>
<span id="line-S-56456-362"><span class="lno">362</span></span>
<span id="line-S-56456-363"><span class="lno">363</span></span>
<span id="line-S-56456-364"><span class="lno">364</span></span>
<span id="line-S-56456-365">365</span>
<span id="line-S-56456-366"><span class="lno">366</span></span>
<span id="line-S-56456-367"><span class="lno">367</span></span>
<span id="line-S-56456-368"><span class="lno">368</span></span>
<span id="line-S-56456-369"><span class="lno">369</span></span>
<span id="line-S-56456-370">370</span>
<span id="line-S-56456-371"><span class="lno">371</span></span>
<span id="line-S-56456-372"><span class="lno">372</span></span>
<span id="line-S-56456-373"><span class="lno">373</span></span>
<span id="line-S-56456-374"><span class="lno">374</span></span>
<span id="line-S-56456-375">375</span>
<span id="line-S-56456-376"><span class="lno">376</span></span>
<span id="line-S-56456-377"><span class="lno">377</span></span>
<span id="line-S-56456-378"><span class="lno">378</span></span>
<span id="line-S-56456-379"><span class="lno">379</span></span>
<span id="line-S-56456-380">380</span>
<span id="line-S-56456-381"><span class="lno">381</span></span>
<span id="line-S-56456-382"><span class="lno">382</span></span>
<span id="line-S-56456-383"><span class="lno">383</span></span>
<span id="line-S-56456-384"><span class="lno">384</span></span>
<span id="line-S-56456-385">385</span>
<span id="line-S-56456-386"><span class="lno">386</span></span>
<span id="line-S-56456-387"><span class="lno">387</span></span>
<span id="line-S-56456-388"><span class="lno">388</span></span>
<span id="line-S-56456-389"><span class="lno">389</span></span>
<span id="line-S-56456-390">390</span>
<span id="line-S-56456-391"><span class="lno">391</span></span>
<span id="line-S-56456-392"><span class="lno">392</span></span>
<span id="line-S-56456-393"><span class="lno">393</span></span>
<span id="line-S-56456-394"><span class="lno">394</span></span>
<span id="line-S-56456-395">395</span>
<span id="line-S-56456-396"><span class="lno">396</span></span>
<span id="line-S-56456-397"><span class="lno">397</span></span>
<span id="line-S-56456-398"><span class="lno">398</span></span>
<span id="line-S-56456-399"><span class="lno">399</span></span>
<span id="line-S-56456-400">400</span>
<span id="line-S-56456-401"><span class="lno">401</span></span>
<span id="line-S-56456-402"><span class="lno">402</span></span>
<span id="line-S-56456-403"><span class="lno">403</span></span>
<span id="line-S-56456-404"><span class="lno">404</span></span>
<span id="line-S-56456-405">405</span>
<span id="line-S-56456-406"><span class="lno">406</span></span>
<span id="line-S-56456-407"><span class="lno">407</span></span>
<span id="line-S-56456-408"><span class="lno">408</span></span>
<span id="line-S-56456-409"><span class="lno">409</span></span>
<span id="line-S-56456-410">410</span>
<span id="line-S-56456-411"><span class="lno">411</span></span>
<span id="line-S-56456-412"><span class="lno">412</span></span>
<span id="line-S-56456-413"><span class="lno">413</span></span>
<span id="line-S-56456-414"><span class="lno">414</span></span>
<span id="line-S-56456-415">415</span>
<span id="line-S-56456-416"><span class="lno">416</span></span>
<span id="line-S-56456-417"><span class="lno">417</span></span>
<span id="line-S-56456-418"><span class="lno">418</span></span>
<span id="line-S-56456-419"><span class="lno">419</span></span>
<span id="line-S-56456-420">420</span>
<span id="line-S-56456-421"><span class="lno">421</span></span>
<span id="line-S-56456-422"><span class="lno">422</span></span>
<span id="line-S-56456-423"><span class="lno">423</span></span>
<span id="line-S-56456-424"><span class="lno">424</span></span>
<span id="line-S-56456-425">425</span>
<span id="line-S-56456-426"><span class="lno">426</span></span>
<span id="line-S-56456-427"><span class="lno">427</span></span>
<span id="line-S-56456-428"><span class="lno">428</span></span>
<span id="line-S-56456-429"><span class="lno">429</span></span>
<span id="line-S-56456-430">430</span>
<span id="line-S-56456-431"><span class="lno">431</span></span>
<span id="line-S-56456-432"><span class="lno">432</span></span>
<span id="line-S-56456-433"><span class="lno">433</span></span>
<span id="line-S-56456-434"><span class="lno">434</span></span>
<span id="line-S-56456-435">435</span>
<span id="line-S-56456-436"><span class="lno">436</span></span>
<span id="line-S-56456-437"><span class="lno">437</span></span>
<span id="line-S-56456-438"><span class="lno">438</span></span>
<span id="line-S-56456-439"><span class="lno">439</span></span>
<span id="line-S-56456-440">440</span>
<span id="line-S-56456-441"><span class="lno">441</span></span>
<span id="line-S-56456-442"><span class="lno">442</span></span>
<span id="line-S-56456-443"><span class="lno">443</span></span>
<span id="line-S-56456-444"><span class="lno">444</span></span>
<span id="line-S-56456-445">445</span>
<span id="line-S-56456-446"><span class="lno">446</span></span>
<span id="line-S-56456-447"><span class="lno">447</span></span>
<span id="line-S-56456-448"><span class="lno">448</span></span>
<span id="line-S-56456-449"><span class="lno">449</span></span>
<span id="line-S-56456-450">450</span>
<span id="line-S-56456-451"><span class="lno">451</span></span>
<span id="line-S-56456-452"><span class="lno">452</span></span>
<span id="line-S-56456-453"><span class="lno">453</span></span>
<span id="line-S-56456-454"><span class="lno">454</span></span>
<span id="line-S-56456-455">455</span>
<span id="line-S-56456-456"><span class="lno">456</span></span>
<span id="line-S-56456-457"><span class="lno">457</span></span>
<span id="line-S-56456-458"><span class="lno">458</span></span>
<span id="line-S-56456-459"><span class="lno">459</span></span>
<span id="line-S-56456-460">460</span>
<span id="line-S-56456-461"><span class="lno">461</span></span>
<span id="line-S-56456-462"><span class="lno">462</span></span>
<span id="line-S-56456-463"><span class="lno">463</span></span>
<span id="line-S-56456-464"><span class="lno">464</span></span>
<span id="line-S-56456-465">465</span>
<span id="line-S-56456-466"><span class="lno">466</span></span>
<span id="line-S-56456-467"><span class="lno">467</span></span>
<span id="line-S-56456-468"><span class="lno">468</span></span>
<span id="line-S-56456-469"><span class="lno">469</span></span>
<span id="line-S-56456-470">470</span>
<span id="line-S-56456-471"><span class="lno">471</span></span>
<span id="line-S-56456-472"><span class="lno">472</span></span>
<span id="line-S-56456-473"><span class="lno">473</span></span>
<span id="line-S-56456-474"><span class="lno">474</span></span>
<span id="line-S-56456-475">475</span>
<span id="line-S-56456-476"><span class="lno">476</span></span>
<span id="line-S-56456-477"><span class="lno">477</span></span>
<span id="line-S-56456-478"><span class="lno">478</span></span>
<span id="line-S-56456-479"><span class="lno">479</span></span>
<span id="line-S-56456-480">480</span>
<span id="line-S-56456-481"><span class="lno">481</span></span>
<span id="line-S-56456-482"><span class="lno">482</span></span>
<span id="line-S-56456-483"><span class="lno">483</span></span>
<span id="line-S-56456-484"><span class="lno">484</span></span>
<span id="line-S-56456-485">485</span>
<span id="line-S-56456-486"><span class="lno">486</span></span>
<span id="line-S-56456-487"><span class="lno">487</span></span>
<span id="line-S-56456-488"><span class="lno">488</span></span>
<span id="line-S-56456-489"><span class="lno">489</span></span>
<span id="line-S-56456-490">490</span>
<span id="line-S-56456-491"><span class="lno">491</span></span>
<span id="line-S-56456-492"><span class="lno">492</span></span>
<span id="line-S-56456-493"><span class="lno">493</span></span>
<span id="line-S-56456-494"><span class="lno">494</span></span>
<span id="line-S-56456-495">495</span>
<span id="line-S-56456-496"><span class="lno">496</span></span>
<span id="line-S-56456-497"><span class="lno">497</span></span>
<span id="line-S-56456-498"><span class="lno">498</span></span>
<span id="line-S-56456-499"><span class="lno">499</span></span>
<span id="line-S-56456-500">500</span>
<span id="line-S-56456-501"><span class="lno">501</span></span>
<span id="line-S-56456-502"><span class="lno">502</span></span>
<span id="line-S-56456-503"><span class="lno">503</span></span>
<span id="line-S-56456-504"><span class="lno">504</span></span>
<span id="line-S-56456-505">505</span>
<span id="line-S-56456-506"><span class="lno">506</span></span>
<span id="line-S-56456-507"><span class="lno">507</span></span>
<span id="line-S-56456-508"><span class="lno">508</span></span>
<span id="line-S-56456-509"><span class="lno">509</span></span>
<span id="line-S-56456-510">510</span>
<span id="line-S-56456-511"><span class="lno">511</span></span>
<span id="line-S-56456-512"><span class="lno">512</span></span>
<span id="line-S-56456-513"><span class="lno">513</span></span>
<span id="line-S-56456-514"><span class="lno">514</span></span>
<span id="line-S-56456-515">515</span>
<span id="line-S-56456-516"><span class="lno">516</span></span>
<span id="line-S-56456-517"><span class="lno">517</span></span>
<span id="line-S-56456-518"><span class="lno">518</span></span>
<span id="line-S-56456-519"><span class="lno">519</span></span>
<span id="line-S-56456-520">520</span>
<span id="line-S-56456-521"><span class="lno">521</span></span>
<span id="line-S-56456-522"><span class="lno">522</span></span>
<span id="line-S-56456-523"><span class="lno">523</span></span>
<span id="line-S-56456-524"><span class="lno">524</span></span>
<span id="line-S-56456-525">525</span>
<span id="line-S-56456-526"><span class="lno">526</span></span>
<span id="line-S-56456-527"><span class="lno">527</span></span>
<span id="line-S-56456-528"><span class="lno">528</span></span>
<span id="line-S-56456-529"><span class="lno">529</span></span>
<span id="line-S-56456-530">530</span>
<span id="line-S-56456-531"><span class="lno">531</span></span>
<span id="line-S-56456-532"><span class="lno">532</span></span>
<span id="line-S-56456-533"><span class="lno">533</span></span>
<span id="line-S-56456-534"><span class="lno">534</span></span>
<span id="line-S-56456-535">535</span>
<span id="line-S-56456-536"><span class="lno">536</span></span>
<span id="line-S-56456-537"><span class="lno">537</span></span>
<span id="line-S-56456-538"><span class="lno">538</span></span>
<span id="line-S-56456-539"><span class="lno">539</span></span>
<span id="line-S-56456-540">540</span>
<span id="line-S-56456-541"><span class="lno">541</span></span>
<span id="line-S-56456-542"><span class="lno">542</span></span>
<span id="line-S-56456-543"><span class="lno">543</span></span>
<span id="line-S-56456-544"><span class="lno">544</span></span>
<span id="line-S-56456-545">545</span>
<span id="line-S-56456-546"><span class="lno">546</span></span>
<span id="line-S-56456-547"><span class="lno">547</span></span>
<span id="line-S-56456-548"><span class="lno">548</span></span>
<span id="line-S-56456-549"><span class="lno">549</span></span>
<span id="line-S-56456-550">550</span>
<span id="line-S-56456-551"><span class="lno">551</span></span>
<span id="line-S-56456-552"><span class="lno">552</span></span>
<span id="line-S-56456-553"><span class="lno">553</span></span>
<span id="line-S-56456-554"><span class="lno">554</span></span>
<span id="line-S-56456-555">555</span>
<span id="line-S-56456-556"><span class="lno">556</span></span>
<span id="line-S-56456-557"><span class="lno">557</span></span>
<span id="line-S-56456-558"><span class="lno">558</span></span>
<span id="line-S-56456-559"><span class="lno">559</span></span>
<span id="line-S-56456-560">560</span>
<span id="line-S-56456-561"><span class="lno">561</span></span>
<span id="line-S-56456-562"><span class="lno">562</span></span>
<span id="line-S-56456-563"><span class="lno">563</span></span>
<span id="line-S-56456-564"><span class="lno">564</span></span>
<span id="line-S-56456-565">565</span>
<span id="line-S-56456-566"><span class="lno">566</span></span>
<span id="line-S-56456-567"><span class="lno">567</span></span>
<span id="line-S-56456-568"><span class="lno">568</span></span>
<span id="line-S-56456-569"><span class="lno">569</span></span>
<span id="line-S-56456-570">570</span>
<span id="line-S-56456-571"><span class="lno">571</span></span>
<span id="line-S-56456-572"><span class="lno">572</span></span>
<span id="line-S-56456-573"><span class="lno">573</span></span>
<span id="line-S-56456-574"><span class="lno">574</span></span>
<span id="line-S-56456-575">575</span>
<span id="line-S-56456-576"><span class="lno">576</span></span>
<span id="line-S-56456-577"><span class="lno">577</span></span>
<span id="line-S-56456-578"><span class="lno">578</span></span>
<span id="line-S-56456-579"><span class="lno">579</span></span>
<span id="line-S-56456-580">580</span>
<span id="line-S-56456-581"><span class="lno">581</span></span>
<span id="line-S-56456-582"><span class="lno">582</span></span>
<span id="line-S-56456-583"><span class="lno">583</span></span>
<span id="line-S-56456-584"><span class="lno">584</span></span>
<span id="line-S-56456-585">585</span>
<span id="line-S-56456-586"><span class="lno">586</span></span>
<span id="line-S-56456-587"><span class="lno">587</span></span>
<span id="line-S-56456-588"><span class="lno">588</span></span>
<span id="line-S-56456-589"><span class="lno">589</span></span>
<span id="line-S-56456-590">590</span>
<span id="line-S-56456-591"><span class="lno">591</span></span>
<span id="line-S-56456-592"><span class="lno">592</span></span>
<span id="line-S-56456-593"><span class="lno">593</span></span>
<span id="line-S-56456-594"><span class="lno">594</span></span>
<span id="line-S-56456-595">595</span>
<span id="line-S-56456-596"><span class="lno">596</span></span>
<span id="line-S-56456-597"><span class="lno">597</span></span>
<span id="line-S-56456-598"><span class="lno">598</span></span>
<span id="line-S-56456-599"><span class="lno">599</span></span>
<span id="line-S-56456-600">600</span>
<span id="line-S-56456-601"><span class="lno">601</span></span>
<span id="line-S-56456-602"><span class="lno">602</span></span>
<span id="line-S-56456-603"><span class="lno">603</span></span>
<span id="line-S-56456-604"><span class="lno">604</span></span>
<span id="line-S-56456-605">605</span>
<span id="line-S-56456-606"><span class="lno">606</span></span>
<span id="line-S-56456-607"><span class="lno">607</span></span>
<span id="line-S-56456-608"><span class="lno">608</span></span>
<span id="line-S-56456-609"><span class="lno">609</span></span>
<span id="line-S-56456-610">610</span>
<span id="line-S-56456-611"><span class="lno">611</span></span>
<span id="line-S-56456-612"><span class="lno">612</span></span>
<span id="line-S-56456-613"><span class="lno">613</span></span>
<span id="line-S-56456-614"><span class="lno">614</span></span>
<span id="line-S-56456-615">615</span>
<span id="line-S-56456-616"><span class="lno">616</span></span>
<span id="line-S-56456-617"><span class="lno">617</span></span>
<span id="line-S-56456-618"><span class="lno">618</span></span>
<span id="line-S-56456-619"><span class="lno">619</span></span>
<span id="line-S-56456-620">620</span>
<span id="line-S-56456-621"><span class="lno">621</span></span>
<span id="line-S-56456-622"><span class="lno">622</span></span>
<span id="line-S-56456-623"><span class="lno">623</span></span>
<span id="line-S-56456-624"><span class="lno">624</span></span>
<span id="line-S-56456-625">625</span>
<span id="line-S-56456-626"><span class="lno">626</span></span>
<span id="line-S-56456-627"><span class="lno">627</span></span>
<span id="line-S-56456-628"><span class="lno">628</span></span>
<span id="line-S-56456-629"><span class="lno">629</span></span>
<span id="line-S-56456-630">630</span>
<span id="line-S-56456-631"><span class="lno">631</span></span>
<span id="line-S-56456-632"><span class="lno">632</span></span>
<span id="line-S-56456-633"><span class="lno">633</span></span>
<span id="line-S-56456-634"><span class="lno">634</span></span>
<span id="line-S-56456-635">635</span>
<span id="line-S-56456-636"><span class="lno">636</span></span>
<span id="line-S-56456-637"><span class="lno">637</span></span>
<span id="line-S-56456-638"><span class="lno">638</span></span>
<span id="line-S-56456-639"><span class="lno">639</span></span>
<span id="line-S-56456-640">640</span>
<span id="line-S-56456-641"><span class="lno">641</span></span>
<span id="line-S-56456-642"><span class="lno">642</span></span>
<span id="line-S-56456-643"><span class="lno">643</span></span>
<span id="line-S-56456-644"><span class="lno">644</span></span>
<span id="line-S-56456-645">645</span>
<span id="line-S-56456-646"><span class="lno">646</span></span>
<span id="line-S-56456-647"><span class="lno">647</span></span>
<span id="line-S-56456-648"><span class="lno">648</span></span>
<span id="line-S-56456-649"><span class="lno">649</span></span>
<span id="line-S-56456-650">650</span>
<span id="line-S-56456-651"><span class="lno">651</span></span>
<span id="line-S-56456-652"><span class="lno">652</span></span>
<span id="line-S-56456-653"><span class="lno">653</span></span>
<span id="line-S-56456-654"><span class="lno">654</span></span>
<span id="line-S-56456-655">655</span>
<span id="line-S-56456-656"><span class="lno">656</span></span>
<span id="line-S-56456-657"><span class="lno">657</span></span>
<span id="line-S-56456-658"><span class="lno">658</span></span>
<span id="line-S-56456-659"><span class="lno">659</span></span>
<span id="line-S-56456-660">660</span>
<span id="line-S-56456-661"><span class="lno">661</span></span>
<span id="line-S-56456-662"><span class="lno">662</span></span>
<span id="line-S-56456-663"><span class="lno">663</span></span>
<span id="line-S-56456-664"><span class="lno">664</span></span>
<span id="line-S-56456-665">665</span>
<span id="line-S-56456-666"><span class="lno">666</span></span>
<span id="line-S-56456-667"><span class="lno">667</span></span>
<span id="line-S-56456-668"><span class="lno">668</span></span>
<span id="line-S-56456-669"><span class="lno">669</span></span>
<span id="line-S-56456-670">670</span>
<span id="line-S-56456-671"><span class="lno">671</span></span>
<span id="line-S-56456-672"><span class="lno">672</span></span>
<span id="line-S-56456-673"><span class="lno">673</span></span>
<span id="line-S-56456-674"><span class="lno">674</span></span>
<span id="line-S-56456-675">675</span>
<span id="line-S-56456-676"><span class="lno">676</span></span>
<span id="line-S-56456-677"><span class="lno">677</span></span>
<span id="line-S-56456-678"><span class="lno">678</span></span>
<span id="line-S-56456-679"><span class="lno">679</span></span>
<span id="line-S-56456-680">680</span>
<span id="line-S-56456-681"><span class="lno">681</span></span>
<span id="line-S-56456-682"><span class="lno">682</span></span>
<span id="line-S-56456-683"><span class="lno">683</span></span>
<span id="line-S-56456-684"><span class="lno">684</span></span>
<span id="line-S-56456-685">685</span>
<span id="line-S-56456-686"><span class="lno">686</span></span>
<span id="line-S-56456-687"><span class="lno">687</span></span>
<span id="line-S-56456-688"><span class="lno">688</span></span>
<span id="line-S-56456-689"><span class="lno">689</span></span>
<span id="line-S-56456-690">690</span>
<span id="line-S-56456-691"><span class="lno">691</span></span>
<span id="line-S-56456-692"><span class="lno">692</span></span>
<span id="line-S-56456-693"><span class="lno">693</span></span>
<span id="line-S-56456-694"><span class="lno">694</span></span>
<span id="line-S-56456-695">695</span>
<span id="line-S-56456-696"><span class="lno">696</span></span>
<span id="line-S-56456-697"><span class="lno">697</span></span>
<span id="line-S-56456-698"><span class="lno">698</span></span>
<span id="line-S-56456-699"><span class="lno">699</span></span>
<span id="line-S-56456-700">700</span>
<span id="line-S-56456-701"><span class="lno">701</span></span>
<span id="line-S-56456-702"><span class="lno">702</span></span>
<span id="line-S-56456-703"><span class="lno">703</span></span>
<span id="line-S-56456-704"><span class="lno">704</span></span>
<span id="line-S-56456-705">705</span>
<span id="line-S-56456-706"><span class="lno">706</span></span>
<span id="line-S-56456-707"><span class="lno">707</span></span>
<span id="line-S-56456-708"><span class="lno">708</span></span>
<span id="line-S-56456-709"><span class="lno">709</span></span>
<span id="line-S-56456-710">710</span>
<span id="line-S-56456-711"><span class="lno">711</span></span>
<span id="line-S-56456-712"><span class="lno">712</span></span>
<span id="line-S-56456-713"><span class="lno">713</span></span>
<span id="line-S-56456-714"><span class="lno">714</span></span>
<span id="line-S-56456-715">715</span>
<span id="line-S-56456-716"><span class="lno">716</span></span>
<span id="line-S-56456-717"><span class="lno">717</span></span>
<span id="line-S-56456-718"><span class="lno">718</span></span>
<span id="line-S-56456-719"><span class="lno">719</span></span>
<span id="line-S-56456-720">720</span>
<span id="line-S-56456-721"><span class="lno">721</span></span>
<span id="line-S-56456-722"><span class="lno">722</span></span>
<span id="line-S-56456-723"><span class="lno">723</span></span>
<span id="line-S-56456-724"><span class="lno">724</span></span>
<span id="line-S-56456-725">725</span>
<span id="line-S-56456-726"><span class="lno">726</span></span>
<span id="line-S-56456-727"><span class="lno">727</span></span>
<span id="line-S-56456-728"><span class="lno">728</span></span>
<span id="line-S-56456-729"><span class="lno">729</span></span>
<span id="line-S-56456-730">730</span>
<span id="line-S-56456-731"><span class="lno">731</span></span>
<span id="line-S-56456-732"><span class="lno">732</span></span>
<span id="line-S-56456-733"><span class="lno">733</span></span>
<span id="line-S-56456-734"><span class="lno">734</span></span>
<span id="line-S-56456-735">735</span>
<span id="line-S-56456-736"><span class="lno">736</span></span>
<span id="line-S-56456-737"><span class="lno">737</span></span>
<span id="line-S-56456-738"><span class="lno">738</span></span>
<span id="line-S-56456-739"><span class="lno">739</span></span>
<span id="line-S-56456-740">740</span>
<span id="line-S-56456-741"><span class="lno">741</span></span>
<span id="line-S-56456-742"><span class="lno">742</span></span>
<span id="line-S-56456-743"><span class="lno">743</span></span>
<span id="line-S-56456-744"><span class="lno">744</span></span>
<span id="line-S-56456-745">745</span>
<span id="line-S-56456-746"><span class="lno">746</span></span>
<span id="line-S-56456-747"><span class="lno">747</span></span>
<span id="line-S-56456-748"><span class="lno">748</span></span>
<span id="line-S-56456-749"><span class="lno">749</span></span>
<span id="line-S-56456-750">750</span>
<span id="line-S-56456-751"><span class="lno">751</span></span>
<span id="line-S-56456-752"><span class="lno">752</span></span>
<span id="line-S-56456-753"><span class="lno">753</span></span>
<span id="line-S-56456-754"><span class="lno">754</span></span>
<span id="line-S-56456-755">755</span>
<span id="line-S-56456-756"><span class="lno">756</span></span>
<span id="line-S-56456-757"><span class="lno">757</span></span>
<span id="line-S-56456-758"><span class="lno">758</span></span>
<span id="line-S-56456-759"><span class="lno">759</span></span>
<span id="line-S-56456-760">760</span>
<span id="line-S-56456-761"><span class="lno">761</span></span>
<span id="line-S-56456-762"><span class="lno">762</span></span>
<span id="line-S-56456-763"><span class="lno">763</span></span>
<span id="line-S-56456-764"><span class="lno">764</span></span>
<span id="line-S-56456-765">765</span>
<span id="line-S-56456-766"><span class="lno">766</span></span>
<span id="line-S-56456-767"><span class="lno">767</span></span>
<span id="line-S-56456-768"><span class="lno">768</span></span>
<span id="line-S-56456-769"><span class="lno">769</span></span>
<span id="line-S-56456-770">770</span>
<span id="line-S-56456-771"><span class="lno">771</span></span>
<span id="line-S-56456-772"><span class="lno">772</span></span>
<span id="line-S-56456-773"><span class="lno">773</span></span>
<span id="line-S-56456-774"><span class="lno">774</span></span>
<span id="line-S-56456-775">775</span>
<span id="line-S-56456-776"><span class="lno">776</span></span>
<span id="line-S-56456-777"><span class="lno">777</span></span>
<span id="line-S-56456-778"><span class="lno">778</span></span>
<span id="line-S-56456-779"><span class="lno">779</span></span>
<span id="line-S-56456-780">780</span>
<span id="line-S-56456-781"><span class="lno">781</span></span>
<span id="line-S-56456-782"><span class="lno">782</span></span>
<span id="line-S-56456-783"><span class="lno">783</span></span>
<span id="line-S-56456-784"><span class="lno">784</span></span>
<span id="line-S-56456-785">785</span>
<span id="line-S-56456-786"><span class="lno">786</span></span>
<span id="line-S-56456-787"><span class="lno">787</span></span>
<span id="line-S-56456-788"><span class="lno">788</span></span>
<span id="line-S-56456-789"><span class="lno">789</span></span>
<span id="line-S-56456-790">790</span>
<span id="line-S-56456-791"><span class="lno">791</span></span>
<span id="line-S-56456-792"><span class="lno">792</span></span>
<span id="line-S-56456-793"><span class="lno">793</span></span>
<span id="line-S-56456-794"><span class="lno">794</span></span>
<span id="line-S-56456-795">795</span>
<span id="line-S-56456-796"><span class="lno">796</span></span>
<span id="line-S-56456-797"><span class="lno">797</span></span>
<span id="line-S-56456-798"><span class="lno">798</span></span>
<span id="line-S-56456-799"><span class="lno">799</span></span>
<span id="line-S-56456-800">800</span>
<span id="line-S-56456-801"><span class="lno">801</span></span>
<span id="line-S-56456-802"><span class="lno">802</span></span>
<span id="line-S-56456-803"><span class="lno">803</span></span>
<span id="line-S-56456-804"><span class="lno">804</span></span>
<span id="line-S-56456-805">805</span>
<span id="line-S-56456-806"><span class="lno">806</span></span>
<span id="line-S-56456-807"><span class="lno">807</span></span>
<span id="line-S-56456-808"><span class="lno">808</span></span>
<span id="line-S-56456-809"><span class="lno">809</span></span>
<span id="line-S-56456-810">810</span>
<span id="line-S-56456-811"><span class="lno">811</span></span>
<span id="line-S-56456-812"><span class="lno">812</span></span>
<span id="line-S-56456-813"><span class="lno">813</span></span>
<span id="line-S-56456-814"><span class="lno">814</span></span>
<span id="line-S-56456-815">815</span>
<span id="line-S-56456-816"><span class="lno">816</span></span>
<span id="line-S-56456-817"><span class="lno">817</span></span>
<span id="line-S-56456-818"><span class="lno">818</span></span>
<span id="line-S-56456-819"><span class="lno">819</span></span>
<span id="line-S-56456-820">820</span>
<span id="line-S-56456-821"><span class="lno">821</span></span>
<span id="line-S-56456-822"><span class="lno">822</span></span>
<span id="line-S-56456-823"><span class="lno">823</span></span>
<span id="line-S-56456-824"><span class="lno">824</span></span>
<span id="line-S-56456-825">825</span>
<span id="line-S-56456-826"><span class="lno">826</span></span>
<span id="line-S-56456-827"><span class="lno">827</span></span>
<span id="line-S-56456-828"><span class="lno">828</span></span>
<span id="line-S-56456-829"><span class="lno">829</span></span>
<span id="line-S-56456-830">830</span>
<span id="line-S-56456-831"><span class="lno">831</span></span>
<span id="line-S-56456-832"><span class="lno">832</span></span>
<span id="line-S-56456-833"><span class="lno">833</span></span>
<span id="line-S-56456-834"><span class="lno">834</span></span>
<span id="line-S-56456-835">835</span>
<span id="line-S-56456-836"><span class="lno">836</span></span>
<span id="line-S-56456-837"><span class="lno">837</span></span>
<span id="line-S-56456-838"><span class="lno">838</span></span>
<span id="line-S-56456-839"><span class="lno">839</span></span>
<span id="line-S-56456-840">840</span>
<span id="line-S-56456-841"><span class="lno">841</span></span>
<span id="line-S-56456-842"><span class="lno">842</span></span>
<span id="line-S-56456-843"><span class="lno">843</span></span>
<span id="line-S-56456-844"><span class="lno">844</span></span>
<span id="line-S-56456-845">845</span>
<span id="line-S-56456-846"><span class="lno">846</span></span>
<span id="line-S-56456-847"><span class="lno">847</span></span>
<span id="line-S-56456-848"><span class="lno">848</span></span>
<span id="line-S-56456-849"><span class="lno">849</span></span>
<span id="line-S-56456-850">850</span>
<span id="line-S-56456-851"><span class="lno">851</span></span>
<span id="line-S-56456-852"><span class="lno">852</span></span>
<span id="line-S-56456-853"><span class="lno">853</span></span>
<span id="line-S-56456-854"><span class="lno">854</span></span>
<span id="line-S-56456-855">855</span>
<span id="line-S-56456-856"><span class="lno">856</span></span>
<span id="line-S-56456-857"><span class="lno">857</span></span>
<span id="line-S-56456-858"><span class="lno">858</span></span>
<span id="line-S-56456-859"><span class="lno">859</span></span>
<span id="line-S-56456-860">860</span>
<span id="line-S-56456-861"><span class="lno">861</span></span>
<span id="line-S-56456-862"><span class="lno">862</span></span>
<span id="line-S-56456-863"><span class="lno">863</span></span>
<span id="line-S-56456-864"><span class="lno">864</span></span>
<span id="line-S-56456-865">865</span>
<span id="line-S-56456-866"><span class="lno">866</span></span>
<span id="line-S-56456-867"><span class="lno">867</span></span>
<span id="line-S-56456-868"><span class="lno">868</span></span>
<span id="line-S-56456-869"><span class="lno">869</span></span>
<span id="line-S-56456-870">870</span>
<span id="line-S-56456-871"><span class="lno">871</span></span>
<span id="line-S-56456-872"><span class="lno">872</span></span>
<span id="line-S-56456-873"><span class="lno">873</span></span>
<span id="line-S-56456-874"><span class="lno">874</span></span>
<span id="line-S-56456-875">875</span>
<span id="line-S-56456-876"><span class="lno">876</span></span>
<span id="line-S-56456-877"><span class="lno">877</span></span>
<span id="line-S-56456-878"><span class="lno">878</span></span>
<span id="line-S-56456-879"><span class="lno">879</span></span>
<span id="line-S-56456-880">880</span>
<span id="line-S-56456-881"><span class="lno">881</span></span>
<span id="line-S-56456-882"><span class="lno">882</span></span>
<span id="line-S-56456-883"><span class="lno">883</span></span>
<span id="line-S-56456-884"><span class="lno">884</span></span>
<span id="line-S-56456-885">885</span>
<span id="line-S-56456-886"><span class="lno">886</span></span>
<span id="line-S-56456-887"><span class="lno">887</span></span>
<span id="line-S-56456-888"><span class="lno">888</span></span>
<span id="line-S-56456-889"><span class="lno">889</span></span>
<span id="line-S-56456-890">890</span>
<span id="line-S-56456-891"><span class="lno">891</span></span>
<span id="line-S-56456-892"><span class="lno">892</span></span>
<span id="line-S-56456-893"><span class="lno">893</span></span>
<span id="line-S-56456-894"><span class="lno">894</span></span>
<span id="line-S-56456-895">895</span>
<span id="line-S-56456-896"><span class="lno">896</span></span>
<span id="line-S-56456-897"><span class="lno">897</span></span>
<span id="line-S-56456-898"><span class="lno">898</span></span>
<span id="line-S-56456-899"><span class="lno">899</span></span>
<span id="line-S-56456-900">900</span>
<span id="line-S-56456-901"><span class="lno">901</span></span>
<span id="line-S-56456-902"><span class="lno">902</span></span>
<span id="line-S-56456-903"><span class="lno">903</span></span>
<span id="line-S-56456-904"><span class="lno">904</span></span>
<span id="line-S-56456-905">905</span>
<span id="line-S-56456-906"><span class="lno">906</span></span>
<span id="line-S-56456-907"><span class="lno">907</span></span>
<span id="line-S-56456-908"><span class="lno">908</span></span>
<span id="line-S-56456-909"><span class="lno">909</span></span>
<span id="line-S-56456-910">910</span>
<span id="line-S-56456-911"><span class="lno">911</span></span>
<span id="line-S-56456-912"><span class="lno">912</span></span>
<span id="line-S-56456-913"><span class="lno">913</span></span>
<span id="line-S-56456-914"><span class="lno">914</span></span>
<span id="line-S-56456-915">915</span>
<span id="line-S-56456-916"><span class="lno">916</span></span>
<span id="line-S-56456-917"><span class="lno">917</span></span>
<span id="line-S-56456-918"><span class="lno">918</span></span>
<span id="line-S-56456-919"><span class="lno">919</span></span>
<span id="line-S-56456-920">920</span>
<span id="line-S-56456-921"><span class="lno">921</span></span>
<span id="line-S-56456-922"><span class="lno">922</span></span>
<span id="line-S-56456-923"><span class="lno">923</span></span>
<span id="line-S-56456-924"><span class="lno">924</span></span>
<span id="line-S-56456-925">925</span>
<span id="line-S-56456-926"><span class="lno">926</span></span>
<span id="line-S-56456-927"><span class="lno">927</span></span>
<span id="line-S-56456-928"><span class="lno">928</span></span>
<span id="line-S-56456-929"><span class="lno">929</span></span>
<span id="line-S-56456-930">930</span>
<span id="line-S-56456-931"><span class="lno">931</span></span>
<span id="line-S-56456-932"><span class="lno">932</span></span>
<span id="line-S-56456-933"><span class="lno">933</span></span>
<span id="line-S-56456-934"><span class="lno">934</span></span>
<span id="line-S-56456-935">935</span>
<span id="line-S-56456-936"><span class="lno">936</span></span>
<span id="line-S-56456-937"><span class="lno">937</span></span>
<span id="line-S-56456-938"><span class="lno">938</span></span>
<span id="line-S-56456-939"><span class="lno">939</span></span>
<span id="line-S-56456-940">940</span>
<span id="line-S-56456-941"><span class="lno">941</span></span>
<span id="line-S-56456-942"><span class="lno">942</span></span>
<span id="line-S-56456-943"><span class="lno">943</span></span>
<span id="line-S-56456-944"><span class="lno">944</span></span>
<span id="line-S-56456-945">945</span>
<span id="line-S-56456-946"><span class="lno">946</span></span>
<span id="line-S-56456-947"><span class="lno">947</span></span>
<span id="line-S-56456-948"><span class="lno">948</span></span>
<span id="line-S-56456-949"><span class="lno">949</span></span>
<span id="line-S-56456-950">950</span>
<span id="line-S-56456-951"><span class="lno">951</span></span>
<span id="line-S-56456-952"><span class="lno">952</span></span>
<span id="line-S-56456-953"><span class="lno">953</span></span>
<span id="line-S-56456-954"><span class="lno">954</span></span>
<span id="line-S-56456-955">955</span>
<span id="line-S-56456-956"><span class="lno">956</span></span>
<span id="line-S-56456-957"><span class="lno">957</span></span>
<span id="line-S-56456-958"><span class="lno">958</span></span>
<span id="line-S-56456-959"><span class="lno">959</span></span>
<span id="line-S-56456-960">960</span>
<span id="line-S-56456-961"><span class="lno">961</span></span>
<span id="line-S-56456-962"><span class="lno">962</span></span>
<span id="line-S-56456-963"><span class="lno">963</span></span>
<span id="line-S-56456-964"><span class="lno">964</span></span>
<span id="line-S-56456-965">965</span>
<span id="line-S-56456-966"><span class="lno">966</span></span>
<span id="line-S-56456-967"><span class="lno">967</span></span>
<span id="line-S-56456-968"><span class="lno">968</span></span>
<span id="line-S-56456-969"><span class="lno">969</span></span>
<span id="line-S-56456-970">970</span>
<span id="line-S-56456-971"><span class="lno">971</span></span>
<span id="line-S-56456-972"><span class="lno">972</span></span>
<span id="line-S-56456-973"><span class="lno">973</span></span>
<span id="line-S-56456-974"><span class="lno">974</span></span>
<span id="line-S-56456-975">975</span>
<span id="line-S-56456-976"><span class="lno">976</span></span>
<span id="line-S-56456-977"><span class="lno">977</span></span>
<span id="line-S-56456-978"><span class="lno">978</span></span>
<span id="line-S-56456-979"><span class="lno">979</span></span>
<span id="line-S-56456-980">980</span>
<span id="line-S-56456-981"><span class="lno">981</span></span>
<span id="line-S-56456-982"><span class="lno">982</span></span>
<span id="line-S-56456-983"><span class="lno">983</span></span>
<span id="line-S-56456-984"><span class="lno">984</span></span>
<span id="line-S-56456-985">985</span>
<span id="line-S-56456-986"><span class="lno">986</span></span>
<span id="line-S-56456-987"><span class="lno">987</span></span>
<span id="line-S-56456-988"><span class="lno">988</span></span>
<span id="line-S-56456-989"><span class="lno">989</span></span>
<span id="line-S-56456-990">990</span>
<span id="line-S-56456-991"><span class="lno">991</span></span>
<span id="line-S-56456-992"><span class="lno">992</span></span>
<span id="line-S-56456-993"><span class="lno">993</span></span>
<span id="line-S-56456-994"><span class="lno">994</span></span>
<span id="line-S-56456-995">995</span>
<span id="line-S-56456-996"><span class="lno">996</span></span>
<span id="line-S-56456-997"><span class="lno">997</span></span>
<span id="line-S-56456-998"><span class="lno">998</span></span>
<span id="line-S-56456-999"><span class="lno">999</span></span>
<span id="line-S-56456-1000">1000</span>
<span id="line-S-56456-1001"><span class="lno">1001</span></span>
<span id="line-S-56456-1002"><span class="lno">1002</span></span>
<span id="line-S-56456-1003"><span class="lno">1003</span></span>
<span id="line-S-56456-1004"><span class="lno">1004</span></span>
<span id="line-S-56456-1005">1005</span>
<span id="line-S-56456-1006"><span class="lno">1006</span></span>
<span id="line-S-56456-1007"><span class="lno">1007</span></span>
<span id="line-S-56456-1008"><span class="lno">1008</span></span>
<span id="line-S-56456-1009"><span class="lno">1009</span></span>
<span id="line-S-56456-1010">1010</span>
<span id="line-S-56456-1011"><span class="lno">1011</span></span>
<span id="line-S-56456-1012"><span class="lno">1012</span></span>
<span id="line-S-56456-1013"><span class="lno">1013</span></span>
<span id="line-S-56456-1014"><span class="lno">1014</span></span>
<span id="line-S-56456-1015">1015</span>
<span id="line-S-56456-1016"><span class="lno">1016</span></span>
<span id="line-S-56456-1017"><span class="lno">1017</span></span>
<span id="line-S-56456-1018"><span class="lno">1018</span></span>
<span id="line-S-56456-1019"><span class="lno">1019</span></span>
<span id="line-S-56456-1020">1020</span>
<span id="line-S-56456-1021"><span class="lno">1021</span></span>
<span id="line-S-56456-1022"><span class="lno">1022</span></span>
<span id="line-S-56456-1023"><span class="lno">1023</span></span>
<span id="line-S-56456-1024"><span class="lno">1024</span></span>
<span id="line-S-56456-1025">1025</span>
<span id="line-S-56456-1026"><span class="lno">1026</span></span>
<span id="line-S-56456-1027"><span class="lno">1027</span></span>
<span id="line-S-56456-1028"><span class="lno">1028</span></span>
<span id="line-S-56456-1029"><span class="lno">1029</span></span>
<span id="line-S-56456-1030">1030</span>
<span id="line-S-56456-1031"><span class="lno">1031</span></span>
<span id="line-S-56456-1032"><span class="lno">1032</span></span>
<span id="line-S-56456-1033"><span class="lno">1033</span></span>
<span id="line-S-56456-1034"><span class="lno">1034</span></span>
<span id="line-S-56456-1035">1035</span>
<span id="line-S-56456-1036"><span class="lno">1036</span></span>
<span id="line-S-56456-1037"><span class="lno">1037</span></span>
<span id="line-S-56456-1038"><span class="lno">1038</span></span>
<span id="line-S-56456-1039"><span class="lno">1039</span></span>
<span id="line-S-56456-1040">1040</span>
<span id="line-S-56456-1041"><span class="lno">1041</span></span>
<span id="line-S-56456-1042"><span class="lno">1042</span></span>
<span id="line-S-56456-1043"><span class="lno">1043</span></span>
<span id="line-S-56456-1044"><span class="lno">1044</span></span>
<span id="line-S-56456-1045">1045</span>
<span id="line-S-56456-1046"><span class="lno">1046</span></span>
<span id="line-S-56456-1047"><span class="lno">1047</span></span>
<span id="line-S-56456-1048"><span class="lno">1048</span></span>
<span id="line-S-56456-1049"><span class="lno">1049</span></span>
<span id="line-S-56456-1050">1050</span>
<span id="line-S-56456-1051"><span class="lno">1051</span></span>
<span id="line-S-56456-1052"><span class="lno">1052</span></span>
<span id="line-S-56456-1053"><span class="lno">1053</span></span>
<span id="line-S-56456-1054"><span class="lno">1054</span></span>
<span id="line-S-56456-1055">1055</span>
<span id="line-S-56456-1056"><span class="lno">1056</span></span>
<span id="line-S-56456-1057"><span class="lno">1057</span></span>
<span id="line-S-56456-1058"><span class="lno">1058</span></span>
<span id="line-S-56456-1059"><span class="lno">1059</span></span>
<span id="line-S-56456-1060">1060</span>
<span id="line-S-56456-1061"><span class="lno">1061</span></span>
<span id="line-S-56456-1062"><span class="lno">1062</span></span>
<span id="line-S-56456-1063"><span class="lno">1063</span></span>
<span id="line-S-56456-1064"><span class="lno">1064</span></span>
<span id="line-S-56456-1065">1065</span>
<span id="line-S-56456-1066"><span class="lno">1066</span></span>
<span id="line-S-56456-1067"><span class="lno">1067</span></span>
<span id="line-S-56456-1068"><span class="lno">1068</span></span>
<span id="line-S-56456-1069"><span class="lno">1069</span></span>
<span id="line-S-56456-1070">1070</span>
<span id="line-S-56456-1071"><span class="lno">1071</span></span>
<span id="line-S-56456-1072"><span class="lno">1072</span></span>
<span id="line-S-56456-1073"><span class="lno">1073</span></span>
<span id="line-S-56456-1074"><span class="lno">1074</span></span>
<span id="line-S-56456-1075">1075</span>
<span id="line-S-56456-1076"><span class="lno">1076</span></span>
<span id="line-S-56456-1077"><span class="lno">1077</span></span>
<span id="line-S-56456-1078"><span class="lno">1078</span></span>
<span id="line-S-56456-1079"><span class="lno">1079</span></span>
<span id="line-S-56456-1080">1080</span>
<span id="line-S-56456-1081"><span class="lno">1081</span></span>
<span id="line-S-56456-1082"><span class="lno">1082</span></span>
<span id="line-S-56456-1083"><span class="lno">1083</span></span>
<span id="line-S-56456-1084"><span class="lno">1084</span></span>
<span id="line-S-56456-1085">1085</span>
<span id="line-S-56456-1086"><span class="lno">1086</span></span>
<span id="line-S-56456-1087"><span class="lno">1087</span></span>
<span id="line-S-56456-1088"><span class="lno">1088</span></span>
<span id="line-S-56456-1089"><span class="lno">1089</span></span>
<span id="line-S-56456-1090">1090</span>
<span id="line-S-56456-1091"><span class="lno">1091</span></span>
<span id="line-S-56456-1092"><span class="lno">1092</span></span>
<span id="line-S-56456-1093"><span class="lno">1093</span></span>
<span id="line-S-56456-1094"><span class="lno">1094</span></span>
<span id="line-S-56456-1095">1095</span>
<span id="line-S-56456-1096"><span class="lno">1096</span></span>
<span id="line-S-56456-1097"><span class="lno">1097</span></span>
<span id="line-S-56456-1098"><span class="lno">1098</span></span>
<span id="line-S-56456-1099"><span class="lno">1099</span></span>
<span id="line-S-56456-1100">1100</span>
<span id="line-S-56456-1101"><span class="lno">1101</span></span>
<span id="line-S-56456-1102"><span class="lno">1102</span></span>
<span id="line-S-56456-1103"><span class="lno">1103</span></span>
<span id="line-S-56456-1104"><span class="lno">1104</span></span>
<span id="line-S-56456-1105">1105</span>
<span id="line-S-56456-1106"><span class="lno">1106</span></span>
<span id="line-S-56456-1107"><span class="lno">1107</span></span>
<span id="line-S-56456-1108"><span class="lno">1108</span></span>
<span id="line-S-56456-1109"><span class="lno">1109</span></span>
<span id="line-S-56456-1110">1110</span>
<span id="line-S-56456-1111"><span class="lno">1111</span></span>
<span id="line-S-56456-1112"><span class="lno">1112</span></span>
<span id="line-S-56456-1113"><span class="lno">1113</span></span>
<span id="line-S-56456-1114"><span class="lno">1114</span></span>
<span id="line-S-56456-1115">1115</span>
<span id="line-S-56456-1116"><span class="lno">1116</span></span>
<span id="line-S-56456-1117"><span class="lno">1117</span></span>
<span id="line-S-56456-1118"><span class="lno">1118</span></span>
<span id="line-S-56456-1119"><span class="lno">1119</span></span>
<span id="line-S-56456-1120">1120</span>
<span id="line-S-56456-1121"><span class="lno">1121</span></span>
<span id="line-S-56456-1122"><span class="lno">1122</span></span>
<span id="line-S-56456-1123"><span class="lno">1123</span></span>
<span id="line-S-56456-1124"><span class="lno">1124</span></span>
<span id="line-S-56456-1125">1125</span>
<span id="line-S-56456-1126"><span class="lno">1126</span></span>
<span id="line-S-56456-1127"><span class="lno">1127</span></span>
<span id="line-S-56456-1128"><span class="lno">1128</span></span>
<span id="line-S-56456-1129"><span class="lno">1129</span></span>
<span id="line-S-56456-1130">1130</span>
<span id="line-S-56456-1131"><span class="lno">1131</span></span>
<span id="line-S-56456-1132"><span class="lno">1132</span></span>
<span id="line-S-56456-1133"><span class="lno">1133</span></span>
<span id="line-S-56456-1134"><span class="lno">1134</span></span>
<span id="line-S-56456-1135">1135</span>
<span id="line-S-56456-1136"><span class="lno">1136</span></span>
<span id="line-S-56456-1137"><span class="lno">1137</span></span>
<span id="line-S-56456-1138"><span class="lno">1138</span></span>
<span id="line-S-56456-1139"><span class="lno">1139</span></span>
<span id="line-S-56456-1140">1140</span>
<span id="line-S-56456-1141"><span class="lno">1141</span></span>
<span id="line-S-56456-1142"><span class="lno">1142</span></span>
<span id="line-S-56456-1143"><span class="lno">1143</span></span>
<span id="line-S-56456-1144"><span class="lno">1144</span></span>
<span id="line-S-56456-1145">1145</span>
<span id="line-S-56456-1146"><span class="lno">1146</span></span>
<span id="line-S-56456-1147"><span class="lno">1147</span></span>
<span id="line-S-56456-1148"><span class="lno">1148</span></span>
<span id="line-S-56456-1149"><span class="lno">1149</span></span>
<span id="line-S-56456-1150">1150</span>
<span id="line-S-56456-1151"><span class="lno">1151</span></span>
<span id="line-S-56456-1152"><span class="lno">1152</span></span>
<span id="line-S-56456-1153"><span class="lno">1153</span></span>
<span id="line-S-56456-1154"><span class="lno">1154</span></span>
<span id="line-S-56456-1155">1155</span>
<span id="line-S-56456-1156"><span class="lno">1156</span></span>
<span id="line-S-56456-1157"><span class="lno">1157</span></span>
<span id="line-S-56456-1158"><span class="lno">1158</span></span>
<span id="line-S-56456-1159"><span class="lno">1159</span></span>
<span id="line-S-56456-1160">1160</span>
<span id="line-S-56456-1161"><span class="lno">1161</span></span>
<span id="line-S-56456-1162"><span class="lno">1162</span></span>
<span id="line-S-56456-1163"><span class="lno">1163</span></span>
<span id="line-S-56456-1164"><span class="lno">1164</span></span>
<span id="line-S-56456-1165">1165</span>
<span id="line-S-56456-1166"><span class="lno">1166</span></span>
<span id="line-S-56456-1167"><span class="lno">1167</span></span>
<span id="line-S-56456-1168"><span class="lno">1168</span></span>
<span id="line-S-56456-1169"><span class="lno">1169</span></span>
<span id="line-S-56456-1170">1170</span>
<span id="line-S-56456-1171"><span class="lno">1171</span></span>
<span id="line-S-56456-1172"><span class="lno">1172</span></span>
<span id="line-S-56456-1173"><span class="lno">1173</span></span>
<span id="line-S-56456-1174"><span class="lno">1174</span></span>
<span id="line-S-56456-1175">1175</span>
<span id="line-S-56456-1176"><span class="lno">1176</span></span>
<span id="line-S-56456-1177"><span class="lno">1177</span></span>
<span id="line-S-56456-1178"><span class="lno">1178</span></span>
<span id="line-S-56456-1179"><span class="lno">1179</span></span>
<span id="line-S-56456-1180">1180</span>
<span id="line-S-56456-1181"><span class="lno">1181</span></span>
<span id="line-S-56456-1182"><span class="lno">1182</span></span>
<span id="line-S-56456-1183"><span class="lno">1183</span></span>
<span id="line-S-56456-1184"><span class="lno">1184</span></span>
<span id="line-S-56456-1185">1185</span>
<span id="line-S-56456-1186"><span class="lno">1186</span></span>
<span id="line-S-56456-1187"><span class="lno">1187</span></span>
<span id="line-S-56456-1188"><span class="lno">1188</span></span>
<span id="line-S-56456-1189"><span class="lno">1189</span></span>
<span id="line-S-56456-1190">1190</span>
<span id="line-S-56456-1191"><span class="lno">1191</span></span>
<span id="line-S-56456-1192"><span class="lno">1192</span></span>
<span id="line-S-56456-1193"><span class="lno">1193</span></span>
<span id="line-S-56456-1194"><span class="lno">1194</span></span>
<span id="line-S-56456-1195">1195</span>
<span id="line-S-56456-1196"><span class="lno">1196</span></span>
<span id="line-S-56456-1197"><span class="lno">1197</span></span>
<span id="line-S-56456-1198"><span class="lno">1198</span></span>
<span id="line-S-56456-1199"><span class="lno">1199</span></span>
<span id="line-S-56456-1200">1200</span>
<span id="line-S-56456-1201"><span class="lno">1201</span></span>
<span id="line-S-56456-1202"><span class="lno">1202</span></span>
<span id="line-S-56456-1203"><span class="lno">1203</span></span>
<span id="line-S-56456-1204"><span class="lno">1204</span></span>
<span id="line-S-56456-1205">1205</span>
<span id="line-S-56456-1206"><span class="lno">1206</span></span>
<span id="line-S-56456-1207"><span class="lno">1207</span></span>
<span id="line-S-56456-1208"><span class="lno">1208</span></span>
<span id="line-S-56456-1209"><span class="lno">1209</span></span>
<span id="line-S-56456-1210">1210</span>
<span id="line-S-56456-1211"><span class="lno">1211</span></span>
<span id="line-S-56456-1212"><span class="lno">1212</span></span>
<span id="line-S-56456-1213"><span class="lno">1213</span></span>
<span id="line-S-56456-1214"><span class="lno">1214</span></span>
<span id="line-S-56456-1215">1215</span>
<span id="line-S-56456-1216"><span class="lno">1216</span></span>
<span id="line-S-56456-1217"><span class="lno">1217</span></span>
<span id="line-S-56456-1218"><span class="lno">1218</span></span>
<span id="line-S-56456-1219"><span class="lno">1219</span></span>
<span id="line-S-56456-1220">1220</span>
<span id="line-S-56456-1221"><span class="lno">1221</span></span>
<span id="line-S-56456-1222"><span class="lno">1222</span></span>
<span id="line-S-56456-1223"><span class="lno">1223</span></span>
<span id="line-S-56456-1224"><span class="lno">1224</span></span>
<span id="line-S-56456-1225">1225</span>
<span id="line-S-56456-1226"><span class="lno">1226</span></span>
<span id="line-S-56456-1227"><span class="lno">1227</span></span>
<span id="line-S-56456-1228"><span class="lno">1228</span></span>
<span id="line-S-56456-1229"><span class="lno">1229</span></span>
<span id="line-S-56456-1230">1230</span>
<span id="line-S-56456-1231"><span class="lno">1231</span></span>
<span id="line-S-56456-1232"><span class="lno">1232</span></span>
<span id="line-S-56456-1233"><span class="lno">1233</span></span>
<span id="line-S-56456-1234"><span class="lno">1234</span></span>
<span id="line-S-56456-1235">1235</span>
<span id="line-S-56456-1236"><span class="lno">1236</span></span>
<span id="line-S-56456-1237"><span class="lno">1237</span></span>
<span id="line-S-56456-1238"><span class="lno">1238</span></span>
<span id="line-S-56456-1239"><span class="lno">1239</span></span>
<span id="line-S-56456-1240">1240</span>
<span id="line-S-56456-1241"><span class="lno">1241</span></span>
<span id="line-S-56456-1242"><span class="lno">1242</span></span>
<span id="line-S-56456-1243"><span class="lno">1243</span></span>
<span id="line-S-56456-1244"><span class="lno">1244</span></span>
<span id="line-S-56456-1245">1245</span>
<span id="line-S-56456-1246"><span class="lno">1246</span></span>
<span id="line-S-56456-1247"><span class="lno">1247</span></span>
<span id="line-S-56456-1248"><span class="lno">1248</span></span>
<span id="line-S-56456-1249"><span class="lno">1249</span></span>
<span id="line-S-56456-1250">1250</span>
<span id="line-S-56456-1251"><span class="lno">1251</span></span>
<span id="line-S-56456-1252"><span class="lno">1252</span></span>
<span id="line-S-56456-1253"><span class="lno">1253</span></span>
<span id="line-S-56456-1254"><span class="lno">1254</span></span>
<span id="line-S-56456-1255">1255</span>
<span id="line-S-56456-1256"><span class="lno">1256</span></span>
<span id="line-S-56456-1257"><span class="lno">1257</span></span>
<span id="line-S-56456-1258"><span class="lno">1258</span></span>
<span id="line-S-56456-1259"><span class="lno">1259</span></span>
<span id="line-S-56456-1260">1260</span>
<span id="line-S-56456-1261"><span class="lno">1261</span></span>
<span id="line-S-56456-1262"><span class="lno">1262</span></span>
<span id="line-S-56456-1263"><span class="lno">1263</span></span>
<span id="line-S-56456-1264"><span class="lno">1264</span></span>
<span id="line-S-56456-1265">1265</span>
<span id="line-S-56456-1266"><span class="lno">1266</span></span>
<span id="line-S-56456-1267"><span class="lno">1267</span></span>
<span id="line-S-56456-1268"><span class="lno">1268</span></span>
<span id="line-S-56456-1269"><span class="lno">1269</span></span>
<span id="line-S-56456-1270">1270</span>
<span id="line-S-56456-1271"><span class="lno">1271</span></span>
<span id="line-S-56456-1272"><span class="lno">1272</span></span>
<span id="line-S-56456-1273"><span class="lno">1273</span></span>
<span id="line-S-56456-1274"><span class="lno">1274</span></span>
<span id="line-S-56456-1275">1275</span>
<span id="line-S-56456-1276"><span class="lno">1276</span></span>
<span id="line-S-56456-1277"><span class="lno">1277</span></span>
<span id="line-S-56456-1278"><span class="lno">1278</span></span>
<span id="line-S-56456-1279"><span class="lno">1279</span></span>
<span id="line-S-56456-1280">1280</span>
<span id="line-S-56456-1281"><span class="lno">1281</span></span>
<span id="line-S-56456-1282"><span class="lno">1282</span></span>
<span id="line-S-56456-1283"><span class="lno">1283</span></span>
<span id="line-S-56456-1284"><span class="lno">1284</span></span>
<span id="line-S-56456-1285">1285</span>
<span id="line-S-56456-1286"><span class="lno">1286</span></span>
<span id="line-S-56456-1287"><span class="lno">1287</span></span>
<span id="line-S-56456-1288"><span class="lno">1288</span></span>
<span id="line-S-56456-1289"><span class="lno">1289</span></span>
<span id="line-S-56456-1290">1290</span>
<span id="line-S-56456-1291"><span class="lno">1291</span></span>
<span id="line-S-56456-1292"><span class="lno">1292</span></span>
<span id="line-S-56456-1293"><span class="lno">1293</span></span>
<span id="line-S-56456-1294"><span class="lno">1294</span></span>
<span id="line-S-56456-1295">1295</span>
<span id="line-S-56456-1296"><span class="lno">1296</span></span>
<span id="line-S-56456-1297"><span class="lno">1297</span></span>
<span id="line-S-56456-1298"><span class="lno">1298</span></span>
<span id="line-S-56456-1299"><span class="lno">1299</span></span>
<span id="line-S-56456-1300">1300</span>
<span id="line-S-56456-1301"><span class="lno">1301</span></span>
<span id="line-S-56456-1302"><span class="lno">1302</span></span>
<span id="line-S-56456-1303"><span class="lno">1303</span></span>
<span id="line-S-56456-1304"><span class="lno">1304</span></span>
<span id="line-S-56456-1305">1305</span>
<span id="line-S-56456-1306"><span class="lno">1306</span></span>
<span id="line-S-56456-1307"><span class="lno">1307</span></span>
<span id="line-S-56456-1308"><span class="lno">1308</span></span>
<span id="line-S-56456-1309"><span class="lno">1309</span></span>
<span id="line-S-56456-1310">1310</span>
<span id="line-S-56456-1311"><span class="lno">1311</span></span>
<span id="line-S-56456-1312"><span class="lno">1312</span></span>
<span id="line-S-56456-1313"><span class="lno">1313</span></span>
<span id="line-S-56456-1314"><span class="lno">1314</span></span>
<span id="line-S-56456-1315">1315</span>
<span id="line-S-56456-1316"><span class="lno">1316</span></span>
<span id="line-S-56456-1317"><span class="lno">1317</span></span>
<span id="line-S-56456-1318"><span class="lno">1318</span></span>
<span id="line-S-56456-1319"><span class="lno">1319</span></span>
<span id="line-S-56456-1320">1320</span>
<span id="line-S-56456-1321"><span class="lno">1321</span></span>
<span id="line-S-56456-1322"><span class="lno">1322</span></span>
<span id="line-S-56456-1323"><span class="lno">1323</span></span>
<span id="line-S-56456-1324"><span class="lno">1324</span></span>
<span id="line-S-56456-1325">1325</span>
<span id="line-S-56456-1326"><span class="lno">1326</span></span>
<span id="line-S-56456-1327"><span class="lno">1327</span></span>
<span id="line-S-56456-1328"><span class="lno">1328</span></span>
<span id="line-S-56456-1329"><span class="lno">1329</span></span>
<span id="line-S-56456-1330">1330</span>
<span id="line-S-56456-1331"><span class="lno">1331</span></span>
<span id="line-S-56456-1332"><span class="lno">1332</span></span>
<span id="line-S-56456-1333"><span class="lno">1333</span></span>
<span id="line-S-56456-1334"><span class="lno">1334</span></span>
<span id="line-S-56456-1335">1335</span>
<span id="line-S-56456-1336"><span class="lno">1336</span></span>
<span id="line-S-56456-1337"><span class="lno">1337</span></span>
<span id="line-S-56456-1338"><span class="lno">1338</span></span>
<span id="line-S-56456-1339"><span class="lno">1339</span></span>
<span id="line-S-56456-1340">1340</span>
<span id="line-S-56456-1341"><span class="lno">1341</span></span>
<span id="line-S-56456-1342"><span class="lno">1342</span></span>
<span id="line-S-56456-1343"><span class="lno">1343</span></span>
<span id="line-S-56456-1344"><span class="lno">1344</span></span>
<span id="line-S-56456-1345">1345</span>
<span id="line-S-56456-1346"><span class="lno">1346</span></span>
<span id="line-S-56456-1347"><span class="lno">1347</span></span>
<span id="line-S-56456-1348"><span class="lno">1348</span></span>
<span id="line-S-56456-1349"><span class="lno">1349</span></span>
<span id="line-S-56456-1350">1350</span>
<span id="line-S-56456-1351"><span class="lno">1351</span></span>
<span id="line-S-56456-1352"><span class="lno">1352</span></span>
<span id="line-S-56456-1353"><span class="lno">1353</span></span>
<span id="line-S-56456-1354"><span class="lno">1354</span></span>
<span id="line-S-56456-1355">1355</span>
<span id="line-S-56456-1356"><span class="lno">1356</span></span>
<span id="line-S-56456-1357"><span class="lno">1357</span></span>
<span id="line-S-56456-1358"><span class="lno">1358</span></span>
<span id="line-S-56456-1359"><span class="lno">1359</span></span>
<span id="line-S-56456-1360">1360</span>
<span id="line-S-56456-1361"><span class="lno">1361</span></span>
<span id="line-S-56456-1362"><span class="lno">1362</span></span>
<span id="line-S-56456-1363"><span class="lno">1363</span></span>
<span id="line-S-56456-1364"><span class="lno">1364</span></span>
<span id="line-S-56456-1365">1365</span>
<span id="line-S-56456-1366"><span class="lno">1366</span></span>
<span id="line-S-56456-1367"><span class="lno">1367</span></span>
<span id="line-S-56456-1368"><span class="lno">1368</span></span>
<span id="line-S-56456-1369"><span class="lno">1369</span></span>
<span id="line-S-56456-1370">1370</span>
<span id="line-S-56456-1371"><span class="lno">1371</span></span>
<span id="line-S-56456-1372"><span class="lno">1372</span></span>
<span id="line-S-56456-1373"><span class="lno">1373</span></span>
<span id="line-S-56456-1374"><span class="lno">1374</span></span>
<span id="line-S-56456-1375">1375</span>
<span id="line-S-56456-1376"><span class="lno">1376</span></span>
<span id="line-S-56456-1377"><span class="lno">1377</span></span>
<span id="line-S-56456-1378"><span class="lno">1378</span></span>
<span id="line-S-56456-1379"><span class="lno">1379</span></span>
<span id="line-S-56456-1380">1380</span>
<span id="line-S-56456-1381"><span class="lno">1381</span></span>
<span id="line-S-56456-1382"><span class="lno">1382</span></span>
<span id="line-S-56456-1383"><span class="lno">1383</span></span>
<span id="line-S-56456-1384"><span class="lno">1384</span></span>
<span id="line-S-56456-1385">1385</span>
<span id="line-S-56456-1386"><span class="lno">1386</span></span>
<span id="line-S-56456-1387"><span class="lno">1387</span></span>
<span id="line-S-56456-1388"><span class="lno">1388</span></span>
<span id="line-S-56456-1389"><span class="lno">1389</span></span>
<span id="line-S-56456-1390">1390</span>
<span id="line-S-56456-1391"><span class="lno">1391</span></span>
<span id="line-S-56456-1392"><span class="lno">1392</span></span>
<span id="line-S-56456-1393"><span class="lno">1393</span></span>
<span id="line-S-56456-1394"><span class="lno">1394</span></span>
<span id="line-S-56456-1395">1395</span>
<span id="line-S-56456-1396"><span class="lno">1396</span></span>
<span id="line-S-56456-1397"><span class="lno">1397</span></span>
<span id="line-S-56456-1398"><span class="lno">1398</span></span>
<span id="line-S-56456-1399"><span class="lno">1399</span></span>
<span id="line-S-56456-1400">1400</span>
<span id="line-S-56456-1401"><span class="lno">1401</span></span>
<span id="line-S-56456-1402"><span class="lno">1402</span></span>
<span id="line-S-56456-1403"><span class="lno">1403</span></span>
<span id="line-S-56456-1404"><span class="lno">1404</span></span>
<span id="line-S-56456-1405">1405</span>
<span id="line-S-56456-1406"><span class="lno">1406</span></span>
<span id="line-S-56456-1407"><span class="lno">1407</span></span>
<span id="line-S-56456-1408"><span class="lno">1408</span></span>
<span id="line-S-56456-1409"><span class="lno">1409</span></span>
<span id="line-S-56456-1410">1410</span>
<span id="line-S-56456-1411"><span class="lno">1411</span></span>
<span id="line-S-56456-1412"><span class="lno">1412</span></span>
<span id="line-S-56456-1413"><span class="lno">1413</span></span>
<span id="line-S-56456-1414"><span class="lno">1414</span></span>
<span id="line-S-56456-1415">1415</span>
<span id="line-S-56456-1416"><span class="lno">1416</span></span>
<span id="line-S-56456-1417"><span class="lno">1417</span></span>
<span id="line-S-56456-1418"><span class="lno">1418</span></span>
<span id="line-S-56456-1419"><span class="lno">1419</span></span>
<span id="line-S-56456-1420">1420</span>
<span id="line-S-56456-1421"><span class="lno">1421</span></span>
<span id="line-S-56456-1422"><span class="lno">1422</span></span>
<span id="line-S-56456-1423"><span class="lno">1423</span></span>
<span id="line-S-56456-1424"><span class="lno">1424</span></span>
<span id="line-S-56456-1425">1425</span>
<span id="line-S-56456-1426"><span class="lno">1426</span></span>
<span id="line-S-56456-1427"><span class="lno">1427</span></span>
<span id="line-S-56456-1428"><span class="lno">1428</span></span>
<span id="line-S-56456-1429"><span class="lno">1429</span></span>
<span id="line-S-56456-1430">1430</span>
<span id="line-S-56456-1431"><span class="lno">1431</span></span>
<span id="line-S-56456-1432"><span class="lno">1432</span></span>
<span id="line-S-56456-1433"><span class="lno">1433</span></span>
<span id="line-S-56456-1434"><span class="lno">1434</span></span>
<span id="line-S-56456-1435">1435</span>
<span id="line-S-56456-1436"><span class="lno">1436</span></span>
<span id="line-S-56456-1437"><span class="lno">1437</span></span>
<span id="line-S-56456-1438"><span class="lno">1438</span></span>
<span id="line-S-56456-1439"><span class="lno">1439</span></span>
<span id="line-S-56456-1440">1440</span>
<span id="line-S-56456-1441"><span class="lno">1441</span></span>
<span id="line-S-56456-1442"><span class="lno">1442</span></span>
<span id="line-S-56456-1443"><span class="lno">1443</span></span>
<span id="line-S-56456-1444"><span class="lno">1444</span></span>
<span id="line-S-56456-1445">1445</span>
<span id="line-S-56456-1446"><span class="lno">1446</span></span>
<span id="line-S-56456-1447"><span class="lno">1447</span></span>
<span id="line-S-56456-1448"><span class="lno">1448</span></span>
<span id="line-S-56456-1449"><span class="lno">1449</span></span>
<span id="line-S-56456-1450">1450</span>
<span id="line-S-56456-1451"><span class="lno">1451</span></span>
<span id="line-S-56456-1452"><span class="lno">1452</span></span>
</pre></td><td valign="top"><pre><code class="language-xml">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                xmlns:array="http://www.w3.org/2005/xpath-functions/array"
                xmlns:db="http://docbook.org/ns/docbook"
                xmlns:dbe="http://docbook.org/ns/docbook/errors"
                xmlns:f="http://docbook.org/ns/docbook/functions"
                xmlns:fp="http://docbook.org/ns/docbook/functions/private"
                xmlns:g="http://docbook.org/ns/docbook/ghost"
                xmlns:h="http://www.w3.org/1999/xhtml"
                xmlns:m="http://docbook.org/ns/docbook/modes"
                xmlns:map="http://www.w3.org/2005/xpath-functions/map"
                xmlns:mp="http://docbook.org/ns/docbook/modes/private"
                xmlns:t="http://docbook.org/ns/docbook/templates"
                xmlns:tp="http://docbook.org/ns/docbook/templates/private"
                xmlns:v="http://docbook.org/ns/docbook/variables"
                xmlns:vp="http://docbook.org/ns/docbook/variables/private"
	        xmlns:xlink="http://www.w3.org/1999/xlink"
                xmlns:xs="http://www.w3.org/2001/XMLSchema"
                xmlns="http://www.w3.org/1999/xhtml"
                default-mode="m:docbook"
                exclude-result-prefixes="#all"
                version="3.0"&gt;

&lt;!-- N.B. There's no winning here. It would be nice to inject callouts
     into the pre-formatted sources, but if we do that, the sources
     don't get processed in the original document tree (so id/idref
     links and such won't work). If, instead, we process the tree
     first, then we have to do the flattening and other manipulations
     in the formatted HTML over which we have less control. But having
     the elements processed in the correct tree seems like a real
     requirement, so we'll do the flatting work in the formatted
     results.

     Note also: syntax highlighting is incompatible with embedded markup.
     If syntax highlighting is applied, it is applied to the string value
     of the verbatim region.
--&gt;

&lt;xsl:import href="highlight.xsl"/&gt;

&lt;!-- When counting characters in a line, these characters are
     invisible, just skip right past them.
     FIXME: get an authoritative list of invisible characters
     this is just a small selection of ones that occurred to me.
--&gt;
&lt;xsl:variable name="v:invisible-characters"
              select="('&amp;#xFE00;', '&amp;#xFE01;', '&amp;#xFE02;', '&amp;#xFE03;', 
                       '&amp;#xFE04;', '&amp;#xFE05;', '&amp;#xFE06;', '&amp;#xFE07;', 
                       '&amp;#xFE08;', '&amp;#xFE09;', '&amp;#xFE0A;', '&amp;#xFE0B;', 
                       '&amp;#xFE0C;', '&amp;#xFE0D;', '&amp;#xFE0E;', '&amp;#xFE0F;', 
                       '&amp;#x200B;')"/&gt;

&lt;!-- FIXME: rename 'highlight' to 'callout' for consistency --&gt;

&lt;xsl:variable name="v:verbatim-properties" as="array(map(*))"&gt;
  &lt;xsl:variable name="maps" as="map(*)+"&gt;
    &lt;xsl:for-each select="('address', 'literallayout',
                           'programlisting', 'programlistingco',
                           'screen', 'screenco',
                           'synopsis', 'funcsynopsisinfo', 'classsynopsisinfo')"&gt;
      &lt;xsl:variable name="style" select="if (. = $v:verbatim-line-style)
                                         then 'lines'
                                         else if (. = $v:verbatim-plain-style)
                                              then 'plain'
                                              else 'raw'"/&gt;
      &lt;xsl:map&gt;
        &lt;xsl:map-entry key="'xpath'" select="'self::db:' || ."/&gt;
        &lt;xsl:map-entry key="'style'" select="$style"/&gt;
        &lt;xsl:map-entry key="'highlight'"
                       select="if ($style = 'lines')
                               then $v:verbatim-callouts
                               else ()"/&gt;
        &lt;xsl:map-entry key="'numbered'"
                       select=". = $v:verbatim-numbered-elements"/&gt;
      &lt;/xsl:map&gt;
    &lt;/xsl:for-each&gt;
  &lt;/xsl:variable&gt;
  &lt;xsl:sequence select="array { $maps }"/&gt;
&lt;/xsl:variable&gt;

&lt;xsl:template match="db:programlistingco|db:screenco"&gt;
  &lt;xsl:param name="style" as="xs:string" select="f:verbatim-style(.)"/&gt;
  &lt;xsl:param name="highlight" as="xs:string*" select="f:verbatim-highlight(.)"/&gt;
  &lt;xsl:param name="numbered" as="xs:boolean" select="f:verbatim-numbered(.)"/&gt;
  &lt;xsl:param name="trim-trailing" as="xs:boolean" select="f:verbatim-trim-trailing(.)"/&gt;

  &lt;xsl:variable name="areaspec" as="element(db:areaspec)?"&gt;
    &lt;xsl:choose&gt;
      &lt;xsl:when test="$verbatim-syntax-highlighter != 'pygments'"&gt;
        &lt;xsl:message select="'Processing', local-name(.), 'is only supported with Pygments'"/&gt;
      &lt;/xsl:when&gt;
      &lt;xsl:otherwise&gt;
        &lt;xsl:sequence select="db:areaspec"/&gt;
      &lt;/xsl:otherwise&gt;
    &lt;/xsl:choose&gt;
  &lt;/xsl:variable&gt;

  &lt;p xsl:use-when="'render-verbatim' = $v:debug"
     class="debug" xsl:expand-text="yes"&gt;Verbatim environment formatted with
  &lt;code&gt;style={$style}&lt;/code&gt;, &lt;code&gt;numbered={$numbered}&lt;/code&gt;, and
  &lt;code&gt;highlight={string-join($highlight, ',')}&lt;/code&gt;.&lt;/p&gt;

  &lt;div&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;

    &lt;xsl:apply-templates select="db:programlisting|db:screen"&gt;
      &lt;xsl:with-param name="style" select="$style"/&gt;
      &lt;xsl:with-param name="highlight" select="$highlight"/&gt;
      &lt;xsl:with-param name="numbered" select="$numbered"/&gt;
      &lt;xsl:with-param name="inject" select="$areaspec"/&gt;
      &lt;xsl:with-param name="trim-trailing" select="$trim-trailing"/&gt;
    &lt;/xsl:apply-templates&gt;

    &lt;xsl:apply-templates select="db:calloutlist"/&gt;
  &lt;/div&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:programlisting|db:screen
                     |db:synopsis
                     |db:funcsynopsisinfo
                     |db:classsynopsisinfo
                     |db:literallayout|db:address"&gt;
  &lt;xsl:param name="style" as="xs:string" select="f:verbatim-style(.)"/&gt;
  &lt;xsl:param name="highlight" as="xs:string*" select="f:verbatim-highlight(.)"/&gt;
  &lt;xsl:param name="numbered" as="xs:boolean" select="f:verbatim-numbered(.)"/&gt;
  &lt;xsl:param name="trim-trailing" as="xs:boolean" select="f:verbatim-trim-trailing(.)"/&gt;
  &lt;xsl:param name="inject" as="item()?" select="()"/&gt;

  &lt;xsl:message use-when="'verbatim' = $v:debug"
               select="'Verbatim: ' || node-name(.)
                       || (if (@xml:id) then '/'||@xml:id else '')
                       || ' ' || $style
                       || ' : ' || string-join($highlight,',')
                       || ' : ' || $numbered"/&gt;

  &lt;!--
  &lt;xsl:message&gt;STY:&lt;xsl:value-of select="$style"/&gt;&lt;/xsl:message&gt;
  &lt;xsl:message&gt;CTX:&lt;xsl:sequence select="."/&gt;&lt;/xsl:message&gt;
  &lt;xsl:message&gt;INJ:&lt;xsl:sequence select="$inject"/&gt;&lt;/xsl:message&gt;
  --&gt;

  &lt;xsl:variable name="injectarr" select="fp:injection-array($inject)"/&gt;

  &lt;xsl:call-template name="tp:verbatim"&gt;
    &lt;xsl:with-param name="style" select="$style"/&gt;
    &lt;xsl:with-param name="highlight" select="$highlight"/&gt;
    &lt;xsl:with-param name="numbered" select="$numbered"/&gt;
    &lt;xsl:with-param name="trim-trailing" select="$trim-trailing"/&gt;
    &lt;xsl:with-param name="inject" select="$injectarr"/&gt;
  &lt;/xsl:call-template&gt;
&lt;/xsl:template&gt;

&lt;xsl:template name="tp:verbatim" as="element()"&gt;
  &lt;xsl:param name="style" as="xs:string" required="yes"/&gt;
  &lt;xsl:param name="highlight" as="xs:string*" required="yes"/&gt;
  &lt;xsl:param name="numbered" as="xs:boolean" required="yes"/&gt;
  &lt;xsl:param name="trim-trailing" as="xs:boolean" required="yes"/&gt;
  &lt;xsl:param name="inject" as="array(*)?" select="()"/&gt;

  &lt;xsl:choose&gt;
    &lt;xsl:when test="$style = 'plain'"&gt;
      &lt;xsl:if test="exists($highlight)"&gt;
        &lt;xsl:message&gt;Verbatim plain processing doesn’t support highlighting&lt;/xsl:message&gt;
      &lt;/xsl:if&gt;
      &lt;xsl:if test="$numbered"&gt;
        &lt;xsl:message&gt;Verbatim plain processing doesn’t support line numbering&lt;/xsl:message&gt;
      &lt;/xsl:if&gt;
      &lt;xsl:call-template name="tp:verbatim-plain"&gt;
        &lt;xsl:with-param name="highlight" select="$highlight"/&gt;
        &lt;xsl:with-param name="numbered" select="$numbered"/&gt;
        &lt;xsl:with-param name="trim-trailing" select="$trim-trailing"/&gt;
        &lt;xsl:with-param name="inject" select="$inject"/&gt;
      &lt;/xsl:call-template&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="$style = 'lines'"&gt;
      &lt;xsl:call-template name="tp:verbatim-lines"&gt;
        &lt;xsl:with-param name="highlight" select="$highlight"/&gt;
        &lt;xsl:with-param name="numbered" select="$numbered"/&gt;
        &lt;xsl:with-param name="trim-trailing" select="$trim-trailing"/&gt;
        &lt;xsl:with-param name="inject" select="$inject"/&gt;
      &lt;/xsl:call-template&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="$style = 'raw'"&gt;
      &lt;xsl:if test="exists($inject)"&gt;
        &lt;xsl:message&gt;Verbatim raw processing doesn’t support injections&lt;/xsl:message&gt;
      &lt;/xsl:if&gt;
      &lt;xsl:if test="exists($highlight)"&gt;
        &lt;xsl:message&gt;Verbatim raw processing doesn’t support highlighting&lt;/xsl:message&gt;
      &lt;/xsl:if&gt;
      &lt;xsl:if test="$numbered"&gt;
        &lt;xsl:message&gt;Verbatim raw processing doesn’t support line numbering&lt;/xsl:message&gt;
      &lt;/xsl:if&gt;
      &lt;xsl:call-template name="tp:verbatim-raw"&gt;
        &lt;xsl:with-param name="highlight" select="$highlight"/&gt;
        &lt;xsl:with-param name="trim-trailing" select="$trim-trailing"/&gt;
        &lt;xsl:with-param name="numbered" select="$numbered"/&gt;
      &lt;/xsl:call-template&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:message expand-text="yes"&gt;Unrecognized verbatim-style: {$style}&lt;/xsl:message&gt;
      &lt;xsl:call-template name="tp:verbatim-plain"&gt;
        &lt;xsl:with-param name="highlight" select="$highlight"/&gt;
        &lt;xsl:with-param name="numbered" select="$numbered"/&gt;
        &lt;xsl:with-param name="trim-trailing" select="$trim-trailing"/&gt;
        &lt;xsl:with-param name="inject" select="$inject"/&gt;
      &lt;/xsl:call-template&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:template&gt;

&lt;xsl:template name="tp:verbatim-plain" as="element()"&gt;
  &lt;xsl:param name="highlight" as="xs:string*" required="yes"/&gt;
  &lt;xsl:param name="numbered" as="xs:boolean" required="yes"/&gt;
  &lt;xsl:param name="trim-trailing" as="xs:boolean" required="yes"/&gt;
  &lt;xsl:param name="inject" as="array(*)?" select="()"/&gt;

  &lt;xsl:variable name="lines" as="array(*)"&gt;
    &lt;xsl:call-template name="tp:verbatim-array"&gt;
      &lt;xsl:with-param name="highlight" select="$highlight"/&gt;
      &lt;xsl:with-param name="numbered" select="$numbered"/&gt;
      &lt;xsl:with-param name="trim-trailing" select="$trim-trailing"/&gt;
      &lt;xsl:with-param name="inject" select="$inject"/&gt;
    &lt;/xsl:call-template&gt;
  &lt;/xsl:variable&gt;

  &lt;xsl:variable name="body" as="item()*"&gt;
    &lt;xsl:for-each select="1 to array:size($lines)"&gt;
      &lt;xsl:if test="position() gt 1"&gt;
        &lt;xsl:text&gt;&amp;#10;&lt;/xsl:text&gt;
      &lt;/xsl:if&gt;
      &lt;xsl:for-each select="$lines(.)"&gt;
        &lt;xsl:call-template name="tp:filter-callouts"&gt;
          &lt;xsl:with-param name="highlight" select="$highlight"/&gt;
          &lt;xsl:with-param name="line" select="."/&gt;
        &lt;/xsl:call-template&gt;
      &lt;/xsl:for-each&gt;
    &lt;/xsl:for-each&gt;
  &lt;/xsl:variable&gt;

  &lt;div class="pre-wrap"&gt;
    &lt;pre&gt;
      &lt;xsl:apply-templates select="." mode="m:attributes"&gt;
        &lt;xsl:with-param name="style" select="'plain'"/&gt;
        &lt;xsl:with-param name="numbered" select="$numbered"/&gt;
      &lt;/xsl:apply-templates&gt;

      &lt;xsl:copy-of select="@xml:space"/&gt;
      &lt;xsl:choose&gt;
        &lt;xsl:when test="self::db:address or self::db:literallayout"&gt;
          &lt;xsl:sequence select="$body"/&gt;
        &lt;/xsl:when&gt;
        &lt;xsl:otherwise&gt;
          &lt;code&gt;&lt;xsl:sequence select="$body"/&gt;&lt;/code&gt;
        &lt;/xsl:otherwise&gt;
      &lt;/xsl:choose&gt;
    &lt;/pre&gt;
  &lt;/div&gt;
&lt;/xsl:template&gt;

&lt;xsl:template name="tp:verbatim-raw" as="element()"&gt;
  &lt;xsl:param name="highlight" as="xs:string*" required="yes"/&gt;
  &lt;xsl:param name="numbered" as="xs:boolean" required="yes"/&gt;
  &lt;xsl:param name="trim-trailing" as="xs:boolean" required="yes"/&gt;

  &lt;xsl:variable name="body" as="item()*"&gt;
    &lt;xsl:apply-templates/&gt;
  &lt;/xsl:variable&gt;

  &lt;div class="pre-wrap"&gt;
    &lt;pre&gt;
      &lt;xsl:apply-templates select="." mode="m:attributes"&gt;
        &lt;xsl:with-param name="style" select="'raw'"/&gt;
        &lt;xsl:with-param name="numbered" select="$numbered"/&gt;
      &lt;/xsl:apply-templates&gt;

      &lt;xsl:choose&gt;
        &lt;xsl:when test="self::db:address or self::db:literallayout"&gt;
          &lt;xsl:sequence select="$body"/&gt;
        &lt;/xsl:when&gt;
        &lt;xsl:otherwise&gt;
          &lt;code&gt;&lt;xsl:sequence select="$body"/&gt;&lt;/code&gt;
        &lt;/xsl:otherwise&gt;
      &lt;/xsl:choose&gt;
    &lt;/pre&gt;
  &lt;/div&gt;
&lt;/xsl:template&gt;

&lt;xsl:template name="tp:verbatim-lines" as="element()"&gt;
  &lt;xsl:param name="highlight" as="xs:string*" required="yes"/&gt;
  &lt;xsl:param name="numbered" as="xs:boolean" required="yes"/&gt;
  &lt;xsl:param name="trim-trailing" as="xs:boolean" required="yes"/&gt;
  &lt;xsl:param name="inject" as="array(*)?" select="()"/&gt;

  &lt;xsl:variable name="lines" as="array(*)"&gt;
    &lt;xsl:call-template name="tp:verbatim-array"&gt;
      &lt;xsl:with-param name="highlight" select="$highlight"/&gt;
      &lt;xsl:with-param name="numbered" select="$numbered"/&gt;
      &lt;xsl:with-param name="trim-trailing" select="$trim-trailing"/&gt;
      &lt;xsl:with-param name="inject" select="$inject"/&gt;
    &lt;/xsl:call-template&gt;
  &lt;/xsl:variable&gt;

  &lt;xsl:variable name="no-code" select="self::db:address or self::db:literallayout"/&gt;

  &lt;xsl:variable name="starting-line-number" as="xs:integer"&gt;
    &lt;xsl:choose&gt;
      &lt;xsl:when test="@startinglinenumber"&gt;
        &lt;xsl:sequence select="xs:integer(@startinglinenumber)"/&gt;
      &lt;/xsl:when&gt;
      &lt;xsl:when test="@continuation = 'continues'"&gt;
        &lt;xsl:variable name="name" select="node-name(.)"/&gt;
        &lt;xsl:variable name="prec" select="preceding::*[node-name(.) = $name]"/&gt;
        &lt;xsl:choose&gt;
          &lt;xsl:when test="empty($prec)"&gt;
            &lt;xsl:sequence select="1"/&gt;
          &lt;/xsl:when&gt;
          &lt;xsl:otherwise&gt;
            &lt;xsl:variable name="formatted" as="element()"&gt;
              &lt;xsl:apply-templates select="$prec"/&gt;
            &lt;/xsl:variable&gt;
            &lt;xsl:sequence select="if ($formatted/@db-startinglinenumber
                                      and $formatted/@db-numberoflines)
                                  then
                                    xs:integer($formatted/@db-startinglinenumber)
                                    + xs:integer($formatted/@db-numberoflines)
                                  else
                                    1"/&gt;
          &lt;/xsl:otherwise&gt;
        &lt;/xsl:choose&gt;
      &lt;/xsl:when&gt;
      &lt;xsl:otherwise&gt;
        &lt;xsl:sequence select="1"/&gt;
      &lt;/xsl:otherwise&gt;
    &lt;/xsl:choose&gt;
  &lt;/xsl:variable&gt;

  &lt;xsl:variable name="every-nth" as="xs:integer"&gt;
    &lt;xsl:choose&gt;
      &lt;xsl:when test="f:pi(., 'linenumbering-everyNth',
                           fp:verbatim-properties(.)?everyNth)"&gt;
        &lt;xsl:sequence
            select="xs:integer(f:pi(., 'linenumbering-everyNth',
                               fp:verbatim-properties(.)?everyNth))"/&gt;
      &lt;/xsl:when&gt;
      &lt;xsl:otherwise&gt;
        &lt;xsl:sequence select="$v:verbatim-number-every-nth"/&gt;
      &lt;/xsl:otherwise&gt;
    &lt;/xsl:choose&gt;
  &lt;/xsl:variable&gt;

  &lt;xsl:variable name="number-first" as="xs:boolean"&gt;
    &lt;xsl:choose&gt;
      &lt;xsl:when test="f:pi(., 'linenumbering-first',
                           fp:verbatim-properties(.)?first)"&gt;
        &lt;xsl:sequence
            select="f:is-true(f:pi(., 'linenumbering-first',
                                   fp:verbatim-properties(.)?first))"/&gt;
      &lt;/xsl:when&gt;
      &lt;xsl:otherwise&gt;
        &lt;xsl:sequence select="$v:verbatim-number-first-line"/&gt;
      &lt;/xsl:otherwise&gt;
    &lt;/xsl:choose&gt;
  &lt;/xsl:variable&gt;

  &lt;xsl:variable name="minlines" as="xs:integer"&gt;
    &lt;xsl:choose&gt;
      &lt;xsl:when test="f:pi(., 'linenumbering-minlines',
                           fp:verbatim-properties(.)?minlines)"&gt;
        &lt;xsl:sequence
            select="xs:integer(f:pi(., 'linenumbering-minlines',
                               fp:verbatim-properties(.)?minlines))"/&gt;
      &lt;/xsl:when&gt;
      &lt;xsl:otherwise&gt;
        &lt;xsl:sequence select="$v:verbatim-number-minlines"/&gt;
      &lt;/xsl:otherwise&gt;
    &lt;/xsl:choose&gt;
  &lt;/xsl:variable&gt;

  &lt;xsl:variable name="syntax-highlight"
                select="f:highlight-verbatim(.)"/&gt;

  &lt;div class="pre-wrap{if ($syntax-highlight) then ' highlight' else ''}"&gt;
    &lt;xsl:if test="$numbered"&gt;
      &lt;xsl:attribute name="db-startinglinenumber" select="$starting-line-number"/&gt;
      &lt;xsl:attribute name="db-numberoflines" select="array:size($lines)"/&gt;
    &lt;/xsl:if&gt;
    &lt;pre&gt;
      &lt;xsl:apply-templates select="." mode="m:attributes"&gt;
        &lt;xsl:with-param name="style" select="'lines'"/&gt;
        &lt;xsl:with-param name="numbered" select="$numbered"/&gt;
        &lt;xsl:with-param name="long"
                        select="array:size($lines) ge $minlines"/&gt;
      &lt;/xsl:apply-templates&gt;

      &lt;xsl:for-each select="1 to array:size($lines)"&gt;
        &lt;!-- Make sure blank lines contain at least one space so that
             they don't get collapsed into oblivion by the renderer. --&gt;
        &lt;xsl:variable name="index" select="."/&gt;
        &lt;xsl:variable name="ln" select=". + $starting-line-number - 1"/&gt;
        &lt;xsl:variable name="line"
                      select="if (count($lines(.)) = 1 and $lines(.) = '')
                              then ' '
                              else $lines(.)"/&gt;

        &lt;xsl:variable name="callouts"
                      select="$line[. instance of element()
                                    and contains-token(@class, 'callout-bug')]"/&gt;

        &lt;xsl:variable name="line" as="item()*"&gt;
          &lt;xsl:for-each select="$line"&gt;
            &lt;xsl:call-template name="tp:filter-callouts"&gt;
              &lt;xsl:with-param name="highlight" select="$highlight"/&gt;
              &lt;xsl:with-param name="line" select="."/&gt;
            &lt;/xsl:call-template&gt;
          &lt;/xsl:for-each&gt;
        &lt;/xsl:variable&gt;

        &lt;xsl:variable name="classes" as="xs:string+"&gt;
          &lt;xsl:sequence select="'line'"/&gt;
          &lt;xsl:if test="(('lines' = $highlight)
                         and $callouts[.[contains-token(@class, 'defcol')]])
                        or
                        (('lineranges' = $highlight
                          or 'lineranges-first' = $highlight
                          or 'lineranges-all' = $highlight)
                        and $callouts[.[contains-token(@class, 'linerange')]])"&gt;
            &lt;xsl:sequence select="'highlight'"/&gt;
            &lt;xsl:sequence select="'line'||."/&gt;
          &lt;/xsl:if&gt;
        &lt;/xsl:variable&gt;

        &lt;span class="{string-join($classes,' ')}" db-line="{.}"&gt;
          &lt;span class="ln"&gt;
            &lt;xsl:sequence select="if ($numbered
                                     and (array:size($lines) ge $minlines)
                                     and (($index = 1 and $number-first)
                                          or ($ln mod $every-nth = 0)))
                                  then $ln
                                  else ()"/&gt;
          &lt;/span&gt;
          &lt;span class="ld"&gt;
            &lt;xsl:choose&gt;
              &lt;xsl:when test="$no-code"&gt;
                &lt;xsl:sequence select="$line"/&gt;
              &lt;/xsl:when&gt;
              &lt;xsl:otherwise&gt;
                &lt;code&gt;&lt;xsl:sequence select="$line"/&gt;&lt;/code&gt;
              &lt;/xsl:otherwise&gt;
            &lt;/xsl:choose&gt;
          &lt;/span&gt;
        &lt;/span&gt;
        &lt;xsl:text&gt;&amp;#10;&lt;/xsl:text&gt;
      &lt;/xsl:for-each&gt;
    &lt;/pre&gt;
  &lt;/div&gt;
&lt;/xsl:template&gt;

&lt;xsl:template name="tp:filter-callouts"&gt;
  &lt;xsl:param name="highlight" as="xs:string*" required="yes"/&gt;
  &lt;xsl:param name="line" as="item()*" required="yes"/&gt;

  &lt;xsl:for-each select="$line"&gt;
    &lt;xsl:choose&gt;
      &lt;xsl:when test=". instance of element()
                      and contains-token(@class, 'callout-bug')"&gt;
        &lt;xsl:choose&gt;
          &lt;xsl:when test="'lineranges-first' = $highlight
                          and .[contains-token(@class, 'linerange')]"&gt;
            &lt;xsl:sequence select="if (.[contains-token(@class, 'firstline')])
                                  then .
                                  else ()"/&gt;
          &lt;/xsl:when&gt;
          &lt;xsl:when test="'lineranges-all' = $highlight
                          and .[contains-token(@class, 'linerange')]"&gt;
            &lt;xsl:sequence select="."/&gt;
          &lt;/xsl:when&gt;
          &lt;xsl:when test="'lines' = $highlight
                          and .[contains-token(@class, 'defcol')]"&gt;
            &lt;xsl:sequence select="."/&gt;
          &lt;/xsl:when&gt;
          &lt;xsl:when test="'linecolumn' = $highlight
                          and .[not(contains-token(@class, 'defcol'))
                                and not(contains-token(@class, 'linerange'))]"&gt;
            &lt;xsl:sequence select="."/&gt;
          &lt;/xsl:when&gt;
          &lt;xsl:otherwise&gt;
            &lt;xsl:sequence select="()"/&gt;
          &lt;/xsl:otherwise&gt;
        &lt;/xsl:choose&gt;
      &lt;/xsl:when&gt;
      &lt;xsl:otherwise&gt;
        &lt;xsl:sequence select="."/&gt;
      &lt;/xsl:otherwise&gt;
    &lt;/xsl:choose&gt;
  &lt;/xsl:for-each&gt;
&lt;/xsl:template&gt;

&lt;xsl:template name="tp:verbatim-array" as="array(*)"&gt;
  &lt;xsl:param name="highlight" as="xs:string*" required="yes"/&gt;
  &lt;xsl:param name="numbered" as="xs:boolean" required="yes"/&gt;
  &lt;xsl:param name="trim-trailing" as="xs:boolean" required="yes"/&gt;
  &lt;xsl:param name="inject" as="array(*)?" select="()"/&gt;

  &lt;xsl:variable name="syntax-highlight"
                select="f:highlight-verbatim(.)"/&gt;

  &lt;xsl:variable name="formatted" as="node()*"&gt;
    &lt;xsl:choose&gt;
      &lt;xsl:when test="$syntax-highlight"&gt;
        &lt;xsl:variable name="options" as="map(xs:string,xs:string)"&gt;
          &lt;xsl:apply-templates select="." mode="m:highlight-options"/&gt;
        &lt;/xsl:variable&gt;

        &lt;xsl:variable name="pyoptions" as="map(xs:string,xs:string)"&gt;
          &lt;xsl:apply-templates select="." mode="m:pygments-options"/&gt;
        &lt;/xsl:variable&gt;

        &lt;xsl:sequence select="f:syntax-highlight(string(.),
                              map:merge(($v:verbatim-syntax-highlight-options, $options)),
                              map:merge(($v:verbatim-syntax-highlight-pygments-options, $pyoptions)))"/&gt;
      &lt;/xsl:when&gt;
      &lt;xsl:otherwise&gt;
        &lt;xsl:apply-templates/&gt;
      &lt;/xsl:otherwise&gt;
    &lt;/xsl:choose&gt;
  &lt;/xsl:variable&gt;

  &lt;xsl:variable name="flattened"&gt;
    &lt;xsl:apply-templates select="$formatted" mode="mp:flatten-markup"/&gt;
  &lt;/xsl:variable&gt;

  &lt;xsl:variable name="lines" select="fp:make-lines($flattened/node(), $trim-trailing)"/&gt;
  &lt;xsl:variable name="lines" select="fp:balance-markup($lines)"/&gt;

  &lt;xsl:variable name="lines" select="if (exists($inject))
                                     then fp:inject-array($lines, $inject)
                                     else $lines"/&gt;

  &lt;xsl:variable name="lines" select="fp:unflatten($lines)"/&gt;

  &lt;xsl:sequence select="$lines"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:function name="f:highlight-verbatim" as="xs:boolean"&gt;
  &lt;xsl:param name="node" as="element()"/&gt;
  &lt;xsl:sequence select="'*' = $v:verbatim-syntax-highlight-languages
                        or string($node/@language)
                           = $v:verbatim-syntax-highlight-languages"/&gt;
&lt;/xsl:function&gt;

&lt;xsl:template match="*" as="map(xs:string, xs:string)" mode="m:highlight-options"&gt;
  &lt;xsl:map&gt;
    &lt;xsl:if test="@language"&gt;
      &lt;xsl:map-entry key="'language'" select="string(@language)"/&gt;
    &lt;/xsl:if&gt;
  &lt;/xsl:map&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="*" as="map(xs:string, xs:string)" mode="m:pygments-options"&gt;
  &lt;xsl:variable name="pyattr"
                select="f:pi-attributes(processing-instruction('db-pygments'))"/&gt;
  &lt;xsl:map&gt;
    &lt;xsl:for-each select="$pyattr/@*"&gt;
      &lt;xsl:map-entry key="local-name(.)" select="string(.)"/&gt;
    &lt;/xsl:for-each&gt;
  &lt;/xsl:map&gt;
&lt;/xsl:template&gt;

&lt;xsl:function name="fp:inject-array" as="array(*)"&gt;
  &lt;xsl:param name="lines" as="array(*)" required="yes"/&gt;
  &lt;xsl:param name="inject" as="array(*)" required="yes"/&gt;

  &lt;xsl:choose&gt;
    &lt;xsl:when test="array:size($inject) = 0"&gt;
      &lt;xsl:sequence select="$lines"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:variable name="newlines" as="array(*)"
           select="fp:inject($lines, $inject(1)?item, $inject(1)?line, $inject(1)?column)"/&gt;
      &lt;xsl:sequence select="fp:inject-array($newlines, array:remove($inject, 1))"/&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="fp:make-lines" as="array(*)"&gt;
  &lt;xsl:param name="body" as="node()*"/&gt;
  &lt;xsl:param name="trim-trailing" as="xs:boolean"/&gt;

  &lt;xsl:variable name="lines" select="fp:make-lines($body, (), [])"/&gt;
  &lt;xsl:sequence select="if ($trim-trailing)
                        then fp:trim-trailing-blank-lines($lines)
                        else $lines"/&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="fp:trim-trailing-blank-lines"&gt;
  &lt;xsl:param name="lines" as="array(*)"/&gt;
  &lt;xsl:variable name="last" select="array:size($lines)"/&gt;
  &lt;xsl:choose&gt;
    &lt;xsl:when test="$last gt 0
                    and count(array:get($lines, $last)) = 1
                    and normalize-space(array:get($lines, $last)) = ''"&gt;
      &lt;xsl:sequence select="fp:trim-trailing-blank-lines(
                               array:remove($lines, $last))"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:sequence select="$lines"/&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="fp:make-lines" as="array(*)"&gt;
  &lt;xsl:param name="body" as="node()*"/&gt;
  &lt;xsl:param name="curline" as="item()*"/&gt;
  &lt;xsl:param name="linearray" as="array(*)"/&gt;

  &lt;xsl:variable name="car" select="subsequence($body, 1, 1)"/&gt;
  &lt;xsl:variable name="cdr" select="subsequence($body, 2)"/&gt;

  &lt;xsl:choose&gt;
    &lt;xsl:when test="empty($body)"&gt;
      &lt;xsl:sequence select="if (empty($curline))
                            then $linearray
                            else array:append($linearray, $curline)"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="$car/self::text()"&gt;
      &lt;xsl:choose&gt;
        &lt;xsl:when test="contains($car, '&amp;#10;')"&gt;
          &lt;xsl:variable name="lines" select="tokenize($car, '&amp;#10;')"/&gt;
          &lt;xsl:variable name="first" select="subsequence($lines, 1, 1)"/&gt;
          &lt;xsl:variable name="last"
                        select="if (count($lines) = 1)
                                then ()
                                else subsequence($lines, count($lines), 1)"/&gt;
          &lt;xsl:variable name="middle"
                        select="if (count($lines) lt 3)
                                then ()
                                else subsequence($lines, 2, count($lines) - 2)"/&gt;
          &lt;xsl:variable name="arr" select="array:append($linearray, ($curline, $first))"/&gt;
          &lt;xsl:variable name="arr" select="fp:array-append($arr, $middle)"/&gt;
          &lt;xsl:sequence select="fp:make-lines($cdr, $last, $arr)"/&gt;
        &lt;/xsl:when&gt;
        &lt;xsl:otherwise&gt;
          &lt;xsl:sequence select="fp:make-lines($cdr, ($curline, $car), $linearray)"/&gt;
        &lt;/xsl:otherwise&gt;
      &lt;/xsl:choose&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:sequence select="fp:make-lines($cdr, ($curline, $car), $linearray)"/&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="fp:balance-markup"&gt;
  &lt;xsl:param name="lines" as="array(*)"/&gt;
  &lt;xsl:sequence select="fp:balance-markup($lines, (), [])"/&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="fp:balance-markup"&gt;
  &lt;xsl:param name="lines" as="array(*)"/&gt;
  &lt;xsl:param name="open" as="element()*"/&gt;
  &lt;xsl:param name="balanced" as="array(*)"/&gt;

  &lt;xsl:choose&gt;
    &lt;xsl:when test="array:size($lines) = 0"&gt;
      &lt;xsl:sequence select="$balanced"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;

      &lt;!--
      &lt;xsl:message&gt;-OPEN: &lt;xsl:sequence select="$open/@g:id/string()"/&gt;&lt;/xsl:message&gt;
      &lt;xsl:message&gt; LINE: &lt;xsl:sequence select="$lines(1)"/&gt;&lt;/xsl:message&gt;
      --&gt;

      &lt;xsl:variable name="line" select="fp:balance-line($open, $lines(1))"/&gt;

      &lt;!--
      &lt;xsl:message&gt; BLNC: &lt;xsl:sequence select="$line"/&gt;&lt;/xsl:message&gt;
      --&gt;

      &lt;xsl:variable name="open" select="fp:open($open, ($open, $lines(1)))"/&gt;

      &lt;!--
      &lt;xsl:message&gt;+OPEN: &lt;xsl:sequence select="$open/@g:id/string()"/&gt;&lt;/xsl:message&gt;
      --&gt;

      &lt;xsl:sequence select="fp:balance-markup(array:remove($lines, 1),
                                              $open,
                                              array:append($balanced, $line))"/&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="fp:balance-line" as="item()*"&gt;
  &lt;xsl:param name="open" as="element()*"/&gt;
  &lt;xsl:param name="line" as="item()*"/&gt;

  &lt;xsl:variable name="newline" as="item()*"&gt;
    &lt;xsl:sequence select="$open"/&gt;
    &lt;xsl:sequence select="$line"/&gt;
  &lt;/xsl:variable&gt;

  &lt;xsl:variable name="opened"
       select="$newline[. instance of element() and @g:id and not(@g:virtual)]"/&gt;

  &lt;xsl:variable name="closed"
       select="$newline[. instance of element()]/@g:start/string()"/&gt;

  &lt;!--
  &lt;xsl:message&gt; oped: &lt;xsl:sequence select="$opened"/&gt;&lt;/xsl:message&gt;
  &lt;xsl:message&gt; cled: &lt;xsl:sequence select="$closed"/&gt;&lt;/xsl:message&gt;
  --&gt;

  &lt;xsl:variable name="still-open" as="element()*"&gt;
    &lt;xsl:for-each select="$open"&gt;
      &lt;xsl:if test="not(@g:id = $closed)"&gt;
        &lt;xsl:sequence select="."/&gt;
      &lt;/xsl:if&gt;
    &lt;/xsl:for-each&gt;
    &lt;xsl:for-each select="$opened"&gt;
      &lt;xsl:if test="not(@g:id = $closed)"&gt;
        &lt;xsl:sequence select="."/&gt;
      &lt;/xsl:if&gt;
    &lt;/xsl:for-each&gt;
  &lt;/xsl:variable&gt;

  &lt;!--
  &lt;xsl:message&gt; BSTL: &lt;xsl:sequence select="$still-open/@g:id/string()"/&gt;&lt;/xsl:message&gt;
  --&gt;

  &lt;xsl:sequence select="$newline"/&gt;
  &lt;xsl:for-each select="reverse($still-open)"&gt;
    &lt;xsl:element name="{node-name(.)}" namespace="{namespace-uri(.)}"&gt;
      &lt;xsl:attribute name="g:start" select="@g:id"/&gt;
      &lt;xsl:attribute name="g:virtual" select="'true'"/&gt;
    &lt;/xsl:element&gt;
  &lt;/xsl:for-each&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="fp:open" as="element()*"&gt;
  &lt;xsl:param name="open" as="element()*"/&gt;
  &lt;xsl:param name="line" as="item()*"/&gt;

  &lt;xsl:variable name="closed"
       select="$line[. instance of element()]/@g:start/string()"/&gt;

  &lt;!--
  &lt;xsl:message&gt; CLOS: &lt;xsl:sequence select="$closed"/&gt;&lt;/xsl:message&gt;
  --&gt;

  &lt;xsl:variable name="still-open" as="element()*"&gt;
    &lt;xsl:for-each select="$open"&gt;
      &lt;xsl:if test="not(@g:id = $closed)"&gt;
        &lt;xsl:sequence select="."/&gt;
      &lt;/xsl:if&gt;
    &lt;/xsl:for-each&gt;
  &lt;/xsl:variable&gt;

  &lt;!--
  &lt;xsl:message&gt; STIL: &lt;xsl:sequence select="$still-open"/&gt;&lt;/xsl:message&gt;
  --&gt;

  &lt;xsl:variable name="new-open" as="element()*"&gt;
    &lt;xsl:for-each select="$line[. instance of element()
                                and @g:id
                                and not(@g:virtual)]"&gt;
      &lt;xsl:if test="not(@g:id = $closed)"&gt;
        &lt;xsl:element name="{node-name(.)}" namespace="{namespace-uri(.)}"&gt;
          &lt;xsl:copy-of select="@*"/&gt;
          &lt;xsl:attribute name="g:virtual" select="'true'"/&gt;
        &lt;/xsl:element&gt;
      &lt;/xsl:if&gt;
    &lt;/xsl:for-each&gt;
  &lt;/xsl:variable&gt;

  &lt;xsl:sequence select="($still-open, $new-open)"/&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="fp:unflatten" as="array(*)"&gt;
  &lt;xsl:param name="lines" as="array(*)"/&gt;
  &lt;xsl:sequence select="fp:unflatten($lines, [])"/&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="fp:unflatten" as="array(*)"&gt;
  &lt;xsl:param name="lines" as="array(*)"/&gt;
  &lt;xsl:param name="newlines" as="array(*)"/&gt;

  &lt;xsl:choose&gt;
    &lt;xsl:when test="array:size($lines) = 0"&gt;
      &lt;xsl:sequence select="$newlines"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:variable name="line"
                    select="fp:unflatten-line(array:get($lines,1))"/&gt;
      &lt;xsl:sequence select="fp:unflatten(array:remove($lines, 1),
                                         array:append($newlines, $line))"/&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="fp:unflatten-line" as="item()*"&gt;
  &lt;xsl:param name="line" as="item()*"/&gt;
  &lt;!--
  &lt;xsl:message&gt;UNFLAT: &lt;xsl:sequence select="$line"/&gt;&lt;/xsl:message&gt;
  --&gt;
  &lt;xsl:sequence select="fp:unflatten-line($line, ())"/&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="fp:unflatten-line" as="item()*"&gt;
  &lt;xsl:param name="line" as="item()*"/&gt;
  &lt;xsl:param name="newline" as="item()*"/&gt;

  &lt;!--
  &lt;xsl:message&gt;LINE: &lt;xsl:sequence select="$line"/&gt;&lt;/xsl:message&gt;
  --&gt;

  &lt;xsl:choose&gt;
    &lt;xsl:when test="empty($line)"&gt;
      &lt;xsl:sequence select="$newline"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:variable name="car" select="subsequence($line, 1, 1)"/&gt;
      &lt;xsl:variable name="cdr" select="subsequence($line, 2)"/&gt;

      &lt;!--
      &lt;xsl:message&gt;CAR: &lt;xsl:sequence select="$car"/&gt;&lt;/xsl:message&gt;
      &lt;xsl:message&gt;CDR: &lt;xsl:sequence select="$cdr"/&gt;&lt;/xsl:message&gt;
      --&gt;

      &lt;xsl:choose&gt;
        &lt;xsl:when test="$car instance of element()
                        and $car[@g:id]"&gt;
          &lt;xsl:variable name="id" select="$car/@g:id"/&gt;
          &lt;!-- injecting items may have created more than one
               element with the same g:start value; we always
               want the "nearest" one.
          --&gt;

          &lt;!--
          &lt;xsl:message&gt;ID: &lt;xsl:value-of select="$id"/&gt;&lt;/xsl:message&gt;
          --&gt;

          &lt;xsl:variable name="rest"
                        select="if (fp:contains($line, $id))
                                then fp:following($line, $id)
                                else ()"/&gt;
          &lt;xsl:variable name="nodes"
                        select="if (fp:contains($line, $id))
                                then fp:up-to($cdr, $id)
                                else ()"/&gt;

          &lt;!--
          &lt;xsl:message&gt;REST: &lt;xsl:value-of select="count($rest)"/&gt;: &lt;xsl:sequence select="$rest"/&gt;&lt;/xsl:message&gt;
          &lt;xsl:message&gt;NODS: &lt;xsl:value-of select="count($nodes)"/&gt;: &lt;xsl:sequence select="$nodes"/&gt;&lt;/xsl:message&gt;
          --&gt;

          &lt;xsl:variable name="unflat" as="element()"&gt;
            &lt;xsl:element name="{node-name($car)}"
                         namespace="{namespace-uri($car)}"&gt;
              &lt;xsl:copy-of select="$car/@* except ($car/@g:*|$car/@id)"/&gt;
              &lt;xsl:if test="not($car/@g:virtual)"&gt;
                &lt;xsl:copy-of select="$car/@id"/&gt;
              &lt;/xsl:if&gt;
              &lt;xsl:sequence select="fp:unflatten-line($nodes)"/&gt;
            &lt;/xsl:element&gt;
          &lt;/xsl:variable&gt;
          &lt;xsl:sequence select="fp:unflatten-line($rest,
                                                  ($newline, $unflat))"/&gt;
        &lt;/xsl:when&gt;
        &lt;xsl:otherwise&gt;
          &lt;xsl:sequence select="fp:unflatten-line($cdr, ($newline, $car))"/&gt;
        &lt;/xsl:otherwise&gt;
      &lt;/xsl:choose&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="fp:contains" as="xs:boolean"&gt;
  &lt;xsl:param name="line" as="item()*"/&gt;
  &lt;xsl:param name="id" as="xs:string"/&gt;
  &lt;xsl:variable name="found" as="element()*"&gt;
    &lt;xsl:for-each select="$line"&gt;
      &lt;xsl:if test=". instance of element()
                    and @g:start = $id"&gt;
        &lt;xsl:sequence select="."/&gt;
      &lt;/xsl:if&gt;
    &lt;/xsl:for-each&gt;
  &lt;/xsl:variable&gt;
  &lt;xsl:sequence select="exists($found)"/&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="fp:up-to"&gt;
  &lt;xsl:param name="line" as="item()*"/&gt;
  &lt;xsl:param name="id" as="xs:string"/&gt;

  &lt;xsl:variable name="car" select="subsequence($line, 1, 1)"/&gt;
  &lt;xsl:variable name="cdr" select="subsequence($line, 2)"/&gt;

  &lt;xsl:choose&gt;
    &lt;xsl:when test="empty($line)"&gt;
      &lt;xsl:sequence select="()"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="$car instance of element()
                    and $car/@g:start = $id"&gt;
      &lt;xsl:sequence select="()"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:sequence select="($car, fp:up-to($cdr, $id))"/&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="fp:following"&gt;
  &lt;xsl:param name="line" as="item()*"/&gt;
  &lt;xsl:param name="id" as="xs:string"/&gt;

  &lt;xsl:variable name="car" select="subsequence($line, 1, 1)"/&gt;
  &lt;xsl:variable name="cdr" select="subsequence($line, 2)"/&gt;

  &lt;xsl:choose&gt;
    &lt;xsl:when test="empty($line)"&gt;
      &lt;xsl:sequence select="()"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="$car instance of element()
                    and $car/@g:start = $id"&gt;
      &lt;xsl:sequence select="$cdr"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:sequence select="fp:following($cdr, $id)"/&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="fp:array-append"&gt;
  &lt;!-- Surely there must be a better way? --&gt;
  &lt;xsl:param name="array" as="array(*)"/&gt;
  &lt;xsl:param name="seq" as="item()*"/&gt;
  &lt;xsl:sequence
      select="if (empty($seq))
                  then $array
                  else fp:array-append(array:append($array, subsequence($seq, 1, 1)),
                                       subsequence($seq, 2))"/&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="fp:inject" as="array(*)"&gt;
  &lt;xsl:param name="lines" as="array(*)"/&gt;
  &lt;xsl:param name="item" as="item()"/&gt;
  &lt;xsl:param name="lineno" as="xs:integer"/&gt;
  &lt;xsl:param name="colno" as="xs:integer"/&gt;

  &lt;xsl:variable name="lines"
                select="if (array:size($lines) ge $lineno)
                        then $lines
                        else fp:array-pad($lines, $lineno)"/&gt;

  &lt;xsl:sequence
      select="fp:replace-element($lines, $lineno,
                 fp:inject-into-line($lines($lineno), $item, $colno))"/&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="fp:array-pad"&gt;
  &lt;xsl:param name="lines" as="array(*)"/&gt;
  &lt;xsl:param name="lineno" as="xs:integer"/&gt;

  &lt;xsl:choose&gt;
    &lt;xsl:when test="array:size($lines) ge $lineno"&gt;
      &lt;xsl:sequence select="$lines"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:sequence select="fp:array-pad(array:append($lines, ''), $lineno)"/&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="fp:inject-into-line" as="item()*"&gt;
  &lt;xsl:param name="line" as="item()*"/&gt;
  &lt;xsl:param name="item" as="item()"/&gt;
  &lt;xsl:param name="colno" as="xs:integer"/&gt;

  &lt;xsl:if test="$colno lt 0"&gt;
    &lt;xsl:sequence select="error()"/&gt;
  &lt;/xsl:if&gt;

  &lt;xsl:sequence
      select="fp:inject-into-chars(fp:line-to-chars($line), $item, $colno, 0, ())"/&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="fp:inject-into-chars" as="item()*"&gt;
  &lt;xsl:param name="chars" as="item()*"/&gt;
  &lt;xsl:param name="item" as="item()"/&gt;
  &lt;xsl:param name="colno" as="xs:integer"/&gt;
  &lt;xsl:param name="pos" as="xs:integer"/&gt;
  &lt;xsl:param name="open" as="element()*"/&gt;

  &lt;xsl:choose&gt;
    &lt;xsl:when test="$pos + 1 eq $colno"&gt;
      &lt;xsl:for-each select="reverse($open)"&gt;
        &lt;xsl:element name="{node-name(.)}" namespace="{namespace-uri(.)}"&gt;
          &lt;xsl:attribute name="g:start" select="@g:id"/&gt;
          &lt;xsl:attribute name="g:virtual" select="'true'"/&gt;
        &lt;/xsl:element&gt;
      &lt;/xsl:for-each&gt;
      &lt;xsl:sequence select="$item"/&gt;

      &lt;xsl:for-each select="$open"&gt;
        &lt;xsl:element name="{node-name(.)}" namespace="{namespace-uri(.)}"&gt;
          &lt;xsl:attribute name="g:id" select="@g:id"/&gt;
          &lt;xsl:attribute name="g:virtual" select="'true'"/&gt;
        &lt;/xsl:element&gt;
      &lt;/xsl:for-each&gt;
      &lt;xsl:sequence select="$chars"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="empty($chars)"&gt;
      &lt;xsl:sequence
          select="($v:verbatim-space,
                   fp:inject-into-chars((), $item, $colno, $pos+1, $open))"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:variable name="car" select="subsequence($chars, 1, 1)"/&gt;
      &lt;xsl:variable name="cdr" select="subsequence($chars, 2)"/&gt;
      &lt;xsl:choose&gt;
        &lt;xsl:when test="$car/self::text() and $car = $v:invisible-characters"&gt;
          &lt;xsl:sequence
              select="($car, fp:inject-into-chars($cdr, $item, $colno, $pos, $open))"/&gt;
        &lt;/xsl:when&gt;
        &lt;xsl:when test="$car/self::text()"&gt;
          &lt;xsl:sequence
              select="($car, fp:inject-into-chars($cdr, $item, $colno, $pos+1, $open))"/&gt;
        &lt;/xsl:when&gt;
        &lt;xsl:otherwise&gt;
          &lt;xsl:variable name="open" as="element()*"
                        select="if ($car/@g:start)
                                then subsequence($open, 1, count($open) - 1)
                                else ($open, $car)"/&gt;
          &lt;xsl:sequence
              select="($car, fp:inject-into-chars($cdr, $item, $colno, $pos, $open))"/&gt;
        &lt;/xsl:otherwise&gt;
      &lt;/xsl:choose&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="fp:line-to-chars" as="item()*"&gt;
  &lt;xsl:param name="line" as="item()*"/&gt;
  &lt;xsl:choose&gt;
    &lt;xsl:when test="empty($line)"&gt;
      &lt;xsl:sequence select="()"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:variable name="car" select="subsequence($line, 1, 1)"/&gt;
      &lt;xsl:variable name="cdr" select="subsequence($line, 2)"/&gt;
      &lt;xsl:choose&gt;
        &lt;xsl:when test="$car instance of xs:string or $car/self::text()"&gt;
          &lt;xsl:for-each select="1 to string-length($car)"&gt;
            &lt;!-- Use value-of so that they're text nodes --&gt;
            &lt;xsl:value-of select="substring($car, ., 1)"/&gt;
          &lt;/xsl:for-each&gt;
          &lt;xsl:sequence select="fp:line-to-chars($cdr)"/&gt;
        &lt;/xsl:when&gt;
        &lt;xsl:otherwise&gt;
          &lt;xsl:sequence select="($car, fp:line-to-chars($cdr))"/&gt;
        &lt;/xsl:otherwise&gt;
      &lt;/xsl:choose&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="fp:injection-array" as="array(*)?"&gt;
  &lt;xsl:param name="inject" as="item()?"/&gt;

  &lt;xsl:choose&gt;
    &lt;xsl:when test="empty($inject)"&gt;
      &lt;xsl:sequence select="()"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="$inject instance of array(*)"&gt;
      &lt;xsl:sequence select="fp:validate-injection-array($inject)"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="$inject instance of element(db:areaspec)"&gt;
      &lt;xsl:variable name="maps" as="map(*)*"&gt;
        &lt;xsl:apply-templates select="$inject/*" mode="mp:inj-map"/&gt;
      &lt;/xsl:variable&gt;
      &lt;xsl:sequence select="fp:validate-injection-array(array { $maps })"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:sequence select="error($dbe:INVALID-INJECT, 
                                 'Invalid type for $inject', $inject)"/&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:function&gt;

&lt;!-- ============================================================ --&gt;

&lt;xsl:template match="db:area" mode="mp:inj-map"&gt;
  &lt;xsl:if test="@units and not(@units = ('linecolumn', 'linerange'))"&gt;
    &lt;xsl:sequence select="error($dbe:INVALID-INJECT, 
                                'Invalid callout area: '
                                || @units || ' unsupported.')"/&gt;
  &lt;/xsl:if&gt;

  &lt;xsl:variable name="coords"
                select="tokenize(normalize-space(@coords))"/&gt;

  &lt;xsl:if test="count($coords) lt 1 or count($coords) gt 2"&gt;
    &lt;xsl:sequence select="error($dbe:INVALID-INJECT, 
                                'Invalid callout area: unparseable coordinates')"/&gt;
  &lt;/xsl:if&gt;

  &lt;xsl:variable name="line" select="$coords[1]"/&gt;
  &lt;xsl:variable name="column" select="if (count($coords) gt 1
                                          and not(@units = 'linerange'))
                                      then $coords[2]
                                      else $callout-default-column"/&gt;

  &lt;xsl:variable name="content" as="node()+"&gt;
    &lt;xsl:apply-templates select="." mode="mp:callout-in-verbatim"&gt;
      &lt;xsl:with-param name="line" select="$line"/&gt;
      &lt;xsl:with-param name="column" select="$column"/&gt;
    &lt;/xsl:apply-templates&gt;
  &lt;/xsl:variable&gt;

  &lt;xsl:choose&gt;
    &lt;xsl:when test="@units = 'linerange'"&gt;
      &lt;xsl:variable name="fline" select="xs:integer($coords[1])"/&gt;
      &lt;xsl:variable name="lline" select="if ($coords[2])
                                         then xs:integer($coords[2])
                                         else $fline"/&gt;
      &lt;xsl:variable name="firstcontent" as="element()"&gt;
        &lt;xsl:element name="span" namespace="http://www.w3.org/1999/xhtml"&gt;
          &lt;xsl:copy-of select="$content/@* except $content/@class"/&gt;
          &lt;xsl:attribute name="class"
                         select="concat($content/@class, ' firstline')"/&gt;
          &lt;xsl:copy-of select="$content/node()"/&gt;
        &lt;/xsl:element&gt;
      &lt;/xsl:variable&gt;

      &lt;xsl:for-each select="$fline to $lline"&gt;
        &lt;xsl:sequence select="map { 'line': .,
                                    'linerange': true(),
                                    'column': $column,
                                    'item': if (. = $fline)
                                            then $firstcontent
                                            else $content }"/&gt;
      &lt;/xsl:for-each&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:sequence select="map { 'line': $line,
                                  'column': $column,
                                  'item': $content }"/&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:areaset" mode="mp:inj-map"&gt;
  &lt;xsl:apply-templates mode="mp:inj-map"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="*" mode="mp:inj-map"&gt;
  &lt;xsl:sequence select="error($dbe:INVALID-INJECT, 
                              'Invalid type for $inject: '
                              || local-name(.))"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="attribute()|text()|comment()|processing-instruction()"
              mode="mp:inj-map"/&gt;

&lt;xsl:template match="db:co"&gt;
  &lt;a&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
    &lt;xsl:apply-templates select="." mode="m:callout-bug"/&gt;
  &lt;/a&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:co" mode="m:callout-bug"&gt;
  &lt;xsl:variable name="conum"&gt;
    &lt;xsl:choose&gt;
      &lt;xsl:when test="@label and @label castable as xs:decimal"&gt;
        &lt;xsl:sequence select="@label"/&gt;
      &lt;/xsl:when&gt;
      &lt;xsl:otherwise&gt;
        &lt;xsl:number count="db:co"
                    level="any"
                    format="1"/&gt;
      &lt;/xsl:otherwise&gt;
    &lt;/xsl:choose&gt;
  &lt;/xsl:variable&gt;
  &lt;xsl:value-of select="codepoints-to-string($callout-unicode-start + xs:integer($conum))"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:coref"&gt;
  &lt;xsl:variable name="coid" as="xs:string?"&gt;
    &lt;xsl:choose&gt;
      &lt;xsl:when test="@linkend"&gt;
        &lt;xsl:sequence select="@linkend/string()"/&gt;
      &lt;/xsl:when&gt;
      &lt;xsl:when test="@xlink:href[starts-with(., '#')]"&gt;
        &lt;xsl:sequence select="substring(@xlink:href, 2)"/&gt;
      &lt;/xsl:when&gt;
      &lt;xsl:otherwise&gt;
        &lt;xsl:sequence select="()"/&gt;
      &lt;/xsl:otherwise&gt;
    &lt;/xsl:choose&gt;
  &lt;/xsl:variable&gt;

  &lt;xsl:choose&gt;
    &lt;xsl:when test="empty($coid)"&gt;
      &lt;xsl:message&gt;Cannot find callout ID on coref&lt;/xsl:message&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:variable name="co" select="key('id', $coid)"/&gt;
      &lt;xsl:if test="count($co) gt 1"&gt;
        &lt;xsl:message&gt;Callout ID on coref is not unique: &lt;xsl:sequence select="$coid"/&gt;&lt;/xsl:message&gt;
      &lt;/xsl:if&gt;
      &lt;xsl:variable name="co" select="$co[1]"/&gt;
      &lt;xsl:choose&gt;
        &lt;xsl:when test="empty($co)"&gt;
          &lt;xsl:message&gt;Callout ID on coref does not exist: &lt;xsl:sequence select="$coid"/&gt;&lt;/xsl:message&gt;
          &lt;xsl:call-template name="t:inline"/&gt;
        &lt;/xsl:when&gt;
        &lt;xsl:when test="not($co/self::db:co)"&gt;
          &lt;xsl:message&gt;
            &lt;xsl:text&gt;Callout ID on coref does not point to a co: &lt;/xsl:text&gt;
            &lt;xsl:sequence select="$coid"/&gt;
          &lt;/xsl:message&gt;
        &lt;/xsl:when&gt;
        &lt;xsl:otherwise&gt;
          &lt;xsl:apply-templates select="$co"/&gt;
        &lt;/xsl:otherwise&gt;
      &lt;/xsl:choose&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:areaspec" mode="m:callout-bug" as="xs:integer"&gt;
  &lt;xsl:param name="continues" as="xs:boolean" select="false()"/&gt;

  &lt;xsl:variable name="starting-pi"
                select="f:pi(., 'starting-callout-number')"/&gt;

  &lt;xsl:variable name="start-at-start" as="xs:integer"&gt;
    &lt;xsl:choose&gt;
      &lt;xsl:when test="empty($starting-pi)"&gt;
        &lt;xsl:sequence select="1"/&gt;
      &lt;/xsl:when&gt;
      &lt;xsl:when test="$starting-pi[1] castable as xs:integer"&gt;
        &lt;xsl:sequence select="$starting-pi[1] cast as xs:integer"/&gt;
      &lt;/xsl:when&gt;
      &lt;xsl:when test="$starting-pi[1] = 'continues' and preceding::db:areaspec"&gt;
        &lt;xsl:apply-templates select="preceding::db:areaspec[1]" mode="m:callout-bug"&gt;
          &lt;xsl:with-param name="continues" select="true()"/&gt;
        &lt;/xsl:apply-templates&gt;
      &lt;/xsl:when&gt;
      &lt;xsl:when test="$starting-pi[1] = 'continues'"&gt;
        &lt;xsl:sequence select="1"/&gt;
      &lt;/xsl:when&gt;
      &lt;xsl:otherwise&gt;
        &lt;xsl:message select="'Unsupported starting-callout-number: ', $starting-pi"/&gt;
        &lt;xsl:sequence select="1"/&gt;
      &lt;/xsl:otherwise&gt;
    &lt;/xsl:choose&gt;
  &lt;/xsl:variable&gt;

  &lt;xsl:sequence select="if ($continues)
                        then $start-at-start + count(*)
                        else $start-at-start"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:area" mode="m:callout-bug"&gt;
  &lt;xsl:variable name="start-co-number" as="xs:integer"&gt;
    &lt;xsl:apply-templates select="ancestor::db:areaspec[1]" mode="m:callout-bug"/&gt;
  &lt;/xsl:variable&gt;

  &lt;xsl:variable name="num"
                select="if (parent::db:areaset)
                        then count(parent::*/preceding-sibling::*) + $start-co-number
                        else count(preceding-sibling::*) + $start-co-number"/&gt;
  &lt;xsl:value-of select="codepoints-to-string(9311 + $num)"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:area" mode="mp:callout-in-verbatim"&gt;
  &lt;xsl:param name="line" select="()"/&gt;
  &lt;xsl:param name="column" select="()"/&gt;

  &lt;xsl:variable name="class" as="xs:string+"&gt;
    &lt;xsl:sequence select="'callout-bug'"/&gt;
    &lt;xsl:sequence select="if (@otherunits)
                          then 'other ' || @otherunits
                          else if (@units)
                               then @units
                               else 'linecolumn'"/&gt;
    &lt;xsl:sequence select="if ((not(@units) or @units='linecolumn')
                              and count(tokenize(@coords)) ne 2)
                          then 'defcol'
                          else ()"/&gt;
  &lt;/xsl:variable&gt;

  &lt;a id="{ if (parent::db:areaset and empty(preceding-sibling::*))
           then f:generate-id(parent::*)
           else f:generate-id(.) }"
     class="{ string-join($class, ' ') }"&gt;
    &lt;xsl:if test="@linkends"&gt;
      &lt;xsl:attribute name="href"
                     select="'#' || tokenize(normalize-space(@linkends), '\s+')[1]"/&gt;
    &lt;/xsl:if&gt;
    &lt;xsl:if test="exists($line)"&gt;
      &lt;xsl:attribute name="db-line" select="$line"/&gt;
    &lt;/xsl:if&gt;
    &lt;xsl:if test="exists($column)"&gt;
      &lt;xsl:attribute name="db-column" select="$column"/&gt;
    &lt;/xsl:if&gt;
    &lt;xsl:if test="db:alt"&gt;
      &lt;xsl:attribute name="title" select="string(db:alt)"/&gt;
    &lt;/xsl:if&gt;
    &lt;xsl:apply-templates select="." mode="m:callout-bug"/&gt;
  &lt;/a&gt;
&lt;/xsl:template&gt;

&lt;!-- ============================================================ --&gt;

&lt;xsl:function name="fp:validate-injection-array" as="array(*)"&gt;
  &lt;xsl:param name="array" as="array(*)"/&gt;

  &lt;xsl:variable name="valid-maps" as="map(*)*"&gt;
    &lt;xsl:for-each select="1 to array:size($array)"&gt;
      &lt;xsl:variable name="map" select="$array(.)"/&gt;
      &lt;xsl:if test="empty($map?line)
                    or empty($map?column)
                    or empty($map?item)
                    or not($map?line castable as xs:integer)
                    or not($map?column castable as xs:integer)"&gt;
        &lt;xsl:sequence select="error($dbe:INVALID-INJECT, 
                                    'Invalid map in $inject', $map)"/&gt;
      &lt;/xsl:if&gt;
      &lt;xsl:sequence select="map { 'line': xs:integer($map?line),
                                  'column': xs:integer($map?column),
                                  'item': $map?item }"/&gt;
    &lt;/xsl:for-each&gt;
  &lt;/xsl:variable&gt;

  &lt;xsl:variable name="sorted-maps" as="map(*)*"&gt;
    &lt;xsl:for-each select="$valid-maps"&gt;
      &lt;xsl:sort select=".?line" order="descending"/&gt;
      &lt;xsl:sort select=".?column" order="descending"/&gt;
      &lt;xsl:sequence select="."/&gt;
    &lt;/xsl:for-each&gt;
  &lt;/xsl:variable&gt;

  &lt;xsl:sequence select="array { $sorted-maps }"/&gt;
&lt;/xsl:function&gt;

&lt;!-- ============================================================ --&gt;

&lt;xsl:template match="element()" mode="mp:flatten-markup"&gt;
  &lt;xsl:copy&gt;
    &lt;xsl:copy-of select="@*"/&gt;
    &lt;xsl:attribute name="g:id" select="generate-id(.)"/&gt;
  &lt;/xsl:copy&gt;
  &lt;xsl:apply-templates select="node()" mode="mp:flatten-markup"/&gt;
  &lt;xsl:copy&gt;
    &lt;xsl:attribute name="g:start" select="generate-id(.)"/&gt;
    &lt;xsl:attribute name="g:virtual" select="'true'"/&gt;
  &lt;/xsl:copy&gt;
&lt;/xsl:template&gt;

&lt;!-- ============================================================ --&gt;

&lt;xsl:template match="attribute()|text()|comment()|processing-instruction()"
              mode="mp:flatten-markup"&gt;
  &lt;xsl:copy/&gt;
&lt;/xsl:template&gt;

&lt;xsl:function name="fp:verbatim-properties" as="map(*)"&gt;
  &lt;xsl:param name="context" as="element()"/&gt;

  &lt;xsl:variable name="style"
                select="fp:properties($context, $v:verbatim-properties)"/&gt;

  &lt;xsl:sequence
      select="if (empty($style))
              then map { 'style': $verbatim-style-default,
                         'numbered': (local-name($context) = $v:verbatim-numbered-elements),
                         'highlight': $v:verbatim-callouts }
              else $style"/&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="f:verbatim-style" as="xs:string"&gt;
  &lt;xsl:param name="context" as="element()"/&gt;
  &lt;xsl:choose&gt;
    &lt;xsl:when test="$verbatim-syntax-highlighter != 'pygments'"&gt;
      &lt;xsl:sequence select="'raw'"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:sequence
          select="f:pi($context, 'verbatim-style',
                       fp:verbatim-properties($context)?style)"/&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="f:verbatim-highlight" as="xs:string*"&gt;
  &lt;xsl:param name="context" as="element()"/&gt;

  &lt;!-- If we aren't using Pygments, or if there's a PI that explicitly
       selects plain formatting, disable highlighting automatically.
       This avoids a warning about highlighting not being supported.
  --&gt;
  &lt;xsl:variable name="value" as="xs:string*"
      select="if ($verbatim-syntax-highlighter != 'pygments'
                  or f:pi($context, 'verbatim-style') = 'plain')
              then ()
              else f:pi($context, 'verbatim-highlight',
                        fp:verbatim-properties($context)?highlight)"/&gt;

  &lt;xsl:for-each select="$value"&gt;
    &lt;xsl:sequence select="if (contains(., ','))
                          then tokenize(., ',\s*') ! normalize-space(.)
                          else ."/&gt;
  &lt;/xsl:for-each&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="f:verbatim-numbered" as="xs:boolean"&gt;
  &lt;xsl:param name="context" as="element()"/&gt;

  &lt;xsl:choose&gt;
    &lt;xsl:when test="$verbatim-syntax-highlighter != 'pygments'"&gt;
      &lt;xsl:sequence select="false()"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="$context/@linenumbering"&gt;
      &lt;xsl:sequence select="$context/@linenumbering = 'numbered'"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:variable name="pi" select="f:pi($context, 'verbatim-numbered')"/&gt;
      &lt;!-- If there's a PI that explicitly selects plain formatting,
           disable numbering automatically. This avoids a warning
           about numbering not being supported. --&gt;
      &lt;xsl:sequence select="if (f:pi($context, 'verbatim-style') = 'plain')
                            then false()
                            else if ($pi)
                                 then f:is-true($pi)
                                 else fp:verbatim-properties($context)?numbered = true()"/&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="f:verbatim-trim-trailing" as="xs:boolean"&gt;
  &lt;xsl:param name="context" as="element()"/&gt;
  &lt;xsl:variable name="pi" select="f:pi($context, 'verbatim-trim-trailing')"/&gt;
  &lt;xsl:sequence select="if ($pi)
                        then f:is-true($pi)
                        else f:is-true($verbatim-trim-trailing-blank-lines)"/&gt;
&lt;/xsl:function&gt;

&lt;/xsl:stylesheet&gt;
</code></pre></td></tr></table></div></div></div></div><div class="stylesheet" id="S-59097"><h3>tablecals.xsl</h3><p><span><span class="template all">8 templates</span></span>, <span><span class="function all">37 functions</span></span>, <span><span class="FIXME: comment all">1 FIXME: comment</span></span></p><div class="instructions"><div class="title closed">Instructions</div><div class="body"><div id="S-59097-t-1" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:table</div><div class="props"><div class="uses">Uses: <a href="#S-26643-..table-accessibility">$table-accessibility</a></div><div class="calls">Calls: <a href="#S-50448-docbook.org.ns.docbook.templates.table-footnotes">t:table-footnotes</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:table</code></div></div></div><div id="S-59097-t-2" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:informaltable</div><div class="props"><div class="uses">Uses: <a href="#S-26643-..table-accessibility">$table-accessibility</a></div><div class="calls">Calls: <a href="#S-50448-docbook.org.ns.docbook.templates.table-footnotes">t:table-footnotes</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:informaltable</code></div></div></div><div id="S-59097-t-3" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:tgroup</div><div class="props"><div class="uses">Uses: <a href="#S-26643-..table-accessibility">$table-accessibility</a></div><div class="calls">Calls: <a href="#S-59097-docbook.org.ns.docbook.templates.private.cals-colspec">tp:cals-colspec</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:tgroup</code></div></div></div><div id="S-59097-t-4" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:tbody|db:tfoot|db:thead</div><div class="props"><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:tbody</code>, <code>db:tfoot</code>, <code>db:thead</code></div></div></div><div id="S-59097-t-5" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:row</div><div class="props"><div class="calls">Calls: <a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.cell,4">fcals:cell()</a>, <a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.colspan,2">fcals:colspan()</a>, <a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.column-number,2">fcals:column-number()</a>, <a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.overhang-into-row,1">fcals:overhang-into-row()</a>, <a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.rowspan,2">fcals:rowspan()</a>, <a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.table-columns,1">fcals:table-columns()</a></div><div class="calls">Calls: <a href="#S-59097-docbook.org.ns.docbook.templates.private.cell">tp:cell</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:row</code></div></div></div><div id="S-59097-t-6" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:entry|db:entrytbl</div><div class="props"><div class="uses">Uses: <a href="#S-26643-..align-char-default">$align-char-default</a>, <a href="#S-26643-..align-char-pad">$align-char-pad</a>, <a href="#S-26643-..align-char-width">$align-char-width</a></div><div class="calls">Calls: <a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.colspec-for-column,2">fcals:colspec-for-column()</a>, <a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.tgroup,1">fcals:tgroup()</a>, <a href="#S-59097-docbook.org.ns.docbook.functions.private.align-char-pad,3">fp:align-char-pad()</a>, <a href="#S-59097-docbook.org.ns.docbook.functions.private.only-initial-pis,1">fp:only-initial-pis()</a>, <a href="#S-28936-docbook.org.ns.docbook.functions.private.pi-from-list,3">fp:pi-from-list()</a>, <a href="#S-28936-docbook.org.ns.docbook.functions.pi-attributes,1">f:pi-attributes()</a>, <a href="#S-28936-docbook.org.ns.docbook.functions.tokenize-on-char,2">f:tokenize-on-char()</a></div><div class="calls">Calls: <a href="#S-59097-docbook.org.ns.docbook.templates.private.cals-colspec">tp:cals-colspec</a>, <a href="#S-59097-docbook.org.ns.docbook.templates.private.cell">tp:cell</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:entry</code>, <code>db:entrytbl</code></div></div></div><div id="S-59097-docbook.org.ns.docbook.templates.private.cell" class="instruction template"><div class="title"><span class="link"></span>Template tp:cell  match ≅ </div><div class="props"><div class="calls">Calls: <a href="#S-59097-docbook.org.ns.docbook.functions.cals-colsep,3">f:cals-colsep()</a>, <a href="#S-59097-docbook.org.ns.docbook.functions.cals-rowsep,3">f:cals-rowsep()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-59097-t-5">template</a>, <a href="#S-59097-t-6">template</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-59097">modules/tablecals.xsl</a></div><div class="mode">Mode: <code>m:docbook</code></div></div></div><div id="S-59097-docbook.org.ns.docbook.templates.private.cals-colspec" class="instruction template"><div class="title"><span class="link"></span>Template tp:cals-colspec  match ≅ </div><div class="props"><div class="uses">Uses: <a href="#S-23412-docbook.org.ns.docbook.variables.nominal-page-width">$v:nominal-page-width</a></div><div class="calls">Calls: <a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.colspec-for-column,2">fcals:colspec-for-column()</a>, <a href="#S-46176-docbook.org.ns.docbook.functions.absolute-length,1">f:absolute-length()</a>, <a href="#S-46176-docbook.org.ns.docbook.functions.parse-length,1">f:parse-length()</a>, <a href="#S-46176-docbook.org.ns.docbook.functions.relative-length,1">f:relative-length()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-59097-t-3">template</a>, <a href="#S-59097-t-6">template</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-59097">modules/tablecals.xsl</a></div><div class="mode">Mode: <code>m:docbook</code></div></div></div><div id="S-59097-docbook.org.ns.docbook.functions.private.cals.colspec-for-column,2" class="instruction function"><div class="title"><span class="link"></span>Function fcals:colspec-for-column($tgroup as element(), $colnum as xs:integer) as element()?</div><div class="props"><div class="calls">Calls: <a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.align,3">fcals:align()</a>, <a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.char,3">fcals:char()</a>, <a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.colsep,3">fcals:colsep()</a>, <a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.empty-cell-colsep,2">fcals:empty-cell-colsep()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-59097-t-6">template</a>, <a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.align,3">fcals:align()</a>, <a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.char,3">fcals:char()</a>, <a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.colsep,3">fcals:colsep()</a>, <a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.empty-cell-colsep,2">fcals:empty-cell-colsep()</a>, <a href="#S-59097-docbook.org.ns.docbook.templates.private.cals-colspec">tp:cals-colspec</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-59097">modules/tablecals.xsl</a></div></div></div><div id="S-59097-docbook.org.ns.docbook.functions.private.colspec-for-colnum,3" class="instruction function"><div class="title"><span class="link"></span>Function fp:colspec-for-colnum($colspecs as element()*, $colnum as xs:integer, $curcol as xs:integer) as element()? <span class="recursive" title="Recursive function">♻</span></div><div class="props"><div class="calls">Calls: <a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.colspec-for-column,2">fcals:colspec-for-column()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.colspec-for-column,2">fcals:colspec-for-column()</a>, <a href="#S-59097-docbook.org.ns.docbook.functions.private.colspec-for-colnum,3">fp:colspec-for-colnum()</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-59097">modules/tablecals.xsl</a></div></div></div><div id="S-59097-docbook.org.ns.docbook.functions.private.cals.cell,4" class="instruction function"><div class="title"><span class="link"></span>Function fcals:cell($row as element(db:row), $column as xs:integer, $overhang as array(xs:integer), $cells as map(*)*) as map(*)</div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-59097-t-5">template</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-59097">modules/tablecals.xsl</a></div></div></div><div id="S-59097-docbook.org.ns.docbook.functions.private.cals.overhang-into-row,1" class="instruction function"><div class="title"><span class="link"></span>Function fcals:overhang-into-row($row as element(db:row)) as array(xs:integer)</div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-59097-t-5">template</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-59097">modules/tablecals.xsl</a></div></div></div><div id="S-59097-docbook.org.ns.docbook.functions.private.cals.overhang,1" class="instruction function"><div class="title"><span class="link"></span>Function fcals:overhang($row as element(db:row)) as array(xs:integer) <span class="recursive" title="Recursive function">♻</span></div><div class="props"><div class="calls">Calls: <a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.overhang-into-row,1">fcals:overhang-into-row()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.overhang,1">fcals:overhang()</a>, <a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.overhang-into-row,1">fcals:overhang-into-row()</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-59097">modules/tablecals.xsl</a></div></div></div><div id="S-59097-docbook.org.ns.docbook.functions.private.cals.cell-overhang,2" class="instruction function"><div class="title"><span class="link"></span>Function fcals:cell-overhang($colmap as map(xs:integer, node()), $column as xs:integer)</div><div class="props"><div class="calls">Calls: <a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.overhang,1">fcals:overhang()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.overhang,1">fcals:overhang()</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-59097">modules/tablecals.xsl</a></div></div></div><div id="S-59097-docbook.org.ns.docbook.functions.private.cals.next-empty-cell,2" class="instruction function"><div class="title"><span class="link"></span>Function fcals:next-empty-cell($column as xs:integer, $overhang as array(xs:integer)) <span class="recursive" title="Recursive function">♻</span></div><div class="props"><div class="uses">Uses: <a href="#S-29386-docbook.org.ns.docbook.errors.INVALID-CALS">$dbe:INVALID-CALS</a></div><div class="calls">Calls: <a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.column-number,2">fcals:column-number()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.column-number,2">fcals:column-number()</a>, <a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.next-empty-cell,2">fcals:next-empty-cell()</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-59097">modules/tablecals.xsl</a></div></div></div><div id="S-59097-docbook.org.ns.docbook.functions.private.cals.decrement-overhang,1" class="instruction function"><div class="title"><span class="link"></span>Function fcals:decrement-overhang($overhang as array(xs:integer)) as array(xs:integer)</div><div class="props"><div class="calls">Calls: <a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.overhang,1">fcals:overhang()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.overhang,1">fcals:overhang()</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-59097">modules/tablecals.xsl</a></div></div></div><div id="S-59097-docbook.org.ns.docbook.functions.private.cals.column-number,2" class="instruction function"><div class="title"><span class="link"></span>Function fcals:column-number($node as element(), $overhang as array(xs:integer)) as xs:integer <span class="recursive" title="Recursive function">♻</span></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-59097-t-5">template</a>, <a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.column-number,2">fcals:column-number()</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-59097">modules/tablecals.xsl</a></div></div></div><div id="S-59097-docbook.org.ns.docbook.functions.private.cals.colspec-column-number,1" class="instruction function"><div class="title"><span class="link"></span>Function fcals:colspec-column-number($colspec as element(db:colspec)) as xs:integer <span class="recursive" title="Recursive function">♻</span></div><div class="props"><div class="calls">Calls: <a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.colspan,2">fcals:colspan()</a>, <a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.column-number,2">fcals:column-number()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.colspan,2">fcals:colspan()</a>, <a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.colspec-column-number,1">fcals:colspec-column-number()</a>, <a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.column-number,2">fcals:column-number()</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-59097">modules/tablecals.xsl</a></div></div></div><div id="S-59097-docbook.org.ns.docbook.functions.private.cals.colspec,2" class="instruction function"><div class="title"><span class="link"></span>Function fcals:colspec($node as element(), $colname as xs:string) as element(db:colspec)</div><div class="props"><div class="uses">Uses: <a href="#S-29386-docbook.org.ns.docbook.errors.INVALID-CALS">$dbe:INVALID-CALS</a></div><div class="calls">Calls: <a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.align-colspec,2">fcals:align-colspec()</a>, <a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.char-colspec,2">fcals:char-colspec()</a>, <a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.colsep-colspec,2">fcals:colsep-colspec()</a>, <a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.colspan,2">fcals:colspan()</a>, <a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.column-number,2">fcals:column-number()</a>, <a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.rowsep-colspec,2">fcals:rowsep-colspec()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.align-colspec,2">fcals:align-colspec()</a>, <a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.char-colspec,2">fcals:char-colspec()</a>, <a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.colsep-colspec,2">fcals:colsep-colspec()</a>, <a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.colspan,2">fcals:colspan()</a>, <a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.column-number,2">fcals:column-number()</a>, <a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.rowsep-colspec,2">fcals:rowsep-colspec()</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-59097">modules/tablecals.xsl</a></div></div></div><div id="S-59097-docbook.org.ns.docbook.functions.private.cals.spanspec,2" class="instruction function"><div class="title"><span class="link"></span>Function fcals:spanspec($node as element(), $spanname as xs:string) as element(db:spanspec)</div><div class="props"><div class="uses">Uses: <a href="#S-29386-docbook.org.ns.docbook.errors.INVALID-CALS">$dbe:INVALID-CALS</a></div><div class="calls">Calls: <a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.align-spanspec,2">fcals:align-spanspec()</a>, <a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.char-spanspec,2">fcals:char-spanspec()</a>, <a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.colsep-spanspec,2">fcals:colsep-spanspec()</a>, <a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.colspan,2">fcals:colspan()</a>, <a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.rowsep-spanspec,2">fcals:rowsep-spanspec()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.align-spanspec,2">fcals:align-spanspec()</a>, <a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.char-spanspec,2">fcals:char-spanspec()</a>, <a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.colsep-spanspec,2">fcals:colsep-spanspec()</a>, <a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.colspan,2">fcals:colspan()</a>, <a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.rowsep-spanspec,2">fcals:rowsep-spanspec()</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-59097">modules/tablecals.xsl</a></div></div></div><div id="S-59097-docbook.org.ns.docbook.functions.private.cals.colspan,2" class="instruction function"><div class="title"><span class="link"></span>Function fcals:colspan($node as element(), $colnum as xs:integer) as xs:integer</div><div class="props"><div class="calls">Calls: <a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.cell-overhang,2">fcals:cell-overhang()</a>, <a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.column-number,2">fcals:column-number()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-59097-t-5">template</a>, <a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.cell-overhang,2">fcals:cell-overhang()</a>, <a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.column-number,2">fcals:column-number()</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-59097">modules/tablecals.xsl</a></div></div></div><div id="S-59097-docbook.org.ns.docbook.functions.private.cals.rowspan,2" class="instruction function"><div class="title"><span class="link"></span>Function fcals:rowspan($node as element(), $colnum as xs:integer) as xs:integer</div><div class="props"><div class="calls">Calls: <a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.cell-overhang,2">fcals:cell-overhang()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-59097-t-5">template</a>, <a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.cell-overhang,2">fcals:cell-overhang()</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-59097">modules/tablecals.xsl</a></div></div></div><div id="S-59097-docbook.org.ns.docbook.functions.private.cals.cell-decoration,3" class="instruction function"><div class="title"><span class="link"></span>Function fcals:cell-decoration($row as element(db:row), $cell as element()?, $column as xs:integer) as map(*)</div><div class="props"><div class="calls">Calls: <a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.cell,4">fcals:cell()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.cell,4">fcals:cell()</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-59097">modules/tablecals.xsl</a></div></div></div><div id="S-59097-docbook.org.ns.docbook.functions.private.cals.colsep,3" class="instruction function"><div class="title"><span class="link"></span>Function fcals:colsep($row as element(db:row), $node as element()?, $colnum as xs:integer) as xs:boolean</div><div class="props"><div class="calls">Calls: <a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.cell-decoration,3">fcals:cell-decoration()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.cell-decoration,3">fcals:cell-decoration()</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-59097">modules/tablecals.xsl</a></div></div></div><div id="S-59097-docbook.org.ns.docbook.functions.private.cals.colsep-colspec,2" class="instruction function"><div class="title"><span class="link"></span>Function fcals:colsep-colspec($node as element(), $name as xs:string) as xs:boolean</div><div class="props"><div class="calls">Calls: <a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.colsep,3">fcals:colsep()</a>, <a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.colsep-spanspec,2">fcals:colsep-spanspec()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.colsep,3">fcals:colsep()</a>, <a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.colsep-spanspec,2">fcals:colsep-spanspec()</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-59097">modules/tablecals.xsl</a></div></div></div><div id="S-59097-docbook.org.ns.docbook.functions.private.cals.colsep-spanspec,2" class="instruction function"><div class="title"><span class="link"></span>Function fcals:colsep-spanspec($node as element(), $name as xs:string) as xs:boolean</div><div class="props"><div class="calls">Calls: <a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.colsep,3">fcals:colsep()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.colsep,3">fcals:colsep()</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-59097">modules/tablecals.xsl</a></div></div></div><div id="S-59097-docbook.org.ns.docbook.functions.private.cals.empty-cell-colsep,2" class="instruction function"><div class="title"><span class="link"></span>Function fcals:empty-cell-colsep($row as element(db:row), $cell as map(*)) as xs:boolean</div><div class="props"><div class="calls">Calls: <a href="#S-59097-docbook.org.ns.docbook.functions.cals-colsep,3">f:cals-colsep()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-59097-docbook.org.ns.docbook.functions.cals-colsep,3">f:cals-colsep()</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-59097">modules/tablecals.xsl</a></div></div></div><div id="S-59097-docbook.org.ns.docbook.functions.private.cals.rowsep,3" class="instruction function"><div class="title"><span class="link"></span>Function fcals:rowsep($row as element(db:row), $node as element()?, $colnum as xs:integer) as xs:boolean</div><div class="props"><div class="calls">Calls: <a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.cell-decoration,3">fcals:cell-decoration()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.cell-decoration,3">fcals:cell-decoration()</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-59097">modules/tablecals.xsl</a></div></div></div><div id="S-59097-docbook.org.ns.docbook.functions.private.cals.rowsep-colspec,2" class="instruction function"><div class="title"><span class="link"></span>Function fcals:rowsep-colspec($node as element(), $name as xs:string) as xs:boolean</div><div class="props"><div class="calls">Calls: <a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.rowsep,3">fcals:rowsep()</a>, <a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.rowsep-spanspec,2">fcals:rowsep-spanspec()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.rowsep,3">fcals:rowsep()</a>, <a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.rowsep-spanspec,2">fcals:rowsep-spanspec()</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-59097">modules/tablecals.xsl</a></div></div></div><div id="S-59097-docbook.org.ns.docbook.functions.private.cals.rowsep-spanspec,2" class="instruction function"><div class="title"><span class="link"></span>Function fcals:rowsep-spanspec($node as element(), $name as xs:string) as xs:boolean</div><div class="props"><div class="calls">Calls: <a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.rowsep,3">fcals:rowsep()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.rowsep,3">fcals:rowsep()</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-59097">modules/tablecals.xsl</a></div></div></div><div id="S-59097-docbook.org.ns.docbook.functions.private.cals.align,3" class="instruction function"><div class="title"><span class="link"></span>Function fcals:align($row as element(db:row), $node as element()?, $colnum as xs:integer) as xs:string?</div><div class="props"><div class="calls">Calls: <a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.cell-decoration,3">fcals:cell-decoration()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.cell-decoration,3">fcals:cell-decoration()</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-59097">modules/tablecals.xsl</a></div></div></div><div id="S-59097-docbook.org.ns.docbook.functions.private.cals.align-colspec,2" class="instruction function"><div class="title"><span class="link"></span>Function fcals:align-colspec($node as element(), $name as xs:string) as xs:string?</div><div class="props"><div class="calls">Calls: <a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.align,3">fcals:align()</a>, <a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.align-spanspec,2">fcals:align-spanspec()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.align,3">fcals:align()</a>, <a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.align-spanspec,2">fcals:align-spanspec()</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-59097">modules/tablecals.xsl</a></div></div></div><div id="S-59097-docbook.org.ns.docbook.functions.private.cals.align-spanspec,2" class="instruction function"><div class="title"><span class="link"></span>Function fcals:align-spanspec($node as element(), $name as xs:string) as xs:string?</div><div class="props"><div class="calls">Calls: <a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.align,3">fcals:align()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.align,3">fcals:align()</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-59097">modules/tablecals.xsl</a></div></div></div><div id="S-59097-docbook.org.ns.docbook.functions.private.cals.char,3" class="instruction function"><div class="title"><span class="link"></span>Function fcals:char($row as element(db:row), $node as element()?, $colnum as xs:integer) as xs:string?</div><div class="props"><div class="calls">Calls: <a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.cell-decoration,3">fcals:cell-decoration()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.cell-decoration,3">fcals:cell-decoration()</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-59097">modules/tablecals.xsl</a></div></div></div><div id="S-59097-docbook.org.ns.docbook.functions.private.cals.char-colspec,2" class="instruction function"><div class="title"><span class="link"></span>Function fcals:char-colspec($node as element(), $name as xs:string) as xs:string?</div><div class="props"><div class="calls">Calls: <a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.char,3">fcals:char()</a>, <a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.char-spanspec,2">fcals:char-spanspec()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.char,3">fcals:char()</a>, <a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.char-spanspec,2">fcals:char-spanspec()</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-59097">modules/tablecals.xsl</a></div></div></div><div id="S-59097-docbook.org.ns.docbook.functions.private.cals.char-spanspec,2" class="instruction function"><div class="title"><span class="link"></span>Function fcals:char-spanspec($node as element(), $name as xs:string) as xs:string?</div><div class="props"><div class="calls">Calls: <a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.char,3">fcals:char()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.char,3">fcals:char()</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-59097">modules/tablecals.xsl</a></div></div></div><div id="S-59097-docbook.org.ns.docbook.functions.private.cals.valign,2" class="instruction function"><div class="title"><span class="link"></span>Function fcals:valign($row as element(db:row), $node as element()?) as xs:string?</div><div class="props"><div class="calls">Calls: <a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.cell-decoration,3">fcals:cell-decoration()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.cell-decoration,3">fcals:cell-decoration()</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-59097">modules/tablecals.xsl</a></div></div></div><div id="S-59097-docbook.org.ns.docbook.functions.cals-rowsep,3" class="instruction function"><div class="title"><span class="link"></span>Function f:cals-rowsep($row as element(db:row), $cell as map(*), $last-row-rowsep as xs:boolean) as xs:string?</div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-59097-docbook.org.ns.docbook.templates.private.cell">tp:cell</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-59097">modules/tablecals.xsl</a></div></div></div><div id="S-59097-docbook.org.ns.docbook.functions.cals-colsep,3" class="instruction function"><div class="title"><span class="link"></span>Function f:cals-colsep($row as element(db:row), $cell as map(*), $last-col-colsep as xs:boolean) as xs:string?</div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-59097-docbook.org.ns.docbook.templates.private.cell">tp:cell</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-59097">modules/tablecals.xsl</a></div></div></div><div id="S-59097-docbook.org.ns.docbook.functions.private.cals.empty-cell-rowsep,1" class="instruction function"><div class="title"><span class="link"></span>Function fcals:empty-cell-rowsep($row as element(db:row)) as xs:boolean</div><div class="props"><div class="calls">Calls: <a href="#S-59097-docbook.org.ns.docbook.functions.cals-rowsep,3">f:cals-rowsep()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-59097-docbook.org.ns.docbook.functions.cals-rowsep,3">f:cals-rowsep()</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-59097">modules/tablecals.xsl</a></div></div></div><div id="S-59097-docbook.org.ns.docbook.functions.private.only-initial-pis,1" class="instruction function"><div class="title"><span class="link"></span>Function fp:only-initial-pis($nodes as node()*) as processing-instruction()*</div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-59097-t-6">template</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-59097">modules/tablecals.xsl</a></div></div></div><div id="S-59097-docbook.org.ns.docbook.functions.private.align-char-pad,3" class="instruction function"><div class="title"><span class="link"></span>Function fp:align-char-pad($text as xs:string, $width as xs:integer, $pad as xs:string) as xs:string <span class="recursive" title="Recursive function">♻</span></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-59097-t-6">template</a>, <a href="#S-59097-docbook.org.ns.docbook.functions.private.align-char-pad,3">fp:align-char-pad()</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-59097">modules/tablecals.xsl</a></div></div></div><div id="S-59097-docbook.org.ns.docbook.functions.private.cals.table-columns,1" class="instruction function"><div class="title"><span class="link"></span>Function fcals:table-columns($node as element()) as xs:integer</div><div class="props"><div class="calls">Calls: <a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.zeros,1">fcals:zeros()</a>, <a href="#S-59097-docbook.org.ns.docbook.functions.cals-colsep,3">f:cals-colsep()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-59097-t-5">template</a>, <a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.zeros,1">fcals:zeros()</a>, <a href="#S-59097-docbook.org.ns.docbook.functions.cals-colsep,3">f:cals-colsep()</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-59097">modules/tablecals.xsl</a></div></div></div><div id="S-59097-docbook.org.ns.docbook.functions.private.cals.tgroup,1" class="instruction function"><div class="title"><span class="link"></span>Function fcals:tgroup($node as element()) as element()</div><div class="props"><div class="calls">Calls: <a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.align,3">fcals:align()</a>, <a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.char,3">fcals:char()</a>, <a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.colsep,3">fcals:colsep()</a>, <a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.colsep-colspec,2">fcals:colsep-colspec()</a>, <a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.colspec,2">fcals:colspec()</a>, <a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.empty-cell-colsep,2">fcals:empty-cell-colsep()</a>, <a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.empty-cell-rowsep,1">fcals:empty-cell-rowsep()</a>, <a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.rowsep,3">fcals:rowsep()</a>, <a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.spanspec,2">fcals:spanspec()</a>, <a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.table-columns,1">fcals:table-columns()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-59097-t-6">template</a>, <a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.align,3">fcals:align()</a>, <a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.char,3">fcals:char()</a>, <a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.colsep,3">fcals:colsep()</a>, <a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.colsep-colspec,2">fcals:colsep-colspec()</a>, <a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.colspec,2">fcals:colspec()</a>, <a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.empty-cell-colsep,2">fcals:empty-cell-colsep()</a>, <a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.empty-cell-rowsep,1">fcals:empty-cell-rowsep()</a>, <a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.rowsep,3">fcals:rowsep()</a>, <a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.spanspec,2">fcals:spanspec()</a>, <a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.table-columns,1">fcals:table-columns()</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-59097">modules/tablecals.xsl</a></div></div></div><div id="S-59097-docbook.org.ns.docbook.functions.private.cals.zeros,1" class="instruction function"><div class="title"><span class="link"></span>Function fcals:zeros($row as element(db:row))</div><div class="props"><div class="calls">Calls: <a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.overhang,1">fcals:overhang()</a>, <a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.overhang-into-row,1">fcals:overhang-into-row()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.overhang,1">fcals:overhang()</a>, <a href="#S-59097-docbook.org.ns.docbook.functions.private.cals.overhang-into-row,1">fcals:overhang-into-row()</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-59097">modules/tablecals.xsl</a></div></div></div></div></div><div class="instructions"><div class="title closed">FIXME: comments</div><div class="body"><div id="S-59097-c-17" class="instruction comment"><div class="title"><span class="link"></span>Comment</div><div class="props">FIXME: optimize this</div></div></div></div><div class="source-code"><div class="title closed">Source code</div><div class="body"><div><table><tr><td valign="top" align="right"><pre class="fake-prism"><span id="line-S-59097-1">1</span>
<span id="line-S-59097-2"><span class="lno">2</span></span>
<span id="line-S-59097-3"><span class="lno">3</span></span>
<span id="line-S-59097-4"><span class="lno">4</span></span>
<span id="line-S-59097-5">5</span>
<span id="line-S-59097-6"><span class="lno">6</span></span>
<span id="line-S-59097-7"><span class="lno">7</span></span>
<span id="line-S-59097-8"><span class="lno">8</span></span>
<span id="line-S-59097-9"><span class="lno">9</span></span>
<span id="line-S-59097-10">10</span>
<span id="line-S-59097-11"><span class="lno">11</span></span>
<span id="line-S-59097-12"><span class="lno">12</span></span>
<span id="line-S-59097-13"><span class="lno">13</span></span>
<span id="line-S-59097-14"><span class="lno">14</span></span>
<span id="line-S-59097-15">15</span>
<span id="line-S-59097-16"><span class="lno">16</span></span>
<span id="line-S-59097-17"><span class="lno">17</span></span>
<span id="line-S-59097-18"><span class="lno">18</span></span>
<span id="line-S-59097-19"><span class="lno">19</span></span>
<span id="line-S-59097-20">20</span>
<span id="line-S-59097-21"><span class="lno">21</span></span>
<span id="line-S-59097-22"><span class="lno">22</span></span>
<span id="line-S-59097-23"><span class="lno">23</span></span>
<span id="line-S-59097-24"><span class="lno">24</span></span>
<span id="line-S-59097-25">25</span>
<span id="line-S-59097-26"><span class="lno">26</span></span>
<span id="line-S-59097-27"><span class="lno">27</span></span>
<span id="line-S-59097-28"><span class="lno">28</span></span>
<span id="line-S-59097-29"><span class="lno">29</span></span>
<span id="line-S-59097-30">30</span>
<span id="line-S-59097-31"><span class="lno">31</span></span>
<span id="line-S-59097-32"><span class="lno">32</span></span>
<span id="line-S-59097-33"><span class="lno">33</span></span>
<span id="line-S-59097-34"><span class="lno">34</span></span>
<span id="line-S-59097-35">35</span>
<span id="line-S-59097-36"><span class="lno">36</span></span>
<span id="line-S-59097-37"><span class="lno">37</span></span>
<span id="line-S-59097-38"><span class="lno">38</span></span>
<span id="line-S-59097-39"><span class="lno">39</span></span>
<span id="line-S-59097-40">40</span>
<span id="line-S-59097-41"><span class="lno">41</span></span>
<span id="line-S-59097-42"><span class="lno">42</span></span>
<span id="line-S-59097-43"><span class="lno">43</span></span>
<span id="line-S-59097-44"><span class="lno">44</span></span>
<span id="line-S-59097-45">45</span>
<span id="line-S-59097-46"><span class="lno">46</span></span>
<span id="line-S-59097-47"><span class="lno">47</span></span>
<span id="line-S-59097-48"><span class="lno">48</span></span>
<span id="line-S-59097-49"><span class="lno">49</span></span>
<span id="line-S-59097-50">50</span>
<span id="line-S-59097-51"><span class="lno">51</span></span>
<span id="line-S-59097-52"><span class="lno">52</span></span>
<span id="line-S-59097-53"><span class="lno">53</span></span>
<span id="line-S-59097-54"><span class="lno">54</span></span>
<span id="line-S-59097-55">55</span>
<span id="line-S-59097-56"><span class="lno">56</span></span>
<span id="line-S-59097-57"><span class="lno">57</span></span>
<span id="line-S-59097-58"><span class="lno">58</span></span>
<span id="line-S-59097-59"><span class="lno">59</span></span>
<span id="line-S-59097-60">60</span>
<span id="line-S-59097-61"><span class="lno">61</span></span>
<span id="line-S-59097-62"><span class="lno">62</span></span>
<span id="line-S-59097-63"><span class="lno">63</span></span>
<span id="line-S-59097-64"><span class="lno">64</span></span>
<span id="line-S-59097-65">65</span>
<span id="line-S-59097-66"><span class="lno">66</span></span>
<span id="line-S-59097-67"><span class="lno">67</span></span>
<span id="line-S-59097-68"><span class="lno">68</span></span>
<span id="line-S-59097-69"><span class="lno">69</span></span>
<span id="line-S-59097-70">70</span>
<span id="line-S-59097-71"><span class="lno">71</span></span>
<span id="line-S-59097-72"><span class="lno">72</span></span>
<span id="line-S-59097-73"><span class="lno">73</span></span>
<span id="line-S-59097-74"><span class="lno">74</span></span>
<span id="line-S-59097-75">75</span>
<span id="line-S-59097-76"><span class="lno">76</span></span>
<span id="line-S-59097-77"><span class="lno">77</span></span>
<span id="line-S-59097-78"><span class="lno">78</span></span>
<span id="line-S-59097-79"><span class="lno">79</span></span>
<span id="line-S-59097-80">80</span>
<span id="line-S-59097-81"><span class="lno">81</span></span>
<span id="line-S-59097-82"><span class="lno">82</span></span>
<span id="line-S-59097-83"><span class="lno">83</span></span>
<span id="line-S-59097-84"><span class="lno">84</span></span>
<span id="line-S-59097-85">85</span>
<span id="line-S-59097-86"><span class="lno">86</span></span>
<span id="line-S-59097-87"><span class="lno">87</span></span>
<span id="line-S-59097-88"><span class="lno">88</span></span>
<span id="line-S-59097-89"><span class="lno">89</span></span>
<span id="line-S-59097-90">90</span>
<span id="line-S-59097-91"><span class="lno">91</span></span>
<span id="line-S-59097-92"><span class="lno">92</span></span>
<span id="line-S-59097-93"><span class="lno">93</span></span>
<span id="line-S-59097-94"><span class="lno">94</span></span>
<span id="line-S-59097-95">95</span>
<span id="line-S-59097-96"><span class="lno">96</span></span>
<span id="line-S-59097-97"><span class="lno">97</span></span>
<span id="line-S-59097-98"><span class="lno">98</span></span>
<span id="line-S-59097-99"><span class="lno">99</span></span>
<span id="line-S-59097-100">100</span>
<span id="line-S-59097-101"><span class="lno">101</span></span>
<span id="line-S-59097-102"><span class="lno">102</span></span>
<span id="line-S-59097-103"><span class="lno">103</span></span>
<span id="line-S-59097-104"><span class="lno">104</span></span>
<span id="line-S-59097-105">105</span>
<span id="line-S-59097-106"><span class="lno">106</span></span>
<span id="line-S-59097-107"><span class="lno">107</span></span>
<span id="line-S-59097-108"><span class="lno">108</span></span>
<span id="line-S-59097-109"><span class="lno">109</span></span>
<span id="line-S-59097-110">110</span>
<span id="line-S-59097-111"><span class="lno">111</span></span>
<span id="line-S-59097-112"><span class="lno">112</span></span>
<span id="line-S-59097-113"><span class="lno">113</span></span>
<span id="line-S-59097-114"><span class="lno">114</span></span>
<span id="line-S-59097-115">115</span>
<span id="line-S-59097-116"><span class="lno">116</span></span>
<span id="line-S-59097-117"><span class="lno">117</span></span>
<span id="line-S-59097-118"><span class="lno">118</span></span>
<span id="line-S-59097-119"><span class="lno">119</span></span>
<span id="line-S-59097-120">120</span>
<span id="line-S-59097-121"><span class="lno">121</span></span>
<span id="line-S-59097-122"><span class="lno">122</span></span>
<span id="line-S-59097-123"><span class="lno">123</span></span>
<span id="line-S-59097-124"><span class="lno">124</span></span>
<span id="line-S-59097-125">125</span>
<span id="line-S-59097-126"><span class="lno">126</span></span>
<span id="line-S-59097-127"><span class="lno">127</span></span>
<span id="line-S-59097-128"><span class="lno">128</span></span>
<span id="line-S-59097-129"><span class="lno">129</span></span>
<span id="line-S-59097-130">130</span>
<span id="line-S-59097-131"><span class="lno">131</span></span>
<span id="line-S-59097-132"><span class="lno">132</span></span>
<span id="line-S-59097-133"><span class="lno">133</span></span>
<span id="line-S-59097-134"><span class="lno">134</span></span>
<span id="line-S-59097-135">135</span>
<span id="line-S-59097-136"><span class="lno">136</span></span>
<span id="line-S-59097-137"><span class="lno">137</span></span>
<span id="line-S-59097-138"><span class="lno">138</span></span>
<span id="line-S-59097-139"><span class="lno">139</span></span>
<span id="line-S-59097-140">140</span>
<span id="line-S-59097-141"><span class="lno">141</span></span>
<span id="line-S-59097-142"><span class="lno">142</span></span>
<span id="line-S-59097-143"><span class="lno">143</span></span>
<span id="line-S-59097-144"><span class="lno">144</span></span>
<span id="line-S-59097-145">145</span>
<span id="line-S-59097-146"><span class="lno">146</span></span>
<span id="line-S-59097-147"><span class="lno">147</span></span>
<span id="line-S-59097-148"><span class="lno">148</span></span>
<span id="line-S-59097-149"><span class="lno">149</span></span>
<span id="line-S-59097-150">150</span>
<span id="line-S-59097-151"><span class="lno">151</span></span>
<span id="line-S-59097-152"><span class="lno">152</span></span>
<span id="line-S-59097-153"><span class="lno">153</span></span>
<span id="line-S-59097-154"><span class="lno">154</span></span>
<span id="line-S-59097-155">155</span>
<span id="line-S-59097-156"><span class="lno">156</span></span>
<span id="line-S-59097-157"><span class="lno">157</span></span>
<span id="line-S-59097-158"><span class="lno">158</span></span>
<span id="line-S-59097-159"><span class="lno">159</span></span>
<span id="line-S-59097-160">160</span>
<span id="line-S-59097-161"><span class="lno">161</span></span>
<span id="line-S-59097-162"><span class="lno">162</span></span>
<span id="line-S-59097-163"><span class="lno">163</span></span>
<span id="line-S-59097-164"><span class="lno">164</span></span>
<span id="line-S-59097-165">165</span>
<span id="line-S-59097-166"><span class="lno">166</span></span>
<span id="line-S-59097-167"><span class="lno">167</span></span>
<span id="line-S-59097-168"><span class="lno">168</span></span>
<span id="line-S-59097-169"><span class="lno">169</span></span>
<span id="line-S-59097-170">170</span>
<span id="line-S-59097-171"><span class="lno">171</span></span>
<span id="line-S-59097-172"><span class="lno">172</span></span>
<span id="line-S-59097-173"><span class="lno">173</span></span>
<span id="line-S-59097-174"><span class="lno">174</span></span>
<span id="line-S-59097-175">175</span>
<span id="line-S-59097-176"><span class="lno">176</span></span>
<span id="line-S-59097-177"><span class="lno">177</span></span>
<span id="line-S-59097-178"><span class="lno">178</span></span>
<span id="line-S-59097-179"><span class="lno">179</span></span>
<span id="line-S-59097-180">180</span>
<span id="line-S-59097-181"><span class="lno">181</span></span>
<span id="line-S-59097-182"><span class="lno">182</span></span>
<span id="line-S-59097-183"><span class="lno">183</span></span>
<span id="line-S-59097-184"><span class="lno">184</span></span>
<span id="line-S-59097-185">185</span>
<span id="line-S-59097-186"><span class="lno">186</span></span>
<span id="line-S-59097-187"><span class="lno">187</span></span>
<span id="line-S-59097-188"><span class="lno">188</span></span>
<span id="line-S-59097-189"><span class="lno">189</span></span>
<span id="line-S-59097-190">190</span>
<span id="line-S-59097-191"><span class="lno">191</span></span>
<span id="line-S-59097-192"><span class="lno">192</span></span>
<span id="line-S-59097-193"><span class="lno">193</span></span>
<span id="line-S-59097-194"><span class="lno">194</span></span>
<span id="line-S-59097-195">195</span>
<span id="line-S-59097-196"><span class="lno">196</span></span>
<span id="line-S-59097-197"><span class="lno">197</span></span>
<span id="line-S-59097-198"><span class="lno">198</span></span>
<span id="line-S-59097-199"><span class="lno">199</span></span>
<span id="line-S-59097-200">200</span>
<span id="line-S-59097-201"><span class="lno">201</span></span>
<span id="line-S-59097-202"><span class="lno">202</span></span>
<span id="line-S-59097-203"><span class="lno">203</span></span>
<span id="line-S-59097-204"><span class="lno">204</span></span>
<span id="line-S-59097-205">205</span>
<span id="line-S-59097-206"><span class="lno">206</span></span>
<span id="line-S-59097-207"><span class="lno">207</span></span>
<span id="line-S-59097-208"><span class="lno">208</span></span>
<span id="line-S-59097-209"><span class="lno">209</span></span>
<span id="line-S-59097-210">210</span>
<span id="line-S-59097-211"><span class="lno">211</span></span>
<span id="line-S-59097-212"><span class="lno">212</span></span>
<span id="line-S-59097-213"><span class="lno">213</span></span>
<span id="line-S-59097-214"><span class="lno">214</span></span>
<span id="line-S-59097-215">215</span>
<span id="line-S-59097-216"><span class="lno">216</span></span>
<span id="line-S-59097-217"><span class="lno">217</span></span>
<span id="line-S-59097-218"><span class="lno">218</span></span>
<span id="line-S-59097-219"><span class="lno">219</span></span>
<span id="line-S-59097-220">220</span>
<span id="line-S-59097-221"><span class="lno">221</span></span>
<span id="line-S-59097-222"><span class="lno">222</span></span>
<span id="line-S-59097-223"><span class="lno">223</span></span>
<span id="line-S-59097-224"><span class="lno">224</span></span>
<span id="line-S-59097-225">225</span>
<span id="line-S-59097-226"><span class="lno">226</span></span>
<span id="line-S-59097-227"><span class="lno">227</span></span>
<span id="line-S-59097-228"><span class="lno">228</span></span>
<span id="line-S-59097-229"><span class="lno">229</span></span>
<span id="line-S-59097-230">230</span>
<span id="line-S-59097-231"><span class="lno">231</span></span>
<span id="line-S-59097-232"><span class="lno">232</span></span>
<span id="line-S-59097-233"><span class="lno">233</span></span>
<span id="line-S-59097-234"><span class="lno">234</span></span>
<span id="line-S-59097-235">235</span>
<span id="line-S-59097-236"><span class="lno">236</span></span>
<span id="line-S-59097-237"><span class="lno">237</span></span>
<span id="line-S-59097-238"><span class="lno">238</span></span>
<span id="line-S-59097-239"><span class="lno">239</span></span>
<span id="line-S-59097-240">240</span>
<span id="line-S-59097-241"><span class="lno">241</span></span>
<span id="line-S-59097-242"><span class="lno">242</span></span>
<span id="line-S-59097-243"><span class="lno">243</span></span>
<span id="line-S-59097-244"><span class="lno">244</span></span>
<span id="line-S-59097-245">245</span>
<span id="line-S-59097-246"><span class="lno">246</span></span>
<span id="line-S-59097-247"><span class="lno">247</span></span>
<span id="line-S-59097-248"><span class="lno">248</span></span>
<span id="line-S-59097-249"><span class="lno">249</span></span>
<span id="line-S-59097-250">250</span>
<span id="line-S-59097-251"><span class="lno">251</span></span>
<span id="line-S-59097-252"><span class="lno">252</span></span>
<span id="line-S-59097-253"><span class="lno">253</span></span>
<span id="line-S-59097-254"><span class="lno">254</span></span>
<span id="line-S-59097-255">255</span>
<span id="line-S-59097-256"><span class="lno">256</span></span>
<span id="line-S-59097-257"><span class="lno">257</span></span>
<span id="line-S-59097-258"><span class="lno">258</span></span>
<span id="line-S-59097-259"><span class="lno">259</span></span>
<span id="line-S-59097-260">260</span>
<span id="line-S-59097-261"><span class="lno">261</span></span>
<span id="line-S-59097-262"><span class="lno">262</span></span>
<span id="line-S-59097-263"><span class="lno">263</span></span>
<span id="line-S-59097-264"><span class="lno">264</span></span>
<span id="line-S-59097-265">265</span>
<span id="line-S-59097-266"><span class="lno">266</span></span>
<span id="line-S-59097-267"><span class="lno">267</span></span>
<span id="line-S-59097-268"><span class="lno">268</span></span>
<span id="line-S-59097-269"><span class="lno">269</span></span>
<span id="line-S-59097-270">270</span>
<span id="line-S-59097-271"><span class="lno">271</span></span>
<span id="line-S-59097-272"><span class="lno">272</span></span>
<span id="line-S-59097-273"><span class="lno">273</span></span>
<span id="line-S-59097-274"><span class="lno">274</span></span>
<span id="line-S-59097-275">275</span>
<span id="line-S-59097-276"><span class="lno">276</span></span>
<span id="line-S-59097-277"><span class="lno">277</span></span>
<span id="line-S-59097-278"><span class="lno">278</span></span>
<span id="line-S-59097-279"><span class="lno">279</span></span>
<span id="line-S-59097-280">280</span>
<span id="line-S-59097-281"><span class="lno">281</span></span>
<span id="line-S-59097-282"><span class="lno">282</span></span>
<span id="line-S-59097-283"><span class="lno">283</span></span>
<span id="line-S-59097-284"><span class="lno">284</span></span>
<span id="line-S-59097-285">285</span>
<span id="line-S-59097-286"><span class="lno">286</span></span>
<span id="line-S-59097-287"><span class="lno">287</span></span>
<span id="line-S-59097-288"><span class="lno">288</span></span>
<span id="line-S-59097-289"><span class="lno">289</span></span>
<span id="line-S-59097-290">290</span>
<span id="line-S-59097-291"><span class="lno">291</span></span>
<span id="line-S-59097-292"><span class="lno">292</span></span>
<span id="line-S-59097-293"><span class="lno">293</span></span>
<span id="line-S-59097-294"><span class="lno">294</span></span>
<span id="line-S-59097-295">295</span>
<span id="line-S-59097-296"><span class="lno">296</span></span>
<span id="line-S-59097-297"><span class="lno">297</span></span>
<span id="line-S-59097-298"><span class="lno">298</span></span>
<span id="line-S-59097-299"><span class="lno">299</span></span>
<span id="line-S-59097-300">300</span>
<span id="line-S-59097-301"><span class="lno">301</span></span>
<span id="line-S-59097-302"><span class="lno">302</span></span>
<span id="line-S-59097-303"><span class="lno">303</span></span>
<span id="line-S-59097-304"><span class="lno">304</span></span>
<span id="line-S-59097-305">305</span>
<span id="line-S-59097-306"><span class="lno">306</span></span>
<span id="line-S-59097-307"><span class="lno">307</span></span>
<span id="line-S-59097-308"><span class="lno">308</span></span>
<span id="line-S-59097-309"><span class="lno">309</span></span>
<span id="line-S-59097-310">310</span>
<span id="line-S-59097-311"><span class="lno">311</span></span>
<span id="line-S-59097-312"><span class="lno">312</span></span>
<span id="line-S-59097-313"><span class="lno">313</span></span>
<span id="line-S-59097-314"><span class="lno">314</span></span>
<span id="line-S-59097-315">315</span>
<span id="line-S-59097-316"><span class="lno">316</span></span>
<span id="line-S-59097-317"><span class="lno">317</span></span>
<span id="line-S-59097-318"><span class="lno">318</span></span>
<span id="line-S-59097-319"><span class="lno">319</span></span>
<span id="line-S-59097-320">320</span>
<span id="line-S-59097-321"><span class="lno">321</span></span>
<span id="line-S-59097-322"><span class="lno">322</span></span>
<span id="line-S-59097-323"><span class="lno">323</span></span>
<span id="line-S-59097-324"><span class="lno">324</span></span>
<span id="line-S-59097-325">325</span>
<span id="line-S-59097-326"><span class="lno">326</span></span>
<span id="line-S-59097-327"><span class="lno">327</span></span>
<span id="line-S-59097-328"><span class="lno">328</span></span>
<span id="line-S-59097-329"><span class="lno">329</span></span>
<span id="line-S-59097-330">330</span>
<span id="line-S-59097-331"><span class="lno">331</span></span>
<span id="line-S-59097-332"><span class="lno">332</span></span>
<span id="line-S-59097-333"><span class="lno">333</span></span>
<span id="line-S-59097-334"><span class="lno">334</span></span>
<span id="line-S-59097-335">335</span>
<span id="line-S-59097-336"><span class="lno">336</span></span>
<span id="line-S-59097-337"><span class="lno">337</span></span>
<span id="line-S-59097-338"><span class="lno">338</span></span>
<span id="line-S-59097-339"><span class="lno">339</span></span>
<span id="line-S-59097-340">340</span>
<span id="line-S-59097-341"><span class="lno">341</span></span>
<span id="line-S-59097-342"><span class="lno">342</span></span>
<span id="line-S-59097-343"><span class="lno">343</span></span>
<span id="line-S-59097-344"><span class="lno">344</span></span>
<span id="line-S-59097-345">345</span>
<span id="line-S-59097-346"><span class="lno">346</span></span>
<span id="line-S-59097-347"><span class="lno">347</span></span>
<span id="line-S-59097-348"><span class="lno">348</span></span>
<span id="line-S-59097-349"><span class="lno">349</span></span>
<span id="line-S-59097-350">350</span>
<span id="line-S-59097-351"><span class="lno">351</span></span>
<span id="line-S-59097-352"><span class="lno">352</span></span>
<span id="line-S-59097-353"><span class="lno">353</span></span>
<span id="line-S-59097-354"><span class="lno">354</span></span>
<span id="line-S-59097-355">355</span>
<span id="line-S-59097-356"><span class="lno">356</span></span>
<span id="line-S-59097-357"><span class="lno">357</span></span>
<span id="line-S-59097-358"><span class="lno">358</span></span>
<span id="line-S-59097-359"><span class="lno">359</span></span>
<span id="line-S-59097-360">360</span>
<span id="line-S-59097-361"><span class="lno">361</span></span>
<span id="line-S-59097-362"><span class="lno">362</span></span>
<span id="line-S-59097-363"><span class="lno">363</span></span>
<span id="line-S-59097-364"><span class="lno">364</span></span>
<span id="line-S-59097-365">365</span>
<span id="line-S-59097-366"><span class="lno">366</span></span>
<span id="line-S-59097-367"><span class="lno">367</span></span>
<span id="line-S-59097-368"><span class="lno">368</span></span>
<span id="line-S-59097-369"><span class="lno">369</span></span>
<span id="line-S-59097-370">370</span>
<span id="line-S-59097-371"><span class="lno">371</span></span>
<span id="line-S-59097-372"><span class="lno">372</span></span>
<span id="line-S-59097-373"><span class="lno">373</span></span>
<span id="line-S-59097-374"><span class="lno">374</span></span>
<span id="line-S-59097-375">375</span>
<span id="line-S-59097-376"><span class="lno">376</span></span>
<span id="line-S-59097-377"><span class="lno">377</span></span>
<span id="line-S-59097-378"><span class="lno">378</span></span>
<span id="line-S-59097-379"><span class="lno">379</span></span>
<span id="line-S-59097-380">380</span>
<span id="line-S-59097-381"><span class="lno">381</span></span>
<span id="line-S-59097-382"><span class="lno">382</span></span>
<span id="line-S-59097-383"><span class="lno">383</span></span>
<span id="line-S-59097-384"><span class="lno">384</span></span>
<span id="line-S-59097-385">385</span>
<span id="line-S-59097-386"><span class="lno">386</span></span>
<span id="line-S-59097-387"><span class="lno">387</span></span>
<span id="line-S-59097-388"><span class="lno">388</span></span>
<span id="line-S-59097-389"><span class="lno">389</span></span>
<span id="line-S-59097-390">390</span>
<span id="line-S-59097-391"><span class="lno">391</span></span>
<span id="line-S-59097-392"><span class="lno">392</span></span>
<span id="line-S-59097-393"><span class="lno">393</span></span>
<span id="line-S-59097-394"><span class="lno">394</span></span>
<span id="line-S-59097-395">395</span>
<span id="line-S-59097-396"><span class="lno">396</span></span>
<span id="line-S-59097-397"><span class="lno">397</span></span>
<span id="line-S-59097-398"><span class="lno">398</span></span>
<span id="line-S-59097-399"><span class="lno">399</span></span>
<span id="line-S-59097-400">400</span>
<span id="line-S-59097-401"><span class="lno">401</span></span>
<span id="line-S-59097-402"><span class="lno">402</span></span>
<span id="line-S-59097-403"><span class="lno">403</span></span>
<span id="line-S-59097-404"><span class="lno">404</span></span>
<span id="line-S-59097-405">405</span>
<span id="line-S-59097-406"><span class="lno">406</span></span>
<span id="line-S-59097-407"><span class="lno">407</span></span>
<span id="line-S-59097-408"><span class="lno">408</span></span>
<span id="line-S-59097-409"><span class="lno">409</span></span>
<span id="line-S-59097-410">410</span>
<span id="line-S-59097-411"><span class="lno">411</span></span>
<span id="line-S-59097-412"><span class="lno">412</span></span>
<span id="line-S-59097-413"><span class="lno">413</span></span>
<span id="line-S-59097-414"><span class="lno">414</span></span>
<span id="line-S-59097-415">415</span>
<span id="line-S-59097-416"><span class="lno">416</span></span>
<span id="line-S-59097-417"><span class="lno">417</span></span>
<span id="line-S-59097-418"><span class="lno">418</span></span>
<span id="line-S-59097-419"><span class="lno">419</span></span>
<span id="line-S-59097-420">420</span>
<span id="line-S-59097-421"><span class="lno">421</span></span>
<span id="line-S-59097-422"><span class="lno">422</span></span>
<span id="line-S-59097-423"><span class="lno">423</span></span>
<span id="line-S-59097-424"><span class="lno">424</span></span>
<span id="line-S-59097-425">425</span>
<span id="line-S-59097-426"><span class="lno">426</span></span>
<span id="line-S-59097-427"><span class="lno">427</span></span>
<span id="line-S-59097-428"><span class="lno">428</span></span>
<span id="line-S-59097-429"><span class="lno">429</span></span>
<span id="line-S-59097-430">430</span>
<span id="line-S-59097-431"><span class="lno">431</span></span>
<span id="line-S-59097-432"><span class="lno">432</span></span>
<span id="line-S-59097-433"><span class="lno">433</span></span>
<span id="line-S-59097-434"><span class="lno">434</span></span>
<span id="line-S-59097-435">435</span>
<span id="line-S-59097-436"><span class="lno">436</span></span>
<span id="line-S-59097-437"><span class="lno">437</span></span>
<span id="line-S-59097-438"><span class="lno">438</span></span>
<span id="line-S-59097-439"><span class="lno">439</span></span>
<span id="line-S-59097-440">440</span>
<span id="line-S-59097-441"><span class="lno">441</span></span>
<span id="line-S-59097-442"><span class="lno">442</span></span>
<span id="line-S-59097-443"><span class="lno">443</span></span>
<span id="line-S-59097-444"><span class="lno">444</span></span>
<span id="line-S-59097-445">445</span>
<span id="line-S-59097-446"><span class="lno">446</span></span>
<span id="line-S-59097-447"><span class="lno">447</span></span>
<span id="line-S-59097-448"><span class="lno">448</span></span>
<span id="line-S-59097-449"><span class="lno">449</span></span>
<span id="line-S-59097-450">450</span>
<span id="line-S-59097-451"><span class="lno">451</span></span>
<span id="line-S-59097-452"><span class="lno">452</span></span>
<span id="line-S-59097-453"><span class="lno">453</span></span>
<span id="line-S-59097-454"><span class="lno">454</span></span>
<span id="line-S-59097-455">455</span>
<span id="line-S-59097-456"><span class="lno">456</span></span>
<span id="line-S-59097-457"><span class="lno">457</span></span>
<span id="line-S-59097-458"><span class="lno">458</span></span>
<span id="line-S-59097-459"><span class="lno">459</span></span>
<span id="line-S-59097-460">460</span>
<span id="line-S-59097-461"><span class="lno">461</span></span>
<span id="line-S-59097-462"><span class="lno">462</span></span>
<span id="line-S-59097-463"><span class="lno">463</span></span>
<span id="line-S-59097-464"><span class="lno">464</span></span>
<span id="line-S-59097-465">465</span>
<span id="line-S-59097-466"><span class="lno">466</span></span>
<span id="line-S-59097-467"><span class="lno">467</span></span>
<span id="line-S-59097-468"><span class="lno">468</span></span>
<span id="line-S-59097-469"><span class="lno">469</span></span>
<span id="line-S-59097-470">470</span>
<span id="line-S-59097-471"><span class="lno">471</span></span>
<span id="line-S-59097-472"><span class="lno">472</span></span>
<span id="line-S-59097-473"><span class="lno">473</span></span>
<span id="line-S-59097-474"><span class="lno">474</span></span>
<span id="line-S-59097-475">475</span>
<span id="line-S-59097-476"><span class="lno">476</span></span>
<span id="line-S-59097-477"><span class="lno">477</span></span>
<span id="line-S-59097-478"><span class="lno">478</span></span>
<span id="line-S-59097-479"><span class="lno">479</span></span>
<span id="line-S-59097-480">480</span>
<span id="line-S-59097-481"><span class="lno">481</span></span>
<span id="line-S-59097-482"><span class="lno">482</span></span>
<span id="line-S-59097-483"><span class="lno">483</span></span>
<span id="line-S-59097-484"><span class="lno">484</span></span>
<span id="line-S-59097-485">485</span>
<span id="line-S-59097-486"><span class="lno">486</span></span>
<span id="line-S-59097-487"><span class="lno">487</span></span>
<span id="line-S-59097-488"><span class="lno">488</span></span>
<span id="line-S-59097-489"><span class="lno">489</span></span>
<span id="line-S-59097-490">490</span>
<span id="line-S-59097-491"><span class="lno">491</span></span>
<span id="line-S-59097-492"><span class="lno">492</span></span>
<span id="line-S-59097-493"><span class="lno">493</span></span>
<span id="line-S-59097-494"><span class="lno">494</span></span>
<span id="line-S-59097-495">495</span>
<span id="line-S-59097-496"><span class="lno">496</span></span>
<span id="line-S-59097-497"><span class="lno">497</span></span>
<span id="line-S-59097-498"><span class="lno">498</span></span>
<span id="line-S-59097-499"><span class="lno">499</span></span>
<span id="line-S-59097-500">500</span>
<span id="line-S-59097-501"><span class="lno">501</span></span>
<span id="line-S-59097-502"><span class="lno">502</span></span>
<span id="line-S-59097-503"><span class="lno">503</span></span>
<span id="line-S-59097-504"><span class="lno">504</span></span>
<span id="line-S-59097-505">505</span>
<span id="line-S-59097-506"><span class="lno">506</span></span>
<span id="line-S-59097-507"><span class="lno">507</span></span>
<span id="line-S-59097-508"><span class="lno">508</span></span>
<span id="line-S-59097-509"><span class="lno">509</span></span>
<span id="line-S-59097-510">510</span>
<span id="line-S-59097-511"><span class="lno">511</span></span>
<span id="line-S-59097-512"><span class="lno">512</span></span>
<span id="line-S-59097-513"><span class="lno">513</span></span>
<span id="line-S-59097-514"><span class="lno">514</span></span>
<span id="line-S-59097-515">515</span>
<span id="line-S-59097-516"><span class="lno">516</span></span>
<span id="line-S-59097-517"><span class="lno">517</span></span>
<span id="line-S-59097-518"><span class="lno">518</span></span>
<span id="line-S-59097-519"><span class="lno">519</span></span>
<span id="line-S-59097-520">520</span>
<span id="line-S-59097-521"><span class="lno">521</span></span>
<span id="line-S-59097-522"><span class="lno">522</span></span>
<span id="line-S-59097-523"><span class="lno">523</span></span>
<span id="line-S-59097-524"><span class="lno">524</span></span>
<span id="line-S-59097-525">525</span>
<span id="line-S-59097-526"><span class="lno">526</span></span>
<span id="line-S-59097-527"><span class="lno">527</span></span>
<span id="line-S-59097-528"><span class="lno">528</span></span>
<span id="line-S-59097-529"><span class="lno">529</span></span>
<span id="line-S-59097-530">530</span>
<span id="line-S-59097-531"><span class="lno">531</span></span>
<span id="line-S-59097-532"><span class="lno">532</span></span>
<span id="line-S-59097-533"><span class="lno">533</span></span>
<span id="line-S-59097-534"><span class="lno">534</span></span>
<span id="line-S-59097-535">535</span>
<span id="line-S-59097-536"><span class="lno">536</span></span>
<span id="line-S-59097-537"><span class="lno">537</span></span>
<span id="line-S-59097-538"><span class="lno">538</span></span>
<span id="line-S-59097-539"><span class="lno">539</span></span>
<span id="line-S-59097-540">540</span>
<span id="line-S-59097-541"><span class="lno">541</span></span>
<span id="line-S-59097-542"><span class="lno">542</span></span>
<span id="line-S-59097-543"><span class="lno">543</span></span>
<span id="line-S-59097-544"><span class="lno">544</span></span>
<span id="line-S-59097-545">545</span>
<span id="line-S-59097-546"><span class="lno">546</span></span>
<span id="line-S-59097-547"><span class="lno">547</span></span>
<span id="line-S-59097-548"><span class="lno">548</span></span>
<span id="line-S-59097-549"><span class="lno">549</span></span>
<span id="line-S-59097-550">550</span>
<span id="line-S-59097-551"><span class="lno">551</span></span>
<span id="line-S-59097-552"><span class="lno">552</span></span>
<span id="line-S-59097-553"><span class="lno">553</span></span>
<span id="line-S-59097-554"><span class="lno">554</span></span>
<span id="line-S-59097-555">555</span>
<span id="line-S-59097-556"><span class="lno">556</span></span>
<span id="line-S-59097-557"><span class="lno">557</span></span>
<span id="line-S-59097-558"><span class="lno">558</span></span>
<span id="line-S-59097-559"><span class="lno">559</span></span>
<span id="line-S-59097-560">560</span>
<span id="line-S-59097-561"><span class="lno">561</span></span>
<span id="line-S-59097-562"><span class="lno">562</span></span>
<span id="line-S-59097-563"><span class="lno">563</span></span>
<span id="line-S-59097-564"><span class="lno">564</span></span>
<span id="line-S-59097-565">565</span>
<span id="line-S-59097-566"><span class="lno">566</span></span>
<span id="line-S-59097-567"><span class="lno">567</span></span>
<span id="line-S-59097-568"><span class="lno">568</span></span>
<span id="line-S-59097-569"><span class="lno">569</span></span>
<span id="line-S-59097-570">570</span>
<span id="line-S-59097-571"><span class="lno">571</span></span>
<span id="line-S-59097-572"><span class="lno">572</span></span>
<span id="line-S-59097-573"><span class="lno">573</span></span>
<span id="line-S-59097-574"><span class="lno">574</span></span>
<span id="line-S-59097-575">575</span>
<span id="line-S-59097-576"><span class="lno">576</span></span>
<span id="line-S-59097-577"><span class="lno">577</span></span>
<span id="line-S-59097-578"><span class="lno">578</span></span>
<span id="line-S-59097-579"><span class="lno">579</span></span>
<span id="line-S-59097-580">580</span>
<span id="line-S-59097-581"><span class="lno">581</span></span>
<span id="line-S-59097-582"><span class="lno">582</span></span>
<span id="line-S-59097-583"><span class="lno">583</span></span>
<span id="line-S-59097-584"><span class="lno">584</span></span>
<span id="line-S-59097-585">585</span>
<span id="line-S-59097-586"><span class="lno">586</span></span>
<span id="line-S-59097-587"><span class="lno">587</span></span>
<span id="line-S-59097-588"><span class="lno">588</span></span>
<span id="line-S-59097-589"><span class="lno">589</span></span>
<span id="line-S-59097-590">590</span>
<span id="line-S-59097-591"><span class="lno">591</span></span>
<span id="line-S-59097-592"><span class="lno">592</span></span>
<span id="line-S-59097-593"><span class="lno">593</span></span>
<span id="line-S-59097-594"><span class="lno">594</span></span>
<span id="line-S-59097-595">595</span>
<span id="line-S-59097-596"><span class="lno">596</span></span>
<span id="line-S-59097-597"><span class="lno">597</span></span>
<span id="line-S-59097-598"><span class="lno">598</span></span>
<span id="line-S-59097-599"><span class="lno">599</span></span>
<span id="line-S-59097-600">600</span>
<span id="line-S-59097-601"><span class="lno">601</span></span>
<span id="line-S-59097-602"><span class="lno">602</span></span>
<span id="line-S-59097-603"><span class="lno">603</span></span>
<span id="line-S-59097-604"><span class="lno">604</span></span>
<span id="line-S-59097-605">605</span>
<span id="line-S-59097-606"><span class="lno">606</span></span>
<span id="line-S-59097-607"><span class="lno">607</span></span>
<span id="line-S-59097-608"><span class="lno">608</span></span>
<span id="line-S-59097-609"><span class="lno">609</span></span>
<span id="line-S-59097-610">610</span>
<span id="line-S-59097-611"><span class="lno">611</span></span>
<span id="line-S-59097-612"><span class="lno">612</span></span>
<span id="line-S-59097-613"><span class="lno">613</span></span>
<span id="line-S-59097-614"><span class="lno">614</span></span>
<span id="line-S-59097-615">615</span>
<span id="line-S-59097-616"><span class="lno">616</span></span>
<span id="line-S-59097-617"><span class="lno">617</span></span>
<span id="line-S-59097-618"><span class="lno">618</span></span>
<span id="line-S-59097-619"><span class="lno">619</span></span>
<span id="line-S-59097-620">620</span>
<span id="line-S-59097-621"><span class="lno">621</span></span>
<span id="line-S-59097-622"><span class="lno">622</span></span>
<span id="line-S-59097-623"><span class="lno">623</span></span>
<span id="line-S-59097-624"><span class="lno">624</span></span>
<span id="line-S-59097-625">625</span>
<span id="line-S-59097-626"><span class="lno">626</span></span>
<span id="line-S-59097-627"><span class="lno">627</span></span>
<span id="line-S-59097-628"><span class="lno">628</span></span>
<span id="line-S-59097-629"><span class="lno">629</span></span>
<span id="line-S-59097-630">630</span>
<span id="line-S-59097-631"><span class="lno">631</span></span>
<span id="line-S-59097-632"><span class="lno">632</span></span>
<span id="line-S-59097-633"><span class="lno">633</span></span>
<span id="line-S-59097-634"><span class="lno">634</span></span>
<span id="line-S-59097-635">635</span>
<span id="line-S-59097-636"><span class="lno">636</span></span>
<span id="line-S-59097-637"><span class="lno">637</span></span>
<span id="line-S-59097-638"><span class="lno">638</span></span>
<span id="line-S-59097-639"><span class="lno">639</span></span>
<span id="line-S-59097-640">640</span>
<span id="line-S-59097-641"><span class="lno">641</span></span>
<span id="line-S-59097-642"><span class="lno">642</span></span>
<span id="line-S-59097-643"><span class="lno">643</span></span>
<span id="line-S-59097-644"><span class="lno">644</span></span>
<span id="line-S-59097-645">645</span>
<span id="line-S-59097-646"><span class="lno">646</span></span>
<span id="line-S-59097-647"><span class="lno">647</span></span>
<span id="line-S-59097-648"><span class="lno">648</span></span>
<span id="line-S-59097-649"><span class="lno">649</span></span>
<span id="line-S-59097-650">650</span>
<span id="line-S-59097-651"><span class="lno">651</span></span>
<span id="line-S-59097-652"><span class="lno">652</span></span>
<span id="line-S-59097-653"><span class="lno">653</span></span>
<span id="line-S-59097-654"><span class="lno">654</span></span>
<span id="line-S-59097-655">655</span>
<span id="line-S-59097-656"><span class="lno">656</span></span>
<span id="line-S-59097-657"><span class="lno">657</span></span>
<span id="line-S-59097-658"><span class="lno">658</span></span>
<span id="line-S-59097-659"><span class="lno">659</span></span>
<span id="line-S-59097-660">660</span>
<span id="line-S-59097-661"><span class="lno">661</span></span>
<span id="line-S-59097-662"><span class="lno">662</span></span>
<span id="line-S-59097-663"><span class="lno">663</span></span>
<span id="line-S-59097-664"><span class="lno">664</span></span>
<span id="line-S-59097-665">665</span>
<span id="line-S-59097-666"><span class="lno">666</span></span>
<span id="line-S-59097-667"><span class="lno">667</span></span>
<span id="line-S-59097-668"><span class="lno">668</span></span>
<span id="line-S-59097-669"><span class="lno">669</span></span>
<span id="line-S-59097-670">670</span>
<span id="line-S-59097-671"><span class="lno">671</span></span>
<span id="line-S-59097-672"><span class="lno">672</span></span>
<span id="line-S-59097-673"><span class="lno">673</span></span>
<span id="line-S-59097-674"><span class="lno">674</span></span>
<span id="line-S-59097-675">675</span>
<span id="line-S-59097-676"><span class="lno">676</span></span>
<span id="line-S-59097-677"><span class="lno">677</span></span>
<span id="line-S-59097-678"><span class="lno">678</span></span>
<span id="line-S-59097-679"><span class="lno">679</span></span>
<span id="line-S-59097-680">680</span>
<span id="line-S-59097-681"><span class="lno">681</span></span>
<span id="line-S-59097-682"><span class="lno">682</span></span>
<span id="line-S-59097-683"><span class="lno">683</span></span>
<span id="line-S-59097-684"><span class="lno">684</span></span>
<span id="line-S-59097-685">685</span>
<span id="line-S-59097-686"><span class="lno">686</span></span>
<span id="line-S-59097-687"><span class="lno">687</span></span>
<span id="line-S-59097-688"><span class="lno">688</span></span>
<span id="line-S-59097-689"><span class="lno">689</span></span>
<span id="line-S-59097-690">690</span>
<span id="line-S-59097-691"><span class="lno">691</span></span>
<span id="line-S-59097-692"><span class="lno">692</span></span>
<span id="line-S-59097-693"><span class="lno">693</span></span>
<span id="line-S-59097-694"><span class="lno">694</span></span>
<span id="line-S-59097-695">695</span>
<span id="line-S-59097-696"><span class="lno">696</span></span>
<span id="line-S-59097-697"><span class="lno">697</span></span>
<span id="line-S-59097-698"><span class="lno">698</span></span>
<span id="line-S-59097-699"><span class="lno">699</span></span>
<span id="line-S-59097-700">700</span>
<span id="line-S-59097-701"><span class="lno">701</span></span>
<span id="line-S-59097-702"><span class="lno">702</span></span>
<span id="line-S-59097-703"><span class="lno">703</span></span>
<span id="line-S-59097-704"><span class="lno">704</span></span>
<span id="line-S-59097-705">705</span>
<span id="line-S-59097-706"><span class="lno">706</span></span>
<span id="line-S-59097-707"><span class="lno">707</span></span>
<span id="line-S-59097-708"><span class="lno">708</span></span>
<span id="line-S-59097-709"><span class="lno">709</span></span>
<span id="line-S-59097-710">710</span>
<span id="line-S-59097-711"><span class="lno">711</span></span>
<span id="line-S-59097-712"><span class="lno">712</span></span>
<span id="line-S-59097-713"><span class="lno">713</span></span>
<span id="line-S-59097-714"><span class="lno">714</span></span>
<span id="line-S-59097-715">715</span>
<span id="line-S-59097-716"><span class="lno">716</span></span>
<span id="line-S-59097-717"><span class="lno">717</span></span>
<span id="line-S-59097-718"><span class="lno">718</span></span>
<span id="line-S-59097-719"><span class="lno">719</span></span>
<span id="line-S-59097-720">720</span>
<span id="line-S-59097-721"><span class="lno">721</span></span>
<span id="line-S-59097-722"><span class="lno">722</span></span>
<span id="line-S-59097-723"><span class="lno">723</span></span>
<span id="line-S-59097-724"><span class="lno">724</span></span>
<span id="line-S-59097-725">725</span>
<span id="line-S-59097-726"><span class="lno">726</span></span>
<span id="line-S-59097-727"><span class="lno">727</span></span>
<span id="line-S-59097-728"><span class="lno">728</span></span>
<span id="line-S-59097-729"><span class="lno">729</span></span>
<span id="line-S-59097-730">730</span>
<span id="line-S-59097-731"><span class="lno">731</span></span>
<span id="line-S-59097-732"><span class="lno">732</span></span>
<span id="line-S-59097-733"><span class="lno">733</span></span>
<span id="line-S-59097-734"><span class="lno">734</span></span>
<span id="line-S-59097-735">735</span>
<span id="line-S-59097-736"><span class="lno">736</span></span>
<span id="line-S-59097-737"><span class="lno">737</span></span>
<span id="line-S-59097-738"><span class="lno">738</span></span>
<span id="line-S-59097-739"><span class="lno">739</span></span>
<span id="line-S-59097-740">740</span>
<span id="line-S-59097-741"><span class="lno">741</span></span>
<span id="line-S-59097-742"><span class="lno">742</span></span>
<span id="line-S-59097-743"><span class="lno">743</span></span>
<span id="line-S-59097-744"><span class="lno">744</span></span>
<span id="line-S-59097-745">745</span>
<span id="line-S-59097-746"><span class="lno">746</span></span>
<span id="line-S-59097-747"><span class="lno">747</span></span>
<span id="line-S-59097-748"><span class="lno">748</span></span>
<span id="line-S-59097-749"><span class="lno">749</span></span>
<span id="line-S-59097-750">750</span>
<span id="line-S-59097-751"><span class="lno">751</span></span>
<span id="line-S-59097-752"><span class="lno">752</span></span>
<span id="line-S-59097-753"><span class="lno">753</span></span>
<span id="line-S-59097-754"><span class="lno">754</span></span>
<span id="line-S-59097-755">755</span>
<span id="line-S-59097-756"><span class="lno">756</span></span>
<span id="line-S-59097-757"><span class="lno">757</span></span>
<span id="line-S-59097-758"><span class="lno">758</span></span>
<span id="line-S-59097-759"><span class="lno">759</span></span>
<span id="line-S-59097-760">760</span>
<span id="line-S-59097-761"><span class="lno">761</span></span>
<span id="line-S-59097-762"><span class="lno">762</span></span>
<span id="line-S-59097-763"><span class="lno">763</span></span>
<span id="line-S-59097-764"><span class="lno">764</span></span>
<span id="line-S-59097-765">765</span>
<span id="line-S-59097-766"><span class="lno">766</span></span>
<span id="line-S-59097-767"><span class="lno">767</span></span>
<span id="line-S-59097-768"><span class="lno">768</span></span>
<span id="line-S-59097-769"><span class="lno">769</span></span>
<span id="line-S-59097-770">770</span>
<span id="line-S-59097-771"><span class="lno">771</span></span>
<span id="line-S-59097-772"><span class="lno">772</span></span>
<span id="line-S-59097-773"><span class="lno">773</span></span>
<span id="line-S-59097-774"><span class="lno">774</span></span>
<span id="line-S-59097-775">775</span>
<span id="line-S-59097-776"><span class="lno">776</span></span>
<span id="line-S-59097-777"><span class="lno">777</span></span>
<span id="line-S-59097-778"><span class="lno">778</span></span>
<span id="line-S-59097-779"><span class="lno">779</span></span>
<span id="line-S-59097-780">780</span>
<span id="line-S-59097-781"><span class="lno">781</span></span>
<span id="line-S-59097-782"><span class="lno">782</span></span>
<span id="line-S-59097-783"><span class="lno">783</span></span>
<span id="line-S-59097-784"><span class="lno">784</span></span>
<span id="line-S-59097-785">785</span>
<span id="line-S-59097-786"><span class="lno">786</span></span>
<span id="line-S-59097-787"><span class="lno">787</span></span>
<span id="line-S-59097-788"><span class="lno">788</span></span>
<span id="line-S-59097-789"><span class="lno">789</span></span>
<span id="line-S-59097-790">790</span>
<span id="line-S-59097-791"><span class="lno">791</span></span>
<span id="line-S-59097-792"><span class="lno">792</span></span>
<span id="line-S-59097-793"><span class="lno">793</span></span>
<span id="line-S-59097-794"><span class="lno">794</span></span>
<span id="line-S-59097-795">795</span>
<span id="line-S-59097-796"><span class="lno">796</span></span>
<span id="line-S-59097-797"><span class="lno">797</span></span>
<span id="line-S-59097-798"><span class="lno">798</span></span>
<span id="line-S-59097-799"><span class="lno">799</span></span>
<span id="line-S-59097-800">800</span>
<span id="line-S-59097-801"><span class="lno">801</span></span>
<span id="line-S-59097-802"><span class="lno">802</span></span>
<span id="line-S-59097-803"><span class="lno">803</span></span>
<span id="line-S-59097-804"><span class="lno">804</span></span>
<span id="line-S-59097-805">805</span>
<span id="line-S-59097-806"><span class="lno">806</span></span>
<span id="line-S-59097-807"><span class="lno">807</span></span>
<span id="line-S-59097-808"><span class="lno">808</span></span>
<span id="line-S-59097-809"><span class="lno">809</span></span>
<span id="line-S-59097-810">810</span>
<span id="line-S-59097-811"><span class="lno">811</span></span>
<span id="line-S-59097-812"><span class="lno">812</span></span>
<span id="line-S-59097-813"><span class="lno">813</span></span>
<span id="line-S-59097-814"><span class="lno">814</span></span>
<span id="line-S-59097-815">815</span>
<span id="line-S-59097-816"><span class="lno">816</span></span>
<span id="line-S-59097-817"><span class="lno">817</span></span>
<span id="line-S-59097-818"><span class="lno">818</span></span>
<span id="line-S-59097-819"><span class="lno">819</span></span>
<span id="line-S-59097-820">820</span>
<span id="line-S-59097-821"><span class="lno">821</span></span>
<span id="line-S-59097-822"><span class="lno">822</span></span>
<span id="line-S-59097-823"><span class="lno">823</span></span>
<span id="line-S-59097-824"><span class="lno">824</span></span>
<span id="line-S-59097-825">825</span>
<span id="line-S-59097-826"><span class="lno">826</span></span>
<span id="line-S-59097-827"><span class="lno">827</span></span>
<span id="line-S-59097-828"><span class="lno">828</span></span>
<span id="line-S-59097-829"><span class="lno">829</span></span>
<span id="line-S-59097-830">830</span>
<span id="line-S-59097-831"><span class="lno">831</span></span>
<span id="line-S-59097-832"><span class="lno">832</span></span>
<span id="line-S-59097-833"><span class="lno">833</span></span>
<span id="line-S-59097-834"><span class="lno">834</span></span>
<span id="line-S-59097-835">835</span>
<span id="line-S-59097-836"><span class="lno">836</span></span>
<span id="line-S-59097-837"><span class="lno">837</span></span>
<span id="line-S-59097-838"><span class="lno">838</span></span>
<span id="line-S-59097-839"><span class="lno">839</span></span>
<span id="line-S-59097-840">840</span>
<span id="line-S-59097-841"><span class="lno">841</span></span>
<span id="line-S-59097-842"><span class="lno">842</span></span>
<span id="line-S-59097-843"><span class="lno">843</span></span>
<span id="line-S-59097-844"><span class="lno">844</span></span>
<span id="line-S-59097-845">845</span>
<span id="line-S-59097-846"><span class="lno">846</span></span>
<span id="line-S-59097-847"><span class="lno">847</span></span>
<span id="line-S-59097-848"><span class="lno">848</span></span>
<span id="line-S-59097-849"><span class="lno">849</span></span>
<span id="line-S-59097-850">850</span>
<span id="line-S-59097-851"><span class="lno">851</span></span>
<span id="line-S-59097-852"><span class="lno">852</span></span>
<span id="line-S-59097-853"><span class="lno">853</span></span>
<span id="line-S-59097-854"><span class="lno">854</span></span>
<span id="line-S-59097-855">855</span>
<span id="line-S-59097-856"><span class="lno">856</span></span>
<span id="line-S-59097-857"><span class="lno">857</span></span>
<span id="line-S-59097-858"><span class="lno">858</span></span>
<span id="line-S-59097-859"><span class="lno">859</span></span>
<span id="line-S-59097-860">860</span>
<span id="line-S-59097-861"><span class="lno">861</span></span>
<span id="line-S-59097-862"><span class="lno">862</span></span>
<span id="line-S-59097-863"><span class="lno">863</span></span>
<span id="line-S-59097-864"><span class="lno">864</span></span>
<span id="line-S-59097-865">865</span>
<span id="line-S-59097-866"><span class="lno">866</span></span>
<span id="line-S-59097-867"><span class="lno">867</span></span>
<span id="line-S-59097-868"><span class="lno">868</span></span>
<span id="line-S-59097-869"><span class="lno">869</span></span>
<span id="line-S-59097-870">870</span>
<span id="line-S-59097-871"><span class="lno">871</span></span>
<span id="line-S-59097-872"><span class="lno">872</span></span>
<span id="line-S-59097-873"><span class="lno">873</span></span>
<span id="line-S-59097-874"><span class="lno">874</span></span>
<span id="line-S-59097-875">875</span>
<span id="line-S-59097-876"><span class="lno">876</span></span>
<span id="line-S-59097-877"><span class="lno">877</span></span>
<span id="line-S-59097-878"><span class="lno">878</span></span>
<span id="line-S-59097-879"><span class="lno">879</span></span>
<span id="line-S-59097-880">880</span>
<span id="line-S-59097-881"><span class="lno">881</span></span>
<span id="line-S-59097-882"><span class="lno">882</span></span>
<span id="line-S-59097-883"><span class="lno">883</span></span>
<span id="line-S-59097-884"><span class="lno">884</span></span>
<span id="line-S-59097-885">885</span>
<span id="line-S-59097-886"><span class="lno">886</span></span>
<span id="line-S-59097-887"><span class="lno">887</span></span>
<span id="line-S-59097-888"><span class="lno">888</span></span>
<span id="line-S-59097-889"><span class="lno">889</span></span>
<span id="line-S-59097-890">890</span>
<span id="line-S-59097-891"><span class="lno">891</span></span>
<span id="line-S-59097-892"><span class="lno">892</span></span>
<span id="line-S-59097-893"><span class="lno">893</span></span>
<span id="line-S-59097-894"><span class="lno">894</span></span>
<span id="line-S-59097-895">895</span>
<span id="line-S-59097-896"><span class="lno">896</span></span>
<span id="line-S-59097-897"><span class="lno">897</span></span>
<span id="line-S-59097-898"><span class="lno">898</span></span>
<span id="line-S-59097-899"><span class="lno">899</span></span>
<span id="line-S-59097-900">900</span>
<span id="line-S-59097-901"><span class="lno">901</span></span>
<span id="line-S-59097-902"><span class="lno">902</span></span>
<span id="line-S-59097-903"><span class="lno">903</span></span>
<span id="line-S-59097-904"><span class="lno">904</span></span>
<span id="line-S-59097-905">905</span>
<span id="line-S-59097-906"><span class="lno">906</span></span>
<span id="line-S-59097-907"><span class="lno">907</span></span>
<span id="line-S-59097-908"><span class="lno">908</span></span>
<span id="line-S-59097-909"><span class="lno">909</span></span>
<span id="line-S-59097-910">910</span>
<span id="line-S-59097-911"><span class="lno">911</span></span>
<span id="line-S-59097-912"><span class="lno">912</span></span>
<span id="line-S-59097-913"><span class="lno">913</span></span>
<span id="line-S-59097-914"><span class="lno">914</span></span>
<span id="line-S-59097-915">915</span>
<span id="line-S-59097-916"><span class="lno">916</span></span>
<span id="line-S-59097-917"><span class="lno">917</span></span>
<span id="line-S-59097-918"><span class="lno">918</span></span>
<span id="line-S-59097-919"><span class="lno">919</span></span>
<span id="line-S-59097-920">920</span>
<span id="line-S-59097-921"><span class="lno">921</span></span>
<span id="line-S-59097-922"><span class="lno">922</span></span>
<span id="line-S-59097-923"><span class="lno">923</span></span>
<span id="line-S-59097-924"><span class="lno">924</span></span>
<span id="line-S-59097-925">925</span>
<span id="line-S-59097-926"><span class="lno">926</span></span>
<span id="line-S-59097-927"><span class="lno">927</span></span>
<span id="line-S-59097-928"><span class="lno">928</span></span>
<span id="line-S-59097-929"><span class="lno">929</span></span>
<span id="line-S-59097-930">930</span>
<span id="line-S-59097-931"><span class="lno">931</span></span>
<span id="line-S-59097-932"><span class="lno">932</span></span>
<span id="line-S-59097-933"><span class="lno">933</span></span>
<span id="line-S-59097-934"><span class="lno">934</span></span>
<span id="line-S-59097-935">935</span>
<span id="line-S-59097-936"><span class="lno">936</span></span>
<span id="line-S-59097-937"><span class="lno">937</span></span>
<span id="line-S-59097-938"><span class="lno">938</span></span>
<span id="line-S-59097-939"><span class="lno">939</span></span>
<span id="line-S-59097-940">940</span>
<span id="line-S-59097-941"><span class="lno">941</span></span>
<span id="line-S-59097-942"><span class="lno">942</span></span>
<span id="line-S-59097-943"><span class="lno">943</span></span>
<span id="line-S-59097-944"><span class="lno">944</span></span>
<span id="line-S-59097-945">945</span>
<span id="line-S-59097-946"><span class="lno">946</span></span>
<span id="line-S-59097-947"><span class="lno">947</span></span>
<span id="line-S-59097-948"><span class="lno">948</span></span>
<span id="line-S-59097-949"><span class="lno">949</span></span>
<span id="line-S-59097-950">950</span>
<span id="line-S-59097-951"><span class="lno">951</span></span>
<span id="line-S-59097-952"><span class="lno">952</span></span>
<span id="line-S-59097-953"><span class="lno">953</span></span>
<span id="line-S-59097-954"><span class="lno">954</span></span>
<span id="line-S-59097-955">955</span>
<span id="line-S-59097-956"><span class="lno">956</span></span>
<span id="line-S-59097-957"><span class="lno">957</span></span>
<span id="line-S-59097-958"><span class="lno">958</span></span>
<span id="line-S-59097-959"><span class="lno">959</span></span>
<span id="line-S-59097-960">960</span>
<span id="line-S-59097-961"><span class="lno">961</span></span>
<span id="line-S-59097-962"><span class="lno">962</span></span>
<span id="line-S-59097-963"><span class="lno">963</span></span>
<span id="line-S-59097-964"><span class="lno">964</span></span>
<span id="line-S-59097-965">965</span>
<span id="line-S-59097-966"><span class="lno">966</span></span>
<span id="line-S-59097-967"><span class="lno">967</span></span>
<span id="line-S-59097-968"><span class="lno">968</span></span>
<span id="line-S-59097-969"><span class="lno">969</span></span>
<span id="line-S-59097-970">970</span>
<span id="line-S-59097-971"><span class="lno">971</span></span>
<span id="line-S-59097-972"><span class="lno">972</span></span>
<span id="line-S-59097-973"><span class="lno">973</span></span>
<span id="line-S-59097-974"><span class="lno">974</span></span>
<span id="line-S-59097-975">975</span>
<span id="line-S-59097-976"><span class="lno">976</span></span>
<span id="line-S-59097-977"><span class="lno">977</span></span>
<span id="line-S-59097-978"><span class="lno">978</span></span>
<span id="line-S-59097-979"><span class="lno">979</span></span>
<span id="line-S-59097-980">980</span>
<span id="line-S-59097-981"><span class="lno">981</span></span>
<span id="line-S-59097-982"><span class="lno">982</span></span>
<span id="line-S-59097-983"><span class="lno">983</span></span>
<span id="line-S-59097-984"><span class="lno">984</span></span>
<span id="line-S-59097-985">985</span>
<span id="line-S-59097-986"><span class="lno">986</span></span>
<span id="line-S-59097-987"><span class="lno">987</span></span>
<span id="line-S-59097-988"><span class="lno">988</span></span>
<span id="line-S-59097-989"><span class="lno">989</span></span>
<span id="line-S-59097-990">990</span>
<span id="line-S-59097-991"><span class="lno">991</span></span>
<span id="line-S-59097-992"><span class="lno">992</span></span>
<span id="line-S-59097-993"><span class="lno">993</span></span>
<span id="line-S-59097-994"><span class="lno">994</span></span>
<span id="line-S-59097-995">995</span>
<span id="line-S-59097-996"><span class="lno">996</span></span>
<span id="line-S-59097-997"><span class="lno">997</span></span>
<span id="line-S-59097-998"><span class="lno">998</span></span>
<span id="line-S-59097-999"><span class="lno">999</span></span>
<span id="line-S-59097-1000">1000</span>
<span id="line-S-59097-1001"><span class="lno">1001</span></span>
<span id="line-S-59097-1002"><span class="lno">1002</span></span>
<span id="line-S-59097-1003"><span class="lno">1003</span></span>
<span id="line-S-59097-1004"><span class="lno">1004</span></span>
<span id="line-S-59097-1005">1005</span>
<span id="line-S-59097-1006"><span class="lno">1006</span></span>
<span id="line-S-59097-1007"><span class="lno">1007</span></span>
<span id="line-S-59097-1008"><span class="lno">1008</span></span>
<span id="line-S-59097-1009"><span class="lno">1009</span></span>
<span id="line-S-59097-1010">1010</span>
<span id="line-S-59097-1011"><span class="lno">1011</span></span>
<span id="line-S-59097-1012"><span class="lno">1012</span></span>
<span id="line-S-59097-1013"><span class="lno">1013</span></span>
<span id="line-S-59097-1014"><span class="lno">1014</span></span>
<span id="line-S-59097-1015">1015</span>
<span id="line-S-59097-1016"><span class="lno">1016</span></span>
<span id="line-S-59097-1017"><span class="lno">1017</span></span>
<span id="line-S-59097-1018"><span class="lno">1018</span></span>
<span id="line-S-59097-1019"><span class="lno">1019</span></span>
<span id="line-S-59097-1020">1020</span>
<span id="line-S-59097-1021"><span class="lno">1021</span></span>
<span id="line-S-59097-1022"><span class="lno">1022</span></span>
<span id="line-S-59097-1023"><span class="lno">1023</span></span>
<span id="line-S-59097-1024"><span class="lno">1024</span></span>
<span id="line-S-59097-1025">1025</span>
<span id="line-S-59097-1026"><span class="lno">1026</span></span>
<span id="line-S-59097-1027"><span class="lno">1027</span></span>
<span id="line-S-59097-1028"><span class="lno">1028</span></span>
<span id="line-S-59097-1029"><span class="lno">1029</span></span>
<span id="line-S-59097-1030">1030</span>
<span id="line-S-59097-1031"><span class="lno">1031</span></span>
<span id="line-S-59097-1032"><span class="lno">1032</span></span>
<span id="line-S-59097-1033"><span class="lno">1033</span></span>
<span id="line-S-59097-1034"><span class="lno">1034</span></span>
<span id="line-S-59097-1035">1035</span>
<span id="line-S-59097-1036"><span class="lno">1036</span></span>
<span id="line-S-59097-1037"><span class="lno">1037</span></span>
<span id="line-S-59097-1038"><span class="lno">1038</span></span>
<span id="line-S-59097-1039"><span class="lno">1039</span></span>
<span id="line-S-59097-1040">1040</span>
<span id="line-S-59097-1041"><span class="lno">1041</span></span>
<span id="line-S-59097-1042"><span class="lno">1042</span></span>
<span id="line-S-59097-1043"><span class="lno">1043</span></span>
<span id="line-S-59097-1044"><span class="lno">1044</span></span>
<span id="line-S-59097-1045">1045</span>
<span id="line-S-59097-1046"><span class="lno">1046</span></span>
<span id="line-S-59097-1047"><span class="lno">1047</span></span>
<span id="line-S-59097-1048"><span class="lno">1048</span></span>
<span id="line-S-59097-1049"><span class="lno">1049</span></span>
<span id="line-S-59097-1050">1050</span>
<span id="line-S-59097-1051"><span class="lno">1051</span></span>
<span id="line-S-59097-1052"><span class="lno">1052</span></span>
<span id="line-S-59097-1053"><span class="lno">1053</span></span>
<span id="line-S-59097-1054"><span class="lno">1054</span></span>
<span id="line-S-59097-1055">1055</span>
<span id="line-S-59097-1056"><span class="lno">1056</span></span>
<span id="line-S-59097-1057"><span class="lno">1057</span></span>
<span id="line-S-59097-1058"><span class="lno">1058</span></span>
<span id="line-S-59097-1059"><span class="lno">1059</span></span>
<span id="line-S-59097-1060">1060</span>
<span id="line-S-59097-1061"><span class="lno">1061</span></span>
<span id="line-S-59097-1062"><span class="lno">1062</span></span>
<span id="line-S-59097-1063"><span class="lno">1063</span></span>
<span id="line-S-59097-1064"><span class="lno">1064</span></span>
<span id="line-S-59097-1065">1065</span>
<span id="line-S-59097-1066"><span class="lno">1066</span></span>
<span id="line-S-59097-1067"><span class="lno">1067</span></span>
<span id="line-S-59097-1068"><span class="lno">1068</span></span>
<span id="line-S-59097-1069"><span class="lno">1069</span></span>
<span id="line-S-59097-1070">1070</span>
<span id="line-S-59097-1071"><span class="lno">1071</span></span>
<span id="line-S-59097-1072"><span class="lno">1072</span></span>
<span id="line-S-59097-1073"><span class="lno">1073</span></span>
<span id="line-S-59097-1074"><span class="lno">1074</span></span>
<span id="line-S-59097-1075">1075</span>
<span id="line-S-59097-1076"><span class="lno">1076</span></span>
<span id="line-S-59097-1077"><span class="lno">1077</span></span>
<span id="line-S-59097-1078"><span class="lno">1078</span></span>
<span id="line-S-59097-1079"><span class="lno">1079</span></span>
<span id="line-S-59097-1080">1080</span>
<span id="line-S-59097-1081"><span class="lno">1081</span></span>
<span id="line-S-59097-1082"><span class="lno">1082</span></span>
<span id="line-S-59097-1083"><span class="lno">1083</span></span>
<span id="line-S-59097-1084"><span class="lno">1084</span></span>
<span id="line-S-59097-1085">1085</span>
<span id="line-S-59097-1086"><span class="lno">1086</span></span>
<span id="line-S-59097-1087"><span class="lno">1087</span></span>
<span id="line-S-59097-1088"><span class="lno">1088</span></span>
<span id="line-S-59097-1089"><span class="lno">1089</span></span>
<span id="line-S-59097-1090">1090</span>
<span id="line-S-59097-1091"><span class="lno">1091</span></span>
<span id="line-S-59097-1092"><span class="lno">1092</span></span>
<span id="line-S-59097-1093"><span class="lno">1093</span></span>
<span id="line-S-59097-1094"><span class="lno">1094</span></span>
<span id="line-S-59097-1095">1095</span>
<span id="line-S-59097-1096"><span class="lno">1096</span></span>
<span id="line-S-59097-1097"><span class="lno">1097</span></span>
<span id="line-S-59097-1098"><span class="lno">1098</span></span>
<span id="line-S-59097-1099"><span class="lno">1099</span></span>
<span id="line-S-59097-1100">1100</span>
<span id="line-S-59097-1101"><span class="lno">1101</span></span>
<span id="line-S-59097-1102"><span class="lno">1102</span></span>
<span id="line-S-59097-1103"><span class="lno">1103</span></span>
<span id="line-S-59097-1104"><span class="lno">1104</span></span>
<span id="line-S-59097-1105">1105</span>
<span id="line-S-59097-1106"><span class="lno">1106</span></span>
<span id="line-S-59097-1107"><span class="lno">1107</span></span>
<span id="line-S-59097-1108"><span class="lno">1108</span></span>
<span id="line-S-59097-1109"><span class="lno">1109</span></span>
<span id="line-S-59097-1110">1110</span>
<span id="line-S-59097-1111"><span class="lno">1111</span></span>
<span id="line-S-59097-1112"><span class="lno">1112</span></span>
<span id="line-S-59097-1113"><span class="lno">1113</span></span>
<span id="line-S-59097-1114"><span class="lno">1114</span></span>
<span id="line-S-59097-1115">1115</span>
<span id="line-S-59097-1116"><span class="lno">1116</span></span>
<span id="line-S-59097-1117"><span class="lno">1117</span></span>
<span id="line-S-59097-1118"><span class="lno">1118</span></span>
<span id="line-S-59097-1119"><span class="lno">1119</span></span>
<span id="line-S-59097-1120">1120</span>
<span id="line-S-59097-1121"><span class="lno">1121</span></span>
<span id="line-S-59097-1122"><span class="lno">1122</span></span>
<span id="line-S-59097-1123"><span class="lno">1123</span></span>
<span id="line-S-59097-1124"><span class="lno">1124</span></span>
<span id="line-S-59097-1125">1125</span>
<span id="line-S-59097-1126"><span class="lno">1126</span></span>
<span id="line-S-59097-1127"><span class="lno">1127</span></span>
<span id="line-S-59097-1128"><span class="lno">1128</span></span>
<span id="line-S-59097-1129"><span class="lno">1129</span></span>
<span id="line-S-59097-1130">1130</span>
<span id="line-S-59097-1131"><span class="lno">1131</span></span>
<span id="line-S-59097-1132"><span class="lno">1132</span></span>
<span id="line-S-59097-1133"><span class="lno">1133</span></span>
<span id="line-S-59097-1134"><span class="lno">1134</span></span>
<span id="line-S-59097-1135">1135</span>
<span id="line-S-59097-1136"><span class="lno">1136</span></span>
<span id="line-S-59097-1137"><span class="lno">1137</span></span>
<span id="line-S-59097-1138"><span class="lno">1138</span></span>
<span id="line-S-59097-1139"><span class="lno">1139</span></span>
<span id="line-S-59097-1140">1140</span>
<span id="line-S-59097-1141"><span class="lno">1141</span></span>
<span id="line-S-59097-1142"><span class="lno">1142</span></span>
<span id="line-S-59097-1143"><span class="lno">1143</span></span>
<span id="line-S-59097-1144"><span class="lno">1144</span></span>
<span id="line-S-59097-1145">1145</span>
<span id="line-S-59097-1146"><span class="lno">1146</span></span>
<span id="line-S-59097-1147"><span class="lno">1147</span></span>
<span id="line-S-59097-1148"><span class="lno">1148</span></span>
<span id="line-S-59097-1149"><span class="lno">1149</span></span>
<span id="line-S-59097-1150">1150</span>
<span id="line-S-59097-1151"><span class="lno">1151</span></span>
<span id="line-S-59097-1152"><span class="lno">1152</span></span>
<span id="line-S-59097-1153"><span class="lno">1153</span></span>
</pre></td><td valign="top"><pre><code class="language-xml">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                xmlns:array="http://www.w3.org/2005/xpath-functions/array"
                xmlns:db="http://docbook.org/ns/docbook"
                xmlns:dbe="http://docbook.org/ns/docbook/errors"
                xmlns:f="http://docbook.org/ns/docbook/functions"
                xmlns:fcals="http://docbook.org/ns/docbook/functions/private/cals"
                xmlns:fp="http://docbook.org/ns/docbook/functions/private"
                xmlns:m="http://docbook.org/ns/docbook/modes"
                xmlns:map="http://www.w3.org/2005/xpath-functions/map"
                xmlns:mp="http://docbook.org/ns/docbook/modes/private"
                xmlns:t="http://docbook.org/ns/docbook/templates"
                xmlns:tp="http://docbook.org/ns/docbook/templates/private"
                xmlns:v="http://docbook.org/ns/docbook/variables"
                xmlns:xs="http://www.w3.org/2001/XMLSchema"
                xmlns="http://www.w3.org/1999/xhtml"
                default-mode="m:docbook"
                exclude-result-prefixes="array db dbe f fcals fp m map mp t tp v xs"
                version="3.0"&gt;

&lt;xsl:template match="db:table[db:tgroup]"&gt;
  &lt;figure&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
    &lt;xsl:apply-templates select="." mode="m:generate-titlepage"/&gt;
    &lt;xsl:if test="'details' = $table-accessibility"&gt;
      &lt;xsl:apply-templates select="db:textobject[not(db:phrase)]" mode="m:details"/&gt;
    &lt;/xsl:if&gt;
    &lt;xsl:apply-templates select="db:tgroup"/&gt;
    &lt;xsl:if test=".//db:footnote"&gt;
      &lt;xsl:call-template name="t:table-footnotes"&gt;
        &lt;xsl:with-param name="footnotes" select=".//db:footnote"/&gt;
      &lt;/xsl:call-template&gt;
    &lt;/xsl:if&gt;
  &lt;/figure&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:informaltable[db:tgroup]"&gt;
  &lt;figure&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
    &lt;xsl:if test="'details' = $table-accessibility"&gt;
      &lt;xsl:apply-templates select="db:textobject[not(db:phrase)]" mode="m:details"/&gt;
    &lt;/xsl:if&gt;
    &lt;xsl:apply-templates select="db:tgroup"/&gt;
    &lt;xsl:if test=".//db:footnote"&gt;
      &lt;xsl:call-template name="t:table-footnotes"&gt;
        &lt;xsl:with-param name="footnotes" select=".//db:footnote"/&gt;
      &lt;/xsl:call-template&gt;
    &lt;/xsl:if&gt;
  &lt;/figure&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:tgroup"&gt;
  &lt;table&gt;
    &lt;xsl:if test="'summary' = $table-accessibility"&gt;
      &lt;xsl:apply-templates select="../db:textobject[db:phrase]" mode="m:details"/&gt;
    &lt;/xsl:if&gt;
    &lt;xsl:if test="db:colspec[@colwidth]"&gt;
      &lt;xsl:call-template name="tp:cals-colspec"/&gt;
    &lt;/xsl:if&gt;
    &lt;xsl:apply-templates select="db:thead"/&gt;
    &lt;xsl:apply-templates select="db:tfoot"/&gt;
    &lt;xsl:apply-templates select="db:tbody"/&gt;
  &lt;/table&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:tbody|db:thead|db:tfoot"&gt;
  &lt;xsl:element name="{local-name(.)}" namespace="http://www.w3.org/1999/xhtml"&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
    &lt;xsl:apply-templates/&gt;
  &lt;/xsl:element&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:row"&gt;
  &lt;xsl:variable name="row" select="."/&gt;
  &lt;xsl:variable name="overhang" select="fcals:overhang-into-row($row)"/&gt;

  &lt;xsl:variable name="cells" as="map(*)*"&gt;
    &lt;xsl:for-each select="*"&gt;
      &lt;xsl:variable name="colnum" select="fcals:column-number(., $overhang)"/&gt;
      &lt;xsl:variable name="colspan" select="fcals:colspan(., $colnum)"/&gt;
      &lt;xsl:variable name="rowspan" select="fcals:rowspan(., $colnum)"/&gt;
      &lt;xsl:sequence select="map {
        'row': $row,
        'node': .,
        'span': false(),
        'colspan': $colspan,
        'rowspan': $rowspan,
        'first-column': $colnum,
        'last-column': $colnum + $colspan - 1
      }"/&gt;
    &lt;/xsl:for-each&gt;
  &lt;/xsl:variable&gt;

  &lt;xsl:message use-when="'tables' = $debug"
               select="'========================================'"/&gt;
  &lt;tr&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
    &lt;xsl:for-each select="1 to fcals:table-columns($row)"&gt;
      &lt;xsl:variable name="cell" select="fcals:cell($row, ., $overhang, $cells)"/&gt;
      &lt;xsl:choose&gt;
        &lt;xsl:when test="$cell?span"&gt;
          &lt;xsl:message use-when="'tables' = $debug"
                       select="., '--span--'"/&gt;
        &lt;/xsl:when&gt;
        &lt;xsl:when test="empty($cell?node)"&gt;
          &lt;xsl:message use-when="'tables' = $debug"
                       select="., '--empty--'"/&gt;
          &lt;xsl:call-template name="tp:cell"&gt;
            &lt;xsl:with-param name="properties" select="map {
              'row': $row,
              'span': false(),
              'colspan': 1,
              'rowspan': 1,
              'first-column': .,
              'last-column': .
            }"/&gt;
            &lt;xsl:with-param name="td" select="if ($row/parent::db:thead) then 'th' else 'td'"/&gt;
          &lt;/xsl:call-template&gt;
        &lt;/xsl:when&gt;
        &lt;xsl:otherwise&gt;
          &lt;xsl:message use-when="'tables' = $debug"
                       select="., $cell?node/string()
                                  =&amp;gt; normalize-space()
                                  =&amp;gt; substring(1, 10)"/&gt;
          &lt;xsl:apply-templates select="$cell?node"&gt;
            &lt;xsl:with-param name="properties" select="$cell"/&gt;
          &lt;/xsl:apply-templates&gt;
        &lt;/xsl:otherwise&gt;
      &lt;/xsl:choose&gt;
    &lt;/xsl:for-each&gt;
  &lt;/tr&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:entry|db:entrytbl"&gt;
  &lt;xsl:param name="properties" as="map(*)"/&gt;

  &lt;xsl:call-template name="tp:cell"&gt;
    &lt;xsl:with-param name="properties" select="$properties"/&gt;
    &lt;xsl:with-param name="pi-properties"
                    select="f:pi-attributes(./processing-instruction('db'))"/&gt;
    &lt;xsl:with-param name="td" select="if (parent::*/parent::db:thead) then 'th' else 'td'"/&gt;
    &lt;xsl:with-param name="content" as="item()*"&gt;
      &lt;xsl:choose&gt;
        &lt;xsl:when test="self::db:entrytbl"&gt;
          &lt;table&gt;
            &lt;xsl:if test="db:colspec[@colwidth]"&gt;
              &lt;xsl:call-template name="tp:cals-colspec"/&gt;
            &lt;/xsl:if&gt;
            &lt;xsl:apply-templates select="db:thead"/&gt;
            &lt;xsl:apply-templates select="db:tbody"/&gt;
          &lt;/table&gt;
        &lt;/xsl:when&gt;
        &lt;xsl:otherwise&gt;
          &lt;xsl:choose&gt;
            &lt;xsl:when test="$properties?align = 'char' and not(*)"&gt;
              &lt;!-- This is all a bit fiddly. If you want to use ?db? PIs to
                   set the alignment details, they must follow the colspec for
                   the column in question. If there's no PI following the colspec,
                   we fall back to PIs following the tgroup. --&gt;
              &lt;xsl:variable name="piroot"
                            select="fcals:colspec-for-column(fcals:tgroup(.),
                                       $properties?first-column)"/&gt;

              &lt;xsl:variable name="pis"
                            select="if (empty($piroot)
                                        or empty($piroot/following-sibling::processing-instruction()))
                                    then fcals:tgroup(.)/node()
                                    else $piroot/following-sibling::node()"/&gt;

              &lt;xsl:variable name="pis" select="fp:only-initial-pis($pis)"/&gt;

              &lt;xsl:variable name="achar-width"
                            select="fp:pi-from-list($pis, 'align-char-width',
                                                    string($align-char-width))"/&gt;

              &lt;xsl:variable name="achar-width" as="xs:integer?"&gt;
                &lt;xsl:choose&gt;
                  &lt;xsl:when test="empty($achar-width)"&gt;
                    &lt;xsl:sequence select="()"/&gt;
                  &lt;/xsl:when&gt;
                  &lt;xsl:when test="$achar-width castable as xs:integer"&gt;
                    &lt;xsl:sequence select="xs:integer($achar-width)"/&gt;
                  &lt;/xsl:when&gt;
                  &lt;xsl:otherwise&gt;
                    &lt;xsl:message select="'Ignoring align-char-width:', $achar-width"/&gt;
                    &lt;xsl:sequence select="$align-char-width"/&gt;
                  &lt;/xsl:otherwise&gt;
                &lt;/xsl:choose&gt;
              &lt;/xsl:variable&gt;

              &lt;xsl:variable name="achar-pad"
                            select="substring(fp:pi-from-list($pis, 'align-char-pad',
                                                              $align-char-pad), 1, 1)"/&gt;

              &lt;xsl:variable name="content" select="normalize-space(.)"/&gt;
              &lt;xsl:variable name="char"
                            select="if ($properties?char)
                                    then $properties?char
                                    else $align-char-default"/&gt;
              &lt;xsl:variable name="width"
                            select="if (exists($achar-width))
                                    then $achar-width
                                    else $align-char-width"/&gt;

              &lt;xsl:variable name="parts"
                            select="f:tokenize-on-char($content, $char)"/&gt;

              &lt;xsl:variable name="before"
                            select="if (contains($content, $char))
                                    then string-join($parts[position() lt last()], $char)
                                    else $content"/&gt;

              &lt;!-- If the pad character is a form space of some sort, use it for
                   padding; otherwise use the alignment character. --&gt;
              &lt;xsl:variable name="before"
                            select="if (contains($content, $char))
                                    then $before || $char
                                    else if (matches($achar-pad, '\p{Zs}'))
                                         then $before || $achar-pad
                                         else $before || $char"/&gt;

              &lt;xsl:variable name="after"
                            select="if (contains($content, $char))
                                    then $parts[last()]
                                    else ''"/&gt;

              &lt;xsl:variable name="after"
                            select="fp:align-char-pad($after, $width, $achar-pad)"/&gt;

              &lt;xsl:value-of select="$before || $after"/&gt;
            &lt;/xsl:when&gt;
            &lt;xsl:otherwise&gt;
              &lt;xsl:apply-templates/&gt;
            &lt;/xsl:otherwise&gt;
          &lt;/xsl:choose&gt;
        &lt;/xsl:otherwise&gt;
      &lt;/xsl:choose&gt;
    &lt;/xsl:with-param&gt;
  &lt;/xsl:call-template&gt;
&lt;/xsl:template&gt;

&lt;xsl:template name="tp:cell"&gt;
  &lt;xsl:param name="properties" as="map(*)"/&gt;
  &lt;xsl:param name="pi-properties" as="element()?"/&gt;
  &lt;xsl:param name="td" as="xs:string" select="'td'"/&gt;
  &lt;xsl:param name="content" as="item()*" select="()"/&gt;

  &lt;xsl:variable name="row" select="$properties?row"/&gt;
  &lt;xsl:variable name="table"
                select="($row/ancestor::db:table
                         |$row/ancestor::db:informaltable)[last()]"/&gt;
  
  &lt;xsl:variable name="table-part"
                select="($row/ancestor::db:thead
                         |$row/ancestor::db:tbody
                         |$row/ancestor::db:tfoot)[last()]"/&gt;

  &lt;xsl:variable name="frame" select="$table/@frame"/&gt;
  &lt;xsl:variable name="btop"
                select="$frame = 'all' or $frame = 'top' or $frame = 'topbot'"/&gt;

  &lt;!-- bbot:
       1. The frame includes the bottom border
       2. We're in the last row of a section and the cell has a rowsep
          and either this is a thead or it's a tbody and there is a tfoot
  --&gt;
  &lt;xsl:variable name="bbot"
                select="$frame = 'all' or $frame = 'bot' or $frame = 'topbot'
                        or ($properties?rowsep
                            and empty($row/following-sibling::db:row)
                            and ($table-part/self::db:thead
                                 or ($table-part/self::db:tbody
                                     and $table-part/preceding-sibling::db:tfoot)))"/&gt;
  &lt;xsl:variable name="bleft"
                select="$frame = 'all' or $frame = 'sides'"/&gt;
  &lt;xsl:variable name="bright"
                select="$frame = 'all' or $frame = 'sides'"/&gt;

  &lt;xsl:variable name="classes" as="xs:string*"&gt;
    &lt;xsl:sequence select="if ($properties?first-column = 1 and $bleft)
                          then 'bleft'
                          else ()"/&gt;
    &lt;xsl:sequence select="if (empty($row/preceding-sibling::db:row) and $btop)
                          then 'btop'
                          else ()"/&gt;
    &lt;xsl:sequence select="f:cals-rowsep($row, $properties, $bbot)"/&gt;
    &lt;xsl:sequence select="f:cals-colsep($row, $properties, $bright)"/&gt;
    &lt;xsl:sequence select="if ($properties?node)
                          then ()
                          else 'empty'"/&gt;
    &lt;xsl:sequence select="$properties?align"/&gt;
    &lt;xsl:sequence select="$properties?valign"/&gt;
  &lt;/xsl:variable&gt;

  &lt;xsl:element name="{$td}" namespace="http://www.w3.org/1999/xhtml"&gt;
    &lt;!-- Can't (easily) use the m:attributes mode here because we need
         to output the appropriate attributes even when there is no
         DocBook node. (For example, when a cell is omitted.) --&gt;
    &lt;xsl:if test="map:contains($properties, 'node')
                  and $properties?node/@xml:id"&gt;
      &lt;xsl:attribute name="id" select="$properties?node/@xml:id"/&gt;
    &lt;/xsl:if&gt;
    &lt;xsl:if test="exists($classes)"&gt;
      &lt;xsl:variable name="sorted" as="xs:string+"&gt;
        &lt;xsl:for-each select="$classes"&gt;
          &lt;xsl:sort select="."/&gt;
          &lt;xsl:sequence select="."/&gt;
        &lt;/xsl:for-each&gt;
      &lt;/xsl:variable&gt;
      &lt;xsl:attribute name="class" select="string-join($sorted, ' ')"/&gt;
    &lt;/xsl:if&gt;
    &lt;xsl:if test="$properties?colspan gt 1"&gt;
      &lt;xsl:attribute name="colspan" select="$properties?colspan"/&gt;
    &lt;/xsl:if&gt;
    &lt;xsl:if test="$properties?rowspan gt 1"&gt;
      &lt;xsl:attribute name="rowspan" select="$properties?rowspan"/&gt;
    &lt;/xsl:if&gt;
    &lt;xsl:copy-of select="$pi-properties/@style"/&gt;
    &lt;xsl:sequence select="$content"/&gt;
  &lt;/xsl:element&gt;
&lt;/xsl:template&gt;

&lt;!-- ============================================================ --&gt;

&lt;xsl:template name="tp:cals-colspec"&gt;
  &lt;xsl:variable name="tgroup" select="."/&gt;

  &lt;xsl:variable name="widths" as="map(*)*"&gt;
    &lt;xsl:for-each select="1 to xs:integer($tgroup/@cols)"&gt;
      &lt;xsl:variable name="colspec" select="fcals:colspec-for-column($tgroup, .)"/&gt;
      &lt;xsl:choose&gt;
        &lt;xsl:when test="exists($colspec)"&gt;
          &lt;xsl:choose&gt;
            &lt;xsl:when test="$colspec/@colwidth"&gt;
              &lt;xsl:sequence select="f:parse-length(string($colspec/@colwidth))"/&gt;
            &lt;/xsl:when&gt;
            &lt;xsl:otherwise&gt;
              &lt;xsl:sequence select="f:parse-length('1*')"/&gt;
            &lt;/xsl:otherwise&gt;
          &lt;/xsl:choose&gt;
        &lt;/xsl:when&gt;
        &lt;xsl:otherwise&gt;
          &lt;xsl:sequence select="f:parse-length('1*')"/&gt;
        &lt;/xsl:otherwise&gt;
      &lt;/xsl:choose&gt;
    &lt;/xsl:for-each&gt;
  &lt;/xsl:variable&gt;

  &lt;!--
  &lt;xsl:for-each select="$widths"&gt;
    &lt;xsl:message select="'R:' || .?relative || ' M:' || .?magnitude || ' U:' || .?units"/&gt;
  &lt;/xsl:for-each&gt;
  --&gt;

  &lt;xsl:variable name="absolute-width" as="xs:double"
                select="sum($widths ! f:absolute-length(.))"/&gt;

  &lt;xsl:variable name="relative-width" as="xs:double"
                select="sum($widths ! f:relative-length(.))"/&gt;

  &lt;xsl:variable name="absolute-remainder"
                select="f:absolute-length($v:nominal-page-width) - $absolute-width"/&gt;

  &lt;xsl:if test="$absolute-remainder le 0"&gt;
    &lt;xsl:message&gt;Table width exceeds nominal width, ignoring relative width&lt;/xsl:message&gt;
  &lt;/xsl:if&gt;

  &lt;xsl:variable name="absolute-remainder"
                select="if ($absolute-remainder lt 0)
                        then 0
                        else $absolute-remainder"/&gt;

  &lt;xsl:choose&gt;
    &lt;xsl:when test="$relative-width gt 0"&gt;
      &lt;xsl:variable name="percent-widths" as="xs:integer*"&gt;
        &lt;xsl:for-each select="$widths"&gt;
          &lt;xsl:variable name="rel-part"
                        select="if (.?relative and .?relative gt 0)
                                then $absolute-remainder div $relative-width * .?relative
                                else 0"/&gt;
          &lt;xsl:sequence select="xs:integer(floor(($rel-part + f:absolute-length(.))
                                                 div f:absolute-length($v:nominal-page-width)
                                                 * 100.0))"/&gt;
        &lt;/xsl:for-each&gt;
      &lt;/xsl:variable&gt;

      &lt;!-- because I'm fussy about the details; make sure the sum = 100% --&gt;
      &lt;xsl:variable name="first-width" as="xs:integer"&gt;
        &lt;xsl:sequence select="$percent-widths[1] + (100 - sum($percent-widths))"/&gt;
      &lt;/xsl:variable&gt;

      &lt;colgroup&gt;
        &lt;xsl:for-each select="($first-width, subsequence($percent-widths, 2))"&gt;
          &lt;col style="width: {.}%"/&gt;
        &lt;/xsl:for-each&gt;
      &lt;/colgroup&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;colgroup&gt;
        &lt;xsl:for-each select="$widths"&gt;
          &lt;col style="width: {f:absolute-length(.)}"/&gt;
        &lt;/xsl:for-each&gt;
      &lt;/colgroup&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:template&gt;

&lt;xsl:function name="fcals:colspec-for-column" as="element()?" cache="yes"&gt;
  &lt;xsl:param name="tgroup" as="element()"/&gt;
  &lt;xsl:param name="colnum" as="xs:integer"/&gt;
  &lt;xsl:sequence select="fp:colspec-for-colnum($tgroup/db:colspec, $colnum, 1)"/&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="fp:colspec-for-colnum" as="element()?" cache="yes"&gt;
  &lt;xsl:param name="colspecs" as="element()*"/&gt;
  &lt;xsl:param name="colnum" as="xs:integer"/&gt;
  &lt;xsl:param name="curcol" as="xs:integer"/&gt;

  &lt;!--
  &lt;xsl:message select="('c4c: ', $colnum, ', ', $curcol, ', ', $colspecs[1])"/&gt;
  --&gt;

  &lt;xsl:choose&gt;
    &lt;xsl:when test="empty($colspecs)"&gt;
      &lt;xsl:sequence select="()"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="normalize-space($colspecs[1]/@colnum) = string($colnum)"&gt;
      &lt;xsl:sequence select="$colspecs[1]"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="normalize-space($colspecs[1]/@colnum)"&gt;
      &lt;xsl:sequence
          select="fp:colspec-for-colnum(subsequence($colspecs,2), $colnum,
                                        xs:integer($colspecs[1]/@colnum)+1)"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="$colnum = $curcol"&gt;
      &lt;xsl:sequence select="$colspecs[1]"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:sequence
          select="fp:colspec-for-colnum(subsequence($colspecs,2), $colnum, $curcol + 1)"/&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:function&gt;

&lt;!-- ============================================================ --&gt;

&lt;xsl:function name="fcals:cell" as="map(*)" cache="yes"&gt;
  &lt;xsl:param name="row" as="element(db:row)"/&gt;
  &lt;xsl:param name="column" as="xs:integer"/&gt;
  &lt;xsl:param name="overhang" as="array(xs:integer)"/&gt;
  &lt;xsl:param name="cells" as="map(*)*"/&gt;

  &lt;xsl:variable name="cell" as="map(*)?"&gt;
    &lt;xsl:for-each select="$cells"&gt;
      &lt;xsl:if test="$column ge .?first-column
                    and $column le .?last-column"&gt;
        &lt;xsl:sequence select="."/&gt;
      &lt;/xsl:if&gt;
    &lt;/xsl:for-each&gt;
  &lt;/xsl:variable&gt;

  &lt;xsl:choose&gt;
    &lt;xsl:when test="array:get($overhang, $column) ne 0
                    or (exists($cell) and $cell?first-column ne $column)"&gt;
      &lt;xsl:sequence select="map { 'span': true() }"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="empty($cell)"&gt;
      &lt;xsl:sequence select="fcals:cell-decoration($row, $cell?node, $column)"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:sequence select="map:merge(($cell,
                                       fcals:cell-decoration($row, $cell?node, $column)))"/&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="fcals:overhang-into-row" as="array(xs:integer)" cache="yes"&gt;
  &lt;xsl:param name="row" as="element(db:row)"/&gt;
  &lt;xsl:choose&gt;
    &lt;xsl:when test="empty($row/preceding-sibling::*)"&gt;
      &lt;xsl:sequence select="fcals:zeros($row)"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:sequence select="fcals:overhang($row/preceding-sibling::db:row[1])"/&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="fcals:overhang" as="array(xs:integer)" cache="yes"&gt;
  &lt;xsl:param name="row" as="element(db:row)"/&gt;

  &lt;xsl:variable name="overhang"
                select="if (empty($row/preceding-sibling::*))
                        then fcals:zeros($row)
                        else fcals:decrement-overhang(fcals:overhang($row/preceding-sibling::*[1]))"/&gt;

  &lt;xsl:variable name="colmap" as="map(xs:integer, node())"&gt;
    &lt;xsl:map&gt;
      &lt;xsl:for-each select="$row/*"&gt;
        &lt;xsl:map-entry key="fcals:column-number(., $overhang)" select="."/&gt;
      &lt;/xsl:for-each&gt;
    &lt;/xsl:map&gt;
  &lt;/xsl:variable&gt;

  &lt;xsl:variable name="newoverhang" as="xs:integer*"&gt;
    &lt;xsl:for-each select="array:flatten($overhang)"&gt;
      &lt;xsl:sequence select=". + fcals:cell-overhang($colmap, position())"/&gt;
    &lt;/xsl:for-each&gt;
  &lt;/xsl:variable&gt;

  &lt;xsl:sequence select="array { $newoverhang }"/&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="fcals:cell-overhang" cache="yes"&gt;
  &lt;xsl:param name="colmap" as="map(xs:integer, node())"/&gt;
  &lt;xsl:param name="column" as="xs:integer"/&gt;

  &lt;xsl:variable name="over" as="xs:integer?"&gt;
    &lt;xsl:for-each select="map:keys($colmap)"&gt;
      &lt;xsl:variable name="fcol" select="."/&gt;
      &lt;xsl:variable name="cell" select="map:get($colmap, .)"/&gt;
      &lt;xsl:variable name="width" select="fcals:colspan($cell, .)"/&gt;
      &lt;xsl:variable name="lcol" select="$fcol + $width - 1"/&gt;
      &lt;xsl:if test="$column ge $fcol and $column le $lcol"&gt;
        &lt;xsl:sequence select="fcals:rowspan($cell, .)"/&gt;
      &lt;/xsl:if&gt;
    &lt;/xsl:for-each&gt;
  &lt;/xsl:variable&gt;

  &lt;xsl:sequence select="if (exists($over)) then $over - 1 else 0"/&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="fcals:next-empty-cell" cache="yes"&gt;
  &lt;xsl:param name="column" as="xs:integer"/&gt;
  &lt;xsl:param name="overhang" as="array(xs:integer)"/&gt;
  &lt;xsl:choose&gt;
    &lt;xsl:when test="$column gt array:size($overhang)"&gt;
      &lt;xsl:sequence select="error($dbe:INVALID-CALS, 'Columns exceed @cols')"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="array:get($overhang, $column) eq 0"&gt;
      &lt;xsl:sequence select="$column"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:sequence select="fcals:next-empty-cell($column + 1, $overhang)"/&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="fcals:decrement-overhang" as="array(xs:integer)" cache="yes"&gt;
  &lt;xsl:param name="overhang" as="array(xs:integer)"/&gt;
  &lt;xsl:sequence select="array {
    for $hang in array:flatten($overhang) return max((0, $hang - 1))
  }"/&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="fcals:column-number" as="xs:integer" cache="yes"&gt;
  &lt;xsl:param name="node" as="element()"/&gt;
  &lt;xsl:param name="overhang" as="array(xs:integer)"/&gt;

  &lt;xsl:choose&gt;
    &lt;xsl:when test="$node/@namest"&gt;
      &lt;xsl:sequence
          select="fcals:colspec-column-number(
                     fcals:colspec($node, $node/@namest))"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="$node/@colname"&gt;
      &lt;xsl:sequence
          select="fcals:colspec-column-number(
                     fcals:colspec($node, $node/@colname))"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="$node/preceding-sibling::*"&gt;
      &lt;xsl:variable name="pcell" select="$node/preceding-sibling::*[1]"/&gt;
      &lt;xsl:variable name="column"
                    select="fcals:column-number($pcell, $overhang)"/&gt;
      &lt;xsl:variable name="nextcolumn"
                    select="$column + fcals:colspan($pcell, $column)"/&gt;
      &lt;xsl:sequence select="fcals:next-empty-cell($nextcolumn, $overhang)"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:sequence select="fcals:next-empty-cell(1, $overhang)"/&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="fcals:colspec-column-number" as="xs:integer" cache="yes"&gt;
  &lt;xsl:param name="colspec" as="element(db:colspec)" required="yes"/&gt;

  &lt;xsl:choose&gt;
    &lt;xsl:when test="$colspec/@colnum"&gt;
      &lt;xsl:sequence select="xs:integer($colspec/@colnum)"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="$colspec/preceding-sibling::db:colspec"&gt;
      &lt;xsl:sequence
          select="fcals:colspec-column-number(
                     $colspec/preceding-sibling::db:colspec[1]) + 1 "/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:sequence select="1"/&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="fcals:colspec" as="element(db:colspec)" cache="yes"&gt;
  &lt;xsl:param name="node" as="element()" required="yes"/&gt;
  &lt;xsl:param name="colname" as="xs:string" required="yes"/&gt;

  &lt;xsl:variable name="colspec"
                select="fcals:tgroup($node)/db:colspec[@colname=$colname]"/&gt;

  &lt;xsl:if test="empty($colspec)"&gt;
    &lt;xsl:sequence select="error($dbe:INVALID-CALS, 'No colspec named ' || $colname)"/&gt;
  &lt;/xsl:if&gt;

  &lt;xsl:sequence select="$colspec"/&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="fcals:spanspec" as="element(db:spanspec)" cache="yes"&gt;
  &lt;xsl:param name="node" as="element()" required="yes"/&gt;
  &lt;xsl:param name="spanname" as="xs:string" required="yes"/&gt;

  &lt;xsl:variable name="spanspec"
                select="fcals:tgroup($node)/db:spanspec[@spanname=$spanname]"/&gt;

  &lt;xsl:if test="empty($spanspec)"&gt;
    &lt;xsl:sequence select="error($dbe:INVALID-CALS, 'No spanspec named ' || $spanname)"/&gt;
  &lt;/xsl:if&gt;

  &lt;xsl:sequence select="$spanspec"/&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="fcals:colspan" as="xs:integer" cache="yes"&gt;
  &lt;xsl:param name="node" as="element()" required="yes"/&gt;
  &lt;xsl:param name="colnum" as="xs:integer" required="yes"/&gt;

  &lt;xsl:choose&gt;
    &lt;xsl:when test="$node/@nameend"&gt;
      &lt;xsl:variable name="last-colnum"
                    select="fcals:colspec-column-number(
                               fcals:colspec($node, $node/@nameend))"/&gt;
      &lt;xsl:sequence select="$last-colnum - $colnum + 1"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="$node/@spanname"&gt;
      &lt;xsl:variable name="spanspec" select="fcals:spanspec($node, $node/@spanname)"/&gt;
      &lt;xsl:variable name="last-colnum"
                    select="fcals:colspec-column-number(
                               fcals:colspec($node, $spanspec/@nameend))"/&gt;
      &lt;xsl:sequence select="$last-colnum - $colnum + 1"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:sequence select="1"/&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="fcals:rowspan" as="xs:integer" cache="yes"&gt;
  &lt;xsl:param name="node" as="element()" required="yes"/&gt;
  &lt;xsl:param name="colnum" as="xs:integer" required="yes"/&gt;

  &lt;xsl:choose&gt;
    &lt;xsl:when test="$node/@morerows"&gt;
      &lt;xsl:sequence select="xs:integer($node/@morerows) + 1"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:sequence select="1"/&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:function&gt;

&lt;!-- ============================================================ --&gt;

&lt;xsl:function name="fcals:cell-decoration" as="map(*)"&gt;
  &lt;xsl:param name="row" as="element(db:row)"/&gt;
  &lt;xsl:param name="cell" as="element()?"/&gt;
  &lt;xsl:param name="column" as="xs:integer"/&gt;
  &lt;xsl:sequence select="map {
    'colsep': fcals:colsep($row, $cell, $column),
    'rowsep': fcals:rowsep($row, $cell, $column),
    'char': fcals:char($row, $cell, $column),
    'align': fcals:align($row, $cell, $column),
    'valign': fcals:valign($row, $cell)
  }"/&gt;
&lt;!--
--&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="fcals:colsep" as="xs:boolean" cache="yes"&gt;
  &lt;xsl:param name="row" as="element(db:row)"/&gt;
  &lt;xsl:param name="node" as="element()?"/&gt;
  &lt;xsl:param name="colnum" as="xs:integer"/&gt;

  &lt;xsl:variable name="tgroup" select="fcals:tgroup($row)"/&gt;

  &lt;xsl:choose&gt;
    &lt;xsl:when test="$node/@colsep"&gt;
      &lt;xsl:sequence select="$node/@colsep = '1'"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="$node/@nameend"&gt;
      &lt;xsl:sequence select="fcals:colsep-colspec($node, $node/@nameend)"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="$node/@colname"&gt;
      &lt;xsl:sequence select="fcals:colsep-colspec($node, $node/@colname)"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="$node/@spanname"&gt;
      &lt;xsl:sequence select="fcals:colsep-spanspec($node, $node/@spanname)"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="fcals:colspec-for-column($tgroup, $colnum)/@colsep"&gt;
      &lt;xsl:sequence select="fcals:colspec-for-column($tgroup, $colnum)/@colsep = '1'"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="$tgroup/@colsep"&gt;
      &lt;xsl:sequence select="$tgroup/@colsep = '1'"/&gt;
    &lt;/xsl:when&gt;
    &lt;!-- exclude entry parent of entrytbl --&gt;
    &lt;xsl:when test="$tgroup/parent::*[not(self::db:entry)]/@colsep"&gt;
      &lt;xsl:sequence select="$tgroup/parent::*[not(self::db:entry)]/@colsep = '1'"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:sequence select="false()"/&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="fcals:colsep-colspec" as="xs:boolean" cache="yes"&gt;
  &lt;xsl:param name="node" as="element()" required="yes"/&gt;
  &lt;xsl:param name="name" as="xs:string" required="yes"/&gt;

  &lt;xsl:variable name="colspec" select="fcals:colspec($node, $name)"/&gt;

  &lt;xsl:variable name="tgroup" select="fcals:tgroup($node)"/&gt;

  &lt;xsl:choose&gt;
    &lt;xsl:when test="$colspec/@colsep"&gt;
      &lt;xsl:sequence select="$colspec/@colsep = '1'"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="$tgroup/@colsep"&gt;
      &lt;xsl:sequence select="$tgroup/@colsep = '1'"/&gt;
    &lt;/xsl:when&gt;
    &lt;!-- exclude entry parent of entrytbl --&gt;
    &lt;xsl:when test="$tgroup/parent::*[not(self::db:entry)]/@colsep"&gt;
      &lt;xsl:sequence select="$tgroup/parent::*[not(self::db:entry)]/@colsep = '1'"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:sequence select="false()"/&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="fcals:colsep-spanspec" as="xs:boolean" cache="yes"&gt;
  &lt;xsl:param name="node" as="element()" required="yes"/&gt;
  &lt;xsl:param name="name" as="xs:string" required="yes"/&gt;

  &lt;xsl:variable name="spanspec" select="fcals:spanspec($node, $name)"/&gt;

  &lt;xsl:choose&gt;
    &lt;xsl:when test="$spanspec/@colsep"&gt;
      &lt;xsl:sequence select="$spanspec/@colsep = '1'"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:sequence select="fcals:colsep-colspec($node, $spanspec/@nameend)"/&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="fcals:empty-cell-colsep" as="xs:boolean" cache="yes"&gt;
  &lt;xsl:param name="row" as="element(db:row)"/&gt;
  &lt;xsl:param name="cell" as="map(*)"/&gt;

  &lt;xsl:variable name="tgroup" select="fcals:tgroup($row)"/&gt;

  &lt;xsl:choose&gt;
    &lt;xsl:when test="fcals:colspec-for-column($tgroup, $cell?first-column)/@colsep"&gt;
      &lt;xsl:sequence select="fcals:colspec-for-column($tgroup, $cell?first-column)/@colsep = '1'"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="$tgroup/@colsep"&gt;
      &lt;xsl:sequence select="$tgroup/@colsep = '1'"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="$tgroup/parent::*[not(self::db:entry)]/@colsep"&gt;
      &lt;xsl:sequence select="$tgroup/parent::*[not(self::db:entry)]/@colsep = '1'"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:sequence select="false()"/&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:function&gt;

&lt;!-- ============================================================ --&gt;

&lt;xsl:function name="fcals:rowsep" as="xs:boolean" cache="yes"&gt;
  &lt;xsl:param name="row" as="element(db:row)"/&gt;
  &lt;xsl:param name="node" as="element()?"/&gt;
  &lt;xsl:param name="colnum" as="xs:integer"/&gt;

  &lt;xsl:variable name="tgroup" select="fcals:tgroup($row)"/&gt;

  &lt;xsl:choose&gt;
    &lt;xsl:when test="$node/@rowsep"&gt;
      &lt;xsl:sequence select="$node/@rowsep = '1'"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="$node/@nameend"&gt;
      &lt;xsl:sequence select="fcals:rowsep-colspec($node, $node/@nameend)"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="$node/@colname"&gt;
      &lt;xsl:sequence select="fcals:rowsep-colspec($node, $node/@colname)"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="$node/@spanname"&gt;
      &lt;xsl:sequence select="fcals:rowsep-spanspec($node, $node/@spanname)"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="$node/parent::db:row/@rowsep"&gt;
      &lt;xsl:sequence select="$node/parent::db:row/@rowsep = '1'"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="$tgroup/@rowsep"&gt;
      &lt;xsl:sequence select="$tgroup/@rowsep = '1'"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="$tgroup/parent::*[not(self::db:entry)]/@rowsep"&gt;
      &lt;xsl:sequence select="$tgroup/parent::*[not(self::db:entry)]/@rowsep = '1'"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:sequence select="false()"/&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="fcals:rowsep-colspec" as="xs:boolean" cache="yes"&gt;
  &lt;xsl:param name="node" as="element()" required="yes"/&gt;
  &lt;xsl:param name="name" as="xs:string" required="yes"/&gt;

  &lt;xsl:variable name="colspec" select="fcals:colspec($node, $name)"/&gt;

  &lt;xsl:variable name="tgroup"
                select="($node/ancestor::db:tgroup
                         |$node/ancestor::db:entrytbl)[last()]"/&gt;

  &lt;xsl:choose&gt;
    &lt;xsl:when test="$colspec/@rowsep"&gt;
      &lt;xsl:sequence select="$colspec/@rowsep = '1'"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="$node/parent::db:row/@rowsep"&gt;
      &lt;xsl:sequence select="$node/parent::db:row/@rowsep = '1'"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="$tgroup/@rowsep"&gt;
      &lt;xsl:sequence select="$tgroup/@rowsep = '1'"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="$tgroup/parent::*[not(self::db:entry)]/@rowsep"&gt;
      &lt;xsl:sequence select="$tgroup/parent::*[not(self::db:entry)]/@rowsep = '1'"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:sequence select="false()"/&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="fcals:rowsep-spanspec" as="xs:boolean" cache="yes"&gt;
  &lt;xsl:param name="node" as="element()" required="yes"/&gt;
  &lt;xsl:param name="name" as="xs:string" required="yes"/&gt;

  &lt;xsl:variable name="spanspec" select="fcals:spanspec($node, $name)"/&gt;

  &lt;xsl:choose&gt;
    &lt;xsl:when test="$spanspec/@rowsep"&gt;
      &lt;xsl:sequence select="$spanspec/@rowsep = '1'"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:sequence select="fcals:rowsep-colspec($node, $spanspec/@nameend)"/&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="fcals:align" as="xs:string?" cache="yes"&gt;
  &lt;xsl:param name="row" as="element(db:row)"/&gt;
  &lt;xsl:param name="node" as="element()?"/&gt;
  &lt;xsl:param name="colnum" as="xs:integer"/&gt;

  &lt;xsl:variable name="tgroup" select="fcals:tgroup($row)"/&gt;
  &lt;xsl:choose&gt;
    &lt;xsl:when test="$node/@align"&gt;
      &lt;xsl:sequence select="$node/@align"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="$node/@nameend"&gt;
      &lt;xsl:sequence select="fcals:align-colspec($node, $node/@nameend)"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="$node/@colname"&gt;
      &lt;xsl:sequence select="fcals:align-colspec($node, $node/@colname)"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="$node/@spanname"&gt;
      &lt;xsl:sequence select="fcals:align-spanspec($node, $node/@spanname)"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="fcals:colspec-for-column($tgroup, $colnum)/@align"&gt;
      &lt;xsl:sequence select="fcals:colspec-for-column($tgroup, $colnum)/@align"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="$tgroup/@align"&gt;
      &lt;xsl:sequence select="$tgroup/@align"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="$tgroup/parent::*[not(self::db:entry)]/@align"&gt;
      &lt;xsl:sequence select="$tgroup/parent::*[not(self::db:entry)]/@align"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:sequence select="()"/&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="fcals:align-colspec" as="xs:string?" cache="yes"&gt;
  &lt;xsl:param name="node" as="element()" required="yes"/&gt;
  &lt;xsl:param name="name" as="xs:string" required="yes"/&gt;

  &lt;xsl:variable name="colspec" select="fcals:colspec($node, $name)"/&gt;

  &lt;xsl:variable name="tgroup"
                select="($node/ancestor::db:tgroup
                         |$node/ancestor::db:entrytbl)[last()]"/&gt;

  &lt;xsl:choose&gt;
    &lt;xsl:when test="$colspec/@align"&gt;
      &lt;xsl:sequence select="$colspec/@align"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="$tgroup/@align"&gt;
      &lt;xsl:sequence select="$tgroup/@align"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="$tgroup/parent::*[not(self::db:entry)]/@align"&gt;
      &lt;xsl:sequence select="$tgroup/parent::*[not(self::db:entry)]/@align"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:sequence select="()"/&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="fcals:align-spanspec" as="xs:string?" cache="yes"&gt;
  &lt;xsl:param name="node" as="element()" required="yes"/&gt;
  &lt;xsl:param name="name" as="xs:string" required="yes"/&gt;

  &lt;xsl:variable name="spanspec" select="fcals:spanspec($node, $name)"/&gt;

  &lt;xsl:choose&gt;
    &lt;xsl:when test="$spanspec/@align"&gt;
      &lt;xsl:sequence select="$spanspec/@align"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:sequence select="fcals:align-colspec($node, $spanspec/@nameend)"/&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="fcals:char" as="xs:string?" cache="yes"&gt;
  &lt;xsl:param name="row" as="element(db:row)"/&gt;
  &lt;xsl:param name="node" as="element()?"/&gt;
  &lt;xsl:param name="colnum" as="xs:integer"/&gt;

  &lt;xsl:variable name="tgroup" select="fcals:tgroup($row)"/&gt;

  &lt;xsl:choose&gt;
    &lt;xsl:when test="$node/@char"&gt;
      &lt;xsl:sequence select="$node/@char"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="$node/@nameend"&gt;
      &lt;xsl:sequence select="fcals:char-colspec($node, $node/@nameend)"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="$node/@colname"&gt;
      &lt;xsl:sequence select="fcals:char-colspec($node, $node/@colname)"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="$node/@spanname"&gt;
      &lt;xsl:sequence select="fcals:char-spanspec($node, $node/@spanname)"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="fcals:colspec-for-column($tgroup, $colnum)/@char"&gt;
      &lt;xsl:sequence select="fcals:colspec-for-column($tgroup, $colnum)/@char"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="$tgroup/@char"&gt;
      &lt;xsl:sequence select="$tgroup/@char"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="$tgroup/parent::*[not(self::db:entry)]/@char"&gt;
      &lt;xsl:sequence select="$tgroup/parent::*[not(self::db:entry)]/@char"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:sequence select="()"/&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="fcals:char-colspec" as="xs:string?" cache="yes"&gt;
  &lt;xsl:param name="node" as="element()" required="yes"/&gt;
  &lt;xsl:param name="name" as="xs:string" required="yes"/&gt;

  &lt;xsl:variable name="colspec" select="fcals:colspec($node, $name)"/&gt;

  &lt;xsl:variable name="tgroup"
                select="($node/ancestor::db:tgroup
                         |$node/ancestor::db:entrytbl)[last()]"/&gt;

  &lt;xsl:choose&gt;
    &lt;xsl:when test="$colspec/@char"&gt;
      &lt;xsl:sequence select="$colspec/@char"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="$tgroup/@char"&gt;
      &lt;xsl:sequence select="$tgroup/@char"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="$tgroup/parent::*[not(self::db:entry)]/@char"&gt;
      &lt;xsl:sequence select="$tgroup/parent::*[not(self::db:entry)]/@char"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:sequence select="()"/&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="fcals:char-spanspec" as="xs:string?" cache="yes"&gt;
  &lt;xsl:param name="node" as="element()" required="yes"/&gt;
  &lt;xsl:param name="name" as="xs:string" required="yes"/&gt;

  &lt;xsl:variable name="spanspec" select="fcals:spanspec($node, $name)"/&gt;

  &lt;xsl:choose&gt;
    &lt;xsl:when test="$spanspec/@char"&gt;
      &lt;xsl:sequence select="$spanspec/@char"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:sequence select="fcals:char-colspec($node, $spanspec/@nameend)"/&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="fcals:valign" as="xs:string?" cache="yes"&gt;
  &lt;xsl:param name="row" as="element(db:row)"/&gt;
  &lt;xsl:param name="node" as="element()?"/&gt;

  &lt;xsl:choose&gt;
    &lt;xsl:when test="$node/@valign"&gt;
      &lt;xsl:sequence select="$node/@valign"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="$node/parent::db:row/@valign"&gt;
      &lt;xsl:sequence select="$node/parent::db:row/@valign"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="$node/parent::db:row/parent::*/@valign"&gt;
      &lt;xsl:sequence select="$node/parent::db:row/parent::*/@valign"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:sequence select="()"/&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:function&gt;

&lt;!-- ============================================================ --&gt;

&lt;xsl:function name="f:cals-rowsep" as="xs:string?" cache="yes"&gt;
  &lt;xsl:param name="row" as="element(db:row)"/&gt;
  &lt;xsl:param name="cell" as="map(*)"/&gt;
  &lt;xsl:param name="last-row-rowsep" as="xs:boolean"/&gt;

  &lt;xsl:variable name="last-row"
                select="count($row/following-sibling::db:row) lt $cell?rowspan"/&gt;

  &lt;xsl:variable name="rowsep"
                select="if ($cell?node)
                        then $cell?rowsep
                        else fcals:empty-cell-rowsep($row)"/&gt;

  &lt;xsl:if test="($rowsep and not($last-row))
                or ($last-row and $last-row-rowsep)"&gt;
    &lt;xsl:sequence select="'rowsep'"/&gt;
  &lt;/xsl:if&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="f:cals-colsep" as="xs:string?" cache="yes"&gt;
  &lt;xsl:param name="row" as="element(db:row)"/&gt;
  &lt;xsl:param name="cell" as="map(*)"/&gt;
  &lt;xsl:param name="last-col-colsep" as="xs:boolean"/&gt;

  &lt;xsl:variable name="last-col"
                select="$cell?first-column + $cell?colspan
                        gt fcals:table-columns($row)"/&gt;

  &lt;xsl:variable name="colsep"
                select="if ($cell?node)
                        then $cell?colsep
                        else fcals:empty-cell-colsep($row, $cell)"/&gt;

  &lt;xsl:if test="($colsep and not($last-col))
                or ($last-col and $last-col-colsep)"&gt;
    &lt;xsl:sequence select="'colsep'"/&gt;
  &lt;/xsl:if&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="fcals:empty-cell-rowsep" as="xs:boolean" cache="yes"&gt;
  &lt;xsl:param name="row" as="element(db:row)"/&gt;

  &lt;xsl:variable name="tgroup" select="fcals:tgroup($row)"/&gt;

  &lt;xsl:choose&gt;
    &lt;xsl:when test="$row/@rowsep"&gt;
      &lt;xsl:sequence select="$row/@rowsep = '1'"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="$tgroup/@rowsep"&gt;
      &lt;xsl:sequence select="$tgroup/@rowsep = '1'"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="$tgroup/parent::*[not(self::db:entry)]/@rowsep"&gt;
      &lt;xsl:sequence select="$tgroup/parent::*[not(self::db:entry)]/@rowsep = '1'"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:sequence select="false()"/&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:function&gt;

&lt;!-- ============================================================ --&gt;

&lt;xsl:function name="fp:only-initial-pis" as="processing-instruction()*"&gt;
  &lt;xsl:param name="nodes" as="node()*"/&gt;

  &lt;xsl:iterate select="$nodes"&gt;
    &lt;xsl:param name="pis" select="()"/&gt;
    &lt;xsl:choose&gt;
      &lt;xsl:when test="self::processing-instruction()"&gt;
        &lt;xsl:next-iteration&gt;
          &lt;xsl:with-param name="pis" select="($pis, .)"/&gt;
        &lt;/xsl:next-iteration&gt;
      &lt;/xsl:when&gt;
      &lt;xsl:otherwise&gt;
        &lt;xsl:sequence select="$pis"/&gt;
        &lt;xsl:break/&gt;
      &lt;/xsl:otherwise&gt;
    &lt;/xsl:choose&gt;
  &lt;/xsl:iterate&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="fp:align-char-pad" as="xs:string"&gt;
  &lt;!-- FIXME: optimize this --&gt;
  &lt;xsl:param name="text" as="xs:string"/&gt;
  &lt;xsl:param name="width" as="xs:integer"/&gt;
  &lt;xsl:param name="pad" as="xs:string"/&gt;
  &lt;xsl:sequence select="if (string-length($text) lt $width)
                        then fp:align-char-pad($text||$pad, $width, $pad)
                        else $text"/&gt;
&lt;/xsl:function&gt;

&lt;!-- ============================================================ --&gt;

&lt;xsl:function name="fcals:table-columns" as="xs:integer" cache="yes"&gt;
  &lt;xsl:param name="node" as="element()"/&gt;
  &lt;xsl:sequence select="xs:integer(fcals:tgroup($node)/@cols)"/&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="fcals:tgroup" as="element()" cache="yes"&gt;
  &lt;xsl:param name="node" as="element()"/&gt;
  &lt;xsl:sequence select="($node/ancestor::db:tgroup
                         |$node/ancestor::db:entrytbl)[last()]"/&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="fcals:zeros" cache="yes"&gt;
  &lt;xsl:param name="row" as="element(db:row)"/&gt;
  &lt;xsl:variable name="cols" select="fcals:table-columns($row)"/&gt;
  &lt;xsl:sequence select="array { for $col in 1 to $cols return 0 }"/&gt;
&lt;/xsl:function&gt;

&lt;/xsl:stylesheet&gt;
</code></pre></td></tr></table></div></div></div></div><div class="stylesheet" id="S-30699"><h3>tablehtml.xsl</h3><p><span><span class="template all">6 templates</span></span></p><div class="instructions"><div class="title closed">Instructions</div><div class="body"><div id="S-30699-t-1" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:table</div><div class="props"><div class="calls">Calls: <a href="#S-28936-docbook.org.ns.docbook.functions.generate-id,1">f:generate-id()</a></div><div class="calls">Calls: <a href="#S-50448-docbook.org.ns.docbook.templates.table-footnotes">t:table-footnotes</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:table</code></div></div></div><div id="S-30699-t-2" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:td/db:table|db:th/db:table</div><div class="props"><div class="calls">Calls: <a href="#S-28936-docbook.org.ns.docbook.functions.generate-id,1">f:generate-id()</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="priority">Priority: <code>100</code></div><div class="matches">Matches: <code>db:td/db:table</code>, <code>db:th/db:table</code></div></div></div><div id="S-30699-t-3" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:informaltable</div><div class="props"><div class="calls">Calls: <a href="#S-50448-docbook.org.ns.docbook.templates.table-footnotes">t:table-footnotes</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:informaltable</code></div></div></div><div id="S-30699-t-4" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:td/db:informaltable|db:th/d…</div><div class="props"><div class="mode">Mode: <code>m:docbook</code></div><div class="priority">Priority: <code>100</code></div><div class="matches">Matches: <code>db:td/db:informaltable</code>, <code>db:th/db:informaltable</code></div></div></div><div id="S-30699-t-5" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:caption|db:col|db:colgroup|…</div><div class="props"><div class="mode">Mode: <code>m:htmltable</code></div><div class="matches">Matches: <code>db:caption</code>, <code>db:col</code>, <code>db:colgroup</code>, <code>db:tbody</code>, <code>db:td</code>, <code>db:tfoot</code>, <code>db:th</code>, <code>db:thead</code>, <code>db:tr</code></div></div></div><div id="S-30699-t-6" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ *</div><div class="props"><div class="mode">Mode: <code>m:htmltable</code></div><div class="matches">Matches: <code>*</code></div></div></div></div></div><div class="source-code"><div class="title closed">Source code</div><div class="body"><div><table><tr><td valign="top" align="right"><pre class="fake-prism"><span id="line-S-30699-1">1</span>
<span id="line-S-30699-2"><span class="lno">2</span></span>
<span id="line-S-30699-3"><span class="lno">3</span></span>
<span id="line-S-30699-4"><span class="lno">4</span></span>
<span id="line-S-30699-5">5</span>
<span id="line-S-30699-6"><span class="lno">6</span></span>
<span id="line-S-30699-7"><span class="lno">7</span></span>
<span id="line-S-30699-8"><span class="lno">8</span></span>
<span id="line-S-30699-9"><span class="lno">9</span></span>
<span id="line-S-30699-10">10</span>
<span id="line-S-30699-11"><span class="lno">11</span></span>
<span id="line-S-30699-12"><span class="lno">12</span></span>
<span id="line-S-30699-13"><span class="lno">13</span></span>
<span id="line-S-30699-14"><span class="lno">14</span></span>
<span id="line-S-30699-15">15</span>
<span id="line-S-30699-16"><span class="lno">16</span></span>
<span id="line-S-30699-17"><span class="lno">17</span></span>
<span id="line-S-30699-18"><span class="lno">18</span></span>
<span id="line-S-30699-19"><span class="lno">19</span></span>
<span id="line-S-30699-20">20</span>
<span id="line-S-30699-21"><span class="lno">21</span></span>
<span id="line-S-30699-22"><span class="lno">22</span></span>
<span id="line-S-30699-23"><span class="lno">23</span></span>
<span id="line-S-30699-24"><span class="lno">24</span></span>
<span id="line-S-30699-25">25</span>
<span id="line-S-30699-26"><span class="lno">26</span></span>
<span id="line-S-30699-27"><span class="lno">27</span></span>
<span id="line-S-30699-28"><span class="lno">28</span></span>
<span id="line-S-30699-29"><span class="lno">29</span></span>
<span id="line-S-30699-30">30</span>
<span id="line-S-30699-31"><span class="lno">31</span></span>
<span id="line-S-30699-32"><span class="lno">32</span></span>
<span id="line-S-30699-33"><span class="lno">33</span></span>
<span id="line-S-30699-34"><span class="lno">34</span></span>
<span id="line-S-30699-35">35</span>
<span id="line-S-30699-36"><span class="lno">36</span></span>
<span id="line-S-30699-37"><span class="lno">37</span></span>
<span id="line-S-30699-38"><span class="lno">38</span></span>
<span id="line-S-30699-39"><span class="lno">39</span></span>
<span id="line-S-30699-40">40</span>
<span id="line-S-30699-41"><span class="lno">41</span></span>
<span id="line-S-30699-42"><span class="lno">42</span></span>
<span id="line-S-30699-43"><span class="lno">43</span></span>
<span id="line-S-30699-44"><span class="lno">44</span></span>
<span id="line-S-30699-45">45</span>
<span id="line-S-30699-46"><span class="lno">46</span></span>
<span id="line-S-30699-47"><span class="lno">47</span></span>
<span id="line-S-30699-48"><span class="lno">48</span></span>
<span id="line-S-30699-49"><span class="lno">49</span></span>
<span id="line-S-30699-50">50</span>
<span id="line-S-30699-51"><span class="lno">51</span></span>
<span id="line-S-30699-52"><span class="lno">52</span></span>
<span id="line-S-30699-53"><span class="lno">53</span></span>
<span id="line-S-30699-54"><span class="lno">54</span></span>
<span id="line-S-30699-55">55</span>
<span id="line-S-30699-56"><span class="lno">56</span></span>
<span id="line-S-30699-57"><span class="lno">57</span></span>
<span id="line-S-30699-58"><span class="lno">58</span></span>
<span id="line-S-30699-59"><span class="lno">59</span></span>
<span id="line-S-30699-60">60</span>
<span id="line-S-30699-61"><span class="lno">61</span></span>
<span id="line-S-30699-62"><span class="lno">62</span></span>
<span id="line-S-30699-63"><span class="lno">63</span></span>
<span id="line-S-30699-64"><span class="lno">64</span></span>
<span id="line-S-30699-65">65</span>
<span id="line-S-30699-66"><span class="lno">66</span></span>
<span id="line-S-30699-67"><span class="lno">67</span></span>
<span id="line-S-30699-68"><span class="lno">68</span></span>
<span id="line-S-30699-69"><span class="lno">69</span></span>
<span id="line-S-30699-70">70</span>
<span id="line-S-30699-71"><span class="lno">71</span></span>
<span id="line-S-30699-72"><span class="lno">72</span></span>
<span id="line-S-30699-73"><span class="lno">73</span></span>
<span id="line-S-30699-74"><span class="lno">74</span></span>
<span id="line-S-30699-75">75</span>
<span id="line-S-30699-76"><span class="lno">76</span></span>
<span id="line-S-30699-77"><span class="lno">77</span></span>
<span id="line-S-30699-78"><span class="lno">78</span></span>
<span id="line-S-30699-79"><span class="lno">79</span></span>
<span id="line-S-30699-80">80</span>
<span id="line-S-30699-81"><span class="lno">81</span></span>
<span id="line-S-30699-82"><span class="lno">82</span></span>
<span id="line-S-30699-83"><span class="lno">83</span></span>
<span id="line-S-30699-84"><span class="lno">84</span></span>
<span id="line-S-30699-85">85</span>
<span id="line-S-30699-86"><span class="lno">86</span></span>
<span id="line-S-30699-87"><span class="lno">87</span></span>
<span id="line-S-30699-88"><span class="lno">88</span></span>
<span id="line-S-30699-89"><span class="lno">89</span></span>
<span id="line-S-30699-90">90</span>
<span id="line-S-30699-91"><span class="lno">91</span></span>
<span id="line-S-30699-92"><span class="lno">92</span></span>
<span id="line-S-30699-93"><span class="lno">93</span></span>
<span id="line-S-30699-94"><span class="lno">94</span></span>
<span id="line-S-30699-95">95</span>
<span id="line-S-30699-96"><span class="lno">96</span></span>
<span id="line-S-30699-97"><span class="lno">97</span></span>
<span id="line-S-30699-98"><span class="lno">98</span></span>
<span id="line-S-30699-99"><span class="lno">99</span></span>
<span id="line-S-30699-100">100</span>
<span id="line-S-30699-101"><span class="lno">101</span></span>
<span id="line-S-30699-102"><span class="lno">102</span></span>
<span id="line-S-30699-103"><span class="lno">103</span></span>
</pre></td><td valign="top"><pre><code class="language-xml">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                xmlns:db="http://docbook.org/ns/docbook"
                xmlns:f="http://docbook.org/ns/docbook/functions"
                xmlns:m="http://docbook.org/ns/docbook/modes"
                xmlns:t="http://docbook.org/ns/docbook/templates"
                xmlns:xs="http://www.w3.org/2001/XMLSchema"
                xmlns="http://www.w3.org/1999/xhtml"
                default-mode="m:docbook"
                exclude-result-prefixes="db f m t xs"
                version="3.0"&gt;

&lt;xsl:template match="db:table[not(db:tgroup)]"&gt;
  &lt;figure class="{local-name(.)}"&gt;
    &lt;xsl:choose&gt;
      &lt;xsl:when test="@xml:id"&gt;
        &lt;xsl:attribute name="id" select="@xml:id"/&gt;
      &lt;/xsl:when&gt;
      &lt;xsl:when test="parent::*"&gt;
        &lt;xsl:attribute name="id" select="f:generate-id(.)"/&gt;
      &lt;/xsl:when&gt;
      &lt;xsl:otherwise&gt;
        &lt;!-- never mind --&gt;
      &lt;/xsl:otherwise&gt;
    &lt;/xsl:choose&gt;

    &lt;table&gt;
      &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
      &lt;xsl:apply-templates mode="m:htmltable"/&gt;
    &lt;/table&gt;
    &lt;xsl:if test=".//db:footnote"&gt;
      &lt;xsl:call-template name="t:table-footnotes"&gt;
        &lt;xsl:with-param name="footnotes" select=".//db:footnote"/&gt;
      &lt;/xsl:call-template&gt;
    &lt;/xsl:if&gt;
  &lt;/figure&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:td/db:table[not(db:tgroup)]
                     |db:th/db:table[not(db:tgroup)]"
              priority="100"&gt;
  &lt;table&gt;
    &lt;xsl:choose&gt;
      &lt;xsl:when test="@xml:id"&gt;
        &lt;xsl:attribute name="id" select="@xml:id"/&gt;
      &lt;/xsl:when&gt;
      &lt;xsl:when test="parent::*"&gt;
        &lt;xsl:attribute name="id" select="f:generate-id(.)"/&gt;
      &lt;/xsl:when&gt;
      &lt;xsl:otherwise&gt;
        &lt;!-- never mind --&gt;
      &lt;/xsl:otherwise&gt;
    &lt;/xsl:choose&gt;

    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
    &lt;xsl:apply-templates mode="m:htmltable"/&gt;
  &lt;/table&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:informaltable[not(db:tgroup)]"&gt;
  &lt;figure class="{local-name(.)}"&gt;
    &lt;xsl:if test="@xml:id"&gt;
      &lt;xsl:attribute name="id" select="@xml:id"/&gt;
    &lt;/xsl:if&gt;
    &lt;table&gt;
      &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
      &lt;xsl:apply-templates select="node() except db:info" mode="m:htmltable"/&gt;
    &lt;/table&gt;
    &lt;xsl:if test=".//db:footnote"&gt;
      &lt;xsl:call-template name="t:table-footnotes"&gt;
        &lt;xsl:with-param name="footnotes" select=".//db:footnote"/&gt;
      &lt;/xsl:call-template&gt;
    &lt;/xsl:if&gt;
  &lt;/figure&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:td/db:informaltable[not(db:tgroup)]
                     |db:th/db:informaltable[not(db:tgroup)]"
              priority="100"&gt;
  &lt;table&gt;
    &lt;xsl:if test="@xml:id"&gt;
      &lt;xsl:attribute name="id" select="@xml:id"/&gt;
    &lt;/xsl:if&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
    &lt;xsl:apply-templates select="node() except db:info" mode="m:htmltable"/&gt;
  &lt;/table&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:tbody|db:thead|db:tfoot|db:tr|db:th|db:td|db:caption
                     |db:colgroup|db:col"
              mode="m:htmltable"&gt;
  &lt;xsl:element name="{local-name(.)}" namespace="http://www.w3.org/1999/xhtml"&gt;
    &lt;xsl:copy-of select="@*"/&gt;
    &lt;xsl:apply-templates mode="m:htmltable"/&gt;
  &lt;/xsl:element&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="*" mode="m:htmltable"&gt;
  &lt;xsl:apply-templates select="."/&gt;
&lt;/xsl:template&gt;

&lt;/xsl:stylesheet&gt;
</code></pre></td></tr></table></div></div></div></div><div class="stylesheet" id="S-9504"><h3>inlines.xsl</h3><p><span><span class="template all">104 templates</span></span></p><div class="instructions"><div class="title closed">Instructions</div><div class="body"><div id="S-9504-docbook.org.ns.docbook.templates.inline" class="instruction template"><div class="title"><span class="link"></span>Template t:inline  match ≅ </div><div class="props"><div class="calls">Calls: <a href="#S-28936-docbook.org.ns.docbook.functions.attributes,4">f:attributes()</a></div><div class="calls">Calls: <a href="#S-29523-docbook.org.ns.docbook.templates.xlink">t:xlink</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-45868-t-13">template</a>, <a href="#S-45868-t-23">template</a>, <a href="#S-28322-t-3">template</a>, <a href="#S-33240-t-16">template</a>, <a href="#S-33240-t-18">template</a>, <a href="#S-33240-t-19">template</a>, <a href="#S-33240-t-20">template</a>, <a href="#S-34731-t-23">template</a>, <a href="#S-56456-t-17">template</a>, <a href="#S-9504-t-2">template</a>, <a href="#S-9504-t-3">template</a>, <a href="#S-9504-t-4">template</a>, <a href="#S-9504-t-5">template</a>, <a href="#S-9504-t-7">template</a>, <a href="#S-9504-t-8">template</a>, <a href="#S-9504-t-9">template</a>, <a href="#S-9504-t-10">template</a>, <a href="#S-9504-t-11">template</a>, <a href="#S-9504-t-12">template</a>, <a href="#S-9504-t-13">template</a>, <a href="#S-9504-t-14">template</a>, <a href="#S-9504-t-15">template</a>, <a href="#S-9504-t-16">template</a>, <a href="#S-9504-t-17">template</a>, <a href="#S-9504-t-18">template</a>, <a href="#S-9504-t-19">template</a>, <a href="#S-9504-t-20">template</a>, <a href="#S-9504-t-21">template</a>, <a href="#S-9504-t-22">template</a>, <a href="#S-9504-t-23">template</a>, <a href="#S-9504-t-24">template</a>, <a href="#S-9504-t-25">template</a>, <a href="#S-9504-t-26">template</a>, <a href="#S-9504-t-27">template</a>, <a href="#S-9504-t-28">template</a>, <a href="#S-9504-t-29">template</a>, <a href="#S-9504-t-30">template</a>, <a href="#S-9504-t-31">template</a>, <a href="#S-9504-t-32">template</a>, <a href="#S-9504-t-33">template</a>, <a href="#S-9504-t-34">template</a>, <a href="#S-9504-t-35">template</a>, <a href="#S-9504-t-36">template</a>, <a href="#S-9504-t-37">template</a>, <a href="#S-9504-t-38">template</a>, <a href="#S-9504-t-39">template</a>, <a href="#S-9504-t-40">template</a>, <a href="#S-9504-t-41">template</a>, <a href="#S-9504-t-42">template</a>, <a href="#S-9504-t-43">template</a>, <a href="#S-9504-t-44">template</a>, <a href="#S-9504-t-45">template</a>, <a href="#S-9504-t-46">template</a>, <a href="#S-9504-t-47">template</a>, <a href="#S-9504-t-48">template</a>, <a href="#S-9504-t-49">template</a>, <a href="#S-9504-t-50">template</a>, <a href="#S-9504-t-51">template</a>, <a href="#S-9504-t-52">template</a>, <a href="#S-9504-t-53">template</a>, <a href="#S-9504-t-54">template</a>, <a href="#S-9504-t-55">template</a>, <a href="#S-9504-t-56">template</a>, <a href="#S-9504-t-57">template</a>, <a href="#S-9504-t-58">template</a>, <a href="#S-9504-t-59">template</a>, <a href="#S-9504-t-60">template</a>, <a href="#S-9504-t-61">template</a>, <a href="#S-9504-t-62">template</a>, <a href="#S-9504-t-63">template</a>, <a href="#S-9504-t-64">template</a>, <a href="#S-9504-t-65">template</a>, <a href="#S-9504-t-66">template</a>, <a href="#S-9504-t-67">template</a>, <a href="#S-9504-t-68">template</a>, <a href="#S-9504-t-69">template</a>, <a href="#S-9504-t-70">template</a>, <a href="#S-9504-t-71">template</a>, <a href="#S-9504-t-72">template</a>, <a href="#S-9504-t-73">template</a>, <a href="#S-9504-t-74">template</a>, <a href="#S-9504-t-75">template</a>, <a href="#S-9504-t-76">template</a>, <a href="#S-9504-t-77">template</a>, <a href="#S-9504-t-78">template</a>, <a href="#S-9504-t-79">template</a>, <a href="#S-9504-t-80">template</a>, <a href="#S-9504-t-81">template</a>, <a href="#S-9504-t-82">template</a>, <a href="#S-9504-t-83">template</a>, <a href="#S-9504-t-84">template</a>, <a href="#S-9504-t-85">template</a>, <a href="#S-9504-t-86">template</a>, <a href="#S-9504-t-87">template</a>, <a href="#S-9504-t-88">template</a>, <a href="#S-9504-t-89">template</a>, <a href="#S-9504-t-90">template</a>, <a href="#S-9504-t-91">template</a>, <a href="#S-9504-t-92">template</a>, <a href="#S-9504-t-93">template</a>, <a href="#S-9504-t-94">template</a>, <a href="#S-9504-t-95">template</a>, <a href="#S-9504-t-96">template</a>, <a href="#S-9504-t-97">template</a>, <a href="#S-9504-t-98">template</a>, <a href="#S-9504-t-99">template</a>, <a href="#S-10318-t-1">template</a>, <a href="#S-624-t-3">template</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-45868">modules/bibliography.xsl</a>, <a href="#S-28322">modules/glossary.xsl</a>, <a href="#S-33240">modules/info.xsl</a>, <a href="#S-34731">modules/blocks.xsl</a>, <a href="#S-56456">modules/verbatim.xsl</a>, <a href="#S-9504">modules/inlines.xsl</a>, <a href="#S-10318">modules/links.xsl</a>, <a href="#S-624">modules/publishers.xsl</a></div><div class="mode">Mode: <code>m:docbook</code></div></div></div><div id="S-9504-t-2" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:abbrev</div><div class="props"><div class="calls">Calls: <a href="#S-9504-docbook.org.ns.docbook.templates.inline">t:inline</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:abbrev</code></div></div></div><div id="S-9504-t-3" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:accel</div><div class="props"><div class="calls">Calls: <a href="#S-9504-docbook.org.ns.docbook.templates.inline">t:inline</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:accel</code></div></div></div><div id="S-9504-t-4" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:acronym</div><div class="props"><div class="calls">Calls: <a href="#S-9504-docbook.org.ns.docbook.templates.inline">t:inline</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:acronym</code></div></div></div><div id="S-9504-t-5" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:application</div><div class="props"><div class="calls">Calls: <a href="#S-9504-docbook.org.ns.docbook.templates.inline">t:inline</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:application</code></div></div></div><div id="S-9504-t-6" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:author</div><div class="props"><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:author</code></div></div></div><div id="S-9504-t-7" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:buildtarget</div><div class="props"><div class="calls">Calls: <a href="#S-9504-docbook.org.ns.docbook.templates.inline">t:inline</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:buildtarget</code></div></div></div><div id="S-9504-t-8" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:citation</div><div class="props"><div class="calls">Calls: <a href="#S-9504-docbook.org.ns.docbook.templates.inline">t:inline</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:citation</code></div></div></div><div id="S-9504-t-9" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:citebiblioid</div><div class="props"><div class="calls">Calls: <a href="#S-9504-docbook.org.ns.docbook.templates.inline">t:inline</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:citebiblioid</code></div></div></div><div id="S-9504-t-10" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:citerefentry</div><div class="props"><div class="calls">Calls: <a href="#S-9504-docbook.org.ns.docbook.templates.inline">t:inline</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:citerefentry</code></div></div></div><div id="S-9504-t-11" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:citetitle</div><div class="props"><div class="calls">Calls: <a href="#S-9504-docbook.org.ns.docbook.templates.inline">t:inline</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:citetitle</code></div></div></div><div id="S-9504-t-12" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:classname</div><div class="props"><div class="calls">Calls: <a href="#S-9504-docbook.org.ns.docbook.templates.inline">t:inline</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:classname</code></div></div></div><div id="S-9504-t-13" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:code</div><div class="props"><div class="calls">Calls: <a href="#S-9504-docbook.org.ns.docbook.templates.inline">t:inline</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:code</code></div></div></div><div id="S-9504-t-14" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:command</div><div class="props"><div class="calls">Calls: <a href="#S-9504-docbook.org.ns.docbook.templates.inline">t:inline</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:command</code></div></div></div><div id="S-9504-t-15" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:computeroutput</div><div class="props"><div class="calls">Calls: <a href="#S-9504-docbook.org.ns.docbook.templates.inline">t:inline</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:computeroutput</code></div></div></div><div id="S-9504-t-16" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:constant</div><div class="props"><div class="calls">Calls: <a href="#S-9504-docbook.org.ns.docbook.templates.inline">t:inline</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:constant</code></div></div></div><div id="S-9504-t-17" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:database</div><div class="props"><div class="calls">Calls: <a href="#S-9504-docbook.org.ns.docbook.templates.inline">t:inline</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:database</code></div></div></div><div id="S-9504-t-18" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:date</div><div class="props"><div class="calls">Calls: <a href="#S-28936-docbook.org.ns.docbook.functions.date-format,1">f:date-format()</a>, <a href="#S-22317-docbook.org.ns.docbook.functions.language,1">f:language()</a></div><div class="calls">Calls: <a href="#S-9504-docbook.org.ns.docbook.templates.inline">t:inline</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:date</code></div></div></div><div id="S-9504-t-19" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:editor</div><div class="props"><div class="calls">Calls: <a href="#S-9504-docbook.org.ns.docbook.templates.inline">t:inline</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:editor</code></div></div></div><div id="S-9504-t-20" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:email</div><div class="props"><div class="calls">Calls: <a href="#S-9504-docbook.org.ns.docbook.templates.inline">t:inline</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:email</code></div></div></div><div id="S-9504-t-21" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:emphasis</div><div class="props"><div class="calls">Calls: <a href="#S-9504-docbook.org.ns.docbook.templates.inline">t:inline</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:emphasis</code></div></div></div><div id="S-9504-t-22" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:enumidentifier</div><div class="props"><div class="calls">Calls: <a href="#S-9504-docbook.org.ns.docbook.templates.inline">t:inline</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:enumidentifier</code></div></div></div><div id="S-9504-t-23" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:enumname</div><div class="props"><div class="calls">Calls: <a href="#S-9504-docbook.org.ns.docbook.templates.inline">t:inline</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:enumname</code></div></div></div><div id="S-9504-t-24" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:enumvalue</div><div class="props"><div class="calls">Calls: <a href="#S-9504-docbook.org.ns.docbook.templates.inline">t:inline</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:enumvalue</code></div></div></div><div id="S-9504-t-25" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:envar</div><div class="props"><div class="calls">Calls: <a href="#S-9504-docbook.org.ns.docbook.templates.inline">t:inline</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:envar</code></div></div></div><div id="S-9504-t-26" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:errorcode</div><div class="props"><div class="calls">Calls: <a href="#S-9504-docbook.org.ns.docbook.templates.inline">t:inline</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:errorcode</code></div></div></div><div id="S-9504-t-27" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:errorname</div><div class="props"><div class="calls">Calls: <a href="#S-9504-docbook.org.ns.docbook.templates.inline">t:inline</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:errorname</code></div></div></div><div id="S-9504-t-28" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:errortext</div><div class="props"><div class="calls">Calls: <a href="#S-9504-docbook.org.ns.docbook.templates.inline">t:inline</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:errortext</code></div></div></div><div id="S-9504-t-29" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:errortype</div><div class="props"><div class="calls">Calls: <a href="#S-9504-docbook.org.ns.docbook.templates.inline">t:inline</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:errortype</code></div></div></div><div id="S-9504-t-30" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:exceptionname</div><div class="props"><div class="calls">Calls: <a href="#S-9504-docbook.org.ns.docbook.templates.inline">t:inline</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:exceptionname</code></div></div></div><div id="S-9504-t-31" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:filename</div><div class="props"><div class="calls">Calls: <a href="#S-9504-docbook.org.ns.docbook.templates.inline">t:inline</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:filename</code></div></div></div><div id="S-9504-t-32" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:firstterm</div><div class="props"><div class="calls">Calls: <a href="#S-9504-docbook.org.ns.docbook.templates.inline">t:inline</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:firstterm</code></div></div></div><div id="S-9504-t-33" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:foreignphrase</div><div class="props"><div class="calls">Calls: <a href="#S-9504-docbook.org.ns.docbook.templates.inline">t:inline</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:foreignphrase</code></div></div></div><div id="S-9504-t-34" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:function</div><div class="props"><div class="calls">Calls: <a href="#S-9504-docbook.org.ns.docbook.templates.inline">t:inline</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:function</code></div></div></div><div id="S-9504-t-35" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:guibutton</div><div class="props"><div class="calls">Calls: <a href="#S-9504-docbook.org.ns.docbook.templates.inline">t:inline</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:guibutton</code></div></div></div><div id="S-9504-t-36" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:guiicon</div><div class="props"><div class="calls">Calls: <a href="#S-9504-docbook.org.ns.docbook.templates.inline">t:inline</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:guiicon</code></div></div></div><div id="S-9504-t-37" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:guilabel</div><div class="props"><div class="calls">Calls: <a href="#S-9504-docbook.org.ns.docbook.templates.inline">t:inline</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:guilabel</code></div></div></div><div id="S-9504-t-38" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:guimenu</div><div class="props"><div class="calls">Calls: <a href="#S-9504-docbook.org.ns.docbook.templates.inline">t:inline</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:guimenu</code></div></div></div><div id="S-9504-t-39" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:guimenuitem</div><div class="props"><div class="calls">Calls: <a href="#S-9504-docbook.org.ns.docbook.templates.inline">t:inline</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:guimenuitem</code></div></div></div><div id="S-9504-t-40" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:guisubmenu</div><div class="props"><div class="calls">Calls: <a href="#S-9504-docbook.org.ns.docbook.templates.inline">t:inline</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:guisubmenu</code></div></div></div><div id="S-9504-t-41" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:hardware</div><div class="props"><div class="calls">Calls: <a href="#S-9504-docbook.org.ns.docbook.templates.inline">t:inline</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:hardware</code></div></div></div><div id="S-9504-t-42" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:initializer</div><div class="props"><div class="calls">Calls: <a href="#S-9504-docbook.org.ns.docbook.templates.inline">t:inline</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:initializer</code></div></div></div><div id="S-9504-t-43" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:inlineequation</div><div class="props"><div class="calls">Calls: <a href="#S-9504-docbook.org.ns.docbook.templates.inline">t:inline</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:inlineequation</code></div></div></div><div id="S-9504-t-44" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:interfacename</div><div class="props"><div class="calls">Calls: <a href="#S-9504-docbook.org.ns.docbook.templates.inline">t:inline</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:interfacename</code></div></div></div><div id="S-9504-t-45" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:jobtitle</div><div class="props"><div class="calls">Calls: <a href="#S-9504-docbook.org.ns.docbook.templates.inline">t:inline</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:jobtitle</code></div></div></div><div id="S-9504-t-46" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:keycap</div><div class="props"><div class="calls">Calls: <a href="#S-28936-docbook.org.ns.docbook.functions.check-gentext,3">f:check-gentext()</a>, <a href="#S-22317-docbook.org.ns.docbook.functions.gentext,3">f:gentext()</a></div><div class="calls">Calls: <a href="#S-9504-docbook.org.ns.docbook.templates.inline">t:inline</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:keycap</code></div></div></div><div id="S-9504-t-47" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:keycode</div><div class="props"><div class="calls">Calls: <a href="#S-9504-docbook.org.ns.docbook.templates.inline">t:inline</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:keycode</code></div></div></div><div id="S-9504-t-48" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:keycombo</div><div class="props"><div class="calls">Calls: <a href="#S-9504-docbook.org.ns.docbook.templates.inline">t:inline</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:keycombo</code></div></div></div><div id="S-9504-t-49" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:keysym</div><div class="props"><div class="calls">Calls: <a href="#S-9504-docbook.org.ns.docbook.templates.inline">t:inline</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:keysym</code></div></div></div><div id="S-9504-t-50" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:literal</div><div class="props"><div class="calls">Calls: <a href="#S-9504-docbook.org.ns.docbook.templates.inline">t:inline</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:literal</code></div></div></div><div id="S-9504-t-51" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:macroname</div><div class="props"><div class="calls">Calls: <a href="#S-9504-docbook.org.ns.docbook.templates.inline">t:inline</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:macroname</code></div></div></div><div id="S-9504-t-52" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:markup</div><div class="props"><div class="calls">Calls: <a href="#S-9504-docbook.org.ns.docbook.templates.inline">t:inline</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:markup</code></div></div></div><div id="S-9504-t-53" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:mathphrase</div><div class="props"><div class="calls">Calls: <a href="#S-9504-docbook.org.ns.docbook.templates.inline">t:inline</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:mathphrase</code></div></div></div><div id="S-9504-t-54" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:medialabel</div><div class="props"><div class="calls">Calls: <a href="#S-9504-docbook.org.ns.docbook.templates.inline">t:inline</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:medialabel</code></div></div></div><div id="S-9504-t-55" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:menuchoice</div><div class="props"><div class="calls">Calls: <a href="#S-9504-docbook.org.ns.docbook.templates.inline">t:inline</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:menuchoice</code></div></div></div><div id="S-9504-t-56" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:methodname</div><div class="props"><div class="calls">Calls: <a href="#S-9504-docbook.org.ns.docbook.templates.inline">t:inline</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:methodname</code></div></div></div><div id="S-9504-t-57" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:modifier</div><div class="props"><div class="calls">Calls: <a href="#S-9504-docbook.org.ns.docbook.templates.inline">t:inline</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:modifier</code></div></div></div><div id="S-9504-t-58" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:mousebutton</div><div class="props"><div class="calls">Calls: <a href="#S-9504-docbook.org.ns.docbook.templates.inline">t:inline</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:mousebutton</code></div></div></div><div id="S-9504-t-59" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:namespace</div><div class="props"><div class="calls">Calls: <a href="#S-9504-docbook.org.ns.docbook.templates.inline">t:inline</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:namespace</code></div></div></div><div id="S-9504-t-60" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:namespacename</div><div class="props"><div class="calls">Calls: <a href="#S-9504-docbook.org.ns.docbook.templates.inline">t:inline</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:namespacename</code></div></div></div><div id="S-9504-t-61" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:ooclass</div><div class="props"><div class="calls">Calls: <a href="#S-9504-docbook.org.ns.docbook.templates.inline">t:inline</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:ooclass</code></div></div></div><div id="S-9504-t-62" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:ooexception</div><div class="props"><div class="calls">Calls: <a href="#S-9504-docbook.org.ns.docbook.templates.inline">t:inline</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:ooexception</code></div></div></div><div id="S-9504-t-63" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:oointerface</div><div class="props"><div class="calls">Calls: <a href="#S-9504-docbook.org.ns.docbook.templates.inline">t:inline</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:oointerface</code></div></div></div><div id="S-9504-t-64" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:option</div><div class="props"><div class="calls">Calls: <a href="#S-9504-docbook.org.ns.docbook.templates.inline">t:inline</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:option</code></div></div></div><div id="S-9504-t-65" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:optional</div><div class="props"><div class="calls">Calls: <a href="#S-9504-docbook.org.ns.docbook.templates.inline">t:inline</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:optional</code></div></div></div><div id="S-9504-t-66" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:org</div><div class="props"><div class="calls">Calls: <a href="#S-9504-docbook.org.ns.docbook.templates.inline">t:inline</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:org</code></div></div></div><div id="S-9504-t-67" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:orgname</div><div class="props"><div class="calls">Calls: <a href="#S-9504-docbook.org.ns.docbook.templates.inline">t:inline</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:orgname</code></div></div></div><div id="S-9504-t-68" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:package</div><div class="props"><div class="calls">Calls: <a href="#S-9504-docbook.org.ns.docbook.templates.inline">t:inline</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:package</code></div></div></div><div id="S-9504-t-69" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:parameter</div><div class="props"><div class="calls">Calls: <a href="#S-9504-docbook.org.ns.docbook.templates.inline">t:inline</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:parameter</code></div></div></div><div id="S-9504-t-70" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:person</div><div class="props"><div class="calls">Calls: <a href="#S-9504-docbook.org.ns.docbook.templates.inline">t:inline</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:person</code></div></div></div><div id="S-9504-t-71" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:phrase</div><div class="props"><div class="calls">Calls: <a href="#S-9504-docbook.org.ns.docbook.templates.inline">t:inline</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:phrase</code></div></div></div><div id="S-9504-t-72" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:productname</div><div class="props"><div class="calls">Calls: <a href="#S-9504-docbook.org.ns.docbook.templates.inline">t:inline</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:productname</code></div></div></div><div id="S-9504-t-73" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:productnumber</div><div class="props"><div class="calls">Calls: <a href="#S-9504-docbook.org.ns.docbook.templates.inline">t:inline</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:productnumber</code></div></div></div><div id="S-9504-t-74" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:prompt</div><div class="props"><div class="calls">Calls: <a href="#S-9504-docbook.org.ns.docbook.templates.inline">t:inline</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:prompt</code></div></div></div><div id="S-9504-t-75" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:property</div><div class="props"><div class="calls">Calls: <a href="#S-9504-docbook.org.ns.docbook.templates.inline">t:inline</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:property</code></div></div></div><div id="S-9504-t-76" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:quote</div><div class="props"><div class="calls">Calls: <a href="#S-9504-docbook.org.ns.docbook.templates.inline">t:inline</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:quote</code></div></div></div><div id="S-9504-t-77" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:replaceable</div><div class="props"><div class="calls">Calls: <a href="#S-9504-docbook.org.ns.docbook.templates.inline">t:inline</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:replaceable</code></div></div></div><div id="S-9504-t-78" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:returnvalue</div><div class="props"><div class="calls">Calls: <a href="#S-9504-docbook.org.ns.docbook.templates.inline">t:inline</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:returnvalue</code></div></div></div><div id="S-9504-t-79" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:revnumber</div><div class="props"><div class="calls">Calls: <a href="#S-9504-docbook.org.ns.docbook.templates.inline">t:inline</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:revnumber</code></div></div></div><div id="S-9504-t-80" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:shortcut</div><div class="props"><div class="calls">Calls: <a href="#S-9504-docbook.org.ns.docbook.templates.inline">t:inline</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:shortcut</code></div></div></div><div id="S-9504-t-81" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:structfield</div><div class="props"><div class="calls">Calls: <a href="#S-9504-docbook.org.ns.docbook.templates.inline">t:inline</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:structfield</code></div></div></div><div id="S-9504-t-82" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:subscript</div><div class="props"><div class="calls">Calls: <a href="#S-9504-docbook.org.ns.docbook.templates.inline">t:inline</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:subscript</code></div></div></div><div id="S-9504-t-83" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:superscript</div><div class="props"><div class="calls">Calls: <a href="#S-9504-docbook.org.ns.docbook.templates.inline">t:inline</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:superscript</code></div></div></div><div id="S-9504-t-84" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:symbol</div><div class="props"><div class="calls">Calls: <a href="#S-9504-docbook.org.ns.docbook.templates.inline">t:inline</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:symbol</code></div></div></div><div id="S-9504-t-85" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:systemitem</div><div class="props"><div class="calls">Calls: <a href="#S-9504-docbook.org.ns.docbook.templates.inline">t:inline</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:systemitem</code></div></div></div><div id="S-9504-t-86" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:tag</div><div class="props"><div class="calls">Calls: <a href="#S-9504-docbook.org.ns.docbook.templates.inline">t:inline</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:tag</code></div></div></div><div id="S-9504-t-87" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:task</div><div class="props"><div class="calls">Calls: <a href="#S-9504-docbook.org.ns.docbook.templates.inline">t:inline</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:task</code></div></div></div><div id="S-9504-t-88" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:templateid</div><div class="props"><div class="calls">Calls: <a href="#S-9504-docbook.org.ns.docbook.templates.inline">t:inline</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:templateid</code></div></div></div><div id="S-9504-t-89" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:templatename</div><div class="props"><div class="calls">Calls: <a href="#S-9504-docbook.org.ns.docbook.templates.inline">t:inline</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:templatename</code></div></div></div><div id="S-9504-t-90" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:termdef</div><div class="props"><div class="calls">Calls: <a href="#S-9504-docbook.org.ns.docbook.templates.inline">t:inline</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:termdef</code></div></div></div><div id="S-9504-t-91" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:token</div><div class="props"><div class="calls">Calls: <a href="#S-9504-docbook.org.ns.docbook.templates.inline">t:inline</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:token</code></div></div></div><div id="S-9504-t-92" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:trademark</div><div class="props"><div class="calls">Calls: <a href="#S-9504-docbook.org.ns.docbook.templates.inline">t:inline</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:trademark</code></div></div></div><div id="S-9504-t-93" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:type</div><div class="props"><div class="calls">Calls: <a href="#S-9504-docbook.org.ns.docbook.templates.inline">t:inline</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:type</code></div></div></div><div id="S-9504-t-94" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:typedefname</div><div class="props"><div class="calls">Calls: <a href="#S-9504-docbook.org.ns.docbook.templates.inline">t:inline</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:typedefname</code></div></div></div><div id="S-9504-t-95" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:unionname</div><div class="props"><div class="calls">Calls: <a href="#S-9504-docbook.org.ns.docbook.templates.inline">t:inline</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:unionname</code></div></div></div><div id="S-9504-t-96" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:uri</div><div class="props"><div class="calls">Calls: <a href="#S-9504-docbook.org.ns.docbook.templates.inline">t:inline</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:uri</code></div></div></div><div id="S-9504-t-97" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:userinput</div><div class="props"><div class="calls">Calls: <a href="#S-9504-docbook.org.ns.docbook.templates.inline">t:inline</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:userinput</code></div></div></div><div id="S-9504-t-98" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:varname</div><div class="props"><div class="calls">Calls: <a href="#S-9504-docbook.org.ns.docbook.templates.inline">t:inline</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:varname</code></div></div></div><div id="S-9504-t-99" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:wordasword</div><div class="props"><div class="calls">Calls: <a href="#S-9504-docbook.org.ns.docbook.templates.inline">t:inline</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:wordasword</code></div></div></div><div id="S-9504-t-100" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ comment()|processing-instructi…</div><div class="props"><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>comment()</code>, <code>processing-instruction()</code></div></div></div><div id="S-9504-t-101" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ processing-instruction('DocBoo…  as text()</div><div class="props"><div class="uses">Uses: <a href="#S-7720-docbook.org.ns.docbook.variables.VERSION">$v:VERSION</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>processing-instruction('DocBook-xslTNG-version')</code></div></div></div><div id="S-9504-t-102" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ processing-instruction('system…  as text()</div><div class="props"><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>processing-instruction('system-property')</code></div></div></div><div id="S-9504-t-103" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ processing-instruction('curren…  as text()</div><div class="props"><div class="uses">Uses: <a href="#S-26643-..date-dateTime-format">$date-dateTime-format</a></div><div class="calls">Calls: <a href="#S-28936-docbook.org.ns.docbook.functions.pi-attributes,1">f:pi-attributes()</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>processing-instruction('current-dateTime')</code></div></div></div><div id="S-9504-t-104" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ processing-instruction('eval')  as item()*</div><div class="props"><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>processing-instruction('eval')</code></div></div></div></div></div><div class="source-code"><div class="title closed">Source code</div><div class="body"><div><table><tr><td valign="top" align="right"><pre class="fake-prism"><span id="line-S-9504-1">1</span>
<span id="line-S-9504-2"><span class="lno">2</span></span>
<span id="line-S-9504-3"><span class="lno">3</span></span>
<span id="line-S-9504-4"><span class="lno">4</span></span>
<span id="line-S-9504-5">5</span>
<span id="line-S-9504-6"><span class="lno">6</span></span>
<span id="line-S-9504-7"><span class="lno">7</span></span>
<span id="line-S-9504-8"><span class="lno">8</span></span>
<span id="line-S-9504-9"><span class="lno">9</span></span>
<span id="line-S-9504-10">10</span>
<span id="line-S-9504-11"><span class="lno">11</span></span>
<span id="line-S-9504-12"><span class="lno">12</span></span>
<span id="line-S-9504-13"><span class="lno">13</span></span>
<span id="line-S-9504-14"><span class="lno">14</span></span>
<span id="line-S-9504-15">15</span>
<span id="line-S-9504-16"><span class="lno">16</span></span>
<span id="line-S-9504-17"><span class="lno">17</span></span>
<span id="line-S-9504-18"><span class="lno">18</span></span>
<span id="line-S-9504-19"><span class="lno">19</span></span>
<span id="line-S-9504-20">20</span>
<span id="line-S-9504-21"><span class="lno">21</span></span>
<span id="line-S-9504-22"><span class="lno">22</span></span>
<span id="line-S-9504-23"><span class="lno">23</span></span>
<span id="line-S-9504-24"><span class="lno">24</span></span>
<span id="line-S-9504-25">25</span>
<span id="line-S-9504-26"><span class="lno">26</span></span>
<span id="line-S-9504-27"><span class="lno">27</span></span>
<span id="line-S-9504-28"><span class="lno">28</span></span>
<span id="line-S-9504-29"><span class="lno">29</span></span>
<span id="line-S-9504-30">30</span>
<span id="line-S-9504-31"><span class="lno">31</span></span>
<span id="line-S-9504-32"><span class="lno">32</span></span>
<span id="line-S-9504-33"><span class="lno">33</span></span>
<span id="line-S-9504-34"><span class="lno">34</span></span>
<span id="line-S-9504-35">35</span>
<span id="line-S-9504-36"><span class="lno">36</span></span>
<span id="line-S-9504-37"><span class="lno">37</span></span>
<span id="line-S-9504-38"><span class="lno">38</span></span>
<span id="line-S-9504-39"><span class="lno">39</span></span>
<span id="line-S-9504-40">40</span>
<span id="line-S-9504-41"><span class="lno">41</span></span>
<span id="line-S-9504-42"><span class="lno">42</span></span>
<span id="line-S-9504-43"><span class="lno">43</span></span>
<span id="line-S-9504-44"><span class="lno">44</span></span>
<span id="line-S-9504-45">45</span>
<span id="line-S-9504-46"><span class="lno">46</span></span>
<span id="line-S-9504-47"><span class="lno">47</span></span>
<span id="line-S-9504-48"><span class="lno">48</span></span>
<span id="line-S-9504-49"><span class="lno">49</span></span>
<span id="line-S-9504-50">50</span>
<span id="line-S-9504-51"><span class="lno">51</span></span>
<span id="line-S-9504-52"><span class="lno">52</span></span>
<span id="line-S-9504-53"><span class="lno">53</span></span>
<span id="line-S-9504-54"><span class="lno">54</span></span>
<span id="line-S-9504-55">55</span>
<span id="line-S-9504-56"><span class="lno">56</span></span>
<span id="line-S-9504-57"><span class="lno">57</span></span>
<span id="line-S-9504-58"><span class="lno">58</span></span>
<span id="line-S-9504-59"><span class="lno">59</span></span>
<span id="line-S-9504-60">60</span>
<span id="line-S-9504-61"><span class="lno">61</span></span>
<span id="line-S-9504-62"><span class="lno">62</span></span>
<span id="line-S-9504-63"><span class="lno">63</span></span>
<span id="line-S-9504-64"><span class="lno">64</span></span>
<span id="line-S-9504-65">65</span>
<span id="line-S-9504-66"><span class="lno">66</span></span>
<span id="line-S-9504-67"><span class="lno">67</span></span>
<span id="line-S-9504-68"><span class="lno">68</span></span>
<span id="line-S-9504-69"><span class="lno">69</span></span>
<span id="line-S-9504-70">70</span>
<span id="line-S-9504-71"><span class="lno">71</span></span>
<span id="line-S-9504-72"><span class="lno">72</span></span>
<span id="line-S-9504-73"><span class="lno">73</span></span>
<span id="line-S-9504-74"><span class="lno">74</span></span>
<span id="line-S-9504-75">75</span>
<span id="line-S-9504-76"><span class="lno">76</span></span>
<span id="line-S-9504-77"><span class="lno">77</span></span>
<span id="line-S-9504-78"><span class="lno">78</span></span>
<span id="line-S-9504-79"><span class="lno">79</span></span>
<span id="line-S-9504-80">80</span>
<span id="line-S-9504-81"><span class="lno">81</span></span>
<span id="line-S-9504-82"><span class="lno">82</span></span>
<span id="line-S-9504-83"><span class="lno">83</span></span>
<span id="line-S-9504-84"><span class="lno">84</span></span>
<span id="line-S-9504-85">85</span>
<span id="line-S-9504-86"><span class="lno">86</span></span>
<span id="line-S-9504-87"><span class="lno">87</span></span>
<span id="line-S-9504-88"><span class="lno">88</span></span>
<span id="line-S-9504-89"><span class="lno">89</span></span>
<span id="line-S-9504-90">90</span>
<span id="line-S-9504-91"><span class="lno">91</span></span>
<span id="line-S-9504-92"><span class="lno">92</span></span>
<span id="line-S-9504-93"><span class="lno">93</span></span>
<span id="line-S-9504-94"><span class="lno">94</span></span>
<span id="line-S-9504-95">95</span>
<span id="line-S-9504-96"><span class="lno">96</span></span>
<span id="line-S-9504-97"><span class="lno">97</span></span>
<span id="line-S-9504-98"><span class="lno">98</span></span>
<span id="line-S-9504-99"><span class="lno">99</span></span>
<span id="line-S-9504-100">100</span>
<span id="line-S-9504-101"><span class="lno">101</span></span>
<span id="line-S-9504-102"><span class="lno">102</span></span>
<span id="line-S-9504-103"><span class="lno">103</span></span>
<span id="line-S-9504-104"><span class="lno">104</span></span>
<span id="line-S-9504-105">105</span>
<span id="line-S-9504-106"><span class="lno">106</span></span>
<span id="line-S-9504-107"><span class="lno">107</span></span>
<span id="line-S-9504-108"><span class="lno">108</span></span>
<span id="line-S-9504-109"><span class="lno">109</span></span>
<span id="line-S-9504-110">110</span>
<span id="line-S-9504-111"><span class="lno">111</span></span>
<span id="line-S-9504-112"><span class="lno">112</span></span>
<span id="line-S-9504-113"><span class="lno">113</span></span>
<span id="line-S-9504-114"><span class="lno">114</span></span>
<span id="line-S-9504-115">115</span>
<span id="line-S-9504-116"><span class="lno">116</span></span>
<span id="line-S-9504-117"><span class="lno">117</span></span>
<span id="line-S-9504-118"><span class="lno">118</span></span>
<span id="line-S-9504-119"><span class="lno">119</span></span>
<span id="line-S-9504-120">120</span>
<span id="line-S-9504-121"><span class="lno">121</span></span>
<span id="line-S-9504-122"><span class="lno">122</span></span>
<span id="line-S-9504-123"><span class="lno">123</span></span>
<span id="line-S-9504-124"><span class="lno">124</span></span>
<span id="line-S-9504-125">125</span>
<span id="line-S-9504-126"><span class="lno">126</span></span>
<span id="line-S-9504-127"><span class="lno">127</span></span>
<span id="line-S-9504-128"><span class="lno">128</span></span>
<span id="line-S-9504-129"><span class="lno">129</span></span>
<span id="line-S-9504-130">130</span>
<span id="line-S-9504-131"><span class="lno">131</span></span>
<span id="line-S-9504-132"><span class="lno">132</span></span>
<span id="line-S-9504-133"><span class="lno">133</span></span>
<span id="line-S-9504-134"><span class="lno">134</span></span>
<span id="line-S-9504-135">135</span>
<span id="line-S-9504-136"><span class="lno">136</span></span>
<span id="line-S-9504-137"><span class="lno">137</span></span>
<span id="line-S-9504-138"><span class="lno">138</span></span>
<span id="line-S-9504-139"><span class="lno">139</span></span>
<span id="line-S-9504-140">140</span>
<span id="line-S-9504-141"><span class="lno">141</span></span>
<span id="line-S-9504-142"><span class="lno">142</span></span>
<span id="line-S-9504-143"><span class="lno">143</span></span>
<span id="line-S-9504-144"><span class="lno">144</span></span>
<span id="line-S-9504-145">145</span>
<span id="line-S-9504-146"><span class="lno">146</span></span>
<span id="line-S-9504-147"><span class="lno">147</span></span>
<span id="line-S-9504-148"><span class="lno">148</span></span>
<span id="line-S-9504-149"><span class="lno">149</span></span>
<span id="line-S-9504-150">150</span>
<span id="line-S-9504-151"><span class="lno">151</span></span>
<span id="line-S-9504-152"><span class="lno">152</span></span>
<span id="line-S-9504-153"><span class="lno">153</span></span>
<span id="line-S-9504-154"><span class="lno">154</span></span>
<span id="line-S-9504-155">155</span>
<span id="line-S-9504-156"><span class="lno">156</span></span>
<span id="line-S-9504-157"><span class="lno">157</span></span>
<span id="line-S-9504-158"><span class="lno">158</span></span>
<span id="line-S-9504-159"><span class="lno">159</span></span>
<span id="line-S-9504-160">160</span>
<span id="line-S-9504-161"><span class="lno">161</span></span>
<span id="line-S-9504-162"><span class="lno">162</span></span>
<span id="line-S-9504-163"><span class="lno">163</span></span>
<span id="line-S-9504-164"><span class="lno">164</span></span>
<span id="line-S-9504-165">165</span>
<span id="line-S-9504-166"><span class="lno">166</span></span>
<span id="line-S-9504-167"><span class="lno">167</span></span>
<span id="line-S-9504-168"><span class="lno">168</span></span>
<span id="line-S-9504-169"><span class="lno">169</span></span>
<span id="line-S-9504-170">170</span>
<span id="line-S-9504-171"><span class="lno">171</span></span>
<span id="line-S-9504-172"><span class="lno">172</span></span>
<span id="line-S-9504-173"><span class="lno">173</span></span>
<span id="line-S-9504-174"><span class="lno">174</span></span>
<span id="line-S-9504-175">175</span>
<span id="line-S-9504-176"><span class="lno">176</span></span>
<span id="line-S-9504-177"><span class="lno">177</span></span>
<span id="line-S-9504-178"><span class="lno">178</span></span>
<span id="line-S-9504-179"><span class="lno">179</span></span>
<span id="line-S-9504-180">180</span>
<span id="line-S-9504-181"><span class="lno">181</span></span>
<span id="line-S-9504-182"><span class="lno">182</span></span>
<span id="line-S-9504-183"><span class="lno">183</span></span>
<span id="line-S-9504-184"><span class="lno">184</span></span>
<span id="line-S-9504-185">185</span>
<span id="line-S-9504-186"><span class="lno">186</span></span>
<span id="line-S-9504-187"><span class="lno">187</span></span>
<span id="line-S-9504-188"><span class="lno">188</span></span>
<span id="line-S-9504-189"><span class="lno">189</span></span>
<span id="line-S-9504-190">190</span>
<span id="line-S-9504-191"><span class="lno">191</span></span>
<span id="line-S-9504-192"><span class="lno">192</span></span>
<span id="line-S-9504-193"><span class="lno">193</span></span>
<span id="line-S-9504-194"><span class="lno">194</span></span>
<span id="line-S-9504-195">195</span>
<span id="line-S-9504-196"><span class="lno">196</span></span>
<span id="line-S-9504-197"><span class="lno">197</span></span>
<span id="line-S-9504-198"><span class="lno">198</span></span>
<span id="line-S-9504-199"><span class="lno">199</span></span>
<span id="line-S-9504-200">200</span>
<span id="line-S-9504-201"><span class="lno">201</span></span>
<span id="line-S-9504-202"><span class="lno">202</span></span>
<span id="line-S-9504-203"><span class="lno">203</span></span>
<span id="line-S-9504-204"><span class="lno">204</span></span>
<span id="line-S-9504-205">205</span>
<span id="line-S-9504-206"><span class="lno">206</span></span>
<span id="line-S-9504-207"><span class="lno">207</span></span>
<span id="line-S-9504-208"><span class="lno">208</span></span>
<span id="line-S-9504-209"><span class="lno">209</span></span>
<span id="line-S-9504-210">210</span>
<span id="line-S-9504-211"><span class="lno">211</span></span>
<span id="line-S-9504-212"><span class="lno">212</span></span>
<span id="line-S-9504-213"><span class="lno">213</span></span>
<span id="line-S-9504-214"><span class="lno">214</span></span>
<span id="line-S-9504-215">215</span>
<span id="line-S-9504-216"><span class="lno">216</span></span>
<span id="line-S-9504-217"><span class="lno">217</span></span>
<span id="line-S-9504-218"><span class="lno">218</span></span>
<span id="line-S-9504-219"><span class="lno">219</span></span>
<span id="line-S-9504-220">220</span>
<span id="line-S-9504-221"><span class="lno">221</span></span>
<span id="line-S-9504-222"><span class="lno">222</span></span>
<span id="line-S-9504-223"><span class="lno">223</span></span>
<span id="line-S-9504-224"><span class="lno">224</span></span>
<span id="line-S-9504-225">225</span>
<span id="line-S-9504-226"><span class="lno">226</span></span>
<span id="line-S-9504-227"><span class="lno">227</span></span>
<span id="line-S-9504-228"><span class="lno">228</span></span>
<span id="line-S-9504-229"><span class="lno">229</span></span>
<span id="line-S-9504-230">230</span>
<span id="line-S-9504-231"><span class="lno">231</span></span>
<span id="line-S-9504-232"><span class="lno">232</span></span>
<span id="line-S-9504-233"><span class="lno">233</span></span>
<span id="line-S-9504-234"><span class="lno">234</span></span>
<span id="line-S-9504-235">235</span>
<span id="line-S-9504-236"><span class="lno">236</span></span>
<span id="line-S-9504-237"><span class="lno">237</span></span>
<span id="line-S-9504-238"><span class="lno">238</span></span>
<span id="line-S-9504-239"><span class="lno">239</span></span>
<span id="line-S-9504-240">240</span>
<span id="line-S-9504-241"><span class="lno">241</span></span>
<span id="line-S-9504-242"><span class="lno">242</span></span>
<span id="line-S-9504-243"><span class="lno">243</span></span>
<span id="line-S-9504-244"><span class="lno">244</span></span>
<span id="line-S-9504-245">245</span>
<span id="line-S-9504-246"><span class="lno">246</span></span>
<span id="line-S-9504-247"><span class="lno">247</span></span>
<span id="line-S-9504-248"><span class="lno">248</span></span>
<span id="line-S-9504-249"><span class="lno">249</span></span>
<span id="line-S-9504-250">250</span>
<span id="line-S-9504-251"><span class="lno">251</span></span>
<span id="line-S-9504-252"><span class="lno">252</span></span>
<span id="line-S-9504-253"><span class="lno">253</span></span>
<span id="line-S-9504-254"><span class="lno">254</span></span>
<span id="line-S-9504-255">255</span>
<span id="line-S-9504-256"><span class="lno">256</span></span>
<span id="line-S-9504-257"><span class="lno">257</span></span>
<span id="line-S-9504-258"><span class="lno">258</span></span>
<span id="line-S-9504-259"><span class="lno">259</span></span>
<span id="line-S-9504-260">260</span>
<span id="line-S-9504-261"><span class="lno">261</span></span>
<span id="line-S-9504-262"><span class="lno">262</span></span>
<span id="line-S-9504-263"><span class="lno">263</span></span>
<span id="line-S-9504-264"><span class="lno">264</span></span>
<span id="line-S-9504-265">265</span>
<span id="line-S-9504-266"><span class="lno">266</span></span>
<span id="line-S-9504-267"><span class="lno">267</span></span>
<span id="line-S-9504-268"><span class="lno">268</span></span>
<span id="line-S-9504-269"><span class="lno">269</span></span>
<span id="line-S-9504-270">270</span>
<span id="line-S-9504-271"><span class="lno">271</span></span>
<span id="line-S-9504-272"><span class="lno">272</span></span>
<span id="line-S-9504-273"><span class="lno">273</span></span>
<span id="line-S-9504-274"><span class="lno">274</span></span>
<span id="line-S-9504-275">275</span>
<span id="line-S-9504-276"><span class="lno">276</span></span>
<span id="line-S-9504-277"><span class="lno">277</span></span>
<span id="line-S-9504-278"><span class="lno">278</span></span>
<span id="line-S-9504-279"><span class="lno">279</span></span>
<span id="line-S-9504-280">280</span>
<span id="line-S-9504-281"><span class="lno">281</span></span>
<span id="line-S-9504-282"><span class="lno">282</span></span>
<span id="line-S-9504-283"><span class="lno">283</span></span>
<span id="line-S-9504-284"><span class="lno">284</span></span>
<span id="line-S-9504-285">285</span>
<span id="line-S-9504-286"><span class="lno">286</span></span>
<span id="line-S-9504-287"><span class="lno">287</span></span>
<span id="line-S-9504-288"><span class="lno">288</span></span>
<span id="line-S-9504-289"><span class="lno">289</span></span>
<span id="line-S-9504-290">290</span>
<span id="line-S-9504-291"><span class="lno">291</span></span>
<span id="line-S-9504-292"><span class="lno">292</span></span>
<span id="line-S-9504-293"><span class="lno">293</span></span>
<span id="line-S-9504-294"><span class="lno">294</span></span>
<span id="line-S-9504-295">295</span>
<span id="line-S-9504-296"><span class="lno">296</span></span>
<span id="line-S-9504-297"><span class="lno">297</span></span>
<span id="line-S-9504-298"><span class="lno">298</span></span>
<span id="line-S-9504-299"><span class="lno">299</span></span>
<span id="line-S-9504-300">300</span>
<span id="line-S-9504-301"><span class="lno">301</span></span>
<span id="line-S-9504-302"><span class="lno">302</span></span>
<span id="line-S-9504-303"><span class="lno">303</span></span>
<span id="line-S-9504-304"><span class="lno">304</span></span>
<span id="line-S-9504-305">305</span>
<span id="line-S-9504-306"><span class="lno">306</span></span>
<span id="line-S-9504-307"><span class="lno">307</span></span>
<span id="line-S-9504-308"><span class="lno">308</span></span>
<span id="line-S-9504-309"><span class="lno">309</span></span>
<span id="line-S-9504-310">310</span>
<span id="line-S-9504-311"><span class="lno">311</span></span>
<span id="line-S-9504-312"><span class="lno">312</span></span>
<span id="line-S-9504-313"><span class="lno">313</span></span>
<span id="line-S-9504-314"><span class="lno">314</span></span>
<span id="line-S-9504-315">315</span>
<span id="line-S-9504-316"><span class="lno">316</span></span>
<span id="line-S-9504-317"><span class="lno">317</span></span>
<span id="line-S-9504-318"><span class="lno">318</span></span>
<span id="line-S-9504-319"><span class="lno">319</span></span>
<span id="line-S-9504-320">320</span>
<span id="line-S-9504-321"><span class="lno">321</span></span>
<span id="line-S-9504-322"><span class="lno">322</span></span>
<span id="line-S-9504-323"><span class="lno">323</span></span>
<span id="line-S-9504-324"><span class="lno">324</span></span>
<span id="line-S-9504-325">325</span>
<span id="line-S-9504-326"><span class="lno">326</span></span>
<span id="line-S-9504-327"><span class="lno">327</span></span>
<span id="line-S-9504-328"><span class="lno">328</span></span>
<span id="line-S-9504-329"><span class="lno">329</span></span>
<span id="line-S-9504-330">330</span>
<span id="line-S-9504-331"><span class="lno">331</span></span>
<span id="line-S-9504-332"><span class="lno">332</span></span>
<span id="line-S-9504-333"><span class="lno">333</span></span>
<span id="line-S-9504-334"><span class="lno">334</span></span>
<span id="line-S-9504-335">335</span>
<span id="line-S-9504-336"><span class="lno">336</span></span>
<span id="line-S-9504-337"><span class="lno">337</span></span>
<span id="line-S-9504-338"><span class="lno">338</span></span>
<span id="line-S-9504-339"><span class="lno">339</span></span>
<span id="line-S-9504-340">340</span>
<span id="line-S-9504-341"><span class="lno">341</span></span>
<span id="line-S-9504-342"><span class="lno">342</span></span>
<span id="line-S-9504-343"><span class="lno">343</span></span>
<span id="line-S-9504-344"><span class="lno">344</span></span>
<span id="line-S-9504-345">345</span>
<span id="line-S-9504-346"><span class="lno">346</span></span>
<span id="line-S-9504-347"><span class="lno">347</span></span>
<span id="line-S-9504-348"><span class="lno">348</span></span>
<span id="line-S-9504-349"><span class="lno">349</span></span>
<span id="line-S-9504-350">350</span>
<span id="line-S-9504-351"><span class="lno">351</span></span>
<span id="line-S-9504-352"><span class="lno">352</span></span>
<span id="line-S-9504-353"><span class="lno">353</span></span>
<span id="line-S-9504-354"><span class="lno">354</span></span>
<span id="line-S-9504-355">355</span>
<span id="line-S-9504-356"><span class="lno">356</span></span>
<span id="line-S-9504-357"><span class="lno">357</span></span>
<span id="line-S-9504-358"><span class="lno">358</span></span>
<span id="line-S-9504-359"><span class="lno">359</span></span>
<span id="line-S-9504-360">360</span>
<span id="line-S-9504-361"><span class="lno">361</span></span>
<span id="line-S-9504-362"><span class="lno">362</span></span>
<span id="line-S-9504-363"><span class="lno">363</span></span>
<span id="line-S-9504-364"><span class="lno">364</span></span>
<span id="line-S-9504-365">365</span>
<span id="line-S-9504-366"><span class="lno">366</span></span>
<span id="line-S-9504-367"><span class="lno">367</span></span>
<span id="line-S-9504-368"><span class="lno">368</span></span>
<span id="line-S-9504-369"><span class="lno">369</span></span>
<span id="line-S-9504-370">370</span>
<span id="line-S-9504-371"><span class="lno">371</span></span>
<span id="line-S-9504-372"><span class="lno">372</span></span>
<span id="line-S-9504-373"><span class="lno">373</span></span>
<span id="line-S-9504-374"><span class="lno">374</span></span>
<span id="line-S-9504-375">375</span>
<span id="line-S-9504-376"><span class="lno">376</span></span>
<span id="line-S-9504-377"><span class="lno">377</span></span>
<span id="line-S-9504-378"><span class="lno">378</span></span>
<span id="line-S-9504-379"><span class="lno">379</span></span>
<span id="line-S-9504-380">380</span>
<span id="line-S-9504-381"><span class="lno">381</span></span>
<span id="line-S-9504-382"><span class="lno">382</span></span>
<span id="line-S-9504-383"><span class="lno">383</span></span>
<span id="line-S-9504-384"><span class="lno">384</span></span>
<span id="line-S-9504-385">385</span>
<span id="line-S-9504-386"><span class="lno">386</span></span>
<span id="line-S-9504-387"><span class="lno">387</span></span>
<span id="line-S-9504-388"><span class="lno">388</span></span>
<span id="line-S-9504-389"><span class="lno">389</span></span>
<span id="line-S-9504-390">390</span>
<span id="line-S-9504-391"><span class="lno">391</span></span>
<span id="line-S-9504-392"><span class="lno">392</span></span>
<span id="line-S-9504-393"><span class="lno">393</span></span>
<span id="line-S-9504-394"><span class="lno">394</span></span>
<span id="line-S-9504-395">395</span>
<span id="line-S-9504-396"><span class="lno">396</span></span>
<span id="line-S-9504-397"><span class="lno">397</span></span>
<span id="line-S-9504-398"><span class="lno">398</span></span>
<span id="line-S-9504-399"><span class="lno">399</span></span>
<span id="line-S-9504-400">400</span>
<span id="line-S-9504-401"><span class="lno">401</span></span>
<span id="line-S-9504-402"><span class="lno">402</span></span>
<span id="line-S-9504-403"><span class="lno">403</span></span>
<span id="line-S-9504-404"><span class="lno">404</span></span>
<span id="line-S-9504-405">405</span>
<span id="line-S-9504-406"><span class="lno">406</span></span>
<span id="line-S-9504-407"><span class="lno">407</span></span>
<span id="line-S-9504-408"><span class="lno">408</span></span>
<span id="line-S-9504-409"><span class="lno">409</span></span>
<span id="line-S-9504-410">410</span>
<span id="line-S-9504-411"><span class="lno">411</span></span>
<span id="line-S-9504-412"><span class="lno">412</span></span>
<span id="line-S-9504-413"><span class="lno">413</span></span>
<span id="line-S-9504-414"><span class="lno">414</span></span>
<span id="line-S-9504-415">415</span>
<span id="line-S-9504-416"><span class="lno">416</span></span>
<span id="line-S-9504-417"><span class="lno">417</span></span>
<span id="line-S-9504-418"><span class="lno">418</span></span>
<span id="line-S-9504-419"><span class="lno">419</span></span>
<span id="line-S-9504-420">420</span>
<span id="line-S-9504-421"><span class="lno">421</span></span>
<span id="line-S-9504-422"><span class="lno">422</span></span>
<span id="line-S-9504-423"><span class="lno">423</span></span>
<span id="line-S-9504-424"><span class="lno">424</span></span>
<span id="line-S-9504-425">425</span>
<span id="line-S-9504-426"><span class="lno">426</span></span>
<span id="line-S-9504-427"><span class="lno">427</span></span>
<span id="line-S-9504-428"><span class="lno">428</span></span>
<span id="line-S-9504-429"><span class="lno">429</span></span>
<span id="line-S-9504-430">430</span>
<span id="line-S-9504-431"><span class="lno">431</span></span>
<span id="line-S-9504-432"><span class="lno">432</span></span>
<span id="line-S-9504-433"><span class="lno">433</span></span>
<span id="line-S-9504-434"><span class="lno">434</span></span>
<span id="line-S-9504-435">435</span>
<span id="line-S-9504-436"><span class="lno">436</span></span>
<span id="line-S-9504-437"><span class="lno">437</span></span>
<span id="line-S-9504-438"><span class="lno">438</span></span>
<span id="line-S-9504-439"><span class="lno">439</span></span>
<span id="line-S-9504-440">440</span>
<span id="line-S-9504-441"><span class="lno">441</span></span>
<span id="line-S-9504-442"><span class="lno">442</span></span>
<span id="line-S-9504-443"><span class="lno">443</span></span>
<span id="line-S-9504-444"><span class="lno">444</span></span>
<span id="line-S-9504-445">445</span>
<span id="line-S-9504-446"><span class="lno">446</span></span>
<span id="line-S-9504-447"><span class="lno">447</span></span>
<span id="line-S-9504-448"><span class="lno">448</span></span>
<span id="line-S-9504-449"><span class="lno">449</span></span>
<span id="line-S-9504-450">450</span>
<span id="line-S-9504-451"><span class="lno">451</span></span>
<span id="line-S-9504-452"><span class="lno">452</span></span>
<span id="line-S-9504-453"><span class="lno">453</span></span>
<span id="line-S-9504-454"><span class="lno">454</span></span>
<span id="line-S-9504-455">455</span>
<span id="line-S-9504-456"><span class="lno">456</span></span>
<span id="line-S-9504-457"><span class="lno">457</span></span>
<span id="line-S-9504-458"><span class="lno">458</span></span>
<span id="line-S-9504-459"><span class="lno">459</span></span>
<span id="line-S-9504-460">460</span>
<span id="line-S-9504-461"><span class="lno">461</span></span>
<span id="line-S-9504-462"><span class="lno">462</span></span>
<span id="line-S-9504-463"><span class="lno">463</span></span>
<span id="line-S-9504-464"><span class="lno">464</span></span>
<span id="line-S-9504-465">465</span>
<span id="line-S-9504-466"><span class="lno">466</span></span>
<span id="line-S-9504-467"><span class="lno">467</span></span>
<span id="line-S-9504-468"><span class="lno">468</span></span>
<span id="line-S-9504-469"><span class="lno">469</span></span>
<span id="line-S-9504-470">470</span>
<span id="line-S-9504-471"><span class="lno">471</span></span>
<span id="line-S-9504-472"><span class="lno">472</span></span>
<span id="line-S-9504-473"><span class="lno">473</span></span>
<span id="line-S-9504-474"><span class="lno">474</span></span>
<span id="line-S-9504-475">475</span>
<span id="line-S-9504-476"><span class="lno">476</span></span>
<span id="line-S-9504-477"><span class="lno">477</span></span>
<span id="line-S-9504-478"><span class="lno">478</span></span>
<span id="line-S-9504-479"><span class="lno">479</span></span>
<span id="line-S-9504-480">480</span>
<span id="line-S-9504-481"><span class="lno">481</span></span>
<span id="line-S-9504-482"><span class="lno">482</span></span>
<span id="line-S-9504-483"><span class="lno">483</span></span>
<span id="line-S-9504-484"><span class="lno">484</span></span>
<span id="line-S-9504-485">485</span>
<span id="line-S-9504-486"><span class="lno">486</span></span>
<span id="line-S-9504-487"><span class="lno">487</span></span>
<span id="line-S-9504-488"><span class="lno">488</span></span>
<span id="line-S-9504-489"><span class="lno">489</span></span>
<span id="line-S-9504-490">490</span>
<span id="line-S-9504-491"><span class="lno">491</span></span>
<span id="line-S-9504-492"><span class="lno">492</span></span>
<span id="line-S-9504-493"><span class="lno">493</span></span>
<span id="line-S-9504-494"><span class="lno">494</span></span>
<span id="line-S-9504-495">495</span>
<span id="line-S-9504-496"><span class="lno">496</span></span>
<span id="line-S-9504-497"><span class="lno">497</span></span>
<span id="line-S-9504-498"><span class="lno">498</span></span>
<span id="line-S-9504-499"><span class="lno">499</span></span>
<span id="line-S-9504-500">500</span>
<span id="line-S-9504-501"><span class="lno">501</span></span>
<span id="line-S-9504-502"><span class="lno">502</span></span>
<span id="line-S-9504-503"><span class="lno">503</span></span>
<span id="line-S-9504-504"><span class="lno">504</span></span>
<span id="line-S-9504-505">505</span>
<span id="line-S-9504-506"><span class="lno">506</span></span>
<span id="line-S-9504-507"><span class="lno">507</span></span>
<span id="line-S-9504-508"><span class="lno">508</span></span>
<span id="line-S-9504-509"><span class="lno">509</span></span>
<span id="line-S-9504-510">510</span>
<span id="line-S-9504-511"><span class="lno">511</span></span>
<span id="line-S-9504-512"><span class="lno">512</span></span>
<span id="line-S-9504-513"><span class="lno">513</span></span>
<span id="line-S-9504-514"><span class="lno">514</span></span>
<span id="line-S-9504-515">515</span>
<span id="line-S-9504-516"><span class="lno">516</span></span>
<span id="line-S-9504-517"><span class="lno">517</span></span>
<span id="line-S-9504-518"><span class="lno">518</span></span>
<span id="line-S-9504-519"><span class="lno">519</span></span>
<span id="line-S-9504-520">520</span>
<span id="line-S-9504-521"><span class="lno">521</span></span>
<span id="line-S-9504-522"><span class="lno">522</span></span>
<span id="line-S-9504-523"><span class="lno">523</span></span>
<span id="line-S-9504-524"><span class="lno">524</span></span>
<span id="line-S-9504-525">525</span>
<span id="line-S-9504-526"><span class="lno">526</span></span>
<span id="line-S-9504-527"><span class="lno">527</span></span>
<span id="line-S-9504-528"><span class="lno">528</span></span>
<span id="line-S-9504-529"><span class="lno">529</span></span>
<span id="line-S-9504-530">530</span>
<span id="line-S-9504-531"><span class="lno">531</span></span>
<span id="line-S-9504-532"><span class="lno">532</span></span>
<span id="line-S-9504-533"><span class="lno">533</span></span>
<span id="line-S-9504-534"><span class="lno">534</span></span>
<span id="line-S-9504-535">535</span>
<span id="line-S-9504-536"><span class="lno">536</span></span>
<span id="line-S-9504-537"><span class="lno">537</span></span>
<span id="line-S-9504-538"><span class="lno">538</span></span>
<span id="line-S-9504-539"><span class="lno">539</span></span>
<span id="line-S-9504-540">540</span>
<span id="line-S-9504-541"><span class="lno">541</span></span>
<span id="line-S-9504-542"><span class="lno">542</span></span>
<span id="line-S-9504-543"><span class="lno">543</span></span>
<span id="line-S-9504-544"><span class="lno">544</span></span>
<span id="line-S-9504-545">545</span>
<span id="line-S-9504-546"><span class="lno">546</span></span>
<span id="line-S-9504-547"><span class="lno">547</span></span>
<span id="line-S-9504-548"><span class="lno">548</span></span>
<span id="line-S-9504-549"><span class="lno">549</span></span>
<span id="line-S-9504-550">550</span>
<span id="line-S-9504-551"><span class="lno">551</span></span>
<span id="line-S-9504-552"><span class="lno">552</span></span>
<span id="line-S-9504-553"><span class="lno">553</span></span>
<span id="line-S-9504-554"><span class="lno">554</span></span>
<span id="line-S-9504-555">555</span>
<span id="line-S-9504-556"><span class="lno">556</span></span>
<span id="line-S-9504-557"><span class="lno">557</span></span>
<span id="line-S-9504-558"><span class="lno">558</span></span>
<span id="line-S-9504-559"><span class="lno">559</span></span>
<span id="line-S-9504-560">560</span>
<span id="line-S-9504-561"><span class="lno">561</span></span>
<span id="line-S-9504-562"><span class="lno">562</span></span>
<span id="line-S-9504-563"><span class="lno">563</span></span>
<span id="line-S-9504-564"><span class="lno">564</span></span>
<span id="line-S-9504-565">565</span>
<span id="line-S-9504-566"><span class="lno">566</span></span>
<span id="line-S-9504-567"><span class="lno">567</span></span>
<span id="line-S-9504-568"><span class="lno">568</span></span>
<span id="line-S-9504-569"><span class="lno">569</span></span>
<span id="line-S-9504-570">570</span>
<span id="line-S-9504-571"><span class="lno">571</span></span>
<span id="line-S-9504-572"><span class="lno">572</span></span>
<span id="line-S-9504-573"><span class="lno">573</span></span>
<span id="line-S-9504-574"><span class="lno">574</span></span>
<span id="line-S-9504-575">575</span>
<span id="line-S-9504-576"><span class="lno">576</span></span>
<span id="line-S-9504-577"><span class="lno">577</span></span>
<span id="line-S-9504-578"><span class="lno">578</span></span>
<span id="line-S-9504-579"><span class="lno">579</span></span>
<span id="line-S-9504-580">580</span>
<span id="line-S-9504-581"><span class="lno">581</span></span>
<span id="line-S-9504-582"><span class="lno">582</span></span>
<span id="line-S-9504-583"><span class="lno">583</span></span>
<span id="line-S-9504-584"><span class="lno">584</span></span>
<span id="line-S-9504-585">585</span>
<span id="line-S-9504-586"><span class="lno">586</span></span>
<span id="line-S-9504-587"><span class="lno">587</span></span>
<span id="line-S-9504-588"><span class="lno">588</span></span>
<span id="line-S-9504-589"><span class="lno">589</span></span>
<span id="line-S-9504-590">590</span>
<span id="line-S-9504-591"><span class="lno">591</span></span>
<span id="line-S-9504-592"><span class="lno">592</span></span>
<span id="line-S-9504-593"><span class="lno">593</span></span>
<span id="line-S-9504-594"><span class="lno">594</span></span>
<span id="line-S-9504-595">595</span>
<span id="line-S-9504-596"><span class="lno">596</span></span>
<span id="line-S-9504-597"><span class="lno">597</span></span>
<span id="line-S-9504-598"><span class="lno">598</span></span>
<span id="line-S-9504-599"><span class="lno">599</span></span>
<span id="line-S-9504-600">600</span>
<span id="line-S-9504-601"><span class="lno">601</span></span>
<span id="line-S-9504-602"><span class="lno">602</span></span>
<span id="line-S-9504-603"><span class="lno">603</span></span>
<span id="line-S-9504-604"><span class="lno">604</span></span>
<span id="line-S-9504-605">605</span>
<span id="line-S-9504-606"><span class="lno">606</span></span>
<span id="line-S-9504-607"><span class="lno">607</span></span>
<span id="line-S-9504-608"><span class="lno">608</span></span>
<span id="line-S-9504-609"><span class="lno">609</span></span>
<span id="line-S-9504-610">610</span>
<span id="line-S-9504-611"><span class="lno">611</span></span>
<span id="line-S-9504-612"><span class="lno">612</span></span>
<span id="line-S-9504-613"><span class="lno">613</span></span>
<span id="line-S-9504-614"><span class="lno">614</span></span>
<span id="line-S-9504-615">615</span>
<span id="line-S-9504-616"><span class="lno">616</span></span>
<span id="line-S-9504-617"><span class="lno">617</span></span>
<span id="line-S-9504-618"><span class="lno">618</span></span>
<span id="line-S-9504-619"><span class="lno">619</span></span>
<span id="line-S-9504-620">620</span>
<span id="line-S-9504-621"><span class="lno">621</span></span>
<span id="line-S-9504-622"><span class="lno">622</span></span>
<span id="line-S-9504-623"><span class="lno">623</span></span>
<span id="line-S-9504-624"><span class="lno">624</span></span>
<span id="line-S-9504-625">625</span>
<span id="line-S-9504-626"><span class="lno">626</span></span>
<span id="line-S-9504-627"><span class="lno">627</span></span>
<span id="line-S-9504-628"><span class="lno">628</span></span>
<span id="line-S-9504-629"><span class="lno">629</span></span>
<span id="line-S-9504-630">630</span>
<span id="line-S-9504-631"><span class="lno">631</span></span>
<span id="line-S-9504-632"><span class="lno">632</span></span>
<span id="line-S-9504-633"><span class="lno">633</span></span>
<span id="line-S-9504-634"><span class="lno">634</span></span>
<span id="line-S-9504-635">635</span>
<span id="line-S-9504-636"><span class="lno">636</span></span>
<span id="line-S-9504-637"><span class="lno">637</span></span>
<span id="line-S-9504-638"><span class="lno">638</span></span>
<span id="line-S-9504-639"><span class="lno">639</span></span>
<span id="line-S-9504-640">640</span>
<span id="line-S-9504-641"><span class="lno">641</span></span>
<span id="line-S-9504-642"><span class="lno">642</span></span>
<span id="line-S-9504-643"><span class="lno">643</span></span>
<span id="line-S-9504-644"><span class="lno">644</span></span>
<span id="line-S-9504-645">645</span>
<span id="line-S-9504-646"><span class="lno">646</span></span>
<span id="line-S-9504-647"><span class="lno">647</span></span>
<span id="line-S-9504-648"><span class="lno">648</span></span>
<span id="line-S-9504-649"><span class="lno">649</span></span>
<span id="line-S-9504-650">650</span>
<span id="line-S-9504-651"><span class="lno">651</span></span>
<span id="line-S-9504-652"><span class="lno">652</span></span>
<span id="line-S-9504-653"><span class="lno">653</span></span>
<span id="line-S-9504-654"><span class="lno">654</span></span>
<span id="line-S-9504-655">655</span>
<span id="line-S-9504-656"><span class="lno">656</span></span>
<span id="line-S-9504-657"><span class="lno">657</span></span>
<span id="line-S-9504-658"><span class="lno">658</span></span>
<span id="line-S-9504-659"><span class="lno">659</span></span>
<span id="line-S-9504-660">660</span>
<span id="line-S-9504-661"><span class="lno">661</span></span>
<span id="line-S-9504-662"><span class="lno">662</span></span>
<span id="line-S-9504-663"><span class="lno">663</span></span>
<span id="line-S-9504-664"><span class="lno">664</span></span>
<span id="line-S-9504-665">665</span>
<span id="line-S-9504-666"><span class="lno">666</span></span>
<span id="line-S-9504-667"><span class="lno">667</span></span>
<span id="line-S-9504-668"><span class="lno">668</span></span>
<span id="line-S-9504-669"><span class="lno">669</span></span>
<span id="line-S-9504-670">670</span>
<span id="line-S-9504-671"><span class="lno">671</span></span>
<span id="line-S-9504-672"><span class="lno">672</span></span>
<span id="line-S-9504-673"><span class="lno">673</span></span>
<span id="line-S-9504-674"><span class="lno">674</span></span>
<span id="line-S-9504-675">675</span>
<span id="line-S-9504-676"><span class="lno">676</span></span>
<span id="line-S-9504-677"><span class="lno">677</span></span>
<span id="line-S-9504-678"><span class="lno">678</span></span>
<span id="line-S-9504-679"><span class="lno">679</span></span>
<span id="line-S-9504-680">680</span>
<span id="line-S-9504-681"><span class="lno">681</span></span>
<span id="line-S-9504-682"><span class="lno">682</span></span>
<span id="line-S-9504-683"><span class="lno">683</span></span>
<span id="line-S-9504-684"><span class="lno">684</span></span>
<span id="line-S-9504-685">685</span>
<span id="line-S-9504-686"><span class="lno">686</span></span>
<span id="line-S-9504-687"><span class="lno">687</span></span>
<span id="line-S-9504-688"><span class="lno">688</span></span>
<span id="line-S-9504-689"><span class="lno">689</span></span>
<span id="line-S-9504-690">690</span>
<span id="line-S-9504-691"><span class="lno">691</span></span>
<span id="line-S-9504-692"><span class="lno">692</span></span>
<span id="line-S-9504-693"><span class="lno">693</span></span>
<span id="line-S-9504-694"><span class="lno">694</span></span>
<span id="line-S-9504-695">695</span>
<span id="line-S-9504-696"><span class="lno">696</span></span>
<span id="line-S-9504-697"><span class="lno">697</span></span>
<span id="line-S-9504-698"><span class="lno">698</span></span>
<span id="line-S-9504-699"><span class="lno">699</span></span>
<span id="line-S-9504-700">700</span>
<span id="line-S-9504-701"><span class="lno">701</span></span>
<span id="line-S-9504-702"><span class="lno">702</span></span>
<span id="line-S-9504-703"><span class="lno">703</span></span>
<span id="line-S-9504-704"><span class="lno">704</span></span>
<span id="line-S-9504-705">705</span>
<span id="line-S-9504-706"><span class="lno">706</span></span>
<span id="line-S-9504-707"><span class="lno">707</span></span>
<span id="line-S-9504-708"><span class="lno">708</span></span>
<span id="line-S-9504-709"><span class="lno">709</span></span>
<span id="line-S-9504-710">710</span>
<span id="line-S-9504-711"><span class="lno">711</span></span>
<span id="line-S-9504-712"><span class="lno">712</span></span>
<span id="line-S-9504-713"><span class="lno">713</span></span>
<span id="line-S-9504-714"><span class="lno">714</span></span>
<span id="line-S-9504-715">715</span>
<span id="line-S-9504-716"><span class="lno">716</span></span>
<span id="line-S-9504-717"><span class="lno">717</span></span>
<span id="line-S-9504-718"><span class="lno">718</span></span>
<span id="line-S-9504-719"><span class="lno">719</span></span>
<span id="line-S-9504-720">720</span>
<span id="line-S-9504-721"><span class="lno">721</span></span>
<span id="line-S-9504-722"><span class="lno">722</span></span>
<span id="line-S-9504-723"><span class="lno">723</span></span>
<span id="line-S-9504-724"><span class="lno">724</span></span>
<span id="line-S-9504-725">725</span>
<span id="line-S-9504-726"><span class="lno">726</span></span>
<span id="line-S-9504-727"><span class="lno">727</span></span>
<span id="line-S-9504-728"><span class="lno">728</span></span>
<span id="line-S-9504-729"><span class="lno">729</span></span>
<span id="line-S-9504-730">730</span>
<span id="line-S-9504-731"><span class="lno">731</span></span>
<span id="line-S-9504-732"><span class="lno">732</span></span>
<span id="line-S-9504-733"><span class="lno">733</span></span>
<span id="line-S-9504-734"><span class="lno">734</span></span>
<span id="line-S-9504-735">735</span>
<span id="line-S-9504-736"><span class="lno">736</span></span>
<span id="line-S-9504-737"><span class="lno">737</span></span>
<span id="line-S-9504-738"><span class="lno">738</span></span>
<span id="line-S-9504-739"><span class="lno">739</span></span>
<span id="line-S-9504-740">740</span>
<span id="line-S-9504-741"><span class="lno">741</span></span>
<span id="line-S-9504-742"><span class="lno">742</span></span>
<span id="line-S-9504-743"><span class="lno">743</span></span>
<span id="line-S-9504-744"><span class="lno">744</span></span>
<span id="line-S-9504-745">745</span>
<span id="line-S-9504-746"><span class="lno">746</span></span>
<span id="line-S-9504-747"><span class="lno">747</span></span>
<span id="line-S-9504-748"><span class="lno">748</span></span>
<span id="line-S-9504-749"><span class="lno">749</span></span>
<span id="line-S-9504-750">750</span>
<span id="line-S-9504-751"><span class="lno">751</span></span>
<span id="line-S-9504-752"><span class="lno">752</span></span>
<span id="line-S-9504-753"><span class="lno">753</span></span>
<span id="line-S-9504-754"><span class="lno">754</span></span>
<span id="line-S-9504-755">755</span>
<span id="line-S-9504-756"><span class="lno">756</span></span>
<span id="line-S-9504-757"><span class="lno">757</span></span>
<span id="line-S-9504-758"><span class="lno">758</span></span>
<span id="line-S-9504-759"><span class="lno">759</span></span>
<span id="line-S-9504-760">760</span>
<span id="line-S-9504-761"><span class="lno">761</span></span>
<span id="line-S-9504-762"><span class="lno">762</span></span>
<span id="line-S-9504-763"><span class="lno">763</span></span>
<span id="line-S-9504-764"><span class="lno">764</span></span>
<span id="line-S-9504-765">765</span>
<span id="line-S-9504-766"><span class="lno">766</span></span>
<span id="line-S-9504-767"><span class="lno">767</span></span>
<span id="line-S-9504-768"><span class="lno">768</span></span>
<span id="line-S-9504-769"><span class="lno">769</span></span>
<span id="line-S-9504-770">770</span>
<span id="line-S-9504-771"><span class="lno">771</span></span>
<span id="line-S-9504-772"><span class="lno">772</span></span>
<span id="line-S-9504-773"><span class="lno">773</span></span>
<span id="line-S-9504-774"><span class="lno">774</span></span>
<span id="line-S-9504-775">775</span>
<span id="line-S-9504-776"><span class="lno">776</span></span>
<span id="line-S-9504-777"><span class="lno">777</span></span>
<span id="line-S-9504-778"><span class="lno">778</span></span>
<span id="line-S-9504-779"><span class="lno">779</span></span>
<span id="line-S-9504-780">780</span>
<span id="line-S-9504-781"><span class="lno">781</span></span>
<span id="line-S-9504-782"><span class="lno">782</span></span>
<span id="line-S-9504-783"><span class="lno">783</span></span>
<span id="line-S-9504-784"><span class="lno">784</span></span>
<span id="line-S-9504-785">785</span>
<span id="line-S-9504-786"><span class="lno">786</span></span>
<span id="line-S-9504-787"><span class="lno">787</span></span>
<span id="line-S-9504-788"><span class="lno">788</span></span>
<span id="line-S-9504-789"><span class="lno">789</span></span>
<span id="line-S-9504-790">790</span>
<span id="line-S-9504-791"><span class="lno">791</span></span>
<span id="line-S-9504-792"><span class="lno">792</span></span>
<span id="line-S-9504-793"><span class="lno">793</span></span>
<span id="line-S-9504-794"><span class="lno">794</span></span>
<span id="line-S-9504-795">795</span>
<span id="line-S-9504-796"><span class="lno">796</span></span>
<span id="line-S-9504-797"><span class="lno">797</span></span>
<span id="line-S-9504-798"><span class="lno">798</span></span>
<span id="line-S-9504-799"><span class="lno">799</span></span>
<span id="line-S-9504-800">800</span>
<span id="line-S-9504-801"><span class="lno">801</span></span>
<span id="line-S-9504-802"><span class="lno">802</span></span>
<span id="line-S-9504-803"><span class="lno">803</span></span>
<span id="line-S-9504-804"><span class="lno">804</span></span>
<span id="line-S-9504-805">805</span>
<span id="line-S-9504-806"><span class="lno">806</span></span>
<span id="line-S-9504-807"><span class="lno">807</span></span>
<span id="line-S-9504-808"><span class="lno">808</span></span>
<span id="line-S-9504-809"><span class="lno">809</span></span>
<span id="line-S-9504-810">810</span>
<span id="line-S-9504-811"><span class="lno">811</span></span>
<span id="line-S-9504-812"><span class="lno">812</span></span>
<span id="line-S-9504-813"><span class="lno">813</span></span>
<span id="line-S-9504-814"><span class="lno">814</span></span>
<span id="line-S-9504-815">815</span>
<span id="line-S-9504-816"><span class="lno">816</span></span>
<span id="line-S-9504-817"><span class="lno">817</span></span>
</pre></td><td valign="top"><pre><code class="language-xml">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                xmlns:db="http://docbook.org/ns/docbook"
                xmlns:f="http://docbook.org/ns/docbook/functions"
                xmlns:m="http://docbook.org/ns/docbook/modes"
                xmlns:t="http://docbook.org/ns/docbook/templates"
                xmlns:v="http://docbook.org/ns/docbook/variables"
                xmlns:xs="http://www.w3.org/2001/XMLSchema"
                xmlns="http://www.w3.org/1999/xhtml"
                default-mode="m:docbook"
                exclude-result-prefixes="db f m t v xs"
                version="3.0"&gt;

&lt;xsl:template name="t:inline"&gt;
  &lt;xsl:param name="namemap" select="'span'"/&gt;
  &lt;xsl:param name="class" as="xs:string*"/&gt;
  &lt;xsl:param name="local-name-as-class" as="xs:boolean" select="true()"/&gt;
  &lt;xsl:param name="content" select="()"/&gt;
  &lt;xsl:param name="extra-attributes" as="attribute()*" select="()"/&gt;

  &lt;xsl:variable name="map"
                select="if ($namemap instance of map(xs:string, xs:string))
                        then $namemap
                        else map { '*': $namemap }"/&gt;

  &lt;xsl:variable name="roles" select="tokenize(normalize-space(@role))"/&gt;

  &lt;xsl:variable name="mapped-names" as="xs:string*"&gt;
    &lt;xsl:for-each select="$roles"&gt;
      &lt;xsl:if test="exists($map(.))"&gt;
        &lt;xsl:sequence select="."/&gt;
      &lt;/xsl:if&gt;
    &lt;/xsl:for-each&gt;
  &lt;/xsl:variable&gt;

  &lt;xsl:variable name="mapped-names" as="xs:string+"
                select="if (empty($mapped-names))
                        then '*'
                        else $mapped-names"/&gt;

  &lt;xsl:variable name="classes" as="xs:string*"&gt;
    &lt;xsl:for-each select="$roles"&gt;
      &lt;xsl:sequence select="."/&gt;
    &lt;/xsl:for-each&gt;
    &lt;xsl:sequence select="$class"/&gt;
    &lt;xsl:if test="$local-name-as-class"&gt;
      &lt;xsl:sequence select="local-name(.)"/&gt;
    &lt;/xsl:if&gt;
  &lt;/xsl:variable&gt;

  &lt;!-- sort them and make them unique --&gt;
  &lt;xsl:variable name="classes" as="xs:string*"&gt;
    &lt;xsl:for-each select="distinct-values($classes)"&gt;
      &lt;xsl:sort select="."/&gt;
      &lt;xsl:sequence select="."/&gt;
    &lt;/xsl:for-each&gt;
  &lt;/xsl:variable&gt;

  &lt;xsl:variable name="attrs" as="attribute()*"&gt;
    &lt;xsl:apply-templates select="@*"/&gt;
&lt;!--
    &lt;xsl:if test="exists($classes)"&gt;
      &lt;xsl:attribute name="class" select="string-join($classes, ' ')"/&gt;
    &lt;/xsl:if&gt;
--&gt;
  &lt;/xsl:variable&gt;

  &lt;xsl:element namespace="http://www.w3.org/1999/xhtml"
               name="{$map($mapped-names[1])}"&gt;
    &lt;xsl:sequence select="f:attributes(., $attrs,
                                       if ($local-name-as-class)
                                       then (local-name(.), $classes)
                                       else $classes, ())"/&gt;
    &lt;xsl:sequence select="$extra-attributes"/&gt;
    &lt;xsl:apply-templates select="." mode="m:link"&gt;
      &lt;xsl:with-param name="primary-markup" select="false()"/&gt;
      &lt;xsl:with-param name="content" as="item()*"&gt;
        &lt;xsl:choose&gt;
          &lt;xsl:when test="empty($content)"&gt;
            &lt;xsl:call-template name="t:xlink"/&gt;
          &lt;/xsl:when&gt;
          &lt;xsl:otherwise&gt;
            &lt;xsl:sequence select="$content"/&gt;
          &lt;/xsl:otherwise&gt;
        &lt;/xsl:choose&gt;
      &lt;/xsl:with-param&gt;
    &lt;/xsl:apply-templates&gt;
  &lt;/xsl:element&gt;
&lt;/xsl:template&gt;

&lt;!-- ============================================================ --&gt;

&lt;xsl:template match="db:abbrev"&gt;
  &lt;xsl:call-template name="t:inline"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:accel"&gt;
  &lt;xsl:call-template name="t:inline"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:acronym"&gt;
  &lt;xsl:call-template name="t:inline"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:application"&gt;
  &lt;xsl:call-template name="t:inline"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:author"&gt;
  &lt;span&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
    &lt;xsl:apply-templates select="db:personname|db:orgname"/&gt;
  &lt;/span&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:buildtarget"&gt;
  &lt;xsl:call-template name="t:inline"&gt;
    &lt;xsl:with-param name="namemap" select="'code'"/&gt;
  &lt;/xsl:call-template&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:citation"&gt;
  &lt;xsl:call-template name="t:inline"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:citebiblioid"&gt;
  &lt;xsl:call-template name="t:inline"&gt;
    &lt;xsl:with-param name="class" select="@class"/&gt;
  &lt;/xsl:call-template&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:citerefentry"&gt;
  &lt;xsl:call-template name="t:inline"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:citetitle"&gt;
  &lt;xsl:call-template name="t:inline"&gt;
    &lt;xsl:with-param name="namemap" select="'i'"/&gt;
  &lt;/xsl:call-template&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:classname"&gt;
  &lt;xsl:call-template name="t:inline"&gt;
    &lt;xsl:with-param name="namemap" select="'code'"/&gt;
  &lt;/xsl:call-template&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:code"&gt;
  &lt;xsl:call-template name="t:inline"&gt;
    &lt;xsl:with-param name="namemap" select="'code'"/&gt;
    &lt;xsl:with-param name="local-name-as-class" select="false()"/&gt;
  &lt;/xsl:call-template&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:command"&gt;
  &lt;xsl:call-template name="t:inline"&gt;
    &lt;xsl:with-param name="namemap" select="'code'"/&gt;
  &lt;/xsl:call-template&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:computeroutput"&gt;
  &lt;xsl:call-template name="t:inline"&gt;
    &lt;xsl:with-param name="namemap" select="'code'"/&gt;
  &lt;/xsl:call-template&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:constant"&gt;
  &lt;xsl:call-template name="t:inline"&gt;
    &lt;xsl:with-param name="namemap" select="'code'"/&gt;
    &lt;xsl:with-param name="class" select="@class"/&gt;
  &lt;/xsl:call-template&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:database"&gt;
  &lt;xsl:call-template name="t:inline"&gt;
    &lt;xsl:with-param name="class" select="@class"/&gt;
  &lt;/xsl:call-template&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:date"&gt;
  &lt;xsl:variable name="format" select="f:date-format(.)"/&gt;
  &lt;xsl:choose&gt;
    &lt;xsl:when test="$format = 'apply-templates'"&gt;
      &lt;xsl:call-template name="t:inline"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="string(.) castable as xs:dateTime"&gt;
      &lt;xsl:call-template name="t:inline"&gt;
        &lt;xsl:with-param name="content" as="xs:string"&gt;
          &lt;!-- Don't attempt to use localization on Saxon HE --&gt;
          &lt;xsl:sequence
              use-when="system-property('xsl:product-name') = 'SAXON'
                        and not(
                           starts-with(system-property('xsl:product-version'), 'EE')
                           )"
              select="format-dateTime(xs:dateTime(.), $format)"/&gt;

          &lt;xsl:sequence
              use-when="not(system-property('xsl:product-name') = 'SAXON'
                            and not(
                              starts-with(system-property('xsl:product-version'), 'EE')
                              ))"
              select="format-dateTime(xs:dateTime(.), $format,
                                      f:language(.), (), ())"/&gt;
        &lt;/xsl:with-param&gt;
        &lt;xsl:with-param name="extra-attributes" as="attribute()*"&gt;
          &lt;xsl:attribute name="time" select="."/&gt;
        &lt;/xsl:with-param&gt;
      &lt;/xsl:call-template&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="string(.) castable as xs:date"&gt;
      &lt;xsl:call-template name="t:inline"&gt;
        &lt;xsl:with-param name="content" as="xs:string"&gt;
          &lt;!-- Don't attempt to use localization on Saxon HE --&gt;
          &lt;xsl:sequence
              use-when="system-property('xsl:product-name') = 'SAXON'
                        and not(
                           starts-with(system-property('xsl:product-version'), 'EE')
                           )"
              select="format-date(xs:date(.), $format)"/&gt;
          &lt;xsl:sequence
              use-when="not(system-property('xsl:product-name') = 'SAXON'
                            and not(
                              starts-with(system-property('xsl:product-version'), 'EE')
                              ))"
              select="format-date(xs:date(.), $format,
                                  f:language(.), (), ())"/&gt;
        &lt;/xsl:with-param&gt;
        &lt;xsl:with-param name="extra-attributes" as="attribute()*"&gt;
          &lt;xsl:attribute name="time" select="."/&gt;
        &lt;/xsl:with-param&gt;
      &lt;/xsl:call-template&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:call-template name="t:inline"/&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:editor"&gt;
  &lt;xsl:call-template name="t:inline"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:email"&gt;
  &lt;xsl:call-template name="t:inline"&gt;
    &lt;xsl:with-param name="namemap" select="'code'"/&gt;
  &lt;/xsl:call-template&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:emphasis"&gt;
  &lt;xsl:call-template name="t:inline"&gt;
    &lt;xsl:with-param name="namemap"
                    select="map { '*': 'em',
                                  'strong': 'strong',
                                  'bold': 'strong' }"/&gt;
    &lt;xsl:with-param name="local-name-as-class" select="false()"/&gt;
  &lt;/xsl:call-template&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:enumidentifier"&gt;
  &lt;xsl:call-template name="t:inline"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:enumname"&gt;
  &lt;xsl:call-template name="t:inline"&gt;
    &lt;xsl:with-param name="namemap" select="'code'"/&gt;
  &lt;/xsl:call-template&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:enumvalue"&gt;
  &lt;xsl:call-template name="t:inline"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:envar"&gt;
  &lt;xsl:call-template name="t:inline"&gt;
    &lt;xsl:with-param name="namemap" select="'code'"/&gt;
  &lt;/xsl:call-template&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:errorcode"&gt;
  &lt;xsl:call-template name="t:inline"&gt;
    &lt;xsl:with-param name="namemap" select="'code'"/&gt;
  &lt;/xsl:call-template&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:errorname"&gt;
  &lt;xsl:call-template name="t:inline"&gt;
    &lt;xsl:with-param name="namemap" select="'code'"/&gt;
  &lt;/xsl:call-template&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:errortext"&gt;
  &lt;xsl:call-template name="t:inline"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:errortype"&gt;
  &lt;xsl:call-template name="t:inline"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:exceptionname"&gt;
  &lt;xsl:call-template name="t:inline"&gt;
    &lt;xsl:with-param name="namemap" select="'code'"/&gt;
  &lt;/xsl:call-template&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:filename"&gt;
  &lt;xsl:call-template name="t:inline"&gt;
    &lt;xsl:with-param name="namemap" select="'code'"/&gt;
    &lt;xsl:with-param name="class" select="@class"/&gt;
  &lt;/xsl:call-template&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:firstterm"&gt;
  &lt;xsl:call-template name="t:inline"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:foreignphrase"&gt;
  &lt;xsl:call-template name="t:inline"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:function"&gt;
  &lt;xsl:call-template name="t:inline"&gt;
    &lt;xsl:with-param name="namemap" select="'code'"/&gt;
  &lt;/xsl:call-template&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:guibutton"&gt;
  &lt;xsl:call-template name="t:inline"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:guiicon"&gt;
  &lt;xsl:call-template name="t:inline"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:guilabel"&gt;
  &lt;xsl:call-template name="t:inline"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:guimenu"&gt;
  &lt;xsl:call-template name="t:inline"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:guimenuitem"&gt;
  &lt;xsl:call-template name="t:inline"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:guisubmenu"&gt;
  &lt;xsl:call-template name="t:inline"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:hardware"&gt;
  &lt;xsl:call-template name="t:inline"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:initializer"&gt;
  &lt;xsl:call-template name="t:inline"&gt;
    &lt;xsl:with-param name="namemap" select="'code'"/&gt;
  &lt;/xsl:call-template&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:inlineequation"&gt;
  &lt;xsl:call-template name="t:inline"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:interfacename"&gt;
  &lt;xsl:call-template name="t:inline"&gt;
    &lt;xsl:with-param name="namemap" select="'code'"/&gt;
  &lt;/xsl:call-template&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:jobtitle"&gt;
  &lt;xsl:call-template name="t:inline"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:keycap"&gt;
  &lt;xsl:variable name="lookup"
                select="if (@function = 'other')
                        then @otherfunction/string()
                        else @function/string()"/&gt;
  &lt;xsl:choose&gt;
    &lt;xsl:when test="exists(node())"&gt;
      &lt;xsl:call-template name="t:inline"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="exists(f:check-gentext(., 'keycap', $lookup))"&gt;
      &lt;xsl:call-template name="t:inline"&gt;
        &lt;xsl:with-param name="content" as="item()*"&gt;
          &lt;xsl:sequence select="f:gentext(., 'keycap', $lookup)"/&gt;
        &lt;/xsl:with-param&gt;
        &lt;xsl:with-param name="class" select="$lookup"/&gt;
      &lt;/xsl:call-template&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:message select="'No keycap for', $lookup"/&gt;
      &lt;xsl:call-template name="t:inline"&gt;
        &lt;xsl:with-param name="content" as="item()*"&gt;
          &lt;xsl:sequence select="'NOKEYCAP'"/&gt;
        &lt;/xsl:with-param&gt;
        &lt;xsl:with-param name="class" select="$lookup"/&gt;
      &lt;/xsl:call-template&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:keycode"&gt;
  &lt;xsl:call-template name="t:inline"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:keycombo"&gt;
  &lt;xsl:call-template name="t:inline"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:keysym"&gt;
  &lt;xsl:call-template name="t:inline"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:literal"&gt;
  &lt;xsl:call-template name="t:inline"&gt;
    &lt;xsl:with-param name="namemap" select="'code'"/&gt;
  &lt;/xsl:call-template&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:macroname"&gt;
  &lt;xsl:call-template name="t:inline"&gt;
    &lt;xsl:with-param name="namemap" select="'code'"/&gt;
  &lt;/xsl:call-template&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:markup"&gt;
  &lt;xsl:call-template name="t:inline"&gt;
    &lt;xsl:with-param name="namemap" select="'code'"/&gt;
  &lt;/xsl:call-template&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:mathphrase"&gt;
  &lt;xsl:call-template name="t:inline"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:medialabel"&gt;
  &lt;xsl:call-template name="t:inline"&gt;
    &lt;xsl:with-param name="namemap" select="'em'"/&gt;
  &lt;/xsl:call-template&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:menuchoice"&gt;
  &lt;xsl:call-template name="t:inline"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:methodname"&gt;
  &lt;xsl:call-template name="t:inline"&gt;
    &lt;xsl:with-param name="namemap" select="'code'"/&gt;
  &lt;/xsl:call-template&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:modifier"&gt;
  &lt;xsl:call-template name="t:inline"&gt;
    &lt;xsl:with-param name="namemap" select="'code'"/&gt;
  &lt;/xsl:call-template&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:mousebutton"&gt;
  &lt;xsl:call-template name="t:inline"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:namespace"&gt;
  &lt;xsl:call-template name="t:inline"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:namespacename"&gt;
  &lt;xsl:call-template name="t:inline"&gt;
    &lt;xsl:with-param name="namemap" select="'code'"/&gt;
  &lt;/xsl:call-template&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:ooclass"&gt;
  &lt;xsl:call-template name="t:inline"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:ooexception"&gt;
  &lt;xsl:call-template name="t:inline"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:oointerface"&gt;
  &lt;xsl:call-template name="t:inline"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:option"&gt;
  &lt;xsl:call-template name="t:inline"&gt;
    &lt;xsl:with-param name="namemap" select="'code'"/&gt;
  &lt;/xsl:call-template&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:optional"&gt;
  &lt;xsl:call-template name="t:inline"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:org"&gt;
  &lt;xsl:call-template name="t:inline"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:orgname"&gt;
  &lt;xsl:call-template name="t:inline"&gt;
    &lt;xsl:with-param name="class" select="@class"/&gt;
  &lt;/xsl:call-template&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:package"&gt;
  &lt;xsl:call-template name="t:inline"&gt;
    &lt;xsl:with-param name="namemap" select="'code'"/&gt;
  &lt;/xsl:call-template&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:parameter"&gt;
  &lt;xsl:call-template name="t:inline"&gt;
    &lt;xsl:with-param name="namemap" select="'code'"/&gt;
    &lt;xsl:with-param name="class" select="@class"/&gt;
  &lt;/xsl:call-template&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:person"&gt;
  &lt;xsl:call-template name="t:inline"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:phrase"&gt;
  &lt;xsl:call-template name="t:inline"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:productname"&gt;
  &lt;xsl:call-template name="t:inline"&gt;
    &lt;xsl:with-param name="class" select="@class"/&gt;
  &lt;/xsl:call-template&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:productnumber"&gt;
  &lt;xsl:call-template name="t:inline"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:prompt"&gt;
  &lt;xsl:call-template name="t:inline"&gt;
    &lt;xsl:with-param name="namemap" select="'code'"/&gt;
  &lt;/xsl:call-template&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:property"&gt;
  &lt;xsl:call-template name="t:inline"&gt;
    &lt;xsl:with-param name="namemap" select="'code'"/&gt;
  &lt;/xsl:call-template&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:quote"&gt;
  &lt;xsl:call-template name="t:inline"&gt;
    &lt;xsl:with-param name="namemap" select="'q'"/&gt;
    &lt;xsl:with-param name="local-name-as-class" select="false()"/&gt;
  &lt;/xsl:call-template&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:replaceable"&gt;
  &lt;xsl:call-template name="t:inline"&gt;
    &lt;xsl:with-param name="namemap" select="'em'"/&gt;
    &lt;xsl:with-param name="class" select="@class"/&gt;
  &lt;/xsl:call-template&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:returnvalue"&gt;
  &lt;xsl:call-template name="t:inline"&gt;
    &lt;xsl:with-param name="namemap" select="'code'"/&gt;
  &lt;/xsl:call-template&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:revnumber"&gt;
  &lt;xsl:call-template name="t:inline"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:shortcut"&gt;
  &lt;xsl:call-template name="t:inline"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:structfield"&gt;
  &lt;xsl:call-template name="t:inline"&gt;
    &lt;xsl:with-param name="namemap" select="'code'"/&gt;
  &lt;/xsl:call-template&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:subscript"&gt;
  &lt;xsl:call-template name="t:inline"&gt;
    &lt;xsl:with-param name="namemap" select="'sub'"/&gt;
    &lt;xsl:with-param name="local-name-as-class" select="false()"/&gt;
  &lt;/xsl:call-template&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:superscript"&gt;
  &lt;xsl:call-template name="t:inline"&gt;
    &lt;xsl:with-param name="namemap" select="'sup'"/&gt;
    &lt;xsl:with-param name="local-name-as-class" select="false()"/&gt;
  &lt;/xsl:call-template&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:symbol"&gt;
  &lt;xsl:call-template name="t:inline"&gt;
    &lt;xsl:with-param name="class" select="@class"/&gt;
  &lt;/xsl:call-template&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:systemitem"&gt;
  &lt;xsl:call-template name="t:inline"&gt;
    &lt;xsl:with-param name="namemap" select="'code'"/&gt;
    &lt;xsl:with-param name="class" select="@class"/&gt;
  &lt;/xsl:call-template&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:tag"&gt;
  &lt;xsl:variable name="class"
                select="if (@class)
                        then @class/string()
                        else 'element'"/&gt;

  &lt;xsl:variable name="content" as="item()*"&gt;
    &lt;xsl:choose&gt;
      &lt;xsl:when test="$class='attribute'"&gt;
        &lt;xsl:apply-templates/&gt;
      &lt;/xsl:when&gt;
      &lt;xsl:when test="$class='attvalue'"&gt;
        &lt;xsl:apply-templates/&gt;
      &lt;/xsl:when&gt;
      &lt;xsl:when test="$class='element'"&gt;
        &lt;xsl:apply-templates/&gt;
      &lt;/xsl:when&gt;
      &lt;xsl:when test="$class='endtag'"&gt;
        &lt;xsl:text&gt;&amp;lt;/&lt;/xsl:text&gt;
        &lt;xsl:apply-templates/&gt;
        &lt;xsl:text&gt;&amp;gt;&lt;/xsl:text&gt;
      &lt;/xsl:when&gt;
      &lt;xsl:when test="$class='genentity'"&gt;
        &lt;xsl:text&gt;&amp;amp;&lt;/xsl:text&gt;
        &lt;xsl:apply-templates/&gt;
        &lt;xsl:text&gt;;&lt;/xsl:text&gt;
      &lt;/xsl:when&gt;
      &lt;xsl:when test="$class='numcharref'"&gt;
        &lt;xsl:text&gt;&amp;amp;#&lt;/xsl:text&gt;
        &lt;xsl:apply-templates/&gt;
        &lt;xsl:text&gt;;&lt;/xsl:text&gt;
      &lt;/xsl:when&gt;
      &lt;xsl:when test="$class='paramentity'"&gt;
        &lt;xsl:text&gt;%&lt;/xsl:text&gt;
        &lt;xsl:apply-templates/&gt;
        &lt;xsl:text&gt;;&lt;/xsl:text&gt;
      &lt;/xsl:when&gt;
      &lt;xsl:when test="$class='pi'"&gt;
        &lt;xsl:text&gt;&amp;lt;?&lt;/xsl:text&gt;
        &lt;xsl:apply-templates/&gt;
        &lt;xsl:text&gt;&amp;gt;&lt;/xsl:text&gt;
      &lt;/xsl:when&gt;
      &lt;xsl:when test="$class='xmlpi'"&gt;
        &lt;xsl:text&gt;&amp;lt;?&lt;/xsl:text&gt;
        &lt;xsl:apply-templates/&gt;
        &lt;xsl:text&gt;?&amp;gt;&lt;/xsl:text&gt;
      &lt;/xsl:when&gt;
      &lt;xsl:when test="$class='starttag'"&gt;
        &lt;xsl:text&gt;&amp;lt;&lt;/xsl:text&gt;
        &lt;xsl:apply-templates/&gt;
        &lt;xsl:text&gt;&amp;gt;&lt;/xsl:text&gt;
      &lt;/xsl:when&gt;
      &lt;xsl:when test="$class='emptytag'"&gt;
        &lt;xsl:text&gt;&amp;lt;&lt;/xsl:text&gt;
        &lt;xsl:apply-templates/&gt;
        &lt;xsl:text&gt;/&amp;gt;&lt;/xsl:text&gt;
      &lt;/xsl:when&gt;
      &lt;xsl:when test="$class='sgmlcomment'"&gt;
        &lt;xsl:text&gt;&amp;lt;!--&lt;/xsl:text&gt;
        &lt;xsl:apply-templates/&gt;
        &lt;xsl:text&gt;--&amp;gt;&lt;/xsl:text&gt;
      &lt;/xsl:when&gt;
      &lt;xsl:otherwise&gt;
        &lt;xsl:apply-templates/&gt;
      &lt;/xsl:otherwise&gt;
    &lt;/xsl:choose&gt;
  &lt;/xsl:variable&gt;

  &lt;xsl:call-template name="t:inline"&gt;
    &lt;xsl:with-param name="namemap" select="'code'"/&gt;
    &lt;xsl:with-param name="local-name-as-class" select="false()"/&gt;
    &lt;xsl:with-param name="class" select="'tag tag-' || $class"/&gt;
  &lt;/xsl:call-template&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:task"&gt;
  &lt;xsl:call-template name="t:inline"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:templateid"&gt;
  &lt;xsl:call-template name="t:inline"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:templatename"&gt;
  &lt;xsl:call-template name="t:inline"&gt;
    &lt;xsl:with-param name="namemap" select="'code'"/&gt;
  &lt;/xsl:call-template&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:termdef"&gt;
  &lt;xsl:call-template name="t:inline"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:token"&gt;
  &lt;xsl:call-template name="t:inline"&gt;
    &lt;xsl:with-param name="namemap" select="'code'"/&gt;
  &lt;/xsl:call-template&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:trademark"&gt;
  &lt;xsl:call-template name="t:inline"&gt;
    &lt;xsl:with-param name="class" select="@class"/&gt;
  &lt;/xsl:call-template&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:type"&gt;
  &lt;xsl:call-template name="t:inline"&gt;
    &lt;xsl:with-param name="namemap" select="'code'"/&gt;
  &lt;/xsl:call-template&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:typedefname"&gt;
  &lt;xsl:call-template name="t:inline"&gt;
    &lt;xsl:with-param name="namemap" select="'code'"/&gt;
  &lt;/xsl:call-template&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:unionname"&gt;
  &lt;xsl:call-template name="t:inline"&gt;
    &lt;xsl:with-param name="namemap" select="'code'"/&gt;
  &lt;/xsl:call-template&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:uri"&gt;
  &lt;xsl:call-template name="t:inline"&gt;
    &lt;xsl:with-param name="namemap" select="'code'"/&gt;
    &lt;xsl:with-param name="class" select="@type"/&gt;
  &lt;/xsl:call-template&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:userinput"&gt;
  &lt;xsl:call-template name="t:inline"&gt;
    &lt;xsl:with-param name="namemap" select="'code'"/&gt;
  &lt;/xsl:call-template&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:varname"&gt;
  &lt;xsl:call-template name="t:inline"&gt;
    &lt;xsl:with-param name="namemap" select="'code'"/&gt;
  &lt;/xsl:call-template&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:wordasword"&gt;
  &lt;xsl:call-template name="t:inline"&gt;
    &lt;xsl:with-param name="namemap" select="'em'"/&gt;
  &lt;/xsl:call-template&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="comment()|processing-instruction()"&gt;
  &lt;!-- drop these on the floor --&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="processing-instruction('DocBook-xslTNG-version')" as="text()"&gt;
  &lt;xsl:value-of select="$v:VERSION"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="processing-instruction('system-property')" as="text()"&gt;
  &lt;xsl:value-of select="system-property(normalize-space(.))"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="processing-instruction('current-dateTime')" as="text()"&gt;
  &lt;xsl:variable name="attr" select="f:pi-attributes(.)"/&gt;
  &lt;xsl:variable name="then" as="xs:dateTime"&gt;
    &lt;xsl:choose&gt;
      &lt;xsl:when test="empty($attr/@dateTime)"&gt;
        &lt;xsl:sequence select="current-dateTime()"/&gt;
      &lt;/xsl:when&gt;
      &lt;xsl:when test="$attr/@dateTime castable as xs:dateTime"&gt;
        &lt;xsl:sequence select="xs:dateTime($attr/@dateTime)"/&gt;
      &lt;/xsl:when&gt;
      &lt;xsl:when test="$attr/@dateTime castable as xs:date"&gt;
        &lt;xsl:sequence select="xs:dateTime(xs:date($attr/@dateTime) + xs:dayTimeDuration('PT12H'))"/&gt;
      &lt;/xsl:when&gt;
      &lt;xsl:otherwise&gt;
        &lt;xsl:message select="'Cannot parse', $attr/@dateTime/string(), 'as a date/time'"/&gt;
        &lt;xsl:sequence select="current-dateTime()"/&gt;
      &lt;/xsl:otherwise&gt;
    &lt;/xsl:choose&gt;
  &lt;/xsl:variable&gt;
  &lt;xsl:variable name="offset" as="xs:duration"&gt;
    &lt;xsl:choose&gt;
      &lt;xsl:when test="empty($attr/@offset)"&gt;
        &lt;xsl:sequence select="xs:dayTimeDuration('PT0S')"/&gt;
      &lt;/xsl:when&gt;
      &lt;xsl:when test="$attr/@offset castable as xs:dayTimeDuration"&gt;
        &lt;xsl:sequence select="xs:dayTimeDuration($attr/@offset)"/&gt;
      &lt;/xsl:when&gt;
      &lt;xsl:when test="$attr/@offset castable as xs:yearMonthDuration"&gt;
        &lt;xsl:sequence select="xs:yearMonthDuration($attr/@offset)"/&gt;
      &lt;/xsl:when&gt;
      &lt;xsl:otherwise&gt;
        &lt;xsl:message select="'Cannot parse', $attr/@offset/string(), 'as a duration'"/&gt;
        &lt;xsl:sequence select="xs:dayTimeDuration('PT0S')"/&gt;
      &lt;/xsl:otherwise&gt;
    &lt;/xsl:choose&gt;
  &lt;/xsl:variable&gt;
  &lt;xsl:variable name="format"
                select="($attr/@format, $date-dateTime-format)[1]"/&gt;
  &lt;xsl:value-of select="format-dateTime($then + $offset, $format)"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="processing-instruction('eval')" as="item()*"&gt;
  &lt;xsl:evaluate xpath="string(.)"
                context-item="."
                namespace-context="."/&gt;
&lt;/xsl:template&gt;

&lt;/xsl:stylesheet&gt;
</code></pre></td></tr></table></div></div></div></div><div class="stylesheet" id="S-29523"><h3>xlink.xsl</h3><p><span><span class="template all">8 templates</span> (<span class="template elsewhere">1 used only in one other module</span>)</span>, <span><span class="function all">9 functions</span></span>, <span><span class="variable all">2 variables</span></span></p><div class="instructions"><div class="title closed">Instructions</div><div class="body"><div id="S-29523-docbook.org.ns.docbook.variables.private.xmlns-scheme" class="instruction variable"><div class="title"><span class="link"></span>Variable <code>$vp:xmlns-scheme</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-29523-docbook.org.ns.docbook.functions.private.xlink-xmlns-scheme,5">fp:xlink-xmlns-scheme()</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-29523">modules/xlink.xsl</a></div></div></div><div id="S-29523-docbook.org.ns.docbook.variables.private.xpath-scheme" class="instruction variable"><div class="title"><span class="link"></span>Variable <code>$vp:xpath-scheme</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-29523-docbook.org.ns.docbook.functions.private.xlink-xpath-scheme,5">fp:xlink-xpath-scheme()</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-29523">modules/xlink.xsl</a></div></div></div><div id="S-29523-docbook.org.ns.docbook.functions.private.xlink-sources,1" class="instruction function"><div class="title"><span class="link"></span>Function fp:xlink-sources($document as document-node()) as document-node()</div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-29523-docbook.org.ns.docbook.templates.xlink">t:xlink</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-29523">modules/xlink.xsl</a></div></div></div><div id="S-29523-docbook.org.ns.docbook.functions.private.xlink-targets,1" class="instruction function"><div class="title"><span class="link"></span>Function fp:xlink-targets($document as document-node()) as document-node()</div><div class="props"><div class="calls">Calls: <a href="#S-29523-docbook.org.ns.docbook.functions.private.pmuj,2">fp:pmuj()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-29523-docbook.org.ns.docbook.functions.private.pmuj,2">fp:pmuj()</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-29523">modules/xlink.xsl</a></div></div></div><div id="S-29523-docbook.org.ns.docbook.functions.xlink-style,1" class="instruction function"><div class="title"><span class="link"></span>Function f:xlink-style($document as document-node()) as xs:string</div><div class="props"><div class="uses">Uses: <a href="#S-26643-..xlink-style">$xlink-style</a>, <a href="#S-26643-..xlink-style-default">$xlink-style-default</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-6566-t-1">template</a>, <a href="#S-29523-docbook.org.ns.docbook.templates.private.out-of-line-xlink">tp:out-of-line-xlink</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-6566">main.xsl</a>, <a href="#S-29523">modules/xlink.xsl</a></div></div></div><div id="S-29523-docbook.org.ns.docbook.functions.private.pmuj-enabled,1" class="instruction function"><div class="title"><span class="link"></span>Function fp:pmuj-enabled($context as node()) as xs:boolean</div><div class="props"><div class="uses">Uses: <a href="#S-26643-..experimental-pmuj">$experimental-pmuj</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-17405-t-4">template</a>, <a href="#S-10318-docbook.org.ns.docbook.templates.private.link">tp:link</a>, <a href="#S-29523-docbook.org.ns.docbook.templates.private.simple-xlink">tp:simple-xlink</a>, <a href="#S-10318-docbook.org.ns.docbook.templates.private.xref">tp:xref</a>, <a href="#S-29523-docbook.org.ns.docbook.templates.xlink">t:xlink</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-17405">modules/templates.xsl</a>, <a href="#S-29523">modules/xlink.xsl</a>, <a href="#S-10318">modules/links.xsl</a></div></div></div><div id="S-29523-docbook.org.ns.docbook.functions.private.pmuj,2" class="instruction function"><div class="title"><span class="link"></span>Function fp:pmuj($node as element(), $id as xs:string)</div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-17405-t-4">template</a>, <a href="#S-29523-docbook.org.ns.docbook.templates.xlink">t:xlink</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-17405">modules/templates.xsl</a>, <a href="#S-29523">modules/xlink.xsl</a></div></div></div><div id="S-29523-docbook.org.ns.docbook.templates.xlink" class="instruction template elsewhere"><div class="title"><span class="link"></span>Template t:xlink  match ≅ </div><div class="props"><div class="calls">Calls: <a href="#S-29523-docbook.org.ns.docbook.functions.private.pmuj,2">fp:pmuj()</a>, <a href="#S-29523-docbook.org.ns.docbook.functions.private.pmuj-enabled,1">fp:pmuj-enabled()</a>, <a href="#S-29523-docbook.org.ns.docbook.functions.private.xlink-sources,1">fp:xlink-sources()</a></div><div class="calls">Calls: <a href="#S-29523-docbook.org.ns.docbook.templates.private.out-of-line-xlink">tp:out-of-line-xlink</a>, <a href="#S-29523-docbook.org.ns.docbook.templates.private.simple-xlink">tp:simple-xlink</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-9504-docbook.org.ns.docbook.templates.inline">t:inline</a></div><div class="used-in"><span class="marker" title="Only used in one other module">☝</span>Used in: <a href="#S-9504">modules/inlines.xsl</a></div><div class="mode">Mode: <code>m:docbook</code></div></div></div><div id="S-29523-t-2" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ *</div><div class="props"><div class="mode">Mode: <code>m:docbook</code></div><div class="priority">Priority: <code>100</code></div><div class="matches">Matches: <code>*</code></div></div></div><div id="S-29523-docbook.org.ns.docbook.templates.private.simple-xlink" class="instruction template"><div class="title"><span class="link"></span>Template tp:simple-xlink  match ≅ </div><div class="props"><div class="calls">Calls: <a href="#S-29523-docbook.org.ns.docbook.functions.private.pmuj-enabled,1">fp:pmuj-enabled()</a>, <a href="#S-28936-docbook.org.ns.docbook.functions.generate-id,1">f:generate-id()</a>, <a href="#S-28936-docbook.org.ns.docbook.functions.href,2">f:href()</a>, <a href="#S-29523-docbook.org.ns.docbook.functions.xpointer-idref,1">f:xpointer-idref()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-29523-docbook.org.ns.docbook.templates.xlink">t:xlink</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-29523">modules/xlink.xsl</a></div><div class="mode">Mode: <code>m:docbook</code></div></div></div><div id="S-29523-docbook.org.ns.docbook.templates.private.out-of-line-xlink" class="instruction template"><div class="title"><span class="link"></span>Template tp:out-of-line-xlink  match ≅ </div><div class="props"><div class="calls">Calls: <a href="#S-28936-docbook.org.ns.docbook.functions.generate-id,1">f:generate-id()</a>, <a href="#S-22317-docbook.org.ns.docbook.functions.gentext,3">f:gentext()</a>, <a href="#S-28936-docbook.org.ns.docbook.functions.href,2">f:href()</a>, <a href="#S-29523-docbook.org.ns.docbook.functions.xlink-style,1">f:xlink-style()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-29523-docbook.org.ns.docbook.templates.xlink">t:xlink</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-29523">modules/xlink.xsl</a></div><div class="mode">Mode: <code>m:docbook</code></div></div></div><div id="S-29523-t-5" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ *</div><div class="props"><div class="calls">Calls: <a href="#S-28936-docbook.org.ns.docbook.functions.href,2">f:href()</a></div><div class="mode">Mode: <code>mp:out-of-line-pmuj</code></div><div class="matches">Matches: <code>*</code></div></div></div><div id="S-29523-docbook.org.ns.docbook.functions.xpointer-idref,1" class="instruction function"><div class="title"><span class="link"></span>Function f:xpointer-idref($xpointer) as xs:string?</div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-29523-docbook.org.ns.docbook.templates.private.simple-xlink">tp:simple-xlink</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-29523">modules/xlink.xsl</a></div></div></div><div id="S-29523-t-6" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ *</div><div class="props"><div class="calls">Calls: <a href="#S-29523-docbook.org.ns.docbook.functions.private.find-xlink-nodes,3">fp:find-xlink-nodes()</a></div><div class="mode">Mode: <code>mp:xlink-sources</code></div><div class="matches">Matches: <code>*</code></div></div></div><div id="S-29523-t-7" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ *</div><div class="props"><div class="calls">Calls: <a href="#S-29523-docbook.org.ns.docbook.functions.private.find-xlink-nodes,3">fp:find-xlink-nodes()</a></div><div class="mode">Mode: <code>mp:xlink-targets</code></div><div class="matches">Matches: <code>*</code></div></div></div><div id="S-29523-t-8" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ *</div><div class="props"><div class="mode">Mode: <code>mp:locator</code></div><div class="matches">Matches: <code>*</code></div></div></div><div id="S-29523-docbook.org.ns.docbook.functions.private.find-xlink-nodes,3" class="instruction function"><div class="title"><span class="link"></span>Function fp:find-xlink-nodes($document as document-node(), $locator as xs:string, $nsmap as map(*)) <span class="recursive" title="Recursive function">♻</span></div><div class="props"><div class="calls">Calls: <a href="#S-29523-docbook.org.ns.docbook.functions.private.xlink-xmlns-scheme,5">fp:xlink-xmlns-scheme()</a>, <a href="#S-29523-docbook.org.ns.docbook.functions.private.xlink-xpath-scheme,5">fp:xlink-xpath-scheme()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-29523-t-6">template</a>, <a href="#S-29523-t-7">template</a>, <a href="#S-29523-docbook.org.ns.docbook.functions.private.find-xlink-nodes,3">fp:find-xlink-nodes()</a>, <a href="#S-29523-docbook.org.ns.docbook.functions.private.xlink-xmlns-scheme,5">fp:xlink-xmlns-scheme()</a>, <a href="#S-29523-docbook.org.ns.docbook.functions.private.xlink-xpath-scheme,5">fp:xlink-xpath-scheme()</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-29523">modules/xlink.xsl</a></div></div></div><div id="S-29523-docbook.org.ns.docbook.functions.private.xlink-xmlns-scheme,5" class="instruction function"><div class="title"><span class="link"></span>Function fp:xlink-xmlns-scheme($document as document-node(), $locator as xs:string, $nsmap as map(*), $scheme as xs:string, $href as xs:string)</div><div class="props"><div class="uses">Uses: <a href="#S-29523-docbook.org.ns.docbook.variables.private.xmlns-scheme">$vp:xmlns-scheme</a></div><div class="calls">Calls: <a href="#S-29523-docbook.org.ns.docbook.functions.private.find-xlink-nodes,3">fp:find-xlink-nodes()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-29523-docbook.org.ns.docbook.functions.private.find-xlink-nodes,3">fp:find-xlink-nodes()</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-29523">modules/xlink.xsl</a></div></div></div><div id="S-29523-docbook.org.ns.docbook.functions.private.xlink-xpath-scheme,5" class="instruction function"><div class="title"><span class="link"></span>Function fp:xlink-xpath-scheme($document as document-node(), $locator as xs:string, $nsmap as map(*), $scheme as xs:string, $href as xs:string)</div><div class="props"><div class="uses">Uses: <a href="#S-29523-docbook.org.ns.docbook.variables.private.xpath-scheme">$vp:xpath-scheme</a></div><div class="calls">Calls: <a href="#S-29523-docbook.org.ns.docbook.functions.private.find-xlink-nodes,3">fp:find-xlink-nodes()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-29523-docbook.org.ns.docbook.functions.private.find-xlink-nodes,3">fp:find-xlink-nodes()</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-29523">modules/xlink.xsl</a></div></div></div></div></div><div class="source-code"><div class="title closed">Source code</div><div class="body"><div><table><tr><td valign="top" align="right"><pre class="fake-prism"><span id="line-S-29523-1">1</span>
<span id="line-S-29523-2"><span class="lno">2</span></span>
<span id="line-S-29523-3"><span class="lno">3</span></span>
<span id="line-S-29523-4"><span class="lno">4</span></span>
<span id="line-S-29523-5">5</span>
<span id="line-S-29523-6"><span class="lno">6</span></span>
<span id="line-S-29523-7"><span class="lno">7</span></span>
<span id="line-S-29523-8"><span class="lno">8</span></span>
<span id="line-S-29523-9"><span class="lno">9</span></span>
<span id="line-S-29523-10">10</span>
<span id="line-S-29523-11"><span class="lno">11</span></span>
<span id="line-S-29523-12"><span class="lno">12</span></span>
<span id="line-S-29523-13"><span class="lno">13</span></span>
<span id="line-S-29523-14"><span class="lno">14</span></span>
<span id="line-S-29523-15">15</span>
<span id="line-S-29523-16"><span class="lno">16</span></span>
<span id="line-S-29523-17"><span class="lno">17</span></span>
<span id="line-S-29523-18"><span class="lno">18</span></span>
<span id="line-S-29523-19"><span class="lno">19</span></span>
<span id="line-S-29523-20">20</span>
<span id="line-S-29523-21"><span class="lno">21</span></span>
<span id="line-S-29523-22"><span class="lno">22</span></span>
<span id="line-S-29523-23"><span class="lno">23</span></span>
<span id="line-S-29523-24"><span class="lno">24</span></span>
<span id="line-S-29523-25">25</span>
<span id="line-S-29523-26"><span class="lno">26</span></span>
<span id="line-S-29523-27"><span class="lno">27</span></span>
<span id="line-S-29523-28"><span class="lno">28</span></span>
<span id="line-S-29523-29"><span class="lno">29</span></span>
<span id="line-S-29523-30">30</span>
<span id="line-S-29523-31"><span class="lno">31</span></span>
<span id="line-S-29523-32"><span class="lno">32</span></span>
<span id="line-S-29523-33"><span class="lno">33</span></span>
<span id="line-S-29523-34"><span class="lno">34</span></span>
<span id="line-S-29523-35">35</span>
<span id="line-S-29523-36"><span class="lno">36</span></span>
<span id="line-S-29523-37"><span class="lno">37</span></span>
<span id="line-S-29523-38"><span class="lno">38</span></span>
<span id="line-S-29523-39"><span class="lno">39</span></span>
<span id="line-S-29523-40">40</span>
<span id="line-S-29523-41"><span class="lno">41</span></span>
<span id="line-S-29523-42"><span class="lno">42</span></span>
<span id="line-S-29523-43"><span class="lno">43</span></span>
<span id="line-S-29523-44"><span class="lno">44</span></span>
<span id="line-S-29523-45">45</span>
<span id="line-S-29523-46"><span class="lno">46</span></span>
<span id="line-S-29523-47"><span class="lno">47</span></span>
<span id="line-S-29523-48"><span class="lno">48</span></span>
<span id="line-S-29523-49"><span class="lno">49</span></span>
<span id="line-S-29523-50">50</span>
<span id="line-S-29523-51"><span class="lno">51</span></span>
<span id="line-S-29523-52"><span class="lno">52</span></span>
<span id="line-S-29523-53"><span class="lno">53</span></span>
<span id="line-S-29523-54"><span class="lno">54</span></span>
<span id="line-S-29523-55">55</span>
<span id="line-S-29523-56"><span class="lno">56</span></span>
<span id="line-S-29523-57"><span class="lno">57</span></span>
<span id="line-S-29523-58"><span class="lno">58</span></span>
<span id="line-S-29523-59"><span class="lno">59</span></span>
<span id="line-S-29523-60">60</span>
<span id="line-S-29523-61"><span class="lno">61</span></span>
<span id="line-S-29523-62"><span class="lno">62</span></span>
<span id="line-S-29523-63"><span class="lno">63</span></span>
<span id="line-S-29523-64"><span class="lno">64</span></span>
<span id="line-S-29523-65">65</span>
<span id="line-S-29523-66"><span class="lno">66</span></span>
<span id="line-S-29523-67"><span class="lno">67</span></span>
<span id="line-S-29523-68"><span class="lno">68</span></span>
<span id="line-S-29523-69"><span class="lno">69</span></span>
<span id="line-S-29523-70">70</span>
<span id="line-S-29523-71"><span class="lno">71</span></span>
<span id="line-S-29523-72"><span class="lno">72</span></span>
<span id="line-S-29523-73"><span class="lno">73</span></span>
<span id="line-S-29523-74"><span class="lno">74</span></span>
<span id="line-S-29523-75">75</span>
<span id="line-S-29523-76"><span class="lno">76</span></span>
<span id="line-S-29523-77"><span class="lno">77</span></span>
<span id="line-S-29523-78"><span class="lno">78</span></span>
<span id="line-S-29523-79"><span class="lno">79</span></span>
<span id="line-S-29523-80">80</span>
<span id="line-S-29523-81"><span class="lno">81</span></span>
<span id="line-S-29523-82"><span class="lno">82</span></span>
<span id="line-S-29523-83"><span class="lno">83</span></span>
<span id="line-S-29523-84"><span class="lno">84</span></span>
<span id="line-S-29523-85">85</span>
<span id="line-S-29523-86"><span class="lno">86</span></span>
<span id="line-S-29523-87"><span class="lno">87</span></span>
<span id="line-S-29523-88"><span class="lno">88</span></span>
<span id="line-S-29523-89"><span class="lno">89</span></span>
<span id="line-S-29523-90">90</span>
<span id="line-S-29523-91"><span class="lno">91</span></span>
<span id="line-S-29523-92"><span class="lno">92</span></span>
<span id="line-S-29523-93"><span class="lno">93</span></span>
<span id="line-S-29523-94"><span class="lno">94</span></span>
<span id="line-S-29523-95">95</span>
<span id="line-S-29523-96"><span class="lno">96</span></span>
<span id="line-S-29523-97"><span class="lno">97</span></span>
<span id="line-S-29523-98"><span class="lno">98</span></span>
<span id="line-S-29523-99"><span class="lno">99</span></span>
<span id="line-S-29523-100">100</span>
<span id="line-S-29523-101"><span class="lno">101</span></span>
<span id="line-S-29523-102"><span class="lno">102</span></span>
<span id="line-S-29523-103"><span class="lno">103</span></span>
<span id="line-S-29523-104"><span class="lno">104</span></span>
<span id="line-S-29523-105">105</span>
<span id="line-S-29523-106"><span class="lno">106</span></span>
<span id="line-S-29523-107"><span class="lno">107</span></span>
<span id="line-S-29523-108"><span class="lno">108</span></span>
<span id="line-S-29523-109"><span class="lno">109</span></span>
<span id="line-S-29523-110">110</span>
<span id="line-S-29523-111"><span class="lno">111</span></span>
<span id="line-S-29523-112"><span class="lno">112</span></span>
<span id="line-S-29523-113"><span class="lno">113</span></span>
<span id="line-S-29523-114"><span class="lno">114</span></span>
<span id="line-S-29523-115">115</span>
<span id="line-S-29523-116"><span class="lno">116</span></span>
<span id="line-S-29523-117"><span class="lno">117</span></span>
<span id="line-S-29523-118"><span class="lno">118</span></span>
<span id="line-S-29523-119"><span class="lno">119</span></span>
<span id="line-S-29523-120">120</span>
<span id="line-S-29523-121"><span class="lno">121</span></span>
<span id="line-S-29523-122"><span class="lno">122</span></span>
<span id="line-S-29523-123"><span class="lno">123</span></span>
<span id="line-S-29523-124"><span class="lno">124</span></span>
<span id="line-S-29523-125">125</span>
<span id="line-S-29523-126"><span class="lno">126</span></span>
<span id="line-S-29523-127"><span class="lno">127</span></span>
<span id="line-S-29523-128"><span class="lno">128</span></span>
<span id="line-S-29523-129"><span class="lno">129</span></span>
<span id="line-S-29523-130">130</span>
<span id="line-S-29523-131"><span class="lno">131</span></span>
<span id="line-S-29523-132"><span class="lno">132</span></span>
<span id="line-S-29523-133"><span class="lno">133</span></span>
<span id="line-S-29523-134"><span class="lno">134</span></span>
<span id="line-S-29523-135">135</span>
<span id="line-S-29523-136"><span class="lno">136</span></span>
<span id="line-S-29523-137"><span class="lno">137</span></span>
<span id="line-S-29523-138"><span class="lno">138</span></span>
<span id="line-S-29523-139"><span class="lno">139</span></span>
<span id="line-S-29523-140">140</span>
<span id="line-S-29523-141"><span class="lno">141</span></span>
<span id="line-S-29523-142"><span class="lno">142</span></span>
<span id="line-S-29523-143"><span class="lno">143</span></span>
<span id="line-S-29523-144"><span class="lno">144</span></span>
<span id="line-S-29523-145">145</span>
<span id="line-S-29523-146"><span class="lno">146</span></span>
<span id="line-S-29523-147"><span class="lno">147</span></span>
<span id="line-S-29523-148"><span class="lno">148</span></span>
<span id="line-S-29523-149"><span class="lno">149</span></span>
<span id="line-S-29523-150">150</span>
<span id="line-S-29523-151"><span class="lno">151</span></span>
<span id="line-S-29523-152"><span class="lno">152</span></span>
<span id="line-S-29523-153"><span class="lno">153</span></span>
<span id="line-S-29523-154"><span class="lno">154</span></span>
<span id="line-S-29523-155">155</span>
<span id="line-S-29523-156"><span class="lno">156</span></span>
<span id="line-S-29523-157"><span class="lno">157</span></span>
<span id="line-S-29523-158"><span class="lno">158</span></span>
<span id="line-S-29523-159"><span class="lno">159</span></span>
<span id="line-S-29523-160">160</span>
<span id="line-S-29523-161"><span class="lno">161</span></span>
<span id="line-S-29523-162"><span class="lno">162</span></span>
<span id="line-S-29523-163"><span class="lno">163</span></span>
<span id="line-S-29523-164"><span class="lno">164</span></span>
<span id="line-S-29523-165">165</span>
<span id="line-S-29523-166"><span class="lno">166</span></span>
<span id="line-S-29523-167"><span class="lno">167</span></span>
<span id="line-S-29523-168"><span class="lno">168</span></span>
<span id="line-S-29523-169"><span class="lno">169</span></span>
<span id="line-S-29523-170">170</span>
<span id="line-S-29523-171"><span class="lno">171</span></span>
<span id="line-S-29523-172"><span class="lno">172</span></span>
<span id="line-S-29523-173"><span class="lno">173</span></span>
<span id="line-S-29523-174"><span class="lno">174</span></span>
<span id="line-S-29523-175">175</span>
<span id="line-S-29523-176"><span class="lno">176</span></span>
<span id="line-S-29523-177"><span class="lno">177</span></span>
<span id="line-S-29523-178"><span class="lno">178</span></span>
<span id="line-S-29523-179"><span class="lno">179</span></span>
<span id="line-S-29523-180">180</span>
<span id="line-S-29523-181"><span class="lno">181</span></span>
<span id="line-S-29523-182"><span class="lno">182</span></span>
<span id="line-S-29523-183"><span class="lno">183</span></span>
<span id="line-S-29523-184"><span class="lno">184</span></span>
<span id="line-S-29523-185">185</span>
<span id="line-S-29523-186"><span class="lno">186</span></span>
<span id="line-S-29523-187"><span class="lno">187</span></span>
<span id="line-S-29523-188"><span class="lno">188</span></span>
<span id="line-S-29523-189"><span class="lno">189</span></span>
<span id="line-S-29523-190">190</span>
<span id="line-S-29523-191"><span class="lno">191</span></span>
<span id="line-S-29523-192"><span class="lno">192</span></span>
<span id="line-S-29523-193"><span class="lno">193</span></span>
<span id="line-S-29523-194"><span class="lno">194</span></span>
<span id="line-S-29523-195">195</span>
<span id="line-S-29523-196"><span class="lno">196</span></span>
<span id="line-S-29523-197"><span class="lno">197</span></span>
<span id="line-S-29523-198"><span class="lno">198</span></span>
<span id="line-S-29523-199"><span class="lno">199</span></span>
<span id="line-S-29523-200">200</span>
<span id="line-S-29523-201"><span class="lno">201</span></span>
<span id="line-S-29523-202"><span class="lno">202</span></span>
<span id="line-S-29523-203"><span class="lno">203</span></span>
<span id="line-S-29523-204"><span class="lno">204</span></span>
<span id="line-S-29523-205">205</span>
<span id="line-S-29523-206"><span class="lno">206</span></span>
<span id="line-S-29523-207"><span class="lno">207</span></span>
<span id="line-S-29523-208"><span class="lno">208</span></span>
<span id="line-S-29523-209"><span class="lno">209</span></span>
<span id="line-S-29523-210">210</span>
<span id="line-S-29523-211"><span class="lno">211</span></span>
<span id="line-S-29523-212"><span class="lno">212</span></span>
<span id="line-S-29523-213"><span class="lno">213</span></span>
<span id="line-S-29523-214"><span class="lno">214</span></span>
<span id="line-S-29523-215">215</span>
<span id="line-S-29523-216"><span class="lno">216</span></span>
<span id="line-S-29523-217"><span class="lno">217</span></span>
<span id="line-S-29523-218"><span class="lno">218</span></span>
<span id="line-S-29523-219"><span class="lno">219</span></span>
<span id="line-S-29523-220">220</span>
<span id="line-S-29523-221"><span class="lno">221</span></span>
<span id="line-S-29523-222"><span class="lno">222</span></span>
<span id="line-S-29523-223"><span class="lno">223</span></span>
<span id="line-S-29523-224"><span class="lno">224</span></span>
<span id="line-S-29523-225">225</span>
<span id="line-S-29523-226"><span class="lno">226</span></span>
<span id="line-S-29523-227"><span class="lno">227</span></span>
<span id="line-S-29523-228"><span class="lno">228</span></span>
<span id="line-S-29523-229"><span class="lno">229</span></span>
<span id="line-S-29523-230">230</span>
<span id="line-S-29523-231"><span class="lno">231</span></span>
<span id="line-S-29523-232"><span class="lno">232</span></span>
<span id="line-S-29523-233"><span class="lno">233</span></span>
<span id="line-S-29523-234"><span class="lno">234</span></span>
<span id="line-S-29523-235">235</span>
<span id="line-S-29523-236"><span class="lno">236</span></span>
<span id="line-S-29523-237"><span class="lno">237</span></span>
<span id="line-S-29523-238"><span class="lno">238</span></span>
<span id="line-S-29523-239"><span class="lno">239</span></span>
<span id="line-S-29523-240">240</span>
<span id="line-S-29523-241"><span class="lno">241</span></span>
<span id="line-S-29523-242"><span class="lno">242</span></span>
<span id="line-S-29523-243"><span class="lno">243</span></span>
<span id="line-S-29523-244"><span class="lno">244</span></span>
<span id="line-S-29523-245">245</span>
<span id="line-S-29523-246"><span class="lno">246</span></span>
<span id="line-S-29523-247"><span class="lno">247</span></span>
<span id="line-S-29523-248"><span class="lno">248</span></span>
<span id="line-S-29523-249"><span class="lno">249</span></span>
<span id="line-S-29523-250">250</span>
<span id="line-S-29523-251"><span class="lno">251</span></span>
<span id="line-S-29523-252"><span class="lno">252</span></span>
<span id="line-S-29523-253"><span class="lno">253</span></span>
<span id="line-S-29523-254"><span class="lno">254</span></span>
<span id="line-S-29523-255">255</span>
<span id="line-S-29523-256"><span class="lno">256</span></span>
<span id="line-S-29523-257"><span class="lno">257</span></span>
<span id="line-S-29523-258"><span class="lno">258</span></span>
<span id="line-S-29523-259"><span class="lno">259</span></span>
<span id="line-S-29523-260">260</span>
<span id="line-S-29523-261"><span class="lno">261</span></span>
<span id="line-S-29523-262"><span class="lno">262</span></span>
<span id="line-S-29523-263"><span class="lno">263</span></span>
<span id="line-S-29523-264"><span class="lno">264</span></span>
<span id="line-S-29523-265">265</span>
<span id="line-S-29523-266"><span class="lno">266</span></span>
<span id="line-S-29523-267"><span class="lno">267</span></span>
<span id="line-S-29523-268"><span class="lno">268</span></span>
<span id="line-S-29523-269"><span class="lno">269</span></span>
<span id="line-S-29523-270">270</span>
<span id="line-S-29523-271"><span class="lno">271</span></span>
<span id="line-S-29523-272"><span class="lno">272</span></span>
<span id="line-S-29523-273"><span class="lno">273</span></span>
<span id="line-S-29523-274"><span class="lno">274</span></span>
<span id="line-S-29523-275">275</span>
<span id="line-S-29523-276"><span class="lno">276</span></span>
<span id="line-S-29523-277"><span class="lno">277</span></span>
<span id="line-S-29523-278"><span class="lno">278</span></span>
<span id="line-S-29523-279"><span class="lno">279</span></span>
<span id="line-S-29523-280">280</span>
<span id="line-S-29523-281"><span class="lno">281</span></span>
<span id="line-S-29523-282"><span class="lno">282</span></span>
<span id="line-S-29523-283"><span class="lno">283</span></span>
<span id="line-S-29523-284"><span class="lno">284</span></span>
<span id="line-S-29523-285">285</span>
<span id="line-S-29523-286"><span class="lno">286</span></span>
<span id="line-S-29523-287"><span class="lno">287</span></span>
<span id="line-S-29523-288"><span class="lno">288</span></span>
<span id="line-S-29523-289"><span class="lno">289</span></span>
<span id="line-S-29523-290">290</span>
<span id="line-S-29523-291"><span class="lno">291</span></span>
<span id="line-S-29523-292"><span class="lno">292</span></span>
<span id="line-S-29523-293"><span class="lno">293</span></span>
<span id="line-S-29523-294"><span class="lno">294</span></span>
<span id="line-S-29523-295">295</span>
<span id="line-S-29523-296"><span class="lno">296</span></span>
<span id="line-S-29523-297"><span class="lno">297</span></span>
<span id="line-S-29523-298"><span class="lno">298</span></span>
<span id="line-S-29523-299"><span class="lno">299</span></span>
<span id="line-S-29523-300">300</span>
<span id="line-S-29523-301"><span class="lno">301</span></span>
<span id="line-S-29523-302"><span class="lno">302</span></span>
<span id="line-S-29523-303"><span class="lno">303</span></span>
<span id="line-S-29523-304"><span class="lno">304</span></span>
<span id="line-S-29523-305">305</span>
<span id="line-S-29523-306"><span class="lno">306</span></span>
<span id="line-S-29523-307"><span class="lno">307</span></span>
<span id="line-S-29523-308"><span class="lno">308</span></span>
<span id="line-S-29523-309"><span class="lno">309</span></span>
<span id="line-S-29523-310">310</span>
<span id="line-S-29523-311"><span class="lno">311</span></span>
<span id="line-S-29523-312"><span class="lno">312</span></span>
<span id="line-S-29523-313"><span class="lno">313</span></span>
<span id="line-S-29523-314"><span class="lno">314</span></span>
<span id="line-S-29523-315">315</span>
<span id="line-S-29523-316"><span class="lno">316</span></span>
<span id="line-S-29523-317"><span class="lno">317</span></span>
<span id="line-S-29523-318"><span class="lno">318</span></span>
<span id="line-S-29523-319"><span class="lno">319</span></span>
<span id="line-S-29523-320">320</span>
<span id="line-S-29523-321"><span class="lno">321</span></span>
<span id="line-S-29523-322"><span class="lno">322</span></span>
<span id="line-S-29523-323"><span class="lno">323</span></span>
<span id="line-S-29523-324"><span class="lno">324</span></span>
<span id="line-S-29523-325">325</span>
<span id="line-S-29523-326"><span class="lno">326</span></span>
<span id="line-S-29523-327"><span class="lno">327</span></span>
<span id="line-S-29523-328"><span class="lno">328</span></span>
<span id="line-S-29523-329"><span class="lno">329</span></span>
<span id="line-S-29523-330">330</span>
<span id="line-S-29523-331"><span class="lno">331</span></span>
<span id="line-S-29523-332"><span class="lno">332</span></span>
<span id="line-S-29523-333"><span class="lno">333</span></span>
<span id="line-S-29523-334"><span class="lno">334</span></span>
<span id="line-S-29523-335">335</span>
<span id="line-S-29523-336"><span class="lno">336</span></span>
<span id="line-S-29523-337"><span class="lno">337</span></span>
<span id="line-S-29523-338"><span class="lno">338</span></span>
<span id="line-S-29523-339"><span class="lno">339</span></span>
<span id="line-S-29523-340">340</span>
<span id="line-S-29523-341"><span class="lno">341</span></span>
<span id="line-S-29523-342"><span class="lno">342</span></span>
<span id="line-S-29523-343"><span class="lno">343</span></span>
<span id="line-S-29523-344"><span class="lno">344</span></span>
<span id="line-S-29523-345">345</span>
<span id="line-S-29523-346"><span class="lno">346</span></span>
<span id="line-S-29523-347"><span class="lno">347</span></span>
<span id="line-S-29523-348"><span class="lno">348</span></span>
<span id="line-S-29523-349"><span class="lno">349</span></span>
<span id="line-S-29523-350">350</span>
<span id="line-S-29523-351"><span class="lno">351</span></span>
<span id="line-S-29523-352"><span class="lno">352</span></span>
<span id="line-S-29523-353"><span class="lno">353</span></span>
<span id="line-S-29523-354"><span class="lno">354</span></span>
<span id="line-S-29523-355">355</span>
<span id="line-S-29523-356"><span class="lno">356</span></span>
<span id="line-S-29523-357"><span class="lno">357</span></span>
<span id="line-S-29523-358"><span class="lno">358</span></span>
<span id="line-S-29523-359"><span class="lno">359</span></span>
<span id="line-S-29523-360">360</span>
<span id="line-S-29523-361"><span class="lno">361</span></span>
<span id="line-S-29523-362"><span class="lno">362</span></span>
<span id="line-S-29523-363"><span class="lno">363</span></span>
<span id="line-S-29523-364"><span class="lno">364</span></span>
<span id="line-S-29523-365">365</span>
<span id="line-S-29523-366"><span class="lno">366</span></span>
<span id="line-S-29523-367"><span class="lno">367</span></span>
<span id="line-S-29523-368"><span class="lno">368</span></span>
<span id="line-S-29523-369"><span class="lno">369</span></span>
<span id="line-S-29523-370">370</span>
<span id="line-S-29523-371"><span class="lno">371</span></span>
<span id="line-S-29523-372"><span class="lno">372</span></span>
<span id="line-S-29523-373"><span class="lno">373</span></span>
<span id="line-S-29523-374"><span class="lno">374</span></span>
<span id="line-S-29523-375">375</span>
<span id="line-S-29523-376"><span class="lno">376</span></span>
<span id="line-S-29523-377"><span class="lno">377</span></span>
<span id="line-S-29523-378"><span class="lno">378</span></span>
<span id="line-S-29523-379"><span class="lno">379</span></span>
<span id="line-S-29523-380">380</span>
<span id="line-S-29523-381"><span class="lno">381</span></span>
<span id="line-S-29523-382"><span class="lno">382</span></span>
<span id="line-S-29523-383"><span class="lno">383</span></span>
<span id="line-S-29523-384"><span class="lno">384</span></span>
<span id="line-S-29523-385">385</span>
<span id="line-S-29523-386"><span class="lno">386</span></span>
<span id="line-S-29523-387"><span class="lno">387</span></span>
<span id="line-S-29523-388"><span class="lno">388</span></span>
<span id="line-S-29523-389"><span class="lno">389</span></span>
<span id="line-S-29523-390">390</span>
<span id="line-S-29523-391"><span class="lno">391</span></span>
<span id="line-S-29523-392"><span class="lno">392</span></span>
<span id="line-S-29523-393"><span class="lno">393</span></span>
<span id="line-S-29523-394"><span class="lno">394</span></span>
<span id="line-S-29523-395">395</span>
<span id="line-S-29523-396"><span class="lno">396</span></span>
<span id="line-S-29523-397"><span class="lno">397</span></span>
<span id="line-S-29523-398"><span class="lno">398</span></span>
<span id="line-S-29523-399"><span class="lno">399</span></span>
<span id="line-S-29523-400">400</span>
<span id="line-S-29523-401"><span class="lno">401</span></span>
<span id="line-S-29523-402"><span class="lno">402</span></span>
<span id="line-S-29523-403"><span class="lno">403</span></span>
<span id="line-S-29523-404"><span class="lno">404</span></span>
<span id="line-S-29523-405">405</span>
<span id="line-S-29523-406"><span class="lno">406</span></span>
<span id="line-S-29523-407"><span class="lno">407</span></span>
<span id="line-S-29523-408"><span class="lno">408</span></span>
<span id="line-S-29523-409"><span class="lno">409</span></span>
<span id="line-S-29523-410">410</span>
<span id="line-S-29523-411"><span class="lno">411</span></span>
<span id="line-S-29523-412"><span class="lno">412</span></span>
<span id="line-S-29523-413"><span class="lno">413</span></span>
<span id="line-S-29523-414"><span class="lno">414</span></span>
<span id="line-S-29523-415">415</span>
<span id="line-S-29523-416"><span class="lno">416</span></span>
<span id="line-S-29523-417"><span class="lno">417</span></span>
<span id="line-S-29523-418"><span class="lno">418</span></span>
<span id="line-S-29523-419"><span class="lno">419</span></span>
<span id="line-S-29523-420">420</span>
<span id="line-S-29523-421"><span class="lno">421</span></span>
<span id="line-S-29523-422"><span class="lno">422</span></span>
<span id="line-S-29523-423"><span class="lno">423</span></span>
<span id="line-S-29523-424"><span class="lno">424</span></span>
<span id="line-S-29523-425">425</span>
<span id="line-S-29523-426"><span class="lno">426</span></span>
<span id="line-S-29523-427"><span class="lno">427</span></span>
<span id="line-S-29523-428"><span class="lno">428</span></span>
<span id="line-S-29523-429"><span class="lno">429</span></span>
<span id="line-S-29523-430">430</span>
<span id="line-S-29523-431"><span class="lno">431</span></span>
<span id="line-S-29523-432"><span class="lno">432</span></span>
<span id="line-S-29523-433"><span class="lno">433</span></span>
<span id="line-S-29523-434"><span class="lno">434</span></span>
<span id="line-S-29523-435">435</span>
<span id="line-S-29523-436"><span class="lno">436</span></span>
<span id="line-S-29523-437"><span class="lno">437</span></span>
<span id="line-S-29523-438"><span class="lno">438</span></span>
<span id="line-S-29523-439"><span class="lno">439</span></span>
<span id="line-S-29523-440">440</span>
<span id="line-S-29523-441"><span class="lno">441</span></span>
<span id="line-S-29523-442"><span class="lno">442</span></span>
<span id="line-S-29523-443"><span class="lno">443</span></span>
<span id="line-S-29523-444"><span class="lno">444</span></span>
<span id="line-S-29523-445">445</span>
<span id="line-S-29523-446"><span class="lno">446</span></span>
<span id="line-S-29523-447"><span class="lno">447</span></span>
<span id="line-S-29523-448"><span class="lno">448</span></span>
<span id="line-S-29523-449"><span class="lno">449</span></span>
<span id="line-S-29523-450">450</span>
<span id="line-S-29523-451"><span class="lno">451</span></span>
<span id="line-S-29523-452"><span class="lno">452</span></span>
<span id="line-S-29523-453"><span class="lno">453</span></span>
<span id="line-S-29523-454"><span class="lno">454</span></span>
<span id="line-S-29523-455">455</span>
<span id="line-S-29523-456"><span class="lno">456</span></span>
<span id="line-S-29523-457"><span class="lno">457</span></span>
<span id="line-S-29523-458"><span class="lno">458</span></span>
<span id="line-S-29523-459"><span class="lno">459</span></span>
<span id="line-S-29523-460">460</span>
<span id="line-S-29523-461"><span class="lno">461</span></span>
<span id="line-S-29523-462"><span class="lno">462</span></span>
<span id="line-S-29523-463"><span class="lno">463</span></span>
<span id="line-S-29523-464"><span class="lno">464</span></span>
<span id="line-S-29523-465">465</span>
<span id="line-S-29523-466"><span class="lno">466</span></span>
<span id="line-S-29523-467"><span class="lno">467</span></span>
<span id="line-S-29523-468"><span class="lno">468</span></span>
<span id="line-S-29523-469"><span class="lno">469</span></span>
<span id="line-S-29523-470">470</span>
<span id="line-S-29523-471"><span class="lno">471</span></span>
<span id="line-S-29523-472"><span class="lno">472</span></span>
<span id="line-S-29523-473"><span class="lno">473</span></span>
<span id="line-S-29523-474"><span class="lno">474</span></span>
<span id="line-S-29523-475">475</span>
<span id="line-S-29523-476"><span class="lno">476</span></span>
<span id="line-S-29523-477"><span class="lno">477</span></span>
<span id="line-S-29523-478"><span class="lno">478</span></span>
<span id="line-S-29523-479"><span class="lno">479</span></span>
<span id="line-S-29523-480">480</span>
<span id="line-S-29523-481"><span class="lno">481</span></span>
<span id="line-S-29523-482"><span class="lno">482</span></span>
<span id="line-S-29523-483"><span class="lno">483</span></span>
<span id="line-S-29523-484"><span class="lno">484</span></span>
<span id="line-S-29523-485">485</span>
<span id="line-S-29523-486"><span class="lno">486</span></span>
<span id="line-S-29523-487"><span class="lno">487</span></span>
<span id="line-S-29523-488"><span class="lno">488</span></span>
<span id="line-S-29523-489"><span class="lno">489</span></span>
<span id="line-S-29523-490">490</span>
<span id="line-S-29523-491"><span class="lno">491</span></span>
<span id="line-S-29523-492"><span class="lno">492</span></span>
<span id="line-S-29523-493"><span class="lno">493</span></span>
<span id="line-S-29523-494"><span class="lno">494</span></span>
<span id="line-S-29523-495">495</span>
<span id="line-S-29523-496"><span class="lno">496</span></span>
<span id="line-S-29523-497"><span class="lno">497</span></span>
<span id="line-S-29523-498"><span class="lno">498</span></span>
<span id="line-S-29523-499"><span class="lno">499</span></span>
<span id="line-S-29523-500">500</span>
<span id="line-S-29523-501"><span class="lno">501</span></span>
<span id="line-S-29523-502"><span class="lno">502</span></span>
<span id="line-S-29523-503"><span class="lno">503</span></span>
<span id="line-S-29523-504"><span class="lno">504</span></span>
<span id="line-S-29523-505">505</span>
<span id="line-S-29523-506"><span class="lno">506</span></span>
<span id="line-S-29523-507"><span class="lno">507</span></span>
<span id="line-S-29523-508"><span class="lno">508</span></span>
<span id="line-S-29523-509"><span class="lno">509</span></span>
<span id="line-S-29523-510">510</span>
<span id="line-S-29523-511"><span class="lno">511</span></span>
<span id="line-S-29523-512"><span class="lno">512</span></span>
<span id="line-S-29523-513"><span class="lno">513</span></span>
<span id="line-S-29523-514"><span class="lno">514</span></span>
<span id="line-S-29523-515">515</span>
<span id="line-S-29523-516"><span class="lno">516</span></span>
<span id="line-S-29523-517"><span class="lno">517</span></span>
<span id="line-S-29523-518"><span class="lno">518</span></span>
<span id="line-S-29523-519"><span class="lno">519</span></span>
<span id="line-S-29523-520">520</span>
<span id="line-S-29523-521"><span class="lno">521</span></span>
<span id="line-S-29523-522"><span class="lno">522</span></span>
<span id="line-S-29523-523"><span class="lno">523</span></span>
<span id="line-S-29523-524"><span class="lno">524</span></span>
<span id="line-S-29523-525">525</span>
<span id="line-S-29523-526"><span class="lno">526</span></span>
<span id="line-S-29523-527"><span class="lno">527</span></span>
<span id="line-S-29523-528"><span class="lno">528</span></span>
<span id="line-S-29523-529"><span class="lno">529</span></span>
<span id="line-S-29523-530">530</span>
<span id="line-S-29523-531"><span class="lno">531</span></span>
<span id="line-S-29523-532"><span class="lno">532</span></span>
<span id="line-S-29523-533"><span class="lno">533</span></span>
<span id="line-S-29523-534"><span class="lno">534</span></span>
<span id="line-S-29523-535">535</span>
<span id="line-S-29523-536"><span class="lno">536</span></span>
<span id="line-S-29523-537"><span class="lno">537</span></span>
<span id="line-S-29523-538"><span class="lno">538</span></span>
<span id="line-S-29523-539"><span class="lno">539</span></span>
<span id="line-S-29523-540">540</span>
<span id="line-S-29523-541"><span class="lno">541</span></span>
<span id="line-S-29523-542"><span class="lno">542</span></span>
<span id="line-S-29523-543"><span class="lno">543</span></span>
<span id="line-S-29523-544"><span class="lno">544</span></span>
<span id="line-S-29523-545">545</span>
<span id="line-S-29523-546"><span class="lno">546</span></span>
<span id="line-S-29523-547"><span class="lno">547</span></span>
<span id="line-S-29523-548"><span class="lno">548</span></span>
<span id="line-S-29523-549"><span class="lno">549</span></span>
<span id="line-S-29523-550">550</span>
<span id="line-S-29523-551"><span class="lno">551</span></span>
<span id="line-S-29523-552"><span class="lno">552</span></span>
<span id="line-S-29523-553"><span class="lno">553</span></span>
<span id="line-S-29523-554"><span class="lno">554</span></span>
<span id="line-S-29523-555">555</span>
<span id="line-S-29523-556"><span class="lno">556</span></span>
<span id="line-S-29523-557"><span class="lno">557</span></span>
<span id="line-S-29523-558"><span class="lno">558</span></span>
<span id="line-S-29523-559"><span class="lno">559</span></span>
<span id="line-S-29523-560">560</span>
<span id="line-S-29523-561"><span class="lno">561</span></span>
<span id="line-S-29523-562"><span class="lno">562</span></span>
<span id="line-S-29523-563"><span class="lno">563</span></span>
<span id="line-S-29523-564"><span class="lno">564</span></span>
<span id="line-S-29523-565">565</span>
<span id="line-S-29523-566"><span class="lno">566</span></span>
<span id="line-S-29523-567"><span class="lno">567</span></span>
<span id="line-S-29523-568"><span class="lno">568</span></span>
<span id="line-S-29523-569"><span class="lno">569</span></span>
<span id="line-S-29523-570">570</span>
<span id="line-S-29523-571"><span class="lno">571</span></span>
<span id="line-S-29523-572"><span class="lno">572</span></span>
<span id="line-S-29523-573"><span class="lno">573</span></span>
<span id="line-S-29523-574"><span class="lno">574</span></span>
<span id="line-S-29523-575">575</span>
<span id="line-S-29523-576"><span class="lno">576</span></span>
<span id="line-S-29523-577"><span class="lno">577</span></span>
<span id="line-S-29523-578"><span class="lno">578</span></span>
<span id="line-S-29523-579"><span class="lno">579</span></span>
<span id="line-S-29523-580">580</span>
<span id="line-S-29523-581"><span class="lno">581</span></span>
<span id="line-S-29523-582"><span class="lno">582</span></span>
<span id="line-S-29523-583"><span class="lno">583</span></span>
<span id="line-S-29523-584"><span class="lno">584</span></span>
<span id="line-S-29523-585">585</span>
<span id="line-S-29523-586"><span class="lno">586</span></span>
<span id="line-S-29523-587"><span class="lno">587</span></span>
<span id="line-S-29523-588"><span class="lno">588</span></span>
<span id="line-S-29523-589"><span class="lno">589</span></span>
<span id="line-S-29523-590">590</span>
<span id="line-S-29523-591"><span class="lno">591</span></span>
<span id="line-S-29523-592"><span class="lno">592</span></span>
<span id="line-S-29523-593"><span class="lno">593</span></span>
<span id="line-S-29523-594"><span class="lno">594</span></span>
<span id="line-S-29523-595">595</span>
<span id="line-S-29523-596"><span class="lno">596</span></span>
<span id="line-S-29523-597"><span class="lno">597</span></span>
<span id="line-S-29523-598"><span class="lno">598</span></span>
<span id="line-S-29523-599"><span class="lno">599</span></span>
<span id="line-S-29523-600">600</span>
<span id="line-S-29523-601"><span class="lno">601</span></span>
<span id="line-S-29523-602"><span class="lno">602</span></span>
<span id="line-S-29523-603"><span class="lno">603</span></span>
<span id="line-S-29523-604"><span class="lno">604</span></span>
<span id="line-S-29523-605">605</span>
<span id="line-S-29523-606"><span class="lno">606</span></span>
</pre></td><td valign="top"><pre><code class="language-xml">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                xmlns:db="http://docbook.org/ns/docbook"
                xmlns:f="http://docbook.org/ns/docbook/functions"
                xmlns:fp="http://docbook.org/ns/docbook/functions/private"
                xmlns:h="http://www.w3.org/1999/xhtml"
                xmlns:m="http://docbook.org/ns/docbook/modes"
                xmlns:map="http://www.w3.org/2005/xpath-functions/map"
                xmlns:mp="http://docbook.org/ns/docbook/modes/private"
                xmlns:t="http://docbook.org/ns/docbook/templates"
                xmlns:tp="http://docbook.org/ns/docbook/templates/private"
                xmlns:v="http://docbook.org/ns/docbook/variables"
                xmlns:vp="http://docbook.org/ns/docbook/variables/private"
                xmlns:xlink='http://www.w3.org/1999/xlink'
                xmlns:xs="http://www.w3.org/2001/XMLSchema"
                xmlns="http://www.w3.org/1999/xhtml"
                default-mode="m:docbook"
                exclude-result-prefixes="db f fp h m map mp t tp v vp xlink xs"
                version="3.0"&gt;

&lt;!-- This module does some XLink processing. It doesn't generate fully
     explicit XLink elements, so it doesn't do exactly conformant
     XLink processing. --&gt;

&lt;xsl:key name="exlink" match="*" use="@xlink:type"/&gt;
&lt;xsl:key name="linkend" match="*" use="@linkend"/&gt;
&lt;xsl:key name="href" match="*" use="@xlink:href"/&gt;

&lt;!-- N.B. parens in the scheme expression are not handled! --&gt;
&lt;xsl:variable name="vp:xmlns-scheme"
              select="'^\s*xmlns\s*\(\s*(\c+)\s*=\s*(.*?)\)\s*$'"/&gt;
&lt;xsl:variable name="vp:xpath-scheme"
              select="'^\s*xpath\s*\((.*?)\)\s*$'"/&gt;

&lt;!-- Boy, do you wanna make sure this is cached if you have
     a lot of extended XLinks. This is going to get called for
     at least every inline. --&gt;
&lt;xsl:function name="fp:xlink-sources" as="document-node()" cache="yes"&gt;
  &lt;xsl:param name="document" as="document-node()"/&gt;
  &lt;xsl:document&gt;
    &lt;xsl:apply-templates select="key('exlink', 'extended', $document)"
                         mode="mp:xlink-sources"/&gt;
  &lt;/xsl:document&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="fp:xlink-targets" as="document-node()" cache="yes"&gt;
  &lt;xsl:param name="document" as="document-node()"/&gt;
  &lt;xsl:document&gt;
    &lt;xsl:apply-templates select="key('exlink', 'extended', $document)"
                         mode="mp:xlink-targets"/&gt;
  &lt;/xsl:document&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="f:xlink-style" as="xs:string"&gt;
  &lt;xsl:param name="document" as="document-node()"/&gt;

  &lt;xsl:choose&gt;
    &lt;xsl:when test="$xlink-style != 'document'"&gt;
      &lt;xsl:sequence select="$xlink-style"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="$document/h:html"&gt;
      &lt;!-- We're processing chunks, so look where we squirreled away
           the answer when we were processing the DocBook document. --&gt;
      &lt;xsl:sequence select="($document/h:html/h:div/@db-xlink/string(),
                             $xlink-style-default)[1]"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:sequence
          select="f:pi($document/*/db:info, 'xlink-style', $xlink-style-default)"/&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="fp:pmuj-enabled" as="xs:boolean" cache="yes"&gt;
  &lt;xsl:param name="context" as="node()"/&gt;
  &lt;xsl:sequence select="f:is-true(f:pi(root($context)/*/db:info,
                                  'pmuj', $experimental-pmuj))"/&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="fp:pmuj"&gt;
  &lt;xsl:param name="node" as="element()"/&gt;
  &lt;xsl:param name="id" as="xs:string"/&gt;

  &lt;xsl:variable name="sources" as="xs:string*"&gt;
    &lt;xsl:for-each select="(key('linkend', $id, root($node)),
                           key('href', '#'||$id, root($node)))"&gt;
      &lt;xsl:if test="not(@xlink:type='locator')"&gt;
        &lt;xsl:sequence select="'#' || f:generate-id(.)"/&gt;
      &lt;/xsl:if&gt;
    &lt;/xsl:for-each&gt;

    &lt;xsl:variable name="xlinks" select="fp:xlink-targets(root($node))"/&gt;
    &lt;xsl:variable name="sources" select="key('id', generate-id($node), $xlinks)"/&gt;
    &lt;xsl:if test="$sources"&gt;
      &lt;xsl:variable name="locators" as="element()*"&gt;
        &lt;xsl:apply-templates select="$node" mode="mp:out-of-line-pmuj"&gt;
          &lt;xsl:with-param name="document" select="root($node)"/&gt;
          &lt;xsl:with-param name="locators" select="$sources"/&gt;
        &lt;/xsl:apply-templates&gt;
      &lt;/xsl:variable&gt;
      &lt;xsl:for-each select="$locators[self::db:locator]"&gt;
        &lt;xsl:sequence select="@xlink:href/string()"/&gt;
      &lt;/xsl:for-each&gt;
    &lt;/xsl:if&gt;
  &lt;/xsl:variable&gt;

  &lt;xsl:for-each select="distinct-values($sources)"&gt;
    &lt;a class="pmuj" href="{.}"&gt;◎&lt;/a&gt;
  &lt;/xsl:for-each&gt;
&lt;/xsl:function&gt;

&lt;xsl:template name="t:xlink"&gt;
  &lt;xsl:param name="content"&gt;
    &lt;xsl:apply-templates/&gt;
  &lt;/xsl:param&gt;

  &lt;xsl:if test="fp:pmuj-enabled(/)"&gt;
    &lt;xsl:sequence select="@xml:id ! fp:pmuj(./parent::*, ./string())"/&gt;
  &lt;/xsl:if&gt;

  &lt;xsl:variable name="xlinks" select="fp:xlink-sources(root(.))"/&gt;

  &lt;xsl:variable name="targets"
                select="key('id', generate-id(.), $xlinks)"/&gt;

  &lt;!-- Not handled: an explicitly extended link that is also
       the target of out-of-band links. --&gt;

  &lt;xsl:choose&gt;
    &lt;xsl:when test="@xlink:type = 'simple' or @xlink:href"&gt;
      &lt;xsl:call-template name="tp:simple-xlink"&gt;
        &lt;xsl:with-param name="content"&gt;
          &lt;xsl:choose&gt;
            &lt;xsl:when test="empty($content)"&gt;
              &lt;xsl:apply-templates/&gt;
            &lt;/xsl:when&gt;
            &lt;xsl:otherwise&gt;
              &lt;xsl:sequence select="$content"/&gt;
            &lt;/xsl:otherwise&gt;
          &lt;/xsl:choose&gt;
        &lt;/xsl:with-param&gt;
      &lt;/xsl:call-template&gt;
    &lt;/xsl:when&gt;

    &lt;xsl:when test="$targets"&gt;
      &lt;xsl:call-template name="tp:out-of-line-xlink"&gt;
        &lt;xsl:with-param name="document" select="root(.)"/&gt;
        &lt;xsl:with-param name="locators" select="$targets"/&gt;
      &lt;/xsl:call-template&gt;
    &lt;/xsl:when&gt;

    &lt;xsl:otherwise&gt;
      &lt;!-- It's just a normal, unlinked element --&gt;
      &lt;xsl:choose&gt;
        &lt;xsl:when test="empty($content)"&gt;
          &lt;xsl:apply-templates/&gt;
        &lt;/xsl:when&gt;
        &lt;xsl:otherwise&gt;
          &lt;xsl:sequence select="$content"/&gt;
        &lt;/xsl:otherwise&gt;
      &lt;/xsl:choose&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="*[@xlink:type = 'extended']" priority="100"&gt;
  &lt;xsl:choose&gt;
    &lt;xsl:when test="*[@xlink:type='resource']"&gt;
      &lt;xsl:apply-templates select="*[@xlink:type='resource']"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:message select="'Inline extended XLink with no resource:', ."/&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:template&gt;

&lt;!-- ============================================================ --&gt;

&lt;xsl:template name="tp:simple-xlink"&gt;
  &lt;xsl:param name="content"&gt;
    &lt;xsl:apply-templates/&gt;
  &lt;/xsl:param&gt;

  &lt;xsl:variable name="link"&gt;
    &lt;xsl:choose&gt;
      &lt;xsl:when test="@xlink:href
                      and (not(@xlink:type)
                           or @xlink:type='simple')"&gt;
        &lt;a&gt;
          &lt;xsl:if test="fp:pmuj-enabled(/)"&gt;
            &lt;xsl:attribute name="id" select="f:generate-id(.)"/&gt;
          &lt;/xsl:if&gt;

          &lt;xsl:if test="@xlink.title"&gt;
            &lt;xsl:attribute name="title" select="@xlink:title"/&gt;
          &lt;/xsl:if&gt;

          &lt;xsl:attribute name="href"&gt;
            &lt;xsl:choose&gt;
              &lt;!-- if the href starts with # and does not contain an "(" --&gt;
              &lt;!-- or if the href starts with #xpointer(id(, it's just an ID --&gt;
              &lt;xsl:when test="starts-with(@xlink:href,'#')
                              and (not(contains(@xlink:href,'&amp;#40;'))
                              or starts-with(@xlink:href,
                                             '#xpointer&amp;#40;id&amp;#40;'))"&gt;
                &lt;xsl:variable name="idref" select="f:xpointer-idref(@xlink:href)"/&gt;
                &lt;xsl:variable name="target" select="key('id',$idref)[1]"/&gt;

                &lt;xsl:choose&gt;
                  &lt;xsl:when test="not($target)"&gt;
                    &lt;xsl:message&gt;
                      &lt;xsl:text&gt;XLink to nonexistent id: &lt;/xsl:text&gt;
                      &lt;xsl:sequence select="@xlink:href/string()"/&gt;
                    &lt;/xsl:message&gt;
                    &lt;xsl:text&gt;???&lt;/xsl:text&gt;
                  &lt;/xsl:when&gt;
                  &lt;xsl:otherwise&gt;
                    &lt;xsl:attribute name="href" select="f:href(/,$target)"/&gt;
                  &lt;/xsl:otherwise&gt;
                &lt;/xsl:choose&gt;
              &lt;/xsl:when&gt;

              &lt;!-- otherwise it's a URI --&gt;
              &lt;xsl:otherwise&gt;
                &lt;xsl:sequence select="@xlink:href/string()"/&gt;
              &lt;/xsl:otherwise&gt;
            &lt;/xsl:choose&gt;
          &lt;/xsl:attribute&gt;
          &lt;xsl:copy-of select="$content"/&gt;
        &lt;/a&gt;
      &lt;/xsl:when&gt;
      &lt;xsl:otherwise&gt;
        &lt;xsl:copy-of select="$content"/&gt;
      &lt;/xsl:otherwise&gt;
    &lt;/xsl:choose&gt;
  &lt;/xsl:variable&gt;

  &lt;xsl:sequence select="$link"/&gt;
&lt;/xsl:template&gt;

&lt;!-- An "out-of-line" xlink. That is, this element is identified as the
     source of an arc. --&gt;
&lt;xsl:template name="tp:out-of-line-xlink"&gt;
  &lt;xsl:param name="document" as="document-node()" required="yes"/&gt;
  &lt;xsl:param name="locators" as="element()+" required="yes"/&gt;

  &lt;xsl:variable name="context" select="."/&gt;
  &lt;xsl:variable name="arcs"
                select="$locators/@arc ! key('genid', ., $document)"/&gt;

  &lt;xsl:variable name="to" as="node()*"&gt;
    &lt;xsl:for-each select="$arcs"&gt;
      &lt;xsl:variable name="arc" select="."/&gt;
      &lt;xsl:variable name="locators"
                    select="$arc/../*[@xlink:label = $arc/@xlink:to]"/&gt;
      &lt;xsl:for-each select="$locators"&gt;
        &lt;xsl:choose&gt;
          &lt;xsl:when test="@xlink:type = 'locator'"&gt;
            &lt;xsl:sequence select="."/&gt;
          &lt;/xsl:when&gt;
          &lt;xsl:when test="@xlink:type = 'resource'"&gt;
            &lt;generated xlink:type="locator"
                       xlink:href="{f:href($context, .)}"/&gt;
          &lt;/xsl:when&gt;
        &lt;/xsl:choose&gt;
      &lt;/xsl:for-each&gt;
    &lt;/xsl:for-each&gt;
  &lt;/xsl:variable&gt;

  &lt;xsl:choose&gt;
    &lt;xsl:when test="count($to) eq 1"&gt;
      &lt;a href="{$to/@xlink:href}"&gt;
        &lt;xsl:if test="$to/@xlink:title"&gt;
          &lt;xsl:attribute name="title" select="$to/@xlink:title/string()"/&gt;
        &lt;/xsl:if&gt;
        &lt;xsl:apply-templates/&gt;
      &lt;/a&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="f:xlink-style($document) = 'none'"&gt;
      &lt;xsl:apply-templates/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;span class="xlink"&gt;
        &lt;span class="source"&gt;
          &lt;xsl:apply-templates/&gt;
        &lt;/span&gt;
        &lt;span class="xlink-arc-list" db-arcs="{f:generate-id(.)}-arcs"/&gt;
        &lt;span class="nhrefs" id="{f:generate-id(.)}-arcs"&gt;
          &lt;span class="xlink-arc-delim before"&gt;
            &lt;xsl:sequence select="f:gentext(., 'separator', 'xlink-arclist-before')"/&gt;
          &lt;/span&gt;
          &lt;span class="xlink-arc-title"&gt;
            &lt;xsl:if test="$to/../@xlink:title"&gt;
              &lt;xsl:sequence select="$to/../@xlink:title/string()"/&gt;
            &lt;/xsl:if&gt;
          &lt;/span&gt;
          &lt;xsl:if test="$to/../@xlink:title"&gt;
            &lt;span class="xlink-arc-delim sep"&gt;
              &lt;xsl:sequence select="f:gentext(., 'separator', 'xlink-arclist-titlesep')"/&gt;
            &lt;/span&gt;
          &lt;/xsl:if&gt;
          &lt;xsl:for-each select="$to"&gt;
            &lt;xsl:if test="position() gt 1"&gt;
              &lt;span class="xlink-arc-delim sep"&gt;
                &lt;xsl:sequence select="f:gentext(., 'separator', 'xlink-arclist-sep')"/&gt;
              &lt;/span&gt;
            &lt;/xsl:if&gt;
            &lt;span class="arc"&gt;
              &lt;a href="{@xlink:href}"&gt;
                &lt;xsl:choose&gt;
                  &lt;xsl:when test="*[@xlink:type='title']"&gt;
                    &lt;xsl:apply-templates select="*[@xlink:type='title'][1]"/&gt;
                  &lt;/xsl:when&gt;
                  &lt;xsl:when test="@xlink:title"&gt;
                    &lt;xsl:sequence select="@xlink:title/string()"/&gt;
                  &lt;/xsl:when&gt;
                  &lt;xsl:otherwise&gt;
                    &lt;xsl:message
                        select="'Warning: inline extended link locator without title', ."/&gt;
                    &lt;xsl:text&gt;???&lt;/xsl:text&gt;
                  &lt;/xsl:otherwise&gt;
                &lt;/xsl:choose&gt;
              &lt;/a&gt;
            &lt;/span&gt;
          &lt;/xsl:for-each&gt;
          &lt;span class="xlink-arc-delim after"&gt;
            &lt;xsl:sequence select="f:gentext(., 'separator', 'xlink-arclist-after')"/&gt;
          &lt;/span&gt;
        &lt;/span&gt;
      &lt;/span&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:template&gt;

&lt;!-- An "out-of-line" pmuj. That is, this element is identified as the
     target of an arc. --&gt;
&lt;xsl:template match="*" mode="mp:out-of-line-pmuj"&gt;
  &lt;xsl:param name="document" as="document-node()" required="yes"/&gt;
  &lt;xsl:param name="locators" as="element()+" required="yes"/&gt;

  &lt;xsl:variable name="context" select="."/&gt;
  &lt;xsl:variable name="arcs"
                select="$locators/@arc ! key('genid', ., $document)"/&gt;

  &lt;xsl:variable name="from" as="node()*"&gt;
    &lt;xsl:for-each select="$arcs"&gt;
      &lt;xsl:variable name="arc" select="."/&gt;
      &lt;xsl:variable name="locators"
                    select="$arc/../*[@xlink:label = $arc/@xlink:from]"/&gt;
      &lt;xsl:for-each select="$locators"&gt;
        &lt;xsl:choose&gt;
          &lt;xsl:when test="@xlink:type = 'locator'"&gt;
            &lt;xsl:sequence select="."/&gt;
          &lt;/xsl:when&gt;
          &lt;xsl:when test="@xlink:type = 'resource'"&gt;
            &lt;generated xlink:type="locator"
                       xlink:href="{f:href($context, .)}"/&gt;
          &lt;/xsl:when&gt;
        &lt;/xsl:choose&gt;
      &lt;/xsl:for-each&gt;
    &lt;/xsl:for-each&gt;
  &lt;/xsl:variable&gt;

  &lt;xsl:sequence select="$from"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:function name="f:xpointer-idref" as="xs:string?"&gt;
  &lt;xsl:param name="xpointer"/&gt;

  &lt;xsl:choose&gt;
    &lt;xsl:when test="starts-with($xpointer, '#xpointer(id(')"&gt;
      &lt;xsl:variable name="rest"
                    select="substring-after($xpointer, '#xpointer(id(')"/&gt;
      &lt;xsl:variable name="quote" select="substring($rest, 1, 1)"/&gt;
      &lt;xsl:sequence select="substring-before(substring-after($xpointer, $quote), $quote)"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="starts-with($xpointer, '#')"&gt;
      &lt;xsl:sequence select="substring-after($xpointer, '#')"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;!-- otherwise it's a pointer to some other document --&gt;
      &lt;xsl:sequence select="()"/&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:function&gt;

&lt;!-- ============================================================ --&gt;

&lt;xsl:template match="*" mode="mp:xlink-sources"&gt;
  &lt;xsl:for-each select="*[@xlink:type='arc' and @xlink:from and @xlink:to]"&gt;
    &lt;xsl:variable name="arc" select="."/&gt;
    &lt;xsl:variable name="from-label" select="@xlink:from"/&gt;
    &lt;xsl:variable name="from-locator" select="../*[@xlink:label = $from-label]"/&gt;

    &lt;xsl:variable name="sources" as="element()*"&gt;
      &lt;xsl:for-each select="$from-locator"&gt;
        &lt;xsl:choose&gt;
          &lt;xsl:when test="@xlink:href"&gt;
            &lt;xsl:sequence
                select="fp:find-xlink-nodes(root(.), @xlink:href, map { })"/&gt;
          &lt;/xsl:when&gt;
          &lt;xsl:when test="@xlink:type='resource'"&gt;
            &lt;source&gt;
              &lt;xsl:attribute name="xml:id" select="generate-id(.)"/&gt;
            &lt;/source&gt;
          &lt;/xsl:when&gt;
          &lt;xsl:otherwise&gt;
            &lt;xsl:message&gt;
              &lt;xsl:text&gt;XLink locator without @xlink:href &lt;/xsl:text&gt;
              &lt;xsl:text&gt;that isn’t a resource? &lt;/xsl:text&gt;
              &lt;xsl:sequence select="."/&gt;
            &lt;/xsl:message&gt;
          &lt;/xsl:otherwise&gt;
        &lt;/xsl:choose&gt;
      &lt;/xsl:for-each&gt;
    &lt;/xsl:variable&gt;

    &lt;xsl:for-each select="$sources"&gt;
      &lt;xsl:copy&gt;
        &lt;xsl:sequence select="@*"/&gt;
        &lt;xsl:attribute name="arc" select="generate-id($arc)"/&gt;
      &lt;/xsl:copy&gt;
    &lt;/xsl:for-each&gt;
  &lt;/xsl:for-each&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="*" mode="mp:xlink-targets"&gt;
  &lt;xsl:for-each select="*[@xlink:type='arc' and @xlink:from and @xlink:to]"&gt;
    &lt;xsl:variable name="arc" select="."/&gt;
    &lt;xsl:variable name="to-label" select="@xlink:to"/&gt;
    &lt;xsl:variable name="to-locator" select="../*[@xlink:label = $to-label]"/&gt;

    &lt;xsl:variable name="sources" as="element()*"&gt;
      &lt;xsl:for-each select="$to-locator"&gt;
        &lt;xsl:choose&gt;
          &lt;xsl:when test="@xlink:href"&gt;
            &lt;xsl:sequence
                select="fp:find-xlink-nodes(root(.), @xlink:href, map { })"/&gt;
          &lt;/xsl:when&gt;
          &lt;xsl:when test="@xlink:type='resource'"&gt;
            &lt;source&gt;
              &lt;xsl:attribute name="xml:id" select="generate-id(.)"/&gt;
            &lt;/source&gt;
          &lt;/xsl:when&gt;
          &lt;xsl:otherwise&gt;
            &lt;xsl:message&gt;
              &lt;xsl:text&gt;XLink locator without @xlink:href &lt;/xsl:text&gt;
              &lt;xsl:text&gt;that isn’t a resource? &lt;/xsl:text&gt;
              &lt;xsl:sequence select="."/&gt;
            &lt;/xsl:message&gt;
          &lt;/xsl:otherwise&gt;
        &lt;/xsl:choose&gt;
      &lt;/xsl:for-each&gt;
    &lt;/xsl:variable&gt;

    &lt;xsl:for-each select="$sources"&gt;
      &lt;xsl:copy&gt;
        &lt;xsl:sequence select="@*"/&gt;
        &lt;xsl:attribute name="arc" select="generate-id($arc)"/&gt;
      &lt;/xsl:copy&gt;
    &lt;/xsl:for-each&gt;
  &lt;/xsl:for-each&gt;
&lt;/xsl:template&gt;

&lt;!-- ============================================================ --&gt;

&lt;xsl:template match="*" mode="mp:locator"&gt;
  &lt;source&gt;
    &lt;xsl:attribute name="xml:id" select="generate-id(.)"/&gt;
    &lt;xsl:attribute name="hint"
                   select="node-name(.)
                           || (if (@xml:id) then '/' || @xml:id else '')
                           || ': '
                           || (if (string-length(string(.)) gt 10)
                               then substring(string(.), 1, 10) || '…'
                               else string(.))"/&gt;
  &lt;/source&gt;
&lt;/xsl:template&gt;

&lt;xsl:function name="fp:find-xlink-nodes"&gt;
  &lt;xsl:param name="document" as="document-node()"/&gt;
  &lt;xsl:param name="locator" as="xs:string"/&gt;
  &lt;xsl:param name="nsmap" as="map(*)"/&gt;

  &lt;xsl:variable name="locator" select="normalize-space($locator)"/&gt;

  &lt;xsl:choose&gt;
    &lt;xsl:when test="$locator = ''"/&gt;
    &lt;xsl:when test="starts-with($locator, '#')"&gt;
      &lt;xsl:variable name="id"
                    select="if (contains($locator, ' '))
                            then substring-before(substring($locator, 2), ' ')
                            else substring($locator, 2)"/&gt;
      &lt;xsl:apply-templates select="key('id', $id, $document)" mode="mp:locator"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="matches($locator, '^\c+\s*\(.*?\)')"&gt;
      &lt;xsl:variable name="scheme"
                    select="replace($locator, '^(\c+\s*\(.*?\)).*', '$1')"/&gt;
      &lt;xsl:variable name="rest"
                    select="substring($locator, string-length($scheme)+1)"/&gt;
      &lt;xsl:variable name="name"
                    select="replace($scheme, '^(\c+).*?$', '$1')"/&gt;

      &lt;xsl:choose&gt;
        &lt;xsl:when test="$name eq 'xmlns'"&gt;
          &lt;xsl:sequence select="fp:xlink-xmlns-scheme($document, $locator, $nsmap, $scheme, $rest)"/&gt;
        &lt;/xsl:when&gt;
        &lt;xsl:when test="$name eq 'xpath'"&gt;
          &lt;xsl:sequence select="fp:xlink-xpath-scheme($document, $locator, $nsmap, $scheme, $rest)"/&gt;
        &lt;/xsl:when&gt;
        &lt;xsl:otherwise&gt;
          &lt;xsl:message use-when="'xlink' = $v:debug"
                       select="'Ignoring unknown xpointer scheme: ' || $name"/&gt;
          &lt;xsl:sequence select="fp:find-xlink-nodes($document, $rest, $nsmap)"/&gt;
        &lt;/xsl:otherwise&gt;
      &lt;/xsl:choose&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:message use-when="'xlink' = $v:debug"
                   select="'Ignoring unrecognized xpointer: ' || $locator"/&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="fp:xlink-xmlns-scheme"&gt;
  &lt;xsl:param name="document" as="document-node()"/&gt;
  &lt;xsl:param name="locator" as="xs:string"/&gt;
  &lt;xsl:param name="nsmap" as="map(*)"/&gt;
  &lt;xsl:param name="scheme" as="xs:string"/&gt;
  &lt;xsl:param name="href" as="xs:string"/&gt;

  &lt;xsl:choose&gt;
    &lt;xsl:when test="matches($scheme, $vp:xmlns-scheme)"&gt;
      &lt;xsl:variable name="prefix" select="replace($scheme, $vp:xmlns-scheme, '$1')"/&gt;
      &lt;xsl:variable name="uri" select="replace($scheme, $vp:xmlns-scheme, '$2')"/&gt;

      &lt;!-- You can't put : in URIs...? --&gt;
      &lt;xsl:variable name="uri" select="replace($uri, '%3A', ':', 'i')"/&gt;

      &lt;xsl:message use-when="'xlink' = $v:debug"
                   select="'xpointer: xmlns('||$prefix||'='||$uri||')'"/&gt;
      &lt;xsl:sequence
          select="fp:find-xlink-nodes($document, $href,
                                      map:merge(($nsmap, map:entry($prefix, $uri))))"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:message use-when="'xlink' = $v:debug"
                   select="'Unparseable xpointer scheme: ' || $scheme"/&gt;
      &lt;xsl:sequence select="fp:find-xlink-nodes($document, $href, $nsmap)"/&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="fp:xlink-xpath-scheme"&gt;
  &lt;xsl:param name="document" as="document-node()"/&gt;
  &lt;xsl:param name="locator" as="xs:string"/&gt;
  &lt;xsl:param name="nsmap" as="map(*)"/&gt;
  &lt;xsl:param name="scheme" as="xs:string"/&gt;
  &lt;xsl:param name="href" as="xs:string"/&gt;

  &lt;xsl:choose&gt;
    &lt;xsl:when test="matches($scheme, $vp:xpath-scheme)"&gt;
      &lt;xsl:variable name="expr" select="replace($scheme, $vp:xpath-scheme, '$1')"/&gt;

      &lt;!-- You can't put [ and ] in URIs; so they're escaped, so unescape them --&gt;
      &lt;xsl:variable name="expr" select="replace($expr, '%5B', '[', 'i')"/&gt;
      &lt;xsl:variable name="expr" select="replace($expr, '%5D', ']', 'i')"/&gt;

      &lt;xsl:message use-when="'xlink' = $v:debug"
                   select="'xpointer: xpath('||$expr||')'"/&gt;

      &lt;!-- Construct the namespace context --&gt;
      &lt;xsl:variable name="nscontext" as="element()"&gt;
        &lt;context&gt;
          &lt;xsl:for-each select="map:keys($nsmap)"&gt;
            &lt;xsl:namespace name="{.}" select="map:get($nsmap, .)"/&gt;
          &lt;/xsl:for-each&gt;
        &lt;/context&gt;
      &lt;/xsl:variable&gt;

      &lt;xsl:variable name="found" as="node()*"&gt;
        &lt;xsl:evaluate context-item="$document" xpath="$expr"
                      namespace-context="$nscontext"/&gt;
      &lt;/xsl:variable&gt;

      &lt;xsl:choose&gt;
        &lt;xsl:when test="empty($found)"&gt;
          &lt;xsl:message use-when="'xlink' = $v:debug"
                       select="'No nodes found for xpath scheme: ' || $expr"/&gt;
          &lt;xsl:sequence select="fp:find-xlink-nodes($document, $href, $nsmap)"/&gt;
        &lt;/xsl:when&gt;
        &lt;xsl:otherwise&gt;
          &lt;xsl:apply-templates select="$found" mode="mp:locator"/&gt;
        &lt;/xsl:otherwise&gt;
      &lt;/xsl:choose&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:message use-when="'xlink' = $v:debug"
                   select="'Unparseable xpath scheme: ' || $scheme"/&gt;
      &lt;xsl:sequence select="fp:find-xlink-nodes($document, $href, $nsmap)"/&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:function&gt;

&lt;/xsl:stylesheet&gt;
</code></pre></td></tr></table></div></div></div></div><div class="stylesheet" id="S-10318"><h3>links.xsl</h3><p><span><span class="template all">8 templates</span></span></p><div class="instructions"><div class="title closed">Instructions</div><div class="body"><div id="S-10318-t-1" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:anchor</div><div class="props"><div class="calls">Calls: <a href="#S-9504-docbook.org.ns.docbook.templates.inline">t:inline</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:anchor</code></div></div></div><div id="S-10318-t-2" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:biblioref</div><div class="props"><div class="calls">Calls: <a href="#S-10318-docbook.org.ns.docbook.templates.private.xref">tp:xref</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:biblioref</code></div></div></div><div id="S-10318-t-3" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:link</div><div class="props"><div class="calls">Calls: <a href="#S-28936-docbook.org.ns.docbook.functions.href,2">f:href()</a></div><div class="calls">Calls: <a href="#S-10318-docbook.org.ns.docbook.templates.private.link">tp:link</a>, <a href="#S-10318-docbook.org.ns.docbook.templates.private.xref">tp:xref</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:link</code></div></div></div><div id="S-10318-t-4" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ *</div><div class="props"><div class="calls">Calls: <a href="#S-10318-docbook.org.ns.docbook.templates.private.link">tp:link</a></div><div class="mode">Mode: <code>m:link</code></div><div class="matches">Matches: <code>*</code></div></div></div><div id="S-10318-t-5" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:firstterm|db:glossterm</div><div class="props"><div class="calls">Calls: <a href="#S-28936-docbook.org.ns.docbook.functions.href,2">f:href()</a></div><div class="calls">Calls: <a href="#S-10318-docbook.org.ns.docbook.templates.private.link">tp:link</a></div><div class="mode">Mode: <code>m:link</code></div><div class="matches">Matches: <code>db:firstterm</code>, <code>db:glossterm</code></div></div></div><div id="S-10318-docbook.org.ns.docbook.templates.private.link" class="instruction template"><div class="title"><span class="link"></span>Template tp:link  match ≅ </div><div class="props"><div class="calls">Calls: <a href="#S-29523-docbook.org.ns.docbook.functions.private.pmuj-enabled,1">fp:pmuj-enabled()</a>, <a href="#S-28936-docbook.org.ns.docbook.functions.generate-id,1">f:generate-id()</a>, <a href="#S-28936-docbook.org.ns.docbook.functions.href,2">f:href()</a>, <a href="#S-28936-docbook.org.ns.docbook.functions.target,2">f:target()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-10318-t-3">template</a>, <a href="#S-10318-t-4">template</a>, <a href="#S-10318-t-5">template</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-10318">modules/links.xsl</a></div><div class="mode">Mode: <code>m:docbook</code></div></div></div><div id="S-10318-docbook.org.ns.docbook.templates.private.xref" class="instruction template"><div class="title"><span class="link"></span>Template tp:xref  match ≅ db:xref</div><div class="props"><div class="calls">Calls: <a href="#S-29523-docbook.org.ns.docbook.functions.private.pmuj-enabled,1">fp:pmuj-enabled()</a>, <a href="#S-28936-docbook.org.ns.docbook.functions.generate-id,1">f:generate-id()</a>, <a href="#S-28936-docbook.org.ns.docbook.functions.id,1">f:id()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-10318-t-2">template</a>, <a href="#S-10318-t-3">template</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-10318">modules/links.xsl</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:xref</code></div></div></div><div id="S-10318-t-8" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:olink</div><div class="props"><div class="uses">Uses: <a href="#S-23412-docbook.org.ns.docbook.variables.olink-databases">$v:olink-databases</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:olink</code></div></div></div></div></div><div class="source-code"><div class="title closed">Source code</div><div class="body"><div><table><tr><td valign="top" align="right"><pre class="fake-prism"><span id="line-S-10318-1">1</span>
<span id="line-S-10318-2"><span class="lno">2</span></span>
<span id="line-S-10318-3"><span class="lno">3</span></span>
<span id="line-S-10318-4"><span class="lno">4</span></span>
<span id="line-S-10318-5">5</span>
<span id="line-S-10318-6"><span class="lno">6</span></span>
<span id="line-S-10318-7"><span class="lno">7</span></span>
<span id="line-S-10318-8"><span class="lno">8</span></span>
<span id="line-S-10318-9"><span class="lno">9</span></span>
<span id="line-S-10318-10">10</span>
<span id="line-S-10318-11"><span class="lno">11</span></span>
<span id="line-S-10318-12"><span class="lno">12</span></span>
<span id="line-S-10318-13"><span class="lno">13</span></span>
<span id="line-S-10318-14"><span class="lno">14</span></span>
<span id="line-S-10318-15">15</span>
<span id="line-S-10318-16"><span class="lno">16</span></span>
<span id="line-S-10318-17"><span class="lno">17</span></span>
<span id="line-S-10318-18"><span class="lno">18</span></span>
<span id="line-S-10318-19"><span class="lno">19</span></span>
<span id="line-S-10318-20">20</span>
<span id="line-S-10318-21"><span class="lno">21</span></span>
<span id="line-S-10318-22"><span class="lno">22</span></span>
<span id="line-S-10318-23"><span class="lno">23</span></span>
<span id="line-S-10318-24"><span class="lno">24</span></span>
<span id="line-S-10318-25">25</span>
<span id="line-S-10318-26"><span class="lno">26</span></span>
<span id="line-S-10318-27"><span class="lno">27</span></span>
<span id="line-S-10318-28"><span class="lno">28</span></span>
<span id="line-S-10318-29"><span class="lno">29</span></span>
<span id="line-S-10318-30">30</span>
<span id="line-S-10318-31"><span class="lno">31</span></span>
<span id="line-S-10318-32"><span class="lno">32</span></span>
<span id="line-S-10318-33"><span class="lno">33</span></span>
<span id="line-S-10318-34"><span class="lno">34</span></span>
<span id="line-S-10318-35">35</span>
<span id="line-S-10318-36"><span class="lno">36</span></span>
<span id="line-S-10318-37"><span class="lno">37</span></span>
<span id="line-S-10318-38"><span class="lno">38</span></span>
<span id="line-S-10318-39"><span class="lno">39</span></span>
<span id="line-S-10318-40">40</span>
<span id="line-S-10318-41"><span class="lno">41</span></span>
<span id="line-S-10318-42"><span class="lno">42</span></span>
<span id="line-S-10318-43"><span class="lno">43</span></span>
<span id="line-S-10318-44"><span class="lno">44</span></span>
<span id="line-S-10318-45">45</span>
<span id="line-S-10318-46"><span class="lno">46</span></span>
<span id="line-S-10318-47"><span class="lno">47</span></span>
<span id="line-S-10318-48"><span class="lno">48</span></span>
<span id="line-S-10318-49"><span class="lno">49</span></span>
<span id="line-S-10318-50">50</span>
<span id="line-S-10318-51"><span class="lno">51</span></span>
<span id="line-S-10318-52"><span class="lno">52</span></span>
<span id="line-S-10318-53"><span class="lno">53</span></span>
<span id="line-S-10318-54"><span class="lno">54</span></span>
<span id="line-S-10318-55">55</span>
<span id="line-S-10318-56"><span class="lno">56</span></span>
<span id="line-S-10318-57"><span class="lno">57</span></span>
<span id="line-S-10318-58"><span class="lno">58</span></span>
<span id="line-S-10318-59"><span class="lno">59</span></span>
<span id="line-S-10318-60">60</span>
<span id="line-S-10318-61"><span class="lno">61</span></span>
<span id="line-S-10318-62"><span class="lno">62</span></span>
<span id="line-S-10318-63"><span class="lno">63</span></span>
<span id="line-S-10318-64"><span class="lno">64</span></span>
<span id="line-S-10318-65">65</span>
<span id="line-S-10318-66"><span class="lno">66</span></span>
<span id="line-S-10318-67"><span class="lno">67</span></span>
<span id="line-S-10318-68"><span class="lno">68</span></span>
<span id="line-S-10318-69"><span class="lno">69</span></span>
<span id="line-S-10318-70">70</span>
<span id="line-S-10318-71"><span class="lno">71</span></span>
<span id="line-S-10318-72"><span class="lno">72</span></span>
<span id="line-S-10318-73"><span class="lno">73</span></span>
<span id="line-S-10318-74"><span class="lno">74</span></span>
<span id="line-S-10318-75">75</span>
<span id="line-S-10318-76"><span class="lno">76</span></span>
<span id="line-S-10318-77"><span class="lno">77</span></span>
<span id="line-S-10318-78"><span class="lno">78</span></span>
<span id="line-S-10318-79"><span class="lno">79</span></span>
<span id="line-S-10318-80">80</span>
<span id="line-S-10318-81"><span class="lno">81</span></span>
<span id="line-S-10318-82"><span class="lno">82</span></span>
<span id="line-S-10318-83"><span class="lno">83</span></span>
<span id="line-S-10318-84"><span class="lno">84</span></span>
<span id="line-S-10318-85">85</span>
<span id="line-S-10318-86"><span class="lno">86</span></span>
<span id="line-S-10318-87"><span class="lno">87</span></span>
<span id="line-S-10318-88"><span class="lno">88</span></span>
<span id="line-S-10318-89"><span class="lno">89</span></span>
<span id="line-S-10318-90">90</span>
<span id="line-S-10318-91"><span class="lno">91</span></span>
<span id="line-S-10318-92"><span class="lno">92</span></span>
<span id="line-S-10318-93"><span class="lno">93</span></span>
<span id="line-S-10318-94"><span class="lno">94</span></span>
<span id="line-S-10318-95">95</span>
<span id="line-S-10318-96"><span class="lno">96</span></span>
<span id="line-S-10318-97"><span class="lno">97</span></span>
<span id="line-S-10318-98"><span class="lno">98</span></span>
<span id="line-S-10318-99"><span class="lno">99</span></span>
<span id="line-S-10318-100">100</span>
<span id="line-S-10318-101"><span class="lno">101</span></span>
<span id="line-S-10318-102"><span class="lno">102</span></span>
<span id="line-S-10318-103"><span class="lno">103</span></span>
<span id="line-S-10318-104"><span class="lno">104</span></span>
<span id="line-S-10318-105">105</span>
<span id="line-S-10318-106"><span class="lno">106</span></span>
<span id="line-S-10318-107"><span class="lno">107</span></span>
<span id="line-S-10318-108"><span class="lno">108</span></span>
<span id="line-S-10318-109"><span class="lno">109</span></span>
<span id="line-S-10318-110">110</span>
<span id="line-S-10318-111"><span class="lno">111</span></span>
<span id="line-S-10318-112"><span class="lno">112</span></span>
<span id="line-S-10318-113"><span class="lno">113</span></span>
<span id="line-S-10318-114"><span class="lno">114</span></span>
<span id="line-S-10318-115">115</span>
<span id="line-S-10318-116"><span class="lno">116</span></span>
<span id="line-S-10318-117"><span class="lno">117</span></span>
<span id="line-S-10318-118"><span class="lno">118</span></span>
<span id="line-S-10318-119"><span class="lno">119</span></span>
<span id="line-S-10318-120">120</span>
<span id="line-S-10318-121"><span class="lno">121</span></span>
<span id="line-S-10318-122"><span class="lno">122</span></span>
<span id="line-S-10318-123"><span class="lno">123</span></span>
<span id="line-S-10318-124"><span class="lno">124</span></span>
<span id="line-S-10318-125">125</span>
<span id="line-S-10318-126"><span class="lno">126</span></span>
<span id="line-S-10318-127"><span class="lno">127</span></span>
<span id="line-S-10318-128"><span class="lno">128</span></span>
<span id="line-S-10318-129"><span class="lno">129</span></span>
<span id="line-S-10318-130">130</span>
<span id="line-S-10318-131"><span class="lno">131</span></span>
<span id="line-S-10318-132"><span class="lno">132</span></span>
<span id="line-S-10318-133"><span class="lno">133</span></span>
<span id="line-S-10318-134"><span class="lno">134</span></span>
<span id="line-S-10318-135">135</span>
<span id="line-S-10318-136"><span class="lno">136</span></span>
<span id="line-S-10318-137"><span class="lno">137</span></span>
<span id="line-S-10318-138"><span class="lno">138</span></span>
<span id="line-S-10318-139"><span class="lno">139</span></span>
<span id="line-S-10318-140">140</span>
<span id="line-S-10318-141"><span class="lno">141</span></span>
<span id="line-S-10318-142"><span class="lno">142</span></span>
<span id="line-S-10318-143"><span class="lno">143</span></span>
<span id="line-S-10318-144"><span class="lno">144</span></span>
<span id="line-S-10318-145">145</span>
<span id="line-S-10318-146"><span class="lno">146</span></span>
<span id="line-S-10318-147"><span class="lno">147</span></span>
<span id="line-S-10318-148"><span class="lno">148</span></span>
<span id="line-S-10318-149"><span class="lno">149</span></span>
<span id="line-S-10318-150">150</span>
<span id="line-S-10318-151"><span class="lno">151</span></span>
<span id="line-S-10318-152"><span class="lno">152</span></span>
<span id="line-S-10318-153"><span class="lno">153</span></span>
<span id="line-S-10318-154"><span class="lno">154</span></span>
<span id="line-S-10318-155">155</span>
<span id="line-S-10318-156"><span class="lno">156</span></span>
<span id="line-S-10318-157"><span class="lno">157</span></span>
<span id="line-S-10318-158"><span class="lno">158</span></span>
<span id="line-S-10318-159"><span class="lno">159</span></span>
<span id="line-S-10318-160">160</span>
<span id="line-S-10318-161"><span class="lno">161</span></span>
<span id="line-S-10318-162"><span class="lno">162</span></span>
<span id="line-S-10318-163"><span class="lno">163</span></span>
<span id="line-S-10318-164"><span class="lno">164</span></span>
<span id="line-S-10318-165">165</span>
<span id="line-S-10318-166"><span class="lno">166</span></span>
<span id="line-S-10318-167"><span class="lno">167</span></span>
<span id="line-S-10318-168"><span class="lno">168</span></span>
<span id="line-S-10318-169"><span class="lno">169</span></span>
<span id="line-S-10318-170">170</span>
<span id="line-S-10318-171"><span class="lno">171</span></span>
<span id="line-S-10318-172"><span class="lno">172</span></span>
<span id="line-S-10318-173"><span class="lno">173</span></span>
<span id="line-S-10318-174"><span class="lno">174</span></span>
<span id="line-S-10318-175">175</span>
<span id="line-S-10318-176"><span class="lno">176</span></span>
<span id="line-S-10318-177"><span class="lno">177</span></span>
<span id="line-S-10318-178"><span class="lno">178</span></span>
<span id="line-S-10318-179"><span class="lno">179</span></span>
<span id="line-S-10318-180">180</span>
<span id="line-S-10318-181"><span class="lno">181</span></span>
<span id="line-S-10318-182"><span class="lno">182</span></span>
<span id="line-S-10318-183"><span class="lno">183</span></span>
<span id="line-S-10318-184"><span class="lno">184</span></span>
<span id="line-S-10318-185">185</span>
<span id="line-S-10318-186"><span class="lno">186</span></span>
<span id="line-S-10318-187"><span class="lno">187</span></span>
<span id="line-S-10318-188"><span class="lno">188</span></span>
<span id="line-S-10318-189"><span class="lno">189</span></span>
<span id="line-S-10318-190">190</span>
<span id="line-S-10318-191"><span class="lno">191</span></span>
<span id="line-S-10318-192"><span class="lno">192</span></span>
<span id="line-S-10318-193"><span class="lno">193</span></span>
<span id="line-S-10318-194"><span class="lno">194</span></span>
<span id="line-S-10318-195">195</span>
<span id="line-S-10318-196"><span class="lno">196</span></span>
<span id="line-S-10318-197"><span class="lno">197</span></span>
<span id="line-S-10318-198"><span class="lno">198</span></span>
<span id="line-S-10318-199"><span class="lno">199</span></span>
<span id="line-S-10318-200">200</span>
<span id="line-S-10318-201"><span class="lno">201</span></span>
<span id="line-S-10318-202"><span class="lno">202</span></span>
<span id="line-S-10318-203"><span class="lno">203</span></span>
<span id="line-S-10318-204"><span class="lno">204</span></span>
<span id="line-S-10318-205">205</span>
<span id="line-S-10318-206"><span class="lno">206</span></span>
<span id="line-S-10318-207"><span class="lno">207</span></span>
<span id="line-S-10318-208"><span class="lno">208</span></span>
<span id="line-S-10318-209"><span class="lno">209</span></span>
<span id="line-S-10318-210">210</span>
<span id="line-S-10318-211"><span class="lno">211</span></span>
<span id="line-S-10318-212"><span class="lno">212</span></span>
<span id="line-S-10318-213"><span class="lno">213</span></span>
<span id="line-S-10318-214"><span class="lno">214</span></span>
<span id="line-S-10318-215">215</span>
<span id="line-S-10318-216"><span class="lno">216</span></span>
<span id="line-S-10318-217"><span class="lno">217</span></span>
<span id="line-S-10318-218"><span class="lno">218</span></span>
<span id="line-S-10318-219"><span class="lno">219</span></span>
<span id="line-S-10318-220">220</span>
<span id="line-S-10318-221"><span class="lno">221</span></span>
<span id="line-S-10318-222"><span class="lno">222</span></span>
<span id="line-S-10318-223"><span class="lno">223</span></span>
<span id="line-S-10318-224"><span class="lno">224</span></span>
<span id="line-S-10318-225">225</span>
<span id="line-S-10318-226"><span class="lno">226</span></span>
<span id="line-S-10318-227"><span class="lno">227</span></span>
<span id="line-S-10318-228"><span class="lno">228</span></span>
<span id="line-S-10318-229"><span class="lno">229</span></span>
<span id="line-S-10318-230">230</span>
<span id="line-S-10318-231"><span class="lno">231</span></span>
<span id="line-S-10318-232"><span class="lno">232</span></span>
<span id="line-S-10318-233"><span class="lno">233</span></span>
<span id="line-S-10318-234"><span class="lno">234</span></span>
<span id="line-S-10318-235">235</span>
<span id="line-S-10318-236"><span class="lno">236</span></span>
<span id="line-S-10318-237"><span class="lno">237</span></span>
<span id="line-S-10318-238"><span class="lno">238</span></span>
<span id="line-S-10318-239"><span class="lno">239</span></span>
<span id="line-S-10318-240">240</span>
<span id="line-S-10318-241"><span class="lno">241</span></span>
<span id="line-S-10318-242"><span class="lno">242</span></span>
<span id="line-S-10318-243"><span class="lno">243</span></span>
<span id="line-S-10318-244"><span class="lno">244</span></span>
<span id="line-S-10318-245">245</span>
<span id="line-S-10318-246"><span class="lno">246</span></span>
<span id="line-S-10318-247"><span class="lno">247</span></span>
<span id="line-S-10318-248"><span class="lno">248</span></span>
<span id="line-S-10318-249"><span class="lno">249</span></span>
<span id="line-S-10318-250">250</span>
<span id="line-S-10318-251"><span class="lno">251</span></span>
<span id="line-S-10318-252"><span class="lno">252</span></span>
<span id="line-S-10318-253"><span class="lno">253</span></span>
<span id="line-S-10318-254"><span class="lno">254</span></span>
<span id="line-S-10318-255">255</span>
<span id="line-S-10318-256"><span class="lno">256</span></span>
<span id="line-S-10318-257"><span class="lno">257</span></span>
<span id="line-S-10318-258"><span class="lno">258</span></span>
<span id="line-S-10318-259"><span class="lno">259</span></span>
<span id="line-S-10318-260">260</span>
<span id="line-S-10318-261"><span class="lno">261</span></span>
<span id="line-S-10318-262"><span class="lno">262</span></span>
<span id="line-S-10318-263"><span class="lno">263</span></span>
<span id="line-S-10318-264"><span class="lno">264</span></span>
<span id="line-S-10318-265">265</span>
<span id="line-S-10318-266"><span class="lno">266</span></span>
<span id="line-S-10318-267"><span class="lno">267</span></span>
<span id="line-S-10318-268"><span class="lno">268</span></span>
<span id="line-S-10318-269"><span class="lno">269</span></span>
<span id="line-S-10318-270">270</span>
<span id="line-S-10318-271"><span class="lno">271</span></span>
<span id="line-S-10318-272"><span class="lno">272</span></span>
</pre></td><td valign="top"><pre><code class="language-xml">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                xmlns:db="http://docbook.org/ns/docbook"
                xmlns:f="http://docbook.org/ns/docbook/functions"
                xmlns:fp="http://docbook.org/ns/docbook/functions/private"
                xmlns:h="http://www.w3.org/1999/xhtml"
                xmlns:m="http://docbook.org/ns/docbook/modes"
                xmlns:t="http://docbook.org/ns/docbook/templates"
                xmlns:tp="http://docbook.org/ns/docbook/templates/private"
                xmlns:v="http://docbook.org/ns/docbook/variables"
                xmlns:xlink='http://www.w3.org/1999/xlink'
                xmlns:xs="http://www.w3.org/2001/XMLSchema"
                xmlns="http://www.w3.org/1999/xhtml"
                default-mode="m:docbook"
                exclude-result-prefixes="db f fp h m t tp v xlink xs"
                version="3.0"&gt;

&lt;xsl:template match="db:anchor"&gt;
  &lt;xsl:call-template name="t:inline"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:biblioref"&gt;
  &lt;xsl:call-template name="tp:xref"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:link"&gt;
  &lt;xsl:choose&gt;
    &lt;xsl:when test="@linkend and empty(node())"&gt;
      &lt;xsl:call-template name="tp:xref"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="@linkend"&gt;
      &lt;xsl:variable name="linkend"
                    select="(@linkend,
                            if (starts-with(@xlink:href, '#'))
                            then substring-after(@xlink:href, '#')
                            else ())[1]"/&gt;
      &lt;xsl:variable name="target"
                    select="if ($linkend)
                            then key('id', $linkend)[1]
                            else ()"/&gt;
      &lt;xsl:choose&gt;
        &lt;xsl:when test="empty($target)"&gt;
          &lt;xsl:message select="'Link to non-existent ID: ' || $linkend"/&gt;
          &lt;xsl:sequence select="'[???' || $linkend || '???]'"/&gt;
        &lt;/xsl:when&gt;
        &lt;xsl:otherwise&gt;
          &lt;xsl:call-template name="tp:link"&gt;
            &lt;xsl:with-param name="href" select="f:href(., $target)"/&gt;
            &lt;xsl:with-param name="content" as="node()*"&gt;
              &lt;xsl:apply-templates select="node()"/&gt;
            &lt;/xsl:with-param&gt;
          &lt;/xsl:call-template&gt;
        &lt;/xsl:otherwise&gt;
      &lt;/xsl:choose&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:call-template name="tp:link"&gt;
        &lt;xsl:with-param name="content" as="item()*"&gt;
          &lt;xsl:choose&gt;
            &lt;xsl:when test="empty(node())"&gt;
              &lt;xsl:sequence select="@xlink:href/string()"/&gt;
            &lt;/xsl:when&gt;
            &lt;xsl:otherwise&gt;
              &lt;xsl:apply-templates select="node()"/&gt;
            &lt;/xsl:otherwise&gt;
          &lt;/xsl:choose&gt;
        &lt;/xsl:with-param&gt;
      &lt;/xsl:call-template&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="*" mode="m:link"&gt;
  &lt;xsl:param name="primary-markup" select="false()"/&gt;
  &lt;xsl:param name="content" as="item()*"/&gt;

  &lt;xsl:choose&gt;
    &lt;xsl:when test="@linkend"&gt;
      &lt;xsl:call-template name="tp:link"&gt;
        &lt;xsl:with-param name="primary-markup" select="$primary-markup"/&gt;
        &lt;xsl:with-param name="href" select="'#' || @linkend"/&gt;
        &lt;xsl:with-param name="content" select="$content"/&gt;
      &lt;/xsl:call-template&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="@xlink:href"&gt;
      &lt;xsl:call-template name="tp:link"&gt;
        &lt;xsl:with-param name="primary-markup" select="$primary-markup"/&gt;
        &lt;xsl:with-param name="href" select="@xlink:href/string()"/&gt;
        &lt;xsl:with-param name="content" select="$content"/&gt;
      &lt;/xsl:call-template&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:sequence select="$content"/&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:firstterm|db:glossterm" mode="m:link"&gt;
  &lt;xsl:variable name="target"
                select="key('glossterm', (@baseform,normalize-space(.))[1])"/&gt;

  &lt;xsl:choose&gt;
    &lt;xsl:when test="empty($target)"&gt;
      &lt;xsl:message select="'Gloss term has no entry:',
                           (@baseform/string(), normalize-space(.))[1]"/&gt;
      &lt;xsl:apply-templates/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:if test="count($target) gt 1"&gt;
        &lt;xsl:message select="'Gloss term has multiple entries:',
                             (@baseform/string(), normalize-space(.))[1]"/&gt;
      &lt;/xsl:if&gt;
      &lt;xsl:call-template name="tp:link"&gt;
        &lt;xsl:with-param name="primary-markup" select="false()"/&gt;
        &lt;xsl:with-param name="href" select="f:href(., $target)"/&gt;
        &lt;xsl:with-param name="content" as="item()*"&gt;
          &lt;xsl:apply-templates/&gt;
        &lt;/xsl:with-param&gt;
      &lt;/xsl:call-template&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:template&gt;

&lt;xsl:template name="tp:link"&gt;
  &lt;xsl:param name="title" select="db:alt[1]/string()" as="xs:string?"/&gt;
  &lt;xsl:param name="href" select="iri-to-uri(@xlink:href)" as="xs:string"/&gt;
  &lt;xsl:param name="content" as="item()*" required="yes"/&gt;
  &lt;xsl:param name="primary-markup" as="xs:boolean" select="true()"/&gt;

  &lt;xsl:choose&gt;
    &lt;xsl:when test="$href != ''"&gt;
      &lt;a href="{$href}"&gt;
        &lt;xsl:if test="$primary-markup"&gt;
          &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
        &lt;/xsl:if&gt;
        &lt;xsl:if test="fp:pmuj-enabled(/)"&gt;
          &lt;xsl:attribute name="id" select="f:generate-id(.)"/&gt;
        &lt;/xsl:if&gt;
        &lt;xsl:if test="exists($title)"&gt;
          &lt;xsl:attribute name="title" select="$title"/&gt;
        &lt;/xsl:if&gt;
        &lt;xsl:sequence select="$content"/&gt;
      &lt;/a&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="@linkend"&gt;
      &lt;xsl:variable name="target" select="f:target(@linkend, .)"/&gt;
      &lt;xsl:choose&gt;
        &lt;xsl:when test="empty($target)"&gt;
          &lt;xsl:message select="'Link to undefined ID:', string(@linkend)"/&gt;
          &lt;span class="markup-error"&gt;
            &lt;xsl:if test="$primary-markup"&gt;
              &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
            &lt;/xsl:if&gt;
            &lt;xsl:if test="exists($title)"&gt;
              &lt;xsl:attribute name="title" select="$title"/&gt;
            &lt;/xsl:if&gt;
            &lt;xsl:sequence select="'@@LINKEND: ' || @linkend || '@@'"/&gt;
          &lt;/span&gt;
        &lt;/xsl:when&gt;
        &lt;xsl:otherwise&gt;
          &lt;a href="{f:href(., $target)}"&gt;
            &lt;xsl:if test="$primary-markup"&gt;
              &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
            &lt;/xsl:if&gt;
            &lt;xsl:if test="exists($title)"&gt;
              &lt;xsl:attribute name="title" select="$title"/&gt;
            &lt;/xsl:if&gt;
            &lt;xsl:sequence select="$content"/&gt;
          &lt;/a&gt;
        &lt;/xsl:otherwise&gt;
      &lt;/xsl:choose&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:message select="'Link element with no target?', ."/&gt;
      &lt;span class="markup-error"&gt;
        &lt;xsl:if test="$primary-markup"&gt;
          &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
        &lt;/xsl:if&gt;
        &lt;xsl:if test="exists($title)"&gt;
          &lt;xsl:attribute name="title" select="$title"/&gt;
        &lt;/xsl:if&gt;
        &lt;xsl:sequence select="$content"/&gt;
      &lt;/span&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:xref" name="tp:xref"&gt;
  &lt;xsl:param name="linkend"
             select="(@linkend,
                     if (starts-with(@xlink:href, '#'))
                     then substring-after(@xlink:href, '#')
                     else ())[1]"/&gt;

  &lt;xsl:variable name="target"
                select="if ($linkend)
                        then key('id', $linkend)[1]
                        else ()"/&gt;

  &lt;xsl:choose&gt;
    &lt;xsl:when test="empty($target)"&gt;
      &lt;xsl:message select="'Link to non-existent ID: ' || $linkend"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:variable name="content" as="item()*"&gt;
        &lt;xsl:choose&gt;
          &lt;xsl:when test="@endterm"&gt;
            &lt;xsl:variable name="label" select="key('id', @endterm)[1]"/&gt;
            &lt;xsl:choose&gt;
              &lt;xsl:when test="empty($label)"&gt;
                &lt;xsl:message select="'Endterm to non-existent ID: '
                                     || @endterm/string()"/&gt;
                &lt;xsl:apply-templates select="$target" mode="m:crossref"/&gt;
              &lt;/xsl:when&gt;
              &lt;xsl:otherwise&gt;
                &lt;xsl:apply-templates select="$label/node()"/&gt;
              &lt;/xsl:otherwise&gt;
            &lt;/xsl:choose&gt;
          &lt;/xsl:when&gt;
          &lt;xsl:when test="$target/@xreflabel"&gt;
            &lt;xsl:sequence select="$target/@xreflabel/string()"/&gt;
          &lt;/xsl:when&gt;
          &lt;xsl:otherwise&gt;
            &lt;xsl:apply-templates select="$target" mode="m:crossref"/&gt;
          &lt;/xsl:otherwise&gt;
        &lt;/xsl:choose&gt;
      &lt;/xsl:variable&gt;

      &lt;a href="#{f:id($target)}" class="xref xref-{local-name($target)}"&gt;
        &lt;xsl:if test="fp:pmuj-enabled(/)"&gt;
          &lt;xsl:attribute name="id" select="f:generate-id(.)"/&gt;
        &lt;/xsl:if&gt;
        &lt;xsl:sequence select="$content"/&gt;
      &lt;/a&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:olink"&gt;
  &lt;xsl:variable name="targetdoc" select="@targetdoc/string()"/&gt;
  &lt;xsl:variable name="targetptr" select="@targetptr/string()"/&gt;
  &lt;xsl:variable name="targetdb" select="($v:olink-databases[@targetdoc = $targetdoc])[1]"/&gt;
  &lt;xsl:variable name="obj" select="key('targetptr', $targetptr, root($targetdb))"/&gt;

  &lt;xsl:choose&gt;
    &lt;xsl:when test="empty($targetdb)"&gt;
      &lt;xsl:message select="'olink: no targetdoc:', $targetdoc"/&gt;
      &lt;span class="error"&gt;
        &lt;xsl:sequence select="'olink: ' || $targetdoc || '/' || $targetptr"/&gt;
      &lt;/span&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="empty($obj)"&gt;
      &lt;xsl:message select="'olink: no targetptr: ' || $targetdoc || '/' || $targetptr"/&gt;
      &lt;span class="error"&gt;
        &lt;xsl:sequence select="'olink: ' || $targetdoc || '/' || $targetptr"/&gt;
      &lt;/span&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="empty(node())"&gt;
      &lt;a href="{$obj/@href}"&gt;
        &lt;xsl:sequence select="$obj/h:xreftext/node()"/&gt;
      &lt;/a&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;a href="{$obj/@href}"&gt;
        &lt;xsl:apply-templates/&gt;
      &lt;/a&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:template&gt;

&lt;/xsl:stylesheet&gt;
</code></pre></td></tr></table></div></div></div></div><div class="stylesheet" id="S-58081"><h3>xref.xsl</h3><p><span><span class="template all">20 templates</span></span>, <span><span class="function all">2 functions</span></span>, <span><span class="variable all">2 variables</span></span></p><div class="instructions"><div class="title closed">Instructions</div><div class="body"><div id="S-58081-docbook.org.ns.docbook.variables.user-xref-properties" class="instruction variable"><div class="title"><span class="link"></span>Variable <code>$v:user-xref-properties</code> as <code>element()*</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-58081-docbook.org.ns.docbook.variables.xref-properties">$v:xref-properties</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-58081">modules/xref.xsl</a></div></div></div><div id="S-58081-docbook.org.ns.docbook.variables.xref-properties" class="instruction variable"><div class="title"><span class="link"></span>Variable <code>$v:xref-properties</code> as <code>element()+</code></div><div class="props"><div class="uses">Uses: <a href="#S-58081-docbook.org.ns.docbook.variables.user-xref-properties">$v:user-xref-properties</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-58081-docbook.org.ns.docbook.functions.private.crossref-properties,1">fp:crossref-properties()</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-58081">modules/xref.xsl</a></div></div></div><div id="S-58081-t-1" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ *</div><div class="props"><div class="calls">Calls: <a href="#S-58081-docbook.org.ns.docbook.functions.private.crossref-properties,1">fp:crossref-properties()</a></div><div class="mode">Mode: <code>m:crossref</code></div><div class="matches">Matches: <code>*</code></div></div></div><div id="S-58081-t-2" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ *</div><div class="props"><div class="calls">Calls: <a href="#S-58081-docbook.org.ns.docbook.functions.private.crossref-properties,1">fp:crossref-properties()</a>, <a href="#S-22317-docbook.org.ns.docbook.functions.gentext,3">f:gentext()</a></div><div class="mode">Mode: <code>m:crossref-prefix</code></div><div class="matches">Matches: <code>*</code></div></div></div><div id="S-58081-t-3" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ *  as item()*</div><div class="props"><div class="mode">Mode: <code>m:crossref-label</code></div><div class="matches">Matches: <code>*</code></div></div></div><div id="S-58081-t-4" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:answer  as item()*</div><div class="props"><div class="uses">Uses: <a href="#S-26643-..qandaset-default-label">$qandaset-default-label</a></div><div class="mode">Mode: <code>m:crossref-label</code></div><div class="matches">Matches: <code>db:answer</code></div></div></div><div id="S-58081-t-5" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ *</div><div class="props"><div class="mode">Mode: <code>m:crossref-label-separator</code></div><div class="matches">Matches: <code>*</code></div></div></div><div id="S-58081-t-6" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ *</div><div class="props"><div class="mode">Mode: <code>m:crossref-number</code></div><div class="matches">Matches: <code>*</code></div></div></div><div id="S-58081-t-7" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ *</div><div class="props"><div class="mode">Mode: <code>m:crossref-number-separator</code></div><div class="matches">Matches: <code>*</code></div></div></div><div id="S-58081-t-8" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ *</div><div class="props"><div class="mode">Mode: <code>m:crossref-title</code></div><div class="matches">Matches: <code>*</code></div></div></div><div id="S-58081-t-9" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:bridgehead</div><div class="props"><div class="mode">Mode: <code>m:crossref-title</code></div><div class="matches">Matches: <code>db:bridgehead</code></div></div></div><div id="S-58081-t-10" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:varlistentry</div><div class="props"><div class="mode">Mode: <code>m:crossref-title</code></div><div class="matches">Matches: <code>db:varlistentry</code></div></div></div><div id="S-58081-t-11" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:glossentry</div><div class="props"><div class="mode">Mode: <code>m:crossref-title</code></div><div class="matches">Matches: <code>db:glossentry</code></div></div></div><div id="S-58081-t-12" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:glossterm</div><div class="props"><div class="mode">Mode: <code>m:crossref-title</code></div><div class="matches">Matches: <code>db:glossterm</code></div></div></div><div id="S-58081-t-13" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:see|db:seealso</div><div class="props"><div class="mode">Mode: <code>m:crossref-title</code></div><div class="matches">Matches: <code>db:see</code>, <code>db:seealso</code></div></div></div><div id="S-58081-t-14" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:area|db:areaset|db:co</div><div class="props"><div class="mode">Mode: <code>m:crossref-title</code></div><div class="matches">Matches: <code>db:area</code>, <code>db:areaset</code>, <code>db:co</code></div></div></div><div id="S-58081-t-15" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:production</div><div class="props"><div class="mode">Mode: <code>m:crossref-title</code></div><div class="matches">Matches: <code>db:production</code></div></div></div><div id="S-58081-t-16" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:refentry</div><div class="props"><div class="mode">Mode: <code>m:crossref-title</code></div><div class="matches">Matches: <code>db:refentry</code></div></div></div><div id="S-58081-t-17" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:refnamediv</div><div class="props"><div class="mode">Mode: <code>m:crossref-title</code></div><div class="matches">Matches: <code>db:refnamediv</code></div></div></div><div id="S-58081-t-18" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:biblioentry|db:bibliomixed</div><div class="props"><div class="mode">Mode: <code>m:crossref-title</code></div><div class="matches">Matches: <code>db:biblioentry</code>, <code>db:bibliomixed</code></div></div></div><div id="S-58081-t-19" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ *</div><div class="props"><div class="mode">Mode: <code>m:crossref-suffix</code></div><div class="matches">Matches: <code>*</code></div></div></div><div id="S-58081-t-20" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ *</div><div class="props"><div class="calls">Calls: <a href="#S-58081-docbook.org.ns.docbook.functions.private.crossref-properties,1">fp:crossref-properties()</a></div><div class="mode">Mode: <code>m:crossref-inherit-separator</code></div><div class="matches">Matches: <code>*</code></div></div></div><div id="S-58081-docbook.org.ns.docbook.functions.private.document-crossref-properties,1" class="instruction function"><div class="title"><span class="link"></span>Function fp:document-crossref-properties($node as element()) as element()*</div><div class="props"><div class="calls">Calls: <a href="#S-58081-docbook.org.ns.docbook.functions.private.crossref-properties,1">fp:crossref-properties()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-58081-docbook.org.ns.docbook.functions.private.crossref-properties,1">fp:crossref-properties()</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-58081">modules/xref.xsl</a></div></div></div><div id="S-58081-docbook.org.ns.docbook.functions.private.crossref-properties,1" class="instruction function"><div class="title"><span class="link"></span>Function fp:crossref-properties($node as element()) as map(*)</div><div class="props"><div class="uses">Uses: <a href="#S-58081-docbook.org.ns.docbook.variables.xref-properties">$v:xref-properties</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-58081-t-1">template</a>, <a href="#S-58081-t-2">template</a>, <a href="#S-58081-t-20">template</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-58081">modules/xref.xsl</a></div></div></div></div></div><div class="source-code"><div class="title closed">Source code</div><div class="body"><div><table><tr><td valign="top" align="right"><pre class="fake-prism"><span id="line-S-58081-1">1</span>
<span id="line-S-58081-2"><span class="lno">2</span></span>
<span id="line-S-58081-3"><span class="lno">3</span></span>
<span id="line-S-58081-4"><span class="lno">4</span></span>
<span id="line-S-58081-5">5</span>
<span id="line-S-58081-6"><span class="lno">6</span></span>
<span id="line-S-58081-7"><span class="lno">7</span></span>
<span id="line-S-58081-8"><span class="lno">8</span></span>
<span id="line-S-58081-9"><span class="lno">9</span></span>
<span id="line-S-58081-10">10</span>
<span id="line-S-58081-11"><span class="lno">11</span></span>
<span id="line-S-58081-12"><span class="lno">12</span></span>
<span id="line-S-58081-13"><span class="lno">13</span></span>
<span id="line-S-58081-14"><span class="lno">14</span></span>
<span id="line-S-58081-15">15</span>
<span id="line-S-58081-16"><span class="lno">16</span></span>
<span id="line-S-58081-17"><span class="lno">17</span></span>
<span id="line-S-58081-18"><span class="lno">18</span></span>
<span id="line-S-58081-19"><span class="lno">19</span></span>
<span id="line-S-58081-20">20</span>
<span id="line-S-58081-21"><span class="lno">21</span></span>
<span id="line-S-58081-22"><span class="lno">22</span></span>
<span id="line-S-58081-23"><span class="lno">23</span></span>
<span id="line-S-58081-24"><span class="lno">24</span></span>
<span id="line-S-58081-25">25</span>
<span id="line-S-58081-26"><span class="lno">26</span></span>
<span id="line-S-58081-27"><span class="lno">27</span></span>
<span id="line-S-58081-28"><span class="lno">28</span></span>
<span id="line-S-58081-29"><span class="lno">29</span></span>
<span id="line-S-58081-30">30</span>
<span id="line-S-58081-31"><span class="lno">31</span></span>
<span id="line-S-58081-32"><span class="lno">32</span></span>
<span id="line-S-58081-33"><span class="lno">33</span></span>
<span id="line-S-58081-34"><span class="lno">34</span></span>
<span id="line-S-58081-35">35</span>
<span id="line-S-58081-36"><span class="lno">36</span></span>
<span id="line-S-58081-37"><span class="lno">37</span></span>
<span id="line-S-58081-38"><span class="lno">38</span></span>
<span id="line-S-58081-39"><span class="lno">39</span></span>
<span id="line-S-58081-40">40</span>
<span id="line-S-58081-41"><span class="lno">41</span></span>
<span id="line-S-58081-42"><span class="lno">42</span></span>
<span id="line-S-58081-43"><span class="lno">43</span></span>
<span id="line-S-58081-44"><span class="lno">44</span></span>
<span id="line-S-58081-45">45</span>
<span id="line-S-58081-46"><span class="lno">46</span></span>
<span id="line-S-58081-47"><span class="lno">47</span></span>
<span id="line-S-58081-48"><span class="lno">48</span></span>
<span id="line-S-58081-49"><span class="lno">49</span></span>
<span id="line-S-58081-50">50</span>
<span id="line-S-58081-51"><span class="lno">51</span></span>
<span id="line-S-58081-52"><span class="lno">52</span></span>
<span id="line-S-58081-53"><span class="lno">53</span></span>
<span id="line-S-58081-54"><span class="lno">54</span></span>
<span id="line-S-58081-55">55</span>
<span id="line-S-58081-56"><span class="lno">56</span></span>
<span id="line-S-58081-57"><span class="lno">57</span></span>
<span id="line-S-58081-58"><span class="lno">58</span></span>
<span id="line-S-58081-59"><span class="lno">59</span></span>
<span id="line-S-58081-60">60</span>
<span id="line-S-58081-61"><span class="lno">61</span></span>
<span id="line-S-58081-62"><span class="lno">62</span></span>
<span id="line-S-58081-63"><span class="lno">63</span></span>
<span id="line-S-58081-64"><span class="lno">64</span></span>
<span id="line-S-58081-65">65</span>
<span id="line-S-58081-66"><span class="lno">66</span></span>
<span id="line-S-58081-67"><span class="lno">67</span></span>
<span id="line-S-58081-68"><span class="lno">68</span></span>
<span id="line-S-58081-69"><span class="lno">69</span></span>
<span id="line-S-58081-70">70</span>
<span id="line-S-58081-71"><span class="lno">71</span></span>
<span id="line-S-58081-72"><span class="lno">72</span></span>
<span id="line-S-58081-73"><span class="lno">73</span></span>
<span id="line-S-58081-74"><span class="lno">74</span></span>
<span id="line-S-58081-75">75</span>
<span id="line-S-58081-76"><span class="lno">76</span></span>
<span id="line-S-58081-77"><span class="lno">77</span></span>
<span id="line-S-58081-78"><span class="lno">78</span></span>
<span id="line-S-58081-79"><span class="lno">79</span></span>
<span id="line-S-58081-80">80</span>
<span id="line-S-58081-81"><span class="lno">81</span></span>
<span id="line-S-58081-82"><span class="lno">82</span></span>
<span id="line-S-58081-83"><span class="lno">83</span></span>
<span id="line-S-58081-84"><span class="lno">84</span></span>
<span id="line-S-58081-85">85</span>
<span id="line-S-58081-86"><span class="lno">86</span></span>
<span id="line-S-58081-87"><span class="lno">87</span></span>
<span id="line-S-58081-88"><span class="lno">88</span></span>
<span id="line-S-58081-89"><span class="lno">89</span></span>
<span id="line-S-58081-90">90</span>
<span id="line-S-58081-91"><span class="lno">91</span></span>
<span id="line-S-58081-92"><span class="lno">92</span></span>
<span id="line-S-58081-93"><span class="lno">93</span></span>
<span id="line-S-58081-94"><span class="lno">94</span></span>
<span id="line-S-58081-95">95</span>
<span id="line-S-58081-96"><span class="lno">96</span></span>
<span id="line-S-58081-97"><span class="lno">97</span></span>
<span id="line-S-58081-98"><span class="lno">98</span></span>
<span id="line-S-58081-99"><span class="lno">99</span></span>
<span id="line-S-58081-100">100</span>
<span id="line-S-58081-101"><span class="lno">101</span></span>
<span id="line-S-58081-102"><span class="lno">102</span></span>
<span id="line-S-58081-103"><span class="lno">103</span></span>
<span id="line-S-58081-104"><span class="lno">104</span></span>
<span id="line-S-58081-105">105</span>
<span id="line-S-58081-106"><span class="lno">106</span></span>
<span id="line-S-58081-107"><span class="lno">107</span></span>
<span id="line-S-58081-108"><span class="lno">108</span></span>
<span id="line-S-58081-109"><span class="lno">109</span></span>
<span id="line-S-58081-110">110</span>
<span id="line-S-58081-111"><span class="lno">111</span></span>
<span id="line-S-58081-112"><span class="lno">112</span></span>
<span id="line-S-58081-113"><span class="lno">113</span></span>
<span id="line-S-58081-114"><span class="lno">114</span></span>
<span id="line-S-58081-115">115</span>
<span id="line-S-58081-116"><span class="lno">116</span></span>
<span id="line-S-58081-117"><span class="lno">117</span></span>
<span id="line-S-58081-118"><span class="lno">118</span></span>
<span id="line-S-58081-119"><span class="lno">119</span></span>
<span id="line-S-58081-120">120</span>
<span id="line-S-58081-121"><span class="lno">121</span></span>
<span id="line-S-58081-122"><span class="lno">122</span></span>
<span id="line-S-58081-123"><span class="lno">123</span></span>
<span id="line-S-58081-124"><span class="lno">124</span></span>
<span id="line-S-58081-125">125</span>
<span id="line-S-58081-126"><span class="lno">126</span></span>
<span id="line-S-58081-127"><span class="lno">127</span></span>
<span id="line-S-58081-128"><span class="lno">128</span></span>
<span id="line-S-58081-129"><span class="lno">129</span></span>
<span id="line-S-58081-130">130</span>
<span id="line-S-58081-131"><span class="lno">131</span></span>
<span id="line-S-58081-132"><span class="lno">132</span></span>
<span id="line-S-58081-133"><span class="lno">133</span></span>
<span id="line-S-58081-134"><span class="lno">134</span></span>
<span id="line-S-58081-135">135</span>
<span id="line-S-58081-136"><span class="lno">136</span></span>
<span id="line-S-58081-137"><span class="lno">137</span></span>
<span id="line-S-58081-138"><span class="lno">138</span></span>
<span id="line-S-58081-139"><span class="lno">139</span></span>
<span id="line-S-58081-140">140</span>
<span id="line-S-58081-141"><span class="lno">141</span></span>
<span id="line-S-58081-142"><span class="lno">142</span></span>
<span id="line-S-58081-143"><span class="lno">143</span></span>
<span id="line-S-58081-144"><span class="lno">144</span></span>
<span id="line-S-58081-145">145</span>
<span id="line-S-58081-146"><span class="lno">146</span></span>
<span id="line-S-58081-147"><span class="lno">147</span></span>
<span id="line-S-58081-148"><span class="lno">148</span></span>
<span id="line-S-58081-149"><span class="lno">149</span></span>
<span id="line-S-58081-150">150</span>
<span id="line-S-58081-151"><span class="lno">151</span></span>
<span id="line-S-58081-152"><span class="lno">152</span></span>
<span id="line-S-58081-153"><span class="lno">153</span></span>
<span id="line-S-58081-154"><span class="lno">154</span></span>
<span id="line-S-58081-155">155</span>
<span id="line-S-58081-156"><span class="lno">156</span></span>
<span id="line-S-58081-157"><span class="lno">157</span></span>
<span id="line-S-58081-158"><span class="lno">158</span></span>
<span id="line-S-58081-159"><span class="lno">159</span></span>
<span id="line-S-58081-160">160</span>
<span id="line-S-58081-161"><span class="lno">161</span></span>
<span id="line-S-58081-162"><span class="lno">162</span></span>
<span id="line-S-58081-163"><span class="lno">163</span></span>
<span id="line-S-58081-164"><span class="lno">164</span></span>
<span id="line-S-58081-165">165</span>
<span id="line-S-58081-166"><span class="lno">166</span></span>
<span id="line-S-58081-167"><span class="lno">167</span></span>
<span id="line-S-58081-168"><span class="lno">168</span></span>
<span id="line-S-58081-169"><span class="lno">169</span></span>
<span id="line-S-58081-170">170</span>
<span id="line-S-58081-171"><span class="lno">171</span></span>
<span id="line-S-58081-172"><span class="lno">172</span></span>
<span id="line-S-58081-173"><span class="lno">173</span></span>
<span id="line-S-58081-174"><span class="lno">174</span></span>
<span id="line-S-58081-175">175</span>
<span id="line-S-58081-176"><span class="lno">176</span></span>
<span id="line-S-58081-177"><span class="lno">177</span></span>
<span id="line-S-58081-178"><span class="lno">178</span></span>
<span id="line-S-58081-179"><span class="lno">179</span></span>
<span id="line-S-58081-180">180</span>
<span id="line-S-58081-181"><span class="lno">181</span></span>
<span id="line-S-58081-182"><span class="lno">182</span></span>
<span id="line-S-58081-183"><span class="lno">183</span></span>
<span id="line-S-58081-184"><span class="lno">184</span></span>
<span id="line-S-58081-185">185</span>
<span id="line-S-58081-186"><span class="lno">186</span></span>
<span id="line-S-58081-187"><span class="lno">187</span></span>
<span id="line-S-58081-188"><span class="lno">188</span></span>
<span id="line-S-58081-189"><span class="lno">189</span></span>
<span id="line-S-58081-190">190</span>
<span id="line-S-58081-191"><span class="lno">191</span></span>
<span id="line-S-58081-192"><span class="lno">192</span></span>
<span id="line-S-58081-193"><span class="lno">193</span></span>
<span id="line-S-58081-194"><span class="lno">194</span></span>
<span id="line-S-58081-195">195</span>
<span id="line-S-58081-196"><span class="lno">196</span></span>
<span id="line-S-58081-197"><span class="lno">197</span></span>
<span id="line-S-58081-198"><span class="lno">198</span></span>
<span id="line-S-58081-199"><span class="lno">199</span></span>
<span id="line-S-58081-200">200</span>
<span id="line-S-58081-201"><span class="lno">201</span></span>
<span id="line-S-58081-202"><span class="lno">202</span></span>
<span id="line-S-58081-203"><span class="lno">203</span></span>
<span id="line-S-58081-204"><span class="lno">204</span></span>
<span id="line-S-58081-205">205</span>
<span id="line-S-58081-206"><span class="lno">206</span></span>
<span id="line-S-58081-207"><span class="lno">207</span></span>
<span id="line-S-58081-208"><span class="lno">208</span></span>
<span id="line-S-58081-209"><span class="lno">209</span></span>
<span id="line-S-58081-210">210</span>
<span id="line-S-58081-211"><span class="lno">211</span></span>
<span id="line-S-58081-212"><span class="lno">212</span></span>
<span id="line-S-58081-213"><span class="lno">213</span></span>
<span id="line-S-58081-214"><span class="lno">214</span></span>
<span id="line-S-58081-215">215</span>
<span id="line-S-58081-216"><span class="lno">216</span></span>
<span id="line-S-58081-217"><span class="lno">217</span></span>
<span id="line-S-58081-218"><span class="lno">218</span></span>
<span id="line-S-58081-219"><span class="lno">219</span></span>
<span id="line-S-58081-220">220</span>
<span id="line-S-58081-221"><span class="lno">221</span></span>
<span id="line-S-58081-222"><span class="lno">222</span></span>
<span id="line-S-58081-223"><span class="lno">223</span></span>
<span id="line-S-58081-224"><span class="lno">224</span></span>
<span id="line-S-58081-225">225</span>
<span id="line-S-58081-226"><span class="lno">226</span></span>
<span id="line-S-58081-227"><span class="lno">227</span></span>
<span id="line-S-58081-228"><span class="lno">228</span></span>
<span id="line-S-58081-229"><span class="lno">229</span></span>
<span id="line-S-58081-230">230</span>
<span id="line-S-58081-231"><span class="lno">231</span></span>
<span id="line-S-58081-232"><span class="lno">232</span></span>
<span id="line-S-58081-233"><span class="lno">233</span></span>
<span id="line-S-58081-234"><span class="lno">234</span></span>
<span id="line-S-58081-235">235</span>
<span id="line-S-58081-236"><span class="lno">236</span></span>
<span id="line-S-58081-237"><span class="lno">237</span></span>
<span id="line-S-58081-238"><span class="lno">238</span></span>
<span id="line-S-58081-239"><span class="lno">239</span></span>
<span id="line-S-58081-240">240</span>
<span id="line-S-58081-241"><span class="lno">241</span></span>
<span id="line-S-58081-242"><span class="lno">242</span></span>
<span id="line-S-58081-243"><span class="lno">243</span></span>
<span id="line-S-58081-244"><span class="lno">244</span></span>
<span id="line-S-58081-245">245</span>
<span id="line-S-58081-246"><span class="lno">246</span></span>
<span id="line-S-58081-247"><span class="lno">247</span></span>
<span id="line-S-58081-248"><span class="lno">248</span></span>
<span id="line-S-58081-249"><span class="lno">249</span></span>
<span id="line-S-58081-250">250</span>
<span id="line-S-58081-251"><span class="lno">251</span></span>
<span id="line-S-58081-252"><span class="lno">252</span></span>
<span id="line-S-58081-253"><span class="lno">253</span></span>
<span id="line-S-58081-254"><span class="lno">254</span></span>
<span id="line-S-58081-255">255</span>
<span id="line-S-58081-256"><span class="lno">256</span></span>
<span id="line-S-58081-257"><span class="lno">257</span></span>
<span id="line-S-58081-258"><span class="lno">258</span></span>
<span id="line-S-58081-259"><span class="lno">259</span></span>
<span id="line-S-58081-260">260</span>
<span id="line-S-58081-261"><span class="lno">261</span></span>
<span id="line-S-58081-262"><span class="lno">262</span></span>
<span id="line-S-58081-263"><span class="lno">263</span></span>
<span id="line-S-58081-264"><span class="lno">264</span></span>
<span id="line-S-58081-265">265</span>
<span id="line-S-58081-266"><span class="lno">266</span></span>
<span id="line-S-58081-267"><span class="lno">267</span></span>
<span id="line-S-58081-268"><span class="lno">268</span></span>
<span id="line-S-58081-269"><span class="lno">269</span></span>
<span id="line-S-58081-270">270</span>
<span id="line-S-58081-271"><span class="lno">271</span></span>
<span id="line-S-58081-272"><span class="lno">272</span></span>
<span id="line-S-58081-273"><span class="lno">273</span></span>
<span id="line-S-58081-274"><span class="lno">274</span></span>
<span id="line-S-58081-275">275</span>
<span id="line-S-58081-276"><span class="lno">276</span></span>
<span id="line-S-58081-277"><span class="lno">277</span></span>
<span id="line-S-58081-278"><span class="lno">278</span></span>
<span id="line-S-58081-279"><span class="lno">279</span></span>
<span id="line-S-58081-280">280</span>
<span id="line-S-58081-281"><span class="lno">281</span></span>
<span id="line-S-58081-282"><span class="lno">282</span></span>
<span id="line-S-58081-283"><span class="lno">283</span></span>
<span id="line-S-58081-284"><span class="lno">284</span></span>
<span id="line-S-58081-285">285</span>
<span id="line-S-58081-286"><span class="lno">286</span></span>
<span id="line-S-58081-287"><span class="lno">287</span></span>
<span id="line-S-58081-288"><span class="lno">288</span></span>
<span id="line-S-58081-289"><span class="lno">289</span></span>
<span id="line-S-58081-290">290</span>
<span id="line-S-58081-291"><span class="lno">291</span></span>
<span id="line-S-58081-292"><span class="lno">292</span></span>
<span id="line-S-58081-293"><span class="lno">293</span></span>
<span id="line-S-58081-294"><span class="lno">294</span></span>
<span id="line-S-58081-295">295</span>
<span id="line-S-58081-296"><span class="lno">296</span></span>
<span id="line-S-58081-297"><span class="lno">297</span></span>
<span id="line-S-58081-298"><span class="lno">298</span></span>
<span id="line-S-58081-299"><span class="lno">299</span></span>
<span id="line-S-58081-300">300</span>
<span id="line-S-58081-301"><span class="lno">301</span></span>
<span id="line-S-58081-302"><span class="lno">302</span></span>
<span id="line-S-58081-303"><span class="lno">303</span></span>
<span id="line-S-58081-304"><span class="lno">304</span></span>
<span id="line-S-58081-305">305</span>
<span id="line-S-58081-306"><span class="lno">306</span></span>
<span id="line-S-58081-307"><span class="lno">307</span></span>
<span id="line-S-58081-308"><span class="lno">308</span></span>
<span id="line-S-58081-309"><span class="lno">309</span></span>
<span id="line-S-58081-310">310</span>
<span id="line-S-58081-311"><span class="lno">311</span></span>
<span id="line-S-58081-312"><span class="lno">312</span></span>
<span id="line-S-58081-313"><span class="lno">313</span></span>
<span id="line-S-58081-314"><span class="lno">314</span></span>
<span id="line-S-58081-315">315</span>
<span id="line-S-58081-316"><span class="lno">316</span></span>
<span id="line-S-58081-317"><span class="lno">317</span></span>
<span id="line-S-58081-318"><span class="lno">318</span></span>
<span id="line-S-58081-319"><span class="lno">319</span></span>
<span id="line-S-58081-320">320</span>
<span id="line-S-58081-321"><span class="lno">321</span></span>
<span id="line-S-58081-322"><span class="lno">322</span></span>
<span id="line-S-58081-323"><span class="lno">323</span></span>
<span id="line-S-58081-324"><span class="lno">324</span></span>
<span id="line-S-58081-325">325</span>
<span id="line-S-58081-326"><span class="lno">326</span></span>
<span id="line-S-58081-327"><span class="lno">327</span></span>
<span id="line-S-58081-328"><span class="lno">328</span></span>
<span id="line-S-58081-329"><span class="lno">329</span></span>
<span id="line-S-58081-330">330</span>
<span id="line-S-58081-331"><span class="lno">331</span></span>
<span id="line-S-58081-332"><span class="lno">332</span></span>
<span id="line-S-58081-333"><span class="lno">333</span></span>
<span id="line-S-58081-334"><span class="lno">334</span></span>
<span id="line-S-58081-335">335</span>
<span id="line-S-58081-336"><span class="lno">336</span></span>
<span id="line-S-58081-337"><span class="lno">337</span></span>
<span id="line-S-58081-338"><span class="lno">338</span></span>
<span id="line-S-58081-339"><span class="lno">339</span></span>
<span id="line-S-58081-340">340</span>
<span id="line-S-58081-341"><span class="lno">341</span></span>
<span id="line-S-58081-342"><span class="lno">342</span></span>
<span id="line-S-58081-343"><span class="lno">343</span></span>
<span id="line-S-58081-344"><span class="lno">344</span></span>
<span id="line-S-58081-345">345</span>
<span id="line-S-58081-346"><span class="lno">346</span></span>
<span id="line-S-58081-347"><span class="lno">347</span></span>
<span id="line-S-58081-348"><span class="lno">348</span></span>
<span id="line-S-58081-349"><span class="lno">349</span></span>
<span id="line-S-58081-350">350</span>
<span id="line-S-58081-351"><span class="lno">351</span></span>
<span id="line-S-58081-352"><span class="lno">352</span></span>
<span id="line-S-58081-353"><span class="lno">353</span></span>
<span id="line-S-58081-354"><span class="lno">354</span></span>
<span id="line-S-58081-355">355</span>
<span id="line-S-58081-356"><span class="lno">356</span></span>
<span id="line-S-58081-357"><span class="lno">357</span></span>
<span id="line-S-58081-358"><span class="lno">358</span></span>
<span id="line-S-58081-359"><span class="lno">359</span></span>
<span id="line-S-58081-360">360</span>
<span id="line-S-58081-361"><span class="lno">361</span></span>
<span id="line-S-58081-362"><span class="lno">362</span></span>
<span id="line-S-58081-363"><span class="lno">363</span></span>
<span id="line-S-58081-364"><span class="lno">364</span></span>
<span id="line-S-58081-365">365</span>
<span id="line-S-58081-366"><span class="lno">366</span></span>
<span id="line-S-58081-367"><span class="lno">367</span></span>
<span id="line-S-58081-368"><span class="lno">368</span></span>
<span id="line-S-58081-369"><span class="lno">369</span></span>
<span id="line-S-58081-370">370</span>
<span id="line-S-58081-371"><span class="lno">371</span></span>
<span id="line-S-58081-372"><span class="lno">372</span></span>
<span id="line-S-58081-373"><span class="lno">373</span></span>
<span id="line-S-58081-374"><span class="lno">374</span></span>
<span id="line-S-58081-375">375</span>
<span id="line-S-58081-376"><span class="lno">376</span></span>
<span id="line-S-58081-377"><span class="lno">377</span></span>
<span id="line-S-58081-378"><span class="lno">378</span></span>
<span id="line-S-58081-379"><span class="lno">379</span></span>
<span id="line-S-58081-380">380</span>
<span id="line-S-58081-381"><span class="lno">381</span></span>
<span id="line-S-58081-382"><span class="lno">382</span></span>
<span id="line-S-58081-383"><span class="lno">383</span></span>
<span id="line-S-58081-384"><span class="lno">384</span></span>
<span id="line-S-58081-385">385</span>
<span id="line-S-58081-386"><span class="lno">386</span></span>
<span id="line-S-58081-387"><span class="lno">387</span></span>
<span id="line-S-58081-388"><span class="lno">388</span></span>
<span id="line-S-58081-389"><span class="lno">389</span></span>
<span id="line-S-58081-390">390</span>
<span id="line-S-58081-391"><span class="lno">391</span></span>
<span id="line-S-58081-392"><span class="lno">392</span></span>
<span id="line-S-58081-393"><span class="lno">393</span></span>
<span id="line-S-58081-394"><span class="lno">394</span></span>
<span id="line-S-58081-395">395</span>
<span id="line-S-58081-396"><span class="lno">396</span></span>
<span id="line-S-58081-397"><span class="lno">397</span></span>
<span id="line-S-58081-398"><span class="lno">398</span></span>
<span id="line-S-58081-399"><span class="lno">399</span></span>
<span id="line-S-58081-400">400</span>
<span id="line-S-58081-401"><span class="lno">401</span></span>
<span id="line-S-58081-402"><span class="lno">402</span></span>
<span id="line-S-58081-403"><span class="lno">403</span></span>
<span id="line-S-58081-404"><span class="lno">404</span></span>
<span id="line-S-58081-405">405</span>
<span id="line-S-58081-406"><span class="lno">406</span></span>
<span id="line-S-58081-407"><span class="lno">407</span></span>
<span id="line-S-58081-408"><span class="lno">408</span></span>
<span id="line-S-58081-409"><span class="lno">409</span></span>
<span id="line-S-58081-410">410</span>
<span id="line-S-58081-411"><span class="lno">411</span></span>
<span id="line-S-58081-412"><span class="lno">412</span></span>
<span id="line-S-58081-413"><span class="lno">413</span></span>
<span id="line-S-58081-414"><span class="lno">414</span></span>
<span id="line-S-58081-415">415</span>
<span id="line-S-58081-416"><span class="lno">416</span></span>
<span id="line-S-58081-417"><span class="lno">417</span></span>
<span id="line-S-58081-418"><span class="lno">418</span></span>
<span id="line-S-58081-419"><span class="lno">419</span></span>
<span id="line-S-58081-420">420</span>
<span id="line-S-58081-421"><span class="lno">421</span></span>
<span id="line-S-58081-422"><span class="lno">422</span></span>
<span id="line-S-58081-423"><span class="lno">423</span></span>
<span id="line-S-58081-424"><span class="lno">424</span></span>
<span id="line-S-58081-425">425</span>
<span id="line-S-58081-426"><span class="lno">426</span></span>
<span id="line-S-58081-427"><span class="lno">427</span></span>
<span id="line-S-58081-428"><span class="lno">428</span></span>
<span id="line-S-58081-429"><span class="lno">429</span></span>
<span id="line-S-58081-430">430</span>
<span id="line-S-58081-431"><span class="lno">431</span></span>
<span id="line-S-58081-432"><span class="lno">432</span></span>
<span id="line-S-58081-433"><span class="lno">433</span></span>
<span id="line-S-58081-434"><span class="lno">434</span></span>
<span id="line-S-58081-435">435</span>
<span id="line-S-58081-436"><span class="lno">436</span></span>
<span id="line-S-58081-437"><span class="lno">437</span></span>
<span id="line-S-58081-438"><span class="lno">438</span></span>
<span id="line-S-58081-439"><span class="lno">439</span></span>
<span id="line-S-58081-440">440</span>
<span id="line-S-58081-441"><span class="lno">441</span></span>
<span id="line-S-58081-442"><span class="lno">442</span></span>
<span id="line-S-58081-443"><span class="lno">443</span></span>
<span id="line-S-58081-444"><span class="lno">444</span></span>
<span id="line-S-58081-445">445</span>
<span id="line-S-58081-446"><span class="lno">446</span></span>
<span id="line-S-58081-447"><span class="lno">447</span></span>
<span id="line-S-58081-448"><span class="lno">448</span></span>
<span id="line-S-58081-449"><span class="lno">449</span></span>
<span id="line-S-58081-450">450</span>
<span id="line-S-58081-451"><span class="lno">451</span></span>
<span id="line-S-58081-452"><span class="lno">452</span></span>
<span id="line-S-58081-453"><span class="lno">453</span></span>
<span id="line-S-58081-454"><span class="lno">454</span></span>
<span id="line-S-58081-455">455</span>
<span id="line-S-58081-456"><span class="lno">456</span></span>
<span id="line-S-58081-457"><span class="lno">457</span></span>
<span id="line-S-58081-458"><span class="lno">458</span></span>
<span id="line-S-58081-459"><span class="lno">459</span></span>
<span id="line-S-58081-460">460</span>
<span id="line-S-58081-461"><span class="lno">461</span></span>
<span id="line-S-58081-462"><span class="lno">462</span></span>
<span id="line-S-58081-463"><span class="lno">463</span></span>
<span id="line-S-58081-464"><span class="lno">464</span></span>
<span id="line-S-58081-465">465</span>
<span id="line-S-58081-466"><span class="lno">466</span></span>
<span id="line-S-58081-467"><span class="lno">467</span></span>
<span id="line-S-58081-468"><span class="lno">468</span></span>
<span id="line-S-58081-469"><span class="lno">469</span></span>
<span id="line-S-58081-470">470</span>
<span id="line-S-58081-471"><span class="lno">471</span></span>
<span id="line-S-58081-472"><span class="lno">472</span></span>
<span id="line-S-58081-473"><span class="lno">473</span></span>
<span id="line-S-58081-474"><span class="lno">474</span></span>
<span id="line-S-58081-475">475</span>
<span id="line-S-58081-476"><span class="lno">476</span></span>
<span id="line-S-58081-477"><span class="lno">477</span></span>
<span id="line-S-58081-478"><span class="lno">478</span></span>
<span id="line-S-58081-479"><span class="lno">479</span></span>
<span id="line-S-58081-480">480</span>
<span id="line-S-58081-481"><span class="lno">481</span></span>
<span id="line-S-58081-482"><span class="lno">482</span></span>
<span id="line-S-58081-483"><span class="lno">483</span></span>
<span id="line-S-58081-484"><span class="lno">484</span></span>
<span id="line-S-58081-485">485</span>
<span id="line-S-58081-486"><span class="lno">486</span></span>
<span id="line-S-58081-487"><span class="lno">487</span></span>
<span id="line-S-58081-488"><span class="lno">488</span></span>
<span id="line-S-58081-489"><span class="lno">489</span></span>
<span id="line-S-58081-490">490</span>
<span id="line-S-58081-491"><span class="lno">491</span></span>
<span id="line-S-58081-492"><span class="lno">492</span></span>
<span id="line-S-58081-493"><span class="lno">493</span></span>
<span id="line-S-58081-494"><span class="lno">494</span></span>
<span id="line-S-58081-495">495</span>
<span id="line-S-58081-496"><span class="lno">496</span></span>
<span id="line-S-58081-497"><span class="lno">497</span></span>
<span id="line-S-58081-498"><span class="lno">498</span></span>
<span id="line-S-58081-499"><span class="lno">499</span></span>
<span id="line-S-58081-500">500</span>
<span id="line-S-58081-501"><span class="lno">501</span></span>
<span id="line-S-58081-502"><span class="lno">502</span></span>
<span id="line-S-58081-503"><span class="lno">503</span></span>
<span id="line-S-58081-504"><span class="lno">504</span></span>
<span id="line-S-58081-505">505</span>
<span id="line-S-58081-506"><span class="lno">506</span></span>
<span id="line-S-58081-507"><span class="lno">507</span></span>
<span id="line-S-58081-508"><span class="lno">508</span></span>
<span id="line-S-58081-509"><span class="lno">509</span></span>
<span id="line-S-58081-510">510</span>
<span id="line-S-58081-511"><span class="lno">511</span></span>
<span id="line-S-58081-512"><span class="lno">512</span></span>
<span id="line-S-58081-513"><span class="lno">513</span></span>
<span id="line-S-58081-514"><span class="lno">514</span></span>
</pre></td><td valign="top"><pre><code class="language-xml">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                xmlns:db="http://docbook.org/ns/docbook"
                xmlns:dbe="http://docbook.org/ns/docbook/errors"
                xmlns:f="http://docbook.org/ns/docbook/functions"
                xmlns:fp="http://docbook.org/ns/docbook/functions/private"
                xmlns:l="http://docbook.org/ns/docbook/l10n"
                xmlns:m="http://docbook.org/ns/docbook/modes"
                xmlns:map="http://www.w3.org/2005/xpath-functions/map"
                xmlns:mp="http://docbook.org/ns/docbook/modes/private"
                xmlns:t="http://docbook.org/ns/docbook/templates"
                xmlns:v="http://docbook.org/ns/docbook/variables"
                xmlns:vp="http://docbook.org/ns/docbook/variables/private"
                xmlns:xs="http://www.w3.org/2001/XMLSchema"
                xmlns="http://www.w3.org/1999/xhtml"
                default-mode="m:docbook"
                exclude-result-prefixes="db dbe f fp l m map mp t v vp xs"
                version="3.0"&gt;
&lt;!--
    prefix, label, separator, title, suffix : context (title, lot)

    section called Section 3.4 The Title

                             in Chapter 3, The Title,
                                                      in Book Title

                ^    ^   ^^^ ^    ^     ^
                |    |   ||| |    |     +- the suffix
                |    |   ||| |    +- the title
                |    |   ||| +- the number separator
                |    |   ||+- the intra-number separator
                |    |   |+- the number (3.4)
                |    |   +- the label separator
                |    +- the label
                +- the prefix

    Chapter 3
    Chapter 3 in Book Title
    Chapter 3, The Title

    Section 3.1
    Section 3.1, The Title
    Section 1 in Chapter 3
    Section 1 in Chapter 3, The Title
    Section 1, The Title in Chapter 3, The Title
    section called The Title in Chapter 3 in Book Title
    section called The Title in Chapter 3, The Title, in Book Title

    Figure 4.2
    Figure 4.2, The Title
    Figure 2 in Section 3.1
    Figure 2 in Section 1 in Chapter 3
    Figure 2, The Title in Chapter 3
--&gt;

&lt;!-- label defaults to false;
     number defaults to false;
     inherit is ignored if number is false --&gt;

&lt;xsl:variable name="v:user-xref-properties" as="element()*"/&gt;

&lt;xsl:variable name="v:xref-properties" as="element()+"
              xmlns:db="http://docbook.org/ns/docbook"&gt;
  &lt;xsl:sequence select="$v:user-xref-properties"/&gt;

  &lt;crossref xpath="self::db:section[ancestor::db:preface]"
            prefix-key="sectioncalled"
            label="false"
            number="false"
            title="true"
            inherit="ancestor::db:preface[1]"
            inherit-separator="in the"/&gt;

  &lt;crossref xpath="self::db:section"
            label="true"
            number="true"
            title="true"/&gt;

  &lt;crossref xpath="self::db:preface|self::db:partintro"
            label="false"
            number="false"
            title="true"/&gt;

  &lt;crossref xpath="self::db:chapter|self::db:appendix"
            label="true"
            number="true"
            title="true"/&gt;

  &lt;crossref xpath="self::db:part|self::db:reference"
            label="true"
            number="true"
            title="true"/&gt;

  &lt;crossref xpath="self::db:figure|self::db:example|self::db:table
                   |self::db:procedure|self::db:equation
                   |self::db:formalgroup"
            label="true"
            number="true"
            title="true"/&gt;

  &lt;crossref xpath="self::db:listitem[parent::db:orderedlist]"
            label="false"
            number="true"
            title="false"/&gt;

  &lt;crossref xpath="self::db:question|self::db:answer"
            label="true"
            number="false"
            title="false"/&gt;

  &lt;crossref xpath="self::db:step"
            label="false"
            number="true"
            prefix-key="step"
            title="false"/&gt;

  &lt;crossref xpath="self::db:see"
            prefix-key="see"
            title="true"/&gt;

  &lt;crossref xpath="self::db:seealso"
            prefix-key="seealso"
            title="true"/&gt;

  &lt;crossref xpath="self::db:glosssee"
            prefix-key="glosssee"
            title="true"/&gt;

  &lt;crossref xpath="self::db:glossseealso"
            prefix-key="glossseealso"
            title="true"/&gt;

  &lt;crossref xpath="self::*"
            label="false"
            number="false"
            title="true"/&gt;
&lt;/xsl:variable&gt;

&lt;!-- ============================================================ --&gt;

&lt;xsl:template match="*" mode="m:crossref"&gt;
  &lt;xsl:variable name="properties" select="fp:crossref-properties(.)"/&gt;

  &lt;xsl:if use-when="false()"
          test="self::db:section"&gt;
    &lt;xsl:message select="path(.), ':'"/&gt;
    &lt;xsl:for-each select="map:keys($properties)"&gt;
      &lt;xsl:message select="'  prop:', ., '=', map:get($properties, .)"/&gt;
    &lt;/xsl:for-each&gt;
  &lt;/xsl:if&gt; 

  &lt;xsl:variable name="title" as="item()*"&gt;
    &lt;xsl:if test="$properties?title"&gt;
      &lt;xsl:apply-templates select="." mode="m:crossref-title"/&gt;
    &lt;/xsl:if&gt;
  &lt;/xsl:variable&gt;

  &lt;xsl:variable name="number" as="item()*"&gt;
    &lt;xsl:if test="$properties?number"&gt;
      &lt;xsl:choose&gt;
        &lt;xsl:when test="@label"&gt;
          &lt;xsl:value-of select="@label/string()"/&gt;
        &lt;/xsl:when&gt;
        &lt;xsl:otherwise&gt;
          &lt;xsl:apply-templates select="." mode="m:crossref-number"/&gt;
        &lt;/xsl:otherwise&gt;
      &lt;/xsl:choose&gt;
    &lt;/xsl:if&gt;
  &lt;/xsl:variable&gt;

  &lt;xsl:variable name="label" as="item()*"&gt;
    &lt;xsl:if test="$properties?label"&gt;
      &lt;xsl:apply-templates select="." mode="m:crossref-label"&gt;
        &lt;xsl:with-param name="number" select="$number"/&gt;
        &lt;xsl:with-param name="title" select="$title"/&gt;
      &lt;/xsl:apply-templates&gt;
    &lt;/xsl:if&gt;
  &lt;/xsl:variable&gt;

&lt;!--
  &lt;xsl:message select="node-name(.), ' l:', $label,' n:', $number, ' t:', $title"/&gt;
--&gt;

  &lt;xsl:variable name="link" as="element()"&gt;
    &lt;span&gt;
      &lt;xsl:apply-templates select="." mode="m:crossref-prefix"&gt;
        &lt;xsl:with-param name="label" select="$label"/&gt;
        &lt;xsl:with-param name="number" select="$number"/&gt;
        &lt;xsl:with-param name="title" select="$title"/&gt;
      &lt;/xsl:apply-templates&gt;

      &lt;xsl:if test="not(empty($label))"&gt;
        &lt;span class="label"&gt;
          &lt;xsl:sequence select="$label"/&gt;
          &lt;xsl:variable name="sep" as="item()*"&gt;
            &lt;xsl:apply-templates select="." mode="m:crossref-label-separator"&gt;
              &lt;xsl:with-param name="label" select="$label"/&gt;
              &lt;xsl:with-param name="number" select="$number"/&gt;
              &lt;xsl:with-param name="title" select="$title"/&gt;
            &lt;/xsl:apply-templates&gt;
          &lt;/xsl:variable&gt;
          &lt;xsl:if test="not(empty($sep))"&gt;
            &lt;span class="sep"&gt;
              &lt;xsl:sequence select="$sep"/&gt;
            &lt;/span&gt;
          &lt;/xsl:if&gt;
        &lt;/span&gt;
      &lt;/xsl:if&gt;

      &lt;xsl:if test="not(empty($number))"&gt;
        &lt;span class="number"&gt;
          &lt;xsl:sequence select="$number"/&gt;
          &lt;xsl:if test="not(empty($title))"&gt;
            &lt;xsl:apply-templates select="." mode="m:crossref-number-separator"&gt;
              &lt;xsl:with-param name="number" select="$number"/&gt;
              &lt;xsl:with-param name="title" select="$title"/&gt;
            &lt;/xsl:apply-templates&gt;
          &lt;/xsl:if&gt;
        &lt;/span&gt;
      &lt;/xsl:if&gt;

      &lt;xsl:if test="not(empty($title))"&gt;
        &lt;span class="xreftitle"&gt;
          &lt;xsl:sequence select="$title"/&gt;
        &lt;/span&gt;
      &lt;/xsl:if&gt;

      &lt;xsl:apply-templates select="." mode="m:crossref-suffix"&gt;
        &lt;xsl:with-param name="title" select="$title"/&gt;
      &lt;/xsl:apply-templates&gt;
    &lt;/span&gt;
  &lt;/xsl:variable&gt;

  &lt;xsl:choose&gt;
    &lt;xsl:when test="normalize-space(string($link)) = ''"&gt;
      &lt;span class="error broken-link"&gt;here&lt;/span&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:sequence select="$link"/&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;

  &lt;xsl:if test="$properties?inherit"&gt;
    &lt;xsl:variable name="ancestor" as="element()?"&gt;
      &lt;xsl:evaluate context-item="." xpath="$properties?inherit"/&gt;
    &lt;/xsl:variable&gt;
    &lt;xsl:variable name="ancestor" as="item()*"&gt;
      &lt;xsl:apply-templates select="$ancestor" mode="m:crossref"/&gt;
    &lt;/xsl:variable&gt;
    &lt;xsl:if test="$ancestor"&gt;
      &lt;xsl:apply-templates select="." mode="m:crossref-inherit-separator"&gt;
        &lt;xsl:with-param name="title" select="$title"/&gt;
        &lt;xsl:with-param name="parent" select="parent"/&gt;
      &lt;/xsl:apply-templates&gt;
      &lt;xsl:sequence select="$ancestor"/&gt;
    &lt;/xsl:if&gt;
  &lt;/xsl:if&gt;
&lt;/xsl:template&gt;

&lt;!-- ============================================================ --&gt;

&lt;xsl:template match="*" mode="m:crossref-prefix"&gt;
  &lt;xsl:param name="label" as="item()*" required="yes"/&gt;
  &lt;xsl:param name="number" as="item()*" required="yes"/&gt;
  &lt;xsl:param name="title" as="item()*" required="yes"/&gt;

  &lt;xsl:variable name="properties" select="fp:crossref-properties(.)"/&gt;

  &lt;xsl:choose&gt;
    &lt;xsl:when test="$properties?prefix-key"&gt;
      &lt;span class="prefix"&gt;
        &lt;xsl:sequence select="f:gentext(., 'xref', $properties?prefix-key)"/&gt;
        &lt;span class="sep"&gt; &lt;/span&gt;
      &lt;/span&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="$properties?prefix"&gt;
      &lt;span class="prefix"&gt;
        &lt;xsl:sequence select="$properties?prefix"/&gt;
        &lt;span class="sep"&gt; &lt;/span&gt;
      &lt;/span&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise/&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:template&gt;

&lt;!-- ============================================================ --&gt;

&lt;xsl:template match="*" mode="m:crossref-label" as="item()*"&gt;
  &lt;xsl:param name="number" as="item()*" required="yes"/&gt;
  &lt;xsl:param name="title" as="item()*" required="yes"/&gt;
  &lt;xsl:apply-templates select="." mode="m:headline-label"&gt;
    &lt;xsl:with-param name="purpose" select="'crossref'"/&gt;
    &lt;xsl:with-param name="number" select="$number"/&gt;
    &lt;xsl:with-param name="title" select="$title"/&gt;
  &lt;/xsl:apply-templates&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:answer" mode="m:crossref-label" as="item()*"&gt;
  &lt;xsl:param name="number" as="item()*" required="yes"/&gt;
  &lt;xsl:param name="title" as="item()*" required="yes"/&gt;

  &lt;xsl:variable name="label"
                select="ancestor::db:qandaset[@defaultlabel][1]/@defaultlabel/string()"/&gt;
  &lt;xsl:variable name="label"
                select="if ($label)
                        then $label
                        else $qandaset-default-label"/&gt;

  &lt;xsl:choose&gt;
    &lt;xsl:when test="$label = 'none' or $label='number'"&gt;
      &lt;xsl:apply-templates select="preceding-sibling::db:question"
                           mode="m:crossref-label"&gt;
        &lt;xsl:with-param name="number" select="$number"/&gt;
        &lt;xsl:with-param name="title" select="$title"/&gt;
      &lt;/xsl:apply-templates&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:next-match&gt;
        &lt;xsl:with-param name="number" select="$number"/&gt;
        &lt;xsl:with-param name="title" select="$title"/&gt;
      &lt;/xsl:next-match&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:template&gt;

&lt;!-- ============================================================ --&gt;

&lt;xsl:template match="*" mode="m:crossref-label-separator"&gt;
  &lt;xsl:apply-templates select="." mode="m:headline-label-separator"&gt;
    &lt;xsl:with-param name="purpose" select="'crossref'"/&gt;
    &lt;xsl:with-param name="label" select="()"/&gt;
    &lt;xsl:with-param name="number" select="()"/&gt;
    &lt;xsl:with-param name="title" select="()"/&gt;
  &lt;/xsl:apply-templates&gt;
&lt;/xsl:template&gt;

&lt;!-- ============================================================ --&gt;

&lt;xsl:template match="*" mode="m:crossref-number"&gt;
  &lt;xsl:apply-templates select="." mode="m:headline-number"&gt;
    &lt;xsl:with-param name="purpose" select="'crossref'"/&gt;
  &lt;/xsl:apply-templates&gt;
&lt;/xsl:template&gt;

&lt;!-- ============================================================ --&gt;

&lt;xsl:template match="*" mode="m:crossref-number-separator"&gt;
  &lt;xsl:param name="number" as="item()*" required="yes"/&gt;
  &lt;xsl:param name="title" as="item()*" required="yes"/&gt;
  &lt;xsl:text&gt;, &lt;/xsl:text&gt;
&lt;/xsl:template&gt;

&lt;!-- ============================================================ --&gt;

&lt;xsl:template match="*" mode="m:crossref-title"&gt;
  &lt;xsl:apply-templates select="(db:info/db:titleabbrev, db:info/db:title)[1]"
                       mode="m:title"&gt;
    &lt;xsl:with-param name="purpose" select="'crossref'"/&gt;
  &lt;/xsl:apply-templates&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:bridgehead" mode="m:crossref-title"&gt;
  &lt;xsl:apply-templates select="." mode="m:title"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:varlistentry" mode="m:crossref-title"&gt;
  &lt;xsl:apply-templates select="db:term[1]" mode="m:title"&gt;
    &lt;xsl:with-param name="purpose" select="'crossref'"/&gt;
  &lt;/xsl:apply-templates&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:glossentry" mode="m:crossref-title"&gt;
  &lt;xsl:apply-templates select="db:glossterm[1]/node()"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:glossterm" mode="m:crossref-title"&gt;
  &lt;xsl:apply-templates/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:see|db:seealso" mode="m:crossref-title"&gt;
  &lt;xsl:apply-templates/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:area|db:areaset|db:co" mode="m:crossref-title"&gt;
  &lt;xsl:apply-templates select="." mode="m:callout-bug"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:production" mode="m:crossref-title"&gt;
  &lt;xsl:apply-templates select="db:lhs[1]" mode="m:title"&gt;
    &lt;xsl:with-param name="purpose" select="'crossref'"/&gt;
  &lt;/xsl:apply-templates&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:refentry" mode="m:crossref-title"&gt;
  &lt;xsl:apply-templates select="." mode="m:headline-title"&gt;
    &lt;xsl:with-param name="purpose" select="'crossref'"/&gt;
  &lt;/xsl:apply-templates&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:refnamediv" mode="m:crossref-title"&gt;
  &lt;xsl:apply-templates select="db:refname[1]" mode="m:headline-title"&gt;
    &lt;xsl:with-param name="purpose" select="'crossref'"/&gt;
  &lt;/xsl:apply-templates&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:bibliomixed|db:biblioentry" mode="m:crossref-title"&gt;
  &lt;xsl:choose&gt;
    &lt;xsl:when test="node()[1]/self::db:abbrev
                    or (node()[1]/text()
                        and normalize-space(node()[1]) = ''
                        and node()[2]/self::db:abbrev)"&gt;
      &lt;xsl:apply-templates select="db:abbrev[1]"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="@xml:id"&gt;
      &lt;xsl:value-of select="@xml:id"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:sequence select="()"/&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:template&gt;

&lt;!-- ============================================================ --&gt;

&lt;xsl:template match="*" mode="m:crossref-suffix"&gt;
  &lt;xsl:param name="title" as="item()*" required="yes"/&gt;

  &lt;xsl:sequence select="()"/&gt;
&lt;/xsl:template&gt;

&lt;!-- ============================================================ --&gt;

&lt;xsl:template match="*" mode="m:crossref-inherit-separator"&gt;
  &lt;xsl:param name="title" as="item()*" required="yes"/&gt;
  &lt;xsl:param name="parent" as="item()*" required="yes"/&gt;
  &lt;xsl:variable name="properties" select="fp:crossref-properties(.)"/&gt;
  &lt;xsl:choose&gt;
    &lt;xsl:when test="$properties?inherit-separator-key"&gt;
      &lt;xsl:sequence select="error((), 'bang')"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="$properties?inherit-separator"&gt;
      &lt;span class="sep"&gt;
        &lt;xsl:text&gt; &lt;/xsl:text&gt;
        &lt;xsl:sequence select="$properties?inherit-separator"/&gt;
        &lt;xsl:text&gt; &lt;/xsl:text&gt;
      &lt;/span&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise/&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:template&gt;

&lt;!-- ============================================================ --&gt;

&lt;xsl:function name="fp:document-crossref-properties" as="element()*" cache="yes"&gt;
  &lt;xsl:param name="node" as="element()"/&gt;
  &lt;xsl:sequence select="root($node)/*/db:info/v:crossref"/&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="fp:crossref-properties" as="map(*)" cache="yes"&gt;
  &lt;xsl:param name="node" as="element()"/&gt;

  &lt;xsl:variable name="prop" as="element()?"&gt;
    &lt;xsl:iterate select="(fp:document-crossref-properties($node), $v:xref-properties)"&gt;
      &lt;xsl:variable name="test" as="element()*"&gt;
        &lt;xsl:evaluate context-item="$node" xpath="@xpath"/&gt;
      &lt;/xsl:variable&gt;

      &lt;xsl:choose&gt;
        &lt;xsl:when test="$test"&gt;
          &lt;xsl:sequence select="."/&gt;
          &lt;xsl:break/&gt;
        &lt;/xsl:when&gt;
        &lt;xsl:otherwise&gt;
          &lt;xsl:next-iteration/&gt;
        &lt;/xsl:otherwise&gt;
      &lt;/xsl:choose&gt;
    &lt;/xsl:iterate&gt;
  &lt;/xsl:variable&gt;

  &lt;xsl:variable name="number" as="xs:boolean"
                select="(exists($prop/@number-format)
                         or (exists($prop/@number) and f:is-true($prop/@number)))
                        and (not(exists($prop/@number)) or f:is-true($prop/@number))"/&gt;

  &lt;xsl:variable name="format" as="xs:string?"
                select="if ($number)
                        then ($prop/@number-format, '1')[1]
                        else ()"/&gt;

  &lt;xsl:variable name="label-toc" as="xs:boolean"
                select="if ($prop/@label-toc)
                        then f:is-true($prop/@label-toc)
                        else f:is-true($prop/@label)"/&gt;

  &lt;xsl:message use-when="false()"
               select="node-name($node), ' ', f:is-true($prop/@label), ' ', $number"/&gt;

  &lt;xsl:sequence select="map {
    'prefix': $prop/@prefix/string(),
    'prefix-key': $prop/@prefix-key/string(),
    'label': f:is-true($prop/@label),
    'label-toc': $label-toc,
    'number': $number,
    'number-format': $format,
    'title': f:is-true($prop/@title),
    'inherit': $prop/@inherit/string(),
    'inherit-separator': $prop/@inherit-separator/string(),
    'suffix': $prop/@suffix/string(),
    'suffix-key': $prop/@suffix-key/string()
    }"/&gt; 
&lt;/xsl:function&gt;

&lt;/xsl:stylesheet&gt;
</code></pre></td></tr></table></div></div></div></div><div class="stylesheet" id="S-10102"><h3>attributes.xsl</h3><p><span><span class="template all">26 templates</span></span></p><div class="instructions"><div class="title closed">Instructions</div><div class="body"><div id="S-10102-t-1" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:article  as attribute()*</div><div class="props"><div class="calls">Calls: <a href="#S-28936-docbook.org.ns.docbook.functions.attributes,4">f:attributes()</a>, <a href="#S-59718-docbook.org.ns.docbook.functions.chunk,1">f:chunk()</a>, <a href="#S-28936-docbook.org.ns.docbook.functions.generate-id,1">f:generate-id()</a></div><div class="mode">Mode: <code>m:attributes</code></div><div class="matches">Matches: <code>db:article</code></div></div></div><div id="S-10102-t-2" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:acknowledgements|db:appendi…  as attribute()*</div><div class="props"><div class="calls">Calls: <a href="#S-28936-docbook.org.ns.docbook.functions.attributes,4">f:attributes()</a>, <a href="#S-59718-docbook.org.ns.docbook.functions.chunk,1">f:chunk()</a>, <a href="#S-28936-docbook.org.ns.docbook.functions.generate-id,1">f:generate-id()</a></div><div class="mode">Mode: <code>m:attributes</code></div><div class="matches">Matches: <code>db:acknowledgements</code>, <code>db:appendix</code>, <code>db:book</code>, <code>db:chapter</code>, <code>db:colophon</code>, <code>db:dedication</code>, <code>db:part</code>, <code>db:partintro</code>, <code>db:preface</code>, <code>db:refentry</code>, <code>db:reference</code>, <code>db:sect1</code>, <code>db:sect2</code>, <code>db:sect3</code>, <code>db:sect4</code>, <code>db:sect5</code>, <code>db:section</code>, <code>db:topic</code></div></div></div><div id="S-10102-t-3" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:orderedlist  as attribute()*</div><div class="props"><div class="calls">Calls: <a href="#S-28936-docbook.org.ns.docbook.functions.attributes,4">f:attributes()</a>, <a href="#S-59718-docbook.org.ns.docbook.functions.chunk,1">f:chunk()</a></div><div class="mode">Mode: <code>m:attributes</code></div><div class="matches">Matches: <code>db:orderedlist</code></div></div></div><div id="S-10102-t-4" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:listitem|db:member|db:para|…  as attribute()*</div><div class="props"><div class="calls">Calls: <a href="#S-28936-docbook.org.ns.docbook.functions.attributes,4">f:attributes()</a>, <a href="#S-59718-docbook.org.ns.docbook.functions.chunk,1">f:chunk()</a></div><div class="mode">Mode: <code>m:attributes</code></div><div class="matches">Matches: <code>db:listitem</code>, <code>db:member</code>, <code>db:para</code>, <code>db:tbody</code>, <code>db:tfoot</code>, <code>db:thead</code></div></div></div><div id="S-10102-t-5" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:simplelist  as attribute()*</div><div class="props"><div class="calls">Calls: <a href="#S-28936-docbook.org.ns.docbook.functions.attributes,4">f:attributes()</a>, <a href="#S-59718-docbook.org.ns.docbook.functions.chunk,1">f:chunk()</a></div><div class="mode">Mode: <code>m:attributes</code></div><div class="matches">Matches: <code>db:simplelist</code></div></div></div><div id="S-10102-t-6" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:variablelist  as attribute()*</div><div class="props"><div class="uses">Uses: <a href="#S-26643-..variablelist-termlength-threshold">$variablelist-termlength-threshold</a></div><div class="calls">Calls: <a href="#S-28936-docbook.org.ns.docbook.functions.attributes,4">f:attributes()</a>, <a href="#S-59718-docbook.org.ns.docbook.functions.chunk,1">f:chunk()</a></div><div class="mode">Mode: <code>m:attributes</code></div><div class="matches">Matches: <code>db:variablelist</code></div></div></div><div id="S-10102-t-7" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:glossentry  as attribute()*</div><div class="props"><div class="calls">Calls: <a href="#S-28936-docbook.org.ns.docbook.functions.attributes,4">f:attributes()</a>, <a href="#S-59718-docbook.org.ns.docbook.functions.chunk,1">f:chunk()</a>, <a href="#S-28936-docbook.org.ns.docbook.functions.generate-id,1">f:generate-id()</a></div><div class="mode">Mode: <code>m:attributes</code></div><div class="matches">Matches: <code>db:glossentry</code></div></div></div><div id="S-10102-t-8" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:bridgehead  as attribute()*</div><div class="props"><div class="calls">Calls: <a href="#S-28936-docbook.org.ns.docbook.functions.attributes,4">f:attributes()</a>, <a href="#S-59718-docbook.org.ns.docbook.functions.chunk,1">f:chunk()</a></div><div class="mode">Mode: <code>m:attributes</code></div><div class="matches">Matches: <code>db:bridgehead</code></div></div></div><div id="S-10102-t-9" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:informaltable|db:table  as attribute()*</div><div class="props"><div class="calls">Calls: <a href="#S-28936-docbook.org.ns.docbook.functions.attributes,4">f:attributes()</a>, <a href="#S-59718-docbook.org.ns.docbook.functions.chunk,1">f:chunk()</a>, <a href="#S-28936-docbook.org.ns.docbook.functions.generate-id,1">f:generate-id()</a></div><div class="mode">Mode: <code>m:attributes</code></div><div class="matches">Matches: <code>db:informaltable</code>, <code>db:table</code></div></div></div><div id="S-10102-t-10" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:informaltable|db:table  as attribute()*</div><div class="props"><div class="calls">Calls: <a href="#S-28936-docbook.org.ns.docbook.functions.attributes,4">f:attributes()</a>, <a href="#S-59718-docbook.org.ns.docbook.functions.chunk,1">f:chunk()</a></div><div class="mode">Mode: <code>m:attributes</code></div><div class="matches">Matches: <code>db:informaltable</code>, <code>db:table</code></div></div></div><div id="S-10102-t-11" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:row  as attribute()*</div><div class="props"><div class="calls">Calls: <a href="#S-28936-docbook.org.ns.docbook.functions.attributes,4">f:attributes()</a></div><div class="mode">Mode: <code>m:attributes</code></div><div class="matches">Matches: <code>db:row</code></div></div></div><div id="S-10102-t-12" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:audiodata|db:imagedata|db:v…  as attribute()*</div><div class="props"><div class="calls">Calls: <a href="#S-28936-docbook.org.ns.docbook.functions.attributes,4">f:attributes()</a>, <a href="#S-59718-docbook.org.ns.docbook.functions.chunk,1">f:chunk()</a></div><div class="mode">Mode: <code>m:attributes</code></div><div class="matches">Matches: <code>db:audiodata</code>, <code>db:imagedata</code>, <code>db:videodata</code></div></div></div><div id="S-10102-t-13" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:caution|db:danger|db:import…  as attribute()*</div><div class="props"><div class="calls">Calls: <a href="#S-28936-docbook.org.ns.docbook.functions.attributes,4">f:attributes()</a>, <a href="#S-59718-docbook.org.ns.docbook.functions.chunk,1">f:chunk()</a></div><div class="mode">Mode: <code>m:attributes</code></div><div class="matches">Matches: <code>db:caution</code>, <code>db:danger</code>, <code>db:important</code>, <code>db:note</code>, <code>db:tip</code>, <code>db:warning</code></div></div></div><div id="S-10102-t-14" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:address|db:classsynopsisinf…  as attribute()*</div><div class="props"><div class="calls">Calls: <a href="#S-28936-docbook.org.ns.docbook.functions.attributes,4">f:attributes()</a>, <a href="#S-59718-docbook.org.ns.docbook.functions.chunk,1">f:chunk()</a>, <a href="#S-56456-docbook.org.ns.docbook.functions.verbatim-numbered,1">f:verbatim-numbered()</a>, <a href="#S-56456-docbook.org.ns.docbook.functions.verbatim-style,1">f:verbatim-style()</a></div><div class="mode">Mode: <code>m:attributes</code></div><div class="matches">Matches: <code>db:address</code>, <code>db:classsynopsisinfo</code>, <code>db:funcsynopsisinfo</code>, <code>db:literallayout</code>, <code>db:programlisting</code>, <code>db:screen</code>, <code>db:synopsis</code></div></div></div><div id="S-10102-t-15" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:lhs  as attribute()*</div><div class="props"><div class="calls">Calls: <a href="#S-28936-docbook.org.ns.docbook.functions.attributes,4">f:attributes()</a>, <a href="#S-59718-docbook.org.ns.docbook.functions.chunk,1">f:chunk()</a></div><div class="mode">Mode: <code>m:attributes</code></div><div class="matches">Matches: <code>db:lhs</code></div></div></div><div id="S-10102-t-16" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:rhs  as attribute()*</div><div class="props"><div class="calls">Calls: <a href="#S-28936-docbook.org.ns.docbook.functions.attributes,2">f:attributes()</a>, <a href="#S-28936-docbook.org.ns.docbook.functions.attributes,4">f:attributes()</a>, <a href="#S-59718-docbook.org.ns.docbook.functions.chunk,1">f:chunk()</a></div><div class="mode">Mode: <code>m:attributes</code></div><div class="matches">Matches: <code>db:rhs</code></div></div></div><div id="S-10102-t-17" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:personname  as attribute()*</div><div class="props"><div class="calls">Calls: <a href="#S-28936-docbook.org.ns.docbook.functions.attributes,4">f:attributes()</a>, <a href="#S-59718-docbook.org.ns.docbook.functions.chunk,1">f:chunk()</a></div><div class="mode">Mode: <code>m:attributes</code></div><div class="matches">Matches: <code>db:personname</code></div></div></div><div id="S-10102-t-18" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:link  as attribute()*</div><div class="props"><div class="calls">Calls: <a href="#S-28936-docbook.org.ns.docbook.functions.attributes,2">f:attributes()</a>, <a href="#S-59718-docbook.org.ns.docbook.functions.chunk,1">f:chunk()</a></div><div class="mode">Mode: <code>m:attributes</code></div><div class="matches">Matches: <code>db:link</code></div></div></div><div id="S-10102-t-19" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:equation|db:example|db:figu…  as attribute()*</div><div class="props"><div class="uses">Uses: <a href="#S-26643-..default-float-style">$default-float-style</a></div><div class="calls">Calls: <a href="#S-28936-docbook.org.ns.docbook.functions.attributes,4">f:attributes()</a>, <a href="#S-59718-docbook.org.ns.docbook.functions.chunk,1">f:chunk()</a>, <a href="#S-28936-docbook.org.ns.docbook.functions.generate-id,1">f:generate-id()</a></div><div class="mode">Mode: <code>m:attributes</code></div><div class="matches">Matches: <code>db:equation</code>, <code>db:example</code>, <code>db:figure</code>, <code>db:formalgroup</code>, <code>db:informalequation</code>, <code>db:informalexample</code>, <code>db:informalfigure</code></div></div></div><div id="S-10102-t-20" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:answer|db:bibliodiv|db:bibl…  as attribute()*</div><div class="props"><div class="calls">Calls: <a href="#S-28936-docbook.org.ns.docbook.functions.attributes,2">f:attributes()</a>, <a href="#S-59718-docbook.org.ns.docbook.functions.chunk,1">f:chunk()</a>, <a href="#S-28936-docbook.org.ns.docbook.functions.generate-id,1">f:generate-id()</a></div><div class="mode">Mode: <code>m:attributes</code></div><div class="matches">Matches: <code>db:answer</code>, <code>db:bibliodiv</code>, <code>db:bibliography</code>, <code>db:glossary</code>, <code>db:index</code>, <code>db:indexdiv</code>, <code>db:lgossdiv</code>, <code>db:qandadiv</code>, <code>db:qandaentry</code>, <code>db:qandaset</code>, <code>db:question</code></div></div></div><div id="S-10102-t-21" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:annotation  as attribute()*</div><div class="props"><div class="calls">Calls: <a href="#S-28936-docbook.org.ns.docbook.functions.attributes,4">f:attributes()</a>, <a href="#S-59718-docbook.org.ns.docbook.functions.chunk,1">f:chunk()</a>, <a href="#S-28936-docbook.org.ns.docbook.functions.generate-id,1">f:generate-id()</a></div><div class="mode">Mode: <code>m:attributes</code></div><div class="matches">Matches: <code>db:annotation</code></div></div></div><div id="S-10102-t-22" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ *  as attribute()*</div><div class="props"><div class="calls">Calls: <a href="#S-28936-docbook.org.ns.docbook.functions.attributes,2">f:attributes()</a>, <a href="#S-59718-docbook.org.ns.docbook.functions.chunk,1">f:chunk()</a></div><div class="mode">Mode: <code>m:attributes</code></div><div class="matches">Matches: <code>*</code></div></div></div><div id="S-10102-t-23" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ @*</div><div class="props"><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>@*</code></div></div></div><div id="S-10102-t-24" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ @xml:id</div><div class="props"><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>@xml:id</code></div></div></div><div id="S-10102-t-25" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ @xml:lang</div><div class="props"><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>@xml:lang</code></div></div></div><div id="S-10102-t-26" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ @dir</div><div class="props"><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>@dir</code></div></div></div></div></div><div class="source-code"><div class="title closed">Source code</div><div class="body"><div><table><tr><td valign="top" align="right"><pre class="fake-prism"><span id="line-S-10102-1">1</span>
<span id="line-S-10102-2"><span class="lno">2</span></span>
<span id="line-S-10102-3"><span class="lno">3</span></span>
<span id="line-S-10102-4"><span class="lno">4</span></span>
<span id="line-S-10102-5">5</span>
<span id="line-S-10102-6"><span class="lno">6</span></span>
<span id="line-S-10102-7"><span class="lno">7</span></span>
<span id="line-S-10102-8"><span class="lno">8</span></span>
<span id="line-S-10102-9"><span class="lno">9</span></span>
<span id="line-S-10102-10">10</span>
<span id="line-S-10102-11"><span class="lno">11</span></span>
<span id="line-S-10102-12"><span class="lno">12</span></span>
<span id="line-S-10102-13"><span class="lno">13</span></span>
<span id="line-S-10102-14"><span class="lno">14</span></span>
<span id="line-S-10102-15">15</span>
<span id="line-S-10102-16"><span class="lno">16</span></span>
<span id="line-S-10102-17"><span class="lno">17</span></span>
<span id="line-S-10102-18"><span class="lno">18</span></span>
<span id="line-S-10102-19"><span class="lno">19</span></span>
<span id="line-S-10102-20">20</span>
<span id="line-S-10102-21"><span class="lno">21</span></span>
<span id="line-S-10102-22"><span class="lno">22</span></span>
<span id="line-S-10102-23"><span class="lno">23</span></span>
<span id="line-S-10102-24"><span class="lno">24</span></span>
<span id="line-S-10102-25">25</span>
<span id="line-S-10102-26"><span class="lno">26</span></span>
<span id="line-S-10102-27"><span class="lno">27</span></span>
<span id="line-S-10102-28"><span class="lno">28</span></span>
<span id="line-S-10102-29"><span class="lno">29</span></span>
<span id="line-S-10102-30">30</span>
<span id="line-S-10102-31"><span class="lno">31</span></span>
<span id="line-S-10102-32"><span class="lno">32</span></span>
<span id="line-S-10102-33"><span class="lno">33</span></span>
<span id="line-S-10102-34"><span class="lno">34</span></span>
<span id="line-S-10102-35">35</span>
<span id="line-S-10102-36"><span class="lno">36</span></span>
<span id="line-S-10102-37"><span class="lno">37</span></span>
<span id="line-S-10102-38"><span class="lno">38</span></span>
<span id="line-S-10102-39"><span class="lno">39</span></span>
<span id="line-S-10102-40">40</span>
<span id="line-S-10102-41"><span class="lno">41</span></span>
<span id="line-S-10102-42"><span class="lno">42</span></span>
<span id="line-S-10102-43"><span class="lno">43</span></span>
<span id="line-S-10102-44"><span class="lno">44</span></span>
<span id="line-S-10102-45">45</span>
<span id="line-S-10102-46"><span class="lno">46</span></span>
<span id="line-S-10102-47"><span class="lno">47</span></span>
<span id="line-S-10102-48"><span class="lno">48</span></span>
<span id="line-S-10102-49"><span class="lno">49</span></span>
<span id="line-S-10102-50">50</span>
<span id="line-S-10102-51"><span class="lno">51</span></span>
<span id="line-S-10102-52"><span class="lno">52</span></span>
<span id="line-S-10102-53"><span class="lno">53</span></span>
<span id="line-S-10102-54"><span class="lno">54</span></span>
<span id="line-S-10102-55">55</span>
<span id="line-S-10102-56"><span class="lno">56</span></span>
<span id="line-S-10102-57"><span class="lno">57</span></span>
<span id="line-S-10102-58"><span class="lno">58</span></span>
<span id="line-S-10102-59"><span class="lno">59</span></span>
<span id="line-S-10102-60">60</span>
<span id="line-S-10102-61"><span class="lno">61</span></span>
<span id="line-S-10102-62"><span class="lno">62</span></span>
<span id="line-S-10102-63"><span class="lno">63</span></span>
<span id="line-S-10102-64"><span class="lno">64</span></span>
<span id="line-S-10102-65">65</span>
<span id="line-S-10102-66"><span class="lno">66</span></span>
<span id="line-S-10102-67"><span class="lno">67</span></span>
<span id="line-S-10102-68"><span class="lno">68</span></span>
<span id="line-S-10102-69"><span class="lno">69</span></span>
<span id="line-S-10102-70">70</span>
<span id="line-S-10102-71"><span class="lno">71</span></span>
<span id="line-S-10102-72"><span class="lno">72</span></span>
<span id="line-S-10102-73"><span class="lno">73</span></span>
<span id="line-S-10102-74"><span class="lno">74</span></span>
<span id="line-S-10102-75">75</span>
<span id="line-S-10102-76"><span class="lno">76</span></span>
<span id="line-S-10102-77"><span class="lno">77</span></span>
<span id="line-S-10102-78"><span class="lno">78</span></span>
<span id="line-S-10102-79"><span class="lno">79</span></span>
<span id="line-S-10102-80">80</span>
<span id="line-S-10102-81"><span class="lno">81</span></span>
<span id="line-S-10102-82"><span class="lno">82</span></span>
<span id="line-S-10102-83"><span class="lno">83</span></span>
<span id="line-S-10102-84"><span class="lno">84</span></span>
<span id="line-S-10102-85">85</span>
<span id="line-S-10102-86"><span class="lno">86</span></span>
<span id="line-S-10102-87"><span class="lno">87</span></span>
<span id="line-S-10102-88"><span class="lno">88</span></span>
<span id="line-S-10102-89"><span class="lno">89</span></span>
<span id="line-S-10102-90">90</span>
<span id="line-S-10102-91"><span class="lno">91</span></span>
<span id="line-S-10102-92"><span class="lno">92</span></span>
<span id="line-S-10102-93"><span class="lno">93</span></span>
<span id="line-S-10102-94"><span class="lno">94</span></span>
<span id="line-S-10102-95">95</span>
<span id="line-S-10102-96"><span class="lno">96</span></span>
<span id="line-S-10102-97"><span class="lno">97</span></span>
<span id="line-S-10102-98"><span class="lno">98</span></span>
<span id="line-S-10102-99"><span class="lno">99</span></span>
<span id="line-S-10102-100">100</span>
<span id="line-S-10102-101"><span class="lno">101</span></span>
<span id="line-S-10102-102"><span class="lno">102</span></span>
<span id="line-S-10102-103"><span class="lno">103</span></span>
<span id="line-S-10102-104"><span class="lno">104</span></span>
<span id="line-S-10102-105">105</span>
<span id="line-S-10102-106"><span class="lno">106</span></span>
<span id="line-S-10102-107"><span class="lno">107</span></span>
<span id="line-S-10102-108"><span class="lno">108</span></span>
<span id="line-S-10102-109"><span class="lno">109</span></span>
<span id="line-S-10102-110">110</span>
<span id="line-S-10102-111"><span class="lno">111</span></span>
<span id="line-S-10102-112"><span class="lno">112</span></span>
<span id="line-S-10102-113"><span class="lno">113</span></span>
<span id="line-S-10102-114"><span class="lno">114</span></span>
<span id="line-S-10102-115">115</span>
<span id="line-S-10102-116"><span class="lno">116</span></span>
<span id="line-S-10102-117"><span class="lno">117</span></span>
<span id="line-S-10102-118"><span class="lno">118</span></span>
<span id="line-S-10102-119"><span class="lno">119</span></span>
<span id="line-S-10102-120">120</span>
<span id="line-S-10102-121"><span class="lno">121</span></span>
<span id="line-S-10102-122"><span class="lno">122</span></span>
<span id="line-S-10102-123"><span class="lno">123</span></span>
<span id="line-S-10102-124"><span class="lno">124</span></span>
<span id="line-S-10102-125">125</span>
<span id="line-S-10102-126"><span class="lno">126</span></span>
<span id="line-S-10102-127"><span class="lno">127</span></span>
<span id="line-S-10102-128"><span class="lno">128</span></span>
<span id="line-S-10102-129"><span class="lno">129</span></span>
<span id="line-S-10102-130">130</span>
<span id="line-S-10102-131"><span class="lno">131</span></span>
<span id="line-S-10102-132"><span class="lno">132</span></span>
<span id="line-S-10102-133"><span class="lno">133</span></span>
<span id="line-S-10102-134"><span class="lno">134</span></span>
<span id="line-S-10102-135">135</span>
<span id="line-S-10102-136"><span class="lno">136</span></span>
<span id="line-S-10102-137"><span class="lno">137</span></span>
<span id="line-S-10102-138"><span class="lno">138</span></span>
<span id="line-S-10102-139"><span class="lno">139</span></span>
<span id="line-S-10102-140">140</span>
<span id="line-S-10102-141"><span class="lno">141</span></span>
<span id="line-S-10102-142"><span class="lno">142</span></span>
<span id="line-S-10102-143"><span class="lno">143</span></span>
<span id="line-S-10102-144"><span class="lno">144</span></span>
<span id="line-S-10102-145">145</span>
<span id="line-S-10102-146"><span class="lno">146</span></span>
<span id="line-S-10102-147"><span class="lno">147</span></span>
<span id="line-S-10102-148"><span class="lno">148</span></span>
<span id="line-S-10102-149"><span class="lno">149</span></span>
<span id="line-S-10102-150">150</span>
<span id="line-S-10102-151"><span class="lno">151</span></span>
<span id="line-S-10102-152"><span class="lno">152</span></span>
<span id="line-S-10102-153"><span class="lno">153</span></span>
<span id="line-S-10102-154"><span class="lno">154</span></span>
<span id="line-S-10102-155">155</span>
<span id="line-S-10102-156"><span class="lno">156</span></span>
<span id="line-S-10102-157"><span class="lno">157</span></span>
<span id="line-S-10102-158"><span class="lno">158</span></span>
<span id="line-S-10102-159"><span class="lno">159</span></span>
<span id="line-S-10102-160">160</span>
<span id="line-S-10102-161"><span class="lno">161</span></span>
<span id="line-S-10102-162"><span class="lno">162</span></span>
<span id="line-S-10102-163"><span class="lno">163</span></span>
<span id="line-S-10102-164"><span class="lno">164</span></span>
<span id="line-S-10102-165">165</span>
<span id="line-S-10102-166"><span class="lno">166</span></span>
<span id="line-S-10102-167"><span class="lno">167</span></span>
<span id="line-S-10102-168"><span class="lno">168</span></span>
<span id="line-S-10102-169"><span class="lno">169</span></span>
<span id="line-S-10102-170">170</span>
<span id="line-S-10102-171"><span class="lno">171</span></span>
<span id="line-S-10102-172"><span class="lno">172</span></span>
<span id="line-S-10102-173"><span class="lno">173</span></span>
<span id="line-S-10102-174"><span class="lno">174</span></span>
<span id="line-S-10102-175">175</span>
<span id="line-S-10102-176"><span class="lno">176</span></span>
<span id="line-S-10102-177"><span class="lno">177</span></span>
<span id="line-S-10102-178"><span class="lno">178</span></span>
<span id="line-S-10102-179"><span class="lno">179</span></span>
<span id="line-S-10102-180">180</span>
<span id="line-S-10102-181"><span class="lno">181</span></span>
<span id="line-S-10102-182"><span class="lno">182</span></span>
<span id="line-S-10102-183"><span class="lno">183</span></span>
<span id="line-S-10102-184"><span class="lno">184</span></span>
<span id="line-S-10102-185">185</span>
<span id="line-S-10102-186"><span class="lno">186</span></span>
<span id="line-S-10102-187"><span class="lno">187</span></span>
<span id="line-S-10102-188"><span class="lno">188</span></span>
<span id="line-S-10102-189"><span class="lno">189</span></span>
<span id="line-S-10102-190">190</span>
<span id="line-S-10102-191"><span class="lno">191</span></span>
<span id="line-S-10102-192"><span class="lno">192</span></span>
<span id="line-S-10102-193"><span class="lno">193</span></span>
<span id="line-S-10102-194"><span class="lno">194</span></span>
<span id="line-S-10102-195">195</span>
<span id="line-S-10102-196"><span class="lno">196</span></span>
<span id="line-S-10102-197"><span class="lno">197</span></span>
<span id="line-S-10102-198"><span class="lno">198</span></span>
<span id="line-S-10102-199"><span class="lno">199</span></span>
<span id="line-S-10102-200">200</span>
<span id="line-S-10102-201"><span class="lno">201</span></span>
<span id="line-S-10102-202"><span class="lno">202</span></span>
<span id="line-S-10102-203"><span class="lno">203</span></span>
<span id="line-S-10102-204"><span class="lno">204</span></span>
<span id="line-S-10102-205">205</span>
<span id="line-S-10102-206"><span class="lno">206</span></span>
<span id="line-S-10102-207"><span class="lno">207</span></span>
<span id="line-S-10102-208"><span class="lno">208</span></span>
<span id="line-S-10102-209"><span class="lno">209</span></span>
<span id="line-S-10102-210">210</span>
<span id="line-S-10102-211"><span class="lno">211</span></span>
<span id="line-S-10102-212"><span class="lno">212</span></span>
<span id="line-S-10102-213"><span class="lno">213</span></span>
<span id="line-S-10102-214"><span class="lno">214</span></span>
<span id="line-S-10102-215">215</span>
<span id="line-S-10102-216"><span class="lno">216</span></span>
<span id="line-S-10102-217"><span class="lno">217</span></span>
<span id="line-S-10102-218"><span class="lno">218</span></span>
<span id="line-S-10102-219"><span class="lno">219</span></span>
<span id="line-S-10102-220">220</span>
<span id="line-S-10102-221"><span class="lno">221</span></span>
<span id="line-S-10102-222"><span class="lno">222</span></span>
<span id="line-S-10102-223"><span class="lno">223</span></span>
<span id="line-S-10102-224"><span class="lno">224</span></span>
<span id="line-S-10102-225">225</span>
<span id="line-S-10102-226"><span class="lno">226</span></span>
<span id="line-S-10102-227"><span class="lno">227</span></span>
<span id="line-S-10102-228"><span class="lno">228</span></span>
<span id="line-S-10102-229"><span class="lno">229</span></span>
<span id="line-S-10102-230">230</span>
<span id="line-S-10102-231"><span class="lno">231</span></span>
<span id="line-S-10102-232"><span class="lno">232</span></span>
<span id="line-S-10102-233"><span class="lno">233</span></span>
<span id="line-S-10102-234"><span class="lno">234</span></span>
<span id="line-S-10102-235">235</span>
<span id="line-S-10102-236"><span class="lno">236</span></span>
<span id="line-S-10102-237"><span class="lno">237</span></span>
<span id="line-S-10102-238"><span class="lno">238</span></span>
<span id="line-S-10102-239"><span class="lno">239</span></span>
<span id="line-S-10102-240">240</span>
<span id="line-S-10102-241"><span class="lno">241</span></span>
<span id="line-S-10102-242"><span class="lno">242</span></span>
<span id="line-S-10102-243"><span class="lno">243</span></span>
<span id="line-S-10102-244"><span class="lno">244</span></span>
<span id="line-S-10102-245">245</span>
<span id="line-S-10102-246"><span class="lno">246</span></span>
<span id="line-S-10102-247"><span class="lno">247</span></span>
<span id="line-S-10102-248"><span class="lno">248</span></span>
<span id="line-S-10102-249"><span class="lno">249</span></span>
<span id="line-S-10102-250">250</span>
<span id="line-S-10102-251"><span class="lno">251</span></span>
<span id="line-S-10102-252"><span class="lno">252</span></span>
<span id="line-S-10102-253"><span class="lno">253</span></span>
<span id="line-S-10102-254"><span class="lno">254</span></span>
<span id="line-S-10102-255">255</span>
<span id="line-S-10102-256"><span class="lno">256</span></span>
<span id="line-S-10102-257"><span class="lno">257</span></span>
<span id="line-S-10102-258"><span class="lno">258</span></span>
<span id="line-S-10102-259"><span class="lno">259</span></span>
<span id="line-S-10102-260">260</span>
<span id="line-S-10102-261"><span class="lno">261</span></span>
<span id="line-S-10102-262"><span class="lno">262</span></span>
<span id="line-S-10102-263"><span class="lno">263</span></span>
<span id="line-S-10102-264"><span class="lno">264</span></span>
<span id="line-S-10102-265">265</span>
<span id="line-S-10102-266"><span class="lno">266</span></span>
<span id="line-S-10102-267"><span class="lno">267</span></span>
<span id="line-S-10102-268"><span class="lno">268</span></span>
<span id="line-S-10102-269"><span class="lno">269</span></span>
<span id="line-S-10102-270">270</span>
<span id="line-S-10102-271"><span class="lno">271</span></span>
<span id="line-S-10102-272"><span class="lno">272</span></span>
<span id="line-S-10102-273"><span class="lno">273</span></span>
<span id="line-S-10102-274"><span class="lno">274</span></span>
<span id="line-S-10102-275">275</span>
<span id="line-S-10102-276"><span class="lno">276</span></span>
<span id="line-S-10102-277"><span class="lno">277</span></span>
<span id="line-S-10102-278"><span class="lno">278</span></span>
<span id="line-S-10102-279"><span class="lno">279</span></span>
<span id="line-S-10102-280">280</span>
<span id="line-S-10102-281"><span class="lno">281</span></span>
<span id="line-S-10102-282"><span class="lno">282</span></span>
<span id="line-S-10102-283"><span class="lno">283</span></span>
<span id="line-S-10102-284"><span class="lno">284</span></span>
<span id="line-S-10102-285">285</span>
<span id="line-S-10102-286"><span class="lno">286</span></span>
<span id="line-S-10102-287"><span class="lno">287</span></span>
<span id="line-S-10102-288"><span class="lno">288</span></span>
<span id="line-S-10102-289"><span class="lno">289</span></span>
<span id="line-S-10102-290">290</span>
<span id="line-S-10102-291"><span class="lno">291</span></span>
<span id="line-S-10102-292"><span class="lno">292</span></span>
<span id="line-S-10102-293"><span class="lno">293</span></span>
<span id="line-S-10102-294"><span class="lno">294</span></span>
<span id="line-S-10102-295">295</span>
<span id="line-S-10102-296"><span class="lno">296</span></span>
<span id="line-S-10102-297"><span class="lno">297</span></span>
<span id="line-S-10102-298"><span class="lno">298</span></span>
<span id="line-S-10102-299"><span class="lno">299</span></span>
<span id="line-S-10102-300">300</span>
<span id="line-S-10102-301"><span class="lno">301</span></span>
<span id="line-S-10102-302"><span class="lno">302</span></span>
<span id="line-S-10102-303"><span class="lno">303</span></span>
<span id="line-S-10102-304"><span class="lno">304</span></span>
<span id="line-S-10102-305">305</span>
<span id="line-S-10102-306"><span class="lno">306</span></span>
<span id="line-S-10102-307"><span class="lno">307</span></span>
<span id="line-S-10102-308"><span class="lno">308</span></span>
<span id="line-S-10102-309"><span class="lno">309</span></span>
<span id="line-S-10102-310">310</span>
<span id="line-S-10102-311"><span class="lno">311</span></span>
<span id="line-S-10102-312"><span class="lno">312</span></span>
<span id="line-S-10102-313"><span class="lno">313</span></span>
<span id="line-S-10102-314"><span class="lno">314</span></span>
<span id="line-S-10102-315">315</span>
<span id="line-S-10102-316"><span class="lno">316</span></span>
<span id="line-S-10102-317"><span class="lno">317</span></span>
<span id="line-S-10102-318"><span class="lno">318</span></span>
<span id="line-S-10102-319"><span class="lno">319</span></span>
<span id="line-S-10102-320">320</span>
<span id="line-S-10102-321"><span class="lno">321</span></span>
<span id="line-S-10102-322"><span class="lno">322</span></span>
<span id="line-S-10102-323"><span class="lno">323</span></span>
<span id="line-S-10102-324"><span class="lno">324</span></span>
<span id="line-S-10102-325">325</span>
<span id="line-S-10102-326"><span class="lno">326</span></span>
<span id="line-S-10102-327"><span class="lno">327</span></span>
<span id="line-S-10102-328"><span class="lno">328</span></span>
<span id="line-S-10102-329"><span class="lno">329</span></span>
<span id="line-S-10102-330">330</span>
<span id="line-S-10102-331"><span class="lno">331</span></span>
<span id="line-S-10102-332"><span class="lno">332</span></span>
<span id="line-S-10102-333"><span class="lno">333</span></span>
<span id="line-S-10102-334"><span class="lno">334</span></span>
<span id="line-S-10102-335">335</span>
<span id="line-S-10102-336"><span class="lno">336</span></span>
<span id="line-S-10102-337"><span class="lno">337</span></span>
<span id="line-S-10102-338"><span class="lno">338</span></span>
<span id="line-S-10102-339"><span class="lno">339</span></span>
<span id="line-S-10102-340">340</span>
<span id="line-S-10102-341"><span class="lno">341</span></span>
<span id="line-S-10102-342"><span class="lno">342</span></span>
<span id="line-S-10102-343"><span class="lno">343</span></span>
<span id="line-S-10102-344"><span class="lno">344</span></span>
<span id="line-S-10102-345">345</span>
<span id="line-S-10102-346"><span class="lno">346</span></span>
<span id="line-S-10102-347"><span class="lno">347</span></span>
<span id="line-S-10102-348"><span class="lno">348</span></span>
<span id="line-S-10102-349"><span class="lno">349</span></span>
<span id="line-S-10102-350">350</span>
<span id="line-S-10102-351"><span class="lno">351</span></span>
<span id="line-S-10102-352"><span class="lno">352</span></span>
<span id="line-S-10102-353"><span class="lno">353</span></span>
<span id="line-S-10102-354"><span class="lno">354</span></span>
<span id="line-S-10102-355">355</span>
<span id="line-S-10102-356"><span class="lno">356</span></span>
<span id="line-S-10102-357"><span class="lno">357</span></span>
<span id="line-S-10102-358"><span class="lno">358</span></span>
<span id="line-S-10102-359"><span class="lno">359</span></span>
<span id="line-S-10102-360">360</span>
<span id="line-S-10102-361"><span class="lno">361</span></span>
<span id="line-S-10102-362"><span class="lno">362</span></span>
<span id="line-S-10102-363"><span class="lno">363</span></span>
<span id="line-S-10102-364"><span class="lno">364</span></span>
<span id="line-S-10102-365">365</span>
<span id="line-S-10102-366"><span class="lno">366</span></span>
<span id="line-S-10102-367"><span class="lno">367</span></span>
<span id="line-S-10102-368"><span class="lno">368</span></span>
<span id="line-S-10102-369"><span class="lno">369</span></span>
<span id="line-S-10102-370">370</span>
<span id="line-S-10102-371"><span class="lno">371</span></span>
<span id="line-S-10102-372"><span class="lno">372</span></span>
</pre></td><td valign="top"><pre><code class="language-xml">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                xmlns:db="http://docbook.org/ns/docbook"
                xmlns:f="http://docbook.org/ns/docbook/functions"
                xmlns:m="http://docbook.org/ns/docbook/modes"
                xmlns:xs="http://www.w3.org/2001/XMLSchema"
                xmlns="http://www.w3.org/1999/xhtml"
                default-mode="m:docbook"
                exclude-result-prefixes="db f m xs"
                version="3.0"&gt;

&lt;xsl:template match="db:article" mode="m:attributes" as="attribute()*"&gt;
  &lt;xsl:variable name="attr" as="attribute()*"&gt;
    &lt;xsl:apply-templates select="@*"/&gt;
    &lt;xsl:if test="not(@xml:id) and parent::*"&gt;
      &lt;xsl:attribute name="id" select="f:generate-id(.)"/&gt;
    &lt;/xsl:if&gt;
    &lt;xsl:sequence select="f:chunk(.)"/&gt;
  &lt;/xsl:variable&gt;
  &lt;xsl:sequence select="f:attributes(., $attr,
                                     (local-name(.),
                                     @status, @otherclass,
                                     if (@otherclass)
                                     then 'otherclass'
                                     else @class),
                                     ())"/&gt;
  &lt;xsl:if test="@label"&gt;
    &lt;xsl:attribute name="db-label" select="@label"/&gt;
  &lt;/xsl:if&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:book|db:part|db:partintro|db:reference|db:refentry
                     |db:dedication|db:acknowledgements|db:colophon
                     |db:preface|db:chapter|db:appendix
                     |db:sect1|db:sect2|db:sect3|db:sect4|db:sect5|db:section
                     |db:topic"
              mode="m:attributes" as="attribute()*"&gt;
  &lt;xsl:variable name="attr" as="attribute()*"&gt;
    &lt;xsl:apply-templates select="@*"/&gt;
    &lt;xsl:if test="not(@xml:id) and parent::*"&gt;
      &lt;xsl:attribute name="id" select="f:generate-id(.)"/&gt;
    &lt;/xsl:if&gt;
    &lt;xsl:sequence select="f:chunk(.)"/&gt;
  &lt;/xsl:variable&gt;

  &lt;xsl:sequence select="f:attributes(., $attr, (local-name(.), @status), ())"/&gt;
  &lt;xsl:if test="@label"&gt;
    &lt;xsl:attribute name="db-label" select="@label"/&gt;
  &lt;/xsl:if&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:orderedlist" mode="m:attributes" as="attribute()*"&gt;
  &lt;xsl:param name="exclude-classes" as="xs:string*"/&gt;

  &lt;xsl:variable name="attr" as="attribute()*"&gt;
    &lt;xsl:apply-templates select="@*"/&gt;
    &lt;xsl:sequence select="f:chunk(.)"/&gt;
  &lt;/xsl:variable&gt;
  &lt;xsl:sequence select="f:attributes(., $attr,
                                     (local-name(.),
                                      if (@inheritnum = 'inherit')
                                      then 'inheritnum'
                                      else ()),
                                      ())"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:listitem|db:para|db:member
                    |db:tbody|db:thead|db:tfoot"
              mode="m:attributes" as="attribute()*"&gt;
  &lt;xsl:variable name="attr" as="attribute()*"&gt;
    &lt;xsl:apply-templates select="@*"/&gt;
    &lt;xsl:sequence select="f:chunk(.)"/&gt;
  &lt;/xsl:variable&gt;
  &lt;xsl:sequence select="f:attributes(., $attr, (), local-name(.))"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:simplelist" mode="m:attributes" as="attribute()*"&gt;
  &lt;xsl:param name="extra-classes" as="xs:string*"/&gt;
  &lt;xsl:variable name="attr" as="attribute()*"&gt;
    &lt;xsl:apply-templates select="@*"/&gt;
    &lt;xsl:sequence select="f:chunk(.)"/&gt;
  &lt;/xsl:variable&gt;
  &lt;xsl:sequence select="f:attributes(., $attr, (local-name(.), $extra-classes), ())"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:variablelist" mode="m:attributes" as="attribute()*"&gt;
  &lt;xsl:param name="term-length" as="item()?"/&gt;
  &lt;xsl:param name="exclude-id" as="xs:boolean" select="false()"/&gt;

  &lt;xsl:variable name="long"
                select="if ($term-length castable as xs:integer
                            and xs:integer($term-length)
                                gt $variablelist-termlength-threshold)
                        then 'long-terms'
                        else ()"/&gt;

  &lt;xsl:variable name="attr" as="attribute()*"&gt;
    &lt;xsl:apply-templates select="if ($exclude-id)
                                 then @* except @xml:id
                                 else @*"/&gt;
    &lt;xsl:if test="@termlength"&gt;
      &lt;xsl:attribute name="db-termlength" select="@termlength"/&gt;
    &lt;/xsl:if&gt;
    &lt;xsl:sequence select="f:chunk(.)"/&gt;
  &lt;/xsl:variable&gt;

  &lt;xsl:sequence select="f:attributes(., $attr, (local-name(.), $long), ())"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:glossentry" mode="m:attributes" as="attribute()*"&gt;
  &lt;xsl:variable name="attr" as="attribute()*"&gt;
    &lt;xsl:apply-templates select="@*"/&gt;
    &lt;xsl:if test="not(@xml:id) and parent::*"&gt;
      &lt;xsl:attribute name="id" select="f:generate-id(.)"/&gt;
    &lt;/xsl:if&gt;
    &lt;xsl:sequence select="f:chunk(.)"/&gt;
  &lt;/xsl:variable&gt;
  &lt;xsl:sequence select="f:attributes(., $attr, (local-name(.)), ())"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:bridgehead" mode="m:attributes" as="attribute()*"&gt;
  &lt;xsl:param name="extra-classes" as="xs:string*"/&gt;
  &lt;xsl:variable name="attr" as="attribute()*"&gt;
    &lt;xsl:apply-templates select="@*"/&gt;
    &lt;xsl:sequence select="f:chunk(.)"/&gt;
  &lt;/xsl:variable&gt;
  &lt;xsl:sequence select="f:attributes(., $attr, (local-name(.), $extra-classes), ())"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:table[db:tgroup]|db:informaltable[db:tgroup]"
              mode="m:attributes" as="attribute()*"&gt;
  &lt;xsl:variable name="attr" as="attribute()*"&gt;
    &lt;xsl:apply-templates select="@*"/&gt;
    &lt;xsl:if test="not(@xml:id) and parent::*"&gt;
      &lt;xsl:attribute name="id" select="f:generate-id(.)"/&gt;
    &lt;/xsl:if&gt;
    &lt;xsl:sequence select="f:chunk(.)"/&gt;
  &lt;/xsl:variable&gt;
  &lt;xsl:variable name="pgwide" as="xs:string?"&gt;
    &lt;xsl:if test="@pgwide and @pgwide != '0'"&gt;
      &lt;xsl:sequence select="'pgwide'"/&gt;
    &lt;/xsl:if&gt;
  &lt;/xsl:variable&gt;
  &lt;xsl:variable name="landscape" as="xs:string?"&gt;
    &lt;xsl:if test="@orient = 'land'"&gt;
      &lt;xsl:sequence select="'landscape'"/&gt;
    &lt;/xsl:if&gt;
  &lt;/xsl:variable&gt;
  &lt;xsl:variable name="style"
                select="tokenize(@tabstyle)"/&gt;

  &lt;xsl:sequence select="f:attributes(., $attr,
                                     (local-name(.), $pgwide, $landscape, $style), ())"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:table[not(db:tgroup)]|db:informaltable[not(db:tgroup)]"
              mode="m:attributes" as="attribute()*"&gt;
  &lt;xsl:variable name="attr" as="attribute()*"&gt;
    &lt;xsl:apply-templates select="@* except @xml:id"/&gt;
    &lt;xsl:copy-of
        select="@* except (@xml:id|@xml:lang|@xml:base|@version
                           |@pgwide|@orient|@tabstyle)"/&gt;
    &lt;xsl:sequence select="f:chunk(.)"/&gt;
  &lt;/xsl:variable&gt;

  &lt;xsl:variable name="pgwide" as="xs:string?"&gt;
    &lt;xsl:if test="@pgwide and @pgwide != '0'"&gt;
      &lt;xsl:sequence select="'pgwide'"/&gt;
    &lt;/xsl:if&gt;
  &lt;/xsl:variable&gt;

  &lt;xsl:variable name="landscape" as="xs:string?"&gt;
    &lt;xsl:if test="@orient = 'land'"&gt;
      &lt;xsl:sequence select="'landscape'"/&gt;
    &lt;/xsl:if&gt;
  &lt;/xsl:variable&gt;

  &lt;xsl:variable name="style"
                select="tokenize(@tabstyle)"/&gt;

  &lt;xsl:sequence select="f:attributes(., $attr,
                                     (local-name(.), $pgwide, $landscape, $style), ())"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:row"
              mode="m:attributes" as="attribute()*"&gt;
  &lt;xsl:variable name="attr" as="attribute()*"&gt;
    &lt;xsl:apply-templates select="@*"/&gt;
  &lt;/xsl:variable&gt;
  &lt;xsl:sequence select="f:attributes(., $attr, (), ())"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:imagedata|db:videodata|db:audiodata"
              mode="m:attributes" as="attribute()*"&gt;
  &lt;xsl:variable name="attr" as="attribute()*"&gt;
    &lt;xsl:apply-templates select="@*"/&gt;
    &lt;xsl:sequence select="f:chunk(.)"/&gt;
  &lt;/xsl:variable&gt;
  &lt;xsl:sequence select="f:attributes(., $attr, (), local-name(.))"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:note|db:tip|db:important|db:caution|db:warning|db:danger"
              mode="m:attributes" as="attribute()*"&gt;
  &lt;xsl:variable name="attr" as="attribute()*"&gt;
    &lt;xsl:apply-templates select="@*"/&gt;
    &lt;xsl:sequence select="f:chunk(.)"/&gt;
  &lt;/xsl:variable&gt;
  &lt;xsl:sequence select="f:attributes(., $attr, (local-name(.), 'admonition'), ())"/&gt;
&lt;/xsl:template&gt;  

&lt;xsl:template match="db:programlisting|db:screen|db:address|db:literallayout
                     |db:synopsis|db:funcsynopsisinfo|db:classsynopsisinfo"
              mode="m:attributes" as="attribute()*"&gt;
  &lt;xsl:param name="style" as="xs:string" select="f:verbatim-style(.)"/&gt;
  &lt;xsl:param name="numbered" as="xs:boolean" select="f:verbatim-numbered(.)"/&gt;
  &lt;xsl:param name="long" as="xs:boolean" select="false()"/&gt;

  &lt;xsl:variable name="attr" as="attribute()*"&gt;
    &lt;xsl:apply-templates select="@*"/&gt;
    &lt;xsl:sequence select="f:chunk(.)"/&gt;
  &lt;/xsl:variable&gt;

  &lt;xsl:variable name="lang" as="xs:string?"
                select="if (@language)
                        then 'language-' || @language
                        else if (self::db:programlisting)
                             then 'language-none'
                             else ()"/&gt;

  &lt;xsl:variable name="style" as="xs:string*"
                select="if ($style = 'lines')
                        then ('verbatim', 'verblines')
                        else 'verbatim'"/&gt;

  &lt;xsl:variable name="long" as="xs:string?"
                select="if ($long and $numbered)
                        then 'long'
                        else ()"/&gt;

  &lt;xsl:variable name="numbered" as="xs:string?"
                select="if ($numbered)
                        then 'numbered'
                        else ()"/&gt;

  &lt;xsl:sequence
      select="f:attributes(., $attr,
                 (local-name(.), $lang, @class, $style, $numbered, $long), ())"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:lhs" mode="m:attributes" as="attribute()*"&gt;
  &lt;xsl:variable name="attr" as="attribute()*"&gt;
    &lt;xsl:apply-templates select="@*"/&gt;
    &lt;xsl:sequence select="f:chunk(.)"/&gt;
  &lt;/xsl:variable&gt;
  &lt;xsl:sequence select="f:attributes(., $attr, ('production'), ())"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:rhs" mode="m:attributes" as="attribute()*"&gt;
  &lt;xsl:variable name="attr" as="attribute()*"&gt;
    &lt;xsl:apply-templates select="@*"/&gt;
    &lt;xsl:sequence select="f:chunk(.)"/&gt;
  &lt;/xsl:variable&gt;
  &lt;xsl:sequence select="if (preceding-sibling::db:rhs)
                        then f:attributes(., $attr, ('production'), ())
                        else f:attributes(., $attr)"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:personname" mode="m:attributes" as="attribute()*"&gt;
  &lt;xsl:param name="style" as="xs:string?" select="()"/&gt;
  &lt;xsl:variable name="attr" as="attribute()*"&gt;
    &lt;xsl:apply-templates select="@*"/&gt;
    &lt;xsl:sequence select="f:chunk(.)"/&gt;
  &lt;/xsl:variable&gt;
  &lt;xsl:sequence select="f:attributes(., $attr, (local-name(.), $style), ())"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:link" mode="m:attributes" as="attribute()*"&gt;
  &lt;xsl:param name="title" as="xs:string?" select="()"/&gt;
  &lt;xsl:variable name="attr" as="attribute()*"&gt;
    &lt;xsl:apply-templates select="@*"/&gt;
    &lt;xsl:if test="exists($title)"&gt;
      &lt;xsl:attribute name="title" select="$title"/&gt;
    &lt;/xsl:if&gt;
    &lt;xsl:sequence select="f:chunk(.)"/&gt;
  &lt;/xsl:variable&gt;
  &lt;xsl:sequence select="f:attributes(., $attr)"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:formalgroup
                     |db:figure|db:informalfigure
                     |db:example|db:informalexample
                     |db:equation|db:informalequation"
              mode="m:attributes" as="attribute()*"&gt;
  &lt;xsl:variable name="attr" as="attribute()*"&gt;
    &lt;xsl:apply-templates select="@*"/&gt;
    &lt;xsl:if test="not(@xml:id) and parent::*"&gt;
      &lt;xsl:attribute name="id" select="f:generate-id(.)"/&gt;
    &lt;/xsl:if&gt;
    &lt;xsl:sequence select="f:chunk(.)"/&gt;
  &lt;/xsl:variable&gt;

  &lt;xsl:variable name="class"
                select="if (@floatstyle)
                        then if (@floatstyle = 'float')
                             then 'float' || $default-float-style
                             else 'float' || @floatstyle
                        else ()"/&gt;

  &lt;xsl:variable name="pgwide" as="xs:string?"&gt;
    &lt;xsl:if test="@pgwide and @pgwide != '0'"&gt;
      &lt;xsl:sequence select="'pgwide'"/&gt;
    &lt;/xsl:if&gt;
  &lt;/xsl:variable&gt;

  &lt;xsl:sequence select="f:attributes(., $attr, (local-name(.), $pgwide, $class), ())"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:qandaset|db:qandadiv|db:qandaentry|db:question|db:answer
                     |db:index|db:indexdiv|db:bibliography|db:bibliodiv
                     |db:glossary|db:lgossdiv"
              mode="m:attributes" as="attribute()*"&gt;
  &lt;xsl:variable name="attr" as="attribute()*"&gt;
    &lt;xsl:apply-templates select="@*"/&gt;
    &lt;xsl:if test="not(@xml:id) and parent::*"&gt;
      &lt;xsl:attribute name="id" select="f:generate-id(.)"/&gt;
    &lt;/xsl:if&gt;
    &lt;xsl:sequence select="f:chunk(.)"/&gt;
  &lt;/xsl:variable&gt;
  &lt;xsl:sequence select="f:attributes(., $attr)"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:annotation" mode="m:attributes" as="attribute()*"&gt;
  &lt;xsl:variable name="attr" as="attribute()*"&gt;
    &lt;xsl:apply-templates select="@*"/&gt;
    &lt;xsl:if test="not(@xml:id) and parent::*"&gt;
      &lt;xsl:attribute name="id" select="f:generate-id(.)"/&gt;
    &lt;/xsl:if&gt;
    &lt;xsl:sequence select="f:chunk(.)"/&gt;
  &lt;/xsl:variable&gt;

  &lt;xsl:sequence select="f:attributes(., $attr, ('annotation-wrapper'), ())"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="*" mode="m:attributes" as="attribute()*"&gt;
  &lt;xsl:variable name="attr" as="attribute()*"&gt;
    &lt;xsl:apply-templates select="@*"/&gt;
    &lt;xsl:sequence select="f:chunk(.)"/&gt;
  &lt;/xsl:variable&gt;
  &lt;xsl:sequence select="f:attributes(., $attr)"/&gt;
&lt;/xsl:template&gt;


&lt;!-- ============================================================ --&gt;

&lt;xsl:template match="@*"&gt;
  &lt;!-- by default, attributes are suppressed --&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="@xml:id"&gt;
  &lt;xsl:attribute name="id" select="."/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="@xml:lang"&gt;
  &lt;xsl:attribute name="lang" select="."/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="@dir"&gt;
  &lt;xsl:attribute name="dir" select="."/&gt;
&lt;/xsl:template&gt;

&lt;/xsl:stylesheet&gt;
</code></pre></td></tr></table></div></div></div></div><div class="stylesheet" id="S-624"><h3>publishers.xsl</h3><p><span><span class="template all">3 templates</span></span></p><div class="instructions"><div class="title closed">Instructions</div><div class="body"><div id="S-624-t-1" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:dialogue|db:drama|db:poetry…</div><div class="props"><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:dialogue</code>, <code>db:drama</code>, <code>db:poetry</code>, <code>db:stagedir</code></div></div></div><div id="S-624-t-2" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:line|db:linegroup|db:speake…</div><div class="props"><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:line</code>, <code>db:linegroup</code>, <code>db:speaker</code></div></div></div><div id="S-624-t-3" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:inlinestagedir</div><div class="props"><div class="calls">Calls: <a href="#S-9504-docbook.org.ns.docbook.templates.inline">t:inline</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:inlinestagedir</code></div></div></div></div></div><div class="source-code"><div class="title closed">Source code</div><div class="body"><div><table><tr><td valign="top" align="right"><pre class="fake-prism"><span id="line-S-624-1">1</span>
<span id="line-S-624-2"><span class="lno">2</span></span>
<span id="line-S-624-3"><span class="lno">3</span></span>
<span id="line-S-624-4"><span class="lno">4</span></span>
<span id="line-S-624-5">5</span>
<span id="line-S-624-6"><span class="lno">6</span></span>
<span id="line-S-624-7"><span class="lno">7</span></span>
<span id="line-S-624-8"><span class="lno">8</span></span>
<span id="line-S-624-9"><span class="lno">9</span></span>
<span id="line-S-624-10">10</span>
<span id="line-S-624-11"><span class="lno">11</span></span>
<span id="line-S-624-12"><span class="lno">12</span></span>
<span id="line-S-624-13"><span class="lno">13</span></span>
<span id="line-S-624-14"><span class="lno">14</span></span>
<span id="line-S-624-15">15</span>
<span id="line-S-624-16"><span class="lno">16</span></span>
<span id="line-S-624-17"><span class="lno">17</span></span>
<span id="line-S-624-18"><span class="lno">18</span></span>
<span id="line-S-624-19"><span class="lno">19</span></span>
<span id="line-S-624-20">20</span>
<span id="line-S-624-21"><span class="lno">21</span></span>
<span id="line-S-624-22"><span class="lno">22</span></span>
<span id="line-S-624-23"><span class="lno">23</span></span>
<span id="line-S-624-24"><span class="lno">24</span></span>
<span id="line-S-624-25">25</span>
<span id="line-S-624-26"><span class="lno">26</span></span>
<span id="line-S-624-27"><span class="lno">27</span></span>
<span id="line-S-624-28"><span class="lno">28</span></span>
<span id="line-S-624-29"><span class="lno">29</span></span>
<span id="line-S-624-30">30</span>
<span id="line-S-624-31"><span class="lno">31</span></span>
<span id="line-S-624-32"><span class="lno">32</span></span>
<span id="line-S-624-33"><span class="lno">33</span></span>
</pre></td><td valign="top"><pre><code class="language-xml">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                xmlns:db="http://docbook.org/ns/docbook"
                xmlns:f="http://docbook.org/ns/docbook/functions"
                xmlns:m="http://docbook.org/ns/docbook/modes"
                xmlns:t="http://docbook.org/ns/docbook/templates"
                xmlns:xs="http://www.w3.org/2001/XMLSchema"
                xmlns="http://www.w3.org/1999/xhtml"
                default-mode="m:docbook"
                exclude-result-prefixes="db f m t xs"
                version="3.0"&gt;

&lt;xsl:template match="db:dialogue|db:drama|db:poetry|db:stagedir"&gt;
  &lt;div&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
    &lt;xsl:apply-templates select="." mode="m:generate-titlepage"/&gt;
    &lt;xsl:apply-templates/&gt;
  &lt;/div&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:linegroup|db:speaker|db:line"&gt;
  &lt;div&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"/&gt;
    &lt;xsl:apply-templates/&gt;
  &lt;/div&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:inlinestagedir"&gt;
  &lt;xsl:call-template name="t:inline"/&gt;
&lt;/xsl:template&gt;

&lt;/xsl:stylesheet&gt;
</code></pre></td></tr></table></div></div></div></div><div class="stylesheet" id="S-51165"><h3>annotations.xsl</h3><p><span><span class="template all">3 templates</span></span></p><div class="instructions"><div class="title closed">Instructions</div><div class="body"><div id="S-51165-t-1" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ ghost:annotation</div><div class="props"><div class="uses">Uses: <a href="#S-26643-..annotation-mark">$annotation-mark</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>ghost:annotation</code></div></div></div><div id="S-51165-t-2" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:annotation</div><div class="props"><div class="calls">Calls: <a href="#S-28936-docbook.org.ns.docbook.functions.generate-id,1">f:generate-id()</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>db:annotation</code></div></div></div><div id="S-51165-t-3" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:annotation</div><div class="props"><div class="uses">Uses: <a href="#S-26643-..annotation-mark">$annotation-mark</a></div><div class="mode">Mode: <code>m:annotation-content</code></div><div class="matches">Matches: <code>db:annotation</code></div></div></div></div></div><div class="source-code"><div class="title closed">Source code</div><div class="body"><div><table><tr><td valign="top" align="right"><pre class="fake-prism"><span id="line-S-51165-1">1</span>
<span id="line-S-51165-2"><span class="lno">2</span></span>
<span id="line-S-51165-3"><span class="lno">3</span></span>
<span id="line-S-51165-4"><span class="lno">4</span></span>
<span id="line-S-51165-5">5</span>
<span id="line-S-51165-6"><span class="lno">6</span></span>
<span id="line-S-51165-7"><span class="lno">7</span></span>
<span id="line-S-51165-8"><span class="lno">8</span></span>
<span id="line-S-51165-9"><span class="lno">9</span></span>
<span id="line-S-51165-10">10</span>
<span id="line-S-51165-11"><span class="lno">11</span></span>
<span id="line-S-51165-12"><span class="lno">12</span></span>
<span id="line-S-51165-13"><span class="lno">13</span></span>
<span id="line-S-51165-14"><span class="lno">14</span></span>
<span id="line-S-51165-15">15</span>
<span id="line-S-51165-16"><span class="lno">16</span></span>
<span id="line-S-51165-17"><span class="lno">17</span></span>
<span id="line-S-51165-18"><span class="lno">18</span></span>
<span id="line-S-51165-19"><span class="lno">19</span></span>
<span id="line-S-51165-20">20</span>
<span id="line-S-51165-21"><span class="lno">21</span></span>
<span id="line-S-51165-22"><span class="lno">22</span></span>
<span id="line-S-51165-23"><span class="lno">23</span></span>
<span id="line-S-51165-24"><span class="lno">24</span></span>
<span id="line-S-51165-25">25</span>
<span id="line-S-51165-26"><span class="lno">26</span></span>
<span id="line-S-51165-27"><span class="lno">27</span></span>
<span id="line-S-51165-28"><span class="lno">28</span></span>
<span id="line-S-51165-29"><span class="lno">29</span></span>
<span id="line-S-51165-30">30</span>
<span id="line-S-51165-31"><span class="lno">31</span></span>
<span id="line-S-51165-32"><span class="lno">32</span></span>
<span id="line-S-51165-33"><span class="lno">33</span></span>
<span id="line-S-51165-34"><span class="lno">34</span></span>
<span id="line-S-51165-35">35</span>
<span id="line-S-51165-36"><span class="lno">36</span></span>
<span id="line-S-51165-37"><span class="lno">37</span></span>
<span id="line-S-51165-38"><span class="lno">38</span></span>
<span id="line-S-51165-39"><span class="lno">39</span></span>
<span id="line-S-51165-40">40</span>
<span id="line-S-51165-41"><span class="lno">41</span></span>
<span id="line-S-51165-42"><span class="lno">42</span></span>
<span id="line-S-51165-43"><span class="lno">43</span></span>
<span id="line-S-51165-44"><span class="lno">44</span></span>
<span id="line-S-51165-45">45</span>
<span id="line-S-51165-46"><span class="lno">46</span></span>
<span id="line-S-51165-47"><span class="lno">47</span></span>
<span id="line-S-51165-48"><span class="lno">48</span></span>
<span id="line-S-51165-49"><span class="lno">49</span></span>
<span id="line-S-51165-50">50</span>
<span id="line-S-51165-51"><span class="lno">51</span></span>
<span id="line-S-51165-52"><span class="lno">52</span></span>
<span id="line-S-51165-53"><span class="lno">53</span></span>
<span id="line-S-51165-54"><span class="lno">54</span></span>
<span id="line-S-51165-55">55</span>
<span id="line-S-51165-56"><span class="lno">56</span></span>
<span id="line-S-51165-57"><span class="lno">57</span></span>
<span id="line-S-51165-58"><span class="lno">58</span></span>
<span id="line-S-51165-59"><span class="lno">59</span></span>
<span id="line-S-51165-60">60</span>
<span id="line-S-51165-61"><span class="lno">61</span></span>
<span id="line-S-51165-62"><span class="lno">62</span></span>
<span id="line-S-51165-63"><span class="lno">63</span></span>
<span id="line-S-51165-64"><span class="lno">64</span></span>
</pre></td><td valign="top"><pre><code class="language-xml">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                xmlns:db="http://docbook.org/ns/docbook"
                xmlns:f="http://docbook.org/ns/docbook/functions"
                xmlns:ghost="http://docbook.org/ns/docbook/ephemeral"
                xmlns:m="http://docbook.org/ns/docbook/modes"
                xmlns:v="http://docbook.org/ns/docbook/variables"
                xmlns:xs="http://www.w3.org/2001/XMLSchema"
                xmlns="http://www.w3.org/1999/xhtml"
                default-mode="m:docbook"
                exclude-result-prefixes="db f ghost m v xs"
                version="3.0"&gt;

&lt;xsl:template match="ghost:annotation"&gt;
  &lt;xsl:variable name="number"
                select="count(key('id', @linkend)/preceding::db:annotation)+1"/&gt;
  &lt;db-annotation-marker target="{@linkend}"
                        placement="{@placement}"
                        db-annotation="{$number}"&gt;
    &lt;a class="annomark" href="#{@linkend}"
       db-annotation="{@linkend}"&gt;
      &lt;xsl:sequence select="$annotation-mark"/&gt;
      &lt;sup class="num"&gt;
        &lt;xsl:value-of select="$number"/&gt;
      &lt;/sup&gt;
    &lt;/a&gt;
  &lt;/db-annotation-marker&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:annotation"&gt;
  &lt;db-annotation id="{f:generate-id(.)}"
                 db-annotation="{count(preceding::db:annotation)+1}"&gt;
    &lt;xsl:apply-templates select="." mode="m:annotation-content"/&gt;
  &lt;/db-annotation&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:annotation" mode="m:annotation-content"&gt;
  &lt;div&gt;
    &lt;xsl:apply-templates select="." mode="m:attributes"&gt;
    &lt;/xsl:apply-templates&gt;
    &lt;div class="annotation-body"&gt;
      &lt;div class="annotation-header"&gt;
        &lt;div class="annotation-close"&gt;
        &lt;/div&gt;
        &lt;div class="annotation-title"&gt;
          &lt;span class="annomark"&gt;
            &lt;xsl:sequence select="$annotation-mark"/&gt;
            &lt;sup class="num"&gt;
              &lt;xsl:value-of select="count(preceding::db:annotation)+1"/&gt;
            &lt;/sup&gt;
            &lt;xsl:text&gt; &lt;/xsl:text&gt;
          &lt;/span&gt;
          &lt;xsl:apply-templates select="." mode="m:headline-title"/&gt;
        &lt;/div&gt;
      &lt;/div&gt;
      &lt;div class="annotation-content"&gt;
        &lt;xsl:apply-templates/&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/xsl:template&gt;

&lt;/xsl:stylesheet&gt;
</code></pre></td></tr></table></div></div></div></div><div class="stylesheet" id="S-24095"><h3>profile.xsl</h3><p><span><span class="template all">3 templates</span></span>, <span><span class="function all">5 functions</span></span>, <span><span class="variable all">5 variables</span> (<span class="variable unused">1 unused</span>)</span></p><div class="instructions"><div class="title closed">Instructions</div><div class="body"><div id="S-24095-docbook.org.ns.docbook.variables.dynamic-profile-variables" class="instruction variable unused"><div class="title"><span class="link"></span>Variable <code>$v:dynamic-profile-variables</code> as <code>map(xs:QName, item()*)</code></div><div class="props"><div class="uses">Uses: <a href="#S-22692-docbook.org.ns.docbook.variables.private.dynamic-parameters">$vp:dynamic-parameters</a></div><div class="used-by"><span class="marker">☞</span><span class="unused">Unused</span></div></div></div><div id="S-24095-docbook.org.ns.docbook.variables.private.strmatch" class="instruction variable"><div class="title"><span class="link"></span>Variable <code>$vp:strmatch</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-24095-docbook.org.ns.docbook.functions.private.dynamic-include,2">fp:dynamic-include()</a>, <a href="#S-24095-docbook.org.ns.docbook.functions.private.dynamic-profile-tokens,1">fp:dynamic-profile-tokens()</a>, <a href="#S-24095-docbook.org.ns.docbook.functions.private.profile-tokens,1">fp:profile-tokens()</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-24095">modules/profile.xsl</a></div></div></div><div id="S-24095-docbook.org.ns.docbook.variables.private.varmatch" class="instruction variable"><div class="title"><span class="link"></span>Variable <code>$vp:varmatch</code></div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-24095-docbook.org.ns.docbook.functions.private.dynamic-include,2">fp:dynamic-include()</a>, <a href="#S-24095-docbook.org.ns.docbook.functions.private.dynamic-profile-tokens,1">fp:dynamic-profile-tokens()</a>, <a href="#S-24095-docbook.org.ns.docbook.functions.private.profile-tokens,1">fp:profile-tokens()</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-24095">modules/profile.xsl</a></div></div></div><div id="S-24095-docbook.org.ns.docbook.variables.private.profile-value-map" class="instruction variable"><div class="title"><span class="link"></span>Variable <code>$vp:profile-value-map</code> as <code>map(xs:QName, xs:string*)</code></div><div class="props"><div class="uses">Uses: <a href="#S-26643-..profile-arch">$profile-arch</a>, <a href="#S-26643-..profile-audience">$profile-audience</a>, <a href="#S-26643-..profile-condition">$profile-condition</a>, <a href="#S-26643-..profile-conformance">$profile-conformance</a>, <a href="#S-26643-..profile-lang">$profile-lang</a>, <a href="#S-26643-..profile-os">$profile-os</a>, <a href="#S-26643-..profile-outputformat">$profile-outputformat</a>, <a href="#S-26643-..profile-revision">$profile-revision</a>, <a href="#S-26643-..profile-revisionflag">$profile-revisionflag</a>, <a href="#S-26643-..profile-role">$profile-role</a>, <a href="#S-26643-..profile-security">$profile-security</a>, <a href="#S-26643-..profile-userlevel">$profile-userlevel</a>, <a href="#S-26643-..profile-vendor">$profile-vendor</a>, <a href="#S-26643-..profile-wordsize">$profile-wordsize</a></div><div class="calls">Calls: <a href="#S-24095-docbook.org.ns.docbook.functions.private.profile-tokens,1">fp:profile-tokens()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-24095-t-1">template</a>, <a href="#S-24095-docbook.org.ns.docbook.functions.private.profile-suppress,1">fp:profile-suppress()</a>, <a href="#S-24095-docbook.org.ns.docbook.variables.private.profile-attributes">$vp:profile-attributes</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-24095">modules/profile.xsl</a></div></div></div><div id="S-24095-docbook.org.ns.docbook.variables.private.profile-attributes" class="instruction variable"><div class="title"><span class="link"></span>Variable <code>$vp:profile-attributes</code></div><div class="props"><div class="uses">Uses: <a href="#S-24095-docbook.org.ns.docbook.variables.private.profile-value-map">$vp:profile-value-map</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-24095-docbook.org.ns.docbook.functions.private.profile-suppress,1">fp:profile-suppress()</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-24095">modules/profile.xsl</a></div></div></div><div id="S-24095-t-1" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ /  as document-node()</div><div class="props"><div class="uses">Uses: <a href="#S-24095-docbook.org.ns.docbook.variables.private.profile-value-map">$vp:profile-value-map</a>, <a href="#S-26643-..dynamic-profiles">$dynamic-profiles</a></div><div class="calls">Calls: <a href="#S-28936-docbook.org.ns.docbook.functions.is-true,1">f:is-true()</a></div><div class="mode">Mode: <code>m:profile</code></div><div class="matches">Matches: <code>/</code></div></div></div><div id="S-24095-t-2" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ *</div><div class="props"><div class="calls">Calls: <a href="#S-24095-docbook.org.ns.docbook.functions.private.profile-suppress,1">fp:profile-suppress()</a></div><div class="mode">Mode: <code>m:profile</code></div><div class="matches">Matches: <code>*</code></div></div></div><div id="S-24095-t-3" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ attribute()|comment()|processi…</div><div class="props"><div class="mode">Mode: <code>m:profile</code></div><div class="matches">Matches: <code>attribute()</code>, <code>comment()</code>, <code>processing-instruction()</code>, <code>text()</code></div></div></div><div id="S-24095-docbook.org.ns.docbook.functions.private.profile-tokens,1" class="instruction function"><div class="title"><span class="link"></span>Function fp:profile-tokens($profile as xs:string*) as xs:string*</div><div class="props"><div class="uses">Uses: <a href="#S-24095-docbook.org.ns.docbook.variables.private.strmatch">$vp:strmatch</a>, <a href="#S-24095-docbook.org.ns.docbook.variables.private.varmatch">$vp:varmatch</a>, <a href="#S-26643-..profile-separator">$profile-separator</a></div><div class="calls">Calls: <a href="#S-24095-docbook.org.ns.docbook.functions.private.profile-suppress,1">fp:profile-suppress()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-24095-docbook.org.ns.docbook.functions.private.profile-suppress,1">fp:profile-suppress()</a>, <a href="#S-24095-docbook.org.ns.docbook.variables.private.profile-value-map">$vp:profile-value-map</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-24095">modules/profile.xsl</a></div></div></div><div id="S-24095-docbook.org.ns.docbook.functions.private.dynamic-profile-tokens,1" class="instruction function"><div class="title"><span class="link"></span>Function fp:dynamic-profile-tokens($profile as xs:string*) as xs:string*</div><div class="props"><div class="uses">Uses: <a href="#S-24095-docbook.org.ns.docbook.variables.private.strmatch">$vp:strmatch</a>, <a href="#S-24095-docbook.org.ns.docbook.variables.private.varmatch">$vp:varmatch</a>, <a href="#S-26643-..profile-separator">$profile-separator</a></div><div class="calls">Calls: <a href="#S-24095-docbook.org.ns.docbook.functions.private.profile-suppress,1">fp:profile-suppress()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-24095-docbook.org.ns.docbook.functions.private.profile-suppress,1">fp:profile-suppress()</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-24095">modules/profile.xsl</a></div></div></div><div id="S-24095-docbook.org.ns.docbook.functions.private.profile-suppress,1" class="instruction function"><div class="title"><span class="link"></span>Function fp:profile-suppress($context as element()) as xs:boolean</div><div class="props"><div class="uses">Uses: <a href="#S-24095-docbook.org.ns.docbook.variables.private.profile-attributes">$vp:profile-attributes</a>, <a href="#S-24095-docbook.org.ns.docbook.variables.private.profile-value-map">$vp:profile-value-map</a>, <a href="#S-26643-..dynamic-profiles">$dynamic-profiles</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-24095-t-2">template</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-24095">modules/profile.xsl</a></div></div></div><div id="S-24095-docbook.org.ns.docbook.functions.private.dynamic-include,2" class="instruction function"><div class="title"><span class="link"></span>Function fp:dynamic-include($context as element(), $expr as xs:string) as xs:boolean?</div><div class="props"><div class="uses">Uses: <a href="#S-29386-docbook.org.ns.docbook.errors.DYNAMIC-PROFILE-SYNTAX-ERROR">$dbe:DYNAMIC-PROFILE-SYNTAX-ERROR</a>, <a href="#S-24095-docbook.org.ns.docbook.variables.private.strmatch">$vp:strmatch</a>, <a href="#S-24095-docbook.org.ns.docbook.variables.private.varmatch">$vp:varmatch</a></div><div class="calls">Calls: <a href="#S-24095-docbook.org.ns.docbook.functions.private.profile-suppress,1">fp:profile-suppress()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-24095-docbook.org.ns.docbook.functions.private.profile-suppress,1">fp:profile-suppress()</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-24095">modules/profile.xsl</a></div></div></div><div id="S-24095-docbook.org.ns.docbook.functions.private.check-profile,3" class="instruction function"><div class="title"><span class="link"></span>Function fp:check-profile($context as element(), $variable as xs:string, $expected-value as xs:string?) as xs:boolean?</div><div class="props"><div class="uses">Uses: <a href="#S-29386-docbook.org.ns.docbook.errors.DYNAMIC-PROFILE-EVAL-ERROR">$dbe:DYNAMIC-PROFILE-EVAL-ERROR</a>, <a href="#S-29386-docbook.org.ns.docbook.errors.INVALID-DYNAMIC-PROFILE-ERROR">$dbe:INVALID-DYNAMIC-PROFILE-ERROR</a>, <a href="#S-26643-..dynamic-profile-error">$dynamic-profile-error</a></div><div class="calls">Calls: <a href="#S-24095-docbook.org.ns.docbook.functions.private.dynamic-include,2">fp:dynamic-include()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-24095-docbook.org.ns.docbook.functions.private.dynamic-include,2">fp:dynamic-include()</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-24095">modules/profile.xsl</a></div></div></div></div></div><div class="source-code"><div class="title closed">Source code</div><div class="body"><div><table><tr><td valign="top" align="right"><pre class="fake-prism"><span id="line-S-24095-1">1</span>
<span id="line-S-24095-2"><span class="lno">2</span></span>
<span id="line-S-24095-3"><span class="lno">3</span></span>
<span id="line-S-24095-4"><span class="lno">4</span></span>
<span id="line-S-24095-5">5</span>
<span id="line-S-24095-6"><span class="lno">6</span></span>
<span id="line-S-24095-7"><span class="lno">7</span></span>
<span id="line-S-24095-8"><span class="lno">8</span></span>
<span id="line-S-24095-9"><span class="lno">9</span></span>
<span id="line-S-24095-10">10</span>
<span id="line-S-24095-11"><span class="lno">11</span></span>
<span id="line-S-24095-12"><span class="lno">12</span></span>
<span id="line-S-24095-13"><span class="lno">13</span></span>
<span id="line-S-24095-14"><span class="lno">14</span></span>
<span id="line-S-24095-15">15</span>
<span id="line-S-24095-16"><span class="lno">16</span></span>
<span id="line-S-24095-17"><span class="lno">17</span></span>
<span id="line-S-24095-18"><span class="lno">18</span></span>
<span id="line-S-24095-19"><span class="lno">19</span></span>
<span id="line-S-24095-20">20</span>
<span id="line-S-24095-21"><span class="lno">21</span></span>
<span id="line-S-24095-22"><span class="lno">22</span></span>
<span id="line-S-24095-23"><span class="lno">23</span></span>
<span id="line-S-24095-24"><span class="lno">24</span></span>
<span id="line-S-24095-25">25</span>
<span id="line-S-24095-26"><span class="lno">26</span></span>
<span id="line-S-24095-27"><span class="lno">27</span></span>
<span id="line-S-24095-28"><span class="lno">28</span></span>
<span id="line-S-24095-29"><span class="lno">29</span></span>
<span id="line-S-24095-30">30</span>
<span id="line-S-24095-31"><span class="lno">31</span></span>
<span id="line-S-24095-32"><span class="lno">32</span></span>
<span id="line-S-24095-33"><span class="lno">33</span></span>
<span id="line-S-24095-34"><span class="lno">34</span></span>
<span id="line-S-24095-35">35</span>
<span id="line-S-24095-36"><span class="lno">36</span></span>
<span id="line-S-24095-37"><span class="lno">37</span></span>
<span id="line-S-24095-38"><span class="lno">38</span></span>
<span id="line-S-24095-39"><span class="lno">39</span></span>
<span id="line-S-24095-40">40</span>
<span id="line-S-24095-41"><span class="lno">41</span></span>
<span id="line-S-24095-42"><span class="lno">42</span></span>
<span id="line-S-24095-43"><span class="lno">43</span></span>
<span id="line-S-24095-44"><span class="lno">44</span></span>
<span id="line-S-24095-45">45</span>
<span id="line-S-24095-46"><span class="lno">46</span></span>
<span id="line-S-24095-47"><span class="lno">47</span></span>
<span id="line-S-24095-48"><span class="lno">48</span></span>
<span id="line-S-24095-49"><span class="lno">49</span></span>
<span id="line-S-24095-50">50</span>
<span id="line-S-24095-51"><span class="lno">51</span></span>
<span id="line-S-24095-52"><span class="lno">52</span></span>
<span id="line-S-24095-53"><span class="lno">53</span></span>
<span id="line-S-24095-54"><span class="lno">54</span></span>
<span id="line-S-24095-55">55</span>
<span id="line-S-24095-56"><span class="lno">56</span></span>
<span id="line-S-24095-57"><span class="lno">57</span></span>
<span id="line-S-24095-58"><span class="lno">58</span></span>
<span id="line-S-24095-59"><span class="lno">59</span></span>
<span id="line-S-24095-60">60</span>
<span id="line-S-24095-61"><span class="lno">61</span></span>
<span id="line-S-24095-62"><span class="lno">62</span></span>
<span id="line-S-24095-63"><span class="lno">63</span></span>
<span id="line-S-24095-64"><span class="lno">64</span></span>
<span id="line-S-24095-65">65</span>
<span id="line-S-24095-66"><span class="lno">66</span></span>
<span id="line-S-24095-67"><span class="lno">67</span></span>
<span id="line-S-24095-68"><span class="lno">68</span></span>
<span id="line-S-24095-69"><span class="lno">69</span></span>
<span id="line-S-24095-70">70</span>
<span id="line-S-24095-71"><span class="lno">71</span></span>
<span id="line-S-24095-72"><span class="lno">72</span></span>
<span id="line-S-24095-73"><span class="lno">73</span></span>
<span id="line-S-24095-74"><span class="lno">74</span></span>
<span id="line-S-24095-75">75</span>
<span id="line-S-24095-76"><span class="lno">76</span></span>
<span id="line-S-24095-77"><span class="lno">77</span></span>
<span id="line-S-24095-78"><span class="lno">78</span></span>
<span id="line-S-24095-79"><span class="lno">79</span></span>
<span id="line-S-24095-80">80</span>
<span id="line-S-24095-81"><span class="lno">81</span></span>
<span id="line-S-24095-82"><span class="lno">82</span></span>
<span id="line-S-24095-83"><span class="lno">83</span></span>
<span id="line-S-24095-84"><span class="lno">84</span></span>
<span id="line-S-24095-85">85</span>
<span id="line-S-24095-86"><span class="lno">86</span></span>
<span id="line-S-24095-87"><span class="lno">87</span></span>
<span id="line-S-24095-88"><span class="lno">88</span></span>
<span id="line-S-24095-89"><span class="lno">89</span></span>
<span id="line-S-24095-90">90</span>
<span id="line-S-24095-91"><span class="lno">91</span></span>
<span id="line-S-24095-92"><span class="lno">92</span></span>
<span id="line-S-24095-93"><span class="lno">93</span></span>
<span id="line-S-24095-94"><span class="lno">94</span></span>
<span id="line-S-24095-95">95</span>
<span id="line-S-24095-96"><span class="lno">96</span></span>
<span id="line-S-24095-97"><span class="lno">97</span></span>
<span id="line-S-24095-98"><span class="lno">98</span></span>
<span id="line-S-24095-99"><span class="lno">99</span></span>
<span id="line-S-24095-100">100</span>
<span id="line-S-24095-101"><span class="lno">101</span></span>
<span id="line-S-24095-102"><span class="lno">102</span></span>
<span id="line-S-24095-103"><span class="lno">103</span></span>
<span id="line-S-24095-104"><span class="lno">104</span></span>
<span id="line-S-24095-105">105</span>
<span id="line-S-24095-106"><span class="lno">106</span></span>
<span id="line-S-24095-107"><span class="lno">107</span></span>
<span id="line-S-24095-108"><span class="lno">108</span></span>
<span id="line-S-24095-109"><span class="lno">109</span></span>
<span id="line-S-24095-110">110</span>
<span id="line-S-24095-111"><span class="lno">111</span></span>
<span id="line-S-24095-112"><span class="lno">112</span></span>
<span id="line-S-24095-113"><span class="lno">113</span></span>
<span id="line-S-24095-114"><span class="lno">114</span></span>
<span id="line-S-24095-115">115</span>
<span id="line-S-24095-116"><span class="lno">116</span></span>
<span id="line-S-24095-117"><span class="lno">117</span></span>
<span id="line-S-24095-118"><span class="lno">118</span></span>
<span id="line-S-24095-119"><span class="lno">119</span></span>
<span id="line-S-24095-120">120</span>
<span id="line-S-24095-121"><span class="lno">121</span></span>
<span id="line-S-24095-122"><span class="lno">122</span></span>
<span id="line-S-24095-123"><span class="lno">123</span></span>
<span id="line-S-24095-124"><span class="lno">124</span></span>
<span id="line-S-24095-125">125</span>
<span id="line-S-24095-126"><span class="lno">126</span></span>
<span id="line-S-24095-127"><span class="lno">127</span></span>
<span id="line-S-24095-128"><span class="lno">128</span></span>
<span id="line-S-24095-129"><span class="lno">129</span></span>
<span id="line-S-24095-130">130</span>
<span id="line-S-24095-131"><span class="lno">131</span></span>
<span id="line-S-24095-132"><span class="lno">132</span></span>
<span id="line-S-24095-133"><span class="lno">133</span></span>
<span id="line-S-24095-134"><span class="lno">134</span></span>
<span id="line-S-24095-135">135</span>
<span id="line-S-24095-136"><span class="lno">136</span></span>
<span id="line-S-24095-137"><span class="lno">137</span></span>
<span id="line-S-24095-138"><span class="lno">138</span></span>
<span id="line-S-24095-139"><span class="lno">139</span></span>
<span id="line-S-24095-140">140</span>
<span id="line-S-24095-141"><span class="lno">141</span></span>
<span id="line-S-24095-142"><span class="lno">142</span></span>
<span id="line-S-24095-143"><span class="lno">143</span></span>
<span id="line-S-24095-144"><span class="lno">144</span></span>
<span id="line-S-24095-145">145</span>
<span id="line-S-24095-146"><span class="lno">146</span></span>
<span id="line-S-24095-147"><span class="lno">147</span></span>
<span id="line-S-24095-148"><span class="lno">148</span></span>
<span id="line-S-24095-149"><span class="lno">149</span></span>
<span id="line-S-24095-150">150</span>
<span id="line-S-24095-151"><span class="lno">151</span></span>
<span id="line-S-24095-152"><span class="lno">152</span></span>
<span id="line-S-24095-153"><span class="lno">153</span></span>
<span id="line-S-24095-154"><span class="lno">154</span></span>
<span id="line-S-24095-155">155</span>
<span id="line-S-24095-156"><span class="lno">156</span></span>
<span id="line-S-24095-157"><span class="lno">157</span></span>
<span id="line-S-24095-158"><span class="lno">158</span></span>
<span id="line-S-24095-159"><span class="lno">159</span></span>
<span id="line-S-24095-160">160</span>
<span id="line-S-24095-161"><span class="lno">161</span></span>
<span id="line-S-24095-162"><span class="lno">162</span></span>
<span id="line-S-24095-163"><span class="lno">163</span></span>
<span id="line-S-24095-164"><span class="lno">164</span></span>
<span id="line-S-24095-165">165</span>
<span id="line-S-24095-166"><span class="lno">166</span></span>
<span id="line-S-24095-167"><span class="lno">167</span></span>
<span id="line-S-24095-168"><span class="lno">168</span></span>
<span id="line-S-24095-169"><span class="lno">169</span></span>
<span id="line-S-24095-170">170</span>
<span id="line-S-24095-171"><span class="lno">171</span></span>
<span id="line-S-24095-172"><span class="lno">172</span></span>
<span id="line-S-24095-173"><span class="lno">173</span></span>
<span id="line-S-24095-174"><span class="lno">174</span></span>
<span id="line-S-24095-175">175</span>
<span id="line-S-24095-176"><span class="lno">176</span></span>
<span id="line-S-24095-177"><span class="lno">177</span></span>
<span id="line-S-24095-178"><span class="lno">178</span></span>
<span id="line-S-24095-179"><span class="lno">179</span></span>
<span id="line-S-24095-180">180</span>
<span id="line-S-24095-181"><span class="lno">181</span></span>
<span id="line-S-24095-182"><span class="lno">182</span></span>
<span id="line-S-24095-183"><span class="lno">183</span></span>
<span id="line-S-24095-184"><span class="lno">184</span></span>
<span id="line-S-24095-185">185</span>
<span id="line-S-24095-186"><span class="lno">186</span></span>
<span id="line-S-24095-187"><span class="lno">187</span></span>
<span id="line-S-24095-188"><span class="lno">188</span></span>
<span id="line-S-24095-189"><span class="lno">189</span></span>
<span id="line-S-24095-190">190</span>
<span id="line-S-24095-191"><span class="lno">191</span></span>
<span id="line-S-24095-192"><span class="lno">192</span></span>
<span id="line-S-24095-193"><span class="lno">193</span></span>
<span id="line-S-24095-194"><span class="lno">194</span></span>
<span id="line-S-24095-195">195</span>
<span id="line-S-24095-196"><span class="lno">196</span></span>
<span id="line-S-24095-197"><span class="lno">197</span></span>
<span id="line-S-24095-198"><span class="lno">198</span></span>
<span id="line-S-24095-199"><span class="lno">199</span></span>
<span id="line-S-24095-200">200</span>
<span id="line-S-24095-201"><span class="lno">201</span></span>
<span id="line-S-24095-202"><span class="lno">202</span></span>
<span id="line-S-24095-203"><span class="lno">203</span></span>
<span id="line-S-24095-204"><span class="lno">204</span></span>
<span id="line-S-24095-205">205</span>
<span id="line-S-24095-206"><span class="lno">206</span></span>
<span id="line-S-24095-207"><span class="lno">207</span></span>
<span id="line-S-24095-208"><span class="lno">208</span></span>
<span id="line-S-24095-209"><span class="lno">209</span></span>
<span id="line-S-24095-210">210</span>
<span id="line-S-24095-211"><span class="lno">211</span></span>
<span id="line-S-24095-212"><span class="lno">212</span></span>
<span id="line-S-24095-213"><span class="lno">213</span></span>
<span id="line-S-24095-214"><span class="lno">214</span></span>
<span id="line-S-24095-215">215</span>
<span id="line-S-24095-216"><span class="lno">216</span></span>
<span id="line-S-24095-217"><span class="lno">217</span></span>
<span id="line-S-24095-218"><span class="lno">218</span></span>
<span id="line-S-24095-219"><span class="lno">219</span></span>
<span id="line-S-24095-220">220</span>
<span id="line-S-24095-221"><span class="lno">221</span></span>
<span id="line-S-24095-222"><span class="lno">222</span></span>
<span id="line-S-24095-223"><span class="lno">223</span></span>
<span id="line-S-24095-224"><span class="lno">224</span></span>
<span id="line-S-24095-225">225</span>
<span id="line-S-24095-226"><span class="lno">226</span></span>
<span id="line-S-24095-227"><span class="lno">227</span></span>
<span id="line-S-24095-228"><span class="lno">228</span></span>
<span id="line-S-24095-229"><span class="lno">229</span></span>
<span id="line-S-24095-230">230</span>
<span id="line-S-24095-231"><span class="lno">231</span></span>
<span id="line-S-24095-232"><span class="lno">232</span></span>
<span id="line-S-24095-233"><span class="lno">233</span></span>
<span id="line-S-24095-234"><span class="lno">234</span></span>
<span id="line-S-24095-235">235</span>
<span id="line-S-24095-236"><span class="lno">236</span></span>
<span id="line-S-24095-237"><span class="lno">237</span></span>
<span id="line-S-24095-238"><span class="lno">238</span></span>
<span id="line-S-24095-239"><span class="lno">239</span></span>
<span id="line-S-24095-240">240</span>
<span id="line-S-24095-241"><span class="lno">241</span></span>
<span id="line-S-24095-242"><span class="lno">242</span></span>
<span id="line-S-24095-243"><span class="lno">243</span></span>
<span id="line-S-24095-244"><span class="lno">244</span></span>
<span id="line-S-24095-245">245</span>
<span id="line-S-24095-246"><span class="lno">246</span></span>
<span id="line-S-24095-247"><span class="lno">247</span></span>
<span id="line-S-24095-248"><span class="lno">248</span></span>
<span id="line-S-24095-249"><span class="lno">249</span></span>
<span id="line-S-24095-250">250</span>
<span id="line-S-24095-251"><span class="lno">251</span></span>
<span id="line-S-24095-252"><span class="lno">252</span></span>
<span id="line-S-24095-253"><span class="lno">253</span></span>
<span id="line-S-24095-254"><span class="lno">254</span></span>
<span id="line-S-24095-255">255</span>
<span id="line-S-24095-256"><span class="lno">256</span></span>
<span id="line-S-24095-257"><span class="lno">257</span></span>
<span id="line-S-24095-258"><span class="lno">258</span></span>
<span id="line-S-24095-259"><span class="lno">259</span></span>
<span id="line-S-24095-260">260</span>
<span id="line-S-24095-261"><span class="lno">261</span></span>
<span id="line-S-24095-262"><span class="lno">262</span></span>
<span id="line-S-24095-263"><span class="lno">263</span></span>
<span id="line-S-24095-264"><span class="lno">264</span></span>
<span id="line-S-24095-265">265</span>
<span id="line-S-24095-266"><span class="lno">266</span></span>
<span id="line-S-24095-267"><span class="lno">267</span></span>
<span id="line-S-24095-268"><span class="lno">268</span></span>
<span id="line-S-24095-269"><span class="lno">269</span></span>
<span id="line-S-24095-270">270</span>
<span id="line-S-24095-271"><span class="lno">271</span></span>
<span id="line-S-24095-272"><span class="lno">272</span></span>
<span id="line-S-24095-273"><span class="lno">273</span></span>
<span id="line-S-24095-274"><span class="lno">274</span></span>
<span id="line-S-24095-275">275</span>
<span id="line-S-24095-276"><span class="lno">276</span></span>
<span id="line-S-24095-277"><span class="lno">277</span></span>
<span id="line-S-24095-278"><span class="lno">278</span></span>
<span id="line-S-24095-279"><span class="lno">279</span></span>
<span id="line-S-24095-280">280</span>
<span id="line-S-24095-281"><span class="lno">281</span></span>
<span id="line-S-24095-282"><span class="lno">282</span></span>
<span id="line-S-24095-283"><span class="lno">283</span></span>
<span id="line-S-24095-284"><span class="lno">284</span></span>
<span id="line-S-24095-285">285</span>
<span id="line-S-24095-286"><span class="lno">286</span></span>
<span id="line-S-24095-287"><span class="lno">287</span></span>
<span id="line-S-24095-288"><span class="lno">288</span></span>
<span id="line-S-24095-289"><span class="lno">289</span></span>
<span id="line-S-24095-290">290</span>
<span id="line-S-24095-291"><span class="lno">291</span></span>
<span id="line-S-24095-292"><span class="lno">292</span></span>
<span id="line-S-24095-293"><span class="lno">293</span></span>
<span id="line-S-24095-294"><span class="lno">294</span></span>
<span id="line-S-24095-295">295</span>
<span id="line-S-24095-296"><span class="lno">296</span></span>
</pre></td><td valign="top"><pre><code class="language-xml">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                xmlns:dbe="http://docbook.org/ns/docbook/errors"
                xmlns:f="http://docbook.org/ns/docbook/functions"
                xmlns:fp="http://docbook.org/ns/docbook/functions/private"
                xmlns:m="http://docbook.org/ns/docbook/modes"
                xmlns:map="http://www.w3.org/2005/xpath-functions/map"
                xmlns:v="http://docbook.org/ns/docbook/variables"
                xmlns:vp="http://docbook.org/ns/docbook/variables/private"
                xmlns:xs="http://www.w3.org/2001/XMLSchema"
                default-mode="m:profile"
                exclude-result-prefixes="dbe f fp m map v vp xs"
                version="3.0"&gt;

&lt;xsl:variable name="v:dynamic-profile-variables" as="map(xs:QName, item()*)"
              select="$vp:dynamic-parameters"/&gt;

&lt;xsl:variable name="vp:strmatch" select="'^(\$\P{Zs}+)\s*=\s*(.+)$'"/&gt;
&lt;xsl:variable name="vp:varmatch" select="'^(\$\P{Zs}+)$'"/&gt;

&lt;!-- It's convenient to specify the separately, but
     convenient to process them iteratively. --&gt;

&lt;!-- This is a slightly odd way to initialize the list, but
     it means the initial value is readable in the guide --&gt;
&lt;xsl:variable name="vp:profile-value-map" as="map(xs:QName, xs:string*)"&gt;
  &lt;xsl:map&gt;
    &lt;xsl:map-entry key="xs:QName('xml:lang')"
                   select="fp:profile-tokens($profile-lang)"/&gt;
    &lt;xsl:map-entry key="QName('','revisionflag')"
                   select="fp:profile-tokens($profile-revisionflag)"/&gt;
    &lt;xsl:map-entry key="QName('','role')"
                   select="fp:profile-tokens($profile-role)"/&gt;
    &lt;xsl:map-entry key="QName('','arch')"
                   select="fp:profile-tokens($profile-arch)"/&gt;
    &lt;xsl:map-entry key="QName('','audience')"
                   select="fp:profile-tokens($profile-audience)"/&gt;
    &lt;xsl:map-entry key="QName('','condition')"
                   select="fp:profile-tokens($profile-condition)"/&gt;
    &lt;xsl:map-entry key="QName('','conformance')"
                   select="fp:profile-tokens($profile-conformance)"/&gt;
    &lt;xsl:map-entry key="QName('','os')"
                   select="fp:profile-tokens($profile-os)"/&gt;
    &lt;xsl:map-entry key="QName('','outputformat')"
                   select="fp:profile-tokens($profile-outputformat)"/&gt;
    &lt;xsl:map-entry key="QName('','revision')"
                   select="fp:profile-tokens($profile-revision)"/&gt;
    &lt;xsl:map-entry key="QName('','security')"
                   select="fp:profile-tokens($profile-security)"/&gt;
    &lt;xsl:map-entry key="QName('','userlevel')"
                   select="fp:profile-tokens($profile-userlevel)"/&gt;
    &lt;xsl:map-entry key="QName('','vendor')"
                   select="fp:profile-tokens($profile-vendor)"/&gt;
    &lt;xsl:map-entry key="QName('','wordsize')"
                   select="fp:profile-tokens($profile-wordsize)"/&gt;
  &lt;/xsl:map&gt;
&lt;/xsl:variable&gt;

&lt;xsl:variable name="vp:profile-attributes" select="map:keys($vp:profile-value-map)"/&gt;

&lt;xsl:template match="/" as="document-node()"&gt;
  &lt;!-- If all the vp:profile-value-map values are the empty string,
       there's no actual ("static") profiling to be done. --&gt;
  &lt;xsl:variable name="has-profile" as="xs:string*"&gt;
    &lt;xsl:for-each select="map:keys($vp:profile-value-map)"&gt;
      &lt;xsl:sequence select="map:get($vp:profile-value-map, .)"/&gt;
    &lt;/xsl:for-each&gt;
  &lt;/xsl:variable&gt;

  &lt;xsl:choose&gt;
    &lt;!-- In the really common case when there's no profiling
         to be done, just return the document unchanged. --&gt;
    &lt;xsl:when test="not(f:is-true($dynamic-profiles)) and empty($has-profile)"&gt;
      &lt;xsl:sequence select="."/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:document&gt;
        &lt;xsl:apply-templates/&gt;
      &lt;/xsl:document&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="*"&gt;
  &lt;xsl:choose&gt;
    &lt;xsl:when test="fp:profile-suppress(.)"/&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:copy&gt;
        &lt;xsl:apply-templates select="@*,node()"/&gt;
      &lt;/xsl:copy&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="attribute()|text()|comment()|processing-instruction()"&gt;
  &lt;xsl:copy/&gt;
&lt;/xsl:template&gt;

&lt;xsl:function name="fp:profile-tokens" as="xs:string*"&gt;
  &lt;xsl:param name="profile" as="xs:string*"/&gt;

  &lt;xsl:for-each select="tokenize($profile, $profile-separator)"&gt;
    &lt;xsl:sequence select="if (normalize-space(.) = ''
                              or matches(., $vp:strmatch)
                              or matches(., $vp:varmatch))
                          then ()
                          else normalize-space(.)"/&gt;
  &lt;/xsl:for-each&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="fp:dynamic-profile-tokens" as="xs:string*"&gt;
  &lt;xsl:param name="profile" as="xs:string*"/&gt;

  &lt;xsl:for-each select="tokenize($profile, $profile-separator)"&gt;
    &lt;xsl:sequence select="if (matches(., $vp:strmatch)
                              or matches(., $vp:varmatch))
                          then .
                          else ()"/&gt;
  &lt;/xsl:for-each&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="fp:profile-suppress" as="xs:boolean"&gt;
  &lt;xsl:param name="context" as="element()"/&gt;

  &lt;xsl:variable name="profile" as="map(xs:QName, item()+)"&gt;
    &lt;xsl:map&gt;
      &lt;xsl:for-each select="$context/@*[node-name(.) = $vp:profile-attributes]"&gt;
        &lt;xsl:variable name="name" select="node-name(.)"/&gt;
        &lt;xsl:variable name="value" select="map:get($vp:profile-value-map, $name)"/&gt;
        &lt;xsl:if test="f:is-true($dynamic-profiles) or exists($value)"&gt;
          &lt;xsl:map-entry key="$name" select="(., $value)"/&gt;
        &lt;/xsl:if&gt;
      &lt;/xsl:for-each&gt;
    &lt;/xsl:map&gt;
  &lt;/xsl:variable&gt;

  &lt;xsl:choose&gt;
    &lt;xsl:when test="map:size($profile) = 0"&gt;
      &lt;xsl:sequence select="false()"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:variable name="suppress" as="xs:QName*"&gt;
        &lt;xsl:for-each select="map:keys($profile)"&gt;
          &lt;xsl:variable name="value"
                        select="string(map:get($profile, .)[1])"/&gt;
          &lt;xsl:variable name="tokens"
                        select="subsequence(map:get($profile, .), 2)"/&gt;
          &lt;xsl:variable name="ptokens"
                        select="fp:profile-tokens($value)"/&gt;
          &lt;xsl:if test="exists($tokens) and exists($ptokens)
                        and not($tokens = $ptokens)"&gt;
            &lt;xsl:message use-when="'profile-suppress' = $v:debug"&gt;
              &lt;xsl:text&gt;Suppressed &lt;/xsl:text&gt;
              &lt;xsl:sequence select="if ($context/@xml:id)
                                    then node-name($context) || '/' || $context/@xml:id
                                    else node-name($context)"/&gt;
              &lt;xsl:sequence select="':', $tokens, '!=', fp:profile-tokens($value)"/&gt;
            &lt;/xsl:message&gt;
            &lt;xsl:sequence select="."/&gt;
          &lt;/xsl:if&gt;
        &lt;/xsl:for-each&gt;
      &lt;/xsl:variable&gt;
      &lt;xsl:choose&gt;
        &lt;xsl:when test="exists($suppress)"&gt;
          &lt;xsl:sequence select="true()"/&gt;
        &lt;/xsl:when&gt;
        &lt;xsl:when test="not(f:is-true($dynamic-profiles))"&gt;
          &lt;xsl:sequence select="false()"/&gt;
        &lt;/xsl:when&gt;
        &lt;xsl:otherwise&gt;
          &lt;xsl:variable name="include" as="xs:boolean*"&gt;
            &lt;xsl:for-each select="map:keys($profile)"&gt;
              &lt;xsl:variable name="value" select="map:get($profile, .)[1]"/&gt;
              &lt;xsl:variable name="tokens"
                            select="fp:dynamic-profile-tokens(string($value))"/&gt;
              &lt;xsl:for-each select="$tokens"&gt;
                &lt;xsl:if use-when="'dynamic-profile' = $v:debug
                                  or 'dynamic-profile-suppress' = $v:debug"
                        test="false() = fp:dynamic-include($context, .)"&gt;
                  &lt;xsl:message&gt;
                    &lt;xsl:text&gt;Exclude &lt;/xsl:text&gt;
                    &lt;xsl:sequence
                        select="if ($context/@xml:id)
                                then node-name($context) || '/' || $context/@xml:id
                                else node-name($context)"/&gt;
                    &lt;xsl:sequence select="':', ."/&gt;
                  &lt;/xsl:message&gt;
                &lt;/xsl:if&gt;
                &lt;xsl:if use-when="'dynamic-profile' = $v:debug"
                        test="not(false() = fp:dynamic-include($context, .))"&gt;
                  &lt;xsl:message&gt;
                    &lt;xsl:text&gt;Include &lt;/xsl:text&gt;
                    &lt;xsl:sequence
                        select="if ($context/@xml:id)
                                then node-name($context) || '/' || $context/@xml:id
                                else node-name($context)"/&gt;
                    &lt;xsl:sequence select="':', ."/&gt;
                  &lt;/xsl:message&gt;
                &lt;/xsl:if&gt;
                &lt;xsl:sequence select="fp:dynamic-include($context, .)"/&gt;
              &lt;/xsl:for-each&gt;
            &lt;/xsl:for-each&gt;
          &lt;/xsl:variable&gt;
          &lt;!-- existential quantification: "true" if any value in the
               list of values in $include has the value "false" --&gt;
          &lt;xsl:sequence select="false() = $include"/&gt;
        &lt;/xsl:otherwise&gt;
      &lt;/xsl:choose&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="fp:dynamic-include" as="xs:boolean?"&gt;
  &lt;xsl:param name="context" as="element()"/&gt;
  &lt;xsl:param name="expr" as="xs:string"/&gt;

  &lt;xsl:choose&gt;
    &lt;xsl:when test="matches($expr, $vp:strmatch)"&gt;
      &lt;xsl:variable name="var" select="replace($expr, $vp:strmatch, '$1')"/&gt;
      &lt;xsl:variable name="value" select="replace($expr, $vp:strmatch, '$2')"/&gt;
      &lt;xsl:sequence select="fp:check-profile($context, $var, $value)"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="matches($expr, $vp:varmatch)"&gt;
      &lt;xsl:sequence select="fp:check-profile($context, $expr, ())"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;!-- I don't actually think this is possible. --&gt;
      &lt;xsl:sequence select="error($dbe:DYNAMIC-PROFILE-SYNTAX-ERROR,
                                  'Unparseable: ' || $expr)"/&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="fp:check-profile" as="xs:boolean?"&gt;
  &lt;xsl:param name="context" as="element()"/&gt;
  &lt;xsl:param name="variable" as="xs:string"/&gt;
  &lt;xsl:param name="expected-value" as="xs:string?"/&gt;

  &lt;xsl:variable
      name="expected-value"
      select="if ((starts-with($expected-value, '''')
                   and ends-with($expected-value, ''''))
                  or
                  (starts-with($expected-value, '&amp;quot;')
                   and ends-with($expected-value, '&amp;quot;')))
              then substring($expected-value, 2, string-length($expected-value) - 2)
              else $expected-value"/&gt;

  &lt;xsl:try&gt;
    &lt;xsl:variable name="actual-value" as="item()*"&gt;
      &lt;xsl:evaluate xpath="$variable"
                    context-item="$context"
                    namespace-context="$context"
                    with-params="$v:dynamic-profile-variables"/&gt;
    &lt;/xsl:variable&gt;
    &lt;xsl:choose&gt;
      &lt;xsl:when test="exists($expected-value)"&gt;
        &lt;xsl:sequence select="$expected-value = ($actual-value ! string(.))"/&gt;
      &lt;/xsl:when&gt;
      &lt;xsl:when test="('no','false','0') = ($actual-value ! string(.))"&gt;
        &lt;xsl:sequence select="false()"/&gt;
      &lt;/xsl:when&gt;
      &lt;xsl:when test="('yes','true','1') = ($actual-value ! string(.))"&gt;
        &lt;xsl:sequence select="true()"/&gt;
      &lt;/xsl:when&gt;
      &lt;xsl:otherwise&gt;
        &lt;xsl:sequence select="true() = ($actual-value ! boolean(.))"/&gt;
      &lt;/xsl:otherwise&gt;
    &lt;/xsl:choose&gt;
    &lt;xsl:catch&gt;
      &lt;xsl:choose&gt;
        &lt;xsl:when test="$dynamic-profile-error = 'ignore'"&gt;
          &lt;xsl:sequence select="()"/&gt;
        &lt;/xsl:when&gt;
        &lt;xsl:when test="$dynamic-profile-error = 'include'"&gt;
          &lt;xsl:sequence select="true()"/&gt;
        &lt;/xsl:when&gt;
        &lt;xsl:when test="$dynamic-profile-error = 'exclude'"&gt;
          &lt;xsl:sequence select="false()"/&gt;
        &lt;/xsl:when&gt;
        &lt;xsl:when test="$dynamic-profile-error = 'error'"&gt;
          &lt;xsl:sequence select="error($dbe:DYNAMIC-PROFILE-EVAL-ERROR,
                                'Dynamic profiling error: ' || $variable)"/&gt;
        &lt;/xsl:when&gt;
        &lt;xsl:otherwise&gt;
          &lt;xsl:sequence
              select="error($dbe:INVALID-DYNAMIC-PROFILE-ERROR,
                      'Invalid $dynamic-profile-error: ' || $dynamic-profile-error)"/&gt;
        &lt;/xsl:otherwise&gt;
      &lt;/xsl:choose&gt;
    &lt;/xsl:catch&gt;
  &lt;/xsl:try&gt;
&lt;/xsl:function&gt;

&lt;/xsl:stylesheet&gt;
</code></pre></td></tr></table></div></div></div></div><div class="stylesheet" id="S-59718"><h3>chunk.xsl</h3><p><span><span class="template all">19 templates</span></span>, <span><span class="function all">9 functions</span> (<span class="function unused">3 unused</span>, <span class="function elsewhere">1 used only in one other module</span>)</span></p><div class="instructions"><div class="title closed">Instructions</div><div class="body"><div id="S-59718-docbook.org.ns.docbook.functions.chunk,1" class="instruction function elsewhere"><div class="title"><span class="link"></span>Function f:chunk($node as element()) as attribute()*</div><div class="props"><div class="uses">Uses: <a href="#S-26643-docbook.org.ns.docbook.variables.chunk">$v:chunk</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-10102-t-1">template</a>, <a href="#S-10102-t-2">template</a>, <a href="#S-10102-t-3">template</a>, <a href="#S-10102-t-4">template</a>, <a href="#S-10102-t-5">template</a>, <a href="#S-10102-t-6">template</a>, <a href="#S-10102-t-7">template</a>, <a href="#S-10102-t-8">template</a>, <a href="#S-10102-t-9">template</a>, <a href="#S-10102-t-10">template</a>, <a href="#S-10102-t-12">template</a>, <a href="#S-10102-t-13">template</a>, <a href="#S-10102-t-14">template</a>, <a href="#S-10102-t-15">template</a>, <a href="#S-10102-t-16">template</a>, <a href="#S-10102-t-17">template</a>, <a href="#S-10102-t-18">template</a>, <a href="#S-10102-t-19">template</a>, <a href="#S-10102-t-20">template</a>, <a href="#S-10102-t-21">template</a>, <a href="#S-10102-t-22">template</a></div><div class="used-in"><span class="marker" title="Only used in one other module">☝</span>Used in: <a href="#S-10102">modules/attributes.xsl</a></div></div></div><div id="S-59718-docbook.org.ns.docbook.functions.private.chunk-include,1" class="instruction function"><div class="title"><span class="link"></span>Function fp:chunk-include($node as element()) as xs:boolean</div><div class="props"><div class="uses">Uses: <a href="#S-26643-..chunk-include">$chunk-include</a>, <a href="#S-26643-..chunk-section-depth">$chunk-section-depth</a></div><div class="calls">Calls: <a href="#S-59718-docbook.org.ns.docbook.functions.chunk,1">f:chunk()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-59718-docbook.org.ns.docbook.functions.chunk,1">f:chunk()</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-59718">modules/chunk.xsl</a></div></div></div><div id="S-59718-docbook.org.ns.docbook.functions.private.chunk-exclude,1" class="instruction function"><div class="title"><span class="link"></span>Function fp:chunk-exclude($node as element()) as xs:boolean</div><div class="props"><div class="uses">Uses: <a href="#S-26643-..chunk-exclude">$chunk-exclude</a></div><div class="calls">Calls: <a href="#S-59718-docbook.org.ns.docbook.functions.chunk,1">f:chunk()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-59718-docbook.org.ns.docbook.functions.chunk,1">f:chunk()</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-59718">modules/chunk.xsl</a></div></div></div><div id="S-59718-docbook.org.ns.docbook.functions.private.matches-expr,2" class="instruction function"><div class="title"><span class="link"></span>Function fp:matches-expr($node as element(), $expr as xs:string*) as xs:boolean</div><div class="props"><div class="uses">Uses: <a href="#S-23412-docbook.org.ns.docbook.variables.chunk-filter-namespaces">$v:chunk-filter-namespaces</a></div><div class="calls">Calls: <a href="#S-59718-docbook.org.ns.docbook.functions.private.chunk-exclude,1">fp:chunk-exclude()</a>, <a href="#S-59718-docbook.org.ns.docbook.functions.private.chunk-include,1">fp:chunk-include()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-59718-docbook.org.ns.docbook.functions.private.chunk-exclude,1">fp:chunk-exclude()</a>, <a href="#S-59718-docbook.org.ns.docbook.functions.private.chunk-include,1">fp:chunk-include()</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-59718">modules/chunk.xsl</a></div></div></div><div id="S-59718-docbook.org.ns.docbook.functions.chunk-filename,1" class="instruction function"><div class="title"><span class="link"></span>Function f:chunk-filename($node as element()) as xs:string</div><div class="props"><div class="uses">Uses: <a href="#S-26643-..html-extension">$html-extension</a></div><div class="calls">Calls: <a href="#S-59718-docbook.org.ns.docbook.functions.chunk,1">f:chunk()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-59718-docbook.org.ns.docbook.functions.chunk,1">f:chunk()</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-59718">modules/chunk.xsl</a></div></div></div><div id="S-59718-docbook.org.ns.docbook.functions.private.chunk-navigation,1" class="instruction function"><div class="title"><span class="link"></span>Function fp:chunk-navigation($node as element()) as attribute()*</div><div class="props"><div class="calls">Calls: <a href="#S-59718-docbook.org.ns.docbook.functions.chunk,1">f:chunk()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-6566-t-1">template</a>, <a href="#S-59718-docbook.org.ns.docbook.functions.chunk,1">f:chunk()</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-6566">main.xsl</a>, <a href="#S-59718">modules/chunk.xsl</a></div></div></div><div id="S-59718-docbook.org.ns.docbook.functions.private.trim-common-prefix,2" class="instruction function unused"><div class="title"><span class="link"></span>Function fp:trim-common-prefix#2($source as xs:string, $target as xs:string) as xs:string</div><div class="props"><div class="used-by"><span class="marker">☞</span><span class="unused">Unused</span></div></div></div><div id="S-59718-docbook.org.ns.docbook.functions.private.trim-common-parts,2" class="instruction function unused"><div class="title"><span class="link"></span>Function fp:trim-common-parts#2($source as xs:string*, $target as xs:string*) as xs:string*</div><div class="props"><div class="used-by"><span class="marker">☞</span><span class="unused">Unused</span></div></div></div><div id="S-59718-docbook.org.ns.docbook.functions.private.root-base-uri,1" class="instruction function unused"><div class="title"><span class="link"></span>Function fp:root-base-uri#1($node as element()) as xs:anyURI</div><div class="props"><div class="uses">Uses: <a href="#S-26643-..chunk-output-base-uri">$chunk-output-base-uri</a></div><div class="used-by"><span class="marker">☞</span><span class="unused">Unused</span></div></div></div><div id="S-59718-t-1" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ *</div><div class="props"><div class="calls">Calls: <a href="#S-28936-docbook.org.ns.docbook.functions.generate-id,1">f:generate-id()</a></div><div class="mode">Mode: <code>m:chunk-filename</code></div><div class="matches">Matches: <code>*</code></div></div></div><div id="S-59718-t-2" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:set</div><div class="props"><div class="mode">Mode: <code>m:chunk-filename</code></div><div class="matches">Matches: <code>db:set</code></div></div></div><div id="S-59718-t-3" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:book</div><div class="props"><div class="mode">Mode: <code>m:chunk-filename</code></div><div class="matches">Matches: <code>db:book</code></div></div></div><div id="S-59718-t-4" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:acknowledgements</div><div class="props"><div class="mode">Mode: <code>m:chunk-filename</code></div><div class="matches">Matches: <code>db:acknowledgements</code></div></div></div><div id="S-59718-t-5" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:appendix</div><div class="props"><div class="mode">Mode: <code>m:chunk-filename</code></div><div class="matches">Matches: <code>db:appendix</code></div></div></div><div id="S-59718-t-6" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:article</div><div class="props"><div class="mode">Mode: <code>m:chunk-filename</code></div><div class="matches">Matches: <code>db:article</code></div></div></div><div id="S-59718-t-7" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:bibliography</div><div class="props"><div class="mode">Mode: <code>m:chunk-filename</code></div><div class="matches">Matches: <code>db:bibliography</code></div></div></div><div id="S-59718-t-8" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:chapter</div><div class="props"><div class="mode">Mode: <code>m:chunk-filename</code></div><div class="matches">Matches: <code>db:chapter</code></div></div></div><div id="S-59718-t-9" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:colophon</div><div class="props"><div class="mode">Mode: <code>m:chunk-filename</code></div><div class="matches">Matches: <code>db:colophon</code></div></div></div><div id="S-59718-t-10" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:dedication</div><div class="props"><div class="mode">Mode: <code>m:chunk-filename</code></div><div class="matches">Matches: <code>db:dedication</code></div></div></div><div id="S-59718-t-11" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:glossary</div><div class="props"><div class="mode">Mode: <code>m:chunk-filename</code></div><div class="matches">Matches: <code>db:glossary</code></div></div></div><div id="S-59718-t-12" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:index</div><div class="props"><div class="mode">Mode: <code>m:chunk-filename</code></div><div class="matches">Matches: <code>db:index</code></div></div></div><div id="S-59718-t-13" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:part</div><div class="props"><div class="mode">Mode: <code>m:chunk-filename</code></div><div class="matches">Matches: <code>db:part</code></div></div></div><div id="S-59718-t-14" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:preface</div><div class="props"><div class="mode">Mode: <code>m:chunk-filename</code></div><div class="matches">Matches: <code>db:preface</code></div></div></div><div id="S-59718-t-15" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:reference</div><div class="props"><div class="mode">Mode: <code>m:chunk-filename</code></div><div class="matches">Matches: <code>db:reference</code></div></div></div><div id="S-59718-t-16" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:refentry</div><div class="props"><div class="mode">Mode: <code>m:chunk-filename</code></div><div class="matches">Matches: <code>db:refentry</code></div></div></div><div id="S-59718-t-17" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:topic</div><div class="props"><div class="mode">Mode: <code>m:chunk-filename</code></div><div class="matches">Matches: <code>db:topic</code></div></div></div><div id="S-59718-t-18" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:sect1|db:sect2|db:sect3|db:…</div><div class="props"><div class="mode">Mode: <code>m:chunk-filename</code></div><div class="matches">Matches: <code>db:sect1</code>, <code>db:sect2</code>, <code>db:sect3</code>, <code>db:sect4</code>, <code>db:sect5</code></div></div></div><div id="S-59718-t-19" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:section</div><div class="props"><div class="mode">Mode: <code>m:chunk-filename</code></div><div class="matches">Matches: <code>db:section</code></div></div></div></div></div><div class="source-code"><div class="title closed">Source code</div><div class="body"><div><table><tr><td valign="top" align="right"><pre class="fake-prism"><span id="line-S-59718-1">1</span>
<span id="line-S-59718-2"><span class="lno">2</span></span>
<span id="line-S-59718-3"><span class="lno">3</span></span>
<span id="line-S-59718-4"><span class="lno">4</span></span>
<span id="line-S-59718-5">5</span>
<span id="line-S-59718-6"><span class="lno">6</span></span>
<span id="line-S-59718-7"><span class="lno">7</span></span>
<span id="line-S-59718-8"><span class="lno">8</span></span>
<span id="line-S-59718-9"><span class="lno">9</span></span>
<span id="line-S-59718-10">10</span>
<span id="line-S-59718-11"><span class="lno">11</span></span>
<span id="line-S-59718-12"><span class="lno">12</span></span>
<span id="line-S-59718-13"><span class="lno">13</span></span>
<span id="line-S-59718-14"><span class="lno">14</span></span>
<span id="line-S-59718-15">15</span>
<span id="line-S-59718-16"><span class="lno">16</span></span>
<span id="line-S-59718-17"><span class="lno">17</span></span>
<span id="line-S-59718-18"><span class="lno">18</span></span>
<span id="line-S-59718-19"><span class="lno">19</span></span>
<span id="line-S-59718-20">20</span>
<span id="line-S-59718-21"><span class="lno">21</span></span>
<span id="line-S-59718-22"><span class="lno">22</span></span>
<span id="line-S-59718-23"><span class="lno">23</span></span>
<span id="line-S-59718-24"><span class="lno">24</span></span>
<span id="line-S-59718-25">25</span>
<span id="line-S-59718-26"><span class="lno">26</span></span>
<span id="line-S-59718-27"><span class="lno">27</span></span>
<span id="line-S-59718-28"><span class="lno">28</span></span>
<span id="line-S-59718-29"><span class="lno">29</span></span>
<span id="line-S-59718-30">30</span>
<span id="line-S-59718-31"><span class="lno">31</span></span>
<span id="line-S-59718-32"><span class="lno">32</span></span>
<span id="line-S-59718-33"><span class="lno">33</span></span>
<span id="line-S-59718-34"><span class="lno">34</span></span>
<span id="line-S-59718-35">35</span>
<span id="line-S-59718-36"><span class="lno">36</span></span>
<span id="line-S-59718-37"><span class="lno">37</span></span>
<span id="line-S-59718-38"><span class="lno">38</span></span>
<span id="line-S-59718-39"><span class="lno">39</span></span>
<span id="line-S-59718-40">40</span>
<span id="line-S-59718-41"><span class="lno">41</span></span>
<span id="line-S-59718-42"><span class="lno">42</span></span>
<span id="line-S-59718-43"><span class="lno">43</span></span>
<span id="line-S-59718-44"><span class="lno">44</span></span>
<span id="line-S-59718-45">45</span>
<span id="line-S-59718-46"><span class="lno">46</span></span>
<span id="line-S-59718-47"><span class="lno">47</span></span>
<span id="line-S-59718-48"><span class="lno">48</span></span>
<span id="line-S-59718-49"><span class="lno">49</span></span>
<span id="line-S-59718-50">50</span>
<span id="line-S-59718-51"><span class="lno">51</span></span>
<span id="line-S-59718-52"><span class="lno">52</span></span>
<span id="line-S-59718-53"><span class="lno">53</span></span>
<span id="line-S-59718-54"><span class="lno">54</span></span>
<span id="line-S-59718-55">55</span>
<span id="line-S-59718-56"><span class="lno">56</span></span>
<span id="line-S-59718-57"><span class="lno">57</span></span>
<span id="line-S-59718-58"><span class="lno">58</span></span>
<span id="line-S-59718-59"><span class="lno">59</span></span>
<span id="line-S-59718-60">60</span>
<span id="line-S-59718-61"><span class="lno">61</span></span>
<span id="line-S-59718-62"><span class="lno">62</span></span>
<span id="line-S-59718-63"><span class="lno">63</span></span>
<span id="line-S-59718-64"><span class="lno">64</span></span>
<span id="line-S-59718-65">65</span>
<span id="line-S-59718-66"><span class="lno">66</span></span>
<span id="line-S-59718-67"><span class="lno">67</span></span>
<span id="line-S-59718-68"><span class="lno">68</span></span>
<span id="line-S-59718-69"><span class="lno">69</span></span>
<span id="line-S-59718-70">70</span>
<span id="line-S-59718-71"><span class="lno">71</span></span>
<span id="line-S-59718-72"><span class="lno">72</span></span>
<span id="line-S-59718-73"><span class="lno">73</span></span>
<span id="line-S-59718-74"><span class="lno">74</span></span>
<span id="line-S-59718-75">75</span>
<span id="line-S-59718-76"><span class="lno">76</span></span>
<span id="line-S-59718-77"><span class="lno">77</span></span>
<span id="line-S-59718-78"><span class="lno">78</span></span>
<span id="line-S-59718-79"><span class="lno">79</span></span>
<span id="line-S-59718-80">80</span>
<span id="line-S-59718-81"><span class="lno">81</span></span>
<span id="line-S-59718-82"><span class="lno">82</span></span>
<span id="line-S-59718-83"><span class="lno">83</span></span>
<span id="line-S-59718-84"><span class="lno">84</span></span>
<span id="line-S-59718-85">85</span>
<span id="line-S-59718-86"><span class="lno">86</span></span>
<span id="line-S-59718-87"><span class="lno">87</span></span>
<span id="line-S-59718-88"><span class="lno">88</span></span>
<span id="line-S-59718-89"><span class="lno">89</span></span>
<span id="line-S-59718-90">90</span>
<span id="line-S-59718-91"><span class="lno">91</span></span>
<span id="line-S-59718-92"><span class="lno">92</span></span>
<span id="line-S-59718-93"><span class="lno">93</span></span>
<span id="line-S-59718-94"><span class="lno">94</span></span>
<span id="line-S-59718-95">95</span>
<span id="line-S-59718-96"><span class="lno">96</span></span>
<span id="line-S-59718-97"><span class="lno">97</span></span>
<span id="line-S-59718-98"><span class="lno">98</span></span>
<span id="line-S-59718-99"><span class="lno">99</span></span>
<span id="line-S-59718-100">100</span>
<span id="line-S-59718-101"><span class="lno">101</span></span>
<span id="line-S-59718-102"><span class="lno">102</span></span>
<span id="line-S-59718-103"><span class="lno">103</span></span>
<span id="line-S-59718-104"><span class="lno">104</span></span>
<span id="line-S-59718-105">105</span>
<span id="line-S-59718-106"><span class="lno">106</span></span>
<span id="line-S-59718-107"><span class="lno">107</span></span>
<span id="line-S-59718-108"><span class="lno">108</span></span>
<span id="line-S-59718-109"><span class="lno">109</span></span>
<span id="line-S-59718-110">110</span>
<span id="line-S-59718-111"><span class="lno">111</span></span>
<span id="line-S-59718-112"><span class="lno">112</span></span>
<span id="line-S-59718-113"><span class="lno">113</span></span>
<span id="line-S-59718-114"><span class="lno">114</span></span>
<span id="line-S-59718-115">115</span>
<span id="line-S-59718-116"><span class="lno">116</span></span>
<span id="line-S-59718-117"><span class="lno">117</span></span>
<span id="line-S-59718-118"><span class="lno">118</span></span>
<span id="line-S-59718-119"><span class="lno">119</span></span>
<span id="line-S-59718-120">120</span>
<span id="line-S-59718-121"><span class="lno">121</span></span>
<span id="line-S-59718-122"><span class="lno">122</span></span>
<span id="line-S-59718-123"><span class="lno">123</span></span>
<span id="line-S-59718-124"><span class="lno">124</span></span>
<span id="line-S-59718-125">125</span>
<span id="line-S-59718-126"><span class="lno">126</span></span>
<span id="line-S-59718-127"><span class="lno">127</span></span>
<span id="line-S-59718-128"><span class="lno">128</span></span>
<span id="line-S-59718-129"><span class="lno">129</span></span>
<span id="line-S-59718-130">130</span>
<span id="line-S-59718-131"><span class="lno">131</span></span>
<span id="line-S-59718-132"><span class="lno">132</span></span>
<span id="line-S-59718-133"><span class="lno">133</span></span>
<span id="line-S-59718-134"><span class="lno">134</span></span>
<span id="line-S-59718-135">135</span>
<span id="line-S-59718-136"><span class="lno">136</span></span>
<span id="line-S-59718-137"><span class="lno">137</span></span>
<span id="line-S-59718-138"><span class="lno">138</span></span>
<span id="line-S-59718-139"><span class="lno">139</span></span>
<span id="line-S-59718-140">140</span>
<span id="line-S-59718-141"><span class="lno">141</span></span>
<span id="line-S-59718-142"><span class="lno">142</span></span>
<span id="line-S-59718-143"><span class="lno">143</span></span>
<span id="line-S-59718-144"><span class="lno">144</span></span>
<span id="line-S-59718-145">145</span>
<span id="line-S-59718-146"><span class="lno">146</span></span>
<span id="line-S-59718-147"><span class="lno">147</span></span>
<span id="line-S-59718-148"><span class="lno">148</span></span>
<span id="line-S-59718-149"><span class="lno">149</span></span>
<span id="line-S-59718-150">150</span>
<span id="line-S-59718-151"><span class="lno">151</span></span>
<span id="line-S-59718-152"><span class="lno">152</span></span>
<span id="line-S-59718-153"><span class="lno">153</span></span>
<span id="line-S-59718-154"><span class="lno">154</span></span>
<span id="line-S-59718-155">155</span>
<span id="line-S-59718-156"><span class="lno">156</span></span>
<span id="line-S-59718-157"><span class="lno">157</span></span>
<span id="line-S-59718-158"><span class="lno">158</span></span>
<span id="line-S-59718-159"><span class="lno">159</span></span>
<span id="line-S-59718-160">160</span>
<span id="line-S-59718-161"><span class="lno">161</span></span>
<span id="line-S-59718-162"><span class="lno">162</span></span>
<span id="line-S-59718-163"><span class="lno">163</span></span>
<span id="line-S-59718-164"><span class="lno">164</span></span>
<span id="line-S-59718-165">165</span>
<span id="line-S-59718-166"><span class="lno">166</span></span>
<span id="line-S-59718-167"><span class="lno">167</span></span>
<span id="line-S-59718-168"><span class="lno">168</span></span>
<span id="line-S-59718-169"><span class="lno">169</span></span>
<span id="line-S-59718-170">170</span>
<span id="line-S-59718-171"><span class="lno">171</span></span>
<span id="line-S-59718-172"><span class="lno">172</span></span>
<span id="line-S-59718-173"><span class="lno">173</span></span>
<span id="line-S-59718-174"><span class="lno">174</span></span>
<span id="line-S-59718-175">175</span>
<span id="line-S-59718-176"><span class="lno">176</span></span>
<span id="line-S-59718-177"><span class="lno">177</span></span>
<span id="line-S-59718-178"><span class="lno">178</span></span>
<span id="line-S-59718-179"><span class="lno">179</span></span>
<span id="line-S-59718-180">180</span>
<span id="line-S-59718-181"><span class="lno">181</span></span>
<span id="line-S-59718-182"><span class="lno">182</span></span>
<span id="line-S-59718-183"><span class="lno">183</span></span>
<span id="line-S-59718-184"><span class="lno">184</span></span>
<span id="line-S-59718-185">185</span>
<span id="line-S-59718-186"><span class="lno">186</span></span>
<span id="line-S-59718-187"><span class="lno">187</span></span>
<span id="line-S-59718-188"><span class="lno">188</span></span>
<span id="line-S-59718-189"><span class="lno">189</span></span>
<span id="line-S-59718-190">190</span>
<span id="line-S-59718-191"><span class="lno">191</span></span>
<span id="line-S-59718-192"><span class="lno">192</span></span>
<span id="line-S-59718-193"><span class="lno">193</span></span>
<span id="line-S-59718-194"><span class="lno">194</span></span>
<span id="line-S-59718-195">195</span>
<span id="line-S-59718-196"><span class="lno">196</span></span>
<span id="line-S-59718-197"><span class="lno">197</span></span>
<span id="line-S-59718-198"><span class="lno">198</span></span>
<span id="line-S-59718-199"><span class="lno">199</span></span>
<span id="line-S-59718-200">200</span>
<span id="line-S-59718-201"><span class="lno">201</span></span>
<span id="line-S-59718-202"><span class="lno">202</span></span>
<span id="line-S-59718-203"><span class="lno">203</span></span>
<span id="line-S-59718-204"><span class="lno">204</span></span>
<span id="line-S-59718-205">205</span>
<span id="line-S-59718-206"><span class="lno">206</span></span>
<span id="line-S-59718-207"><span class="lno">207</span></span>
<span id="line-S-59718-208"><span class="lno">208</span></span>
<span id="line-S-59718-209"><span class="lno">209</span></span>
<span id="line-S-59718-210">210</span>
<span id="line-S-59718-211"><span class="lno">211</span></span>
<span id="line-S-59718-212"><span class="lno">212</span></span>
<span id="line-S-59718-213"><span class="lno">213</span></span>
<span id="line-S-59718-214"><span class="lno">214</span></span>
<span id="line-S-59718-215">215</span>
<span id="line-S-59718-216"><span class="lno">216</span></span>
<span id="line-S-59718-217"><span class="lno">217</span></span>
<span id="line-S-59718-218"><span class="lno">218</span></span>
<span id="line-S-59718-219"><span class="lno">219</span></span>
<span id="line-S-59718-220">220</span>
<span id="line-S-59718-221"><span class="lno">221</span></span>
<span id="line-S-59718-222"><span class="lno">222</span></span>
<span id="line-S-59718-223"><span class="lno">223</span></span>
<span id="line-S-59718-224"><span class="lno">224</span></span>
<span id="line-S-59718-225">225</span>
<span id="line-S-59718-226"><span class="lno">226</span></span>
<span id="line-S-59718-227"><span class="lno">227</span></span>
<span id="line-S-59718-228"><span class="lno">228</span></span>
<span id="line-S-59718-229"><span class="lno">229</span></span>
<span id="line-S-59718-230">230</span>
<span id="line-S-59718-231"><span class="lno">231</span></span>
<span id="line-S-59718-232"><span class="lno">232</span></span>
<span id="line-S-59718-233"><span class="lno">233</span></span>
<span id="line-S-59718-234"><span class="lno">234</span></span>
<span id="line-S-59718-235">235</span>
<span id="line-S-59718-236"><span class="lno">236</span></span>
<span id="line-S-59718-237"><span class="lno">237</span></span>
<span id="line-S-59718-238"><span class="lno">238</span></span>
<span id="line-S-59718-239"><span class="lno">239</span></span>
<span id="line-S-59718-240">240</span>
<span id="line-S-59718-241"><span class="lno">241</span></span>
<span id="line-S-59718-242"><span class="lno">242</span></span>
<span id="line-S-59718-243"><span class="lno">243</span></span>
<span id="line-S-59718-244"><span class="lno">244</span></span>
<span id="line-S-59718-245">245</span>
<span id="line-S-59718-246"><span class="lno">246</span></span>
<span id="line-S-59718-247"><span class="lno">247</span></span>
<span id="line-S-59718-248"><span class="lno">248</span></span>
<span id="line-S-59718-249"><span class="lno">249</span></span>
<span id="line-S-59718-250">250</span>
<span id="line-S-59718-251"><span class="lno">251</span></span>
<span id="line-S-59718-252"><span class="lno">252</span></span>
<span id="line-S-59718-253"><span class="lno">253</span></span>
<span id="line-S-59718-254"><span class="lno">254</span></span>
<span id="line-S-59718-255">255</span>
<span id="line-S-59718-256"><span class="lno">256</span></span>
<span id="line-S-59718-257"><span class="lno">257</span></span>
<span id="line-S-59718-258"><span class="lno">258</span></span>
<span id="line-S-59718-259"><span class="lno">259</span></span>
<span id="line-S-59718-260">260</span>
<span id="line-S-59718-261"><span class="lno">261</span></span>
<span id="line-S-59718-262"><span class="lno">262</span></span>
<span id="line-S-59718-263"><span class="lno">263</span></span>
<span id="line-S-59718-264"><span class="lno">264</span></span>
<span id="line-S-59718-265">265</span>
<span id="line-S-59718-266"><span class="lno">266</span></span>
<span id="line-S-59718-267"><span class="lno">267</span></span>
<span id="line-S-59718-268"><span class="lno">268</span></span>
<span id="line-S-59718-269"><span class="lno">269</span></span>
<span id="line-S-59718-270">270</span>
<span id="line-S-59718-271"><span class="lno">271</span></span>
<span id="line-S-59718-272"><span class="lno">272</span></span>
<span id="line-S-59718-273"><span class="lno">273</span></span>
<span id="line-S-59718-274"><span class="lno">274</span></span>
<span id="line-S-59718-275">275</span>
<span id="line-S-59718-276"><span class="lno">276</span></span>
<span id="line-S-59718-277"><span class="lno">277</span></span>
<span id="line-S-59718-278"><span class="lno">278</span></span>
<span id="line-S-59718-279"><span class="lno">279</span></span>
<span id="line-S-59718-280">280</span>
<span id="line-S-59718-281"><span class="lno">281</span></span>
<span id="line-S-59718-282"><span class="lno">282</span></span>
<span id="line-S-59718-283"><span class="lno">283</span></span>
<span id="line-S-59718-284"><span class="lno">284</span></span>
<span id="line-S-59718-285">285</span>
<span id="line-S-59718-286"><span class="lno">286</span></span>
<span id="line-S-59718-287"><span class="lno">287</span></span>
<span id="line-S-59718-288"><span class="lno">288</span></span>
<span id="line-S-59718-289"><span class="lno">289</span></span>
<span id="line-S-59718-290">290</span>
<span id="line-S-59718-291"><span class="lno">291</span></span>
<span id="line-S-59718-292"><span class="lno">292</span></span>
<span id="line-S-59718-293"><span class="lno">293</span></span>
<span id="line-S-59718-294"><span class="lno">294</span></span>
<span id="line-S-59718-295">295</span>
<span id="line-S-59718-296"><span class="lno">296</span></span>
<span id="line-S-59718-297"><span class="lno">297</span></span>
<span id="line-S-59718-298"><span class="lno">298</span></span>
<span id="line-S-59718-299"><span class="lno">299</span></span>
<span id="line-S-59718-300">300</span>
<span id="line-S-59718-301"><span class="lno">301</span></span>
<span id="line-S-59718-302"><span class="lno">302</span></span>
<span id="line-S-59718-303"><span class="lno">303</span></span>
<span id="line-S-59718-304"><span class="lno">304</span></span>
<span id="line-S-59718-305">305</span>
<span id="line-S-59718-306"><span class="lno">306</span></span>
<span id="line-S-59718-307"><span class="lno">307</span></span>
<span id="line-S-59718-308"><span class="lno">308</span></span>
<span id="line-S-59718-309"><span class="lno">309</span></span>
<span id="line-S-59718-310">310</span>
<span id="line-S-59718-311"><span class="lno">311</span></span>
<span id="line-S-59718-312"><span class="lno">312</span></span>
<span id="line-S-59718-313"><span class="lno">313</span></span>
<span id="line-S-59718-314"><span class="lno">314</span></span>
<span id="line-S-59718-315">315</span>
<span id="line-S-59718-316"><span class="lno">316</span></span>
<span id="line-S-59718-317"><span class="lno">317</span></span>
<span id="line-S-59718-318"><span class="lno">318</span></span>
<span id="line-S-59718-319"><span class="lno">319</span></span>
<span id="line-S-59718-320">320</span>
<span id="line-S-59718-321"><span class="lno">321</span></span>
<span id="line-S-59718-322"><span class="lno">322</span></span>
<span id="line-S-59718-323"><span class="lno">323</span></span>
<span id="line-S-59718-324"><span class="lno">324</span></span>
<span id="line-S-59718-325">325</span>
<span id="line-S-59718-326"><span class="lno">326</span></span>
<span id="line-S-59718-327"><span class="lno">327</span></span>
<span id="line-S-59718-328"><span class="lno">328</span></span>
<span id="line-S-59718-329"><span class="lno">329</span></span>
<span id="line-S-59718-330">330</span>
<span id="line-S-59718-331"><span class="lno">331</span></span>
<span id="line-S-59718-332"><span class="lno">332</span></span>
<span id="line-S-59718-333"><span class="lno">333</span></span>
<span id="line-S-59718-334"><span class="lno">334</span></span>
<span id="line-S-59718-335">335</span>
<span id="line-S-59718-336"><span class="lno">336</span></span>
<span id="line-S-59718-337"><span class="lno">337</span></span>
<span id="line-S-59718-338"><span class="lno">338</span></span>
<span id="line-S-59718-339"><span class="lno">339</span></span>
<span id="line-S-59718-340">340</span>
<span id="line-S-59718-341"><span class="lno">341</span></span>
<span id="line-S-59718-342"><span class="lno">342</span></span>
<span id="line-S-59718-343"><span class="lno">343</span></span>
<span id="line-S-59718-344"><span class="lno">344</span></span>
<span id="line-S-59718-345">345</span>
<span id="line-S-59718-346"><span class="lno">346</span></span>
<span id="line-S-59718-347"><span class="lno">347</span></span>
<span id="line-S-59718-348"><span class="lno">348</span></span>
<span id="line-S-59718-349"><span class="lno">349</span></span>
<span id="line-S-59718-350">350</span>
<span id="line-S-59718-351"><span class="lno">351</span></span>
<span id="line-S-59718-352"><span class="lno">352</span></span>
<span id="line-S-59718-353"><span class="lno">353</span></span>
<span id="line-S-59718-354"><span class="lno">354</span></span>
<span id="line-S-59718-355">355</span>
<span id="line-S-59718-356"><span class="lno">356</span></span>
<span id="line-S-59718-357"><span class="lno">357</span></span>
<span id="line-S-59718-358"><span class="lno">358</span></span>
<span id="line-S-59718-359"><span class="lno">359</span></span>
<span id="line-S-59718-360">360</span>
<span id="line-S-59718-361"><span class="lno">361</span></span>
<span id="line-S-59718-362"><span class="lno">362</span></span>
<span id="line-S-59718-363"><span class="lno">363</span></span>
<span id="line-S-59718-364"><span class="lno">364</span></span>
<span id="line-S-59718-365">365</span>
<span id="line-S-59718-366"><span class="lno">366</span></span>
<span id="line-S-59718-367"><span class="lno">367</span></span>
<span id="line-S-59718-368"><span class="lno">368</span></span>
<span id="line-S-59718-369"><span class="lno">369</span></span>
<span id="line-S-59718-370">370</span>
<span id="line-S-59718-371"><span class="lno">371</span></span>
<span id="line-S-59718-372"><span class="lno">372</span></span>
<span id="line-S-59718-373"><span class="lno">373</span></span>
<span id="line-S-59718-374"><span class="lno">374</span></span>
<span id="line-S-59718-375">375</span>
<span id="line-S-59718-376"><span class="lno">376</span></span>
<span id="line-S-59718-377"><span class="lno">377</span></span>
<span id="line-S-59718-378"><span class="lno">378</span></span>
<span id="line-S-59718-379"><span class="lno">379</span></span>
<span id="line-S-59718-380">380</span>
<span id="line-S-59718-381"><span class="lno">381</span></span>
<span id="line-S-59718-382"><span class="lno">382</span></span>
<span id="line-S-59718-383"><span class="lno">383</span></span>
<span id="line-S-59718-384"><span class="lno">384</span></span>
<span id="line-S-59718-385">385</span>
<span id="line-S-59718-386"><span class="lno">386</span></span>
<span id="line-S-59718-387"><span class="lno">387</span></span>
<span id="line-S-59718-388"><span class="lno">388</span></span>
<span id="line-S-59718-389"><span class="lno">389</span></span>
<span id="line-S-59718-390">390</span>
<span id="line-S-59718-391"><span class="lno">391</span></span>
<span id="line-S-59718-392"><span class="lno">392</span></span>
</pre></td><td valign="top"><pre><code class="language-xml">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                xmlns:db="http://docbook.org/ns/docbook"
                xmlns:dbe="http://docbook.org/ns/docbook/errors"
                xmlns:f="http://docbook.org/ns/docbook/functions"
                xmlns:fp="http://docbook.org/ns/docbook/functions/private"
                xmlns:h="http://www.w3.org/1999/xhtml"
                xmlns:m="http://docbook.org/ns/docbook/modes"
                xmlns:mp="http://docbook.org/ns/docbook/modes/private"
                xmlns:t="http://docbook.org/ns/docbook/templates"
                xmlns:v="http://docbook.org/ns/docbook/variables"
                xmlns:xs="http://www.w3.org/2001/XMLSchema"
                xmlns="http://www.w3.org/1999/xhtml"
                default-mode="m:docbook"
                exclude-result-prefixes="db dbe f fp h m mp t v xs"
                version="3.0"&gt;

&lt;xsl:function name="f:chunk" as="attribute()*"&gt;
  &lt;xsl:param name="node" as="element()"/&gt;

  &lt;xsl:if test="$v:chunk"&gt;
    &lt;xsl:if test="fp:chunk-include($node) and not(fp:chunk-exclude($node))"&gt;
      &lt;xsl:attribute name="db-chunk"
                     select="f:chunk-filename($node)"/&gt;
      &lt;xsl:attribute name="db-id" select="generate-id($node)"/&gt;
      &lt;xsl:sequence select="fp:chunk-navigation($node)"/&gt;
    &lt;/xsl:if&gt;
  &lt;/xsl:if&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="fp:chunk-include" as="xs:boolean"&gt;
  &lt;xsl:param name="node" as="element()"/&gt;
  &lt;xsl:choose&gt;
    &lt;xsl:when test="fp:matches-expr($node, $chunk-include)"&gt;
      &lt;xsl:choose&gt;
        &lt;xsl:when test="$node/self::db:sect1"&gt;
          &lt;xsl:sequence select="$chunk-section-depth gt 0"/&gt;
        &lt;/xsl:when&gt;
        &lt;xsl:when test="$node/self::db:sect2"&gt;
          &lt;xsl:sequence select="$chunk-section-depth gt 1"/&gt;
        &lt;/xsl:when&gt;
        &lt;xsl:when test="$node/self::db:sect3"&gt;
          &lt;xsl:sequence select="$chunk-section-depth gt 2"/&gt;
        &lt;/xsl:when&gt;
        &lt;xsl:when test="$node/self::db:sect3"&gt;
          &lt;xsl:sequence select="$chunk-section-depth gt 3"/&gt;
        &lt;/xsl:when&gt;
        &lt;xsl:when test="$node/self::db:sect4"&gt;
          &lt;xsl:sequence select="$chunk-section-depth gt 4"/&gt;
        &lt;/xsl:when&gt;
        &lt;xsl:when test="$node/self::db:sect5"&gt;
          &lt;xsl:sequence select="$chunk-section-depth gt 5"/&gt;
        &lt;/xsl:when&gt;
        &lt;xsl:when test="$node/self::db:section"&gt;
          &lt;xsl:variable name="depth"
                        select="count($node/ancestor::db:section)"/&gt;
          &lt;xsl:sequence select="$chunk-section-depth gt $depth"/&gt;
        &lt;/xsl:when&gt;
        &lt;xsl:otherwise&gt;
          &lt;xsl:sequence select="true()"/&gt;
        &lt;/xsl:otherwise&gt;
      &lt;/xsl:choose&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:sequence select="false()"/&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="fp:chunk-exclude" as="xs:boolean"&gt;
  &lt;xsl:param name="node" as="element()"/&gt;
  &lt;xsl:sequence select="fp:matches-expr($node, $chunk-exclude)"/&gt;
&lt;/xsl:function&gt;
  
&lt;xsl:function name="fp:matches-expr" as="xs:boolean"&gt;
  &lt;xsl:param name="node" as="element()"/&gt;
  &lt;xsl:param name="expr" as="xs:string*"/&gt;

  &lt;xsl:variable name="nscontext" as="element()"&gt;
    &lt;ns&gt;
      &lt;xsl:copy-of select="$v:chunk-filter-namespaces"/&gt;
    &lt;/ns&gt;
  &lt;/xsl:variable&gt;

  &lt;xsl:variable name="matched" as="xs:boolean?"&gt;
    &lt;xsl:iterate select="$expr"&gt;
      &lt;xsl:variable name="match" as="element()?"&gt;
        &lt;xsl:evaluate context-item="$node" xpath="."
                      namespace-context="$nscontext"/&gt;
      &lt;/xsl:variable&gt;
      &lt;xsl:choose&gt;
        &lt;xsl:when test="$match"&gt;
          &lt;xsl:sequence select="true()"/&gt;
          &lt;xsl:break/&gt;
        &lt;/xsl:when&gt;
        &lt;xsl:otherwise&gt;
          &lt;xsl:next-iteration/&gt;
        &lt;/xsl:otherwise&gt;
      &lt;/xsl:choose&gt;
    &lt;/xsl:iterate&gt;
  &lt;/xsl:variable&gt;

  &lt;xsl:sequence select="exists($matched)"/&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="f:chunk-filename" as="xs:string"&gt;
  &lt;xsl:param name="node" as="element()"/&gt;

  &lt;xsl:choose&gt;
    &lt;xsl:when test="f:pi($node, 'filename')"&gt;
      &lt;xsl:sequence select="f:pi($node, 'filename')"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="f:pi($node/db:info, 'filename')"&gt;
      &lt;xsl:sequence select="f:pi($node/db:info, 'filename')"/&gt;
    &lt;/xsl:when&gt;
    &lt;!-- href is commonly used instead of filename --&gt;
    &lt;xsl:when test="f:pi($node, 'href')"&gt;
      &lt;xsl:sequence select="f:pi($node, 'href')"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="f:pi($node/db:info, 'href')"&gt;
      &lt;xsl:sequence select="f:pi($node/db:info, 'href')"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="f:pi($node, 'basename')"&gt;
      &lt;xsl:sequence select="f:pi($node, 'basename') || $html-extension"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="f:pi($node/db:info, 'basename')"&gt;
      &lt;xsl:sequence select="f:pi($node/db:info, 'basename') || $html-extension"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:variable name="name" as="xs:string?"&gt;
        &lt;xsl:apply-templates select="$node" mode="m:chunk-filename"/&gt;
      &lt;/xsl:variable&gt;
      &lt;xsl:sequence select="if (empty($name))
                            then f:generate-id($node) || $html-extension
                            else $name || $html-extension"/&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:function&gt;

&lt;!-- ============================================================ --&gt;

&lt;xsl:function name="fp:chunk-navigation" as="attribute()*"&gt;
  &lt;xsl:param name="node" as="element()"/&gt;

  &lt;xsl:variable name="nav" select="(f:pi($node, 'navigation'),
                                    f:pi($node/db:info, 'navigation'))[1]"/&gt;
  &lt;xsl:if test="$nav"&gt;
    &lt;xsl:attribute name="db-navigation" select="$nav"/&gt;
  &lt;/xsl:if&gt;

  &lt;xsl:variable name="nav" select="(f:pi($node, 'top-navigation'),
                                    f:pi($node/db:info, 'top-navigation'))[1]"/&gt;
  &lt;xsl:if test="$nav"&gt;
    &lt;xsl:attribute name="db-top-navigation" select="$nav"/&gt;
  &lt;/xsl:if&gt;

  &lt;xsl:variable name="nav" select="(f:pi($node, 'bottom-navigation'),
                                    f:pi($node/db:info, 'bottom-navigation'))[1]"/&gt;
  &lt;xsl:if test="$nav"&gt;
    &lt;xsl:attribute name="db-bottom-navigation" select="$nav"/&gt;
  &lt;/xsl:if&gt;
&lt;/xsl:function&gt;


&lt;xsl:function name="fp:trim-common-prefix" as="xs:string" cache="yes"&gt;
  &lt;xsl:param name="source" as="xs:string"/&gt;
  &lt;xsl:param name="target" as="xs:string"/&gt;

  &lt;xsl:variable name="tail"
                select="fp:trim-common-parts(
                           tokenize($source, '/'),
                           tokenize($target, '/'))"/&gt;

  &lt;xsl:sequence select="string-join($tail, '/')"/&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="fp:trim-common-parts" as="xs:string*"&gt;
  &lt;xsl:param name="source" as="xs:string*"/&gt;
  &lt;xsl:param name="target" as="xs:string*"/&gt;

  &lt;xsl:choose&gt;
    &lt;xsl:when test="empty($source) or empty($target)"&gt;
      &lt;xsl:sequence select="$source"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="$source[1] ne $target[1]"&gt;
      &lt;xsl:sequence select="$source"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:sequence select="fp:trim-common-parts(subsequence($source, 2),
                                                 subsequence($target, 2))"/&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="fp:root-base-uri" as="xs:anyURI" cache="yes"&gt;
  &lt;xsl:param name="node" as="element()"/&gt;
  &lt;xsl:sequence select="resolve-uri($chunk-output-base-uri, base-uri(root($node)/*))"/&gt;
&lt;/xsl:function&gt;

&lt;!-- ============================================================ --&gt;

&lt;xsl:template match="*" mode="m:chunk-filename"&gt;
  &lt;xsl:value-of select="f:generate-id(.)"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:set" mode="m:chunk-filename"&gt;
  &lt;xsl:if test="preceding-sibling::* or following-sibling::*"&gt;
    &lt;xsl:variable name="number" as="xs:string"&gt;
      &lt;xsl:number format="01" level="single"/&gt;
    &lt;/xsl:variable&gt;
    &lt;xsl:sequence select="'set'||$number"/&gt;
  &lt;/xsl:if&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:book" mode="m:chunk-filename"&gt;
  &lt;xsl:if test="preceding-sibling::* or following-sibling::*"&gt;
    &lt;xsl:variable name="number" as="xs:string"&gt;
      &lt;xsl:number format="01" level="single"/&gt;
    &lt;/xsl:variable&gt;
    &lt;xsl:variable name="parent" as="xs:string?"&gt;
      &lt;xsl:apply-templates select="parent::*" mode="m:chunk-filename"/&gt;
    &lt;/xsl:variable&gt;
    &lt;xsl:sequence select="string-join(($parent, 'bk', $number), '')"/&gt;
  &lt;/xsl:if&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:acknowledgements" mode="m:chunk-filename"&gt;
  &lt;xsl:variable name="number" as="xs:string"&gt;
    &lt;xsl:number format="01" level="single"/&gt;
  &lt;/xsl:variable&gt;
  &lt;xsl:variable name="parent" as="xs:string?"&gt;
    &lt;xsl:apply-templates select="parent::*" mode="m:chunk-filename"/&gt;
  &lt;/xsl:variable&gt;
  &lt;xsl:sequence select="string-join(($parent, 'ack', $number), '')"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:appendix" mode="m:chunk-filename"&gt;
  &lt;xsl:variable name="number" as="xs:string"&gt;
    &lt;xsl:number format="a" level="single"/&gt;
  &lt;/xsl:variable&gt;
  &lt;xsl:variable name="parent" as="xs:string?"&gt;
    &lt;xsl:apply-templates select="parent::*" mode="m:chunk-filename"/&gt;
  &lt;/xsl:variable&gt;
  &lt;xsl:sequence select="string-join(($parent, 'app', $number), '')"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:article" mode="m:chunk-filename"&gt;
  &lt;xsl:variable name="number" as="xs:string"&gt;
    &lt;xsl:number format="01" level="single"/&gt;
  &lt;/xsl:variable&gt;
  &lt;xsl:variable name="parent" as="xs:string?"&gt;
    &lt;xsl:apply-templates select="parent::*" mode="m:chunk-filename"/&gt;
  &lt;/xsl:variable&gt;
  &lt;xsl:sequence select="string-join(($parent, 'ar', $number), '')"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:bibliography" mode="m:chunk-filename"&gt;
  &lt;xsl:variable name="number" as="xs:string"&gt;
    &lt;xsl:number format="01" level="single"/&gt;
  &lt;/xsl:variable&gt;
  &lt;xsl:variable name="parent" as="xs:string?"&gt;
    &lt;xsl:apply-templates select="parent::*" mode="m:chunk-filename"/&gt;
  &lt;/xsl:variable&gt;
  &lt;xsl:sequence select="string-join(($parent, 'bib', $number), '')"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:chapter" mode="m:chunk-filename"&gt;
  &lt;xsl:variable name="number" as="xs:string"&gt;
    &lt;xsl:number format="01" level="single"/&gt;
  &lt;/xsl:variable&gt;
  &lt;xsl:variable name="parent" as="xs:string?"&gt;
    &lt;xsl:apply-templates select="parent::*" mode="m:chunk-filename"/&gt;
  &lt;/xsl:variable&gt;
  &lt;xsl:sequence select="string-join(($parent, 'ch', $number), '')"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:colophon" mode="m:chunk-filename"&gt;
  &lt;xsl:variable name="number" as="xs:string"&gt;
    &lt;xsl:number format="01" level="single"/&gt;
  &lt;/xsl:variable&gt;
  &lt;xsl:variable name="parent" as="xs:string?"&gt;
    &lt;xsl:apply-templates select="parent::*" mode="m:chunk-filename"/&gt;
  &lt;/xsl:variable&gt;
  &lt;xsl:sequence select="string-join(($parent, 'col', $number), '')"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:dedication" mode="m:chunk-filename"&gt;
  &lt;xsl:variable name="number" as="xs:string"&gt;
    &lt;xsl:number format="01" level="single"/&gt;
  &lt;/xsl:variable&gt;
  &lt;xsl:variable name="parent" as="xs:string?"&gt;
    &lt;xsl:apply-templates select="parent::*" mode="m:chunk-filename"/&gt;
  &lt;/xsl:variable&gt;
  &lt;xsl:sequence select="string-join(($parent, 'ded', $number), '')"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:glossary" mode="m:chunk-filename"&gt;
  &lt;xsl:variable name="number" as="xs:string"&gt;
    &lt;xsl:number format="01" level="single"/&gt;
  &lt;/xsl:variable&gt;
  &lt;xsl:variable name="parent" as="xs:string?"&gt;
    &lt;xsl:apply-templates select="parent::*" mode="m:chunk-filename"/&gt;
  &lt;/xsl:variable&gt;
  &lt;xsl:sequence select="string-join(($parent, 'gloss', $number), '')"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:index" mode="m:chunk-filename"&gt;
  &lt;xsl:variable name="number" as="xs:string"&gt;
    &lt;xsl:number format="01" level="single"/&gt;
  &lt;/xsl:variable&gt;
  &lt;xsl:variable name="parent" as="xs:string?"&gt;
    &lt;xsl:apply-templates select="parent::*" mode="m:chunk-filename"/&gt;
  &lt;/xsl:variable&gt;
  &lt;xsl:sequence select="string-join(($parent, 'idx', $number), '')"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:part" mode="m:chunk-filename"&gt;
  &lt;xsl:variable name="number" as="xs:string"&gt;
    &lt;xsl:number format="i" level="single"/&gt;
  &lt;/xsl:variable&gt;
  &lt;xsl:variable name="parent" as="xs:string?"&gt;
    &lt;xsl:apply-templates select="parent::*" mode="m:chunk-filename"/&gt;
  &lt;/xsl:variable&gt;
  &lt;xsl:sequence select="string-join(($parent, 'part', $number), '')"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:preface" mode="m:chunk-filename"&gt;
  &lt;xsl:variable name="number" as="xs:string"&gt;
    &lt;xsl:number format="01" level="single"/&gt;
  &lt;/xsl:variable&gt;
  &lt;xsl:variable name="parent" as="xs:string?"&gt;
    &lt;xsl:apply-templates select="parent::*" mode="m:chunk-filename"/&gt;
  &lt;/xsl:variable&gt;
  &lt;xsl:sequence select="string-join(($parent, 'pf', $number), '')"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:reference" mode="m:chunk-filename"&gt;
  &lt;xsl:variable name="number" as="xs:string"&gt;
    &lt;xsl:number format="01" level="single"/&gt;
  &lt;/xsl:variable&gt;
  &lt;xsl:variable name="parent" as="xs:string?"&gt;
    &lt;xsl:apply-templates select="parent::*" mode="m:chunk-filename"/&gt;
  &lt;/xsl:variable&gt;
  &lt;xsl:sequence select="string-join(($parent, 'ref', $number), '')"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:refentry" mode="m:chunk-filename"&gt;
  &lt;xsl:variable name="number" as="xs:string"&gt;
    &lt;xsl:number format="001" level="single"/&gt;
  &lt;/xsl:variable&gt;
  &lt;xsl:variable name="parent" as="xs:string?"&gt;
    &lt;xsl:apply-templates select="parent::*" mode="m:chunk-filename"/&gt;
  &lt;/xsl:variable&gt;
  &lt;xsl:sequence select="string-join(($parent, 'mp', $number), '')"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:topic" mode="m:chunk-filename"&gt;
  &lt;xsl:variable name="number" as="xs:string"&gt;
    &lt;xsl:number format="001" level="single"/&gt;
  &lt;/xsl:variable&gt;
  &lt;xsl:variable name="parent" as="xs:string?"&gt;
    &lt;xsl:apply-templates select="parent::*" mode="m:chunk-filename"/&gt;
  &lt;/xsl:variable&gt;
  &lt;xsl:sequence select="string-join(($parent, 'top', $number), '')"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:sect1|db:sect2|db:sect3|db:sect4|db:sect5"
                     mode="m:chunk-filename"&gt;
  &lt;xsl:variable name="number" as="xs:string"&gt;
    &lt;xsl:number format="01" level="single"/&gt;
  &lt;/xsl:variable&gt;
  &lt;xsl:variable name="parent" as="xs:string?"&gt;
    &lt;xsl:apply-templates select="parent::*" mode="m:chunk-filename"/&gt;
  &lt;/xsl:variable&gt;
  &lt;xsl:sequence select="string-join(($parent, 's', $number), '')"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:section" mode="m:chunk-filename"&gt;
  &lt;xsl:variable name="number" as="xs:string"&gt;
    &lt;xsl:number format="01" level="single"
                count="db:section"/&gt;
  &lt;/xsl:variable&gt;
  &lt;xsl:variable name="parent" as="xs:string?"&gt;
    &lt;xsl:apply-templates select="parent::*" mode="m:chunk-filename"/&gt;
  &lt;/xsl:variable&gt;
  &lt;xsl:sequence select="string-join(($parent, 's', $number), '')"/&gt;
&lt;/xsl:template&gt;

&lt;!-- ============================================================ --&gt;

&lt;/xsl:stylesheet&gt;
</code></pre></td></tr></table></div></div></div></div><div class="stylesheet" id="S-7006"><h3>chunk-cleanup.xsl</h3><p><span><span class="template all">21 templates</span></span>, <span><span class="function all">10 functions</span> (<span class="function shadows">5 shadow</span>)</span></p><div class="instructions"><div class="title closed">Instructions</div><div class="body"><div id="S-7006-t-1" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ /</div><div class="props"><div class="mode">Mode: <code>m:chunk-cleanup</code></div><div class="matches">Matches: <code>/</code></div></div></div><div id="S-7006-t-2" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ h:db-annotation|h:db-annotatio…</div><div class="props"><div class="mode">Mode: <code>m:chunk-cleanup</code></div><div class="matches">Matches: <code>h:db-annotation</code>, <code>h:db-annotation-script</code>, <code>h:db-footnote</code>, <code>h:db-mathml-script</code>, <code>h:db-script</code>, <code>h:db-toc-script</code>, <code>h:db-xlink-script</code>, <code>h:head</code></div></div></div><div id="S-7006-t-3" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ h:db-annotation-marker</div><div class="props"><div class="mode">Mode: <code>m:chunk-cleanup</code></div><div class="matches">Matches: <code>h:db-annotation-marker</code></div></div></div><div id="S-7006-t-4" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ *</div><div class="props"><div class="uses">Uses: <a href="#S-23412-docbook.org.ns.docbook.variables.debug">$v:debug</a>, <a href="#S-26643-..annotation-style">$annotation-style</a>, <a href="#S-26643-..chunk">$chunk</a>, <a href="#S-26643-..default-theme">$default-theme</a>, <a href="#S-26643-..persistent-toc">$persistent-toc</a></div><div class="calls">Calls: <a href="#S-7006-docbook.org.ns.docbook.functions.private.chunk-output-filename,1">fp:chunk-output-filename()</a>, <a href="#S-7006-docbook.org.ns.docbook.functions.private.navigable,1">fp:navigable()</a>, <a href="#S-7006-docbook.org.ns.docbook.functions.private.relative-link,2">fp:relative-link()</a>, <a href="#S-7006-docbook.org.ns.docbook.functions.private.root-base-uri,1">fp:root-base-uri()</a>, <a href="#S-7006-docbook.org.ns.docbook.functions.chunk-title,1">f:chunk-title()</a>, <a href="#S-28936-docbook.org.ns.docbook.functions.is-true,1">f:is-true()</a></div><div class="calls">Calls: <a href="#S-7006-docbook.org.ns.docbook.templates.bottom-nav">t:bottom-nav</a>, <a href="#S-7006-docbook.org.ns.docbook.templates.chunk-footnotes">t:chunk-footnotes</a>, <a href="#S-7006-docbook.org.ns.docbook.templates.top-nav">t:top-nav</a></div><div class="mode">Mode: <code>m:chunk-cleanup</code></div><div class="priority">Priority: <code>10</code></div><div class="matches">Matches: <code>*</code></div></div></div><div id="S-7006-docbook.org.ns.docbook.templates.chunk-footnotes" class="instruction template"><div class="title"><span class="link"></span>Template t:chunk-footnotes  match ≅ </div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-7006-t-4">template</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-7006">modules/chunk-cleanup.xsl</a></div><div class="mode">Mode: <code>m:chunk-cleanup</code></div></div></div><div id="S-7006-docbook.org.ns.docbook.functions.private.chunk-output-filename,1" class="instruction function"><div class="title"><span class="link"></span>Function fp:chunk-output-filename($node as element()) as xs:anyURI <span class="recursive" title="Recursive function">♻</span></div><div class="props"><div class="uses">Uses: <a href="#S-26643-..chunk-output-base-uri">$chunk-output-base-uri</a></div><div class="calls">Calls: <a href="#S-7006-docbook.org.ns.docbook.functions.private.relative-link,2">fp:relative-link()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-7006-t-4">template</a>, <a href="#S-7006-docbook.org.ns.docbook.functions.private.chunk-output-filename,1">fp:chunk-output-filename()</a>, <a href="#S-7006-docbook.org.ns.docbook.functions.private.relative-link,2">fp:relative-link()</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-7006">modules/chunk-cleanup.xsl</a></div></div></div><div id="S-7006-t-6" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ h:head/h:link</div><div class="props"><div class="calls">Calls: <a href="#S-7006-docbook.org.ns.docbook.functions.private.relative-uri,3">fp:relative-uri()</a></div><div class="mode">Mode: <code>m:chunk-cleanup</code></div><div class="matches">Matches: <code>h:head/h:link</code></div></div></div><div id="S-7006-t-7" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ h:script</div><div class="props"><div class="calls">Calls: <a href="#S-7006-docbook.org.ns.docbook.functions.private.relative-uri,3">fp:relative-uri()</a></div><div class="mode">Mode: <code>m:chunk-cleanup</code></div><div class="matches">Matches: <code>h:script</code></div></div></div><div id="S-7006-docbook.org.ns.docbook.functions.private.relative-uri,3" class="instruction function"><div class="title"><span class="link"></span>Function fp:relative-uri($rootbaseuri as xs:anyURI, $chunkbaseuri as xs:anyURI, $href as xs:string) as xs:string</div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-7006-t-6">template</a>, <a href="#S-7006-t-7">template</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-7006">modules/chunk-cleanup.xsl</a></div></div></div><div id="S-7006-t-8" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ h:a</div><div class="props"><div class="uses">Uses: <a href="#S-23412-docbook.org.ns.docbook.variables.debug">$v:debug</a></div><div class="calls">Calls: <a href="#S-7006-docbook.org.ns.docbook.functions.private.relative-link,2">fp:relative-link()</a></div><div class="mode">Mode: <code>m:chunk-cleanup</code></div><div class="matches">Matches: <code>h:a</code></div></div></div><div id="S-7006-t-9" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ text()</div><div class="props"><div class="uses">Uses: <a href="#S-23412-docbook.org.ns.docbook.variables.chunk-renumber-footnotes">$v:chunk-renumber-footnotes</a></div><div class="mode">Mode: <code>m:chunk-cleanup</code></div><div class="priority">Priority: <code>100</code></div><div class="matches">Matches: <code>text()</code></div></div></div><div id="S-7006-t-10" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ element()</div><div class="props"><div class="mode">Mode: <code>m:chunk-cleanup</code></div><div class="matches">Matches: <code>element()</code></div></div></div><div id="S-7006-t-11" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ attribute()|comment()|processi…</div><div class="props"><div class="mode">Mode: <code>m:chunk-cleanup</code></div><div class="matches">Matches: <code>attribute()</code>, <code>comment()</code>, <code>processing-instruction()</code>, <code>text()</code></div></div></div><div id="S-7006-t-12" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ *</div><div class="props"><div class="uses">Uses: <a href="#S-29386-docbook.org.ns.docbook.errors.INTERNAL-RENUMBER-ERROR">$dbe:INTERNAL-RENUMBER-ERROR</a></div><div class="mode">Mode: <code>mp:footnote-renumber</code></div><div class="matches">Matches: <code>*</code></div></div></div><div id="S-7006-t-13" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ h:db-footnote</div><div class="props"><div class="uses">Uses: <a href="#S-26643-..footnote-numeration">$footnote-numeration</a></div><div class="calls">Calls: <a href="#S-7006-docbook.org.ns.docbook.functions.private.footnote-mark,2">fp:footnote-mark()</a></div><div class="mode">Mode: <code>mp:footnote-renumber</code></div><div class="matches">Matches: <code>h:db-footnote</code></div></div></div><div id="S-7006-docbook.org.ns.docbook.functions.private.relative-link,2" class="instruction function"><div class="title"><span class="link"></span>Function fp:relative-link($source as element(), $target as element()) as xs:string</div><div class="props"><div class="uses">Uses: <a href="#S-23412-docbook.org.ns.docbook.variables.debug">$v:debug</a></div><div class="calls">Calls: <a href="#S-21031-docbook.org.ns.docbook.functions.private.patch-toc-href,2">fp:patch-toc-href()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-7006-t-4">template</a>, <a href="#S-7006-t-8">template</a>, <a href="#S-21031-docbook.org.ns.docbook.functions.private.patch-toc-href,2">fp:patch-toc-href()</a>, <a href="#S-7006-docbook.org.ns.docbook.templates.bottom-nav">t:bottom-nav</a>, <a href="#S-7006-docbook.org.ns.docbook.templates.top-nav">t:top-nav</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-7006">modules/chunk-cleanup.xsl</a>, <a href="#S-21031">modules/chunk-output.xsl</a></div></div></div><div id="S-7006-docbook.org.ns.docbook.functions.private.trim-common-prefix,2" class="instruction function shadows"><div class="title"><span class="link"></span>Function fp:trim-common-prefix($source as xs:string, $target as xs:string) as xs:string</div><div class="props"><div class="shadows"><span class="marker">⚠</span>Shadows: <a href="#S-59718-docbook.org.ns.docbook.functions.private.trim-common-prefix,2">fp:trim-common-prefix()</a></div><div class="calls">Calls: <a href="#S-7006-docbook.org.ns.docbook.functions.private.relative-link,2">fp:relative-link()</a>, <a href="#S-7006-docbook.org.ns.docbook.functions.private.relative-uri,3">fp:relative-uri()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-21031-t-4">template</a>, <a href="#S-7006-docbook.org.ns.docbook.functions.private.relative-link,2">fp:relative-link()</a>, <a href="#S-7006-docbook.org.ns.docbook.functions.private.relative-uri,3">fp:relative-uri()</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-7006">modules/chunk-cleanup.xsl</a>, <a href="#S-21031">modules/chunk-output.xsl</a></div></div></div><div id="S-7006-docbook.org.ns.docbook.functions.private.trim-common-parts,2" class="instruction function shadows"><div class="title"><span class="link"></span>Function fp:trim-common-parts($source as xs:string*, $target as xs:string*) as xs:string* <span class="recursive" title="Recursive function">♻</span></div><div class="props"><div class="shadows"><span class="marker">⚠</span>Shadows: <a href="#S-59718-docbook.org.ns.docbook.functions.private.trim-common-parts,2">fp:trim-common-parts()</a></div><div class="calls">Calls: <a href="#S-59718-docbook.org.ns.docbook.functions.private.trim-common-parts,2">fp:trim-common-parts()</a>, <a href="#S-59718-docbook.org.ns.docbook.functions.private.trim-common-prefix,2">fp:trim-common-prefix()</a>, <a href="#S-7006-docbook.org.ns.docbook.functions.private.trim-common-prefix,2">fp:trim-common-prefix()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-59718-docbook.org.ns.docbook.functions.private.trim-common-parts,2">fp:trim-common-parts()</a>, <a href="#S-7006-docbook.org.ns.docbook.functions.private.trim-common-parts,2">fp:trim-common-parts()</a>, <a href="#S-59718-docbook.org.ns.docbook.functions.private.trim-common-prefix,2">fp:trim-common-prefix()</a>, <a href="#S-7006-docbook.org.ns.docbook.functions.private.trim-common-prefix,2">fp:trim-common-prefix()</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-59718">modules/chunk.xsl</a>, <a href="#S-7006">modules/chunk-cleanup.xsl</a></div></div></div><div id="S-7006-docbook.org.ns.docbook.functions.private.root-base-uri,1" class="instruction function shadows"><div class="title"><span class="link"></span>Function fp:root-base-uri($node as element()) as xs:anyURI</div><div class="props"><div class="shadows"><span class="marker">⚠</span>Shadows: <a href="#S-59718-docbook.org.ns.docbook.functions.private.root-base-uri,1">fp:root-base-uri()</a></div><div class="uses">Uses: <a href="#S-26643-..chunk-output-base-uri">$chunk-output-base-uri</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-7006-t-4">template</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-7006">modules/chunk-cleanup.xsl</a></div></div></div><div id="S-7006-docbook.org.ns.docbook.functions.chunk-title,1" class="instruction function"><div class="title"><span class="link"></span>Function f:chunk-title($chunk as element()?) as node()*</div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-7006-t-4">template</a>, <a href="#S-7006-docbook.org.ns.docbook.templates.bottom-nav">t:bottom-nav</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-7006">modules/chunk-cleanup.xsl</a></div></div></div><div id="S-7006-t-14" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ h:db-annotation|h:db-footnote</div><div class="props"><div class="mode">Mode: <code>m:chunk-title</code></div><div class="matches">Matches: <code>h:db-annotation</code>, <code>h:db-footnote</code></div></div></div><div id="S-7006-t-15" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ h:a</div><div class="props"><div class="mode">Mode: <code>m:chunk-title</code></div><div class="matches">Matches: <code>h:a</code></div></div></div><div id="S-7006-t-16" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ element()</div><div class="props"><div class="mode">Mode: <code>m:chunk-title</code></div><div class="matches">Matches: <code>element()</code></div></div></div><div id="S-7006-t-17" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ attribute()|comment()|processi…</div><div class="props"><div class="mode">Mode: <code>m:chunk-title</code></div><div class="matches">Matches: <code>attribute()</code>, <code>comment()</code>, <code>processing-instruction()</code>, <code>text()</code></div></div></div><div id="S-7006-docbook.org.ns.docbook.templates.top-nav" class="instruction template"><div class="title"><span class="link"></span>Template t:top-nav  match ≅ </div><div class="props"><div class="calls">Calls: <a href="#S-7006-docbook.org.ns.docbook.functions.private.relative-link,2">fp:relative-link()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-7006-t-4">template</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-7006">modules/chunk-cleanup.xsl</a></div><div class="mode">Mode: <code>m:chunk-cleanup</code></div></div></div><div id="S-7006-docbook.org.ns.docbook.templates.bottom-nav" class="instruction template"><div class="title"><span class="link"></span>Template t:bottom-nav  match ≅ </div><div class="props"><div class="calls">Calls: <a href="#S-7006-docbook.org.ns.docbook.functions.private.relative-link,2">fp:relative-link()</a>, <a href="#S-7006-docbook.org.ns.docbook.functions.chunk-title,1">f:chunk-title()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-7006-t-4">template</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-7006">modules/chunk-cleanup.xsl</a></div><div class="mode">Mode: <code>m:chunk-cleanup</code></div></div></div><div id="S-7006-docbook.org.ns.docbook.functions.private.footnote-number,1" class="instruction function shadows"><div class="title"><span class="link"></span>Function fp:footnote-number($node as element(db:footnote)) as xs:integer</div><div class="props"><div class="shadows"><span class="marker">⚠</span>Shadows: <a href="#S-50448-docbook.org.ns.docbook.functions.private.footnote-number,1">fp:footnote-number()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-50448-t-1">template</a>, <a href="#S-50448-t-2">template</a>, <a href="#S-50448-t-4">template</a>, <a href="#S-50448-t-5">template</a>, <a href="#S-7006-t-21">template</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-50448">modules/footnotes.xsl</a>, <a href="#S-7006">modules/chunk-cleanup.xsl</a></div></div></div><div id="S-7006-t-20" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:footnote  as xs:integer</div><div class="props"><div class="mode">Mode: <code>mp:footnote-number</code></div><div class="matches">Matches: <code>db:footnote</code></div></div></div><div id="S-7006-t-21" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ db:footnote</div><div class="props"><div class="uses">Uses: <a href="#S-26643-..footnote-numeration">$footnote-numeration</a>, <a href="#S-26643-..table-footnote-numeration">$table-footnote-numeration</a></div><div class="calls">Calls: <a href="#S-7006-docbook.org.ns.docbook.functions.private.footnote-mark,2">fp:footnote-mark()</a>, <a href="#S-7006-docbook.org.ns.docbook.functions.private.footnote-number,1">fp:footnote-number()</a></div><div class="mode">Mode: <code>m:footnote-number</code></div><div class="matches">Matches: <code>db:footnote</code></div></div></div><div id="S-7006-docbook.org.ns.docbook.functions.private.footnote-mark,2" class="instruction function shadows"><div class="title"><span class="link"></span>Function fp:footnote-mark($number as xs:integer, $marks as xs:string+) as xs:string</div><div class="props"><div class="shadows"><span class="marker">⚠</span>Shadows: <a href="#S-50448-docbook.org.ns.docbook.functions.private.footnote-mark,2">fp:footnote-mark()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-50448-t-4">template</a>, <a href="#S-7006-t-13">template</a>, <a href="#S-7006-t-21">template</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-50448">modules/footnotes.xsl</a>, <a href="#S-7006">modules/chunk-cleanup.xsl</a></div></div></div><div id="S-7006-docbook.org.ns.docbook.functions.private.navigable,1" class="instruction function"><div class="title"><span class="link"></span>Function fp:navigable($node as element()) as xs:boolean</div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-7006-t-4">template</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-7006">modules/chunk-cleanup.xsl</a></div></div></div></div></div><div class="source-code"><div class="title closed">Source code</div><div class="body"><div><table><tr><td valign="top" align="right"><pre class="fake-prism"><span id="line-S-7006-1">1</span>
<span id="line-S-7006-2"><span class="lno">2</span></span>
<span id="line-S-7006-3"><span class="lno">3</span></span>
<span id="line-S-7006-4"><span class="lno">4</span></span>
<span id="line-S-7006-5">5</span>
<span id="line-S-7006-6"><span class="lno">6</span></span>
<span id="line-S-7006-7"><span class="lno">7</span></span>
<span id="line-S-7006-8"><span class="lno">8</span></span>
<span id="line-S-7006-9"><span class="lno">9</span></span>
<span id="line-S-7006-10">10</span>
<span id="line-S-7006-11"><span class="lno">11</span></span>
<span id="line-S-7006-12"><span class="lno">12</span></span>
<span id="line-S-7006-13"><span class="lno">13</span></span>
<span id="line-S-7006-14"><span class="lno">14</span></span>
<span id="line-S-7006-15">15</span>
<span id="line-S-7006-16"><span class="lno">16</span></span>
<span id="line-S-7006-17"><span class="lno">17</span></span>
<span id="line-S-7006-18"><span class="lno">18</span></span>
<span id="line-S-7006-19"><span class="lno">19</span></span>
<span id="line-S-7006-20">20</span>
<span id="line-S-7006-21"><span class="lno">21</span></span>
<span id="line-S-7006-22"><span class="lno">22</span></span>
<span id="line-S-7006-23"><span class="lno">23</span></span>
<span id="line-S-7006-24"><span class="lno">24</span></span>
<span id="line-S-7006-25">25</span>
<span id="line-S-7006-26"><span class="lno">26</span></span>
<span id="line-S-7006-27"><span class="lno">27</span></span>
<span id="line-S-7006-28"><span class="lno">28</span></span>
<span id="line-S-7006-29"><span class="lno">29</span></span>
<span id="line-S-7006-30">30</span>
<span id="line-S-7006-31"><span class="lno">31</span></span>
<span id="line-S-7006-32"><span class="lno">32</span></span>
<span id="line-S-7006-33"><span class="lno">33</span></span>
<span id="line-S-7006-34"><span class="lno">34</span></span>
<span id="line-S-7006-35">35</span>
<span id="line-S-7006-36"><span class="lno">36</span></span>
<span id="line-S-7006-37"><span class="lno">37</span></span>
<span id="line-S-7006-38"><span class="lno">38</span></span>
<span id="line-S-7006-39"><span class="lno">39</span></span>
<span id="line-S-7006-40">40</span>
<span id="line-S-7006-41"><span class="lno">41</span></span>
<span id="line-S-7006-42"><span class="lno">42</span></span>
<span id="line-S-7006-43"><span class="lno">43</span></span>
<span id="line-S-7006-44"><span class="lno">44</span></span>
<span id="line-S-7006-45">45</span>
<span id="line-S-7006-46"><span class="lno">46</span></span>
<span id="line-S-7006-47"><span class="lno">47</span></span>
<span id="line-S-7006-48"><span class="lno">48</span></span>
<span id="line-S-7006-49"><span class="lno">49</span></span>
<span id="line-S-7006-50">50</span>
<span id="line-S-7006-51"><span class="lno">51</span></span>
<span id="line-S-7006-52"><span class="lno">52</span></span>
<span id="line-S-7006-53"><span class="lno">53</span></span>
<span id="line-S-7006-54"><span class="lno">54</span></span>
<span id="line-S-7006-55">55</span>
<span id="line-S-7006-56"><span class="lno">56</span></span>
<span id="line-S-7006-57"><span class="lno">57</span></span>
<span id="line-S-7006-58"><span class="lno">58</span></span>
<span id="line-S-7006-59"><span class="lno">59</span></span>
<span id="line-S-7006-60">60</span>
<span id="line-S-7006-61"><span class="lno">61</span></span>
<span id="line-S-7006-62"><span class="lno">62</span></span>
<span id="line-S-7006-63"><span class="lno">63</span></span>
<span id="line-S-7006-64"><span class="lno">64</span></span>
<span id="line-S-7006-65">65</span>
<span id="line-S-7006-66"><span class="lno">66</span></span>
<span id="line-S-7006-67"><span class="lno">67</span></span>
<span id="line-S-7006-68"><span class="lno">68</span></span>
<span id="line-S-7006-69"><span class="lno">69</span></span>
<span id="line-S-7006-70">70</span>
<span id="line-S-7006-71"><span class="lno">71</span></span>
<span id="line-S-7006-72"><span class="lno">72</span></span>
<span id="line-S-7006-73"><span class="lno">73</span></span>
<span id="line-S-7006-74"><span class="lno">74</span></span>
<span id="line-S-7006-75">75</span>
<span id="line-S-7006-76"><span class="lno">76</span></span>
<span id="line-S-7006-77"><span class="lno">77</span></span>
<span id="line-S-7006-78"><span class="lno">78</span></span>
<span id="line-S-7006-79"><span class="lno">79</span></span>
<span id="line-S-7006-80">80</span>
<span id="line-S-7006-81"><span class="lno">81</span></span>
<span id="line-S-7006-82"><span class="lno">82</span></span>
<span id="line-S-7006-83"><span class="lno">83</span></span>
<span id="line-S-7006-84"><span class="lno">84</span></span>
<span id="line-S-7006-85">85</span>
<span id="line-S-7006-86"><span class="lno">86</span></span>
<span id="line-S-7006-87"><span class="lno">87</span></span>
<span id="line-S-7006-88"><span class="lno">88</span></span>
<span id="line-S-7006-89"><span class="lno">89</span></span>
<span id="line-S-7006-90">90</span>
<span id="line-S-7006-91"><span class="lno">91</span></span>
<span id="line-S-7006-92"><span class="lno">92</span></span>
<span id="line-S-7006-93"><span class="lno">93</span></span>
<span id="line-S-7006-94"><span class="lno">94</span></span>
<span id="line-S-7006-95">95</span>
<span id="line-S-7006-96"><span class="lno">96</span></span>
<span id="line-S-7006-97"><span class="lno">97</span></span>
<span id="line-S-7006-98"><span class="lno">98</span></span>
<span id="line-S-7006-99"><span class="lno">99</span></span>
<span id="line-S-7006-100">100</span>
<span id="line-S-7006-101"><span class="lno">101</span></span>
<span id="line-S-7006-102"><span class="lno">102</span></span>
<span id="line-S-7006-103"><span class="lno">103</span></span>
<span id="line-S-7006-104"><span class="lno">104</span></span>
<span id="line-S-7006-105">105</span>
<span id="line-S-7006-106"><span class="lno">106</span></span>
<span id="line-S-7006-107"><span class="lno">107</span></span>
<span id="line-S-7006-108"><span class="lno">108</span></span>
<span id="line-S-7006-109"><span class="lno">109</span></span>
<span id="line-S-7006-110">110</span>
<span id="line-S-7006-111"><span class="lno">111</span></span>
<span id="line-S-7006-112"><span class="lno">112</span></span>
<span id="line-S-7006-113"><span class="lno">113</span></span>
<span id="line-S-7006-114"><span class="lno">114</span></span>
<span id="line-S-7006-115">115</span>
<span id="line-S-7006-116"><span class="lno">116</span></span>
<span id="line-S-7006-117"><span class="lno">117</span></span>
<span id="line-S-7006-118"><span class="lno">118</span></span>
<span id="line-S-7006-119"><span class="lno">119</span></span>
<span id="line-S-7006-120">120</span>
<span id="line-S-7006-121"><span class="lno">121</span></span>
<span id="line-S-7006-122"><span class="lno">122</span></span>
<span id="line-S-7006-123"><span class="lno">123</span></span>
<span id="line-S-7006-124"><span class="lno">124</span></span>
<span id="line-S-7006-125">125</span>
<span id="line-S-7006-126"><span class="lno">126</span></span>
<span id="line-S-7006-127"><span class="lno">127</span></span>
<span id="line-S-7006-128"><span class="lno">128</span></span>
<span id="line-S-7006-129"><span class="lno">129</span></span>
<span id="line-S-7006-130">130</span>
<span id="line-S-7006-131"><span class="lno">131</span></span>
<span id="line-S-7006-132"><span class="lno">132</span></span>
<span id="line-S-7006-133"><span class="lno">133</span></span>
<span id="line-S-7006-134"><span class="lno">134</span></span>
<span id="line-S-7006-135">135</span>
<span id="line-S-7006-136"><span class="lno">136</span></span>
<span id="line-S-7006-137"><span class="lno">137</span></span>
<span id="line-S-7006-138"><span class="lno">138</span></span>
<span id="line-S-7006-139"><span class="lno">139</span></span>
<span id="line-S-7006-140">140</span>
<span id="line-S-7006-141"><span class="lno">141</span></span>
<span id="line-S-7006-142"><span class="lno">142</span></span>
<span id="line-S-7006-143"><span class="lno">143</span></span>
<span id="line-S-7006-144"><span class="lno">144</span></span>
<span id="line-S-7006-145">145</span>
<span id="line-S-7006-146"><span class="lno">146</span></span>
<span id="line-S-7006-147"><span class="lno">147</span></span>
<span id="line-S-7006-148"><span class="lno">148</span></span>
<span id="line-S-7006-149"><span class="lno">149</span></span>
<span id="line-S-7006-150">150</span>
<span id="line-S-7006-151"><span class="lno">151</span></span>
<span id="line-S-7006-152"><span class="lno">152</span></span>
<span id="line-S-7006-153"><span class="lno">153</span></span>
<span id="line-S-7006-154"><span class="lno">154</span></span>
<span id="line-S-7006-155">155</span>
<span id="line-S-7006-156"><span class="lno">156</span></span>
<span id="line-S-7006-157"><span class="lno">157</span></span>
<span id="line-S-7006-158"><span class="lno">158</span></span>
<span id="line-S-7006-159"><span class="lno">159</span></span>
<span id="line-S-7006-160">160</span>
<span id="line-S-7006-161"><span class="lno">161</span></span>
<span id="line-S-7006-162"><span class="lno">162</span></span>
<span id="line-S-7006-163"><span class="lno">163</span></span>
<span id="line-S-7006-164"><span class="lno">164</span></span>
<span id="line-S-7006-165">165</span>
<span id="line-S-7006-166"><span class="lno">166</span></span>
<span id="line-S-7006-167"><span class="lno">167</span></span>
<span id="line-S-7006-168"><span class="lno">168</span></span>
<span id="line-S-7006-169"><span class="lno">169</span></span>
<span id="line-S-7006-170">170</span>
<span id="line-S-7006-171"><span class="lno">171</span></span>
<span id="line-S-7006-172"><span class="lno">172</span></span>
<span id="line-S-7006-173"><span class="lno">173</span></span>
<span id="line-S-7006-174"><span class="lno">174</span></span>
<span id="line-S-7006-175">175</span>
<span id="line-S-7006-176"><span class="lno">176</span></span>
<span id="line-S-7006-177"><span class="lno">177</span></span>
<span id="line-S-7006-178"><span class="lno">178</span></span>
<span id="line-S-7006-179"><span class="lno">179</span></span>
<span id="line-S-7006-180">180</span>
<span id="line-S-7006-181"><span class="lno">181</span></span>
<span id="line-S-7006-182"><span class="lno">182</span></span>
<span id="line-S-7006-183"><span class="lno">183</span></span>
<span id="line-S-7006-184"><span class="lno">184</span></span>
<span id="line-S-7006-185">185</span>
<span id="line-S-7006-186"><span class="lno">186</span></span>
<span id="line-S-7006-187"><span class="lno">187</span></span>
<span id="line-S-7006-188"><span class="lno">188</span></span>
<span id="line-S-7006-189"><span class="lno">189</span></span>
<span id="line-S-7006-190">190</span>
<span id="line-S-7006-191"><span class="lno">191</span></span>
<span id="line-S-7006-192"><span class="lno">192</span></span>
<span id="line-S-7006-193"><span class="lno">193</span></span>
<span id="line-S-7006-194"><span class="lno">194</span></span>
<span id="line-S-7006-195">195</span>
<span id="line-S-7006-196"><span class="lno">196</span></span>
<span id="line-S-7006-197"><span class="lno">197</span></span>
<span id="line-S-7006-198"><span class="lno">198</span></span>
<span id="line-S-7006-199"><span class="lno">199</span></span>
<span id="line-S-7006-200">200</span>
<span id="line-S-7006-201"><span class="lno">201</span></span>
<span id="line-S-7006-202"><span class="lno">202</span></span>
<span id="line-S-7006-203"><span class="lno">203</span></span>
<span id="line-S-7006-204"><span class="lno">204</span></span>
<span id="line-S-7006-205">205</span>
<span id="line-S-7006-206"><span class="lno">206</span></span>
<span id="line-S-7006-207"><span class="lno">207</span></span>
<span id="line-S-7006-208"><span class="lno">208</span></span>
<span id="line-S-7006-209"><span class="lno">209</span></span>
<span id="line-S-7006-210">210</span>
<span id="line-S-7006-211"><span class="lno">211</span></span>
<span id="line-S-7006-212"><span class="lno">212</span></span>
<span id="line-S-7006-213"><span class="lno">213</span></span>
<span id="line-S-7006-214"><span class="lno">214</span></span>
<span id="line-S-7006-215">215</span>
<span id="line-S-7006-216"><span class="lno">216</span></span>
<span id="line-S-7006-217"><span class="lno">217</span></span>
<span id="line-S-7006-218"><span class="lno">218</span></span>
<span id="line-S-7006-219"><span class="lno">219</span></span>
<span id="line-S-7006-220">220</span>
<span id="line-S-7006-221"><span class="lno">221</span></span>
<span id="line-S-7006-222"><span class="lno">222</span></span>
<span id="line-S-7006-223"><span class="lno">223</span></span>
<span id="line-S-7006-224"><span class="lno">224</span></span>
<span id="line-S-7006-225">225</span>
<span id="line-S-7006-226"><span class="lno">226</span></span>
<span id="line-S-7006-227"><span class="lno">227</span></span>
<span id="line-S-7006-228"><span class="lno">228</span></span>
<span id="line-S-7006-229"><span class="lno">229</span></span>
<span id="line-S-7006-230">230</span>
<span id="line-S-7006-231"><span class="lno">231</span></span>
<span id="line-S-7006-232"><span class="lno">232</span></span>
<span id="line-S-7006-233"><span class="lno">233</span></span>
<span id="line-S-7006-234"><span class="lno">234</span></span>
<span id="line-S-7006-235">235</span>
<span id="line-S-7006-236"><span class="lno">236</span></span>
<span id="line-S-7006-237"><span class="lno">237</span></span>
<span id="line-S-7006-238"><span class="lno">238</span></span>
<span id="line-S-7006-239"><span class="lno">239</span></span>
<span id="line-S-7006-240">240</span>
<span id="line-S-7006-241"><span class="lno">241</span></span>
<span id="line-S-7006-242"><span class="lno">242</span></span>
<span id="line-S-7006-243"><span class="lno">243</span></span>
<span id="line-S-7006-244"><span class="lno">244</span></span>
<span id="line-S-7006-245">245</span>
<span id="line-S-7006-246"><span class="lno">246</span></span>
<span id="line-S-7006-247"><span class="lno">247</span></span>
<span id="line-S-7006-248"><span class="lno">248</span></span>
<span id="line-S-7006-249"><span class="lno">249</span></span>
<span id="line-S-7006-250">250</span>
<span id="line-S-7006-251"><span class="lno">251</span></span>
<span id="line-S-7006-252"><span class="lno">252</span></span>
<span id="line-S-7006-253"><span class="lno">253</span></span>
<span id="line-S-7006-254"><span class="lno">254</span></span>
<span id="line-S-7006-255">255</span>
<span id="line-S-7006-256"><span class="lno">256</span></span>
<span id="line-S-7006-257"><span class="lno">257</span></span>
<span id="line-S-7006-258"><span class="lno">258</span></span>
<span id="line-S-7006-259"><span class="lno">259</span></span>
<span id="line-S-7006-260">260</span>
<span id="line-S-7006-261"><span class="lno">261</span></span>
<span id="line-S-7006-262"><span class="lno">262</span></span>
<span id="line-S-7006-263"><span class="lno">263</span></span>
<span id="line-S-7006-264"><span class="lno">264</span></span>
<span id="line-S-7006-265">265</span>
<span id="line-S-7006-266"><span class="lno">266</span></span>
<span id="line-S-7006-267"><span class="lno">267</span></span>
<span id="line-S-7006-268"><span class="lno">268</span></span>
<span id="line-S-7006-269"><span class="lno">269</span></span>
<span id="line-S-7006-270">270</span>
<span id="line-S-7006-271"><span class="lno">271</span></span>
<span id="line-S-7006-272"><span class="lno">272</span></span>
<span id="line-S-7006-273"><span class="lno">273</span></span>
<span id="line-S-7006-274"><span class="lno">274</span></span>
<span id="line-S-7006-275">275</span>
<span id="line-S-7006-276"><span class="lno">276</span></span>
<span id="line-S-7006-277"><span class="lno">277</span></span>
<span id="line-S-7006-278"><span class="lno">278</span></span>
<span id="line-S-7006-279"><span class="lno">279</span></span>
<span id="line-S-7006-280">280</span>
<span id="line-S-7006-281"><span class="lno">281</span></span>
<span id="line-S-7006-282"><span class="lno">282</span></span>
<span id="line-S-7006-283"><span class="lno">283</span></span>
<span id="line-S-7006-284"><span class="lno">284</span></span>
<span id="line-S-7006-285">285</span>
<span id="line-S-7006-286"><span class="lno">286</span></span>
<span id="line-S-7006-287"><span class="lno">287</span></span>
<span id="line-S-7006-288"><span class="lno">288</span></span>
<span id="line-S-7006-289"><span class="lno">289</span></span>
<span id="line-S-7006-290">290</span>
<span id="line-S-7006-291"><span class="lno">291</span></span>
<span id="line-S-7006-292"><span class="lno">292</span></span>
<span id="line-S-7006-293"><span class="lno">293</span></span>
<span id="line-S-7006-294"><span class="lno">294</span></span>
<span id="line-S-7006-295">295</span>
<span id="line-S-7006-296"><span class="lno">296</span></span>
<span id="line-S-7006-297"><span class="lno">297</span></span>
<span id="line-S-7006-298"><span class="lno">298</span></span>
<span id="line-S-7006-299"><span class="lno">299</span></span>
<span id="line-S-7006-300">300</span>
<span id="line-S-7006-301"><span class="lno">301</span></span>
<span id="line-S-7006-302"><span class="lno">302</span></span>
<span id="line-S-7006-303"><span class="lno">303</span></span>
<span id="line-S-7006-304"><span class="lno">304</span></span>
<span id="line-S-7006-305">305</span>
<span id="line-S-7006-306"><span class="lno">306</span></span>
<span id="line-S-7006-307"><span class="lno">307</span></span>
<span id="line-S-7006-308"><span class="lno">308</span></span>
<span id="line-S-7006-309"><span class="lno">309</span></span>
<span id="line-S-7006-310">310</span>
<span id="line-S-7006-311"><span class="lno">311</span></span>
<span id="line-S-7006-312"><span class="lno">312</span></span>
<span id="line-S-7006-313"><span class="lno">313</span></span>
<span id="line-S-7006-314"><span class="lno">314</span></span>
<span id="line-S-7006-315">315</span>
<span id="line-S-7006-316"><span class="lno">316</span></span>
<span id="line-S-7006-317"><span class="lno">317</span></span>
<span id="line-S-7006-318"><span class="lno">318</span></span>
<span id="line-S-7006-319"><span class="lno">319</span></span>
<span id="line-S-7006-320">320</span>
<span id="line-S-7006-321"><span class="lno">321</span></span>
<span id="line-S-7006-322"><span class="lno">322</span></span>
<span id="line-S-7006-323"><span class="lno">323</span></span>
<span id="line-S-7006-324"><span class="lno">324</span></span>
<span id="line-S-7006-325">325</span>
<span id="line-S-7006-326"><span class="lno">326</span></span>
<span id="line-S-7006-327"><span class="lno">327</span></span>
<span id="line-S-7006-328"><span class="lno">328</span></span>
<span id="line-S-7006-329"><span class="lno">329</span></span>
<span id="line-S-7006-330">330</span>
<span id="line-S-7006-331"><span class="lno">331</span></span>
<span id="line-S-7006-332"><span class="lno">332</span></span>
<span id="line-S-7006-333"><span class="lno">333</span></span>
<span id="line-S-7006-334"><span class="lno">334</span></span>
<span id="line-S-7006-335">335</span>
<span id="line-S-7006-336"><span class="lno">336</span></span>
<span id="line-S-7006-337"><span class="lno">337</span></span>
<span id="line-S-7006-338"><span class="lno">338</span></span>
<span id="line-S-7006-339"><span class="lno">339</span></span>
<span id="line-S-7006-340">340</span>
<span id="line-S-7006-341"><span class="lno">341</span></span>
<span id="line-S-7006-342"><span class="lno">342</span></span>
<span id="line-S-7006-343"><span class="lno">343</span></span>
<span id="line-S-7006-344"><span class="lno">344</span></span>
<span id="line-S-7006-345">345</span>
<span id="line-S-7006-346"><span class="lno">346</span></span>
<span id="line-S-7006-347"><span class="lno">347</span></span>
<span id="line-S-7006-348"><span class="lno">348</span></span>
<span id="line-S-7006-349"><span class="lno">349</span></span>
<span id="line-S-7006-350">350</span>
<span id="line-S-7006-351"><span class="lno">351</span></span>
<span id="line-S-7006-352"><span class="lno">352</span></span>
<span id="line-S-7006-353"><span class="lno">353</span></span>
<span id="line-S-7006-354"><span class="lno">354</span></span>
<span id="line-S-7006-355">355</span>
<span id="line-S-7006-356"><span class="lno">356</span></span>
<span id="line-S-7006-357"><span class="lno">357</span></span>
<span id="line-S-7006-358"><span class="lno">358</span></span>
<span id="line-S-7006-359"><span class="lno">359</span></span>
<span id="line-S-7006-360">360</span>
<span id="line-S-7006-361"><span class="lno">361</span></span>
<span id="line-S-7006-362"><span class="lno">362</span></span>
<span id="line-S-7006-363"><span class="lno">363</span></span>
<span id="line-S-7006-364"><span class="lno">364</span></span>
<span id="line-S-7006-365">365</span>
<span id="line-S-7006-366"><span class="lno">366</span></span>
<span id="line-S-7006-367"><span class="lno">367</span></span>
<span id="line-S-7006-368"><span class="lno">368</span></span>
<span id="line-S-7006-369"><span class="lno">369</span></span>
<span id="line-S-7006-370">370</span>
<span id="line-S-7006-371"><span class="lno">371</span></span>
<span id="line-S-7006-372"><span class="lno">372</span></span>
<span id="line-S-7006-373"><span class="lno">373</span></span>
<span id="line-S-7006-374"><span class="lno">374</span></span>
<span id="line-S-7006-375">375</span>
<span id="line-S-7006-376"><span class="lno">376</span></span>
<span id="line-S-7006-377"><span class="lno">377</span></span>
<span id="line-S-7006-378"><span class="lno">378</span></span>
<span id="line-S-7006-379"><span class="lno">379</span></span>
<span id="line-S-7006-380">380</span>
<span id="line-S-7006-381"><span class="lno">381</span></span>
<span id="line-S-7006-382"><span class="lno">382</span></span>
<span id="line-S-7006-383"><span class="lno">383</span></span>
<span id="line-S-7006-384"><span class="lno">384</span></span>
<span id="line-S-7006-385">385</span>
<span id="line-S-7006-386"><span class="lno">386</span></span>
<span id="line-S-7006-387"><span class="lno">387</span></span>
<span id="line-S-7006-388"><span class="lno">388</span></span>
<span id="line-S-7006-389"><span class="lno">389</span></span>
<span id="line-S-7006-390">390</span>
<span id="line-S-7006-391"><span class="lno">391</span></span>
<span id="line-S-7006-392"><span class="lno">392</span></span>
<span id="line-S-7006-393"><span class="lno">393</span></span>
<span id="line-S-7006-394"><span class="lno">394</span></span>
<span id="line-S-7006-395">395</span>
<span id="line-S-7006-396"><span class="lno">396</span></span>
<span id="line-S-7006-397"><span class="lno">397</span></span>
<span id="line-S-7006-398"><span class="lno">398</span></span>
<span id="line-S-7006-399"><span class="lno">399</span></span>
<span id="line-S-7006-400">400</span>
<span id="line-S-7006-401"><span class="lno">401</span></span>
<span id="line-S-7006-402"><span class="lno">402</span></span>
<span id="line-S-7006-403"><span class="lno">403</span></span>
<span id="line-S-7006-404"><span class="lno">404</span></span>
<span id="line-S-7006-405">405</span>
<span id="line-S-7006-406"><span class="lno">406</span></span>
<span id="line-S-7006-407"><span class="lno">407</span></span>
<span id="line-S-7006-408"><span class="lno">408</span></span>
<span id="line-S-7006-409"><span class="lno">409</span></span>
<span id="line-S-7006-410">410</span>
<span id="line-S-7006-411"><span class="lno">411</span></span>
<span id="line-S-7006-412"><span class="lno">412</span></span>
<span id="line-S-7006-413"><span class="lno">413</span></span>
<span id="line-S-7006-414"><span class="lno">414</span></span>
<span id="line-S-7006-415">415</span>
<span id="line-S-7006-416"><span class="lno">416</span></span>
<span id="line-S-7006-417"><span class="lno">417</span></span>
<span id="line-S-7006-418"><span class="lno">418</span></span>
<span id="line-S-7006-419"><span class="lno">419</span></span>
<span id="line-S-7006-420">420</span>
<span id="line-S-7006-421"><span class="lno">421</span></span>
<span id="line-S-7006-422"><span class="lno">422</span></span>
<span id="line-S-7006-423"><span class="lno">423</span></span>
<span id="line-S-7006-424"><span class="lno">424</span></span>
<span id="line-S-7006-425">425</span>
<span id="line-S-7006-426"><span class="lno">426</span></span>
<span id="line-S-7006-427"><span class="lno">427</span></span>
<span id="line-S-7006-428"><span class="lno">428</span></span>
<span id="line-S-7006-429"><span class="lno">429</span></span>
<span id="line-S-7006-430">430</span>
<span id="line-S-7006-431"><span class="lno">431</span></span>
<span id="line-S-7006-432"><span class="lno">432</span></span>
<span id="line-S-7006-433"><span class="lno">433</span></span>
<span id="line-S-7006-434"><span class="lno">434</span></span>
<span id="line-S-7006-435">435</span>
<span id="line-S-7006-436"><span class="lno">436</span></span>
<span id="line-S-7006-437"><span class="lno">437</span></span>
<span id="line-S-7006-438"><span class="lno">438</span></span>
<span id="line-S-7006-439"><span class="lno">439</span></span>
<span id="line-S-7006-440">440</span>
<span id="line-S-7006-441"><span class="lno">441</span></span>
<span id="line-S-7006-442"><span class="lno">442</span></span>
<span id="line-S-7006-443"><span class="lno">443</span></span>
<span id="line-S-7006-444"><span class="lno">444</span></span>
<span id="line-S-7006-445">445</span>
<span id="line-S-7006-446"><span class="lno">446</span></span>
<span id="line-S-7006-447"><span class="lno">447</span></span>
<span id="line-S-7006-448"><span class="lno">448</span></span>
<span id="line-S-7006-449"><span class="lno">449</span></span>
<span id="line-S-7006-450">450</span>
<span id="line-S-7006-451"><span class="lno">451</span></span>
<span id="line-S-7006-452"><span class="lno">452</span></span>
<span id="line-S-7006-453"><span class="lno">453</span></span>
<span id="line-S-7006-454"><span class="lno">454</span></span>
<span id="line-S-7006-455">455</span>
<span id="line-S-7006-456"><span class="lno">456</span></span>
<span id="line-S-7006-457"><span class="lno">457</span></span>
<span id="line-S-7006-458"><span class="lno">458</span></span>
<span id="line-S-7006-459"><span class="lno">459</span></span>
<span id="line-S-7006-460">460</span>
<span id="line-S-7006-461"><span class="lno">461</span></span>
<span id="line-S-7006-462"><span class="lno">462</span></span>
<span id="line-S-7006-463"><span class="lno">463</span></span>
<span id="line-S-7006-464"><span class="lno">464</span></span>
<span id="line-S-7006-465">465</span>
<span id="line-S-7006-466"><span class="lno">466</span></span>
<span id="line-S-7006-467"><span class="lno">467</span></span>
<span id="line-S-7006-468"><span class="lno">468</span></span>
<span id="line-S-7006-469"><span class="lno">469</span></span>
<span id="line-S-7006-470">470</span>
<span id="line-S-7006-471"><span class="lno">471</span></span>
<span id="line-S-7006-472"><span class="lno">472</span></span>
<span id="line-S-7006-473"><span class="lno">473</span></span>
<span id="line-S-7006-474"><span class="lno">474</span></span>
<span id="line-S-7006-475">475</span>
<span id="line-S-7006-476"><span class="lno">476</span></span>
<span id="line-S-7006-477"><span class="lno">477</span></span>
<span id="line-S-7006-478"><span class="lno">478</span></span>
<span id="line-S-7006-479"><span class="lno">479</span></span>
<span id="line-S-7006-480">480</span>
<span id="line-S-7006-481"><span class="lno">481</span></span>
<span id="line-S-7006-482"><span class="lno">482</span></span>
<span id="line-S-7006-483"><span class="lno">483</span></span>
<span id="line-S-7006-484"><span class="lno">484</span></span>
<span id="line-S-7006-485">485</span>
<span id="line-S-7006-486"><span class="lno">486</span></span>
<span id="line-S-7006-487"><span class="lno">487</span></span>
<span id="line-S-7006-488"><span class="lno">488</span></span>
<span id="line-S-7006-489"><span class="lno">489</span></span>
<span id="line-S-7006-490">490</span>
<span id="line-S-7006-491"><span class="lno">491</span></span>
<span id="line-S-7006-492"><span class="lno">492</span></span>
<span id="line-S-7006-493"><span class="lno">493</span></span>
<span id="line-S-7006-494"><span class="lno">494</span></span>
<span id="line-S-7006-495">495</span>
<span id="line-S-7006-496"><span class="lno">496</span></span>
<span id="line-S-7006-497"><span class="lno">497</span></span>
<span id="line-S-7006-498"><span class="lno">498</span></span>
<span id="line-S-7006-499"><span class="lno">499</span></span>
<span id="line-S-7006-500">500</span>
<span id="line-S-7006-501"><span class="lno">501</span></span>
<span id="line-S-7006-502"><span class="lno">502</span></span>
<span id="line-S-7006-503"><span class="lno">503</span></span>
<span id="line-S-7006-504"><span class="lno">504</span></span>
<span id="line-S-7006-505">505</span>
<span id="line-S-7006-506"><span class="lno">506</span></span>
<span id="line-S-7006-507"><span class="lno">507</span></span>
<span id="line-S-7006-508"><span class="lno">508</span></span>
<span id="line-S-7006-509"><span class="lno">509</span></span>
<span id="line-S-7006-510">510</span>
<span id="line-S-7006-511"><span class="lno">511</span></span>
<span id="line-S-7006-512"><span class="lno">512</span></span>
<span id="line-S-7006-513"><span class="lno">513</span></span>
<span id="line-S-7006-514"><span class="lno">514</span></span>
<span id="line-S-7006-515">515</span>
<span id="line-S-7006-516"><span class="lno">516</span></span>
<span id="line-S-7006-517"><span class="lno">517</span></span>
<span id="line-S-7006-518"><span class="lno">518</span></span>
<span id="line-S-7006-519"><span class="lno">519</span></span>
<span id="line-S-7006-520">520</span>
<span id="line-S-7006-521"><span class="lno">521</span></span>
<span id="line-S-7006-522"><span class="lno">522</span></span>
<span id="line-S-7006-523"><span class="lno">523</span></span>
<span id="line-S-7006-524"><span class="lno">524</span></span>
<span id="line-S-7006-525">525</span>
<span id="line-S-7006-526"><span class="lno">526</span></span>
<span id="line-S-7006-527"><span class="lno">527</span></span>
<span id="line-S-7006-528"><span class="lno">528</span></span>
<span id="line-S-7006-529"><span class="lno">529</span></span>
<span id="line-S-7006-530">530</span>
<span id="line-S-7006-531"><span class="lno">531</span></span>
<span id="line-S-7006-532"><span class="lno">532</span></span>
<span id="line-S-7006-533"><span class="lno">533</span></span>
<span id="line-S-7006-534"><span class="lno">534</span></span>
<span id="line-S-7006-535">535</span>
<span id="line-S-7006-536"><span class="lno">536</span></span>
<span id="line-S-7006-537"><span class="lno">537</span></span>
<span id="line-S-7006-538"><span class="lno">538</span></span>
<span id="line-S-7006-539"><span class="lno">539</span></span>
<span id="line-S-7006-540">540</span>
<span id="line-S-7006-541"><span class="lno">541</span></span>
<span id="line-S-7006-542"><span class="lno">542</span></span>
<span id="line-S-7006-543"><span class="lno">543</span></span>
<span id="line-S-7006-544"><span class="lno">544</span></span>
<span id="line-S-7006-545">545</span>
<span id="line-S-7006-546"><span class="lno">546</span></span>
<span id="line-S-7006-547"><span class="lno">547</span></span>
<span id="line-S-7006-548"><span class="lno">548</span></span>
<span id="line-S-7006-549"><span class="lno">549</span></span>
<span id="line-S-7006-550">550</span>
<span id="line-S-7006-551"><span class="lno">551</span></span>
<span id="line-S-7006-552"><span class="lno">552</span></span>
<span id="line-S-7006-553"><span class="lno">553</span></span>
<span id="line-S-7006-554"><span class="lno">554</span></span>
<span id="line-S-7006-555">555</span>
<span id="line-S-7006-556"><span class="lno">556</span></span>
<span id="line-S-7006-557"><span class="lno">557</span></span>
<span id="line-S-7006-558"><span class="lno">558</span></span>
<span id="line-S-7006-559"><span class="lno">559</span></span>
<span id="line-S-7006-560">560</span>
<span id="line-S-7006-561"><span class="lno">561</span></span>
<span id="line-S-7006-562"><span class="lno">562</span></span>
<span id="line-S-7006-563"><span class="lno">563</span></span>
<span id="line-S-7006-564"><span class="lno">564</span></span>
<span id="line-S-7006-565">565</span>
<span id="line-S-7006-566"><span class="lno">566</span></span>
<span id="line-S-7006-567"><span class="lno">567</span></span>
<span id="line-S-7006-568"><span class="lno">568</span></span>
<span id="line-S-7006-569"><span class="lno">569</span></span>
<span id="line-S-7006-570">570</span>
<span id="line-S-7006-571"><span class="lno">571</span></span>
<span id="line-S-7006-572"><span class="lno">572</span></span>
<span id="line-S-7006-573"><span class="lno">573</span></span>
<span id="line-S-7006-574"><span class="lno">574</span></span>
<span id="line-S-7006-575">575</span>
<span id="line-S-7006-576"><span class="lno">576</span></span>
<span id="line-S-7006-577"><span class="lno">577</span></span>
<span id="line-S-7006-578"><span class="lno">578</span></span>
<span id="line-S-7006-579"><span class="lno">579</span></span>
<span id="line-S-7006-580">580</span>
<span id="line-S-7006-581"><span class="lno">581</span></span>
<span id="line-S-7006-582"><span class="lno">582</span></span>
<span id="line-S-7006-583"><span class="lno">583</span></span>
<span id="line-S-7006-584"><span class="lno">584</span></span>
<span id="line-S-7006-585">585</span>
<span id="line-S-7006-586"><span class="lno">586</span></span>
<span id="line-S-7006-587"><span class="lno">587</span></span>
<span id="line-S-7006-588"><span class="lno">588</span></span>
<span id="line-S-7006-589"><span class="lno">589</span></span>
<span id="line-S-7006-590">590</span>
<span id="line-S-7006-591"><span class="lno">591</span></span>
<span id="line-S-7006-592"><span class="lno">592</span></span>
<span id="line-S-7006-593"><span class="lno">593</span></span>
<span id="line-S-7006-594"><span class="lno">594</span></span>
<span id="line-S-7006-595">595</span>
<span id="line-S-7006-596"><span class="lno">596</span></span>
<span id="line-S-7006-597"><span class="lno">597</span></span>
<span id="line-S-7006-598"><span class="lno">598</span></span>
<span id="line-S-7006-599"><span class="lno">599</span></span>
<span id="line-S-7006-600">600</span>
<span id="line-S-7006-601"><span class="lno">601</span></span>
<span id="line-S-7006-602"><span class="lno">602</span></span>
<span id="line-S-7006-603"><span class="lno">603</span></span>
<span id="line-S-7006-604"><span class="lno">604</span></span>
<span id="line-S-7006-605">605</span>
<span id="line-S-7006-606"><span class="lno">606</span></span>
<span id="line-S-7006-607"><span class="lno">607</span></span>
<span id="line-S-7006-608"><span class="lno">608</span></span>
<span id="line-S-7006-609"><span class="lno">609</span></span>
<span id="line-S-7006-610">610</span>
<span id="line-S-7006-611"><span class="lno">611</span></span>
<span id="line-S-7006-612"><span class="lno">612</span></span>
<span id="line-S-7006-613"><span class="lno">613</span></span>
<span id="line-S-7006-614"><span class="lno">614</span></span>
<span id="line-S-7006-615">615</span>
<span id="line-S-7006-616"><span class="lno">616</span></span>
<span id="line-S-7006-617"><span class="lno">617</span></span>
<span id="line-S-7006-618"><span class="lno">618</span></span>
<span id="line-S-7006-619"><span class="lno">619</span></span>
<span id="line-S-7006-620">620</span>
<span id="line-S-7006-621"><span class="lno">621</span></span>
<span id="line-S-7006-622"><span class="lno">622</span></span>
<span id="line-S-7006-623"><span class="lno">623</span></span>
<span id="line-S-7006-624"><span class="lno">624</span></span>
<span id="line-S-7006-625">625</span>
<span id="line-S-7006-626"><span class="lno">626</span></span>
<span id="line-S-7006-627"><span class="lno">627</span></span>
<span id="line-S-7006-628"><span class="lno">628</span></span>
<span id="line-S-7006-629"><span class="lno">629</span></span>
<span id="line-S-7006-630">630</span>
<span id="line-S-7006-631"><span class="lno">631</span></span>
<span id="line-S-7006-632"><span class="lno">632</span></span>
<span id="line-S-7006-633"><span class="lno">633</span></span>
<span id="line-S-7006-634"><span class="lno">634</span></span>
<span id="line-S-7006-635">635</span>
<span id="line-S-7006-636"><span class="lno">636</span></span>
<span id="line-S-7006-637"><span class="lno">637</span></span>
<span id="line-S-7006-638"><span class="lno">638</span></span>
<span id="line-S-7006-639"><span class="lno">639</span></span>
<span id="line-S-7006-640">640</span>
<span id="line-S-7006-641"><span class="lno">641</span></span>
<span id="line-S-7006-642"><span class="lno">642</span></span>
<span id="line-S-7006-643"><span class="lno">643</span></span>
<span id="line-S-7006-644"><span class="lno">644</span></span>
<span id="line-S-7006-645">645</span>
<span id="line-S-7006-646"><span class="lno">646</span></span>
<span id="line-S-7006-647"><span class="lno">647</span></span>
<span id="line-S-7006-648"><span class="lno">648</span></span>
<span id="line-S-7006-649"><span class="lno">649</span></span>
<span id="line-S-7006-650">650</span>
<span id="line-S-7006-651"><span class="lno">651</span></span>
<span id="line-S-7006-652"><span class="lno">652</span></span>
<span id="line-S-7006-653"><span class="lno">653</span></span>
<span id="line-S-7006-654"><span class="lno">654</span></span>
<span id="line-S-7006-655">655</span>
<span id="line-S-7006-656"><span class="lno">656</span></span>
<span id="line-S-7006-657"><span class="lno">657</span></span>
<span id="line-S-7006-658"><span class="lno">658</span></span>
<span id="line-S-7006-659"><span class="lno">659</span></span>
<span id="line-S-7006-660">660</span>
<span id="line-S-7006-661"><span class="lno">661</span></span>
<span id="line-S-7006-662"><span class="lno">662</span></span>
<span id="line-S-7006-663"><span class="lno">663</span></span>
<span id="line-S-7006-664"><span class="lno">664</span></span>
<span id="line-S-7006-665">665</span>
<span id="line-S-7006-666"><span class="lno">666</span></span>
<span id="line-S-7006-667"><span class="lno">667</span></span>
<span id="line-S-7006-668"><span class="lno">668</span></span>
<span id="line-S-7006-669"><span class="lno">669</span></span>
<span id="line-S-7006-670">670</span>
<span id="line-S-7006-671"><span class="lno">671</span></span>
<span id="line-S-7006-672"><span class="lno">672</span></span>
<span id="line-S-7006-673"><span class="lno">673</span></span>
<span id="line-S-7006-674"><span class="lno">674</span></span>
<span id="line-S-7006-675">675</span>
<span id="line-S-7006-676"><span class="lno">676</span></span>
<span id="line-S-7006-677"><span class="lno">677</span></span>
<span id="line-S-7006-678"><span class="lno">678</span></span>
<span id="line-S-7006-679"><span class="lno">679</span></span>
<span id="line-S-7006-680">680</span>
<span id="line-S-7006-681"><span class="lno">681</span></span>
<span id="line-S-7006-682"><span class="lno">682</span></span>
<span id="line-S-7006-683"><span class="lno">683</span></span>
<span id="line-S-7006-684"><span class="lno">684</span></span>
<span id="line-S-7006-685">685</span>
<span id="line-S-7006-686"><span class="lno">686</span></span>
<span id="line-S-7006-687"><span class="lno">687</span></span>
<span id="line-S-7006-688"><span class="lno">688</span></span>
<span id="line-S-7006-689"><span class="lno">689</span></span>
<span id="line-S-7006-690">690</span>
<span id="line-S-7006-691"><span class="lno">691</span></span>
<span id="line-S-7006-692"><span class="lno">692</span></span>
<span id="line-S-7006-693"><span class="lno">693</span></span>
<span id="line-S-7006-694"><span class="lno">694</span></span>
<span id="line-S-7006-695">695</span>
<span id="line-S-7006-696"><span class="lno">696</span></span>
<span id="line-S-7006-697"><span class="lno">697</span></span>
<span id="line-S-7006-698"><span class="lno">698</span></span>
<span id="line-S-7006-699"><span class="lno">699</span></span>
<span id="line-S-7006-700">700</span>
<span id="line-S-7006-701"><span class="lno">701</span></span>
<span id="line-S-7006-702"><span class="lno">702</span></span>
<span id="line-S-7006-703"><span class="lno">703</span></span>
<span id="line-S-7006-704"><span class="lno">704</span></span>
<span id="line-S-7006-705">705</span>
<span id="line-S-7006-706"><span class="lno">706</span></span>
<span id="line-S-7006-707"><span class="lno">707</span></span>
<span id="line-S-7006-708"><span class="lno">708</span></span>
<span id="line-S-7006-709"><span class="lno">709</span></span>
<span id="line-S-7006-710">710</span>
<span id="line-S-7006-711"><span class="lno">711</span></span>
<span id="line-S-7006-712"><span class="lno">712</span></span>
<span id="line-S-7006-713"><span class="lno">713</span></span>
<span id="line-S-7006-714"><span class="lno">714</span></span>
<span id="line-S-7006-715">715</span>
<span id="line-S-7006-716"><span class="lno">716</span></span>
<span id="line-S-7006-717"><span class="lno">717</span></span>
<span id="line-S-7006-718"><span class="lno">718</span></span>
<span id="line-S-7006-719"><span class="lno">719</span></span>
<span id="line-S-7006-720">720</span>
</pre></td><td valign="top"><pre><code class="language-xml">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                xmlns:db="http://docbook.org/ns/docbook"
                xmlns:dbe="http://docbook.org/ns/docbook/errors"
                xmlns:f="http://docbook.org/ns/docbook/functions"
                xmlns:fp="http://docbook.org/ns/docbook/functions/private"
                xmlns:h="http://www.w3.org/1999/xhtml"
                xmlns:m="http://docbook.org/ns/docbook/modes"
                xmlns:mp="http://docbook.org/ns/docbook/modes/private"
                xmlns:t="http://docbook.org/ns/docbook/templates"
                xmlns:v="http://docbook.org/ns/docbook/variables"
                xmlns:xs="http://www.w3.org/2001/XMLSchema"
                xmlns="http://www.w3.org/1999/xhtml"
                default-mode="m:chunk-cleanup"
                exclude-result-prefixes="db dbe f fp h m mp t v xs"
                version="3.0"&gt;

&lt;xsl:key name="hid" match="*" use="@id"/&gt;
&lt;xsl:key name="hfootnote" match="h:db-footnote" use="@id"/&gt;
&lt;xsl:key name="hanno" match="h:db-annotation" use="@id"/&gt;

&lt;xsl:template match="/"&gt;
  &lt;xsl:param name="docbook" as="document-node()" tunnel="yes" required="yes"/&gt;
  &lt;xsl:document&gt;
    &lt;xsl:apply-templates/&gt;
  &lt;/xsl:document&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="h:db-footnote|h:db-annotation|h:head
                     |h:db-annotation-script|h:db-xlink-script
                     |h:db-toc-script|h:db-mathml-script|h:db-script"&gt;
  &lt;!-- discard --&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="h:db-annotation-marker"&gt;
  &lt;xsl:if test="not(@placement = 'before')"&gt;
    &lt;xsl:apply-templates/&gt;
  &lt;/xsl:if&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="*[@db-chunk]" priority="10"&gt;
  &lt;xsl:variable name="self" select="."/&gt;

  &lt;!-- Saxonica bug #4632 --&gt;
  &lt;xsl:sequence select="base-uri(root(.)/*)[. = '-no match-']"/&gt;

  &lt;xsl:if test="'chunk-cleanup' = $v:debug"&gt;
    &lt;xsl:message select="'Chunk cleanup:', local-name(.), @db-chunk/string()"/&gt;
  &lt;/xsl:if&gt;

  &lt;xsl:variable name="footnotes" as="element(h:db-footnote)*"&gt;
    &lt;xsl:for-each select=".//h:db-footnote[not(ancestor::h:table)]"&gt;
      &lt;xsl:variable name="chunk" select="ancestor::*[@db-chunk][1]"/&gt;
      &lt;xsl:if test="$chunk is $self"&gt;
        &lt;xsl:sequence select="."/&gt;
      &lt;/xsl:if&gt;
    &lt;/xsl:for-each&gt;
  &lt;/xsl:variable&gt;

  &lt;xsl:variable name="annotations" as="xs:string*"&gt;
    &lt;xsl:for-each select=".//h:db-annotation-marker"&gt;
      &lt;xsl:variable name="chunk" select="ancestor::*[@db-chunk][1]"/&gt;
      &lt;xsl:if test="$chunk is $self"&gt;
        &lt;xsl:sequence select="@target/string()"/&gt;
      &lt;/xsl:if&gt;
    &lt;/xsl:for-each&gt;
  &lt;/xsl:variable&gt;

  &lt;xsl:variable name="annotations" select="distinct-values($annotations)"/&gt;

  &lt;xsl:variable name="head" select="/h:html/h:head"/&gt;

  &lt;xsl:variable name="prev"
                select="(ancestor::*[@db-chunk and fp:navigable(.)][1]
                         |preceding::*[@db-chunk and fp:navigable(.)][1])[last()]"/&gt;
  &lt;xsl:variable name="next"
                select="((.//*[@db-chunk and fp:navigable(.)])[1]
                          |following::*[@db-chunk and fp:navigable(.)][1])[1]"/&gt;
  &lt;xsl:variable name="up"
                select="ancestor::*[@db-chunk and fp:navigable(.)][1]"/&gt;
  &lt;xsl:variable name="top"
                select="ancestor::*[@db-chunk and fp:navigable(.)][last()]"/&gt;

  &lt;xsl:variable name="rbu" select="fp:root-base-uri(.)"/&gt;
  &lt;xsl:variable name="cbu" select="fp:chunk-output-filename(.)"/&gt;

  &lt;!-- class=no-js is a hook for setting CSS styles when js isn't available,
       see the script element a few lines below --&gt;
  &lt;html class="no-js" db-chunk="{fp:chunk-output-filename(.)}"&gt;
    &lt;xsl:if test="normalize-space($default-theme) ne ''"&gt;
      &lt;xsl:attribute name="class" select="$default-theme"/&gt;
    &lt;/xsl:if&gt;
    &lt;head&gt;
      &lt;!-- When serialized, this always comes first, so make sure it's first
           here. (It doesn't really matter in practice, but the XSpec tests
           will fail if it isn't also first here.) --&gt;
      &lt;xsl:variable name="ctype" select="$head/h:meta[@http-equiv='Content-Type']"/&gt;
      &lt;xsl:apply-templates select="$ctype"/&gt;

      &lt;!-- If js is available, turn that no-js class into a js class, per
           https://www.paulirish.com/2009/avoiding-the-fouc-v3/ --&gt;
      &lt;script&gt;
        &lt;xsl:text&gt;(function(H){H.className=H.className.replace(/\bno-js\b/,'js')})&lt;/xsl:text&gt;
        &lt;xsl:text&gt;(document.documentElement)&lt;/xsl:text&gt;
      &lt;/script&gt;

      &lt;xsl:variable name="title" select="$head/h:title"/&gt;
      &lt;title&gt;
        &lt;xsl:value-of select="f:chunk-title(.)"/&gt;
      &lt;/title&gt;

      &lt;xsl:apply-templates select="$head/node() except ($ctype|$title)"&gt;
        &lt;xsl:with-param name="rootbaseuri" select="$rbu"/&gt;
        &lt;xsl:with-param name="chunkbaseuri" select="$cbu"/&gt;
      &lt;/xsl:apply-templates&gt;

      &lt;xsl:if test="exists(.//mml:*)"
              xmlns:mml="http://www.w3.org/1998/Math/MathML"&gt;
        &lt;xsl:apply-templates select="/h:html/h:db-mathml-script/*"&gt;
          &lt;xsl:with-param name="rootbaseuri" select="$rbu"/&gt;
          &lt;xsl:with-param name="chunkbaseuri" select="$cbu"/&gt;
        &lt;/xsl:apply-templates&gt;
      &lt;/xsl:if&gt;
      &lt;xsl:if test="$prev"&gt;
        &lt;link rel="prev" href="{fp:relative-link(., $prev)}"/&gt;
      &lt;/xsl:if&gt;
      &lt;xsl:if test="$next"&gt;
        &lt;link rel="next" href="{fp:relative-link(., $next)}"/&gt;
      &lt;/xsl:if&gt;
      &lt;xsl:if test="$up"&gt;
        &lt;link rel="up" href="{fp:relative-link(., $up)}"/&gt;
      &lt;/xsl:if&gt;
      &lt;xsl:if test="$top"&gt;
        &lt;link rel="home" href="{fp:relative-link(., $top)}"/&gt;
      &lt;/xsl:if&gt;
    &lt;/head&gt;
    &lt;body&gt;
      &lt;xsl:if test="parent::h:html"&gt;
        &lt;xsl:attribute name="class" select="'home'"/&gt;
      &lt;/xsl:if&gt;
      &lt;nav class="top"&gt;
        &lt;xsl:if test="exists($chunk)
                      and (empty(@db-navigation)
                           or f:is-true(@db-navigation))
                      and (empty(@db-top-navigation)
                           or f:is-true(@db-top-navigation))"&gt;
          &lt;xsl:call-template name="t:top-nav"&gt;
            &lt;xsl:with-param name="node" select="$self"/&gt;
            &lt;xsl:with-param name="prev" select="$prev"/&gt;
            &lt;xsl:with-param name="next" select="$next"/&gt;
            &lt;xsl:with-param name="up" select="$up"/&gt;
            &lt;xsl:with-param name="top" select="$top"/&gt;
          &lt;/xsl:call-template&gt;
        &lt;/xsl:if&gt;
      &lt;/nav&gt;

      &lt;main&gt;
        &lt;xsl:copy&gt;
          &lt;xsl:apply-templates select="@*,node()"/&gt;
        &lt;/xsl:copy&gt;
      &lt;/main&gt;

      &lt;xsl:if test="$footnotes or exists($annotations)"&gt;
        &lt;footer&gt;
          &lt;xsl:if test="$footnotes"&gt;
            &lt;xsl:call-template name="t:chunk-footnotes"&gt;
              &lt;xsl:with-param name="footnotes" select="$footnotes"/&gt;
            &lt;/xsl:call-template&gt;
          &lt;/xsl:if&gt;

          &lt;xsl:if test="exists($annotations)"&gt;
            &lt;xsl:variable name="style"
                          select="key('hanno', $annotations[1])[1]/@style/string()"/&gt;
            &lt;div class="annotations"&gt;
              &lt;div class="annotation-wrapper title"
                   &gt;Annotations&lt;/div&gt;
              &lt;xsl:for-each select="$annotations"&gt;
                &lt;xsl:apply-templates select="key('hanno', ., root($self))/node()"
                                     mode="m:docbook"/&gt;
              &lt;/xsl:for-each&gt;
            &lt;/div&gt;
          &lt;/xsl:if&gt;
        &lt;/footer&gt;
      &lt;/xsl:if&gt;

      &lt;nav class="bottom"&gt;
        &lt;xsl:if test="exists($chunk)
                      and (empty(@db-navigation)
                           or f:is-true(@db-navigation))
                      and (empty(@db-bottom-navigation)
                           or f:is-true(@db-bottom-navigation))"&gt;
          &lt;xsl:call-template name="t:bottom-nav"&gt;
            &lt;xsl:with-param name="node" select="$self"/&gt;
            &lt;xsl:with-param name="prev" select="$prev"/&gt;
            &lt;xsl:with-param name="next" select="$next"/&gt;
            &lt;xsl:with-param name="up" select="$up"/&gt;
            &lt;xsl:with-param name="top" select="$top"/&gt;
          &lt;/xsl:call-template&gt;
        &lt;/xsl:if&gt;
      &lt;/nav&gt;

      &lt;!-- We save the annotation-style on the root div --&gt;
      &lt;xsl:if test="exists($annotations) and $annotation-style = 'javascript'"&gt;
        &lt;xsl:apply-templates select="/h:html/h:db-annotation-script/*"&gt;
          &lt;xsl:with-param name="rootbaseuri" select="$rbu"/&gt;
          &lt;xsl:with-param name="chunkbaseuri" select="$cbu"/&gt;
        &lt;/xsl:apply-templates&gt;
      &lt;/xsl:if&gt;

      &lt;!-- We save the xlink-style on the root div --&gt;
      &lt;xsl:if test="/h:html/h:div/@db-xlink/string() = 'javascript'"&gt;
        &lt;xsl:apply-templates select="/h:html/h:db-xlink-script/*"&gt;
          &lt;xsl:with-param name="rootbaseuri" select="$rbu"/&gt;
          &lt;xsl:with-param name="chunkbaseuri" select="$cbu"/&gt;
        &lt;/xsl:apply-templates&gt;
      &lt;/xsl:if&gt;

      &lt;xsl:if test="f:is-true($persistent-toc)"&gt;
        &lt;xsl:apply-templates select="/h:html/h:db-toc-script/*"&gt;
          &lt;xsl:with-param name="rootbaseuri" select="$rbu"/&gt;
          &lt;xsl:with-param name="chunkbaseuri" select="$cbu"/&gt;
        &lt;/xsl:apply-templates&gt;
      &lt;/xsl:if&gt;

      &lt;!-- Unconditionally add h:db-script children. --&gt;
      &lt;xsl:apply-templates select="/h:html/h:db-script/*"&gt;
        &lt;xsl:with-param name="rootbaseuri" select="$rbu"/&gt;
        &lt;xsl:with-param name="chunkbaseuri" select="$cbu"/&gt;
      &lt;/xsl:apply-templates&gt;

      &lt;xsl:apply-templates select="." mode="m:html-body-script"&gt;
        &lt;xsl:with-param name="rootbaseuri" select="$rbu"/&gt;
        &lt;xsl:with-param name="chunkbaseuri" select="$cbu"/&gt;
      &lt;/xsl:apply-templates&gt;
    &lt;/body&gt;
  &lt;/html&gt;
&lt;/xsl:template&gt;

&lt;xsl:template name="t:chunk-footnotes"&gt;
  &lt;xsl:param name="footnotes" as="element()*"/&gt;

  &lt;div class="footnotes"&gt;
    &lt;hr/&gt;
    &lt;xsl:for-each select="$footnotes"&gt;
      &lt;xsl:apply-templates select="./node()"/&gt;
    &lt;/xsl:for-each&gt;
  &lt;/div&gt;
&lt;/xsl:template&gt;

&lt;xsl:function name="fp:chunk-output-filename" as="xs:anyURI" cache="yes"&gt;
  &lt;xsl:param name="node" as="element()"/&gt;

  &lt;xsl:variable name="pchunk" select="$node/ancestor::*[@db-chunk][1]"/&gt;

  &lt;xsl:choose&gt;
    &lt;xsl:when test="exists($pchunk)"&gt;
      &lt;xsl:sequence
          select="resolve-uri($node/@db-chunk,
                              fp:chunk-output-filename($pchunk))"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:sequence
          select="resolve-uri($node/@db-chunk,
                              resolve-uri($chunk-output-base-uri,
                                          base-uri(root($node)/*)))"/&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:function&gt;

&lt;xsl:template match="h:head/h:link[@href]"&gt;
  &lt;xsl:param name="rootbaseuri" as="xs:anyURI" required="yes"/&gt;
  &lt;xsl:param name="chunkbaseuri" as="xs:anyURI" required="yes"/&gt;

  &lt;xsl:choose&gt;
    &lt;xsl:when test="ends-with(@href, 'css/pygments.css')
                    and empty(../..//h:div[contains-token(@class, 'highlight')])"&gt;
      &lt;!-- We don't need this one. Note that this is a slightly
           under-zealous test. It will preserve the pygments
           stylesheet in all of the ancestors of a chunk that
           has a highlighted listing. --&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:copy&gt;
        &lt;xsl:attribute name="href"
                       select="fp:relative-uri($rootbaseuri, $chunkbaseuri, @href)"/&gt;
        &lt;xsl:apply-templates select="@* except @href"/&gt;
        &lt;xsl:apply-templates select="node()"/&gt;
      &lt;/xsl:copy&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="h:script[@src]"&gt;
  &lt;xsl:param name="rootbaseuri" as="xs:anyURI" required="yes"/&gt;
  &lt;xsl:param name="chunkbaseuri" as="xs:anyURI" required="yes"/&gt;

  &lt;xsl:copy&gt;
    &lt;xsl:attribute name="src"
                   select="fp:relative-uri($rootbaseuri, $chunkbaseuri, @src)"/&gt;
    &lt;xsl:apply-templates select="@* except @src"/&gt;
    &lt;xsl:apply-templates select="node()"/&gt;
  &lt;/xsl:copy&gt;
&lt;/xsl:template&gt;

&lt;xsl:function name="fp:relative-uri" as="xs:string"&gt;
  &lt;xsl:param name="rootbaseuri" as="xs:anyURI" required="yes"/&gt;
  &lt;xsl:param name="chunkbaseuri" as="xs:anyURI" required="yes"/&gt;
  &lt;xsl:param name="href" as="xs:string" required="yes"/&gt;

  &lt;xsl:variable name="absuri"
                select="resolve-uri($href, $rootbaseuri)"/&gt;

  &lt;xsl:variable name="rchunk"
                select="fp:trim-common-prefix($chunkbaseuri, $absuri)"/&gt;

  &lt;xsl:choose&gt;
    &lt;!-- Attempt to leave absolute path references alone --&gt;
    &lt;xsl:when test="starts-with($href, '/')"&gt;
      &lt;xsl:sequence select="$href"/&gt;
    &lt;/xsl:when&gt;

    &lt;!-- if $rchunk = $chunkbaseuri, they have no common prefix --&gt;
    &lt;!-- if $rchunk doesn't contain a /, then it's at the root --&gt;
    &lt;xsl:when test="($rchunk ne $chunkbaseuri) and contains($rchunk, '/')"&gt;
      &lt;xsl:variable name="rhref"
                    select="fp:trim-common-prefix($absuri, $chunkbaseuri)"/&gt;
      &lt;xsl:variable name="parts" as="xs:string+"&gt;
        &lt;xsl:for-each select="2 to count(tokenize($rchunk, '/'))"&gt;
          &lt;xsl:sequence select="'..'"/&gt;
        &lt;/xsl:for-each&gt;
      &lt;/xsl:variable&gt;
      &lt;xsl:sequence select="string-join($parts, '/') || '/' || $rhref"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:sequence select="$href"/&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:function&gt;

&lt;xsl:template match="h:a[starts-with(@href, '#')]"&gt;
  &lt;xsl:variable name="id" select="substring-after(@href, '#')"/&gt;
  &lt;xsl:variable name="target" select="key('hid', $id)"/&gt;
  &lt;xsl:variable name="pchunk" select="(ancestor::*[@db-chunk])[last()]"/&gt;
  &lt;xsl:variable name="tchunk" select="($target/ancestor-or-self::*[@db-chunk])[last()]"/&gt;

  &lt;xsl:choose&gt;
    &lt;xsl:when test="empty($target)"&gt;
      &lt;xsl:message select="'No id for #' || $id"/&gt;
      &lt;span class="error broken-link"&gt;
        &lt;xsl:copy&gt;
          &lt;xsl:apply-templates select="@*,node()"/&gt;
        &lt;/xsl:copy&gt;
      &lt;/span&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="contains-token(@class, 'annomark')"&gt;
      &lt;!-- Annotations are special, they're always local references because
           we'll copy the relevant annotations into this chunk. --&gt;
      &lt;xsl:if test="'intra-chunk-refs' = $v:debug"&gt;
        &lt;xsl:message select="'Link:', @href/string(), 'is an annotation'"/&gt;
      &lt;/xsl:if&gt;
      &lt;a&gt;
        &lt;xsl:copy-of select="@* except @db-annotation"/&gt;
        &lt;xsl:apply-templates/&gt;
      &lt;/a&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="$pchunk is $tchunk"&gt;
      &lt;xsl:if test="'intra-chunk-refs' = $v:debug"&gt;
        &lt;xsl:message select="'Link:', @href/string(), 'in same chunk as target'"/&gt;
      &lt;/xsl:if&gt;
      &lt;a&gt;
        &lt;xsl:copy-of select="@*"/&gt;
        &lt;xsl:apply-templates/&gt;
      &lt;/a&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="$tchunk/@id = $id"&gt;
      &lt;xsl:if test="'intra-chunk-refs' = $v:debug"&gt;
        &lt;xsl:message select="'Link:', @href/string(),
                             'to root of', $tchunk/@db-chunk/string()"/&gt;
      &lt;/xsl:if&gt;
      &lt;a href="{fp:relative-link($pchunk, $tchunk)}"&gt;
        &lt;xsl:copy-of select="@* except @href"/&gt;
        &lt;xsl:apply-templates/&gt;
      &lt;/a&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:if test="'intra-chunk-refs' = $v:debug"&gt;
        &lt;xsl:message select="'Link:', @href/string(),
                             'in chunk', $tchunk/@db-chunk/string()"/&gt;
      &lt;/xsl:if&gt;
      &lt;a href="{fp:relative-link($pchunk, $tchunk)}{@href}"&gt;
        &lt;xsl:copy-of select="@* except @href"/&gt;
        &lt;xsl:apply-templates/&gt;
      &lt;/a&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:template&gt;

&lt;!-- If we're renumbering footnotes and this is a text node in an h:a that's
     a child of an h:sup that identifies a footnote and there are no other
     nodes inside this h:a, then we'll try to renumber the footnote. --&gt;
&lt;xsl:template match="text()[$v:chunk-renumber-footnotes
                            and parent::h:a
                            and parent::h:a
                                /parent::h:sup[contains-token(@class, 'footnote-number')
                                               and not(contains-token(@class, 'table-footnote'))
                                               and @db-footnote]
                            and empty(preceding-sibling::node())
                            and empty(following-sibling::node())]"
             
              priority="100"&gt;
  &lt;xsl:variable name="id" select="substring-after(../@href, '#')"/&gt;
  &lt;xsl:variable name="renumber" as="xs:string"&gt;
    &lt;xsl:choose&gt;
      &lt;xsl:when test="key('hfootnote', $id)"&gt;
        &lt;xsl:apply-templates select="key('hfootnote', $id)"
                             mode="mp:footnote-renumber"/&gt;
      &lt;/xsl:when&gt;
      &lt;xsl:otherwise&gt;
        &lt;!-- this must be the number in the footnote itself... --&gt;
        &lt;xsl:apply-templates select="ancestor::h:db-footnote[1]"
                             mode="mp:footnote-renumber"/&gt;
      &lt;/xsl:otherwise&gt;
    &lt;/xsl:choose&gt;
  &lt;/xsl:variable&gt;
  &lt;xsl:sequence select="$renumber"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="element()"&gt;
  &lt;xsl:copy&gt;
    &lt;xsl:apply-templates select="@*"/&gt;
    &lt;xsl:sequence select="h:db-annotation-marker[@placement='before']/node()"/&gt;
    &lt;xsl:apply-templates select="node()"/&gt;
  &lt;/xsl:copy&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="attribute()|text()|comment()|processing-instruction()"&gt;
  &lt;xsl:copy/&gt;
&lt;/xsl:template&gt;

&lt;!-- ============================================================ --&gt;

&lt;xsl:template match="*" mode="mp:footnote-renumber"&gt;
  &lt;xsl:sequence
      select="error($dbe:INTERNAL-RENUMBER-ERROR,
                    'Attempt to renumber ' || local-name(.)
                    || ': ' || @id/string())"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="h:db-footnote" mode="mp:footnote-renumber"&gt;
  &lt;xsl:variable name="new-number" as="xs:string"&gt;
    &lt;xsl:number from="*[@db-chunk]" count="h:db-footnote[not(ancestor::h:table)]"
                level="any"/&gt;
  &lt;/xsl:variable&gt;
  &lt;xsl:sequence select="fp:footnote-mark(xs:integer($new-number), $footnote-numeration)"/&gt;
&lt;/xsl:template&gt;

&lt;!-- ============================================================ --&gt;

&lt;xsl:function name="fp:relative-link" as="xs:string"&gt;
  &lt;xsl:param name="source" as="element()"/&gt;
  &lt;xsl:param name="target" as="element()"/&gt;

  &lt;xsl:variable name="suri" 
                select="fp:chunk-output-filename($source)"/&gt;
  &lt;xsl:variable name="turi"
                select="fp:chunk-output-filename($target)"/&gt;

  &lt;xsl:variable name="tsuri" select="fp:trim-common-prefix($suri, $turi)"/&gt;
  &lt;xsl:variable name="tturi" select="fp:trim-common-prefix($turi, $suri)"/&gt;

  &lt;xsl:variable name="path" as="xs:string"&gt;
    &lt;xsl:choose&gt;
      &lt;xsl:when test="contains($tsuri, '/')"&gt;
        &lt;xsl:variable name="parts" as="xs:string+"&gt;
          &lt;xsl:for-each select="2 to count(tokenize($tsuri, '/'))"&gt;
            &lt;xsl:sequence select="'..'"/&gt;
          &lt;/xsl:for-each&gt;
        &lt;/xsl:variable&gt;
        &lt;xsl:sequence select="string-join($parts, '/') || '/' || $tturi"/&gt;
      &lt;/xsl:when&gt;
      &lt;xsl:otherwise&gt;
        &lt;xsl:sequence select="$tturi"/&gt;
      &lt;/xsl:otherwise&gt;
    &lt;/xsl:choose&gt;
  &lt;/xsl:variable&gt;

  &lt;xsl:if test="'intra-chunk-links' = $v:debug"&gt;
    &lt;xsl:message select="$tsuri,'→',$tturi,':',$path"/&gt;
  &lt;/xsl:if&gt;

  &lt;xsl:sequence select="$path"/&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="fp:trim-common-prefix" as="xs:string" cache="yes"&gt;
  &lt;xsl:param name="source" as="xs:string"/&gt;
  &lt;xsl:param name="target" as="xs:string"/&gt;

  &lt;xsl:variable name="tail"
                select="fp:trim-common-parts(
                           tokenize($source, '/'),
                           tokenize($target, '/'))"/&gt;

  &lt;xsl:sequence select="string-join($tail, '/')"/&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="fp:trim-common-parts" as="xs:string*"&gt;
  &lt;xsl:param name="source" as="xs:string*"/&gt;
  &lt;xsl:param name="target" as="xs:string*"/&gt;

  &lt;xsl:choose&gt;
    &lt;xsl:when test="empty($source) or empty($target)"&gt;
      &lt;xsl:sequence select="$source"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="$source[1] ne $target[1]"&gt;
      &lt;xsl:sequence select="$source"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:sequence select="fp:trim-common-parts(subsequence($source, 2),
                                                 subsequence($target, 2))"/&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:function&gt;

&lt;xsl:function name="fp:root-base-uri" as="xs:anyURI" cache="yes"&gt;
  &lt;xsl:param name="node" as="element()"/&gt;
  &lt;!-- Saxonica bug #4632 --&gt;
  &lt;xsl:sequence select="base-uri(root($node)/*)[. = '-no match-']"/&gt;
  &lt;xsl:sequence select="resolve-uri($chunk-output-base-uri, base-uri(root($node)/*))"/&gt;
&lt;/xsl:function&gt;

&lt;!-- ============================================================ --&gt;

&lt;xsl:function name="f:chunk-title" as="node()*" cache="yes"&gt;
  &lt;xsl:param name="chunk" as="element()?"/&gt;

  &lt;xsl:choose&gt;
    &lt;xsl:when test="$chunk/h:div[contains-token(@class, 'refnamediv')]"&gt;
      &lt;!-- refentry chunks are special --&gt;
      &lt;xsl:apply-templates
          select="(($chunk/h:div[contains-token(@class, 'refnamediv')])[1]
                   //h:span[contains-token(@class, 'refname')])[1]/node()"
          mode="m:chunk-title"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:variable name="header" select="($chunk/h:header
                                           |$chunk/*/h:header
                                           |$chunk/*/*/h:header)[1]"/&gt;

      &lt;xsl:variable name="hx" select="($header/h:h1,
                                       $header/h:h2,
                                       $header/h:h3,
                                       $header/h:h4,
                                       $header/h:h5)[1]"/&gt;
      &lt;xsl:apply-templates select="$hx/node()" mode="m:chunk-title"/&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:function&gt;

&lt;xsl:template match="h:db-footnote|h:db-annotation" mode="m:chunk-title"/&gt;

&lt;xsl:template match="h:a" mode="m:chunk-title"&gt;
  &lt;xsl:apply-templates mode="m:chunk-title"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="element()" mode="m:chunk-title"&gt;
  &lt;xsl:copy&gt;
    &lt;xsl:apply-templates select="@*,node()" mode="m:chunk-title"/&gt;
  &lt;/xsl:copy&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="attribute()|text()|comment()|processing-instruction()"
              mode="m:chunk-title"&gt;
  &lt;xsl:copy/&gt;
&lt;/xsl:template&gt;

&lt;!-- ============================================================ --&gt;

&lt;xsl:template name="t:top-nav"&gt;
  &lt;xsl:param name="node" as="element()"/&gt;
  &lt;xsl:param name="prev" as="element()?"/&gt;
  &lt;xsl:param name="next" as="element()?"/&gt;
  &lt;xsl:param name="up" as="element()?"/&gt;
  &lt;xsl:param name="top" as="element()?"/&gt;

  &lt;div&gt;
    &lt;xsl:if test="$top"&gt;
      &lt;a href="{fp:relative-link(., $top)}"&gt;Home&lt;/a&gt;
    &lt;/xsl:if&gt;
    &lt;xsl:text&gt; &lt;/xsl:text&gt;
    &lt;xsl:if test="$up"&gt;
      &lt;a href="{fp:relative-link(., $up)}"&gt;Up&lt;/a&gt;
    &lt;/xsl:if&gt;
    &lt;xsl:text&gt; &lt;/xsl:text&gt;
    &lt;xsl:if test="$next"&gt;
      &lt;a href="{fp:relative-link(., $next)}"&gt;Next&lt;/a&gt;
    &lt;/xsl:if&gt;
    &lt;xsl:text&gt; &lt;/xsl:text&gt;
    &lt;xsl:if test="$prev"&gt;
      &lt;a href="{fp:relative-link(., $prev)}"&gt;Previous&lt;/a&gt;
    &lt;/xsl:if&gt;
  &lt;/div&gt;
&lt;/xsl:template&gt;

&lt;xsl:template name="t:bottom-nav"&gt;
  &lt;xsl:param name="node" as="element()"/&gt;
  &lt;xsl:param name="prev" as="element()?"/&gt;
  &lt;xsl:param name="next" as="element()?"/&gt;
  &lt;xsl:param name="up" as="element()?"/&gt;
  &lt;xsl:param name="top" as="element()?"/&gt;

  &lt;table width="100%"&gt;
    &lt;tr&gt;
      &lt;td class="previous"&gt;
        &lt;xsl:if test="$prev"&gt;
          &lt;a href="{fp:relative-link(., $prev)}"&gt;Previous&lt;/a&gt;
        &lt;/xsl:if&gt;
      &lt;/td&gt;
      &lt;td class="up"&gt;
        &lt;xsl:if test="$up"&gt;
          &lt;a href="{fp:relative-link(., $up)}"&gt;Up&lt;/a&gt;
        &lt;/xsl:if&gt;
      &lt;/td&gt;
      &lt;td class="next"&gt;
        &lt;xsl:if test="$next"&gt;
          &lt;a href="{fp:relative-link(., $next)}"&gt;Next&lt;/a&gt;
        &lt;/xsl:if&gt;
      &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td class="previous"&gt;
        &lt;xsl:sequence select="f:chunk-title($prev)"/&gt;
      &lt;/td&gt;
      &lt;td class="up"&gt;
        &lt;xsl:if test="$top"&gt;
          &lt;a href="{fp:relative-link(., $top)}"&gt;Home&lt;/a&gt;
        &lt;/xsl:if&gt;
      &lt;/td&gt;
      &lt;td class="next"&gt;
        &lt;xsl:sequence select="f:chunk-title($next)"/&gt;
      &lt;/td&gt;
    &lt;/tr&gt;
  &lt;/table&gt;
&lt;/xsl:template&gt;

&lt;!-- ============================================================ --&gt;

&lt;xsl:function name="fp:footnote-number" as="xs:integer" cache="yes"&gt;
  &lt;xsl:param name="node" as="element(db:footnote)"/&gt;
  &lt;xsl:apply-templates select="$node" mode="mp:footnote-number"/&gt;
&lt;/xsl:function&gt;

&lt;xsl:template match="db:footnote" as="xs:integer" mode="mp:footnote-number"&gt;
  &lt;xsl:variable name="nearest"
                select="(ancestor::db:table
                        |ancestor::db:informaltable)[last()]"/&gt;

  &lt;xsl:variable name="fnum" as="xs:string"&gt;
    &lt;xsl:choose&gt;
      &lt;xsl:when test="empty($nearest)"&gt;
        &lt;xsl:variable name="pfoot" select="count(preceding::db:footnote)"/&gt;
        &lt;xsl:variable name="ptfoot"
              select="count(preceding::db:footnote[ancestor::db:table])
                      + count(preceding::db:footnote[ancestor::db:informaltable])"/&gt;
        &lt;xsl:value-of select="$pfoot - $ptfoot + 1"/&gt;
      &lt;/xsl:when&gt;
      &lt;xsl:when test="$nearest/self::db:informaltable"&gt;
        &lt;xsl:number format="1" from="db:informaltable" level="any"/&gt;
      &lt;/xsl:when&gt;
      &lt;xsl:when test="$nearest/self::db:table"&gt;
        &lt;xsl:number format="1" from="db:table" level="any"/&gt;
      &lt;/xsl:when&gt;
      &lt;xsl:otherwise&gt;
        &lt;xsl:message&gt;Error: failed to enumerate footnote:&lt;/xsl:message&gt;
        &lt;xsl:message select="."/&gt;
        &lt;xsl:sequence select="1"/&gt;
      &lt;/xsl:otherwise&gt;
    &lt;/xsl:choose&gt;
  &lt;/xsl:variable&gt;

  &lt;xsl:sequence select="xs:integer($fnum)"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="db:footnote" mode="m:footnote-number"&gt;
  &lt;xsl:variable name="nearest"
                select="(ancestor::db:table
                        |ancestor::db:informaltable)[last()]"/&gt;

  &lt;xsl:variable name="fnum" select="fp:footnote-number(.)"/&gt;

  &lt;xsl:variable name="marks"
                select="if (empty($nearest))
                        then $footnote-numeration
                        else $table-footnote-numeration"/&gt;

  &lt;xsl:sequence select="fp:footnote-mark($fnum, $marks)"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:function name="fp:footnote-mark" as="xs:string"&gt;
  &lt;xsl:param name="number" as="xs:integer"/&gt;
  &lt;xsl:param name="marks" as="xs:string+"/&gt;

  &lt;xsl:choose&gt;
    &lt;xsl:when test="$number lt count($marks)"&gt;
      &lt;xsl:sequence select="$marks[$number]"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:number value="$number" format="{$marks[count($marks)]}"/&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:function&gt;

&lt;!-- ============================================================ --&gt;

&lt;xsl:function name="fp:navigable" as="xs:boolean" cache="yes"&gt;
  &lt;xsl:param name="node" as="element()"/&gt;
  &lt;xsl:sequence select="$node/@db-chunk and not($node/@db-navigable='false')"/&gt;
&lt;/xsl:function&gt;

&lt;/xsl:stylesheet&gt;
</code></pre></td></tr></table></div></div></div></div><div class="stylesheet" id="S-21031"><h3>chunk-output.xsl</h3><p><span><span class="template all">9 templates</span></span>, <span><span class="function all">1 function</span></span></p><div class="instructions"><div class="title closed">Instructions</div><div class="body"><div id="S-21031-t-1" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ /  as map(xs:string, item()*)</div><div class="props"><div class="uses">Uses: <a href="#S-26643-docbook.org.ns.docbook.variables.chunk">$v:chunk</a></div><div class="mode">Mode: <code>m:chunk-output</code></div><div class="matches">Matches: <code>/</code></div></div></div><div id="S-21031-t-2" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ h:html</div><div class="props"><div class="uses">Uses: <a href="#S-26643-docbook.org.ns.docbook.variables.chunk">$v:chunk</a>, <a href="#S-23412-docbook.org.ns.docbook.variables.debug">$v:debug</a></div><div class="mode">Mode: <code>m:chunk-output</code></div><div class="matches">Matches: <code>h:html</code></div></div></div><div id="S-21031-t-3" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ h:div</div><div class="props"><div class="mode">Mode: <code>m:chunk-output</code></div><div class="matches">Matches: <code>h:div</code></div></div></div><div id="S-21031-t-4" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ h:nav</div><div class="props"><div class="uses">Uses: <a href="#S-23412-docbook.org.ns.docbook.variables.toc-close">$v:toc-close</a>, <a href="#S-23412-docbook.org.ns.docbook.variables.toc-open">$v:toc-open</a>, <a href="#S-26643-..persistent-toc">$persistent-toc</a>, <a href="#S-26643-..persistent-toc-search">$persistent-toc-search</a></div><div class="calls">Calls: <a href="#S-7006-docbook.org.ns.docbook.functions.private.trim-common-prefix,2">fp:trim-common-prefix()</a>, <a href="#S-22317-docbook.org.ns.docbook.functions.gentext,3">f:gentext()</a>, <a href="#S-28936-docbook.org.ns.docbook.functions.is-true,1">f:is-true()</a></div><div class="mode">Mode: <code>m:chunk-output</code></div><div class="matches">Matches: <code>h:nav</code></div></div></div><div id="S-21031-t-5" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ element()</div><div class="props"><div class="mode">Mode: <code>m:chunk-output</code></div><div class="matches">Matches: <code>element()</code></div></div></div><div id="S-21031-t-6" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ attribute()|comment()|processi…</div><div class="props"><div class="mode">Mode: <code>m:chunk-output</code></div><div class="matches">Matches: <code>attribute()</code>, <code>comment()</code>, <code>processing-instruction()</code>, <code>text()</code></div></div></div><div id="S-21031-t-7" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ h:a</div><div class="props"><div class="calls">Calls: <a href="#S-21031-docbook.org.ns.docbook.functions.private.patch-toc-href,2">fp:patch-toc-href()</a></div><div class="mode">Mode: <code>mp:copy-patch-toc</code></div><div class="matches">Matches: <code>h:a</code></div></div></div><div id="S-21031-t-8" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ element()</div><div class="props"><div class="mode">Mode: <code>mp:copy-patch-toc</code></div><div class="matches">Matches: <code>element()</code></div></div></div><div id="S-21031-t-9" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ attribute()|comment()|processi…</div><div class="props"><div class="mode">Mode: <code>mp:copy-patch-toc</code></div><div class="matches">Matches: <code>attribute()</code>, <code>comment()</code>, <code>processing-instruction()</code>, <code>text()</code></div></div></div><div id="S-21031-docbook.org.ns.docbook.functions.private.patch-toc-href,2" class="instruction function"><div class="title"><span class="link"></span>Function fp:patch-toc-href($here as element(), $href as xs:string)</div><div class="props"><div class="uses">Uses: <a href="#S-23412-docbook.org.ns.docbook.variables.debug">$v:debug</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-21031-t-7">template</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-21031">modules/chunk-output.xsl</a></div></div></div></div></div><div class="source-code"><div class="title closed">Source code</div><div class="body"><div><table><tr><td valign="top" align="right"><pre class="fake-prism"><span id="line-S-21031-1">1</span>
<span id="line-S-21031-2"><span class="lno">2</span></span>
<span id="line-S-21031-3"><span class="lno">3</span></span>
<span id="line-S-21031-4"><span class="lno">4</span></span>
<span id="line-S-21031-5">5</span>
<span id="line-S-21031-6"><span class="lno">6</span></span>
<span id="line-S-21031-7"><span class="lno">7</span></span>
<span id="line-S-21031-8"><span class="lno">8</span></span>
<span id="line-S-21031-9"><span class="lno">9</span></span>
<span id="line-S-21031-10">10</span>
<span id="line-S-21031-11"><span class="lno">11</span></span>
<span id="line-S-21031-12"><span class="lno">12</span></span>
<span id="line-S-21031-13"><span class="lno">13</span></span>
<span id="line-S-21031-14"><span class="lno">14</span></span>
<span id="line-S-21031-15">15</span>
<span id="line-S-21031-16"><span class="lno">16</span></span>
<span id="line-S-21031-17"><span class="lno">17</span></span>
<span id="line-S-21031-18"><span class="lno">18</span></span>
<span id="line-S-21031-19"><span class="lno">19</span></span>
<span id="line-S-21031-20">20</span>
<span id="line-S-21031-21"><span class="lno">21</span></span>
<span id="line-S-21031-22"><span class="lno">22</span></span>
<span id="line-S-21031-23"><span class="lno">23</span></span>
<span id="line-S-21031-24"><span class="lno">24</span></span>
<span id="line-S-21031-25">25</span>
<span id="line-S-21031-26"><span class="lno">26</span></span>
<span id="line-S-21031-27"><span class="lno">27</span></span>
<span id="line-S-21031-28"><span class="lno">28</span></span>
<span id="line-S-21031-29"><span class="lno">29</span></span>
<span id="line-S-21031-30">30</span>
<span id="line-S-21031-31"><span class="lno">31</span></span>
<span id="line-S-21031-32"><span class="lno">32</span></span>
<span id="line-S-21031-33"><span class="lno">33</span></span>
<span id="line-S-21031-34"><span class="lno">34</span></span>
<span id="line-S-21031-35">35</span>
<span id="line-S-21031-36"><span class="lno">36</span></span>
<span id="line-S-21031-37"><span class="lno">37</span></span>
<span id="line-S-21031-38"><span class="lno">38</span></span>
<span id="line-S-21031-39"><span class="lno">39</span></span>
<span id="line-S-21031-40">40</span>
<span id="line-S-21031-41"><span class="lno">41</span></span>
<span id="line-S-21031-42"><span class="lno">42</span></span>
<span id="line-S-21031-43"><span class="lno">43</span></span>
<span id="line-S-21031-44"><span class="lno">44</span></span>
<span id="line-S-21031-45">45</span>
<span id="line-S-21031-46"><span class="lno">46</span></span>
<span id="line-S-21031-47"><span class="lno">47</span></span>
<span id="line-S-21031-48"><span class="lno">48</span></span>
<span id="line-S-21031-49"><span class="lno">49</span></span>
<span id="line-S-21031-50">50</span>
<span id="line-S-21031-51"><span class="lno">51</span></span>
<span id="line-S-21031-52"><span class="lno">52</span></span>
<span id="line-S-21031-53"><span class="lno">53</span></span>
<span id="line-S-21031-54"><span class="lno">54</span></span>
<span id="line-S-21031-55">55</span>
<span id="line-S-21031-56"><span class="lno">56</span></span>
<span id="line-S-21031-57"><span class="lno">57</span></span>
<span id="line-S-21031-58"><span class="lno">58</span></span>
<span id="line-S-21031-59"><span class="lno">59</span></span>
<span id="line-S-21031-60">60</span>
<span id="line-S-21031-61"><span class="lno">61</span></span>
<span id="line-S-21031-62"><span class="lno">62</span></span>
<span id="line-S-21031-63"><span class="lno">63</span></span>
<span id="line-S-21031-64"><span class="lno">64</span></span>
<span id="line-S-21031-65">65</span>
<span id="line-S-21031-66"><span class="lno">66</span></span>
<span id="line-S-21031-67"><span class="lno">67</span></span>
<span id="line-S-21031-68"><span class="lno">68</span></span>
<span id="line-S-21031-69"><span class="lno">69</span></span>
<span id="line-S-21031-70">70</span>
<span id="line-S-21031-71"><span class="lno">71</span></span>
<span id="line-S-21031-72"><span class="lno">72</span></span>
<span id="line-S-21031-73"><span class="lno">73</span></span>
<span id="line-S-21031-74"><span class="lno">74</span></span>
<span id="line-S-21031-75">75</span>
<span id="line-S-21031-76"><span class="lno">76</span></span>
<span id="line-S-21031-77"><span class="lno">77</span></span>
<span id="line-S-21031-78"><span class="lno">78</span></span>
<span id="line-S-21031-79"><span class="lno">79</span></span>
<span id="line-S-21031-80">80</span>
<span id="line-S-21031-81"><span class="lno">81</span></span>
<span id="line-S-21031-82"><span class="lno">82</span></span>
<span id="line-S-21031-83"><span class="lno">83</span></span>
<span id="line-S-21031-84"><span class="lno">84</span></span>
<span id="line-S-21031-85">85</span>
<span id="line-S-21031-86"><span class="lno">86</span></span>
<span id="line-S-21031-87"><span class="lno">87</span></span>
<span id="line-S-21031-88"><span class="lno">88</span></span>
<span id="line-S-21031-89"><span class="lno">89</span></span>
<span id="line-S-21031-90">90</span>
<span id="line-S-21031-91"><span class="lno">91</span></span>
<span id="line-S-21031-92"><span class="lno">92</span></span>
<span id="line-S-21031-93"><span class="lno">93</span></span>
<span id="line-S-21031-94"><span class="lno">94</span></span>
<span id="line-S-21031-95">95</span>
<span id="line-S-21031-96"><span class="lno">96</span></span>
<span id="line-S-21031-97"><span class="lno">97</span></span>
<span id="line-S-21031-98"><span class="lno">98</span></span>
<span id="line-S-21031-99"><span class="lno">99</span></span>
<span id="line-S-21031-100">100</span>
<span id="line-S-21031-101"><span class="lno">101</span></span>
<span id="line-S-21031-102"><span class="lno">102</span></span>
<span id="line-S-21031-103"><span class="lno">103</span></span>
<span id="line-S-21031-104"><span class="lno">104</span></span>
<span id="line-S-21031-105">105</span>
<span id="line-S-21031-106"><span class="lno">106</span></span>
<span id="line-S-21031-107"><span class="lno">107</span></span>
<span id="line-S-21031-108"><span class="lno">108</span></span>
<span id="line-S-21031-109"><span class="lno">109</span></span>
<span id="line-S-21031-110">110</span>
<span id="line-S-21031-111"><span class="lno">111</span></span>
<span id="line-S-21031-112"><span class="lno">112</span></span>
<span id="line-S-21031-113"><span class="lno">113</span></span>
<span id="line-S-21031-114"><span class="lno">114</span></span>
<span id="line-S-21031-115">115</span>
<span id="line-S-21031-116"><span class="lno">116</span></span>
<span id="line-S-21031-117"><span class="lno">117</span></span>
<span id="line-S-21031-118"><span class="lno">118</span></span>
<span id="line-S-21031-119"><span class="lno">119</span></span>
<span id="line-S-21031-120">120</span>
<span id="line-S-21031-121"><span class="lno">121</span></span>
<span id="line-S-21031-122"><span class="lno">122</span></span>
<span id="line-S-21031-123"><span class="lno">123</span></span>
<span id="line-S-21031-124"><span class="lno">124</span></span>
<span id="line-S-21031-125">125</span>
<span id="line-S-21031-126"><span class="lno">126</span></span>
<span id="line-S-21031-127"><span class="lno">127</span></span>
<span id="line-S-21031-128"><span class="lno">128</span></span>
<span id="line-S-21031-129"><span class="lno">129</span></span>
<span id="line-S-21031-130">130</span>
<span id="line-S-21031-131"><span class="lno">131</span></span>
<span id="line-S-21031-132"><span class="lno">132</span></span>
<span id="line-S-21031-133"><span class="lno">133</span></span>
<span id="line-S-21031-134"><span class="lno">134</span></span>
<span id="line-S-21031-135">135</span>
<span id="line-S-21031-136"><span class="lno">136</span></span>
<span id="line-S-21031-137"><span class="lno">137</span></span>
<span id="line-S-21031-138"><span class="lno">138</span></span>
<span id="line-S-21031-139"><span class="lno">139</span></span>
<span id="line-S-21031-140">140</span>
<span id="line-S-21031-141"><span class="lno">141</span></span>
<span id="line-S-21031-142"><span class="lno">142</span></span>
<span id="line-S-21031-143"><span class="lno">143</span></span>
<span id="line-S-21031-144"><span class="lno">144</span></span>
<span id="line-S-21031-145">145</span>
<span id="line-S-21031-146"><span class="lno">146</span></span>
<span id="line-S-21031-147"><span class="lno">147</span></span>
<span id="line-S-21031-148"><span class="lno">148</span></span>
<span id="line-S-21031-149"><span class="lno">149</span></span>
<span id="line-S-21031-150">150</span>
<span id="line-S-21031-151"><span class="lno">151</span></span>
<span id="line-S-21031-152"><span class="lno">152</span></span>
<span id="line-S-21031-153"><span class="lno">153</span></span>
<span id="line-S-21031-154"><span class="lno">154</span></span>
<span id="line-S-21031-155">155</span>
<span id="line-S-21031-156"><span class="lno">156</span></span>
<span id="line-S-21031-157"><span class="lno">157</span></span>
<span id="line-S-21031-158"><span class="lno">158</span></span>
<span id="line-S-21031-159"><span class="lno">159</span></span>
<span id="line-S-21031-160">160</span>
<span id="line-S-21031-161"><span class="lno">161</span></span>
<span id="line-S-21031-162"><span class="lno">162</span></span>
<span id="line-S-21031-163"><span class="lno">163</span></span>
<span id="line-S-21031-164"><span class="lno">164</span></span>
<span id="line-S-21031-165">165</span>
<span id="line-S-21031-166"><span class="lno">166</span></span>
<span id="line-S-21031-167"><span class="lno">167</span></span>
<span id="line-S-21031-168"><span class="lno">168</span></span>
<span id="line-S-21031-169"><span class="lno">169</span></span>
<span id="line-S-21031-170">170</span>
<span id="line-S-21031-171"><span class="lno">171</span></span>
<span id="line-S-21031-172"><span class="lno">172</span></span>
<span id="line-S-21031-173"><span class="lno">173</span></span>
<span id="line-S-21031-174"><span class="lno">174</span></span>
<span id="line-S-21031-175">175</span>
<span id="line-S-21031-176"><span class="lno">176</span></span>
<span id="line-S-21031-177"><span class="lno">177</span></span>
<span id="line-S-21031-178"><span class="lno">178</span></span>
<span id="line-S-21031-179"><span class="lno">179</span></span>
<span id="line-S-21031-180">180</span>
<span id="line-S-21031-181"><span class="lno">181</span></span>
<span id="line-S-21031-182"><span class="lno">182</span></span>
<span id="line-S-21031-183"><span class="lno">183</span></span>
<span id="line-S-21031-184"><span class="lno">184</span></span>
<span id="line-S-21031-185">185</span>
<span id="line-S-21031-186"><span class="lno">186</span></span>
<span id="line-S-21031-187"><span class="lno">187</span></span>
<span id="line-S-21031-188"><span class="lno">188</span></span>
<span id="line-S-21031-189"><span class="lno">189</span></span>
<span id="line-S-21031-190">190</span>
<span id="line-S-21031-191"><span class="lno">191</span></span>
<span id="line-S-21031-192"><span class="lno">192</span></span>
<span id="line-S-21031-193"><span class="lno">193</span></span>
<span id="line-S-21031-194"><span class="lno">194</span></span>
<span id="line-S-21031-195">195</span>
<span id="line-S-21031-196"><span class="lno">196</span></span>
<span id="line-S-21031-197"><span class="lno">197</span></span>
<span id="line-S-21031-198"><span class="lno">198</span></span>
<span id="line-S-21031-199"><span class="lno">199</span></span>
<span id="line-S-21031-200">200</span>
<span id="line-S-21031-201"><span class="lno">201</span></span>
<span id="line-S-21031-202"><span class="lno">202</span></span>
<span id="line-S-21031-203"><span class="lno">203</span></span>
<span id="line-S-21031-204"><span class="lno">204</span></span>
<span id="line-S-21031-205">205</span>
<span id="line-S-21031-206"><span class="lno">206</span></span>
<span id="line-S-21031-207"><span class="lno">207</span></span>
<span id="line-S-21031-208"><span class="lno">208</span></span>
<span id="line-S-21031-209"><span class="lno">209</span></span>
<span id="line-S-21031-210">210</span>
<span id="line-S-21031-211"><span class="lno">211</span></span>
<span id="line-S-21031-212"><span class="lno">212</span></span>
<span id="line-S-21031-213"><span class="lno">213</span></span>
<span id="line-S-21031-214"><span class="lno">214</span></span>
<span id="line-S-21031-215">215</span>
<span id="line-S-21031-216"><span class="lno">216</span></span>
<span id="line-S-21031-217"><span class="lno">217</span></span>
<span id="line-S-21031-218"><span class="lno">218</span></span>
<span id="line-S-21031-219"><span class="lno">219</span></span>
<span id="line-S-21031-220">220</span>
<span id="line-S-21031-221"><span class="lno">221</span></span>
<span id="line-S-21031-222"><span class="lno">222</span></span>
<span id="line-S-21031-223"><span class="lno">223</span></span>
<span id="line-S-21031-224"><span class="lno">224</span></span>
<span id="line-S-21031-225">225</span>
<span id="line-S-21031-226"><span class="lno">226</span></span>
<span id="line-S-21031-227"><span class="lno">227</span></span>
<span id="line-S-21031-228"><span class="lno">228</span></span>
<span id="line-S-21031-229"><span class="lno">229</span></span>
<span id="line-S-21031-230">230</span>
<span id="line-S-21031-231"><span class="lno">231</span></span>
<span id="line-S-21031-232"><span class="lno">232</span></span>
<span id="line-S-21031-233"><span class="lno">233</span></span>
<span id="line-S-21031-234"><span class="lno">234</span></span>
<span id="line-S-21031-235">235</span>
<span id="line-S-21031-236"><span class="lno">236</span></span>
<span id="line-S-21031-237"><span class="lno">237</span></span>
<span id="line-S-21031-238"><span class="lno">238</span></span>
<span id="line-S-21031-239"><span class="lno">239</span></span>
<span id="line-S-21031-240">240</span>
<span id="line-S-21031-241"><span class="lno">241</span></span>
<span id="line-S-21031-242"><span class="lno">242</span></span>
<span id="line-S-21031-243"><span class="lno">243</span></span>
<span id="line-S-21031-244"><span class="lno">244</span></span>
<span id="line-S-21031-245">245</span>
<span id="line-S-21031-246"><span class="lno">246</span></span>
<span id="line-S-21031-247"><span class="lno">247</span></span>
<span id="line-S-21031-248"><span class="lno">248</span></span>
<span id="line-S-21031-249"><span class="lno">249</span></span>
<span id="line-S-21031-250">250</span>
<span id="line-S-21031-251"><span class="lno">251</span></span>
<span id="line-S-21031-252"><span class="lno">252</span></span>
<span id="line-S-21031-253"><span class="lno">253</span></span>
<span id="line-S-21031-254"><span class="lno">254</span></span>
<span id="line-S-21031-255">255</span>
<span id="line-S-21031-256"><span class="lno">256</span></span>
<span id="line-S-21031-257"><span class="lno">257</span></span>
<span id="line-S-21031-258"><span class="lno">258</span></span>
<span id="line-S-21031-259"><span class="lno">259</span></span>
<span id="line-S-21031-260">260</span>
</pre></td><td valign="top"><pre><code class="language-xml">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                xmlns:db="http://docbook.org/ns/docbook"
                xmlns:dbe="http://docbook.org/ns/docbook/errors"
                xmlns:f="http://docbook.org/ns/docbook/functions"
                xmlns:fp="http://docbook.org/ns/docbook/functions/private"
                xmlns:h="http://www.w3.org/1999/xhtml"
                xmlns:m="http://docbook.org/ns/docbook/modes"
                xmlns:mp="http://docbook.org/ns/docbook/modes/private"
                xmlns:t="http://docbook.org/ns/docbook/templates"
                xmlns:v="http://docbook.org/ns/docbook/variables"
                xmlns:xs="http://www.w3.org/2001/XMLSchema"
                xmlns="http://www.w3.org/1999/xhtml"
                default-mode="m:chunk-output"
                exclude-result-prefixes="db dbe f fp h m mp t v xs"
                version="3.0"&gt;

&lt;xsl:template match="/" as="map(xs:string, item()*)"&gt;
  &lt;xsl:choose&gt;
    &lt;xsl:when test="not($v:chunk)"&gt;
      &lt;xsl:variable name="result"&gt;
        &lt;xsl:choose&gt;
          &lt;xsl:when test="/h:html/h:html"&gt;
            &lt;xsl:apply-templates select="/h:html/h:html"/&gt;
          &lt;/xsl:when&gt;
          &lt;xsl:otherwise&gt;
            &lt;xsl:sequence select="."/&gt;
          &lt;/xsl:otherwise&gt;
        &lt;/xsl:choose&gt;
      &lt;/xsl:variable&gt;
      &lt;xsl:sequence select="map {'output': $result}"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:map&gt;
        &lt;xsl:apply-templates select="/h:html//h:html"&gt;
          &lt;xsl:with-param name="map" select="true()"/&gt;
        &lt;/xsl:apply-templates&gt;
      &lt;/xsl:map&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="h:html[@db-chunk]"&gt;
  &lt;xsl:param name="map" as="xs:boolean" select="false()"/&gt;

  &lt;xsl:variable name="copy-attributes"
                select="@* except @*[starts-with(local-name(.), 'db-')]"/&gt;

  &lt;xsl:choose&gt;
    &lt;xsl:when test="not($v:chunk)"&gt;
      &lt;xsl:copy&gt;
        &lt;xsl:apply-templates select="$copy-attributes"/&gt;
        &lt;xsl:apply-templates/&gt;
      &lt;/xsl:copy&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="not($map)"/&gt;
    &lt;xsl:when test="@db-chunk != ''"&gt;
      &lt;xsl:if test="'chunks' = $v:debug"&gt;
        &lt;xsl:message select="'Chunk:', @db-chunk/string()"/&gt;
      &lt;/xsl:if&gt;
      &lt;xsl:map-entry key="@db-chunk/string()"&gt;
        &lt;xsl:copy&gt;
          &lt;xsl:apply-templates select="$copy-attributes"/&gt;
          &lt;xsl:apply-templates/&gt;
        &lt;/xsl:copy&gt;
      &lt;/xsl:map-entry&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:copy&gt;
        &lt;xsl:apply-templates select="$copy-attributes"/&gt;
        &lt;xsl:apply-templates/&gt;
      &lt;/xsl:copy&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="h:div[@db-chunk]"&gt;
  &lt;xsl:variable name="copy-attributes"
                select="@* except @*[starts-with(local-name(.), 'db-')]"/&gt;

  &lt;xsl:choose&gt;
    &lt;xsl:when test="empty($copy-attributes)"&gt;
      &lt;xsl:apply-templates/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:copy&gt;
        &lt;xsl:apply-templates select="$copy-attributes"/&gt;
        &lt;xsl:apply-templates/&gt;
      &lt;/xsl:copy&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="h:nav[contains-token(@class, 'bottom')]"&gt;
  &lt;xsl:copy&gt;
    &lt;xsl:apply-templates select="@*,node()"/&gt;

    &lt;xsl:if test="f:is-true($persistent-toc)"&gt;
      &lt;!-- N.B. This is cheating slightly. The completely clean way to do
           this would be to add the ToC elements during the chunk-cleanup pass,
           but on big document, that can result in tens of megabytes of extra
           data as the whole ToC is repeated in every chunk. Since we know what's
           in the ToC, we know it'll be safe to cheat...
      --&gt;
      &lt;nav class="tocopen"/&gt;
      &lt;nav class="toc"/&gt;
      &lt;xsl:comment&gt; Hide ToC details from user agents that don’t support JS &lt;/xsl:comment&gt;
      &lt;script type="text/html" class="tocopen"&gt;
        &lt;xsl:sequence select="$v:toc-open"/&gt;
      &lt;/script&gt;
      &lt;script type="text/html" class="toc"&gt;
        &lt;header&gt;
          &lt;span&gt;
            &lt;xsl:sequence select="f:gentext(., 'title', 'tableofcontents')"/&gt;
          &lt;/span&gt;
          &lt;span class="close"&gt;
            &lt;xsl:sequence select="$v:toc-close"/&gt;
          &lt;/span&gt;
          &lt;xsl:if test="$persistent-toc-search"&gt;
            &lt;p class="ptoc-search"&gt;
              &lt;input class="ptoc-search" placeholder="Search" style="width: 80%"/&gt;
            &lt;/p&gt;
          &lt;/xsl:if&gt;
        &lt;/header&gt;
        &lt;div&gt;
          &lt;!-- If this chunk and the "root" chunk are in different directories,
               work out what prefix (how many '../') is required to get back
               to the root level. Prefix all of the relative URIs in the ToC
               with that prefix so the links will work.
          --&gt;
          &lt;xsl:variable name="docroot" select="/h:html/h:html/@db-chunk/string()"/&gt;
          &lt;xsl:variable name="chroot"
                        select="ancestor-or-self::h:html[@db-chunk][1]/@db-chunk/string()"/&gt;
          &lt;xsl:variable name="rel"
                        select="fp:trim-common-prefix($chroot, $docroot)"/&gt;

          &lt;xsl:variable name="parts" select="tokenize($rel, '/')"/&gt;
          &lt;xsl:variable name="ancestors" as="xs:string*"&gt;
            &lt;xsl:for-each select="2 to count($parts)"&gt;
              &lt;xsl:sequence select="'..'"/&gt;
            &lt;/xsl:for-each&gt;
          &lt;/xsl:variable&gt;
          &lt;xsl:variable name="path"
                        select="if (exists($ancestors))
                                then string-join($ancestors, '/') || '/'
                                else ''"/&gt;

          &lt;xsl:variable name="list-of-titles"
                        select="(//h:div[contains-token(@class, 'list-of-titles')])[1]"/&gt;
          &lt;xsl:apply-templates
              select="$list-of-titles/h:div[contains-token(@class, 'toc')]/h:ul"
              mode="mp:copy-patch-toc"&gt;
            &lt;xsl:with-param name="source" select="."/&gt;
            &lt;xsl:with-param name="prefix" select="$path"/&gt;
          &lt;/xsl:apply-templates&gt;
        &lt;/div&gt;
      &lt;/script&gt;
    &lt;/xsl:if&gt;
  &lt;/xsl:copy&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="element()"&gt;
  &lt;xsl:copy&gt;
    &lt;xsl:apply-templates select="@*,node()"/&gt;
  &lt;/xsl:copy&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="attribute()|text()|comment()|processing-instruction()"
             &gt;
  &lt;xsl:copy/&gt;
&lt;/xsl:template&gt;

&lt;!-- ============================================================ --&gt;

&lt;xsl:template match="h:a[@href]" mode="mp:copy-patch-toc"&gt;
  &lt;xsl:param name="source" as="element()"/&gt;
  &lt;xsl:param name="prefix" as="xs:string"/&gt;

  &lt;xsl:variable name="href" as="xs:string"&gt;
    &lt;xsl:choose&gt;
      &lt;xsl:when test="starts-with(@href, '#')"&gt;
        &lt;xsl:sequence select="fp:patch-toc-href($source, @href/string())"/&gt;
      &lt;/xsl:when&gt;
      &lt;xsl:otherwise&gt;
        &lt;xsl:sequence select="@href/string()"/&gt;
      &lt;/xsl:otherwise&gt;
    &lt;/xsl:choose&gt;
  &lt;/xsl:variable&gt;

  &lt;xsl:copy&gt;
    &lt;xsl:copy-of select="@* except @href"/&gt;
    &lt;xsl:attribute name="href" select="concat($prefix, $href)"/&gt;
    &lt;xsl:apply-templates select="node()" mode="mp:copy-patch-toc"&gt;
      &lt;xsl:with-param name="source" select="$source"/&gt;
      &lt;xsl:with-param name="prefix" select="$prefix"/&gt;
    &lt;/xsl:apply-templates&gt;
  &lt;/xsl:copy&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="element()" mode="mp:copy-patch-toc"&gt;
  &lt;xsl:param name="source" as="element()"/&gt;
  &lt;xsl:param name="prefix" as="xs:string"/&gt;
  &lt;xsl:copy&gt;
    &lt;xsl:apply-templates select="@*,node()" mode="mp:copy-patch-toc"&gt;
      &lt;xsl:with-param name="source" select="$source"/&gt;
      &lt;xsl:with-param name="prefix" select="$prefix"/&gt;
    &lt;/xsl:apply-templates&gt;
  &lt;/xsl:copy&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="attribute()|text()|comment()|processing-instruction()"
              mode="mp:copy-patch-toc"&gt;
  &lt;xsl:param name="source" as="element()"/&gt;
  &lt;xsl:param name="prefix" as="xs:string"/&gt;
  &lt;xsl:copy/&gt;
&lt;/xsl:template&gt;

&lt;xsl:function name="fp:patch-toc-href"&gt;
  &lt;xsl:param name="here" as="element()"/&gt;
  &lt;xsl:param name="href" as="xs:string"/&gt;

  &lt;xsl:variable name="id" select="substring-after($href, '#')"/&gt;
  &lt;xsl:variable name="target" select="key('hid', $id, root($here))"/&gt;
  &lt;xsl:variable name="pchunk"
                select="($here/ancestor::*[@db-chunk])[last()]"/&gt;
  &lt;xsl:variable name="tchunk"
                select="($target/ancestor-or-self::*[@db-chunk])[last()]"/&gt;

  &lt;xsl:choose&gt;
    &lt;xsl:when test="empty($target)"&gt;
      &lt;!-- this will already have been reported --&gt;
      &lt;xsl:sequence select="$href"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="$pchunk is $tchunk"&gt;
      &lt;xsl:if test="'intra-chunk-refs' = $v:debug"&gt;
        &lt;xsl:message select="'ToC link:', $href, 'in same chunk as target'"/&gt;
      &lt;/xsl:if&gt;
      &lt;xsl:sequence select="$href"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="$tchunk/@id = $id"&gt;
      &lt;xsl:if test="'intra-chunk-refs' = $v:debug"&gt;
        &lt;xsl:message select="'ToC link:', $href,
                             'to root of', $tchunk/@db-chunk/string()"/&gt;
      &lt;/xsl:if&gt;
      &lt;xsl:sequence select="fp:relative-link($pchunk, $tchunk)"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:if test="'intra-chunk-refs' = $v:debug"&gt;
        &lt;xsl:message select="'ToC link:', $href,
                             'in chunk', $tchunk/@db-chunk/string()"/&gt;
      &lt;/xsl:if&gt;
      &lt;xsl:sequence select="fp:relative-link($pchunk, $tchunk)||$href"/&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:function&gt;

&lt;!-- ============================================================ --&gt;

&lt;/xsl:stylesheet&gt;
</code></pre></td></tr></table></div></div></div></div><p><span><span class="template all">2 templates</span></span></p><div class="instructions"><div class="title closed">Instructions</div><div class="body"><div id="S-6566-t-1" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ /</div><div class="props"><div class="uses">Uses: <a href="#S-23412-docbook.org.ns.docbook.variables.private.js-controls">$vp:js-controls</a>, <a href="#S-23412-docbook.org.ns.docbook.variables.annotation-close">$v:annotation-close</a>, <a href="#S-26643-..annotations-js">$annotations-js</a>, <a href="#S-26643-..chunk">$chunk</a>, <a href="#S-26643-..chunk-nav">$chunk-nav</a>, <a href="#S-26643-..chunk-nav-js">$chunk-nav-js</a>, <a href="#S-26643-..control-js">$control-js</a>, <a href="#S-26643-..mathml-js">$mathml-js</a>, <a href="#S-26643-..persistent-toc-js">$persistent-toc-js</a>, <a href="#S-26643-..resource-base-uri">$resource-base-uri</a>, <a href="#S-26643-..theme-picker">$theme-picker</a>, <a href="#S-26643-..xlink-icon-closed">$xlink-icon-closed</a>, <a href="#S-26643-..xlink-icon-open">$xlink-icon-open</a>, <a href="#S-26643-..xlink-js">$xlink-js</a></div><div class="calls">Calls: <a href="#S-59718-docbook.org.ns.docbook.functions.private.chunk-navigation,1">fp:chunk-navigation()</a>, <a href="#S-28936-docbook.org.ns.docbook.functions.is-true,1">f:is-true()</a>, <a href="#S-29523-docbook.org.ns.docbook.functions.xlink-style,1">f:xlink-style()</a></div><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>/</code></div></div></div><div id="S-6566-t-2" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ text()</div><div class="props"><div class="mode">Mode: <code>m:docbook</code></div><div class="matches">Matches: <code>text()</code></div></div></div></div></div><div class="source-code"><div class="title closed">Source code</div><div class="body"><div><table><tr><td valign="top" align="right"><pre class="fake-prism"><span id="line-S-6566-1">1</span>
<span id="line-S-6566-2"><span class="lno">2</span></span>
<span id="line-S-6566-3"><span class="lno">3</span></span>
<span id="line-S-6566-4"><span class="lno">4</span></span>
<span id="line-S-6566-5">5</span>
<span id="line-S-6566-6"><span class="lno">6</span></span>
<span id="line-S-6566-7"><span class="lno">7</span></span>
<span id="line-S-6566-8"><span class="lno">8</span></span>
<span id="line-S-6566-9"><span class="lno">9</span></span>
<span id="line-S-6566-10">10</span>
<span id="line-S-6566-11"><span class="lno">11</span></span>
<span id="line-S-6566-12"><span class="lno">12</span></span>
<span id="line-S-6566-13"><span class="lno">13</span></span>
<span id="line-S-6566-14"><span class="lno">14</span></span>
<span id="line-S-6566-15">15</span>
<span id="line-S-6566-16"><span class="lno">16</span></span>
<span id="line-S-6566-17"><span class="lno">17</span></span>
<span id="line-S-6566-18"><span class="lno">18</span></span>
<span id="line-S-6566-19"><span class="lno">19</span></span>
<span id="line-S-6566-20">20</span>
<span id="line-S-6566-21"><span class="lno">21</span></span>
<span id="line-S-6566-22"><span class="lno">22</span></span>
<span id="line-S-6566-23"><span class="lno">23</span></span>
<span id="line-S-6566-24"><span class="lno">24</span></span>
<span id="line-S-6566-25">25</span>
<span id="line-S-6566-26"><span class="lno">26</span></span>
<span id="line-S-6566-27"><span class="lno">27</span></span>
<span id="line-S-6566-28"><span class="lno">28</span></span>
<span id="line-S-6566-29"><span class="lno">29</span></span>
<span id="line-S-6566-30">30</span>
<span id="line-S-6566-31"><span class="lno">31</span></span>
<span id="line-S-6566-32"><span class="lno">32</span></span>
<span id="line-S-6566-33"><span class="lno">33</span></span>
<span id="line-S-6566-34"><span class="lno">34</span></span>
<span id="line-S-6566-35">35</span>
<span id="line-S-6566-36"><span class="lno">36</span></span>
<span id="line-S-6566-37"><span class="lno">37</span></span>
<span id="line-S-6566-38"><span class="lno">38</span></span>
<span id="line-S-6566-39"><span class="lno">39</span></span>
<span id="line-S-6566-40">40</span>
<span id="line-S-6566-41"><span class="lno">41</span></span>
<span id="line-S-6566-42"><span class="lno">42</span></span>
<span id="line-S-6566-43"><span class="lno">43</span></span>
<span id="line-S-6566-44"><span class="lno">44</span></span>
<span id="line-S-6566-45">45</span>
<span id="line-S-6566-46"><span class="lno">46</span></span>
<span id="line-S-6566-47"><span class="lno">47</span></span>
<span id="line-S-6566-48"><span class="lno">48</span></span>
<span id="line-S-6566-49"><span class="lno">49</span></span>
<span id="line-S-6566-50">50</span>
<span id="line-S-6566-51"><span class="lno">51</span></span>
<span id="line-S-6566-52"><span class="lno">52</span></span>
<span id="line-S-6566-53"><span class="lno">53</span></span>
<span id="line-S-6566-54"><span class="lno">54</span></span>
<span id="line-S-6566-55">55</span>
<span id="line-S-6566-56"><span class="lno">56</span></span>
<span id="line-S-6566-57"><span class="lno">57</span></span>
<span id="line-S-6566-58"><span class="lno">58</span></span>
<span id="line-S-6566-59"><span class="lno">59</span></span>
<span id="line-S-6566-60">60</span>
<span id="line-S-6566-61"><span class="lno">61</span></span>
<span id="line-S-6566-62"><span class="lno">62</span></span>
<span id="line-S-6566-63"><span class="lno">63</span></span>
<span id="line-S-6566-64"><span class="lno">64</span></span>
<span id="line-S-6566-65">65</span>
<span id="line-S-6566-66"><span class="lno">66</span></span>
<span id="line-S-6566-67"><span class="lno">67</span></span>
<span id="line-S-6566-68"><span class="lno">68</span></span>
<span id="line-S-6566-69"><span class="lno">69</span></span>
<span id="line-S-6566-70">70</span>
<span id="line-S-6566-71"><span class="lno">71</span></span>
<span id="line-S-6566-72"><span class="lno">72</span></span>
<span id="line-S-6566-73"><span class="lno">73</span></span>
<span id="line-S-6566-74"><span class="lno">74</span></span>
<span id="line-S-6566-75">75</span>
<span id="line-S-6566-76"><span class="lno">76</span></span>
<span id="line-S-6566-77"><span class="lno">77</span></span>
<span id="line-S-6566-78"><span class="lno">78</span></span>
<span id="line-S-6566-79"><span class="lno">79</span></span>
<span id="line-S-6566-80">80</span>
<span id="line-S-6566-81"><span class="lno">81</span></span>
<span id="line-S-6566-82"><span class="lno">82</span></span>
<span id="line-S-6566-83"><span class="lno">83</span></span>
<span id="line-S-6566-84"><span class="lno">84</span></span>
<span id="line-S-6566-85">85</span>
<span id="line-S-6566-86"><span class="lno">86</span></span>
<span id="line-S-6566-87"><span class="lno">87</span></span>
<span id="line-S-6566-88"><span class="lno">88</span></span>
<span id="line-S-6566-89"><span class="lno">89</span></span>
<span id="line-S-6566-90">90</span>
<span id="line-S-6566-91"><span class="lno">91</span></span>
<span id="line-S-6566-92"><span class="lno">92</span></span>
<span id="line-S-6566-93"><span class="lno">93</span></span>
<span id="line-S-6566-94"><span class="lno">94</span></span>
<span id="line-S-6566-95">95</span>
<span id="line-S-6566-96"><span class="lno">96</span></span>
<span id="line-S-6566-97"><span class="lno">97</span></span>
<span id="line-S-6566-98"><span class="lno">98</span></span>
<span id="line-S-6566-99"><span class="lno">99</span></span>
<span id="line-S-6566-100">100</span>
<span id="line-S-6566-101"><span class="lno">101</span></span>
<span id="line-S-6566-102"><span class="lno">102</span></span>
<span id="line-S-6566-103"><span class="lno">103</span></span>
<span id="line-S-6566-104"><span class="lno">104</span></span>
<span id="line-S-6566-105">105</span>
<span id="line-S-6566-106"><span class="lno">106</span></span>
<span id="line-S-6566-107"><span class="lno">107</span></span>
<span id="line-S-6566-108"><span class="lno">108</span></span>
<span id="line-S-6566-109"><span class="lno">109</span></span>
<span id="line-S-6566-110">110</span>
<span id="line-S-6566-111"><span class="lno">111</span></span>
<span id="line-S-6566-112"><span class="lno">112</span></span>
<span id="line-S-6566-113"><span class="lno">113</span></span>
<span id="line-S-6566-114"><span class="lno">114</span></span>
<span id="line-S-6566-115">115</span>
<span id="line-S-6566-116"><span class="lno">116</span></span>
<span id="line-S-6566-117"><span class="lno">117</span></span>
<span id="line-S-6566-118"><span class="lno">118</span></span>
<span id="line-S-6566-119"><span class="lno">119</span></span>
<span id="line-S-6566-120">120</span>
<span id="line-S-6566-121"><span class="lno">121</span></span>
<span id="line-S-6566-122"><span class="lno">122</span></span>
<span id="line-S-6566-123"><span class="lno">123</span></span>
<span id="line-S-6566-124"><span class="lno">124</span></span>
<span id="line-S-6566-125">125</span>
<span id="line-S-6566-126"><span class="lno">126</span></span>
<span id="line-S-6566-127"><span class="lno">127</span></span>
<span id="line-S-6566-128"><span class="lno">128</span></span>
<span id="line-S-6566-129"><span class="lno">129</span></span>
<span id="line-S-6566-130">130</span>
<span id="line-S-6566-131"><span class="lno">131</span></span>
<span id="line-S-6566-132"><span class="lno">132</span></span>
<span id="line-S-6566-133"><span class="lno">133</span></span>
<span id="line-S-6566-134"><span class="lno">134</span></span>
<span id="line-S-6566-135">135</span>
<span id="line-S-6566-136"><span class="lno">136</span></span>
<span id="line-S-6566-137"><span class="lno">137</span></span>
<span id="line-S-6566-138"><span class="lno">138</span></span>
<span id="line-S-6566-139"><span class="lno">139</span></span>
<span id="line-S-6566-140">140</span>
</pre></td><td valign="top"><pre><code class="language-xml">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                xmlns:db="http://docbook.org/ns/docbook"
                xmlns:f="http://docbook.org/ns/docbook/functions"
                xmlns:fp="http://docbook.org/ns/docbook/functions/private"
                xmlns:h="http://www.w3.org/1999/xhtml"
                xmlns:m="http://docbook.org/ns/docbook/modes"
                xmlns:map="http://www.w3.org/2005/xpath-functions/map"
                xmlns:mp="http://docbook.org/ns/docbook/modes/private"
                xmlns:t="http://docbook.org/ns/docbook/templates"
                xmlns:v="http://docbook.org/ns/docbook/variables"
                xmlns:vp="http://docbook.org/ns/docbook/variables/private"
                xmlns:xs="http://www.w3.org/2001/XMLSchema"
                xmlns="http://www.w3.org/1999/xhtml"
                default-mode="m:docbook"
                exclude-result-prefixes="db f fp h m map mp t v vp xs"
                version="3.0"&gt;

&lt;xsl:output method="xhtml" encoding="utf-8" indent="no" html-version="5"
            omit-xml-declaration="yes"/&gt;

&lt;xsl:key name="id" match="*" use="@xml:id"/&gt;
&lt;xsl:key name="genid" match="*" use="generate-id(.)"/&gt;
&lt;xsl:key name="targetptr" match="*" use="@targetptr"/&gt;

&lt;xsl:import href="param.xsl"/&gt;
&lt;xsl:import href="parameter-maps.xsl"/&gt;
&lt;xsl:import href="VERSION.xsl"/&gt;
&lt;xsl:import href="modules/variable.xsl"/&gt;
&lt;xsl:import href="modules/space.xsl"/&gt;
&lt;xsl:import href="modules/unhandled.xsl"/&gt;
&lt;xsl:import href="modules/errors.xsl"/&gt;
&lt;xsl:import href="modules/head.xsl"/&gt;
&lt;xsl:import href="modules/titles.xsl"/&gt;
&lt;xsl:import href="modules/units.xsl"/&gt;
&lt;xsl:import href="modules/shared.xsl"/&gt;
&lt;xsl:import href="modules/gentext.xsl"/&gt;
&lt;xsl:import href="modules/functions.xsl"/&gt;
&lt;xsl:import href="modules/toc.xsl"/&gt;
&lt;xsl:import href="modules/divisions.xsl"/&gt;
&lt;xsl:import href="modules/components.xsl"/&gt;
&lt;xsl:import href="modules/refentry.xsl"/&gt;
&lt;xsl:import href="modules/bibliography.xsl"/&gt;
&lt;xsl:import href="modules/glossary.xsl"/&gt;
&lt;xsl:import href="modules/index.xsl"/&gt;
&lt;xsl:import href="modules/sections.xsl"/&gt;
&lt;xsl:import href="modules/templates.xsl"/&gt;
&lt;xsl:import href="modules/titlepage.xsl"/&gt;
&lt;xsl:import href="modules/info.xsl"/&gt;
&lt;xsl:import href="modules/lists.xsl"/&gt;
&lt;xsl:import href="modules/blocks.xsl"/&gt;
&lt;xsl:import href="modules/admonitions.xsl"/&gt;
&lt;xsl:import href="modules/programming.xsl"/&gt;
&lt;xsl:import href="modules/msgset.xsl"/&gt;
&lt;xsl:import href="modules/objects.xsl"/&gt;
&lt;xsl:import href="modules/footnotes.xsl"/&gt;
&lt;xsl:import href="modules/verbatim.xsl"/&gt;
&lt;xsl:import href="modules/tablecals.xsl"/&gt;
&lt;xsl:import href="modules/tablehtml.xsl"/&gt;
&lt;xsl:import href="modules/inlines.xsl"/&gt;
&lt;xsl:import href="modules/xlink.xsl"/&gt;
&lt;xsl:import href="modules/links.xsl"/&gt;
&lt;xsl:import href="modules/xref.xsl"/&gt;
&lt;xsl:import href="modules/attributes.xsl"/&gt;
&lt;xsl:import href="modules/publishers.xsl"/&gt;
&lt;xsl:import href="modules/annotations.xsl"/&gt;
&lt;xsl:import href="modules/profile.xsl"/&gt;
&lt;xsl:import href="modules/chunk.xsl"/&gt;
&lt;xsl:import href="modules/chunk-cleanup.xsl"/&gt;
&lt;xsl:import href="modules/chunk-output.xsl"/&gt;

&lt;xsl:template match="/" mode="m:docbook"&gt;
  &lt;xsl:document&gt;
    &lt;html&gt;
      &lt;xsl:attribute name="xml:base" select="base-uri(/*)"/&gt;
      &lt;xsl:apply-templates select="(/*/db:info,/*)[1]" mode="m:html-head"/&gt;
      &lt;!-- N.B. Any filename specified in a PI is ignored for the root --&gt;
      &lt;div db-chunk="{$chunk}"
           db-xlink="{f:xlink-style(/)}"&gt;
        &lt;xsl:sequence select="fp:chunk-navigation(/*)"/&gt;
        &lt;xsl:apply-templates/&gt;
      &lt;/div&gt;

      &lt;xsl:if test="f:is-true($theme-picker) and $vp:js-controls"&gt;
        &lt;db-script&gt;
          &lt;script type="text/html" id="db-js-controls"&gt;
            &lt;xsl:sequence select="$vp:js-controls"/&gt;
          &lt;/script&gt;
        &lt;/db-script&gt;
      &lt;/xsl:if&gt;

      &lt;!-- These get copied into the chunks that need them... --&gt;
      &lt;xsl:if test="exists($resource-base-uri)"&gt;
        &lt;db-annotation-script&gt;
          &lt;script type="text/html" class="annotation-close"&gt;
            &lt;xsl:sequence select="$v:annotation-close"/&gt;
          &lt;/script&gt;
          &lt;script src="{$resource-base-uri}{$annotations-js}"/&gt;
        &lt;/db-annotation-script&gt;
        &lt;db-xlink-script&gt;
          &lt;xsl:if test="$xlink-icon-open"&gt;
            &lt;script type="text/html" class="xlink-icon-open"&gt;
              &lt;xsl:sequence select="$xlink-icon-open"/&gt;
            &lt;/script&gt;
          &lt;/xsl:if&gt;
          &lt;xsl:if test="$xlink-icon-closed"&gt;
            &lt;script type="text/html" class="xlink-icon-closed"&gt;
              &lt;xsl:sequence select="$xlink-icon-closed"/&gt;
            &lt;/script&gt;
          &lt;/xsl:if&gt;
          &lt;script src="{$resource-base-uri}{$xlink-js}"/&gt;
        &lt;/db-xlink-script&gt;
        &lt;db-toc-script&gt;
          &lt;script src="{$resource-base-uri}{$persistent-toc-js}"/&gt;
        &lt;/db-toc-script&gt;
        &lt;db-mathml-script&gt;
          &lt;script src="{if (starts-with($mathml-js, 'http:')
                            or starts-with($mathml-js, 'https:'))
                        then $mathml-js
                        else $resource-base-uri || $mathml-js}"/&gt;
        &lt;/db-mathml-script&gt;
        &lt;db-script&gt;
          &lt;xsl:if test="exists($chunk) and f:is-true($chunk-nav)"&gt;
            &lt;script src="{$resource-base-uri}{$chunk-nav-js}"/&gt;
          &lt;/xsl:if&gt;
          &lt;xsl:if test="f:is-true($theme-picker) and $vp:js-controls"&gt;
            &lt;script src="{$resource-base-uri}{$control-js}"/&gt;
          &lt;/xsl:if&gt;
        &lt;/db-script&gt;
      &lt;/xsl:if&gt;
    &lt;/html&gt;
  &lt;/xsl:document&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="text()"&gt;
  &lt;xsl:copy/&gt;
&lt;/xsl:template&gt;

&lt;/xsl:stylesheet&gt;
</code></pre></td></tr></table></div></div></div></div><div class="stylesheet" id="S-46594"><h2>drivers.xsl</h2><p><span><span class="template all">6 templates</span> (<span class="template unused">1 unused</span>)</span></p><div class="instructions"><div class="title closed">Instructions</div><div class="body"><div id="S-46594-docbook.org.ns.docbook.templates.preprocess" class="instruction template"><div class="title"><span class="link"></span>Template t:preprocess  match ≅   as document-node()</div><div class="props"><div class="uses">Uses: <a href="#S-26643-..annotation-collection">$annotation-collection</a>, <a href="#S-26643-..annotation-placement">$annotation-placement</a>, <a href="#S-26643-..bibliography-collection">$bibliography-collection</a>, <a href="#S-26643-..docbook-transclusion">$docbook-transclusion</a>, <a href="#S-26643-..glossary-collection">$glossary-collection</a>, <a href="#S-26643-..local-conventions">$local-conventions</a>, <a href="#S-26643-..oxy-markup">$oxy-markup</a>, <a href="#S-26643-..relax-ng-grammar">$relax-ng-grammar</a>, <a href="#S-26643-..transclusion-prefix-separator">$transclusion-prefix-separator</a></div><div class="calls">Calls: <a href="#S-28936-docbook.org.ns.docbook.functions.is-true,1">f:is-true()</a>, <a href="#S-28936-docbook.org.ns.docbook.functions.pi,3">f:pi()</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-52707-docbook.org.ns.docbook.templates.private.docbook">tp:docbook</a>, <a href="#S-46594-docbook.org.ns.docbook.templates.docbook">t:docbook</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-52707">«root»</a>, <a href="#S-46594">drivers.xsl</a></div></div></div><div id="S-46594-docbook.org.ns.docbook.templates.process" class="instruction template"><div class="title"><span class="link"></span>Template t:process  match ≅   as document-node()</div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-52707-docbook.org.ns.docbook.templates.private.docbook">tp:docbook</a>, <a href="#S-46594-docbook.org.ns.docbook.templates.docbook">t:docbook</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-52707">«root»</a>, <a href="#S-46594">drivers.xsl</a></div></div></div><div id="S-46594-docbook.org.ns.docbook.templates.chunk-cleanup" class="instruction template"><div class="title"><span class="link"></span>Template t:chunk-cleanup  match ≅   as document-node()</div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-52707-docbook.org.ns.docbook.templates.private.docbook">tp:docbook</a>, <a href="#S-46594-docbook.org.ns.docbook.templates.postprocess">t:postprocess</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-52707">«root»</a>, <a href="#S-46594">drivers.xsl</a></div></div></div><div id="S-46594-docbook.org.ns.docbook.templates.chunk-output" class="instruction template"><div class="title"><span class="link"></span>Template t:chunk-output  match ≅   as map(xs:string, item()*)</div><div class="props"><div class="used-by"><span class="marker"></span>Used by: <a href="#S-52707-docbook.org.ns.docbook.templates.private.docbook">tp:docbook</a>, <a href="#S-46594-docbook.org.ns.docbook.templates.postprocess">t:postprocess</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-52707">«root»</a>, <a href="#S-46594">drivers.xsl</a></div></div></div><div id="S-46594-docbook.org.ns.docbook.templates.postprocess" class="instruction template"><div class="title"><span class="link"></span>Template t:postprocess  match ≅   as document-node()?</div><div class="props"><div class="calls">Calls: <a href="#S-46594-docbook.org.ns.docbook.templates.chunk-cleanup">t:chunk-cleanup</a>, <a href="#S-46594-docbook.org.ns.docbook.templates.chunk-output">t:chunk-output</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-46594-docbook.org.ns.docbook.templates.docbook">t:docbook</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-46594">drivers.xsl</a></div></div></div><div id="S-46594-docbook.org.ns.docbook.templates.docbook" class="instruction template unused"><div class="title"><span class="link"></span>Template t:docbook  match ≅ </div><div class="props"><div class="calls">Calls: <a href="#S-46594-docbook.org.ns.docbook.templates.postprocess">t:postprocess</a>, <a href="#S-46594-docbook.org.ns.docbook.templates.preprocess">t:preprocess</a>, <a href="#S-46594-docbook.org.ns.docbook.templates.process">t:process</a></div><div class="used-by"><span class="marker">☞</span><span class="unused">Unused</span></div></div></div></div></div><div class="source-code"><div class="title closed">Source code</div><div class="body"><div><table><tr><td valign="top" align="right"><pre class="fake-prism"><span id="line-S-46594-1">1</span>
<span id="line-S-46594-2"><span class="lno">2</span></span>
<span id="line-S-46594-3"><span class="lno">3</span></span>
<span id="line-S-46594-4"><span class="lno">4</span></span>
<span id="line-S-46594-5">5</span>
<span id="line-S-46594-6"><span class="lno">6</span></span>
<span id="line-S-46594-7"><span class="lno">7</span></span>
<span id="line-S-46594-8"><span class="lno">8</span></span>
<span id="line-S-46594-9"><span class="lno">9</span></span>
<span id="line-S-46594-10">10</span>
<span id="line-S-46594-11"><span class="lno">11</span></span>
<span id="line-S-46594-12"><span class="lno">12</span></span>
<span id="line-S-46594-13"><span class="lno">13</span></span>
<span id="line-S-46594-14"><span class="lno">14</span></span>
<span id="line-S-46594-15">15</span>
<span id="line-S-46594-16"><span class="lno">16</span></span>
<span id="line-S-46594-17"><span class="lno">17</span></span>
<span id="line-S-46594-18"><span class="lno">18</span></span>
<span id="line-S-46594-19"><span class="lno">19</span></span>
<span id="line-S-46594-20">20</span>
<span id="line-S-46594-21"><span class="lno">21</span></span>
<span id="line-S-46594-22"><span class="lno">22</span></span>
<span id="line-S-46594-23"><span class="lno">23</span></span>
<span id="line-S-46594-24"><span class="lno">24</span></span>
<span id="line-S-46594-25">25</span>
<span id="line-S-46594-26"><span class="lno">26</span></span>
<span id="line-S-46594-27"><span class="lno">27</span></span>
<span id="line-S-46594-28"><span class="lno">28</span></span>
<span id="line-S-46594-29"><span class="lno">29</span></span>
<span id="line-S-46594-30">30</span>
<span id="line-S-46594-31"><span class="lno">31</span></span>
<span id="line-S-46594-32"><span class="lno">32</span></span>
<span id="line-S-46594-33"><span class="lno">33</span></span>
<span id="line-S-46594-34"><span class="lno">34</span></span>
<span id="line-S-46594-35">35</span>
<span id="line-S-46594-36"><span class="lno">36</span></span>
<span id="line-S-46594-37"><span class="lno">37</span></span>
<span id="line-S-46594-38"><span class="lno">38</span></span>
<span id="line-S-46594-39"><span class="lno">39</span></span>
<span id="line-S-46594-40">40</span>
<span id="line-S-46594-41"><span class="lno">41</span></span>
<span id="line-S-46594-42"><span class="lno">42</span></span>
<span id="line-S-46594-43"><span class="lno">43</span></span>
<span id="line-S-46594-44"><span class="lno">44</span></span>
<span id="line-S-46594-45">45</span>
<span id="line-S-46594-46"><span class="lno">46</span></span>
<span id="line-S-46594-47"><span class="lno">47</span></span>
<span id="line-S-46594-48"><span class="lno">48</span></span>
<span id="line-S-46594-49"><span class="lno">49</span></span>
<span id="line-S-46594-50">50</span>
<span id="line-S-46594-51"><span class="lno">51</span></span>
<span id="line-S-46594-52"><span class="lno">52</span></span>
<span id="line-S-46594-53"><span class="lno">53</span></span>
<span id="line-S-46594-54"><span class="lno">54</span></span>
<span id="line-S-46594-55">55</span>
<span id="line-S-46594-56"><span class="lno">56</span></span>
<span id="line-S-46594-57"><span class="lno">57</span></span>
<span id="line-S-46594-58"><span class="lno">58</span></span>
<span id="line-S-46594-59"><span class="lno">59</span></span>
<span id="line-S-46594-60">60</span>
<span id="line-S-46594-61"><span class="lno">61</span></span>
<span id="line-S-46594-62"><span class="lno">62</span></span>
<span id="line-S-46594-63"><span class="lno">63</span></span>
<span id="line-S-46594-64"><span class="lno">64</span></span>
<span id="line-S-46594-65">65</span>
<span id="line-S-46594-66"><span class="lno">66</span></span>
<span id="line-S-46594-67"><span class="lno">67</span></span>
<span id="line-S-46594-68"><span class="lno">68</span></span>
<span id="line-S-46594-69"><span class="lno">69</span></span>
<span id="line-S-46594-70">70</span>
<span id="line-S-46594-71"><span class="lno">71</span></span>
<span id="line-S-46594-72"><span class="lno">72</span></span>
<span id="line-S-46594-73"><span class="lno">73</span></span>
<span id="line-S-46594-74"><span class="lno">74</span></span>
<span id="line-S-46594-75">75</span>
<span id="line-S-46594-76"><span class="lno">76</span></span>
<span id="line-S-46594-77"><span class="lno">77</span></span>
<span id="line-S-46594-78"><span class="lno">78</span></span>
<span id="line-S-46594-79"><span class="lno">79</span></span>
<span id="line-S-46594-80">80</span>
<span id="line-S-46594-81"><span class="lno">81</span></span>
<span id="line-S-46594-82"><span class="lno">82</span></span>
<span id="line-S-46594-83"><span class="lno">83</span></span>
<span id="line-S-46594-84"><span class="lno">84</span></span>
<span id="line-S-46594-85">85</span>
<span id="line-S-46594-86"><span class="lno">86</span></span>
<span id="line-S-46594-87"><span class="lno">87</span></span>
<span id="line-S-46594-88"><span class="lno">88</span></span>
<span id="line-S-46594-89"><span class="lno">89</span></span>
<span id="line-S-46594-90">90</span>
<span id="line-S-46594-91"><span class="lno">91</span></span>
<span id="line-S-46594-92"><span class="lno">92</span></span>
<span id="line-S-46594-93"><span class="lno">93</span></span>
<span id="line-S-46594-94"><span class="lno">94</span></span>
<span id="line-S-46594-95">95</span>
<span id="line-S-46594-96"><span class="lno">96</span></span>
<span id="line-S-46594-97"><span class="lno">97</span></span>
<span id="line-S-46594-98"><span class="lno">98</span></span>
<span id="line-S-46594-99"><span class="lno">99</span></span>
<span id="line-S-46594-100">100</span>
<span id="line-S-46594-101"><span class="lno">101</span></span>
<span id="line-S-46594-102"><span class="lno">102</span></span>
<span id="line-S-46594-103"><span class="lno">103</span></span>
<span id="line-S-46594-104"><span class="lno">104</span></span>
<span id="line-S-46594-105">105</span>
<span id="line-S-46594-106"><span class="lno">106</span></span>
<span id="line-S-46594-107"><span class="lno">107</span></span>
<span id="line-S-46594-108"><span class="lno">108</span></span>
<span id="line-S-46594-109"><span class="lno">109</span></span>
<span id="line-S-46594-110">110</span>
<span id="line-S-46594-111"><span class="lno">111</span></span>
<span id="line-S-46594-112"><span class="lno">112</span></span>
<span id="line-S-46594-113"><span class="lno">113</span></span>
<span id="line-S-46594-114"><span class="lno">114</span></span>
<span id="line-S-46594-115">115</span>
<span id="line-S-46594-116"><span class="lno">116</span></span>
<span id="line-S-46594-117"><span class="lno">117</span></span>
<span id="line-S-46594-118"><span class="lno">118</span></span>
<span id="line-S-46594-119"><span class="lno">119</span></span>
<span id="line-S-46594-120">120</span>
<span id="line-S-46594-121"><span class="lno">121</span></span>
<span id="line-S-46594-122"><span class="lno">122</span></span>
<span id="line-S-46594-123"><span class="lno">123</span></span>
<span id="line-S-46594-124"><span class="lno">124</span></span>
<span id="line-S-46594-125">125</span>
<span id="line-S-46594-126"><span class="lno">126</span></span>
<span id="line-S-46594-127"><span class="lno">127</span></span>
<span id="line-S-46594-128"><span class="lno">128</span></span>
<span id="line-S-46594-129"><span class="lno">129</span></span>
<span id="line-S-46594-130">130</span>
<span id="line-S-46594-131"><span class="lno">131</span></span>
<span id="line-S-46594-132"><span class="lno">132</span></span>
<span id="line-S-46594-133"><span class="lno">133</span></span>
<span id="line-S-46594-134"><span class="lno">134</span></span>
<span id="line-S-46594-135">135</span>
<span id="line-S-46594-136"><span class="lno">136</span></span>
<span id="line-S-46594-137"><span class="lno">137</span></span>
<span id="line-S-46594-138"><span class="lno">138</span></span>
<span id="line-S-46594-139"><span class="lno">139</span></span>
<span id="line-S-46594-140">140</span>
<span id="line-S-46594-141"><span class="lno">141</span></span>
<span id="line-S-46594-142"><span class="lno">142</span></span>
<span id="line-S-46594-143"><span class="lno">143</span></span>
<span id="line-S-46594-144"><span class="lno">144</span></span>
<span id="line-S-46594-145">145</span>
<span id="line-S-46594-146"><span class="lno">146</span></span>
<span id="line-S-46594-147"><span class="lno">147</span></span>
<span id="line-S-46594-148"><span class="lno">148</span></span>
<span id="line-S-46594-149"><span class="lno">149</span></span>
<span id="line-S-46594-150">150</span>
<span id="line-S-46594-151"><span class="lno">151</span></span>
<span id="line-S-46594-152"><span class="lno">152</span></span>
<span id="line-S-46594-153"><span class="lno">153</span></span>
<span id="line-S-46594-154"><span class="lno">154</span></span>
<span id="line-S-46594-155">155</span>
<span id="line-S-46594-156"><span class="lno">156</span></span>
<span id="line-S-46594-157"><span class="lno">157</span></span>
<span id="line-S-46594-158"><span class="lno">158</span></span>
<span id="line-S-46594-159"><span class="lno">159</span></span>
<span id="line-S-46594-160">160</span>
<span id="line-S-46594-161"><span class="lno">161</span></span>
<span id="line-S-46594-162"><span class="lno">162</span></span>
<span id="line-S-46594-163"><span class="lno">163</span></span>
<span id="line-S-46594-164"><span class="lno">164</span></span>
<span id="line-S-46594-165">165</span>
<span id="line-S-46594-166"><span class="lno">166</span></span>
<span id="line-S-46594-167"><span class="lno">167</span></span>
<span id="line-S-46594-168"><span class="lno">168</span></span>
<span id="line-S-46594-169"><span class="lno">169</span></span>
<span id="line-S-46594-170">170</span>
<span id="line-S-46594-171"><span class="lno">171</span></span>
<span id="line-S-46594-172"><span class="lno">172</span></span>
<span id="line-S-46594-173"><span class="lno">173</span></span>
<span id="line-S-46594-174"><span class="lno">174</span></span>
<span id="line-S-46594-175">175</span>
<span id="line-S-46594-176"><span class="lno">176</span></span>
<span id="line-S-46594-177"><span class="lno">177</span></span>
<span id="line-S-46594-178"><span class="lno">178</span></span>
<span id="line-S-46594-179"><span class="lno">179</span></span>
<span id="line-S-46594-180">180</span>
<span id="line-S-46594-181"><span class="lno">181</span></span>
<span id="line-S-46594-182"><span class="lno">182</span></span>
<span id="line-S-46594-183"><span class="lno">183</span></span>
<span id="line-S-46594-184"><span class="lno">184</span></span>
<span id="line-S-46594-185">185</span>
<span id="line-S-46594-186"><span class="lno">186</span></span>
<span id="line-S-46594-187"><span class="lno">187</span></span>
<span id="line-S-46594-188"><span class="lno">188</span></span>
<span id="line-S-46594-189"><span class="lno">189</span></span>
<span id="line-S-46594-190">190</span>
<span id="line-S-46594-191"><span class="lno">191</span></span>
<span id="line-S-46594-192"><span class="lno">192</span></span>
<span id="line-S-46594-193"><span class="lno">193</span></span>
<span id="line-S-46594-194"><span class="lno">194</span></span>
<span id="line-S-46594-195">195</span>
<span id="line-S-46594-196"><span class="lno">196</span></span>
<span id="line-S-46594-197"><span class="lno">197</span></span>
<span id="line-S-46594-198"><span class="lno">198</span></span>
<span id="line-S-46594-199"><span class="lno">199</span></span>
<span id="line-S-46594-200">200</span>
<span id="line-S-46594-201"><span class="lno">201</span></span>
<span id="line-S-46594-202"><span class="lno">202</span></span>
<span id="line-S-46594-203"><span class="lno">203</span></span>
<span id="line-S-46594-204"><span class="lno">204</span></span>
<span id="line-S-46594-205">205</span>
<span id="line-S-46594-206"><span class="lno">206</span></span>
<span id="line-S-46594-207"><span class="lno">207</span></span>
<span id="line-S-46594-208"><span class="lno">208</span></span>
<span id="line-S-46594-209"><span class="lno">209</span></span>
<span id="line-S-46594-210">210</span>
<span id="line-S-46594-211"><span class="lno">211</span></span>
<span id="line-S-46594-212"><span class="lno">212</span></span>
<span id="line-S-46594-213"><span class="lno">213</span></span>
<span id="line-S-46594-214"><span class="lno">214</span></span>
<span id="line-S-46594-215">215</span>
<span id="line-S-46594-216"><span class="lno">216</span></span>
<span id="line-S-46594-217"><span class="lno">217</span></span>
<span id="line-S-46594-218"><span class="lno">218</span></span>
<span id="line-S-46594-219"><span class="lno">219</span></span>
<span id="line-S-46594-220">220</span>
<span id="line-S-46594-221"><span class="lno">221</span></span>
<span id="line-S-46594-222"><span class="lno">222</span></span>
<span id="line-S-46594-223"><span class="lno">223</span></span>
<span id="line-S-46594-224"><span class="lno">224</span></span>
<span id="line-S-46594-225">225</span>
<span id="line-S-46594-226"><span class="lno">226</span></span>
<span id="line-S-46594-227"><span class="lno">227</span></span>
<span id="line-S-46594-228"><span class="lno">228</span></span>
<span id="line-S-46594-229"><span class="lno">229</span></span>
<span id="line-S-46594-230">230</span>
<span id="line-S-46594-231"><span class="lno">231</span></span>
<span id="line-S-46594-232"><span class="lno">232</span></span>
<span id="line-S-46594-233"><span class="lno">233</span></span>
<span id="line-S-46594-234"><span class="lno">234</span></span>
<span id="line-S-46594-235">235</span>
<span id="line-S-46594-236"><span class="lno">236</span></span>
<span id="line-S-46594-237"><span class="lno">237</span></span>
<span id="line-S-46594-238"><span class="lno">238</span></span>
<span id="line-S-46594-239"><span class="lno">239</span></span>
<span id="line-S-46594-240">240</span>
<span id="line-S-46594-241"><span class="lno">241</span></span>
<span id="line-S-46594-242"><span class="lno">242</span></span>
<span id="line-S-46594-243"><span class="lno">243</span></span>
<span id="line-S-46594-244"><span class="lno">244</span></span>
<span id="line-S-46594-245">245</span>
<span id="line-S-46594-246"><span class="lno">246</span></span>
<span id="line-S-46594-247"><span class="lno">247</span></span>
<span id="line-S-46594-248"><span class="lno">248</span></span>
<span id="line-S-46594-249"><span class="lno">249</span></span>
<span id="line-S-46594-250">250</span>
<span id="line-S-46594-251"><span class="lno">251</span></span>
<span id="line-S-46594-252"><span class="lno">252</span></span>
<span id="line-S-46594-253"><span class="lno">253</span></span>
<span id="line-S-46594-254"><span class="lno">254</span></span>
<span id="line-S-46594-255">255</span>
<span id="line-S-46594-256"><span class="lno">256</span></span>
<span id="line-S-46594-257"><span class="lno">257</span></span>
<span id="line-S-46594-258"><span class="lno">258</span></span>
<span id="line-S-46594-259"><span class="lno">259</span></span>
</pre></td><td valign="top"><pre><code class="language-xml">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                xmlns:db="http://docbook.org/ns/docbook"
                xmlns:ext="http://docbook.org/extensions/xslt"
                xmlns:f="http://docbook.org/ns/docbook/functions"
                xmlns:m="http://docbook.org/ns/docbook/modes"
                xmlns:map="http://www.w3.org/2005/xpath-functions/map"
                xmlns:mp="http://docbook.org/ns/docbook/modes/private"
                xmlns:t="http://docbook.org/ns/docbook/templates"
                xmlns:v="http://docbook.org/ns/docbook/variables"
                xmlns:vp="http://docbook.org/ns/docbook/variables/private"
                xmlns:xs="http://www.w3.org/2001/XMLSchema"
                xmlns="http://www.w3.org/1999/xhtml"
                exclude-result-prefixes="db ext f m map mp t v vp xs"
                version="3.0"&gt;

&lt;xsl:template name="t:preprocess" as="document-node()"&gt;
  &lt;xsl:param name="source" as="document-node()" select="."/&gt;

  &lt;xsl:variable name="source" as="document-node()"&gt;
    &lt;xsl:message use-when="'pipeline' = $v:debug"
                 select="'Preprocess: logical structure'"/&gt;
    &lt;xsl:sequence select="transform(map {
      'stylesheet-location': 'transforms/00-logstruct.xsl',
      'source-node': /
      })?output"/&gt;
  &lt;/xsl:variable&gt;

  &lt;xsl:variable use-when="function-available('ext:xinclude')"
                name="source" as="document-node()"&gt;
    &lt;xsl:message use-when="'pipeline' = $v:debug"
                 select="'Preprocess: xinclude'"/&gt;
    &lt;xsl:sequence select="transform(map {
      'stylesheet-location': 'transforms/10-xinclude.xsl',
      'source-node': $source
      })?output"/&gt;
  &lt;/xsl:variable&gt;

  &lt;xsl:variable name="source" as="document-node()"&gt;
    &lt;xsl:choose&gt;
      &lt;xsl:when test="namespace-uri($source/*) = ''"&gt;
        &lt;xsl:message use-when="'pipeline' = $v:debug"
                     select="'Preprocess: DocBook 4.x to 5.0'"/&gt;
        &lt;xsl:sequence select="transform(map {
                              'stylesheet-location': 'transforms/20-db4to5.xsl',
                              'source-node': $source,
                              'stylesheet-params': map {
                                  QName('', 'base-uri'): base-uri($source/*)
                                }
                              })?output"/&gt;
      &lt;/xsl:when&gt;
      &lt;xsl:otherwise&gt;
        &lt;xsl:sequence select="$source"/&gt;
      &lt;/xsl:otherwise&gt;
    &lt;/xsl:choose&gt;
  &lt;/xsl:variable&gt;

  &lt;xsl:variable name="source" as="document-node()"&gt;
    &lt;xsl:choose&gt;
      &lt;xsl:when test="f:is-true($docbook-transclusion)"&gt;
        &lt;xsl:message use-when="'pipeline' = $v:debug"
                     select="'Preprocess: transclude'"/&gt;
        &lt;xsl:sequence select="transform(map {
          'stylesheet-location': 'transforms/30-transclude.xsl',
          'source-node': $source,
          'stylesheet-params': map {
             QName('', 'psep'): $transclusion-prefix-separator
            }
          })?output"/&gt;
      &lt;/xsl:when&gt;
      &lt;xsl:otherwise&gt;
        &lt;xsl:sequence select="$source"/&gt;
      &lt;/xsl:otherwise&gt;
    &lt;/xsl:choose&gt;
  &lt;/xsl:variable&gt;

  &lt;!-- Profiling *isn't* done with an external transform
       because dynamic-profiling needs (potentially needs)
       access to all of the in-scope variables and parameters
       in this stylesheet --&gt;

  &lt;xsl:variable name="source" as="document-node()"&gt;
    &lt;xsl:message use-when="'pipeline' = $v:debug"
                 select="'Preprocess: profile'"/&gt;
    &lt;xsl:apply-templates select="$source" mode="m:profile"/&gt;
  &lt;/xsl:variable&gt;

  &lt;xsl:variable name="source" as="document-node()"&gt;
    &lt;xsl:message use-when="'pipeline' = $v:debug"
                 select="'Preprocess: normalize'"/&gt;
    &lt;xsl:sequence select="transform(map {
      'stylesheet-location': 'transforms/50-normalize.xsl',
      'source-node': $source,
      'stylesheet-params': map {
         QName('', 'glossary-collection'): $glossary-collection,
         QName('', 'bibliography-collection'): $bibliography-collection,
         QName('', 'annotation-collection'): $annotation-collection
       }
      })?output"/&gt;
  &lt;/xsl:variable&gt;

  &lt;xsl:variable name="source" as="document-node()"&gt;
    &lt;xsl:message use-when="'pipeline' = $v:debug"
                 select="'Preprocess: annotations'"/&gt;
    &lt;xsl:sequence select="transform(map {
      'stylesheet-location': 'transforms/60-annotations.xsl',
      'source-node': $source,
      'stylesheet-params': map {
         QName('', 'annotation-placement'): $annotation-placement
       }
      })?output"/&gt;
  &lt;/xsl:variable&gt;

  &lt;xsl:variable name="source" as="document-node()"&gt;
    &lt;xsl:message use-when="'pipeline' = $v:debug"
                 select="'Preprocess: xlinkbase'"/&gt;
    &lt;xsl:sequence select="transform(map {
                          'stylesheet-location': 'transforms/70-xlinkbase.xsl',
                          'source-node': $source
                          })?output"/&gt;
  &lt;/xsl:variable&gt;

  &lt;xsl:variable name="source" as="document-node()"&gt;
    &lt;xsl:choose&gt;
      &lt;xsl:when test="exists($local-conventions)"&gt;
        &lt;xsl:message use-when="'pipeline' = $v:debug"
                     select="'Preprocess: local-conventions'"/&gt;
        &lt;xsl:sequence select="transform(map {
                              'stylesheet-location': $local-conventions,
                              'source-node': $source
                              })?output"/&gt;
      &lt;/xsl:when&gt;
      &lt;xsl:otherwise&gt;
        &lt;xsl:sequence select="$source"/&gt;
      &lt;/xsl:otherwise&gt;
    &lt;/xsl:choose&gt;
  &lt;/xsl:variable&gt;

  &lt;xsl:variable use-when="function-available('ext:validate-with-relax-ng')"
                name="source" as="document-node()"&gt;
    &lt;xsl:choose&gt;
      &lt;xsl:when test="normalize-space($relax-ng-grammar) != ''"&gt;
        &lt;xsl:message use-when="'pipeline' = $v:debug"
                     select="'Preprocess: validate'"/&gt;
        &lt;xsl:sequence
            select="ext:validate-with-relax-ng($source, $relax-ng-grammar)?document"/&gt;
      &lt;/xsl:when&gt;
      &lt;xsl:otherwise&gt;
        &lt;xsl:sequence select="$source"/&gt;
      &lt;/xsl:otherwise&gt;
    &lt;/xsl:choose&gt;
  &lt;/xsl:variable&gt;

  &lt;xsl:if use-when="not(function-available('ext:validate-with-relax-ng'))"
          test="normalize-space($relax-ng-grammar) != ''"&gt;
    &lt;xsl:message select="'Ignoring validation, extension unavailable'"/&gt;
  &lt;/xsl:if&gt;

  &lt;xsl:variable name="source" as="document-node()"&gt;
    &lt;xsl:choose&gt;
      &lt;xsl:when test="f:is-true(f:pi($source/*/db:info, 'oxy-markup', $oxy-markup))
                      and exists($source//processing-instruction()
                                 [starts-with(name(), 'oxy_')])"&gt;
        &lt;xsl:message use-when="'pipeline' = $v:debug"
                     select="'Preprocess: oxy-markup'"/&gt;
        &lt;xsl:sequence select="transform(map {
                          'stylesheet-location': 'transforms/80-oxy-markup.xsl',
                          'source-node': $source
                          })?output"/&gt;
      &lt;/xsl:when&gt;
      &lt;xsl:otherwise&gt;
        &lt;xsl:sequence select="$source"/&gt;
      &lt;/xsl:otherwise&gt;
    &lt;/xsl:choose&gt;
  &lt;/xsl:variable&gt;
  
  &lt;xsl:sequence select="$source"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template name="t:process" as="document-node()"&gt;
  &lt;xsl:param name="source" as="document-node()" select="."/&gt;

  &lt;xsl:apply-templates select="$source" mode="m:docbook"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template name="t:chunk-cleanup" as="document-node()"&gt;
  &lt;xsl:param name="source" as="document-node()" select="."/&gt;
  &lt;xsl:param name="docbook" as="document-node()" required="yes"/&gt;

  &lt;xsl:apply-templates select="$source" mode="m:chunk-cleanup"&gt;
    &lt;xsl:with-param name="docbook" select="$docbook" tunnel="yes"/&gt;
  &lt;/xsl:apply-templates&gt;
&lt;/xsl:template&gt;

&lt;xsl:template name="t:chunk-output" as="map(xs:string, item()*)"&gt;
  &lt;xsl:param name="source" as="document-node()" select="."/&gt;
  &lt;xsl:param name="docbook" as="document-node()" required="yes"/&gt;

  &lt;xsl:apply-templates select="$source" mode="m:chunk-output"&gt;
    &lt;xsl:with-param name="docbook" select="$docbook" tunnel="yes"/&gt;
  &lt;/xsl:apply-templates&gt;
&lt;/xsl:template&gt;

&lt;xsl:template name="t:postprocess" as="document-node()?"&gt;
  &lt;xsl:param name="source" as="document-node()" select="."/&gt;
  &lt;xsl:param name="docbook" as="document-node()" required="yes"/&gt;

  &lt;xsl:variable name="result" as="document-node()"&gt;
    &lt;xsl:call-template name="t:chunk-cleanup"&gt;
      &lt;xsl:with-param name="source" select="$source"/&gt;
      &lt;xsl:with-param name="docbook" select="$docbook"/&gt;
    &lt;/xsl:call-template&gt;
  &lt;/xsl:variable&gt;

  &lt;xsl:variable name="result" as="map(xs:string, item()*)"&gt;
    &lt;xsl:call-template name="t:chunk-output"&gt;
      &lt;xsl:with-param name="docbook" select="$source"/&gt;
      &lt;xsl:with-param name="source" select="$result"/&gt;
    &lt;/xsl:call-template&gt;
  &lt;/xsl:variable&gt;

  &lt;xsl:for-each select="map:keys($result)"&gt;
    &lt;xsl:if test=". != 'output'"&gt;
      &lt;xsl:result-document href="{.}"&gt;
        &lt;xsl:sequence select="map:get($result, .)"/&gt;
      &lt;/xsl:result-document&gt;
    &lt;/xsl:if&gt;
  &lt;/xsl:for-each&gt;

  &lt;xsl:sequence select="$result?output"/&gt;
&lt;/xsl:template&gt;

&lt;xsl:template name="t:docbook"&gt;
  &lt;xsl:param name="source" as="document-node()" select="."/&gt;

  &lt;xsl:variable name="source" as="document-node()"&gt;
    &lt;xsl:call-template name="t:preprocess"&gt;
      &lt;xsl:with-param name="source" select="$source"/&gt;
    &lt;/xsl:call-template&gt;
  &lt;/xsl:variable&gt;

  &lt;xsl:variable name="result" as="document-node()"&gt;
    &lt;xsl:message use-when="'pipeline' = $v:debug"
                 select="'Process…'"/&gt;
    &lt;xsl:call-template name="t:process"&gt;
      &lt;xsl:with-param name="source" select="$source"/&gt;
    &lt;/xsl:call-template&gt;
  &lt;/xsl:variable&gt;

  &lt;xsl:message use-when="'pipeline' = $v:debug"
               select="'Postprocess…'"/&gt;
  &lt;xsl:call-template name="t:postprocess"&gt;
    &lt;xsl:with-param name="docbook" select="$source"/&gt;
    &lt;xsl:with-param name="source" select="$result"/&gt;
  &lt;/xsl:call-template&gt;
&lt;/xsl:template&gt;

&lt;/xsl:stylesheet&gt;
</code></pre></td></tr></table></div></div></div></div><p><span><span class="template all">3 templates</span></span></p><div class="instructions"><div class="title closed">Instructions</div><div class="body"><div id="S-52707-t-1" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ *  as element()</div><div class="props"><div class="calls">Calls: <a href="#S-52707-docbook.org.ns.docbook.templates.private.docbook">tp:docbook</a></div><div class="matches">Matches: <code>*</code></div></div></div><div id="S-52707-docbook.org.ns.docbook.templates.private.docbook" class="instruction template"><div class="title"><span class="link"></span>Template tp:docbook  match ≅ /</div><div class="props"><div class="uses">Uses: <a href="#S-26643-..generate-html-page">$generate-html-page</a></div><div class="calls">Calls: <a href="#S-28936-docbook.org.ns.docbook.functions.is-true,1">f:is-true()</a></div><div class="calls">Calls: <a href="#S-46594-docbook.org.ns.docbook.templates.chunk-cleanup">t:chunk-cleanup</a>, <a href="#S-46594-docbook.org.ns.docbook.templates.chunk-output">t:chunk-output</a>, <a href="#S-46594-docbook.org.ns.docbook.templates.preprocess">t:preprocess</a>, <a href="#S-46594-docbook.org.ns.docbook.templates.process">t:process</a></div><div class="used-by"><span class="marker"></span>Used by: <a href="#S-52707-t-1">template</a></div><div class="used-in"><span class="marker"></span>Used in: <a href="#S-52707">«root»</a></div><div class="matches">Matches: <code>/</code></div></div></div><div id="S-52707-t-3" class="instruction template"><div class="title"><span class="link"></span>Template match ≅ node()</div><div class="props"><div class="uses">Uses: <a href="#S-26643-..generate-html-page">$generate-html-page</a></div><div class="calls">Calls: <a href="#S-28936-docbook.org.ns.docbook.functions.is-true,1">f:is-true()</a></div><div class="mode">Mode: <code>m:chunk-write</code></div><div class="matches">Matches: <code>node()</code></div></div></div></div></div><div class="source-code"><div class="title closed">Source code</div><div class="body"><div><table><tr><td valign="top" align="right"><pre class="fake-prism"><span id="line-S-52707-1">1</span>
<span id="line-S-52707-2"><span class="lno">2</span></span>
<span id="line-S-52707-3"><span class="lno">3</span></span>
<span id="line-S-52707-4"><span class="lno">4</span></span>
<span id="line-S-52707-5">5</span>
<span id="line-S-52707-6"><span class="lno">6</span></span>
<span id="line-S-52707-7"><span class="lno">7</span></span>
<span id="line-S-52707-8"><span class="lno">8</span></span>
<span id="line-S-52707-9"><span class="lno">9</span></span>
<span id="line-S-52707-10">10</span>
<span id="line-S-52707-11"><span class="lno">11</span></span>
<span id="line-S-52707-12"><span class="lno">12</span></span>
<span id="line-S-52707-13"><span class="lno">13</span></span>
<span id="line-S-52707-14"><span class="lno">14</span></span>
<span id="line-S-52707-15">15</span>
<span id="line-S-52707-16"><span class="lno">16</span></span>
<span id="line-S-52707-17"><span class="lno">17</span></span>
<span id="line-S-52707-18"><span class="lno">18</span></span>
<span id="line-S-52707-19"><span class="lno">19</span></span>
<span id="line-S-52707-20">20</span>
<span id="line-S-52707-21"><span class="lno">21</span></span>
<span id="line-S-52707-22"><span class="lno">22</span></span>
<span id="line-S-52707-23"><span class="lno">23</span></span>
<span id="line-S-52707-24"><span class="lno">24</span></span>
<span id="line-S-52707-25">25</span>
<span id="line-S-52707-26"><span class="lno">26</span></span>
<span id="line-S-52707-27"><span class="lno">27</span></span>
<span id="line-S-52707-28"><span class="lno">28</span></span>
<span id="line-S-52707-29"><span class="lno">29</span></span>
<span id="line-S-52707-30">30</span>
<span id="line-S-52707-31"><span class="lno">31</span></span>
<span id="line-S-52707-32"><span class="lno">32</span></span>
<span id="line-S-52707-33"><span class="lno">33</span></span>
<span id="line-S-52707-34"><span class="lno">34</span></span>
<span id="line-S-52707-35">35</span>
<span id="line-S-52707-36"><span class="lno">36</span></span>
<span id="line-S-52707-37"><span class="lno">37</span></span>
<span id="line-S-52707-38"><span class="lno">38</span></span>
<span id="line-S-52707-39"><span class="lno">39</span></span>
<span id="line-S-52707-40">40</span>
<span id="line-S-52707-41"><span class="lno">41</span></span>
<span id="line-S-52707-42"><span class="lno">42</span></span>
<span id="line-S-52707-43"><span class="lno">43</span></span>
<span id="line-S-52707-44"><span class="lno">44</span></span>
<span id="line-S-52707-45">45</span>
<span id="line-S-52707-46"><span class="lno">46</span></span>
<span id="line-S-52707-47"><span class="lno">47</span></span>
<span id="line-S-52707-48"><span class="lno">48</span></span>
<span id="line-S-52707-49"><span class="lno">49</span></span>
<span id="line-S-52707-50">50</span>
<span id="line-S-52707-51"><span class="lno">51</span></span>
<span id="line-S-52707-52"><span class="lno">52</span></span>
<span id="line-S-52707-53"><span class="lno">53</span></span>
<span id="line-S-52707-54"><span class="lno">54</span></span>
<span id="line-S-52707-55">55</span>
<span id="line-S-52707-56"><span class="lno">56</span></span>
<span id="line-S-52707-57"><span class="lno">57</span></span>
<span id="line-S-52707-58"><span class="lno">58</span></span>
<span id="line-S-52707-59"><span class="lno">59</span></span>
<span id="line-S-52707-60">60</span>
<span id="line-S-52707-61"><span class="lno">61</span></span>
<span id="line-S-52707-62"><span class="lno">62</span></span>
<span id="line-S-52707-63"><span class="lno">63</span></span>
<span id="line-S-52707-64"><span class="lno">64</span></span>
<span id="line-S-52707-65">65</span>
<span id="line-S-52707-66"><span class="lno">66</span></span>
<span id="line-S-52707-67"><span class="lno">67</span></span>
<span id="line-S-52707-68"><span class="lno">68</span></span>
<span id="line-S-52707-69"><span class="lno">69</span></span>
<span id="line-S-52707-70">70</span>
<span id="line-S-52707-71"><span class="lno">71</span></span>
<span id="line-S-52707-72"><span class="lno">72</span></span>
<span id="line-S-52707-73"><span class="lno">73</span></span>
<span id="line-S-52707-74"><span class="lno">74</span></span>
<span id="line-S-52707-75">75</span>
<span id="line-S-52707-76"><span class="lno">76</span></span>
<span id="line-S-52707-77"><span class="lno">77</span></span>
<span id="line-S-52707-78"><span class="lno">78</span></span>
<span id="line-S-52707-79"><span class="lno">79</span></span>
<span id="line-S-52707-80">80</span>
<span id="line-S-52707-81"><span class="lno">81</span></span>
<span id="line-S-52707-82"><span class="lno">82</span></span>
<span id="line-S-52707-83"><span class="lno">83</span></span>
<span id="line-S-52707-84"><span class="lno">84</span></span>
<span id="line-S-52707-85">85</span>
<span id="line-S-52707-86"><span class="lno">86</span></span>
<span id="line-S-52707-87"><span class="lno">87</span></span>
<span id="line-S-52707-88"><span class="lno">88</span></span>
<span id="line-S-52707-89"><span class="lno">89</span></span>
<span id="line-S-52707-90">90</span>
<span id="line-S-52707-91"><span class="lno">91</span></span>
<span id="line-S-52707-92"><span class="lno">92</span></span>
<span id="line-S-52707-93"><span class="lno">93</span></span>
<span id="line-S-52707-94"><span class="lno">94</span></span>
<span id="line-S-52707-95">95</span>
<span id="line-S-52707-96"><span class="lno">96</span></span>
<span id="line-S-52707-97"><span class="lno">97</span></span>
<span id="line-S-52707-98"><span class="lno">98</span></span>
<span id="line-S-52707-99"><span class="lno">99</span></span>
<span id="line-S-52707-100">100</span>
<span id="line-S-52707-101"><span class="lno">101</span></span>
<span id="line-S-52707-102"><span class="lno">102</span></span>
<span id="line-S-52707-103"><span class="lno">103</span></span>
<span id="line-S-52707-104"><span class="lno">104</span></span>
<span id="line-S-52707-105">105</span>
<span id="line-S-52707-106"><span class="lno">106</span></span>
<span id="line-S-52707-107"><span class="lno">107</span></span>
<span id="line-S-52707-108"><span class="lno">108</span></span>
<span id="line-S-52707-109"><span class="lno">109</span></span>
<span id="line-S-52707-110">110</span>
<span id="line-S-52707-111"><span class="lno">111</span></span>
<span id="line-S-52707-112"><span class="lno">112</span></span>
</pre></td><td valign="top"><pre><code class="language-xml">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                xmlns:db="http://docbook.org/ns/docbook"
                xmlns:ext="http://docbook.org/extensions/xslt"
                xmlns:f="http://docbook.org/ns/docbook/functions"
                xmlns:h="http://www.w3.org/1999/xhtml"
                xmlns:m="http://docbook.org/ns/docbook/modes"
                xmlns:map="http://www.w3.org/2005/xpath-functions/map"
                xmlns:mp="http://docbook.org/ns/docbook/modes/private"
                xmlns:t="http://docbook.org/ns/docbook/templates"
                xmlns:tp="http://docbook.org/ns/docbook/templates/private"
                xmlns:v="http://docbook.org/ns/docbook/variables"
                xmlns:vp="http://docbook.org/ns/docbook/variables/private"
                xmlns:xs="http://www.w3.org/2001/XMLSchema"
                xmlns="http://www.w3.org/1999/xhtml"
                exclude-result-prefixes="db ext f h m map mp t tp v vp xs"
                version="3.0"&gt;

&lt;!-- This will all be in XProc 3.0 eventually, hack for now... --&gt;
&lt;xsl:import href="main.xsl"/&gt;
&lt;xsl:import href="drivers.xsl"/&gt;

&lt;xsl:output method="xhtml" encoding="utf-8" indent="no" html-version="5"
            omit-xml-declaration="yes"/&gt;

&lt;xsl:template match="*" as="element()"&gt;
  &lt;xsl:variable name="document" as="document-node()"&gt;
    &lt;xsl:document&gt;
      &lt;xsl:sequence select="."/&gt;
    &lt;/xsl:document&gt;
  &lt;/xsl:variable&gt;
  &lt;xsl:call-template name="tp:docbook"&gt;
    &lt;xsl:with-param name="source" select="$document"/&gt;
  &lt;/xsl:call-template&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="/" name="tp:docbook"&gt;
  &lt;xsl:param name="source" as="document-node()" select="."/&gt;

  &lt;xsl:variable name="source" as="document-node()"&gt;
    &lt;xsl:call-template name="t:preprocess"&gt;
      &lt;xsl:with-param name="source" select="$source"/&gt;
    &lt;/xsl:call-template&gt;
  &lt;/xsl:variable&gt;

  &lt;xsl:variable name="result" as="document-node()"&gt;
    &lt;xsl:call-template name="t:process"&gt;
      &lt;xsl:with-param name="source" select="$source"/&gt;
    &lt;/xsl:call-template&gt;
  &lt;/xsl:variable&gt;

  &lt;xsl:variable name="result" as="document-node()"&gt;
    &lt;xsl:call-template name="t:chunk-cleanup"&gt;
      &lt;xsl:with-param name="docbook" select="$source"/&gt;
      &lt;xsl:with-param name="source" select="$result"/&gt;
    &lt;/xsl:call-template&gt;
  &lt;/xsl:variable&gt;

  &lt;xsl:variable name="result" as="map(xs:string, item()*)"&gt;
    &lt;xsl:call-template name="t:chunk-output"&gt;
      &lt;xsl:with-param name="docbook" select="$source"/&gt;
      &lt;xsl:with-param name="source" select="$result"/&gt;
    &lt;/xsl:call-template&gt;
  &lt;/xsl:variable&gt;

  &lt;xsl:for-each select="map:keys($result)"&gt;
    &lt;xsl:if test=". != 'output'"&gt;
      &lt;xsl:apply-templates select="map:get($result, .)" mode="m:chunk-write"&gt;
        &lt;xsl:with-param name="href" select="."/&gt;
      &lt;/xsl:apply-templates&gt;
    &lt;/xsl:if&gt;
  &lt;/xsl:for-each&gt;

  &lt;xsl:choose&gt;
    &lt;xsl:when test="not($result?output/h:html)"&gt;
      &lt;xsl:sequence select="$result?output"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:when test="f:is-true($generate-html-page)"&gt;
      &lt;xsl:sequence select="$result?output"/&gt;
    &lt;/xsl:when&gt;
    &lt;xsl:otherwise&gt;
      &lt;xsl:sequence select="$result?output/h:html/h:body/node()
                            except $result?output/h:html/h:body/h:script"/&gt;
    &lt;/xsl:otherwise&gt;
  &lt;/xsl:choose&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="node()" mode="m:chunk-write"&gt;
  &lt;xsl:param name="href" as="xs:string" required="yes"/&gt;

  &lt;xsl:result-document href="{$href}"&gt;
    &lt;xsl:choose&gt;
      &lt;xsl:when test="not(self::h:html)"&gt;
        &lt;!-- If this happens not to be an h:html element, just output it. --&gt;
        &lt;xsl:sequence select="."/&gt;
      &lt;/xsl:when&gt;
      &lt;xsl:when test="f:is-true($generate-html-page)"&gt;
        &lt;!-- If this is an h:html element, and generate-html-page is true,
             output just output it. --&gt;
        &lt;xsl:sequence select="."/&gt;
      &lt;/xsl:when&gt;
      &lt;xsl:otherwise&gt;
        &lt;!-- We got an h:html, but the user has requested 'raw' output.
             Attempt to strip out the generated html page wrapper. --&gt;
        &lt;xsl:sequence select="h:body/node() except h:body/h:script"/&gt;
      &lt;/xsl:otherwise&gt;
    &lt;/xsl:choose&gt;
  &lt;/xsl:result-document&gt;
&lt;/xsl:template&gt;

&lt;/xsl:stylesheet&gt;
</code></pre></td></tr></table></div></div></div></div></main><footer><p>Generated by <a href="https://xslt.xmlexplorer.com/">XSLT Explorer</a> version <span title="git hash: 294d4e5">0.1.10</span> at 15:18 on 15 Sep 2021 with SAXON version HE 10.5.</p><p>Source: file:/home/circleci/repo/build/xslt/docbook.xsl</p></footer></body><script src="js/xsltexplorer.js"></script></html>