<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" class="no-js"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><script>(function(H){H.className=H.className.replace(/\bno-js\b/,'js')})(document.documentElement)</script><title>Five Interesting Things</title><link href="./css/pygments.css" rel="stylesheet"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><link href="https://purl.org/dc/elements/1.1/" rel="schema.dc"/><meta content="2011-04-22T17:02:00-06:00" name="dc.modified"/><meta name="dc.created" content="2020-07-18"/><meta content="DocBook xslTNG" name="generator"/><link href="./css/docbook-toc.css" rel="stylesheet"/><link href="./css/docbook.css" rel="stylesheet" media="screen"/><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=MML_CHTML" defer="defer"></script><script src="./js/annotations.js" defer="defer"></script><script src="./js/xlink.js" defer="defer"></script><script src="./js/persistent-toc.js" defer="defer"></script><script src="./js/copy-verbatim.js" defer="defer"></script></head><body class="home"><nav class="top"></nav><main><article id="book" class="book division"><header><h1>Five Interesting Things</h1><div class="author"><h3><span class="first-last personname"><span class="firstname">Norman</span> <span class="surname">Tovey-Walsh</span></span></h3></div><p class="pubdate"><time class="pubdate" datetime="2020-07-18">18 Jul 2020</time></p><div class="abstract"><p>This book highlights five interesting things about the
    <i class="citetitle">DocBook xslTNG Stylesheets</i>.</p></div><div class="revhistory"><header><div class="title">Revision History</div></header><table><colgroup><col class="revnumber"/><col class="date" style="text-align: right;"/><col class="author"/><col class="revremark"/></colgroup><tbody><tr class="revision"><td><span class="revnumber">1.1.0</span></td><td><span class="date" time="2020-07-18">18 Jul 2020</span></td><td><span class="authorinitials">ndw</span></td><td><p class="revremark">Renamed chapter 1 and chapter 5 on the advice of a reviewer.</p></td></tr><tr class="revision"><td><span class="revnumber">1.0.1</span></td><td><span class="date" time="2020-06-29">29 Jun 2020</span></td><td><span class="authorinitials">ndw</span></td><td><p class="revremark">Small changes motivated by improvements in the CSS for paged media.</p></td></tr><tr class="revision"><td><span class="revnumber">1.0.0</span></td><td><span class="date" time="2020-06-28">28 Jun 2020</span></td><td><span class="authorinitials">ndw</span></td><td><p class="revremark">First publication.</p></td></tr><tr class="revision"><td><span class="revnumber">0.0.1</span></td><td><span class="date" time="2020-06-20">20 Jun 2020</span></td><td><span class="authorinitials">ndw</span></td><td><p class="revremark">Initial draft.</p></td></tr></tbody></table></div><div class="copyright">Copyright © <span class="copyright-years"><span class="year">2020</span></span> <span class="holder">Norman Tovey-Walsh</span></div></header><div class="list-of-titles"><div class="lot toc"><div class="title">Table of Contents</div><ul class="toc"><li><a href="#look"><span class="label">1</span><span class="sep">. </span>Clean Look and Feel</a></li><li><a href="#toc"><span class="label">2</span><span class="sep">. </span>Persistent ToC</a></li><li><a href="#callouts"><span class="label">3</span><span class="sep">. </span>Callouts</a></li><li><a href="#annotations"><span class="label">4</span><span class="sep">. </span>Annotations</a></li><li><a href="#xlink"><span class="label">5</span><span class="sep">. </span>Extended Links</a></li><li><a href="#pdf"><span class="label">A</span><span class="sep">. </span>Paged media support</a></li><li><a href="#book_bi1">References</a></li></ul></div><div class="list-of-figures lot"><div class="title">List of Figures</div><ul class="toc"><li><a href="#look_fig1"><span class="label">1<span class="sep">.</span>1</span><span class="sep">. </span>Look and Feel in Firefox</a></li><li><a href="#toc_fig1"><span class="label">2<span class="sep">.</span>1</span><span class="sep">. </span>Persistent Table of Contents in Firefox</a></li></ul></div></div><section id="look" class="chapter component"><header><h2>Chapter <span class="label">1</span><span class="sep">. </span>Clean Look and Feel</h2></header><p>The output from the <i class="citetitle">DocBook xslTNG
Stylesheets</i> is designed to be clean, semantic
<a href="#HTML" class="xref xref-bibliomixed"><span class="label"><span class="abbrev">HTML</span></span></a> with
accessibility features wherever possible. The online presentation is
driven by modern, <a href="#caniuse" class="link">widely-available</a>
CSS and JavaScript APIs.</p><div id="look_fig1" class="figure formalobject pgwide"><div class="screenshot"><div class="mediaobject" summary="Screenshot of this chapter as rendered in Firefox on the Mac"><details><p>Screenshot of the new look and feel as rendered in Firefox.
There’s a header across the top with Home, Up, Next, and Previous
links. There’s a footer across the bottom with similar navigation
features divided into a three column table: Previous on the left, Up
and Home in the center, and Next on the right. The titles of preceding
and next pages are shown in the footer.</p></details><div class="media image"><picture class="imageobject"><img src="media/fit-screenshot.png" alt="Screenshot of this chapter as rendered in Firefox on the Mac" usemap="#imap_look_fig1_screenshot1_mediaobject1_imageobjectco1"/></picture><map name="imap_look_fig1_screenshot1_mediaobject1_imageobjectco1"><area shape="rect" id="lf.header" class="area" href="#lf.header.co" coords="28,113,176,196"/><area shape="rect" id="lf.access" class="area" href="#lf.access.co" coords="92,201,200,258"/><area shape="rect" id="lf.footer" class="area" href="#lf.footer.co" coords="40,304,176,412"/><area shape="rect" id="lf.perstoc" class="area" href="#lf.perstoc.co" coords="584,82,728,144"/><area shape="rect" id="lf.cleaner" class="area" href="#lf.cleaner.co" coords="584,160,744,224"/><area shape="rect" id="lf.customize" class="area" href="#lf.customize.co" coords="572,263,768,402"/></map></div></div></div><header><div class="title">Figure <span class="label">1<span class="sep">.</span>1</span><span class="sep">. </span>Look and Feel in Firefox</div></header></div><div class="calloutlist"><dl><dt id="lf.header.co" class="callout"><a class="callout-bug" href="#lf.header">①</a></dt><dd><p>The header is fixed to the top of the page so navigation links
are always available.</p></dd><dt id="lf.access.co" class="callout"><a class="callout-bug" href="#lf.access">②</a></dt><dd><p>Accessibility features include long descriptions of images and tables,
alt-text for images, and headers for table rows and columns. Where JavaScript is
used, reasonable non-JavaScript fallbacks are provided.</p></dd><dt id="lf.footer.co" class="callout"><a class="callout-bug" href="#lf.footer">③</a></dt><dd><p>On short pages, the footer always floats to the bottom of the page.
</p></dd><dt id="lf.perstoc.co" class="callout"><a class="callout-bug" href="#lf.perstoc">④</a></dt><dd><p>The “persistent ToC” feature puts the whole document’s Table of
Contents within easy reach on every page.</p></dd><dt id="lf.cleaner.co" class="callout"><a class="callout-bug" href="#lf.cleaner">⑤</a></dt><dd><p>The design is generally cleaner. There are different and
slightly larger fonts, the column width never exceeds a practical
reading width, and media queries make the design responsive to the
narrower displays on phones and tablets.</p></dd><dt id="lf.customize.co" class="callout"><a class="callout-bug" href="#lf.customize">⑥</a></dt><dd><p>The focus on clean, semantic markup means that you can create
new (and better!) styles with CSS. You can also write stylesheet
extensions to customize the markup, to add additional details to
the header and footer, for example.
</p></dd></dl></div></section><section id="toc" class="chapter component"><header><h2>Chapter <span class="label">2</span><span class="sep">. </span>Persistent Table of Contents</h2></header><p>The Persistent Table of Contents brings the document’s Table of
Contents navigation hierarchy to every page. Clicking on the
<span class="inlinemediaobject" summary="[toc]"><span class="media image"><picture class="imageobject"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAABYlAAAWJQFJUiTwAAABDklEQVQ4je2UUW3EMAyGv0wDUAhlkDBIyuAYXCEclEJoGZRBUgYOgzJoGHgPW6o7rWq35+2TIkWW9duW7N+oKuM46jiOGGMAaNsW5xzee5xzn8EvRESXZUFEWNcVAFWl73v6vjcGUIAYIyEEANZ1RUSY55lSCo/HA4BhGGiahtvthnOOtm0BSCnRdd1eVAGNMeoR27aptVattbpt22FOjFGrzjsX1I7q/4q3y4xf8i/4FwT3Pcw5Y4zBWvujfQMopZBzJuf8XbCeVyWEgHOO+/2+x0SEaZpIKSEih0X2Wz6jdlxKuezaqL7qpZS0lLKbw/M4ANba3RyapiGE8OJGqOrpizGq916999VATvM/AGFn1sxsVjL5AAAAAElFTkSuQmCC" alt="[toc]"/></picture></span></span>
link in the upper right corner slides out the Table of Contents window
from the right hand edge of the screen.
</p><div id="toc_fig1" class="figure formalobject pgwide"><div class="screenshot"><div class="mediaobject" summary="Screenshot of this chapter with the persistent ToC as rendered in Firefox on the Mac"><details><p>Screenshot showing the persistent table of contents rendered
as a popup on the right hand side of the page.</p></details><div class="media image"><picture class="imageobject"><img src="media/fit-ptoc.png" alt="Screenshot of this chapter with the persistent ToC as rendered in Firefox on the Mac"/></picture></div></div></div><header><div class="title">Figure <span class="label">2<span class="sep">.</span>1</span><span class="sep">. </span>Persistent Table of Contents in Firefox</div></header></div><p>Links in the persistent ToC navigate to the pages they identify.
For large documents with long ToCs, the window scrolls and attempts to
place the current page at the top of the ToC view.</p></section><section id="callouts" class="chapter component"><header><h2>Chapter <span class="label">3</span><span class="sep">. </span>Callouts</h2></header><p>Callouts are a mechanism for decorating the verbatim content of
<code class="tag tag-element">programlisting</code> elements with marks that can be
cross-referenced in documentation. They have the real advantage that
they can be used to decorate the actual code or other
listing. Importing the actual
listing assures that the documented listing and the actual listing
will be the same.</p><p>A system where you have to import the code or add the markup
inline introduces the risk that the listing being documented will not
be updated when the underlying resource is updated.</p><p>The program below computes the
“<em>n</em>th” Fibonacci number.</p><div class="programlistingco"><div class="pre-wrap highlight" db-startinglinenumber="1" db-numberoflines="9"><pre class="language-python long numbered programlisting verbatim verblines"><span class="line" db-line="1"><span class="ln">1 <span class="nsep">|</span></span><span class="ld"><code><span class="ch">#!/bin/env python</span></code></span></span>
<span class="line" db-line="2"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code> </code></span></span>
<span class="line" db-line="3"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code><span class="sd">"""Computes the n'th Fibonacci number."""</span></code></span></span>
<span class="line" db-line="4"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code> </code></span></span>
<span class="line" db-line="5"><span class="ln">5 <span class="nsep">|</span></span><span class="ld"><code><span class="kn">import</span> <span class="nn">sys</span></code></span></span>
<span class="line" db-line="6"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code><span class="kn">import</span> <span class="nn">math</span></code></span></span>
<span class="line" db-line="7"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code><span class="kn">import</span> <span class="nn">click</span>  <a id="py.importclick" class="callout-bug linecolumn" href="#py.importclick.co" db-line="7" db-column="15" title="Highlights the click library">①</a></code></span></span>
<span class="line" db-line="8"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code> </code></span></span>
<span class="line" db-line="9"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code><span class="n">SQRT5</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>  <a id="py.sqrt5" class="callout-bug linecolumn" href="#py.sqrt5.co" db-line="9" db-column="23" title="Constant: √5">②</a></code></span></span>
</pre></div><div class="calloutlist"><dl><dt id="py.importclick.co" class="callout"><a class="callout-bug" href="#py.importclick">①</a></dt><dd><p><a href="#Click" class="xref xref-bibliomixed"><span class="label"><span class="abbrev">Click</span></span></a> is my current favorite library for
parsing command line arguments in Python.</p></dd><dt id="py.sqrt5.co" class="callout"><a class="callout-bug" href="#py.sqrt5">②</a></dt><dd><p>This <span id="fibmml" class="phrase">constant<a class="annomark" href="#py.fib.co_annotation1"><sup>⌖</sup><sup class="num">1</sup></a></span> is the 
<span class="inlineequation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="inline">
<msqrt><mrow><mn>5</mn></mrow></msqrt></math></span>.
</p></dd></dl></div></div><p>I’m also taking advantage of the ability to use
<a href="#XInclude" class="xref xref-bibliomixed"><span class="label"><span class="abbrev">XInclude</span></span></a> (and <a href="#RFC5147" class="xref xref-bibliomixed"><span class="label"><span class="abbrev">RFC 5147</span></span></a>)
to break the listing into manageable
fragments for documentation. The listing above, and the one below,
are lines from the same file.</p><div class="programlistingco"><div class="pre-wrap highlight" db-startinglinenumber="11" db-numberoflines="26"><pre class="language-python long numbered programlisting verbatim verblines"><span class="line" db-line="1"><span class="ln">11 <span class="nsep">|</span></span><span class="ld"><code><span class="nd">@click</span><span class="o">.</span><span class="n">command</span><span class="p">()</span></code></span></span>
<span class="line" db-line="2"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code><span class="nd">@click</span><span class="o">.</span><span class="n">argument</span><span class="p">(</span><span class="s2">"number"</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span></code></span></span>
<span class="line" db-line="3"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>               <a id="py.click" class="callout-bug linecolumn" href="#py.click.co" db-line="3" db-column="16" title="Click takes care of type checking the arguments">③</a> <span class="nb">type</span><span class="o">=</span><span class="n">click</span><span class="o">.</span><span class="n">IntRange</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="kc">None</span><span class="p">))</span></code></span></span>
<span class="line" db-line="4"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code><span class="k">def</span> <span class="nf">fibonacci</span><span class="p">(</span><span class="n">number</span><span class="p">):</span></code></span></span>
<span class="line" db-line="5"><span class="ln">15 <span class="nsep">|</span></span><span class="ld"><code><span class="w">    </span><span class="sd">"""Calculate the 'number'th Fibonacci number."""</span></code></span></span>
<span class="line" db-line="6"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>    <span class="n">prefix</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">"The </span><span class="si">{</span><span class="n">make_ordinal</span><span class="p">(</span><span class="n">number</span><span class="p">)</span><span class="si">}</span><span class="s2"> Fibonacci number is "</span></code></span></span>
<span class="line" db-line="7"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>    <span class="k">try</span><span class="p">:</span></code></span></span>
<span class="line" db-line="8"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>        <span class="n">value</span> <span class="o">=</span> <span class="p">(((</span><span class="mi">1</span> <span class="o">+</span> <span class="n">SQRT5</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">**</span> <span class="n">number</span> <span class="o">-</span></code></span></span>
<span class="line" db-line="9"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>                 <span class="p">((</span><span class="mi">1</span> <span class="o">-</span> <span class="n">SQRT5</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">**</span> <span class="n">number</span><span class="p">)</span> <span class="o">/</span> <span class="n">SQRT5</span>      <a id="py.fib" class="callout-bug linecolumn" href="#py.fib.co" db-line="9" db-column="60" title="Closed-form calculation of n’th Fibonacci number">④</a></code></span></span>
<span class="line" db-line="10"><span class="ln">20 <span class="nsep">|</span></span><span class="ld"><code>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">prefix</span><span class="si">}{</span><span class="n">math</span><span class="o">.</span><span class="n">floor</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="si">:</span><span class="s2">,</span><span class="si">}</span><span class="s2">."</span><span class="p">)</span></code></span></span>
<span class="line" db-line="11"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>    <span class="k">except</span> <span class="ne">OverflowError</span><span class="p">:</span></code></span></span>
<span class="line" db-line="12"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">prefix</span><span class="si">}</span><span class="s2">too large to calculate."</span><span class="p">)</span></code></span></span>
<span class="line" db-line="13"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>        <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span></code></span></span>
<span class="line" db-line="14"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code> </code></span></span>
<span class="line" db-line="15"><span class="ln">25 <span class="nsep">|</span></span><span class="ld"><code> </code></span></span>
<span class="line" db-line="16"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code><span class="k">def</span> <span class="nf">make_ordinal</span><span class="p">(</span><span class="n">n</span><span class="p">):</span></code></span></span>
<span class="line" db-line="17"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code><span class="w">    </span><span class="sd">"""Create an ordinal from a number."""</span></code></span></span>
<span class="line highlight line18" db-line="18"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>    <span class="c1"># https://stackoverflow.com/questions/9647202</span>          <span id="py.ordinal" href="#py.ordinal.co" db-line="18" db-column="60" title="Stackoverflow answer to the question “how do I make an&#xA;    ordinal number in Python”?" class="callout-bug linerange firstline">⑤</span></code></span></span>
<span class="line" db-line="19"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>    <span class="n">suffix</span> <span class="o">=</span> <span class="p">[</span><span class="s2">"th"</span><span class="p">,</span> <span class="s2">"st"</span><span class="p">,</span> <span class="s2">"nd"</span><span class="p">,</span> <span class="s2">"rd"</span><span class="p">,</span> <span class="s2">"th"</span><span class="p">][</span><span class="nb">min</span><span class="p">(</span><span class="n">n</span> <span class="o">%</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">4</span><span class="p">)]</span></code></span></span>
<span class="line" db-line="20"><span class="ln">30 <span class="nsep">|</span></span><span class="ld"><code>    <span class="k">if</span> <span class="mi">11</span> <span class="o">&lt;=</span> <span class="p">(</span><span class="n">n</span> <span class="o">%</span> <span class="mi">100</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">13</span><span class="p">:</span></code></span></span>
<span class="line" db-line="21"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>        <span class="n">suffix</span> <span class="o">=</span> <span class="s2">"th"</span></code></span></span>
<span class="line" db-line="22"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>    <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="o">+</span> <span class="n">suffix</span></code></span></span>
<span class="line" db-line="23"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code> </code></span></span>
<span class="line" db-line="24"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code> </code></span></span>
<span class="line" db-line="25"><span class="ln">35 <span class="nsep">|</span></span><span class="ld"><code><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">"__main__"</span><span class="p">:</span></code></span></span>
<span class="line" db-line="26"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code>    <span class="n">fibonacci</span><span class="p">()</span>  <a id="py.main" class="callout-bug linecolumn" href="#py.main.co" db-line="26" db-column="18" title="If this is a main program, run it!">⑥</a></code></span></span>
</pre></div><div class="calloutlist"><dl><dt id="py.click.co" class="callout"><a class="callout-bug" href="#py.click">③</a></dt><dd><p>One of the real strengths of using a tool like Click to wrangle
arguments is that you get type and range checking pretty much for free.</p></dd><dt id="py.fib.co" class="callout"><a class="callout-bug" href="#py.fib">④</a></dt><dd><p>This is the closed-form solution to finding the
“<em>n</em>th” Fibonacci number:</p><div id="py.fib.co_informalequation1" class="informalequation informalobject"><math xmlns="http://www.w3.org/1998/Math/MathML" class="equation" display="block">
<mfrac>
  <mrow><mn>1</mn></mrow>
  <mrow><msqrt><mrow><mn>5</mn></mrow></msqrt></mrow></mfrac> <mfenced separators="" open="(" close=")"><mrow><msup><mrow><mfenced separators="" open="(" close=")"><mrow><mfrac><mrow><mn>1</mn> <mo class="MathClass-bin">+</mo> <msqrt><mrow><mn>5</mn></mrow></msqrt></mrow>
  <mrow><mn>2</mn></mrow></mfrac>    </mrow></mfenced></mrow><mrow><mi>n</mi></mrow></msup> <mo class="MathClass-bin">-</mo><msup><mrow><mfenced separators="" open="(" close=")"><mrow><mfrac><mrow><mn>1</mn> <mo class="MathClass-bin">-</mo><msqrt><mrow><mn>5</mn></mrow></msqrt></mrow>
  <mrow><mn>2</mn></mrow></mfrac></mrow></mfenced></mrow>
  <mrow><mi>n</mi></mrow></msup></mrow></mfenced>
</math></div><p>The closed-form solution amuses me because I used calculating Fibonacci
numbers
(recursively) as an argument for greater expressive power in XSLT 1.0.
“What if I wanted to number a list with the Fibonacci numbers?”
</p></dd><dt id="py.ordinal.co" class="callout"><a class="callout-bug" href="#py.ordinal">⑤</a></dt><dd><p>Stackoverflow showed me how to print the number as an ordinal.</p></dd><dt id="py.main.co" class="callout"><a class="callout-bug" href="#py.main">⑥</a></dt><dd><p>Finally, if this is a main program, compute the answer.</p></dd></dl></div></div><p>If you hover over the callout numbers in the listing,
alt-text will be displayed.</p></section><section id="annotations" class="chapter component"><header><h2>Chapter <span class="label">4</span><span class="sep">. </span>Annotations</h2></header><p>Annotations, as the name
<span id="implies" class="phrase">implies<a class="annomark" href="#annotations_annotation2"><sup>⌖</sup><sup class="num">3</sup></a></span>, allow you to associate
annotations with content in your document. Annotations are
non-local (they’re associated by ID/IDREF not containment)
and the linking markup is <span class="phrase">bi-directional<a class="annomark" href="#bi-directional"><sup>⌖</sup><sup class="num">4</sup></a></span>.
The same annotation <span id="u1" class="phrase">can<a class="annomark" href="#repeated"><sup>⌖</sup><sup class="num">2</sup></a></span>
be used
<span class="phrase">more than once<a class="annomark" href="#repeated"><sup>⌖</sup><sup class="num">2</sup></a></span>.</p><p>Annotations can be rendered with or without JavaScript support.
With JavaScript, the annotations are popups. Without JavaScript,
they’re presented at the bottom of the page, similar to footnotes, but
styled somewhat differently. In paged media,
annotations are rendered as footnotes and their titles are ignored.
</p></section><section id="xlink" class="chapter component"><header><h2>Chapter <span class="label">5</span><span class="sep">. </span>Extended Links</h2></header><p id="xlinkpara"><a href="#XLink" class="xref xref-bibliomixed"><span class="label"><span class="abbrev">XLink</span></span></a> extended links, like
<a href="annotations" class="link">annotations</a>, can be non-local.
The more interesting feature is that
unlike HTML anchors, they can also have multiple endpoints. Consider
the following link:
<a class="annomark" href="#xlink_annotation1"><sup>⌖</sup><sup class="num">5</sup></a></p><div class="pre-wrap highlight" db-startinglinenumber="1" db-numberoflines="14"><pre class="language-xml long numbered programlisting verbatim verblines"><span class="line" db-line="1"><span class="ln"> 1 <span class="nsep">|</span></span><span class="ld"><code><span class="nt">&lt;phrase</span><span class="w"> </span><span class="na">xmlns:xlink=</span><span class="s">"http://www.w3.org/1999/xlink"</span></code></span></span>
<span class="line" db-line="2"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code><span class="w">        </span><span class="na">xlink:type=</span><span class="s">"extended"</span><span class="nt">&gt;</span></code></span></span>
<span class="line" db-line="3"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code><span class="w">  </span><span class="nt">&lt;link</span><span class="w"> </span><span class="na">xlink:title=</span><span class="s">"DocBook.org"</span></code></span></span>
<span class="line" db-line="4"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code><span class="w">        </span><span class="na">xlink:label=</span><span class="s">"target"</span></code></span></span>
<span class="line" db-line="5"><span class="ln"> 5 <span class="nsep">|</span></span><span class="ld"><code><span class="w">        </span><span class="na">xlink:href=</span><span class="s">"http://docbook.org/"</span></code></span></span>
<span class="line" db-line="6"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code><span class="w">        </span><span class="na">xlink:type=</span><span class="s">"locator"</span><span class="nt">/&gt;</span></code></span></span>
<span class="line" db-line="7"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code><span class="w">  </span><span class="nt">&lt;link</span><span class="w"> </span><span class="na">xlink:title=</span><span class="s">"DocBook on Wikipedia"</span></code></span></span>
<span class="line" db-line="8"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code><span class="w">        </span><span class="na">xlink:label=</span><span class="s">"target"</span></code></span></span>
<span class="line" db-line="9"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code><span class="w">        </span><span class="na">xlink:href=</span><span class="s">"http://en.wikipedia.org/wiki/DocBook"</span></code></span></span>
<span class="line" db-line="10"><span class="ln">10 <span class="nsep">|</span></span><span class="ld"><code><span class="w">        </span><span class="na">xlink:type=</span><span class="s">"locator"</span><span class="nt">/&gt;</span></code></span></span>
<span class="line" db-line="11"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code><span class="w">  </span><span class="nt">&lt;citetitle</span><span class="w"> </span><span class="na">xlink:label=</span><span class="s">"source"</span><span class="w"> </span><span class="na">xlink:type=</span><span class="s">"resource"</span></code></span></span>
<span class="line" db-line="12"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code><span class="w">  </span><span class="nt">&gt;</span>DocBook<span class="nt">&lt;/citetitle&gt;</span></code></span></span>
<span class="line" db-line="13"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code><span class="w">  </span><span class="nt">&lt;link</span><span class="w"> </span><span class="na">xlink:to=</span><span class="s">"target"</span><span class="w"> </span><span class="na">xlink:from=</span><span class="s">"source"</span><span class="w"> </span><span class="na">xlink:type=</span><span class="s">"arc"</span><span class="nt">/&gt;</span></code></span></span>
<span class="line" db-line="14"><span class="ln">   <span class="nsep">|</span></span><span class="ld"><code><span class="nt">&lt;/phrase&gt;</span></code></span></span>
</pre></div><p>With JavaScript enabled, this link to
<i class="citetitle"><span class="xlink"><span class="source">DocBook</span><span class="xlink-arc-list" db-arcs="xlink_para2_phrase1_citetitle1-arcs"></span><span class="nhrefs" id="xlink_para2_phrase1_citetitle1-arcs"><span class="xlink-arc-delim before"> [</span><span class="xlink-arc-title"></span><span class="arc"><a href="http://docbook.org/">DocBook.org</a></span><span class="xlink-arc-delim sep">, </span><span class="arc"><a href="http://en.wikipedia.org/wiki/DocBook">DocBook on Wikipedia</a></span><span class="xlink-arc-delim after">] </span></span></span></i> has a popup menu to select the link target. Rendered without JavaScript,
the link choices are presented as alternatives after the link.
In print media, the link URIs are also shown in
parenthesis.</p></section><section id="pdf" class="appendix component"><header><h2>Appendix <span class="label">A</span><span class="sep">. </span>Paged media support</h2></header><p>The <i class="citetitle">DocBook xslTNG Stylesheets</i> anticipate
that “print” output, that is, paged media, will be provided with a CSS
formatter such as <a href="#AntennaHouse" class="xref xref-bibliomixed"><span class="label"><span class="abbrev">AntennaHouse</span></span></a> or <a href="#Prince" class="xref xref-bibliomixed"><span class="label"><span class="abbrev">Prince</span></span></a>.</p><p>The stylesheet intended for paged media output produces slightly
different HTML than the online stylesheet. This print customization
assures that JavaScript features are disabled and changes the markup
used for some elements.</p><p>The resulting “<code class="extension filename">.pdf.html</code>” file
is then processed by the formatter.</p><p>In as much as the different CSS formatters behave differently
and have different extensions for features that are needed in print
but not yet standardized, additional customization may be necessary.</p></section><div id="book_bi1" class="bibliography component"><header><h2>References</h2></header><p id="AntennaHouse" class="bibliomixed">[<span class="abbrev">AntennaHouse</span>] <i class="citetitle"><a href="https://www.antennahouse.com/">AH Formatter</a></i>. Version 7.0.3.
</p><p id="caniuse" class="bibliomixed">[<span class="abbrev">CanIUse</span>] <i class="citetitle"><a href="https://caniuse.com/">Can I use… Support tables for
HTML5, CSS3, etc</a></i>. 20 June 2020.</p><p id="Click" class="bibliomixed">[<span class="abbrev">Click</span>] <i class="citetitle"><a href="https://click.palletsprojects.com/en/7.x/">Click</a></i>.
Version 7.2.</p><p id="CSS" class="bibliomixed">[<span class="abbrev">CSS</span>] <i class="citetitle"><a href="https://www.w3.org/Style/CSS/specs.en.html">CSS Specifications</a></i>.
World Wide Web Consortium. 2020.</p><p id="HTML" class="bibliomixed">[<span class="abbrev">HTML</span>] <i class="citetitle"><a href="https://html.spec.whatwg.org/">HTML: Living Standard</a></i>.
18 June 2020.</p><p id="MathJax" class="bibliomixed">[<span class="abbrev">MathJax</span>] <i class="citetitle"><a href="https://www.mathjax.org/">MathJax</a></i>.
</p><p id="MathML" class="bibliomixed">[<span class="abbrev">MathML</span>] <i class="citetitle"><a href="https://www.w3.org/TR/MathML3/">Mathematical Markup
Language (MathML) Version 3.0</a></i>. World Wide Web
Consortium. 2014.
</p><p id="metadata-extractor" class="bibliomixed">[<span class="abbrev">metadata-extractor</span>] <i class="citetitle"><a href="https://drewnoakes.com/code/exif/">metadata-extractor</a></i>.
Version 2.14.0.</p><p id="Prince" class="bibliomixed">[<span class="abbrev">Prince</span>] <i class="citetitle"><a href="https://www.princexml.com/">Prince</a></i>.
Version 13.5.</p><p id="RFC5147" class="bibliomixed">[<span class="abbrev">RFC 5147</span>] <i class="citetitle"><a href="https://tools.ietf.org/html/rfc5147">URI Fragment Identifiers
for the text/plain Media Type</a></i>. E. Wilde and M. Duerst,
editors. Internet Engineering Task Force. 2008.
</p><p id="XInclude" class="bibliomixed">[<span class="abbrev">XInclude</span>] <i class="citetitle"><a href="https://www.w3.org/TR/xinclude/">XML Inclusions (XInclude)
Version 1.0 (Second Edition)</a></i>. World Wide Web
Consortium. 2006.
</p><p id="XLink" class="bibliomixed">[<span class="abbrev">XLink</span>] <i class="citetitle"><a href="https://www.w3.org/TR/xlink/">XML Linking Language (XLink) Version 1.1</a></i>
World Wide Web Consortium. 2010.
</p></div><section id="book_co1" class="colophon component"><header><h2>Colophon</h2></header><p>This book was authored in DocBook 5.1
with Emacs. It was formatted for presentation with the
<i class="citetitle">DocBook xslTNG Stylesheets</i>.
</p></section></article><footer><div class="annotations"><div class="annotation-wrapper title">Annotations</div><div id="py.fib.co_annotation1" class="annotation-wrapper"><div class="annotation-body"><div class="annotation-header"><div class="annotation-close"></div><div class="annotation-title"><span class="annomark"><sup>⌖</sup><sup class="num">1</sup> </span></div></div><div class="annotation-content">
<p>If you use <a href="#MathML" class="xref xref-bibliomixed"><span class="label"><span class="abbrev">MathML</span></span></a>, the stylesheets automatically include the
<a href="#MathJax" class="xref xref-bibliomixed"><span class="label"><span class="abbrev">MathJax</span></span></a> libraries (or the MathML rendering libraries of
your choosing). This allows you to display complex equations, of course, but it
can also improve the appearance of even simple expressions, such as
√5.</p>
<p>(This is an annotation, more about them in
the next chapter.)</p>
</div></div></div><div id="annotations_annotation2" class="annotation-wrapper"><div class="annotation-body"><div class="annotation-header"><div class="annotation-close"></div><div class="annotation-title"><span class="annomark"><sup>⌖</sup><sup class="num">3</sup> </span>Annotation, noun</div></div><div class="annotation-content">

<p>According to Merriam-Webster,
<a href="https://www.merriam-webster.com/dictionary/annotation" class="link">an
annotation</a> is a note added by way of comment or explanation.
They give as an example quotation:
</p>
<blockquote class="blockquote"><p>The bibliography was provided with helpful annotations.</p></blockquote>
</div></div></div><div id="bi-directional" class="annotation-wrapper"><div class="annotation-body"><div class="annotation-header"><div class="annotation-close"></div><div class="annotation-title"><span class="annomark"><sup>⌖</sup><sup class="num">4</sup> </span></div></div><div class="annotation-content">
<p>Annotations can point to the elements the annotate.
Alternatively, elements can point to their annotations.</p>
</div></div></div><div id="repeated" class="annotation-wrapper"><div class="annotation-body"><div class="annotation-header"><div class="annotation-close"></div><div class="annotation-title"><span class="annomark"><sup>⌖</sup><sup class="num">2</sup> </span></div></div><div class="annotation-content">
<p>This one is pointless, but it is used twice.</p>
</div></div></div><div id="xlink_annotation1" class="annotation-wrapper tall wide"><div class="annotation-body"><div class="annotation-header"><div class="annotation-close"></div><div class="annotation-title"><span class="annomark"><sup>⌖</sup><sup class="num">5</sup> </span>Simplifying link markup</div></div><div class="annotation-content">

<p>It’s worth noting that although the XLink vocabulary is defined
purely in terms of attributes so that it can more easily be embedded in
other vocabularies, there’s no reason a DocBook customization couldn’t
use simplified markup to identify links:</p>

<div class="pre-wrap highlight"><pre class="language-xml programlisting verbatim verblines"><span class="line" db-line="1"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code><span class="nt">&lt;extended-link&gt;</span></code></span></span>
<span class="line" db-line="2"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code><span class="w">  </span><span class="nt">&lt;target</span><span class="w"> </span><span class="na">title=</span><span class="s">"DocBook.org"</span><span class="w"> </span><span class="na">href=</span><span class="s">"http://docbook.org/"</span><span class="nt">/&gt;</span></code></span></span>
<span class="line" db-line="3"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code><span class="w">  </span><span class="nt">&lt;target</span><span class="w"> </span><span class="na">title=</span><span class="s">"DocBook on Wikipedia"</span></code></span></span>
<span class="line" db-line="4"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code><span class="w">          </span><span class="na">href=</span><span class="s">"http://en.wikipedia.org/wiki/DocBook"</span><span class="nt">/&gt;</span></code></span></span>
<span class="line" db-line="5"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code><span class="w">  </span><span class="nt">&lt;citetitle&gt;</span>DocBook<span class="nt">&lt;/citetitle&gt;</span></code></span></span>
<span class="line" db-line="6"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code><span class="nt">&lt;/extended-link&gt;</span></code></span></span>
</pre></div>

<p>In this example, I’ve adopted the convention that an <code class="tag tag-element">extended-link</code>
element identifies an extended link with the semantic that <code class="tag tag-element">target</code> element(s)
identify the link target and any other element identifies the source.</p>

<p>This is equivalent to the attribute form and could easily be translated into it.</p>
</div></div></div></div></footer></main><nav class="bottom"><nav class="tocopen"></nav><nav class="toc"></nav><!-- Hide ToC details from user agents that don’t support JS --><script type="text/html" class="tocopen"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAABYlAAAWJQFJUiTwAAABDklEQVQ4je2UUW3EMAyGv0wDUAhlkDBIyuAYXCEclEJoGZRBUgYOgzJoGHgPW6o7rWq35+2TIkWW9duW7N+oKuM46jiOGGMAaNsW5xzee5xzn8EvRESXZUFEWNcVAFWl73v6vjcGUIAYIyEEANZ1RUSY55lSCo/HA4BhGGiahtvthnOOtm0BSCnRdd1eVAGNMeoR27aptVattbpt22FOjFGrzjsX1I7q/4q3y4xf8i/4FwT3Pcw5Y4zBWvujfQMopZBzJuf8XbCeVyWEgHOO+/2+x0SEaZpIKSEih0X2Wz6jdlxKuezaqL7qpZS0lLKbw/M4ANba3RyapiGE8OJGqOrpizGq916999VATvM/AGFn1sxsVjL5AAAAAElFTkSuQmCC" alt="[toc]"/></script><script type="text/html" class="toc"><header><span>Table of Contents</span><span class="close"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAtklEQVQ4jaWT0Q3DIAxEz52AEbyB2cDZhBEY3SNcPyqqBEwqpZaQAHNP5jBCEiJCPAiSIgAeiUe8zoveO9x9e9jd0XtfKwHA1hpHtNY49rO8u59zn4mqMiJSyFkcEVTVFQCAtdYFMotrrXN111JnyA/xCsggN2JeXmGEmaGU8l2XUmBm29fZuh0RW2PTK2SGZcamADPb3nmGmNkKOI7j1rAzJG2kcWhqkstQ1QX+/2ciKU/FJOUN6JFZYWpmK3sAAAAASUVORK5CYII=" alt="X"/></span><p class="ptoc-search"><input class="ptoc-search" placeholder="Search" style="width: 80%"/></p></header><div db-prefix=""><ul class="toc"><li><a href="#look"><span class="label">1</span><span class="sep">. </span>Clean Look and Feel</a></li><li><a href="#toc"><span class="label">2</span><span class="sep">. </span>Persistent ToC</a></li><li><a href="#callouts"><span class="label">3</span><span class="sep">. </span>Callouts</a></li><li><a href="#annotations"><span class="label">4</span><span class="sep">. </span>Annotations</a></li><li><a href="#xlink"><span class="label">5</span><span class="sep">. </span>Extended Links</a></li><li><a href="#pdf"><span class="label">A</span><span class="sep">. </span>Paged media support</a></li><li><a href="#book_bi1">References</a></li></ul><ul class="nav-title"><li class="nav-title">List of Figures</li><li><a href="#look_fig1"><span class="label">1<span class="sep">.</span>1</span><span class="sep">. </span>Look and Feel in Firefox</a></li><li><a href="#toc_fig1"><span class="label">2<span class="sep">.</span>1</span><span class="sep">. </span>Persistent Table of Contents in Firefox</a></li></ul></div></script></nav><script type="text/html" class="annotation-close"><span>╳</span></script></body></html>