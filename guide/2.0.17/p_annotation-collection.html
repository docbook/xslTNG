<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" class="no-js"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><script>(function(H){H.className=H.className.replace(/\bno-js\b/,'js')})(document.documentElement)</script><title>$annotation-collection</title><link href="./css/pygments.css" rel="stylesheet"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><link href="https://purl.org/dc/elements/1.1/" rel="schema.dc"/><meta name="dc.modified" content="2023-04-07T10:19:54Z"/><meta name="dc.created" content="2023-04-07T10:19:54Z"/><meta name="generator" content="DocBook xslTNG version 2.0.17-SNAPSHOT / abdf947 / SAXON HE 11.5"/><link href="./css/guide-toc.css" rel="stylesheet"/><link href="./css/docbook.css" rel="stylesheet" media="screen"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><link href="css/guide.css" rel="stylesheet"/><link href="css/guide-online.css" rel="stylesheet"/><link href="media/xsltng-icon.png" rel="shortcut icon"/><script src="https://kit.fontawesome.com/c94d537c36.js" type="text/javascript" crossorigin="anonymous"></script><link rel="prev" href="p_annotate-toc.html"/><link rel="next" href="p_annotation-mark.html"/><link rel="up" href="params.html"/><link rel="home" href="index.html"/><script src="./js/xlink.js" defer="defer"></script><script src="./js/persistent-toc.js" defer="defer"></script><script src="./js/pagetoc.js" data-dynamic-pagetoc="true" defer="defer"></script><script src="./js/chunk-nav.js" defer="defer"></script></head><body><nav class="top"><span class="nav"><a title="DocBook xslTNG Reference" href="index.html"><i class="fas fa-home"></i></a> <a href="p_annotate-toc.html" title="$annotate-toc"><i class="fas fa-arrow-left"></i></a> <a title="I .  Parameter reference" href="params.html"><i class="fas fa-arrow-up"></i></a> <a title="$annotation-mark" href="p_annotation-mark.html"><i class="fas fa-arrow-right"></i></a></span><span class="title"><i class="title">DocBook xslTNG Reference</i></span><span class="logo"><img src="media/xsltng-inverted.png"/></span></nav><div class="pagebody"><main><section id="p_annotation-collection" db-chunk="p_annotation-collection.html" db-id="d151e5281" class="component refentry"><span class="indexterm" id="p_annotation-collection_indexterm1"></span><div id="param-ann8995"></div><div id="p_annotation-collection_refnamediv1" class="refnamediv"><header><h2><span class="refentrytitle">$annotation-collection</span></h2></header><p><span class="refname">$annotation-collection</span><span class="refpurpose"><span class="refpurpose-sep"> — </span><span class="refpurpose-text">An external collection of annotations</span><span class="refpurpose-punc">.</span></span></p></div><div class="a-detail mode-detail"><div><div class="prop">Parameter:</div><div>{}annotation-collection</div></div><div><div class="prop">Defined in:</div><div><span>param.xsl</span></div></div><div><div class="prop">Used in:</div><div>param.xsl</div></div></div><section id="p_annotation-collection_refsynopsisdiv1" class="refsynopsisdiv"><header><h2>Synopsis</h2></header><div class="pre-wrap"><pre class="synopsis verbatim verblines"><span class="line" db-line="1"><span class="ln">  <span class="nsep">|</span></span><span class="ld"><code>$annotation-collection as xs:string := ''</code></span></span>
</pre></div></section><section id="p_annotation-collection_refsection1" class="refsection"><header><h2>Description</h2></header>
         
         <p>Because annotations can be applied by pointing from the
annotation to the element they annotate, they can be stored and
managed externally. If <a href="#p_annotation-collection"><code class="paramname">$annotation-collection</code></a><span class="indexterm" id="p_annotation-collection_refsection1_para1_indexterm1"></span>
points to a collection of annotations, the stylesheets will add them
to the document before it is processed.</p>
         <p>To achieve this:</p>
         <ol class="orderedlist" type="1"><li><p>Create a collection of shared annotations and store them somewhere. The
stylesheets will copy only the top-level <code class="tag tag-element">annotation</code> elements
(<code class="literal">/*/annotation</code>). The
document element doesn’t matter.</p></li><li><p>Use the <code class="tag tag-attribute">annotates</code> attribute on the annotations to
point at elements in the document you’re transforming.
</p><p>Annotations can point in either direction, but you will get
ID/IDREF validation errors if you attempt to point from the document
into the annotation collection because the annotation collection won’t
be present when you validate. If your use case requires pointing in
that direction, you will have better luck with a pipeline that
combines the two documents before validating.</p></li><li><p>Run your transformation with
<a href="#p_annotation-collection"><code class="paramname">$annotation-collection</code></a><span class="indexterm" id="p_annotation-collection_refsection1_orderedlist1_listitem3_para1_indexterm1"></span> set to the URI of the
document that contains your collection of annotations.
</p></li></ol>
         <p>The stylesheets will apply annotations to the elements
identified. Extra annotations, annotations that don’t point to
elements that actually exist in the document being transformed, will
be ignored.
</p>
      </section></section></main><nav class="pagetoc"><div class="tocwrapper"></div></nav></div><nav class="bottom"><div class="navrow"><div class="navleft"><a title="$annotate-toc" href="p_annotate-toc.html"><i class="fas fa-arrow-left"></i></a></div><div class="navmiddle"><a title="" href="index.html"><i class="fas fa-home"></i></a></div><div class="navright"><a title="$annotation-mark" href="p_annotation-mark.html"><i class="fas fa-arrow-right"></i></a></div></div><div class="navrow"><div class="navleft navtitle">$annotate-toc</div><div class="navmiddle"><a title="I .  Parameter reference" href="params.html"><i class="fas fa-arrow-up"></i></a></div><div class="navright navtitle">$annotation-mark</div></div><div class="infofooter"><span class="copyrightfooter"><a href="dbcpyright.html">Copyright</a> © 2020–2023 Norman Walsh.</span></div><nav class="tocopen"></nav><nav class="toc"></nav><!-- Hide ToC details from user agents that don’t support JS --><script type="text/html" class="tocopen"><i class="far fa-book"></i></script><script type="text/html" class="toc"><header><span>Table of Contents</span><span class="close"><i class="far fa-window-close"></i></span><p class="ptoc-search"><input class="ptoc-search" placeholder="Search" style="width: 80%"/></p></header><div db-persistent-toc="persistent-toc.html" db-prefix="">Loading…</div></script></nav></body></html>